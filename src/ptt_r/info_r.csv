"","post_id","post_author","post_category","post_title","post_date_time","post_ip","post_country","post_content","post_board"
"1","dummy","dummy","dummy","dummy",1970-01-01 00:00:00,"dummy","dummy","dummy","dummy"
"2","M.1575349019.A.638","isolaXCC","分享","PTT資料獲取工具-PTTmineR",2019-12-03 12:56:56,"114.45.141.210","臺灣","嗨大家好！想來這邊跟大家分享小弟自製的套件 PTTmineR！

PTTmineR 開發的目的是希望以 PTT 為材料的輿情、SNA以及文字探勘分析人員可以不用
寫爬蟲專注在分析工作上，相較於一般的爬蟲 PTTmineR 有以下特色：

- 友善使用者的語意化使用方式
- 整合多種 PTT 文章搜尋方式
- 內部高效率的資料處理(使用data.table)
- 支持平行運算(使用future)

以上特色可以讓使用者簡單快速地獲取 PTT 的文本，相關使用方法都可以先參考 repo
首頁的文件，如果有相關建議或是想回報 bug，可以直接跟我說或是在 issue 中做討論
！謝謝！(如果覺得這個套件有幫助到你也請幫我點個星星XDD)

github repo:https://github.com/shihjyun/PTTmineR如果有任何問題或是建議，可以在 issue 中讓我知道！

--","R_Language"
"3","M.1575130624.A.295","j2225653","問題","rvest爬取股票網頁資料",2019-12-01 00:17:02,"1.175.67.86","臺灣","[問題類型]:

經驗諮詢(我想用R爬取網頁資料，請問大家的經驗)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

跑範例跑出以下錯誤訊息

Error in open.connection(x, ""rb"") : HTTP error 503.

以前爬還沒問題，不知道是不是網站有在過濾爬蟲，用CHROME瀏覽正常。

[程式範例]:

library(rvest)

url <- ""https://www.wantgoo.com/stock/astock/agentstat2?stockno=1722""DATA = read_html(url)

[環境敘述]:

R version 3.6.1 (2019-07-05)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18362)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] jsonlite_1.6 httr_1.4.1   rvest_0.3.4  xml2_1.2.2

loaded via a namespace (and not attached):
[1] compiler_3.6.1 magrittr_1.5   R6_2.4.0       tools_3.6.1
curl_4.2       Rcpp_1.0.2

[關鍵字]:

rvest 爬蟲

--","R_Language"
"4","M.1575126128.A.A96","empireisme","問題","Re: 迴圈的計算(小複雜)",2019-11-30 23:02:04,"219.91.75.186","臺灣","※ 引述《empireisme (empireisme)》之銘言：: 我本身使用R大概一兩年: 目前想要寫出一個小function可以計算出以下的公式: https://imgur.com/supH7mE: d 是要計算出來的向量 長度是m: A 是一個矩陣維度是n*m，裡面的元素都是正的: alpha是A矩陣的元素: p 是一個向量長度為m 其為機率向量 裡面的元素相加等於1: 以下是我的程式碼，雖然檢查過很多次，但不確定有沒有算錯: 或是有沒有辦法用矩陣的方式去計算之，因為這樣算太慢了: set.seed(1): m=10: n=7: A <- matrix( rexp(m*n),ncol=m ,nrow=n     ): p <- c(  0.05,0.1,0.3,0.05,0.05,0.05,0.07,0.03,0.2,0.1): sum(p ): length(p ): den <- rep(0,n): densum <- rep(0,n): d<- rep(0,m): for(j in 1:m){: for(i in 1:n){:   den[i]<- sum(A[i,]*p):   densum[i]<- A[i,j]*p[j]/den[i]:   d[j]<- sum( densum ): }: }: 下面是我算出來的: [1] 0.336093550 0.855872710 2.158927311 0.233847299 0.282627585:  [6] 0.253739688 0.517757929 0.312419250 0.760612933 1.288101743https://pastebin.com/wBRDricf我需要計算的A矩陣有0在裡面，這是我後來的想法，關鍵點在於

我新增了 一行A(i,j)>0的判斷

不知道如果我的A矩陣 有很多0的狀況下 是否就只能用迴圈來寫了

或是有更快的方法 謝謝

我新增的寫法
確認這方法可以用 所以補上

expected_death3 <- function(A,s){
#A <- datatest_A
#s <- s_test
numerator<- sweep(A, 2, s, ""*"")#numeratordenominator <- matrix(rep(A%*%s,length(s)),ncol=length(s))
denominator
bigA <- numerator/denominator
#bigA
bigA[is.nan(bigA)] <- 0 #to skip zero
#bigA
d <- colSums(bigA)
return(d)
}
--","R_Language"
"5","M.1575049279.A.E11","andrew43","問題","Re: 生滿足條件的樣本個數",2019-11-30 01:41:16,"220.133.43.95","臺灣","可以改成 Recursive Function。

samplemaker_weibull <-
  function(n = 100,
           shape = 4,
           scale = 1,
           end = 1.5,
           res) {
    x <- rweibull(n, shape, scale)
    t <- runif(n, 0, end)
    observedx <- x[which(x > t)]

    if (length(observedx) == n) {
      return(observedx)
    } else {
      res <- observedx
      return(
        c(res,
          samplemaker_weibull(n - length(res), shape, scale, end, res)
        )
      )
    }
  }
samplemaker_weibull()

過程就是先做一次，若長度不夠就自己遞迴。
若是第一次寫遞迴可能會看不懂，可先從簡單的例子練習。
留意到需要增加一個 res parameter 來達成串接，但不需要指定值。※ 引述《empireisme (empireisme)》之銘言：: 我本身使用R大概一兩年: 我想要生滿足條件的樣本直到某個特定數字 例如100個: 目前自己想到的解法是 生遠大於100個樣本: 例如1000個 再去找前100個 但這樣就會生超多個: 我知道可能可以使用while 或是 repeat做到: 但是想不太到條件: 希望前輩可以提示一下怎麼設條件的作法: 我的目的是使得obserdx的個數到n個 (例如100): observedx 的條件如下: observedx <- x[which(x>t)]: 以下是我的生樣本code: samplemaker_weibull<- function(n=130,shape=4,scale=1,end=1.5 ){: x <- rweibull(n,shape,scale): t <- runif(n,0,end): observedx <- x[which(x>t)]: return(observedx): }--","R_Language"
"6","M.1575007274.A.0AB","Blackdawn","問題","Twitch API 疑問(httr)",2019-11-29 14:01:11,"180.217.110.142","臺灣","最近開始接觸httr套件

目前懂得利用利用他來抓取 Steam API 上遊戲數據

現在想要透過Twitch API 來擷取觀看次數或是熱門遊戲等等的資料

而且也已經註冊且取得自己的Client ID

但是我卡在不知道如何把Client ID 正確的輸入在程式碼上面

以下是Twitch 提供的 範例程式碼：https://i.imgur.com/3XEvxSE.jpg假如要在R上面輸入上述程式碼，要如何輸入client ID呢？

twitchapi <- content(GET(""https://api.twitch.tv/helix/streams?game_id=33214""),a
s = ""parsed"")

如果輸入不正確或是未輸入Client ID則twitchapi不會顯示任何資訊

感謝大家∼

--","R_Language"
"7","M.1574995070.A.8CC","empireisme","問題","生滿足條件的樣本個數",2019-11-29 10:37:44,"219.91.75.186","臺灣","我本身使用R大概一兩年


我想要生滿足條件的樣本直到某個特定數字 例如100個

目前自己想到的解法是 生遠大於100個樣本

例如1000個 再去找前100個 但這樣就會生超多個

我知道可能可以使用while 或是 repeat做到

但是想不太到條件

希望前輩可以提示一下怎麼設條件的作法

我的目的是使得obserdx的個數到n個 (例如100)

observedx 的條件如下

observedx <- x[which(x>t)]

以下是我的生樣本code

samplemaker_weibull<- function(n=130,shape=4,scale=1,end=1.5 ){


x <- rweibull(n,shape,scale)
t <- runif(n,0,end)

observedx <- x[which(x>t)]

return(observedx)

}

--","R_Language"
"8","M.1574656447.A.C05","empireisme","問題","迴圈的計算(小複雜)",2019-11-25 12:34:01,"219.91.75.186","臺灣","我本身使用R大概一兩年

目前想要寫出一個小function可以計算出以下的公式https://imgur.com/supH7mEd 是要計算出來的向量 長度是m

A 是一個矩陣維度是n*m，裡面的元素都是正的

alpha是A矩陣的元素

p 是一個向量長度為m 其為機率向量 裡面的元素相加等於1



以下是我的程式碼，雖然檢查過很多次，但不確定有沒有算錯

或是有沒有辦法用矩陣的方式去計算之，因為這樣算太慢了

set.seed(1)
m=10
n=7

A <- matrix( rexp(m*n),ncol=m ,nrow=n     )

p <- c(  0.05,0.1,0.3,0.05,0.05,0.05,0.07,0.03,0.2,0.1)

sum(p )
length(p )

den <- rep(0,n)

densum <- rep(0,n)

d<- rep(0,m)

for(j in 1:m){
for(i in 1:n){

  den[i]<- sum(A[i,]*p)
  densum[i]<- A[i,j]*p[j]/den[i]
  d[j]<- sum( densum )
}
}

下面是我算出來的

[1] 0.336093550 0.855872710 2.158927311 0.233847299 0.282627585
 [6] 0.253739688 0.517757929 0.312419250 0.760612933 1.288101743
--","R_Language"
"9","M.1573551907.A.A06","jerkoffme","問題","taskscheduleR",2019-11-12 17:45:05,"101.10.9.136","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

我想在 local 段跑 daily 的 R script
我知道用兩個方式
1. Rstudio 裡的 Addins --> 我設定完後，我有看到要跑的 script 複製到該 package
   的 exdata folder，但好像一直抓不到檔案，指定時間到了完全沒跑
2. 只接用 taskscheduleR 下指令

library(taskscheduleR)
myscript <- ""../appPostPromotionTest.R"" # path to script

taskscheduler_create(taskname = ""testtask5"", rscript = myscript,
                     schedule = ""HOURLY"", starttime = ""17:35"",
                     startdate = format(Sys.Date(), ""%Y/%m/%d""))

時間到了後，在該 folder 產出 log 檔，裡面顯示如下

[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""UTF-8"") :
  作業系統回報無法實現設定語區為 ""UTF-8"" 的要求
錯誤: 7:1: 未預期的 ')'
7: )
    ^
停止執行

想請問這要如何解，或始有其他方式能讓我跑 job 嗎

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
想在 local 端跑 daily job with R script

[環境敘述]:R version 3.5.3 (2019-03-11)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 10 x64 (build 18362)Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] shiny_1.3.2            taskscheduleR_1.4      lubridate_1.7.4forcats_0.4.0          purrr_0.3.2[6] readr_1.3.1            tidyr_1.0.0            tibble_2.1.3ggplot2_3.2.1          tidyverse_1.2.1[11] stringr_1.4.0          bigrquery_1.2.0        dplyr_0.8.3googleAnalyticsR_0.7.0 googleAuthR_1.1.1loaded via a namespace (and not attached):Error in x[[""Version""]] : subscript out of boundsIn addition: Warning messages:1: In FUN(X[[i]], ...) :DESCRIPTION file of package 'htmltools' is missing or broken2: In FUN(X[[i]], ...) :DESCRIPTION file of package 'later' is missing or broken3: In FUN(X[[i]], ...) :DESCRIPTION file of package 'promises' is missing or broken--推 maxxV3:說真的    有人總統想選一個女人家嗎  = =                  04/19 21:48→ teremy:韓國總統都是女的了。韓國還不夠大男人嗎?                  04/19 21:49噓 miler22020:樓上是遠古時帶來的嗎                                 04/19 21:49→ miler22020:樓樓上                                               04/19 21:49推 Top5566:樓樓樓上                                                04/19 21:50→ miler22020:樓樓樓樓   幹 算了                                   04/19 21:50--","R_Language"
"10","M.1573309005.A.9B0","hank830214","問題","關於爬蟲-抓取資料日期",2019-11-09 22:16:43,"1.160.188.204","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大好，小弟想利用R抓取集保所股權分散表查詢中所有的資料日期

一開始，我透過開發者工具(Chrome中按下F12)，找到可能可抓到資料日期的 Request URL (https://www.tdcc.com.tw/smWeb/QryStockAjax.do)有看到 Form Data 有 REQ_OPR: qrySelScaDates

但是下一步就不知道要怎麼把 Response (資料日期) 抓出來。

謝謝！

[程式範例]:

url <- ""https://www.tdcc.com.tw/smWeb/QryStockAjax.do""# 嘗試用 POST
library(httr)
query <- list('form[REQ_OPR]' = ""qrySelScaDates"")
response <- POST(url, body = query)
content(response, ""text"") # 沒有任何東西

[關鍵字]

rvest, httr, RCurl

--","R_Language"
"11","M.1573139193.A.266","AndrewShi","問題","篩選符合條件的資料",2019-11-07 23:06:31,"140.122.212.226","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
    各位大大好，小弟我有一組颱風侵台的資訊資料，如果我只想要抽出一天當中影響時
間有持續達到18小時以上(也就是當天日期""時""包含0.6.12.18)的那些天數的資訊的話(
如能加上次日0時的條件(滿24小時)那更好)，想請教我寫的程式碼(#抽出符合條件的資料
那行)該如何修改才正確呢??謝謝。
ps:篩選出來符合條件只有1979/7/9.10

颱風資訊檔案放在這裡:http://0rz.tw/JI056[程式範例]:
library(csv)
library(dplyr)

#讀取颱風資料
typhoon <- read.csv(""C:\\Users\\TOM\\Desktop\\颱風資料\\typhoon.csv"")

#抽出符合條件的資料
typhoon <- typhoon %>% group_by(Day) %>%
mutate(count=case_when(Day==Hour[c(0,6,12,18)] ~ ""count""))

[環境敘述]:

[關鍵字]:
篩選資料  csv檔  颱風

--","R_Language"
"12","M.1572942453.A.6BB","eco100","問題","搜尋字串的位置回傳",2019-11-05 16:27:31,"140.109.32.9","臺灣","不好意思，再問一個字串的問題

假設我有一組字串 x <- c(""ABBACA"", ""BDGDAD"", ""BFDBG"")

我想要針對x搜尋""A""所在的位置

例如第一個字串A的位置 是發生在該字串的1, 4, 6 位置
第二個字串 A發生在 5 的位置
第三個字串則沒有

請問有什麼方式可以得到這樣的結果？

如果用regexpr 好像只能回傳第一次hit到的位置？

感謝大家！

--","R_Language"
"13","M.1572936345.A.F54","eco100","問題","取代字元比較有效率的寫法",2019-11-05 14:45:43,"140.109.32.9","臺灣","例如我有一個字串 ""AAFDEFGDSGGHFDR""

我現在想要把 ""A"", ""F"", ""R""這三個字母取代成""x""

變成""xxxDExGDSGGHxDx""

想到的就是用for迴圈+gsub函數

除了這個寫法外，有無更有效率的寫法？

感謝！

--","R_Language"
"14","M.1572516776.A.E5D","AndrewShi","問題","ggplot疊圖",2019-10-31 18:12:54,"140.122.212.62","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
   各位大大好，小弟我想利用R畫台灣附近颱風的軌跡線，而上網查到一個利用ggplot畫
軌跡線的程式範例，因此我就拿來用在我的資料上，然後也上網查了要如何用ggplot畫台
灣地圖，但ggmap現在似乎要付費才有辦法使用，所以我找了另一個用ggplot畫台灣地圖
的範例，但因為在此之前都沒用過ggplot畫圖過，所以不知道該如何將颱風的軌跡線疊加
到台灣地圖上，還請教大大們，謝謝。
颱風軌跡線資訊和台灣地圖的檔案皆放在這裡:http://0rz.tw/JI056[程式範例]:
library(csv)
library(ggplot2)
library(dplyr)
library(dplyr)
library(stringr)
library(data.table)
library(maptools)
library(knitr)
library(kableExtr)

#讀取颱風資料
typhoon <- read.csv(""C:\\Users\\TOM\\Desktop\\typhoon.csv"")
View(typhoon)

typhoon <- typhoon %>% group_by(CycloneNo) %>%
mutate(state=case_when(StepNo==1 ~ ""Start"",
                       StepNo==max(StepNo)~ ""End"",
                       T ~ ""NA""))
View(typhoon)

#畫軌跡線
ggplot(typhoon,aes(x=LongE,y=LatN,group=CycloneNo,color=as.factor(CycloneNo)))
+
  geom_path() +
  geom_point(data=typhoon %>%
filter(state!=""NA""),aes(fill=state,shape=state),size=2 ) +
  geom_text(data=typhoon %>%
filter(state==""Start""),aes(label=CycloneNo),color=""black"",vjust=0,hjust=1) +
  guides(colour=F)

#畫台灣地圖
taiwan_shp <-
readShapeSpatial(""C:\\Users\\TOM\\Desktop\\TWN_adm2\\TWN_adm2.shp"")
taiwan_map <- fortify(taiwan_shp)
map <- ggplot(taiwan_map, aes(x = long, y = lat, group=group)) +
  geom_path() +
  coord_map()

[環境敘述]:
畫出來的軌跡線和台灣地圖分別為下面這兩張圖，而要疊在一起我想兩張圖的坐標軸應該
要一致才有辦法疊在一起，但我不知道該如何將兩者的經緯度調成一樣和疊圖的設定。https://imgur.com/yrAJzznhttps://imgur.com/hUTzDvA[關鍵字]:
ggplot 疊圖 軌跡線 地圖

--","R_Language"
"15","M.1571729428.A.289","sodboy","問題","multiple proportion test",2019-10-22 15:30:26,"1.200.216.214","臺灣","大大好
如果我今天要檢定多組間發生率是否有無差異，使用prop.test()是正確的嘛？
自變項是性別加國籍，
依變項是發生率（十萬分之一為單位）
另，如何判斷發生率是否為稀有事件呢，我覺得我發生率好像蠻低，prop.test()較正要
用什麼語法呢？
謝謝！

--","R_Language"
"16","M.1571420148.A.6E5","AmuroRai","問題","用R跑Simulated Method of Moment",2019-10-19 01:35:44,"101.78.113.188","新加坡","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近寫了個理論模型，然後在coauthor的要求下被趕鴨子上架要跑SMM
（天曉得我們兩個都是做理論的，基本上對計量的東西都......）

查了一些計量講義後大概有點知道code要怎樣寫，但是大部分的人好像都是用Matlab或

Python在跑，目前還沒找到R的範例

目前覺得比較會有問題的地方是跑optimization的部分。因為我們的理論模型產生的動差

條件還蠻複雜的，而且要拿來套用的資料量也有點大，據說得用上simulated annealing

因此想請問我該使用那些package / function來處理這部分？

另外如果要造iterated variance-covariance estimator的話是不是只能自己寫迴圈處理

了？

附上目前找到比較詳細的參考資料（Python）https://notes.quantecon.org/submission/5b3db2ceb9eab00015b89f93--","R_Language"
"17","M.1571305703.A.71D","j2225653","問題","下載氣象局監測站CSV檔",2019-10-17 17:48:21,"114.40.104.71","臺灣","問題:

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想要寫自動化下載氣象局監測資料CSV檔的腳本，但光單純下載一個連結的CSV檔卻跟

單純連結手動點選下載的CSV檔內容不同


[程式範例]:

testurl =
""https://e-service.cwb.gov.tw/HistoryDataQuery/YearDataController.do?command=viewMain&station=466950&stname=%25E5%25BD%25AD%25E4%25BD%25B3
%25E5%25B6%25BC&datepicker=2018""

download.file(url = testurl,destfile = ""C:/DATA/4669502018.csv"",method =
""curl"")



[環境敘述]:
R version 3.6.1 (2019-07-05)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 18362)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RCurl_1.95-4.12 bitops_1.0-6    RSQLite_2.1.2

loaded via a namespace (and not attached):
 [1] bit_1.1-14      compiler_3.6.1  backports_1.1.5 DBI_1.0.0
 [5] tools_3.6.1     memoise_1.1.0   Rcpp_1.0.2      bit64_0.9-7
 [9] vctrs_0.2.0     blob_1.2.0      zeallot_0.1.0   digest_0.6.21
[13] rlang_0.4.0

[關鍵字]:

氣象局

--","R_Language"
"18","M.1570962668.A.FA0","celestialgod",NA,"Re: 重複取樣不放回（不使用sample)",2019-10-13 18:31:06,"119.14.59.166","臺灣","※ 引述《siscom (妹控)》之銘言：: 大家好: 最近在上程式語言的課: 教授請我們跑bootstrap: 但不使用sample的function 而是自己寫function: 條件為: Create a function call my.sample with three arguments:: x:the data to be resampled: n:number of data points to sample: Replacement:resample with replacement or not: Only ‘runif’ ‘order’ and ‘if else’ statements are allowed: 請問這要怎麼撰寫呢？: 想破頭還是想不出來my.sample <- function(x, n, replace = FALSE) {
  if (!replace && length(x) < n)
    stop(""The size must be less than the size of x when replace is TRUE."")
  if (replace) {
    prob <- 0:length(x)/length(x)
    return(x[findInterval(runif(n), prob)])
  } else {
    return(x[order(runif(length(x)))][1:n])
  }
}

findInterval如果不能用就自己用迴圈做一個吧XD


--","R_Language"
"19","M.1570199871.A.68F","siscom",NA,"重複取樣不放回（不使用sample)",2019-10-04 22:37:49,"49.214.236.161","臺灣","大家好

最近在上程式語言的課

教授請我們跑bootstrap

但不使用sample的function 而是自己寫function

條件為
Create a function call my.sample with three arguments:

x:the data to be resampled
n:number of data points to sample
Replacement:resample with replacement or not

Only ‘runif’ ‘order’ and ‘if else’ statements are allowed

請問這要怎麼撰寫呢？

想破頭還是想不出來

--","R_Language"
"20","M.1570085012.A.994","chunyuchang","問題","如何快速將row name改成Group A至J",2019-10-03 14:43:30,"42.77.150.152","臺灣","我是R超級新手，請見諒Orz
假設有個matrix m1
m1 <- matrix(1:50, nrow = 10, byrow = TRUE)
我想要讓row的名字是Group A, Group B...到Group J
除了用rownames(m1) <- c(“Group A”, “Group B”, “Group C”, “Group D”, “
Group E”, “Group F”, “Group G”, “Group H”, “Group I”, “Group J”)以
外
有沒有其他較簡潔快速的方式？
我想說可以用for建立一個loop
但用不出來
請各位解惑！

--","R_Language"
"21","M.1569725107.A.11F","Wush978","問題","Re: 用Python呼叫R, 再包成exe檔？",2019-09-29 10:45:05,"111.240.207.235","臺灣","我建議你要先諮詢軟體授權相關律師。

R 的 license 應該是 GPL v2 / v3、你用的R 套件的 license 可能大部分也是。

這種 license 具有感染性，所以你的程式碼可能會被強迫要 GPL v2 / v3。

結果就是你在散布程式碼的時候，必須要開源。

所以R 是商業不太友善的工具。※ 引述《Edster (Edster)》之銘言：: - 問題：: 能否用Python打包R, 最後做成單獨執行的exe？: [問題類型]:: 經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗): 開發者(有撰寫R 的套件經驗): [問題敘述]:: 我主要是用R，剛自學python沒多久。: 最近有案主要我提供可執行的程式，(本來是幫他們算完就好, 但現在要程式)。: 因為不想直接給原始程式碼，且他們同意做成exe.: 想請問能否用Python做成執行檔, 但實際上裡面全部是在做R的運算？: 因為有引用幾個重要的package是R寫的，所以也不能直接換成python來算。: ps: 請問這樣我引用的package也要每次都呼叫嗎?: 要是他們換電腦不就還要重新裝那隻package?--","R_Language"
"22","M.1569535893.A.084","beatnik","問題","Re: 以時間間隔為條件，抽取資料",2019-09-27 06:11:31,"36.234.37.26","臺灣","感謝原原po的發問以及c大的解答
正好也遇到類似的狀況
但照著做之後,

# 計算時間差，以小時表示
DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]

這一段都會跳出error......

Error in `[.data.frame`(DT, , `:=`(diffTime, difftime(time, time[min(k,  :
  unused argument (by = ind)

我是將自身資料擷取出來, 欄位名全都改成跟c大的資料一樣
用c大產生的資料下去跑沒問題
但內容換成我的資料就會錯誤
我的資料格式如下:
ind是""character"", time是""POSIXct"" ""POSIXt"",
照理應該是符合規則, 不知卡在哪?

然後我要保留的條件與原文也有所不同
以原文為例:
個體A  2012/10/11  20:00   實驗資料OOXX
個體A  2012/10/11  23:00   實驗資料OOXX
個體A  2012/10/12  03:00   實驗資料OOXX
個體B  2012/12/11  05:00   實驗資料OOXX
個體B  2012/12/11  11:05   實驗資料OOXX
個體B  2012/12/11  13:00   實驗資料OOXX
個體B  2012/12/11  18:00   實驗資料OOXX
個體B  2012/12/11  20:00   實驗資料OOXX

A個體保留第一、第三筆資料
B個體保留第一、第二、第四筆資料

我則是要保留相近時間內(與上一筆擷取的時間不超過6小時)的最後一筆
其結果會是: A個體保留第3筆, B個體保留第1、5筆

對於B個體而言
05:00
  |----> 間隔大於6小時, 則保留5:00, 下一筆開始為新的區間
11:05
13:00 這幾筆彼此與前一筆間隔未超過6小時, 則視為同個區間
18:00 取最後一筆20:00
20:00

這樣又該如何調整程式呢??
不知是否有人可以提供建議呢? 非常感謝!※ 引述《celestialgod (天)》之銘言：: ※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手，只會套用package: : [問題敘述]:: : 我有一批動物研究的資料: : 資料大致長這個樣子，共有12隻個體一萬多筆: : 個體A  2012/10/11  20:00   實驗資料OOXX: : 個體A  2012/10/11  23:00   實驗資料OOXX: : 個體A  2012/10/12  03:00   實驗資料OOXX: : 個體B  2012/12/11  05:00   實驗資料OOXX: : 個體B  2012/12/11  11:05   實驗資料OOXX: : 個體B  2012/12/11  13:00   實驗資料OOXX: : 個體B  2012/12/11  18:00   實驗資料OOXX: : 個體B  2012/12/11  20:00   實驗資料OOXX: : 由於時間間隔過短的話，資料之間可能有相關性: : 因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留: : 以上面資料為例: : A個體保留第一、第三筆資料: : B個體保留第一、第二、第四筆資料: : 我的程度是新手，偶爾會拿一些package來套用: : 請教是否有相關套件或現成code可以用在這個案例: : 非常感謝~~: 我用while + data.table做，若用data.frame會複製很多次，效率會不彰: library(data.table): # 產生資料: numObs <- 50: numInd <- 5: DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),:            time = strptime(""2012/12/11"", ""%Y/%m/%d"") +:                     sample(86400, numObs, TRUE),:            obs = rnorm(numObs)): # 排序: setorder(DT, ind, time, obs): # 移除掉時間差小於六小時的: k <- 1: while ( TRUE ) {:   # 計算時間差，以小時表示:   DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]:   # 留下自己那一組:   set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6):   # 留下時間差超過六小時的:   DT <- DT[abs(diffTime) > 6, ]:   # 下一組:   k <- k + 1:   # 如果k大於全部組的最大觀測值數目就跳離迴圈:   if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup)):     break: }: # 移除diffTime這個變數: DT[ , diffTime := NULL]: 五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值): 五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值): 我覺得這個速度應該可以接受: 不過我的區間只有24小時，所以可能都很快就篩選完了: 有人可以試試看更長時間的表現: 有問題或任何人有更好解法，歡迎提供，感謝: Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒--","R_Language"
"23","M.1569515327.A.568","hamster3933","問題","",2019-09-27 00:28:45,"140.112.228.181","臺灣","[問題類型]:程式諮詢

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次）[問題敘述]:

想要替換向量中的字符元素。

[程式範例]:

x <- c( ""apple"" , ""bee"" , ""apple"", ""cake""）

想要將向量中的字符都換成大寫英文字母開頭:
c(""Apple"", ""Bee"", "" Apple"", ""Cake"")

目前只想到以下這種，但就要一個一個換？
x[x == ""apple""] <- ""Apple""

故想請問版上大大是否有更快捷的方式，非常感謝





--","R_Language"
"24","M.1569512637.A.C38","celestialgod","問題","Re: 抓取氣象局地震資料",2019-09-26 23:43:55,"119.14.59.166","臺灣","※ 引述《hanglong (小煥)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 我想要抓台灣每次地震，固定地點的震度: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 以台灣時間09-11 05:24的地震為例，它的網址是：: https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636: 以此網址為例，我可以擷取固定地點，例如 玉山 的資料: 但是地震發生很多次，每次的網址都不一樣，不可能每次都手動抓網址，: 再用R抓到玉山的震度。: 我在地震資料的網址中，可以從原始碼中看到每個地震的連結，: https://scweb.cwb.gov.tw/zh-tw/earthquake/data/: 因此，如果有辦法可以從這裡擷取到每次地震的網址，: 應該就可以完成我的需求，但是這個網址的部分，不知道該如何擷取，: 在請版上的各位先進幫忙，謝謝。: [程式範例]::: 在https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636之下: 利用以下程式，可以看到玉山的震度：: data <-: read_html(""https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636""): ths <- xml_find_all(data, ""//div/ul/li""): xml_text(ths)[substring(xml_text(ths),1,2) == ""玉山""]: [1] ""玉山 1"": 但在https://scweb.cwb.gov.tw/zh-tw/earthquake/data/之下，: 我想要用一樣的方式，至少先擷取出網址的位置，結果什麼都沒有...: 程式如下：: data <-: read_html(""https://scweb.cwb.gov.tw/zh-tw/earthquake/data/""): ths <- xml_find_all(data, ""//div/table/tbody/tr/td/a""): xml_text(ths): character(0): [環境敘述]::: [關鍵字]:: 中央氣象局 地震看原PO好像還沒解決問題...

我來補上我的做法

先上結果圖:https://i.imgur.com/0PWmvmf.png邏輯解釋:

基本上觀察一下network可以找到相關的id

它便是用ajaxhandler這個API去撈地震資料下來

所以我們可以在network裡面看到這個網址:https://scweb.cwb.gov.tw/zh-tw/earthquake/ajaxhandler然後Network裡面會跟你說它是用POST，然後打了一個很長的form (下面POST的body)

只要乖乖照著打就可以拿到10筆了

然後只要把length那個參數改掉就能拿更多筆 (九月現在最多25筆)

然後改Search就能切換月份，講完了.... 直接上程式



程式碼:

library(httr)
library(pipeR)
library(xml2)
library(stringr)

url <- ""https://scweb.cwb.gov.tw/zh-tw/earthquake/ajaxhandler""referer_url <- ""https://scweb.cwb.gov.tw/zh-tw/earthquake/data/""response_data <- POST(url, body = list(""draw"" = ""1"",
                      ""columns[0][data]"" = ""0"",
                      ""columns[0][name]"" = ""EventNo"",
                      ""columns[0][searchable]"" = ""false"",
                      ""columns[0][orderable]"" = ""true"",
                      ""columns[0][search][value]"" = """",
                      ""columns[0][search][regex]"" = ""false"",
                      ""columns[1][data]"" = ""1"",
                      ""columns[1][name]"" = ""MaxIntensity"",
                      ""columns[1][searchable]"" = ""true"",
                      ""columns[1][orderable]"" = ""true"",
                      ""columns[1][search][value]"" = """",
                      ""columns[1][search][regex]"" = ""false"",
                      ""columns[2][data]"" = ""2"",
                      ""columns[2][name]"" = ""OriginTime"",
                      ""columns[2][searchable]"" = ""true"",
                      ""columns[2][orderable]"" = ""true"",
                      ""columns[2][search][value]"" = """",
                      ""columns[2][search][regex]"" = ""false"",
                      ""columns[3][data]"" = ""3"",
                      ""columns[3][name]"" = ""MagnitudeValue"",
                      ""columns[3][searchable]"" = ""true"",
                      ""columns[3][orderable]"" = ""true"",
                      ""columns[3][search][value]"" = """",
                      ""columns[3][search][regex]"" = ""false"",
                      ""columns[4][data]"" = ""4"",
                      ""columns[4][name]"" = ""Depth"",
                      ""columns[4][searchable]"" = ""true"",
                      ""columns[4][orderable]"" = ""true"",
                      ""columns[4][search][value]"" = """",
                      ""columns[4][search][regex]"" = ""false"",
                      ""columns[5][data]"" = ""5"",
                      ""columns[5][name]"" = ""Description"",
                      ""columns[5][searchable]"" = ""true"",
                      ""columns[5][orderable]"" = ""true"",
                      ""columns[5][search][value]"" = """",
                      ""columns[5][search][regex]"" = ""false"",
                      ""columns[6][data]"" = ""6"",
                      ""columns[6][name]"" = ""Description"",
                      ""columns[6][searchable]"" = ""true"",
                      ""columns[6][orderable]"" = ""true"",
                      ""columns[6][search][value]"" = """",
                      ""columns[6][search][regex]"" = ""false"",
                      ""order[0][column]"" = ""2"",
                      ""order[0][dir]"" = ""desc"",
                      ""start"" = ""0"",
                      ""length"" = ""10"",
                      ""search[value]"" = """",
                      ""search[regex]"" = ""false"",
                      ""Search"" = ""2019年9月"",
                      ""txtSDate"" = """",
                      ""txtEDate"" = """",
                      ""txtSscale"" = """",
                      ""txtEscale"" = """",
                      ""txtSdepth"" = """",
                      ""txtEdepth"" = """",
                      ""txtLonS"" = """",
                      ""txtLonE"" = """",
                      ""txtLatS"" = """",
                      ""txtLatE"" = """",
                      ""ddlCity"" = """",
                      ""ddlCitySta"" = """",
                      ""txtIntensityB"" = """",
                      ""txtIntensityE"" = """",
                      ""txtLon"" = """",
                      ""txtLat"" = """",
                      ""txtKM"" = """",
                      ""ddlStationName"" = """"),
     encode = ""form"",
     add_headers(Referer = referer_url)) %>>% content

data_ids <- sapply(response_data$data, `[[`, 1L)
details_url <- ""https://scweb.cwb.gov.tw/zh-tw/earthquake/details/""detail_urls <- paste0(details_url, data_ids)
eq_details <- lapply(detail_urls, function(url){
  GET(url) %>>% content %>>%
  xml_find_all(""//ul[@class='eqResultBoxRight BulSet BkeyinList']"") %>>%
  xml_find_all(""li"") %>>%
  xml_text %>>%
  str_replace_all(""[\\s]"", """") %>>%
  `[`(2L:6L)
})

有任何問題再推文問吧

--

--","R_Language"
"25","M.1569511363.A.99C","celestialgod","問題","Re: 用Python呼叫R, 再包成exe檔？",2019-09-26 23:22:40,"119.14.59.166","臺灣","※ 引述《Edster (Edster)》之銘言：: - 問題：: 能否用Python打包R, 最後做成單獨執行的exe？: [問題類型]:: 經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗): 開發者(有撰寫R 的套件經驗): [問題敘述]:: 我主要是用R，剛自學python沒多久。: 最近有案主要我提供可執行的程式，(本來是幫他們算完就好, 但現在要程式)。: 因為不想直接給原始程式碼，且他們同意做成exe.: 想請問能否用Python做成執行檔, 但實際上裡面全部是在做R的運算？: 因為有引用幾個重要的package是R寫的，所以也不能直接換成python來算。: ps: 請問這樣我引用的package也要每次都呼叫嗎?: 要是他們換電腦不就還要重新裝那隻package?這問題我也被問過很多次XDDD

這裡先回答你的問題，基本上不行

從Python要編譯成exe，可行沒錯

但是問題R你要怎麼在Python中執行?

就算用rpy2，你也要有R binary，這條路我沒試過

但是看了一下stackoverflow有點困難https://stackoverflow.com/questions/5850818/has-anyone-used-rpy2-with-py2exe再來就是，你可以考慮的方式

把R檔案都加密，然後解密邏輯寫在Python裡面

用system命令呼叫捆好的R去執行解密後的script檔案



下面有幾種方式:

1. 開web API給對方，可以用OpenCPU這種solution把R code藏在web後面

2. 同推文，用Shiny

3. 我以前用過的做法是用C#的R.Net，然後把程式碼用C#加密

執行的時候解密R檔案，然後丟進去捆好的R binary裡面

附上github:https://github.com/ChingChuan-Chen/rnet_and_r_portable(沒做加解密，只有直接用C# call R，R code可以編譯在C#裡面)


恩... 以上XD

最後有一個方法沒提到

把邏輯都寫成Rcpp編譯成DLL，然後都只給對方編譯好的Pkg

叫對方去用R執行XD

--

--","R_Language"
"26","M.1569430125.A.864","Edster","問題","用Python呼叫R, 再包成exe檔？",2019-09-26 00:48:43,"180.177.98.79","臺灣","- 問題：

能否用Python打包R, 最後做成單獨執行的exe？


[問題類型]:

經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

開發者(有撰寫R 的套件經驗)

[問題敘述]:

我主要是用R，剛自學python沒多久。

最近有案主要我提供可執行的程式，(本來是幫他們算完就好, 但現在要程式)。

因為不想直接給原始程式碼，且他們同意做成exe.

想請問能否用Python做成執行檔, 但實際上裡面全部是在做R的運算？

因為有引用幾個重要的package是R寫的，所以也不能直接換成python來算。

ps: 請問這樣我引用的package也要每次都呼叫嗎?
要是他們換電腦不就還要重新裝那隻package?

--","R_Language"
"27","M.1569375181.A.131","oepan","情報"," AI技術工程師 職前訓練 (勞動部課程)",2019-09-25 09:32:59,"140.115.236.39","臺灣","緯育TibaMe 團隊與勞動部勞動力發展署桃竹苗分署合作，透過

堅強的師資陣容，專業訓練團隊，規劃與市場接軌的訓練課程、

實作練習、團隊專案開發，協助你成為更具競爭力的專業人才！

政府最高補助100％學費

免費！學人工智慧技術！還佛心幫你找工作！

【政府補助人才培訓-AI技術工程師班】

待業中、尚無工作

剛畢業，尚未找到合適工作

期望成為AI工程相關工作者，皆可報名

完整的課程資訊：https://www.tibame.com/coursegoodjob/ai-engineer-taoyuan【參加免費課程說明會】

預約報名：https://forms.gle/broqgGGtGymVB59v5說明會偷偷告訴你...筆試.口試高分秘訣

(座位有限，先預約先佔位！)

|日期| 9/27(五)~10/30(三)每週一場

|時間| 下午14：00~15:30

|地點| 台北商業大學 桃園校區 公能樓Bb15教室

桃園市平鎮區福龍路一段100號

---> 校區靠近66快速道路，機車入校計次20元、汽車入校計次40元

也可加入line詢問唷!

Id: @991vcaxd

以上若有不妥 請版主協助刪除 謝謝

--","R_Language"
"28","M.1568880353.A.979","xrcjosh","問題","randomforest讀不到變數",2019-09-19 16:05:51,"59.120.18.178","臺灣","[問題敘述]:
s
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)：

想把資料丟進去隨機森林的演算法裡，但出現一下錯誤https://i.imgur.com/jQlzVEk.jpg但是看下面的colnames()明明就有它找不到的變數
還是那個錯誤是指其他訊息？

然後資料有經過dummy轉換，第一column是Id.https://i.imgur.com/0sIRUws.jpg再麻煩大家，感謝

[軟體熟悉度]:
寫過其他作品
s


-----
Sent from JPTT on my iPhone

--","R_Language"
"29","M.1568640091.A.3D3","sillygrace","問題","Rstudio 打開一片空白",2019-09-16 21:21:29,"223.139.77.175","臺灣","[軟體熟悉度]:

新手

[問題敘述]:

安裝Rstudio後打開出現亂碼
接著就是一片空白
已爬文看到有人建議可以安裝舊一點的版本
但我安裝後依舊如此https://i.imgur.com/3MfEeQP.jpghttps://i.imgur.com/nhUVsXN.jpghttps://i.imgur.com/robocKW.jpg目前R可以正常使用 只有RStudio不行

想請問如何解決這個問題
非常感謝

[環境敘述]:

電腦：Win10 64位元
R版本：R 3.6.1
RStudio版本：
RStudio 1.2.1335
RStudio 1.1.463
RStudio 1.0.153
以上RStudio版本皆嘗試過


--","R_Language"
"30","M.1568173572.A.E8F","hanglong","問題","抓取氣象局地震資料",2019-09-11 11:46:02,"125.227.245.73","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

我想要抓台灣每次地震，固定地點的震度

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:以台灣時間09-11 05:24的地震為例，它的網址是：https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636以此網址為例，我可以擷取固定地點，例如 玉山 的資料但是地震發生很多次，每次的網址都不一樣，不可能每次都手動抓網址，再用R抓到玉山的震度。我在地震資料的網址中，可以從原始碼中看到每個地震的連結，https://scweb.cwb.gov.tw/zh-tw/earthquake/data/因此，如果有辦法可以從這裡擷取到每次地震的網址，應該就可以完成我的需求，但是這個網址的部分，不知道該如何擷取，在請版上的各位先進幫忙，謝謝。[程式範例]:在https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636之下

利用以下程式，可以看到玉山的震度：

data <-
read_html(""https://scweb.cwb.gov.tw/zh-tw/earthquake/details/2019091105245636"")ths <- xml_find_all(data, ""//div/ul/li"")
xml_text(ths)[substring(xml_text(ths),1,2) == ""玉山""]

[1] ""玉山 1""


但在https://scweb.cwb.gov.tw/zh-tw/earthquake/data/之下，

我想要用一樣的方式，至少先擷取出網址的位置，結果什麼都沒有...

程式如下：

data <-
read_html(""https://scweb.cwb.gov.tw/zh-tw/earthquake/data/"")ths <- xml_find_all(data, ""//div/table/tbody/tr/td/a"")
xml_text(ths)

character(0)

[環境敘述]:請提供 sessionInfo() 的輸出結果，R version 3.6.1 (2019-07-05)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 10 x64 (build 18362)Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] xml2_1.2.2    curl_3.3      swirl_101.5.9loaded via a namespace (and not attached):[1] Rcpp_1.0.2      pvm_0.4.2.4     later_0.8.0     digest_0.6.20bitops_1.0-6    R6_2.4.0        jsonlite_1.6    magrittr_1.5    httr_1.4.0rlang_0.4.0     stringi_1.4.3[12] promises_1.0.1  testthat_2.1.1  tools_3.6.1     stringr_1.4.0RCurl_1.95-4.12 httpuv_1.5.1    yaml_2.2.0      compiler_3.6.1[關鍵字]:中央氣象局 地震--愛狗人士：打狗的人都去死啦!!!!!(#‵′)凸高雄人：靠北喔!!!!!!!!!!--","R_Language"
"31","M.1567668136.A.70C","Edster","問題","藏起來的 html table ?",2019-09-05 15:22:13,"140.112.25.34","臺灣","[問題類型]:

經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:

有個網頁的table一直抓不下來, 不知是否是選擇流域的地方沒有輸入東西.
但是找不到輸入的地方.


[程式範例]:

library(xml2)
library(magrittr)

url = ""https://fhy.wra.gov.tw/fhy/Monitor/Water""urldata = url %>% read_html(encoding = ""utf8"")
head = urldata %>% xml_find_all(.,"".//body//div[@class =
'container']//table[@class='table panel-table']"")


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"32","M.1567322788.A.0DE","VIATOR","情報","Hadley Wickham 的幾本書推薦",2019-09-01 15:26:20,"128.125.148.1","美國","幾本書Hadley Wickham寫的書推薦..
這些書不但很清楚，而且免費，真是太佛心了。

Hands-On Programming with Rhttps://rstudio-education.github.io/hopr/利用實作範例來介紹如何寫R程式，適合初學者

ggplot2: Elegant Graphics for Data Analysishttps://ggplot2-book.org/ggplot2很有可能是最好的畫圖package，本書介紹如何用ggplot2畫出精美的圖

R for Data Sciencehttps://r4ds.had.co.nz/基本上是介紹tidyverse這套系統，有人說tidyverse是R語言的方言，
這方言提供了比較簡潔且一致的語法，讓人容易記住而且使用，
有些人對tidyverse持有保留的態度，有些人則非常喜歡tidyverse
從R最常被下載的package看來，喜歡tidyverse的人非常多。

Advanced Rhttps://adv-r.hadley.nz/第二版的Advanced R最近才剛出，介紹functional programming, OOP
and Metaprogramming，和第一版不同的是，結合了較多tidyverse裡的語法。

R packageshttp://r-pkgs.had.co.nz/把你寫的function變成package，一切都變得簡單了。


--","R_Language"
"33","M.1567164494.A.61E","celestialgod","問題","Re: 日期轉換格式",2019-08-30 19:28:11,"119.14.59.166","臺灣","※ 引述《jerkoffme (摩德男孩)》之銘言：: [問題類型]:: 資料格式轉換: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 想將 data.table 格式的 table 叫 pop 並將其中一個變量轉換為時間變量，: 該變量為 char 的格式，但使用日期轉化的函數後最後都會變成數字: [程式範例]:: 例如: post_time: 2019/8/28 16:43: 2019/8/28 15:48: 但我用: tdf5 <- sapply(pop$post_time, as.POSIXct, format = ""%Y/%m/%d %H:%M""): View(tdf5): 結果就會變成: 1566981780: 1566978480: 請問為何會這樣先回答問題，sapply的simplify造成的

可以看一下source code:

    answer <- lapply(X = X, FUN = FUN, ...)
    if (!isFALSE(simplify) && length(answer))
        simplify2array(answer, higher = (simplify == ""array""))

simplify2array(x, higher = TRUE):

   unlist(x, recursive = FALSE, use.names = FALSE)

可以看到sapply用了unlist去做simplify

然後unlist不認得POSIXt這個class (因為它丟進C裡，只用最原本的型別: 整數)

而且它沒有再轉換回去，所以你最後sapply看到的就只剩下整數了


那怎麼做?

兩個方式:

1. 根本不需要用sapply，直接用as.POSIXct做就好:

    as.POSIXct(DT$post_time)

2. 捨棄sapply改成用lapply + do.call + c取代

    do.call(c, lapply(DT$post_time, as.POSIXct))


另外推文說的lubridate也可以，一樣結果:

     parse_date_time(DT$post_time, ""ymdHM"")

或

     as_datetime(DT$post_time, format = ""%Y/%m/%d %H:%M""): [環境敘述]:: R version 3.5.3 (2019-03-11): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200)--

--","R_Language"
"34","M.1566992969.A.5F8","jerkoffme","問題","日期轉換格式",2019-08-28 19:49:21,"114.42.68.140","臺灣","[問題類型]:

資料格式轉換

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

想將 data.table 格式的 table 叫 pop 並將其中一個變量轉換為時間變量，
該變量為 char 的格式，但使用日期轉化的函數後最後都會變成數字


[程式範例]:

例如
post_time
2019/8/28 16:43
2019/8/28 15:48

但我用

tdf5 <- sapply(pop$post_time, as.POSIXct, format = ""%Y/%m/%d %H:%M"")
View(tdf5)

結果就會變成

1566981780
1566978480

請問為何會這樣

[環境敘述]:
R version 3.5.3 (2019-03-11)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

--
推 maxxV3:說真的    有人總統想選一個女人家嗎  = =                  04/19 21:48
→ teremy:韓國總統都是女的了。韓國還不夠大男人嗎?                  04/19 21:49
噓 miler22020:樓上是遠古時帶來的嗎                                 04/19 21:49
→ miler22020:樓樓上                                               04/19 21:49
推 Top5566:樓樓樓上                                                04/19 21:50
→ miler22020:樓樓樓樓   幹 算了                                   04/19 21:50

--","R_Language"
"35","M.1566111461.A.0DC","pp61022","情報","Fw: 2019國泰大數據競賽8/8-9/3開放報名!!",2019-08-18 14:57:40,"123.194.152.208","臺灣","※ [本文轉錄自 Statistics 看板 #1TMFBEV_ ]作者: pp61022 (fight) 看板: Statistics
標題: [情報] 2019國泰大數據競賽8/8-9/3開放報名!!
時間: Sun Aug 18 14:40:10 2019《2019國泰大數據競賽》即將開跑！你對大數據有興趣嗎？
想要獲得個人最高獎金20萬嗎？

本屆競賽祭出高達105萬元總獎金，冠軍隊伍享國泰人壽實習機會，活動於8/8~9/3開放報名，誠摯邀請各大專院校對數據分析有興趣的學生一起組隊挑戰！

挑戰大數據，還有機會進入專案實習，為自己的履歷增添精彩一筆！


【相關網站連結】競賽網站https://tbrain.trendmicro.com.tw/Competitions/Details/7報名網頁https://reurl.cc/pOzQZFB社團https://www.facebook.com/groups/cathaycampaign/【參考資料】活動辦法https://tbrain.trendmicro.com.tw/Content/files/Terms.pdf競賽相關問題，請來信詢問：[email<U+00A0>protected]--","R_Language"
"36","M.1565698350.A.F2E","jerkoffme","問題","無法安裝 tidytext",2019-08-13 20:12:26,"118.160.54.151","臺灣","[問題類型]:無法安裝 tidytext


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
因工作需要，要作文本挖掘，但無法安裝 tidytext

install.packages(""tidytext"")

後會噴錯如以下
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""UTF-8"") :
  作業系統回報無法實現設定語區為 ""UTF-8"" 的要求
錯誤: 7:1: 未預期的 ')'
7: )
    ^
停止執行
In R CMD INSTALL
Warning in install.packages :
  running command '""C:/PROGRA~1/R/R-34~1.4/bin/x64/R"" CMD INSTALL -l
""C:\Users\Pacific\Documents\R\win-library\3.4""
C:\Users\Pacific\AppData\Local\Temp\RtmpKGoXJY/downloaded_packages/stopwords_1.0.tar.gz'
had status 1
Warning in install.packages :
  installation of package ‘stopwords’ had non-zero exit status
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  作業系統回報無法實現設定語區為 ""zh_TW.UTF-8"" 的要求
[1] """"
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""UTF-8"") :
  作業系統回報無法實現設定語區為 ""UTF-8"" 的要求
錯誤: 7:1: 未預期的 ')'
7: )
    ^
停止執行
In R CMD INSTALL
Warning in install.packages :
  running command '""C:/PROGRA~1/R/R-34~1.4/bin/x64/R"" CMD INSTALL -l
""C:\Users\Pacific\Documents\R\win-library\3.4""
C:\Users\Pacific\AppData\Local\Temp\RtmpKGoXJY/downloaded_packages/tidytext_0.2.2.tar.gz'
had status 1
Warning in install.packages :
  installation of package ‘tidytext’ had non-zero exit status



[環境敘述]:
R version 3.4.4 (2018-03-15)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=English_United States.1252


--
推 maxxV3:說真的    有人總統想選一個女人家嗎  = =                  04/19 21:48
→ teremy:韓國總統都是女的了。韓國還不夠大男人嗎?                  04/19 21:49
噓 miler22020:樓上是遠古時帶來的嗎                                 04/19 21:49
→ miler22020:樓樓上                                               04/19 21:49
推 Top5566:樓樓樓上                                                04/19 21:50
→ miler22020:樓樓樓樓   幹 算了                                   04/19 21:50

--","R_Language"
"37","M.1565196432.A.786","gbd37","討論","Fw: 5種程式語言未來可能會消失",2019-08-08 00:47:11,"61.220.95.73","臺灣","※ [本文轉錄自 Soft_Job 看板 #1TIam2Pa ]作者: Ekmund (我到底看了三小?) 看板: Soft_Job
標題: [討論] 5種程式語言未來可能會消失
時間: Wed Aug  7 11:56:45 2019

其實是新聞啦，但覺得討論性蠻高的

原文連結：https://reurl.cc/oWGWD原文標題：工程師注意！5 種程式語言未來可能會消失原文內容：

程式語言會隨著技術的進步不斷推陳出新，不過老舊的程式語言也會因為時代改變而遭到
淘汰。科技媒體《Dice》挑出 5 種未來可能將會消失的程式語言，還建議以這些程式語
言為主的工程師該多樣化自己的技能了。

作者 Nick Kolakowski 查詢了軟體評價公司 TIOBE 及軟體開發產業分析公司 RedMonk
的軟體人氣排名，並參考《Dice》自家資料庫，列出 5 種走向衰退的程式語言。

第一個被點名的就是曾大受歡迎的Ruby，在 TIOBE 的排名短短一年半內從第 9 名掉到
第 12 名。且根據《Dice》資料顯示，尋找擅長 Ruby 人才的公司大幅下降。Ruby 的工
作職缺在 2018 年減少了 56%，這無疑是個巨大警訊，可能會讓使用 Ruby 的人數快速下
滑。

預計會在 2020 年進行重大標準更新的Haskell也被認為前途堪慮，雖然包括
Facebook 和 GitHub 等知名公司都會使用 Haskell，不過 Haskell 在 RedMonk 的排名
從 2012 年 13 名一路下滑到榜單邊緣的 19 名，且始終沒有反彈跡象。

雖然蘋果（Apple）推出的Objective-C已有 35 年歷史，但近幾年排名下滑並不明顯，
有不少開發者還是習慣使用。不過 2014 年蘋果發表 Swift 之後，就代表 Objective-C
長期來看不會是開發者的好選擇。蘋果積極推動 Swift 發展，也有越來越多開發者使用
Swift 來開發軟體，這很可能象徵 Objective-C 終究會走入歷史。R目前是頗受歡迎的資料分析程式語言，不過 Kolakowski 認為 Python 正在取代 R 的
市場地位。雖然學術界和資料科學家還在使用 R，但對資料分析有興趣的公司開始轉向
Python，因為 Python 有擴展性且更容易使用。Kolakowski 推測要是 R 和 Python 能結
合，有助於 R 繼續存活。

最後一個認為缺乏未來的程式語言是Perl，無論在 RedMonk 或 TIOBE 的排名都日趨下
滑。就算 Perl 的受歡迎程度大不如前，還是有很多舊網站使用 Perl，所以不會太快就
消失。目前開發者普遍採用別的程式語言來架構網站，因此 Perl 依舊會漸漸衰亡。

-------

拿作者名子餵狗會查到另一個同名作家
但其實是位在科技線的dice資深編輯https://reurl.cc/jLn7n說回排行。
看標題我就在想會有點爭議
但該怎麼說呢..XD

Ruby，RPG Maker(RM)以前有用，現在轉向JS了
但怎麼說也還有RoR在
就算少見，要提消亡會不會太快了點啊？

Objective-C更是
怎麼說也存活了很長一段時間
而且產量超大的
加上也算現任
要走到消失這一步還久的很吧

R算因為AI大熱大冷
但我覺得這跟股市震盪一樣
會收斂，但不會消失
畢竟是持續應用的東西，又不是葡式蛋塔
加上學界一用就是十幾年
人家上個月才patch捏...

另外兩個就不清楚了。
不過光這三個
在我自己的認知上就蠻意外的
至少在這之前會有其他東西消失吧
像C++和JAVA也是三不五時被喊取代
也因為業界支持或自身更新活得很好啊
廣泛應用的東西應該很難死才對 QQ

--
展元: 這一球.....出去啦!! 就像是中油漲價的油價,台灣掉下來的股市,超高的失業率,
電子業裁掉的員工,消失的季獎金,說好的幸福,我前一台被偷的馬6,大家常常被偷的馬3,
賊頭開出去的紅單,人民繳出去的稅金,阿扁A掉的錢,開不了的那一核,燒掉的PSU,雷殘的
Rossi,撞車的Alonso,變了性女友,射出去的豆漿,永邦原創曲抄襲鳥<U+306E>詩,木暮投的3分球,
悟空丟出去的元氣彈,辣妹曾根吃掉的東西一樣~~~回~~~~~~不~~~~~~來~~~~~~~了~~~~~~~

--","R_Language"
"38","M.1563347953.A.DD1","justleave","問題","js生成的網頁 資料抓取",2019-07-17 15:19:11,"114.42.8.54","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

如下圖，想抓取紅色方框中的資料https://imgur.com/gk9qBoH.jpg已知該表格由javascript動態生成
爬了開發者工具 始終找不到資料存放的位置或網址
倒是下面的大表格中有找到資料

有想說是不是需要GET/POST來獲得資料
但找不到確切的url 不知從何下手

希望能有大大幫忙開示解惑

[程式範例]:

name <- ""NovakDjokovic""
url2 <- paste0(""http://www.tennisabstract.com/cgi-bin/player.cgi?p="",name)
page2 <- read_html(url2)

html_text(page2)
會print出一堆程式碼但沒有我要的資料


[環境敘述]:

R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:

網頁爬蟲 rvest javascript

--","R_Language"
"39","M.1563268974.A.836","xrcjosh","問題","對應分析的資料讀取",2019-07-16 17:22:52,"223.140.198.183","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)s


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)s

[問題敘述]:
在進行對應分析時，資料並非會以tidy的形式分析，而是行列皆有的形式進行
以一個r內建的資料集為例https://i.imgur.com/9tyrxKh.jpg最左邊的那一排不會被讀成一個變數，想請問用read_csv的方式要怎麼做才可以讓最左邊那一排不被讀為變數？

[環境敘述]:
R3.6.0




-----
Sent from JPTT on my iPhone

--","R_Language"
"40","M.1563025721.A.492","f496328mm","分享","金融 data source api 接近50個dataset",2019-07-13 21:48:38,"118.233.85.190","臺灣","分享我開發的 github project FinMindhttps://github.com/linsamtw/FinMind金融 data open source 接近 50 個 dataset ，每天更新

過去只開放給 python，最近把 api 做出來，R 也可以用啦! 我有寫 R 讀取的 example
R 在 time series 方法蠻多的https://github.com/linsamtw/FinMind/blob/master/example/R%20document.mddata 包含台股股價、個股外資買賣、融資融券、財報、外資持股、資產負債表、股權分
散表、月營收等

G7 國家匯率、央行利率、債券 ( 3 month ~ 30 year ) ( G7 是7大工業組織 )
金價、油價、原物料期貨價格


金融市場會互相影響，但資料太多，過去很難分析，不過現在有 ML, DL，因此我收集各
種數據，希望用 DS 的觀點去分析金融



如果有問題，可以在 github 上 issues 留言給我


--","R_Language"
"41","M.1562581633.A.873","locka","問題","xml_node轉成text但保留tag資訊",2019-07-08 18:27:10,"192.83.168.161","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
版友好：
如題，想請問我用rvest的read_heml()爬下來的東西大概長這樣> test{xml_document}
<html>
[1] <body><table border=""1"">\n<caption>title ...

如果執行 test %>% html_text() 則解析html標籤 只剩下
[1] ""title\n        id\n            aaa\n        d\n            ddd\n
   e\n            eee\n        ""

不知道能否單純把爬下來的html轉成字串,保留所有的標籤呢?

想要的結果:
<table border=""1"">
    <caption>title</caption>
    <tbody>
        <tr>
            <th>id</th>
            <td colspan=""3"">aaa</td>
        </tr>
        <tr>
            <th style=""width:15%"">d</th>
            <td style=""width:35%"">ddd</td>
            <th style=""width:15%"">e</th>
            <td style=""width:35%"">eee</td>
        </tr>
    </tbody>
</table>'

google了一下好像沒找到相關解法所以上來發問
謝謝!

[程式範例]:https://ideone.com/bbRbpg[關鍵字]:選擇性，也許未來有用--","R_Language"
"42","M.1562514065.A.A5D","kakaman","問題","資料排序後，如何選取相同key值的第1筆",2019-07-07 23:41:03,"180.176.212.49","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
以往都是用excel作資料分析，僅處理數萬筆資料
但近期因要驗證廠商程式開發之正確性，需對數百萬筆甚至千萬筆以上資料進行通盤驗證
故開始學習R
想請問站內大大有關資料排序後，怎麼選取相同KEY值之第1筆資料

[程式範例]:
Data frame舉例如下

PID    所在地   辦理日期  KEY
AA     臺北     4/1       AA臺北
AA     臺北     4/15      AA臺北
AA     臺北     7/10      AA臺北
BB     臺中     5/1       BB臺中
BB     臺中     6/10      BB臺中
BB     臺中     7/16      BB臺中
BB     臺中     8/20      BB臺中
...    ...      ...       ...

僅想選取AA 4/1
        BB 5/1等同KEY下辦理日期第1筆資料進行分析

想請問站內大大可否提供些許資訊供參考
謝謝

--","R_Language"
"43","M.1562479280.A.17D","geraldliu98","問題","請問各位大大 如何將 streaming data 餵給control chart",2019-07-07 14:01:13,"140.112.14.72","臺灣","大家好：

我想請問各位大大 ：

 怎麼把以下的streaming和另一則的input接口兜再一起?https://plot.ly/r/streaming/https://github.com/plotly/Streaming-Demoshttps://luca-scr.github.io/qcc/reference/mqcc.html初步把按照流程把資料塞入了不過就是跑不動?
###############################http://codepad.org/k9KWcWsy###############################
目標是達成如下網址的效果https://github.com/plotly/dash-manufacture-spc-dashboard感謝各位大大!

--","R_Language"
"44","M.1562337125.A.53D","a78998042a","問題","S3函數主、子函數參數繼承問題",2019-07-05 22:31:53,"180.204.236.87","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

請教各位先進S3函數的寫法!有兩個問題。

需要功能：主函數有參數x，並依條件在內部以子函數改變x值，並取代主函數環境的x值


[程式範例]:

# 主函數
test_f = function(x, y, ...){
        result = para_reset_f()
        rm(list = c('x', 'y'))
        attach(result)
        return(sum(x, y))
}

# 子函數
para_reset_f = function(x = x, y = y){
        if(x > 5)  x = 100 else x = x
        return(environment())
}

test_f(5, 10)

# 這個程式會造成
# Error in para_reset_f() :
# promise already under evaluation: recursive default
# argument reference or Earlier problems?""

想詢問較好的解法

候選解法1.
result = para_reset_f(x = environment()$x, y = environment()$y)

候選解法2.
environment(para_reset_f) = environment()
result = para_reset_f() ## 子函數參數改為全空

網路上的解法是
result = para_reset_f(x. = x, y. = y)


候選1看起來是最乾淨的，不過還沒有看過有官方函數是這樣寫的
應該是有其他參數引用的方式?




第二個問題是，我想將子函數的特定參數值取代主函數
所以我在para_reset_f 輸出環境
但為了要讓他蓋過主函數
我先 rm(list = c('x', 'y'))
再 attach(result)

這個寫法看來不太健康，想詢問是否有比較正確的解法!
謝謝!


[關鍵字]:

S3、參數繼承

--","R_Language"
"45","M.1562131416.A.E93","paranoia5201","問題","欄位分割、字串取代",2019-07-03 13:23:34,"36.229.137.65","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

【原始資料】> cbind(head(tao$交易筆棟數))[,1]
[1,] ""土地1建物1車位2""
[2,] ""土地1建物1車位1""
[3,] ""土地1建物1車位0""
[4,] ""土地1建物1車位1""
[5,] ""土地1建物1車位1""
[6,] ""土地1建物1車位0""

【預期目標】
        土地數    建物數    車位數
                1       1       2
                1       1       1
                1       1       0
                1       1       1
                1       1       1
                1       1       0


[程式範例]:

以下是我成功做出的方法，想請教有無更聰明的方式。

##先將欄位中的文字逐一取代成'_'
  tao$trade_n <- str_replace(tao$交易筆棟數, '土地', '_')
  tao$trade_n <- str_replace(tao$trade_n, '建物', '_')
  tao$trade_n <- str_replace(tao$trade_n, '車位', '_')
  tao$trade_n <- paste0('0', tao$trade_n)

##看一下新創欄位的模樣> head(tao$trade_n)[1] ""0_1_1_2"" ""0_1_1_1"" ""0_1_1_0"" ""0_1_1_1"" ""0_1_1_1"" ""0_1_1_0""

##開始逐欄分割
  library(dplyr)
  library(tidyr)
  tao <- tao %>%
    separate(trade_n, c('trade_n_NotUse', '土地數', ""建物數"", ""車位數""), ""_"")
  tao$土地數 <- as.numeric(tao$土地數)
  tao$建物數 <- as.numeric(tao$建物數)
  tao$車位數 <- as.numeric(tao$車位數)

##結果檢視> head(cbind(tao$土地數, tao$建物數, tao$車位數))[,1] [,2] [,3]
[1,]    1    1    2
[2,]    1    1    1
[3,]    1    1    0
[4,]    1    1    1
[5,]    1    1    1
[6,]    1    1    0



謝謝大家∼


--","R_Language"
"46","M.1562119714.A.431","AmigoSafin","問題","根據不同group的size取樣後再平均",2019-07-03 10:08:31,"68.180.87.229","美國","[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好
我想問問大家如果遇到這樣的內容
會怎麼用R寫？

我在網路上查到aggregate可以針對不同的groups
算出組平均
例如
    group
X1    A    obs1  obs2

X2    B    obs1  obs2

用 aggregate就可以把A和B的分組平均算出
我也想用這方法 但我需要的要再多一個步驟

我現在有6248個觀測值
他們來自175個不同的LotID
每個LotID的樣本個數（就是觀測值個數）在20,32,50和80之間
我要根據不同的樣本數隨機抽樣15,20,25,和35

我的做法是
先用table查看每個LotID有多少觀測值
然後建立一個欄位叫做Osize 就可以告訴我每個對應的LotID的本來的size
然後再建立一個新欄位NSize 根據Osize放入我預計要抽樣的數目
然後建立index=sample(Osize, Nsize, replace=FALSE)
這會是每一個LotID我要取的index value

現在就是我要怎麼把個別的LotID分離出來（不一定要放到不同的欄位 但要分開取平均）

我目前的做法是用loop
for (i in 1:nrow(Data)) 這讓我從row1跑到最後一個6248 row
 (if indentical(Data$LotID[i],Data$LotID[i-1])==TRUE) ##這就告訴我第i row
會開始新的LotID
但我困難點在於如何把i這row之前的那i-1得到數值並根據其數量來取樣呢？
所以我就設定
 for(j in 1:175) 因為總共有175個LotID
 假設Observation這個欄位是我要的觀察值
A <- as.vector(Data$Observation)
A <- as.numeric(A)  ##我把觀測值全部抓出來變成一個數列似乎對我個人比較好懂
Data$mean <- mean(Data$Observation[i:i+j*Osize[i]])
因為如果以i為21列來看
如果前面i-1是20個數值 且都屬於同一個LotID
那我就是要從這20個值當中 取出15個（因為Osize=20 Nsize=15)
但我的困擾在於j是跟著LotID
i是跟著觀測值
兩者其實有關係
但我的寫法似乎沒辦法把兩者牽在一起

aggregate求組平均的算法很容易
aggregate(Data$Observation, Data$LotID,summarize, mean)
大這是這樣 以上是我憑記憶打的 不確定
所以如果可以把觀測值根據隨機取樣的樣本先分好
再用aggregate去取平均 是一種做法
但感覺直接根據要娶隨機的size去直接取平均似乎是更簡易的方式
但我目前只會寫loop
不知道大家有沒有什麼建議？
感謝大家了



[程式範例]:


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"47","M.1561974035.A.955","Mutex","問題","散佈圖中，在每個點旁邊都標上名稱",2019-07-01 17:40:32,"61.230.123.223","臺灣","[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想在原本的散佈圖中，每個點旁邊都標上名稱

[程式範例]:
原本的程式碼我貼在這邊http://codepad.org/RPwJJtLN資料大概是長這樣
H       CNT_TYPE   N    D
A       1         10   50
B       1         20   60
C       1         30   70
D       1         40   80
E       1         50   90

原本只會讀CNT_TYPE, N, D等變數畫散佈圖
現在新的資料每一筆都多一個名稱H
所以希望可以在每一個散佈圖的點旁邊，標上A、B、C、D、E等名稱
(順便想請問一下，若想連Y的數字也標上去的話，應該怎麼修改呢)
試了好久都弄不出來，所以來這向高手們請益了
感謝

[環境敘述]:RStudio

--","R_Language"
"48","M.1561669510.A.942","waleic","問題","rayshader /mistr 找不到function",2019-06-28 05:05:02,"88.209.32.73","德國","[問題類型]:

程式諮詢


[軟體熟悉度]:

入門(先前大多使用於統計分析與簡單繪圖)


[問題敘述]:

目前嘗試使用rayshader繪製3D的ggplots,跟隨網站上的codes下載package後
R studio 顯示找不到這些function
e.g. plot_gg 於rayshader,plotgg 於mistr


主要參考網站https://www.tylermw.com/3d-ggplots-with-rayshader/在頁面最底端語法的部分,前面部分順利完成,只差在最後一步plot_gg()

下載rayshader 時有顯示
tar: Failed to set default locale
推測沒有完成完整的下載過程,但不知道問題在哪

Google 類似function 還有mistr 的plotgg()
此package 有成功下載完全,但function 亦在環境中找不到



[程式範例]:

# 初次下載的方式
 remotes::install_github(""tylermorganwall/rayshader"")
 library(rayshader)
 library(ggplot2)

# 之後嘗試另一種
 devtools::install_github(""tylermorganwall/rayshader"")

# 最後皆顯示
 Error: (converted from warning) Setting LC_TIME failed, using ""C""
 Execution halted
 Error: Failed to install 'rayshader' from GitHub:
   (converted from warning) installation of package ‘rgl’ had non-zero exit status



[環境敘述]:

R version 3.6.0 (2019-04-26)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6


[關鍵字]:

rayshader,plot_gg,mistr



若有解釋問題不清楚的部分還請告訴我,
希望大家能給予指點與幫忙,非常感謝!


--","R_Language"
"49","M.1561618274.A.9BC","Inderal10mg","問題","如何使matrix中的數值小數位不要進位",2019-06-27 14:51:12,"140.116.67.123","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門


[問題敘述]:

使用package""exact2x2""執行Exact McNemar's test時，因細格中有零，
按照文獻建議各加0.5才執行計算，但是r會將0.5視為0，想請教前輩們如何
讓其維持在0.5的狀態下計算Odds ratio與95% confidence interval，謝謝。


[程式範例]:

# 使用套件
library(exact2x2)

# 輸入計算數值
x=matrix(c(18.5,13.5,0.5,4.5),2,2)

#計算結果
mcnemar.exact(x)

#結果
Exact McNemar test (with central confidence intervals)

data:  x
b = 0, c = 14, p-value = 0.0001221
alternative hypothesis: true odds ratio is not equal to 1
95 percent confidence interval:
 0.0000000 0.3014661
sample estimates:
odds ratio
         0

Warning message:
In exact2x2(x = x, alternative = ""two.sided"", tsmethod = ""central"",  :
  'x' has been rounded to integer: Mean relative difference: 0.05405405


[環境敘述]:

R version 3.5.3 (2019-03-11)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17763)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] exact2x2_1.6.3 exactci_1.3-3  ssanv_1.1

loaded via a namespace (and not attached):
[1] compiler_3.5.3


[關鍵字]:

exact2x2, exact mcnemar test


--","R_Language"
"50","M.1561477436.A.EBB","daybreakya","問題","不同data.table(frame)範圍篩選",2019-06-25 23:43:54,"114.37.138.65","臺灣","[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我有兩個不同的data.table，想將第一個data.table內的資料(num、value)，

透過Mark關聯到第二個data.table，並設定範圍來做篩選，最後顯示出不符合的資料

目前有做一個簡單的資料來測試，看起來是有跑出來想要的結果

但將此概念套用在另一個真正想做的地方上
(資料更複雜的，有小數點、DT1的資料更多列)

好像沒有篩選乾淨的樣子，不知道在R中，兩張表的資料篩選，可以這樣做嗎?

或是有建議什麼方法，來得到我想要的結果呢?

[程式範例]:

library(data.table)
library(dplyr)

DT1 <- data.table(ID=c(""F"",""A"",""E"",""B"",""C"",""D"",""C""),
                  num=c(59,3,108,11,22,54,241),
                  value=c(90,47,189,38,42,86,280),
                  Mark=c(""Mary"",""Tom"",""Abner"",""Norman"",""Joanne"",
                         ""Bonnie"",""Trista""))

DT2 <- data.table(Mark=c(""Mary"",""Abner"",""Bonnie"",""Trista"",""Norman""),
                  numA=c(48,20,88,237,20),
                  numB=c(60,326,54,268,89),
                  valueA=c(78,34,78,270,59),
                  valueB=c(90,190,90,385,75))

output <- DT1 %>%
               anti_join(merge(DT1, DT2, by = ""Mark"") %>%
               filter(num > numA & num < numB &
                         value > valueA & value < valueB), by = ""Mark""  )


[環境敘述]:R version 3.5.1 (2018-07-02)[關鍵字]:選擇性，也許未來有用--","R_Language"
"51","M.1561294646.A.EF3","d03n3ji3","問題","R cubist 使用控制參數無效的問題",2019-06-23 20:57:16,"59.120.252.193","臺灣","[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

當我使用 cubist 跑出結果時，跑出的結果有100條rules，但是我要限制他只有20條rules
用了cubistcontrol()之後卻沒辦法限制rule


[程式範例]:
library(mlbench)

library(Cubist)

data5 <-read.csv(""C:/Users/user/Desktop/cubistdata/final/newdata40622.csv"",header =
T,sep="","")

mod5 <- cubist(x = data5[, -17],y = data5$Price)

cubistcontrol(rules = 20)

summary(mod5)

結果還是跑出了100條rules




[環境敘述]:

R 3.6.0

cubist V0.2.2

[關鍵字]:


--","R_Language"
"52","M.1561097097.A.EC3","eri820503","問題","shiny server 多人同時連線",2019-06-21 14:04:54,"211.22.206.217","臺灣","[問題類型]:

經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我目前在一台CentOS的機器上，
架了open source版本的shiny server，
也可以成功的執行我部屬的程式。

但如果多人同時連線，
只有第一個人可以成功連進去，
後面的人就無法。

想請問是否只有Professional的版本可以做到?

目前的解決方式是
將同樣的程式，複製成
application1
application2
.
.
.
再各自連到不同的application去執行。

但如果想讓所有使用者都連到同一個application，
是否只能購買Professional的版本?

[環境敘述]:
CentOS 7

[關鍵字]:
shiny server


--

--","R_Language"
"53","M.1560923033.A.38E","barry282228","問題","在CMD執行randomForest",2019-06-19 13:43:51,"49.217.129.181","臺灣","[問題類型]:
程式諮詢(我想在CMD上執行randomForest，但是我不知道要怎麼排除錯誤)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
各位大大安安
小弟我打算用k-folder驗證一個randomForest模型的準確率
我在Rstudio上可以順利跑出結果
但換成在CMD上執行Rscript就會有錯誤(如圖)https://i.imgur.com/mGnIRGD.jpg有自己慢慢debug過，但只知道是執行到randomForest函數時會有問題，
想請問各位大大有可能是哪裡的問題QQ

[環境敘述]:

R version 3.5.3 (2019-03-11)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


[關鍵字]:
CMD、randomforest

--","R_Language"
"54","M.1560850477.A.8F6","x1214","問題","在R studio內執行.bat檔",2019-06-18 17:34:35,"110.28.172.123","臺灣","[問題類型]:
程式諮詢 (我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門 (曾寫過SAS，但對R語法不熟悉)

[問題敘述]:

請教各位大大，我想透過R去執行一個bat檔

bat檔名稱：Run1
bat檔內容：""C:\Users\Test2\me2gfP4.exe"" "" C:\Users\Test2\Input_F3.ini""

我寫了一個bat檔，要讓me2gfP4.exe去執行後面那個Input_F3.ini檔
平常我只要點兩下bat檔，就會開始跑了
現在我想要在R Studio裡面叫外部程式bat檔跑，卻一直失敗QQ

我用過許多函數，包括：
shell()
shell.exec()
system()
source()

但是都失敗…

下面這行語法，則是跳出畫面一閃後就又關掉了…（理論上應該會開始執行程式，至少跑
個20秒才會自己關掉）
shell.exec(""C:/Users/Test2/Run1.bat"")

嘗試了好多函數都無法成功...
拜託各位神人了QQ


[程式範例]:
shell.exec(""C:/Users/Test2/Run1.bat"")

[關鍵字]:
shell(), shell.exec(), system(), source()

--","R_Language"
"55","M.1560528092.A.281","Humor0709","問題","已載入R package 但找不到函數",2019-06-15 00:01:27,"114.136.44.190","臺灣","[問題類型]:程式諮詢[軟體熟悉度]:入門(偶爾會使用R來做一些統計)[問題敘述]:
大家好，本人我想要做一些族群上的估算，利用R官網找到“marked”這個package
不過我安裝並載入後，欲使用其中的 js 函數，卻顯示沒有這個函數，想請教問題是出在
哪裡呢？

[程式範例]:
程式碼圖片及marked使用手冊的網址https://i.imgur.com/wLJcwZG.jpghttps://cran.r-project.org/web/packages/marked/marked.pdf[環境敘述]:
Win10
R 3.6.0
marked 1.2.1

[關鍵字]:

載入package
沒有這個函數

--","R_Language"
"56","M.1559531773.A.2F5","stevenohohoh","問題","Rstudio打開後空白一直無法解決",2019-06-03 11:16:11,"114.136.35.29","臺灣","[軟體熟悉度]:入門(很久以前寫過一些些R程式)

[問題敘述]:
第一次安裝R與Rstudio後，R可以正常運作，但是Rstudio打開後畫面空白，如圖。https://i.imgur.com/jUhvOtu.jpg後來嘗試把安裝路徑改為全英文、重新安裝R及Rstudio、以系統管理員身分執行Rstudio、
按Ctrl再按Rstudio後，Rstudio打開仍為空白

目前重新安裝的R仍可以正常使用，只有Rstudio不行，想請問該如何解決?謝謝

 [軟體資訊]
電腦版本:win10 64位元
R版本:R-3.6.0
Rstudio版本:RStudio 1.2.1335

--","R_Language"
"57","M.1559358375.A.CB5","h14753951","問題","抓取氣象局表格資料",2019-06-01 11:06:13,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想抓氣象局表格資料(逐三小時預報,想知道溫度/降雨機率),如下網址https://www.cwb.gov.tw/V7/forecast/town368/towns/6300200.htm?layer=0&type=Weather&time=7Day[程式範例]:

library(rvest)
a<-read_html(""https://www.cwb.gov.tw/V7/forecast/town368/towns/6300200.htm?layer=0&type=Weather&time=7Day"")b<-html_nodes(a,""table"")
c<-html_table(b)

出來的結果
Error in utils::type.convert(out[, i], as.is = TRUE, dec = dec) : invalid multibyte string at '<e6><97><85>?<8a>'



想請教正確的方法,十分感謝!!!!



[關鍵字]:
網路爬蟲





環境敘述:
R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
win10 專業版





--","R_Language"
"58","M.1559356239.A.9CA","dorminia","問題","R套件上傳normalized path問題",2019-06-01 10:30:37,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
我有個套件要上傳，裡面有包Rcpp的部分，但被CRAN回傳以下Warning

** byte-compile and prepare package for lazy loading
Warning in normalizePath(path.expand(path), winslash, mustWork) :

path[1]=""d:/temp/RtmpWkFywz/R.INSTALL2c49856095b59/HMMmlselect/
src/../inst/include"":
Das System kann die angegebene Datei nicht finden

感覺是某個預設path的問題但我已經確定整個code內部沒有任何local
path了。實在看不懂這到底是什麼，想問一下眾大大要怎麼改 @@

[程式範例]:

[環境敘述]:
R version 3.5.2 (2018-12-20)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

--
切記  任何事情都不能抹殺我們對唱歌的熱情

因為這是我們活著的原因

--","R_Language"
"59","M.1559233757.A.B50","savin","問題","mxnet 進行分析出現錯誤",2019-05-31 00:29:15,NA,NA,"數據如下
No.     x1      x2      x3      x4      y1      y2
1       -17.8   1.2     17.5    4.2     24.7    -56.4
2       -11.2   -3.7    0       14.4    -53.8   34.4
3       3.9     -5.7    20.9    7.8     18.3    22
4       4.2     -5.9    -10     -6.8    -47.5   43.3
5       -1.8    -13.8   -4.6    -10.4   -185.1  164.8
6       0       -3.4    10.6    6.1     8.2     8.5
...共200筆有y1,y2 資料80筆未知y1,y2

參考網路使用mxnet 但目前都跑不出來 =.=
小弟目前找不到可以解的方法 也爬過文 希望有大大可以幫忙一下

Error in symbol$infer.shape(list(...)) :
  Error in operator dnn: Shape inconsistent, Provided=[200], inferred
shape=[200,10]

library(neuralnet) # for neuralnet(), nn model
library(nnet)      # for class.ind()
library(xlsx)
library(mxnet)

#Load data
Data_Path<-""D:/2019/W21/R/DM_Assignment_4_NN.xlsx""
Data<-read.xlsx(file=Data_Path,sheetIndex=1 , header=T)
Data<-na.omit(Data) #刪除沒有y1,y2的資料
str(Data)
head(Data)
Data<-as.matrix(Data)

# 輸入層
data <- mx.symbol.Variable(""data"")

# 第一隱藏層: 500節點，狀態是Full-Connected
fc1 <- mx.symbol.FullyConnected(data, name=""1-fc"", num_hidden=500)
# 第一隱藏層的激發函數: Relu
act1 <- mx.symbol.Activation(fc1, name=""relu1"", act_type=""relu"")
# 這裡引入dropout的概念
drop1 <- mx.symbol.Dropout(data=act1, p=0.5)

# 第二隱藏層: 400節點，狀態是Full-Connected
fc2 <- mx.symbol.FullyConnected(drop1, name=""2-fc"", num_hidden=500)
# 第二隱藏層的激發函數: Relu
act2 <- mx.symbol.Activation(fc2, name=""relu2"", act_type=""relu"")
# 這裡引入dropout的概念
drop2 <- mx.symbol.Dropout(data=act2, p=0.5)

# 輸出層：因為預測數字為0~9共十個，節點為10
output <- mx.symbol.FullyConnected(drop2, name=""output"", num_hidden=10)
# Transfer the Evidence to Probability by Softmax-function
dnn <- mx.symbol.LinearRegressionOutput(output, name=""dnn"")

#分割資料
train.ind <- c(1:200)
train.x = data.matrix(Data[train.ind, 2:5])
train.y1 = c(Data[train.ind, 6])
train.y2 = data.matrix(Data[train.ind, 7])
test.x = data.matrix(Data[-train.ind, 2:5])
test.y1 = data.matrix(Data[-train.ind, 6])
test.y2 = data.matrix(Data[-train.ind, 7])

mx.set.seed(0)

# 訓練剛剛創造/設計的模型
dnn.model <- mx.model.FeedForward.create(
  dnn,       # 剛剛設計的DNN模型
  X=train.x,  # train.x
  y=train.y1,  # train.y
  ctx=mx.cpu(),  # 可以決定使用cpu或gpu
  num.round=4,  # iteration round
  array.batch.size=200, # batch size
  learning.rate=0.05,   # learn rate
  momentum=0.9,         # momentum
  array.layout = ""rowmajor"",
  eval.metric=mx.metric.accuracy, # 評估預測結果的基準函式*
  initializer=mx.init.uniform(0.07), # 初始化參數
  epoch.end.callback=mx.callback.log.train.metric(100)
)

--","R_Language"
"60","M.1559121671.A.224","lmzenith","問題","R讀取.mat檔的問題",2019-05-29 17:21:09,NA,NA,"小弟手邊有個.mat的檔案
在Matlab裡面就是個200*1的矩陣，裡面是隨機數字，double格式
裝了額外的安裝包，讓R可以讀取它
原本是想做圖，橫軸是數字1:200
縱軸就是.mat裡面的數值
結果讀進來，發現dim是NULL
無法跟數字1:200的矩陣一起作圖
請問這要如何解決呢？

補圖：https://i.imgur.com/oOeJMkV.pnghttps://i.imgur.com/3giaK3Z.png中間全是數字就不貼了
--","R_Language"
"61","M.1558673077.A.F67","AndrewShi","問題","畫累積分布函數(CDF)圖的問題",2019-05-24 12:44:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想請教各位大大
目前我有一筆降雨資料(ncdf檔)，資料的維度為經度41格，緯度77格，總天數為9862天，
現在我想要將所有網格所有天數(41x77x9862)的降雨值出來畫累積分布圖(CDF)，我所用
的指令為ecdf()，但圖始終畫不出來，Console右上角的紅點出現了快半小時後消失且沒
有出現錯誤訊息，但畫圖區還是一片空白，不確定是不是要畫的值太多所導致還是另有
其他原因，所以想請教各位大大有什麼方法可以解決這個問題，謝謝。
降雨資料放置於此:http://0rz.tw/JI056[程式範例]:
library(ncdf4)
library(data.table)
library(tidyverse)

memory.limit(size=50000)

#讀取資料
HIRAM_WRF_file <- ""C:\\Users\\TOM\\Desktop\\197901-200512_pr_axis_time_domain.nc""
HIRAM_WRF_data <- nc_open(HIRAM_WRF_file)
print(HIRAM_WRF_data)
hiram_wrf_lon <- ncvar_get(HIRAM_WRF_data,""lon"")
hiram_wrf_lat <- ncvar_get(HIRAM_WRF_data,""lat"")
hiram_wrf_time <- ncvar_get(HIRAM_WRF_data,""time"")
hiram_wrf_pr <- ncvar_get(HIRAM_WRF_data,""pr"")
hiram_wrf_pr
dim(hiram_wrf_pr)

#畫CDF曲線
hiram_wrf_pr_cdf <- ecdf(hiram_wrf_pr[hiram_wrf_pr>=0])
summary(hiram_wrf_pr_cdf)
plot(hiram_wrf_pr_cdf,col=""black"",lwd=2
     ,xlim=c(0,2000),ylim=c(0,1),xlab=""pr(mm)"",ylab=""CDF"")

[環境敘述]:https://imgur.com/psT3fMx[關鍵字]:
累積分布函數 CDF ncdf檔

--","R_Language"
"62","M.1558522900.A.FD1","locka","問題","把 data frame 轉成 list",2019-05-22 19:01:38,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

如題,我有一個dataframe像這樣

   Project         案例國家     LON    LAT
1        A             中國 106.514 33.420
2        B             中國 106.514 33.420
3        A             香港 114.129 22.423
4        B             香港 114.129 22.423


我想要得到像下面這樣的結果:

[[1]]
   Project  案例國家     LON    LAT
1        A      中國 106.514 33.420
2        A      香港 114.129 22.423

[[2]]
   Project  案例國家     LON    LAT
1        B      中國 106.514 33.420
2        B      香港 114.129 22.423

請問我該怎麼做呢?
先謝謝各位大神 m(__)m


[關鍵字]:data frame, list--","R_Language"
"63","M.1558351499.A.1BF","jerkoffme","問題","渲染plot問題",2019-05-20 19:24:57,NA,NA,"[軟體熟悉度]:

有使用經驗約1-2年

[問題敘述]:
當在做圖時，只要資料是時間格式，例如下方的snippet

air_visits %>%
  filter(visit_date > as.POSIXct(as.Date(""2016-04-15"")) & visit_date <
as.POSIXct(as.Date(""2016-06-15""))) %>%
  group_by(visit_date) %>%
  summarise(all_visitors = sum(visitors)) %>%
  ggplot(aes(x = visit_date, y = all_visitors)) +
  geom_line(color = ""steelblue"", size = 1) +
  theme_fivethirtyeight() +
  geom_smooth(method = ""loess"", color = ""black"", span = 1/7, alpha = 0.3)

x軸不管為Date格式或POSIXct，圖片render出來x軸都是中文例如 四月15
我希望是羅馬數字或英文的例如 April 15

我的環境為

""LC_COLLATE=Chinese (Traditional)_Taiwan.950;LC_CTYPE=Chinese
(Traditional)_Taiwan.950;LC_MONETARY=Chinese
(Traditional)_Taiwan.950;LC_NUMERIC=C;LC_TIME=Chinese
(Traditional)_Taiwan.950""

我是覺得轉成英文環境就可以
但我輸入以下

Sys.setlocale(category = ""LC_ALL"", locale = ""UTF-8"")

Console就會回應

In Sys.setlocale(category = ""LC_ALL"", locale = ""UTF-8"") :
  OS reports request to set locale to ""UTF-8"" cannot be honored

覺得很煩目前無解中，請問有時麼方法上在做圖時渲染出來不要是用中文顯示阿

--
推 maxxV3:說真的    有人總統想選一個女人家嗎  = =                  04/19 21:48
→ teremy:韓國總統都是女的了。韓國還不夠大男人嗎?                  04/19 21:49
噓 miler22020:樓上是遠古時帶來的嗎                                 04/19 21:49
→ miler22020:樓樓上                                               04/19 21:49
推 Top5566:樓樓樓上                                                04/19 21:50
→ miler22020:樓樓樓樓   幹 算了                                   04/19 21:50

--","R_Language"
"64","M.1558292555.A.D51","AmigoSafin","問題","incorrect number of subscripts",2019-05-20 03:02:32,NA,NA,"[問題類型]:

[updated]
已經解決了 謝謝大家
我就是直接把第121個欄位填進去CT.raw[i,121] 因為最後一個欄位是120
所以我就把新的欄位加到最後方
就可以了
但是function還是沒有辦法
我之前試著寫一個function
但是我用Data=CT.raw
就沒反應
用CT.raw=Data也不行
但上述用loop跑就可以
為了完成專案
就先用loop去做了

另外網址我是沒有被要求登入耶@@
我換成google drive試試看好了
謝謝所有回覆的大大請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的目前在做的專案需要根據sample中不同的size去配置合適的random數
我寫出loop了
但只要在loop外測試都沒問題
但放進loop中 就持續收到error:
incorrect number of subscrits on matrix
但我已經確認資料檔案都是data frame
已感到黔驢技窮
還請大家幫忙
資料檔案和code都不複雜
但不知道為何debug不出來

資料檔案在這https://reurl.cc/Ynrvl[程式範例]:
CT.raw <- read.csv(file = ""CT_raw.csv"", header = TRUE, as.is = FALSE)

x=seq(from=2, to=1730, length=1729) ##只要從row 2到row 1730##

set.seed(123)
for (i in x){
  #for j = 11 to 91
  if (is.na(CT.raw[i,90])==FALSE){
    index = sample(1:80, 35, replace=FALSE)
    index <- as.numeric(index)
    CT.raw <- as.data.frame(CT.raw)
    CT.raw$average[i,]=
mean(as.numeric(unlist(as.data.frame(CT.raw[i,11:90])[,c(index)])), trim = 0,
na.rm = TRUE)
  }else if (is.na(CT.raw[i,60])==FALSE & is.na(CT.raw[i,61])==TRUE){
    index = sample(1:50, 25, replace=FALSE)
    index <- as.numeric(index)
    CT.raw$average[i,]=
mean(as.numeric(unlist(as.data.frame(CT.raw[i,11:90])[,c(index)])), trim=0,
na.rm=TRUE)
  } else if (is.na(CT.raw[i,42])==FALSE & is.na(CT.raw[i,43])==TRUE){
    index = sample(1:32, 20, replace=FALSE)
    index <- as.numeric(index)
    CT.raw$average[i,]=
mean(as.numeric(unlist(as.data.frame(CT.raw[i,11:90])[,c(index)])), trim=0,
na.rm=TRUE)
  } else if (is.na(CT.raw[i,30])==FALSE & is.na(CT.raw[i,31])==TRUE){
    index = sample(1:20, 15, replace=FALSE)
    index <- as.numeric(index)
    CT.raw$average[i,]=
mean(as.numeric(unlist(as.data.frame(CT.raw[i,11:90])[,c(index)])), trim=0,
na.rm=TRUE)
  }
}


[環境敘述]:
R version 3.5.3 (2019-03-11)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.3 tools_3.5.3    yaml_2.2.0


[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"65","M.1558238669.A.816","rickydai888","問題","關於使用R進行卡方檢定的問題",2019-05-19 12:04:27,NA,NA,"各位板上的先進好，繼上次的繪圖問題解決後，在卡方檢定的部分又遭遇到了問題，想
請大家協助。我手邊有一份資料，要分析統獨立場是否跟年齡有關係，如下圖上半部所
示：https://i.imgur.com/Usw5FuI.jpg其中，橫的代表統獨立場，直的代表年齡，而在我直接使用chisq.test()指令後，出現
了警告訊息，然後其他的數值，比如P值也變的有點奇怪，由於本人的統計學基礎薄弱，
就算查了很多資料也找不太到這樣產出的結果是正確還是錯誤，所以只能尋求各位版友
的協助，希望能幫幫忙，謝謝大家！

----
Sent fromBePTT--","R_Language"
"66","M.1558071991.A.23D","AndrewShi","問題","向量分組並取出最大值",2019-05-17 13:46:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想請教各位大大
目前我有一個向量
pr <- c(22,11,29,31,48,77,146,100,261,47,21,14,11,27,26,23,62,132,92,96,136)
我想要將每3個數字分成一組，並取出每組中的最大值出來丟到一個新的向量裡，小弟
我不知道該如何將向量分組，上網查可用split指令，但不知道給定factor，還請大大
們幫忙，謝謝。

[關鍵字]:
向量分組   最大值

--","R_Language"
"67","M.1558060100.A.150","allenpong","情報","DataCamp 個人版一年份訂閱 67% off",2019-05-17 10:28:05,NA,NA,"大家的自學好幫手－Datacamp正在特價

個人版一年份的價格從300鎂降到99鎂，期限還剩６天

有需要的板友可以參考一下

連結：https://bit.ly/2WP16ke--","R_Language"
"68","M.1557926653.A.015","may031556","問題","shiny server連線postgre資料庫出現錯誤",2019-05-15 21:24:11,NA,NA,"[問題類型]:
經驗諮詢(我想在shiny server 連 postgre資料庫)

[軟體熟悉度]:
使用者(使用R三年)

[問題敘述]:
在R server的shinyapp能以RJDBC連線postgre資料庫

但shiny server使用相同shinyapp卻無法載入頁面
並在左下角出現disconnected from the server的提示框

執行錯誤訊息：
Warning: Error in .jfindClass: java.lang.ClassNotFoundException 54: nonymousErro
Java.lang.ClassNotFoundExceptionshiny-server-client.min.js:1 The application une

Diagnostic information has been dumped to the JavaScript error console.

懷疑過沒有java環境變數沒有設定好、shiny沒有指定到正確java版本、jar版本問題

依下文的環境敘述來看
jar版本跟java版本的路徑看起來沒問題

有試過不同版本的.jar檔
postgresql-42.2.5.jar
postgresql-42.2.5.jre6.jar
postgresql-42.2.5.jre7.jar
但仍無法正確執行 故排除jar版本問題

請問各位

如何能在shinyServer成功執行這app呢？

謝謝

[程式範例]:
#以下截取server.R出現錯誤的程式碼
library(shiny)
library(RJDBC)
#跑這一行會出現錯誤
drv=RJDBC(""org.postgresql.Driver"",""/home/myhome/postgresql-42.2.5.jar"")

shinyServer(
…省略…
)

[環境敘述]:
centos7
x64

#使用java -version 查java版本
openjdk version ""1.8.0_212""
openJDK Runtime Environment (build 1.8.0_212-b4)
openJDK 64-bit Server VM (build 25.212.-b04, mixed mode)

#以Sys.getenv(""LD_LIBRARY_PATH"")查詢shiny server的環境變數
輸出結果：
/user/lib64/R/lib:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.212.b04-0.e17_6.x86_64/jre/lib/amd64/server

[關鍵字]:
shiny server, RJDBC


-----
Sent from JPTT on my HTC_U-3u.

--","R_Language"
"69","M.1557822021.A.84D","zythum","問題","dataset找不到",2019-05-14 16:20:19,NA,NA,"如題，
小弟昨天發生問題重灌了R跟RStudio，
結果要執行昨天的code遇到問題，
data(“economics”)
昨天這行還跑得出來，
今天重灌完再執行就變
data set  ‘economics’ not foundhttps://i.imgur.com/eXD4vZK.jpghttps://i.imgur.com/FP2z2ba.jpg問了同學他們也不知道，
求板上大大救援TnT

--","R_Language"
"70","M.1557733796.A.C2D","rickydai888","問題","lattice繪圖問題",2019-05-13 15:49:54,NA,NA,"各位板友大家好，首次發文，是R的新手，想請教以下問題，另外手機排版傷眼抱歉！
我要把以下資料：
library(dplyr)
DT <- tibble(Country=c(""Spain"", ""France"", ""Germany"",""Italy"", ""Sweden""),Popul
ist=c(52,58,65,50, 73),Mixed=c(70,72,70,65,81),Nonpopulist=c(85,84,88,68, 90
))
繪製成點狀圖，而我的語法如下：
DT_tidy<-gather(data = DT,key = ""Type"", value = ""Percentage"",Populist, Mixed
,Nonpopulist)
library(lattice)
DT_tidy2<-as.data.frame(DT_tidy)
NDT_tidy2<-dotplot( Percentage~Type ,DT_tidy2, group=Country,type = ""o"")
update(NDT_tidy2, auto.key=list(points=T, lines=T))
本來按照範例的圖片，應該會長這個樣子：https://i.imgur.com/xQBDUQm.jpg而我自己預期繪圖結果應長這樣：https://i.imgur.com/hfIK4K8.jpg但是結果跑出來變成這樣：https://i.imgur.com/7mRGN2P.jpg我想要調整X軸的順序，讓它符合我預想的圖像，但是怎麼調整都失敗，所以想請教各位
這個要如何修改，非常感謝大家！


--","R_Language"
"71","M.1557399136.A.E08","AndrewShi","問題","迴圈問題(ncdf檔)",2019-05-09 18:52:14,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
    各位大大好，小弟我目前有2個矩陣(原始為list)的數值資料，其中一個為時間的
index(第幾筆)，另一個為各別分配的權重，我要做的事是將這2個矩陣的資訊套用在一筆
降雨資料(netcdf檔)上，由下圖的2個矩陣(時間index.權重)的資訊為例，也就是我要將
原始的降雨資料的第一天(筆)以第1天的降雨值(每個網格點)x0.8334249，加上第9830天的
降雨值x0.12252973來取代，以此類推。
    而小弟我目前卡在不知道該怎麼把矩陣對應的關係(第1天的第1個時間index乘上第一
個權重)放入迴圈中，下面的程式碼中是以analog.indices表示時間的index，weights表
示權重，可能程式碼的邏輯非常怪異，我上網查或許用apply系列的指令較適合，但我也
較少用apply系列的指令，因此較不熟悉，還煩請大大們指點和較詳細的說明，也非常歡
迎引導式教學，謝謝。
2個矩陣以及降雨的資料放在此:http://0rz.tw/JI056https://imgur.com/Q4rRKi9(時間index)https://imgur.com/YJFXtr5(權重)[程式範例]:
library(ncdf4)
library(data.table)

memory.limit(size=50000)

analog.indices <- A[[1]]
analog.indices <- matrix(unlist(analog.indices), nrow=length(analog.indices),
byrow=T)
weights <- A[[2]]
weights <- matrix(unlist(weights), nrow=length(weights), byrow=T)

HIRAM_WRF_data <- nc_open(""C:\\Users\\TOM\\Desktop\\R(資料庫)\\WRF(動力降尺度
資料)\\T2WHIRAM_c384_amip\\197901-200512_pr_axis_time_domain.nc"")
print(HIRAM_WRF_data)
hiram_wrf_lon <- ncvar_get(HIRAM_WRF_data,""lon"")
hiram_wrf_lat <- ncvar_get(HIRAM_WRF_data,""lat"")
hiram_wrf_time <- ncvar_get(HIRAM_WRF_data,""time"")
hiram_wrf_pr <- ncvar_get(HIRAM_WRF_data,""pr"")

pr <- array(NA,dim=c(length(hiram_wrf_lon),length(hiram_wrf_lat),2))
for(i in analog.indices[1,i]){
  for(w in weights[1,w]){
    if(i==w){
      pr[,,1:2] <-
ncvar_get(HIRAM_WRF_data,""pr"",start=c(1,1,i),count=c(41,77,1))*w
    }
  }
}
View(pr[,,1])

[環境敘述]:

[關鍵字]:
迴圈   ncdf檔

--","R_Language"
"72","M.1557240953.A.5E4","boshings","問題","Rmpi 安裝請教",2019-05-07 22:55:47,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:
入門

[問題描述]:
我想在用國網中心HPC主機執行平行運算，Rmpi一直無法安裝成功。
嘗試了幾個環境模組仍然失敗。

1) gcc/6.3.0 2) intel/2018_u1 3)openmpi/gcc/64/1.10.3


[程式範例]:> install.packages(""Rmpi"")Installing package into ‘
/home/u1/ee/R/x86_64-redhat-linux-gnu-library/3.5’
(as ‘lib’ is unspecified)
--- Please select a CRAN mirror for use in this session ---
trying URL 'https://cran.mtu.edu/src/contrib/Rmpi_0.6-9.tar.gz'Content type 'application/x-gzip' length 106745 bytes (104 KB)
==================================================
downloaded 104 KB

* installing *source* package ‘Rmpi’ ...
** package ‘Rmpi’ successfully unpacked and MD5 sums checked
checking for gcc... gcc -m64 -std=gnu99
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc -m64 -std=gnu99 accepts -g... yes
checking for gcc -m64 -std=gnu99 option to accept ISO C89... none needed
checking for pkg-config... /usr/bin/pkg-config
checking if pkg-config knows about OpenMPI... no
checking how to run the C preprocessor... gcc -m64 -std=gnu99 -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking mpi.h usability... yes
checking mpi.h presence... yes
checking for mpi.h... yes
Trying to find libmpi.so or libmpich.a ...
checking for main in -lmpi... no
libmpi not found. exiting...
ERROR: configuration failed for package ‘Rmpi’
* removing ‘/home/u1/ee/R/x86_64-redhat-linux-gnu-library/3.5/Rmpi’

The downloaded source packages are in
        ‘/tmp/RtmpcVbC04/downloaded_packages’
Warning message:
In install.packages(""Rmpi"") :
  installation of package ‘Rmpi’ had non-zero exit status









[環境敘述]:

[[email<U+00A0>protected]~]$ module list
Currently Loaded Modulefiles:
  1) openmpi/gcc/64/1.10.3> sessionInfo()R version 3.5.2 (2018-12-20)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Red Hat Enterprise Linux

Matrix products: default
BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.2




[關鍵字]:
Rmpi

--","R_Language"
"73","M.1556859722.A.095","poker0531","問題","連續正值或負值的次數",2019-05-03 13:01:58,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:範例如下, 想做出 PnL 欄連續正值或負值出現的次數,查了一下找不到, 不知道是不是關鍵字問題, 懇請各路大神教我, 謝謝!GrzTimes = 連續正值的次數LeZTimes = 連續負值的次數[程式範例]:testDate     PnL   GrZTimes  LeZTimes1  2012-11-28 -1521.0       0         02  2012-12-05  -453.1       0         13  2012-12-12    96.9       0         04  2012-12-19    72.9       1         05  2012-12-26   522.2       2         06  2013-01-02    12.8       3         07  2013-01-09   389.8       4         08  2013-01-16   -69.4       0         09  2013-01-23   492.4       1         010 2013-01-30    -0.8       0         0[環境敘述]:[關鍵字]:連續次數,MDD,DD

--","R_Language"
"74","M.1556610476.A.030","TOOYA","問題","GUI回傳變數",2019-04-30 15:47:54,NA,NA,"我想做一個視窗選項，https://i.imgur.com/7YY1QOw.jpg讓使用者可以從「建模」「校正」「分析」三個選項中做選擇

我將
「建模」命名為1
「校正」命名為2
「分析」命名為3

我希望能夠回傳這個視窗選擇後的資訊(1/2/3)，

但是我看了tcltk2的範例，大部分的反應都只是關掉視窗...

最多是根據選擇做一件簡單的反應，

例如使用switch+tkmessageBox開新視窗顯示一句話。

不知道要怎麼做，才能夠把選擇的結果紀錄回傳，

方便我做後續的處理？
(print不行，我要存成變數，不是印出來）

想了一天想不出來，來向各位大神求救><

TEST_GUI = function(){
library(tcltk2)
win1 <- tktoplevel()
win1$env$rb1 <- tk2radiobutton(win1)
win1$env$rb2 <- tk2radiobutton(win1)
win1$env$rb3 <- tk2radiobutton(win1)
rbValue <- tclVar(""PANDA"")

tkconfigure(win1$env$rb1, variable = rbValue, value = 1)
tkconfigure(win1$env$rb2, variable = rbValue, value = 2)
tkconfigure(win1$env$rb3, variable = rbValue, value = 3)
tkgrid(tk2label(win1, text = ""現在要執行的功能?""), columnspan = 2, padx = 10,
pady = c(10, 5))
tkgrid(tk2label(win1, text = ""建模""), win1$env$rb1, padx = 10, pady = c(0, 5))
tkgrid(tk2label(win1, text = ""校正""), win1$env$rb2, padx = 10, pady = c(0, 5))
tkgrid(tk2label(win1, text = ""分析""), win1$env$rb3, padx = 10, pady = c(0, 5))

onOK <- function() {
 rbVal <- as.character(tclvalue(rbValue))
 tkdestroy(win1)
 return(rbVal) #無效
}

win1$env$butOK <- tk2button(win1, text = ""OK"", width = -6, command = onOK)
tkgrid(win1$env$butOK, columnspan = 2, padx = 10, pady = c(5, 15))
tkfocus(win1)
}

--","R_Language"
"75","M.1556335575.A.92D","paranoia5201","問題","all.equal()不用印出所有資訊",2019-04-27 11:26:13,NA,NA,"大家好：

這裡想要詢問迴圈資料「選擇性輸出」的做法。


有一份資料，我要比對它的欄位兩兩是否相同。

【單筆測試】> m <- all.equal(list.d2[1, ], list.d2[2, ])> m[1] ""Attributes: < Component “row.names”: Mean relative difference: 1 >""
[2] ""Component “phone.4”: 1 string mismatch""


由於筆數繁多，所以我寫了一個迴圈來重複執行：> for(i in seq(1, 5, by = 2)){+   match <- all.equal(list.d2[i, ], list.d2[i+1, ])
+   print(i)
+   print(match)
+   }
[1] 1
[1] ""Attributes: < Component “row.names”: Mean relative difference: 1 >""
[2] ""Component “phone.4”: 1 string mismatch""
[1] 3
[1] ""Attributes: < Component “row.names”: Mean relative difference:
0.3333333 >""
[1] 5
[1] ""Attributes: < Component “row.names”: Mean relative difference: 0.2 >""


這裡是想請問：我要如何讓這迴圈只列印有不一致的資訊，而其他不用顯示？



【理想結果】
[1] 1
[2] ""Component “phone.4”: 1 string mismatch""


感謝∼


--","R_Language"
"76","M.1556273052.A.E25","paranoia5201","問題","用多筆資料拼湊出完整資料表",2019-04-26 18:04:10,NA,NA,"我的資料長相如下：> head(list18c)# A tibble: 6 x 8
  姓名   單位       職稱　　 地址    電話 傳真號碼 手機    email
  <chr>  <chr>      <chr>    <chr>   <chr> <chr> <chr>     <chr>
1 廖AA 中正大學   教授     621嘉義縣 <NA>  <NA>  0918-333~ <NA>
2 田BB <NA>       <NA>     100台北市 <NA>  <NA>  0911-246~ <NA>
3 陳CC <NA>       <NA>     407台中市 <NA>  <NA>  0988-111~ <NA>
4 黃DD <NA>       <NA>     <NA>      <NA>  <NA>  <NA>      <NA>
5 陳EE 台灣大學   教授     <NA>      <NA>  <NA>  <NA>      <NA>
6 唐FF <NA>       <NA>     242新北市 <NA>  <NA>  0928-555~ <NA>


【目的】：拼湊出一個完整的資料表。

【說明】：

一、我有好幾份資料，有相同的欄位，但是各自不齊全，唯一可比對的根據是「姓名」。

    例如「田BB」在A資料表中有地址及手機，在B資料表中有單位和職稱，

    C資料表有email，D資料表有電話及傳真號碼。

    可以如何下指令，讓R可以自動拼湊出完整的表？

    （簡單的想法，是請R將不是NA的資料列給我，我再case by case於新表格上湊滿）

    （但是又有另一個問題，若有兩個以上的資料表同時都有寫同一欄位卻不相同？）

二、若是有欄位誤填（「單位」寫教授、「職稱」寫「XX公司」），除了copy & paste，

    有什麼較聰明的方法？

三、有關地址前面的郵遞區號，若想要獨立分割成新的欄位，但是有些是3碼有些是5碼，

    有什麼方式可以指示「請從第一個數字切割到第一個中文字之前」？



以上，感謝解答∼




--","R_Language"
"77","M.1556011903.A.47E","paranoia5201","問題","用0取代NA，但不要每一欄",2019-04-23 17:31:41,NA,NA,"我的原始資料長相如下：> check18.1 %>%+   select(name, referrer1) %>%
+   head()

  name                       referrer1
  <chr>                      <chr>
1 <U+6E29>○珠                     王○芸
2 大○食品                   陳○如
3 尤○女                     <NA>
4 尤○玉                     <NA>
5 王○仁                     王○芸
6 王○修                     <NA>


透過下列方式，轉為如下模樣：> check18.2 <-+   check18.1 %>%
+   select(name, referrer1) %>%
+   filter(!is.na(referrer1)) %>%
+   spread(referrer1, referrer1)> head(check18.2)name    　王○芸  陳○如
1       <U+6E29>○珠  　王○芸  <NA>
2       大○食品  <NA>    陳○如
3       尤○女  　<NA>    <NA>
4       尤○玉  　王○芸  <NA>
5       王○仁  　<NA>    <NA>
6       王○修  　<NA>    <NA>


我期待把資料重新編碼後變成這樣：
        name    　王○芸  陳○如
1       <U+6E29>○珠  　     1    0
2       大○食品       0    1
3       尤○女  　     0    0
4       尤○玉  　     1    0
5       王○仁  　     0    0
6       王○修  　     0    0


【我的作法】
先把<NA>都先變成0> check18.2[is.na(check18.2)] <- 0name    　王○芸  陳○如
1       <U+6E29>○珠  　王○芸  0
2       大○食品  0       陳○如
3       尤○女  　0       0
4       尤○玉 　 王○芸  0
5       王○仁  　0       0
6       王○修  　0       0


再把文字內容改成1，結果......> check18.2[check18.2 != 0] <- 1name    　王○芸  陳○如
1        1      　     1        0
2        1             0        1
3        1  　         0        0
4        1 　          1        0
5        1             0        0
6        1  　         0        0


欄位name裡面的資料也都被取代為1了，這不是我想要的結果！

如果逐欄訂正是可以（check18.2$王○芸[check18.2$王○芸 == '王○芸'] -> 1）

但是資料展開的欄位其實有20多項，故想要在此尋求簡單快速的方法。

煩請指教，感謝∼


--","R_Language"
"78","M.1555999436.A.F0B","HayamaKami","情報","徵 DataCamp 帳號共享",2019-04-23 14:03:53,NA,NA,"如題

因為工作上想要自我進修

所以想買DataCamp一年份

目前特價是129鎂/年

如果有人想要share的話可以站內我

share之後也可以一起討論課程內容> <

阿只有48小時喔~~

過了我就要重辦帳號才能有優惠價格了QAQ

--","R_Language"
"79","M.1555946131.A.39F","bjbjbj123","問題","optim疑問",2019-04-22 23:15:26,NA,NA,"[問題類型]:
R的optim套件在某些時候無法找到極值
舉例: f(x1,x2) = x1^10000+(1-x1)^10000+x2^10000+(1-x2)^10000, 0<x1<1 0<x2<1
這東西直接手算微分很容易
但optim套件會因為f幾乎都趨近於零導致無法迭代
請板上高手大大幫看
謝謝

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
如問題類型所說

[程式範例]:
f = function(x){
  x1 = x[1]
  x2 = x[2]
  return(x1^10000+(1-x1)^10000+x2^10000+(1-x2)^10000)
}

optim(par = c(0.3,0.3), fn = f)

[環境敘述]:
output 結果如下(事實上手算很容易知道極值為0.5 0.5)

$par
[1] 0.3 0.3

$value
[1] 0

$counts
function gradient
      9     NA

$convergence
[1] 0

$message
NULL

--","R_Language"
"80","M.1555076376.A.EFE","engfen","問題","多條件分組加總及字串相加",2019-04-12 21:39:32,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手[問題敘述]:我有一組資料，資料格式如下https://i.imgur.com/twxssIj.png我想依據住院序號(In_ID)及藥物名稱(Drug)，把當次住院期間，
開同一種學名藥的劑量(dose)加總起來，
以及用法(usage)字串相加，
其他欄位(例如病歷號、年齡、性別)則保持不變。
並把結果匯出來成另一個檔案

希望呈現以下結果https://i.imgur.com/UD40lg6.png但一直出現下列錯誤訊息

Error in `[.data.table`(test, , { :
  The items in the 'by' or 'keyby' list are length (1,1). Each must be length
13; the same length as there are rows in x (after subsetting if i is
provided).

完全不知道如何解Bug 只能請各位指點迷津

範例檔有放在雲端https://nofile.io/f/yMTmqZody3d/test.xlsx[程式範例]:library(readxl)
library(data.table)

test <- read_excel(""D:/test.xlsx"",sheet = ""eng"")
setDT(test)

test[,{.(prod=paste(""usage""),collapse="","")}, by=.(""In_ID"", ""Drug"")]
test[,{dose.sum:=sum(""dose"")}, by=.(""In_ID"", ""Drug"")]
test2 <- test[, .SD[.N], by =.(""In_ID"", ""Drug"")][環境敘述]:R version 3.4.4 (2018-03-15)
Windows 10

[關鍵字]:

多條件相加、字串合併

--","R_Language"
"81","M.1554994552.A.947","paranoia5201","問題","程式碼中的中文變亂碼，怎辦？",2019-04-11 22:55:50,NA,NA,"簡而言之，在A電腦完成工作的程式碼，在B電腦打開後，中文的部分就變成亂碼，該如何解？

由於檔案中有許多中文字串，所以要全部改為英文這實在無法……懇請指教<U+FF61>

謝謝！

（程式碼是儲存成.R檔，若是要利用其他軟體如Note或Notepad++來解，我也能接受<U+FF61>）

-----
Sent from JPTT on my Sony G3226.

--","R_Language"
"82","M.1554932779.A.2AA","engfen","問題","經緯度換算兩點距離",2019-04-11 05:46:17,NA,NA,"[問題類型]:

第一次嘗試用R做地理資訊分析，先前已將2萬筆地址成功轉換成TWD97的經緯度座標。

資料分析目的是想

探討每一個病患住家離醫院遠近，與該病患按時服藥或按時回診相關性

是否有合適及好用的套件可以介紹？

除了能計算兩點直線距離外，更希望有參數可以設定 若使用步行   搭大眾運輸  自行開車
  須花費多少小時才能抵達。


[軟體熟悉度]:
入門  接觸R約有一年時間

[問題敘述]:
想做空間資訊使用


[環境敘述]:
Win10 R3.4.2

--","R_Language"
"83","M.1554869727.A.7D7","paranoia5201","問題","Re: 執行指令而console沒反應，何解？",2019-04-10 12:15:25,NA,NA,"感謝各位在前一篇推文的解法。

特別是鄉民locke的解法，又學到了一招。

（btw，「``」這符號到底要怎麼key-in？我只會複製貼上。）

請教過其他朋友，說應該是記憶體不足所以才會跑不動。

在網路上找到較可能的解法，是這PPT的說明（p.3）：http://www.hmwu.idv.tw/web/R/D01-hmwu_R-ReadLargeData.pdf這裡是想問，以下指令是在CMD中執行嗎？

""C:\Program Files\R\R-3.2.2\bin\x64\Rgui.exe"" --max-mem-size=2040M

除此之外，還請指點要怎麼改記憶體設定，特別是Rstudio，感謝。


以下是我的工作電腦狀況：> memory.size()[1] 258.5> memory.limit()[1] 32706> R.version_
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status
major          3
minor          5.1
year           2018
month          07
day            02
svn rev        74947
language       R
version.string R version 3.5.1 (2018-07-02)
nickname       Feather Spray※ 引述《paranoia5201 (社會黑暗、行路難)》之銘言：: [問題類型]:: R突然對於指令無反應，求解。: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我的問題與這位發文者的狀況相同，就是R指令突然都沒有反應。: https://github.com/rstudio/rstudio/issues/1916: > 1+1: > 2*2: 以上輸入都不會出現答案。: 透過 Ctrl+Shift+F10 來 Restart R，可以讓console回神。: （上面網頁的其他方法都有試過，但是只有這招有用。）: 但是我現在只要運算到某一欄位，又會變為當機狀態，可是我一定要用該欄位啊∼∼: 爬文發現這問題好似很多人遇到，但是似乎沒有好的解方。: 還請指點，感謝∼--","R_Language"
"84","M.1554810905.A.48C","paranoia5201","問題","執行指令而console沒反應，何解？",2019-04-09 19:55:00,NA,NA,"[問題類型]:
R突然對於指令無反應，求解。


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)


[問題敘述]:
我的問題與這位發文者的狀況相同，就是R指令突然都沒有反應。https://github.com/rstudio/rstudio/issues/1916> 1+1> 2*2以上輸入都不會出現答案。

透過 Ctrl+Shift+F10 來 Restart R，可以讓console回神。

（上面網頁的其他方法都有試過，但是只有這招有用。）

但是我現在只要運算到某一欄位，又會變為當機狀態，可是我一定要用該欄位啊∼∼

爬文發現這問題好似很多人遇到，但是似乎沒有好的解方。

還請指點，感謝∼



--","R_Language"
"85","M.1554605495.A.026","ntpuisbest","問題","Re: grid生樣本 避免for迴圈",2019-04-07 10:51:34,NA,NA,"※ 引述《celestialgod (天)》之銘言：: 1. Vectorize用的mapply，其實還是迴圈，而且表現更糟: 2. rt沒有辦法直接執行原PO想要的那種方式，你可以自己用Rcpp刻一個: 3. 花時間查資料，有時候不如看文件或是source code來的有效:    Vectorize直接看應該不難找到重點:    rt可以直接看文件: 會看到df degrees of freedom (> 0, maybe non-integer). df = Inf is allowed.: 這裡很明顯告訴你他不能用vector of degrees of freedom....: 下面我比較一下幾種做法：: n <- 20: theta <- seq(0, 1, len=100) + 0.001 # add small value to avoid warning: for_loop_rt <- function(n, theta) {:   stopifnot(length(n) == 1, abs(n - floor(n)) < 1e-8):   X <- matrix(NA, n, length(theta)):   for (i in seq_along(theta)):     X[ , i] <- rt(n, theta[i]):   return(X): }: library(compiler): for_loop_rt_compiled <- cmpfun(for_loop_rt): rt_vectorized <- Vectorize(rt): library(microbenchmark): microbenchmark(:   sapply = sapply(theta, function(t) rt(20, 1/t)),:   vectorized = rt_vectorized(rep(n, length(theta)), theta, ncp = rep(0,: length(theta))),:   for_loop = for_loop_rt(n, theta),:   for_loop_cmpfun = for_loop_rt_compiled(n, theta): ): # Unit: microseconds: #             expr   min     lq     mean median     uq    max neval: #           sapply 556.8 576.10  597.278 584.30 594.25 1639.1   100: #       vectorized 898.6 923.45 1041.179 936.45 961.45 2637.4   100: #         for_loop 546.4 557.00  649.992 564.85 571.65 5844.1   100: #  for_loop_cmpfun 541.9 558.65  679.358 566.45 573.85 2290.1   100: 這結果，很諷刺地告訴你用Vectorize只是讓事情更糟而已XDDDDDD: 然後反而用for loop最快.... 這件事情其實我有在板上談過....: matrix操作 R真的很快.... 試著相信R一下^.<: ※ 引述《locka (locka)》之銘言：: : 感謝 celestialgod 版主大大提點:: : 以前以為 *apply 家族的函數就已經是向量化(vectorized)的寫法了: : 查了資料才發現其實底層背後還是有 for 迴圈 (覺得震撼啊...): : 試試看這樣的寫法: : theta <- seq(0,1,len=100): : df <- rep(19,len=100): : n <- rep(20,len=100): : vrt <- Vectorize(rt): : x <- vrt(n=n, df=df, ncp=1/theta): : 於是 x[,1] ... x[,100] 就是100個 n 等於20 然後對應各自 delta 值的 t 分配樣本了: : (但是不知道 df, n 的預先定義有沒有意義?): : 請版上各位高手再指點~ 謝謝大家: : ======: : 補充：: : 但還是有查到 *apply function 的好處:: : 1. 程式易讀性: : 2. 會 pre-allocate 向量的記憶體空間: : 2. 只影響區域變數不會改變全域變數: : ref: https://www.r-bloggers.com/vectorization-in-r-why/感謝大家回答

其實最後我選擇用第一篇貼文的lapply來做

我的敘述不太好

我並不是不想用迴圈

只是不想寫for 迴圈

對於我很晚回復這件事我也感到抱歉

畢竟大家都好熱烈的討論

果然R版真的是藏龍臥虎XDD

--","R_Language"
"86","M.1554186930.A.905","jerkoffme","問題","as.interger轉換問題",2019-04-02 14:35:26,NA,NA,"[問題類型]:資料行轉換問題



[軟體熟悉度]:
R使用一年以上


[問題]

假設當我有一串factor向量叫x
>x
1001001010
levels:0,1

但我將它轉換為as.interger(x)
卻會變成

2112112121

不理解為何轉換為整數後都會自動+1，是因為0不是整數嗎，但0是整數阿
苦惱中


[環境敘述]:
3.4.4

--
推 maxxV3:說真的    有人總統想選一個女人家嗎  = =                  04/19 21:48
→ teremy:韓國總統都是女的了。韓國還不夠大男人嗎?                  04/19 21:49
噓 miler22020:樓上是遠古時帶來的嗎                                 04/19 21:49
→ miler22020:樓樓上                                               04/19 21:49
推 Top5566:樓樓樓上                                                04/19 21:50
→ miler22020:樓樓樓樓   幹 算了                                   04/19 21:50

--","R_Language"
"87","M.1553705398.A.47A","dreler1","問題","ncdf4 如何刪掉現有的data/var",2019-03-28 00:49:55,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
我想弄一個netcdf的檔案 去給既有的 執行檔讀(fortran/java base)

但是所需的format 算比較特殊

因為在ncdf4裡面 你加var 他會把你每個dim都先加成 var

所以一開始會多好幾個var

我的執行檔是別人寫的 我手邊沒有source code 要改可能也很花時間

我猜他們hard coding用順序去擷取要的var 所以他沒辦法正確讀到我的檔案

所以我要hard coding把多餘的var 移除

補充一下 我不能用cdo 因為會使得我檔案的格式跑掉 執行檔沒辦法讀

[程式範例]:http://0rz.tw/XSL0F這是我產生的headerhttps://imgur.com/a/jEPSp9R這是我想要的headerhttps://imgur.com/a/YoJrRBD[環境敘述]:> sessionInfo()R version 3.4.3 (2017-11-30)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:選擇性，也許未來有用--","R_Language"
"88","M.1553702206.A.0CA","celestialgod","問題","Re: grid生樣本 避免for迴圈",2019-03-27 23:56:42,NA,NA,"1. Vectorize用的mapply，其實還是迴圈，而且表現更糟

2. rt沒有辦法直接執行原PO想要的那種方式，你可以自己用Rcpp刻一個

3. 花時間查資料，有時候不如看文件或是source code來的有效

   Vectorize直接看應該不難找到重點

   rt可以直接看文件

會看到df degrees of freedom (> 0, maybe non-integer). df = Inf is allowed.

這裡很明顯告訴你他不能用vector of degrees of freedom....



下面我比較一下幾種做法：

n <- 20
theta <- seq(0, 1, len=100) + 0.001 # add small value to avoid warning

for_loop_rt <- function(n, theta) {
  stopifnot(length(n) == 1, abs(n - floor(n)) < 1e-8)
  X <- matrix(NA, n, length(theta))
  for (i in seq_along(theta))
    X[ , i] <- rt(n, theta[i])
  return(X)
}

library(compiler)
for_loop_rt_compiled <- cmpfun(for_loop_rt)

rt_vectorized <- Vectorize(rt)


library(microbenchmark)
microbenchmark(
  sapply = sapply(theta, function(t) rt(20, 1/t)),
  vectorized = rt_vectorized(rep(n, length(theta)), theta, ncp = rep(0,
length(theta))),
  for_loop = for_loop_rt(n, theta),
  for_loop_cmpfun = for_loop_rt_compiled(n, theta)
)

# Unit: microseconds
#             expr   min     lq     mean median     uq    max neval
#           sapply 556.8 576.10  597.278 584.30 594.25 1639.1   100
#       vectorized 898.6 923.45 1041.179 936.45 961.45 2637.4   100
#         for_loop 546.4 557.00  649.992 564.85 571.65 5844.1   100
#  for_loop_cmpfun 541.9 558.65  679.358 566.45 573.85 2290.1   100

這結果，很諷刺地告訴你用Vectorize只是讓事情更糟而已XDDDDDD

然後反而用for loop最快.... 這件事情其實我有在板上談過....

matrix操作 R真的很快.... 試著相信R一下^.<※ 引述《locka (locka)》之銘言：: 感謝 celestialgod 版主大大提點:: 以前以為 *apply 家族的函數就已經是向量化(vectorized)的寫法了: 查了資料才發現其實底層背後還是有 for 迴圈 (覺得震撼啊...): 試試看這樣的寫法: theta <- seq(0,1,len=100): df <- rep(19,len=100): n <- rep(20,len=100): vrt <- Vectorize(rt): x <- vrt(n=n, df=df, ncp=1/theta): 於是 x[,1] ... x[,100] 就是100個 n 等於20 然後對應各自 delta 值的 t 分配樣本了: (但是不知道 df, n 的預先定義有沒有意義?): 請版上各位高手再指點~ 謝謝大家: ======: 補充：: 但還是有查到 *apply function 的好處:: 1. 程式易讀性: 2. 會 pre-allocate 向量的記憶體空間: 2. 只影響區域變數不會改變全域變數: ref: https://www.r-bloggers.com/vectorization-in-r-why/: ※ 引述《ntpuisbest (阿龍)》之銘言：: : n <- 20: : theta=seq(0,1,len=100): : rt(n ,1/theta ): : 如題: : 我想要生100組 ，每組都是n=20的t分配樣本: : 只是這100組的theta都不一樣: : 我像上面那樣打 只會回傳20個樣本: : 並不是我想要的 2000個樣本 請問要如何打才能要我要的結果: : 想避免for loop: : 用loop的話 我知道怎麼做--","R_Language"
"89","M.1553700002.A.12F","locka","問題","Re: grid生樣本 避免for迴圈",2019-03-27 23:19:58,NA,NA,"感謝 celestialgod 版主大大提點:

以前以為 *apply 家族的函數就已經是向量化(vectorized)的寫法了
查了資料才發現其實底層背後還是有 for 迴圈 (覺得震撼啊...)

試試看這樣的寫法
theta <- seq(0,1,len=100)
df <- rep(19,len=100)
n <- rep(20,len=100)
vrt <- Vectorize(rt)
x <- vrt(n=n, df=df, ncp=1/theta)

於是 x[,1] ... x[,100] 就是100個 n 等於20 然後對應各自 delta 值的 t 分配樣本了

(但是不知道 df, n 的預先定義有沒有意義?)

請版上各位高手再指點~ 謝謝大家

======

補充：

但還是有查到 *apply function 的好處:

1. 程式易讀性
2. 會 pre-allocate 向量的記憶體空間
2. 只影響區域變數不會改變全域變數

ref:https://www.r-bloggers.com/vectorization-in-r-why/※ 引述《ntpuisbest (阿龍)》之銘言：: n <- 20: theta=seq(0,1,len=100): rt(n ,1/theta ): 如題: 我想要生100組 ，每組都是n=20的t分配樣本: 只是這100組的theta都不一樣: 我像上面那樣打 只會回傳20個樣本: 並不是我想要的 2000個樣本 請問要如何打才能要我要的結果: 想避免for loop: 用loop的話 我知道怎麼做--","R_Language"
"90","M.1553667772.A.42A","ntpuisbest","問題","grid生樣本 避免for迴圈",2019-03-27 14:22:49,NA,NA,"n <- 20
theta=seq(0,1,len=100)
rt(n ,1/theta )

如題

我想要生100組 ，每組都是n=20的t分配樣本

只是這100組的theta都不一樣

我像上面那樣打 只會回傳20個樣本

並不是我想要的 2000個樣本 請問要如何打才能要我要的結果

想避免for loop

用loop的話 我知道怎麼做


--","R_Language"
"91","M.1553586460.A.A52","ntpuisbest","問題","apply 排序矩陣 用列排序",2019-03-26 15:47:37,NA,NA,"B=matrix(c(5,3,9,6,9,4,2,11,3),nrow=3,byrow = T)

C=apply(B,1,sort)


我有一個B矩陣如下

希望B矩陣的元素可以每一列由小排到大

但是不知道為何

apply(B,1,sort)

會錯(結果不對)

請問錯誤的原因是啥
B
       [,1] [,2] [,3]
[1,]    5    3    9
[2,]    6    9    4
[3,]    2   11    3



C
     [,1] [,2] [,3]
[1,]    3    4    2
[2,]    5    6    3
[3,]    9    9   11

--","R_Language"
"92","M.1553571498.A.20C","TreeMan","問題","Re: dataframe運作embed及修正timedelay首欄",2019-03-26 11:38:16,NA,NA,"library(dplyr)

tao_b %>%
        select(鄉鎮市區, 交易標的, 建物型態, 交易日期, 單價元平方公尺) %>%
        arrange(鄉鎮市區, 交易標的, 建物型態, 交易日期, 單價元平方公尺) %>%
        #先把同性質同日期資料分組, 價格以中位數表達, 並將重複樣本刪除
        group_by(鄉鎮市區, 交易標的, 建物型態, 交易日期) %>%
        mutate(單價元平方公尺 = median(單價元平方公尺)) %>%
        filter(row_number()==1) %>%
        #再次將同性質的資料分組處理, 將各組每筆記錄比對上一次交易日之價格
        #此時各組第一個的timedelay是NA
        group_by(鄉鎮市區, 交易標的, 建物型態) %>%
        mutate(timedelay = lag(單價元平方公尺, n = 2)) %>%
        ungroup() %>%
        #將所有資料的timedelay之NA轉為0, 非NA則保留原值
        #計算後兩項相減
        mutate(timedelay = ifelse(is.na(timedelay), 0, timedelay),
               價格差異 = 單價元平方公尺 - timedelay
        )

交流整理資料的做法...

--","R_Language"
"93","M.1553569789.A.7EF","paranoia5201","問題","dataframe運作embed及修正timedelay首欄",2019-03-26 11:09:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
【原始資料型態】> tao_b %>%+   select(鄉鎮市區, 交易標的, 建物型態, 交易日期, 單價元平方公尺) %>%
+   arrange(鄉鎮市區, 交易標的, 建物型態, 交易日期, 單價元平方公尺)
# A tibble: 86,181 x 5
鄉鎮市區        交易標的        建物型態        交易日期        單價元平方公尺
<chr>   <chr>    <chr>          <dttm>  <dbl>
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/6/18       36178
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/2        29795
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/6        30798
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/9        35814
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/15       30679
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/18       25065
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/20       52635
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/23       33718
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/23       33805
八德區  房地(土地+建物)~        住宅大樓(11層含以上有~  2012/7/24       27712
# ... with 86,171 more rows

【所欲資料樣貌】
鄉鎮市區 交易標的 建物型態 交易日期 單價元平方公尺 timedelay [後兩項相減]
（略）   （略）      （略）（略）　　
                                             36178   33805    2373
                                             29795   36178   -6383
                                             30798   29795    1003
                                             35814   30798    5016
                                             30679   35814   -5135
                                             25065   30679   -5614
                                             52635   25065   27570
                                             33718   52635  -18917
                                             33805   33718      87
                                             27712   33805   -6093


【遭遇問題】
1. 單獨用embed()拿到欄位timedelay欄位可以，但是要在檔案tao_b裡面新增這個欄位，
   不知道該如何是好。
        embed(tao_b$單價元平方公尺, 2)

2. 由於資料排序之下會有不同的鄉鎮市區、交易標的和建物型態，每項條件相同的
   第一欄timedelay應修正為0，該如何用簡單指令找到該欄位並取代為0？
   （也就是上表顯示為'2373'的欄位）

3. 從上表來看，由於同條件下，2012-07-23的資料有兩筆，想要直接合併變成一筆，
   期待結果為：

   八德區   房地(土地+建物)~ 住宅大樓(11層含以上有~ 2012-07-23 33761.5
                                                                                =median(c(33718, 33805))


由於資料量大，如果逐步清理資料會很花時間，想請教有無聰明的作法。

還先感謝大家∼



[環境敘述]:> sessionInfo()R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


[關鍵字]:
embed()
timedelay
資料整合

--","R_Language"
"94","M.1553559403.A.B24","TreeMan","問題","Re: 多條件篩選特定資料出來",2019-03-26 08:16:40,NA,NA,"library(dplyr)

#data_A就是你範例資料編碼A的sheet代表的data.frame
#因為你要比對的欄位剛好是data_A所有欄位名稱, 所以我用了colnames(data_A)
#你也可以寫成by = c(""col_1"", ""col_2""...), col_1, col_2就是要比對的欄名
#df另存新檔就是你要的資料了

df <- data_A %>%
    left_join(data_B, by = c(colnames(data_A)))

--","R_Language"
"95","M.1553487890.A.8FF","qibqib","問題","多條件篩選特定資料出來",2019-03-25 12:24:45,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我有兩組資料，其中一組資料只有三個欄位，大約有100多筆數據客戶ID  購買日期        交貨日期51484   2012/6/23       2012/7/2782459   2012/5/7        2012/8/3050702   2012/2/16       2012/3/850702   2013/5/13       2013/6/136131   2012/07/24      2012/8/27第二組資料 包含第一組資料全部欄位外，同時還有其他欄位，約3萬筆數據客戶ID  購買日期        交貨日期        訂單編號        購買總額3096    2015/7/6        2015/7/9        20150701        4553767    2013/5/5        2013/8/8        20130314        6223946    2015/11/2       2015/11/11      20150722        7986066    2015/1/6        2015/1/15       20150101        5596587    2013/6/14       2013/7/29       20130336        2316789    2013/9/13       2013/11/19      20130350        7806977    2012/12/27      2013/2/25       20120236        5608275    2013/2/28       2013/3/29       20130304        320因為第一組資料客戶ID、購買日期及交貨日期都會重複，但三組欄位資料，加起來就不會有重複，能對應到第二組資料某筆資訊如何結合第一組資料所有條件，找出位於第二組資料某筆全部資訊，篩選出來，另存新檔(xls ,txt)相關檔案範例，存放在下列雲端空間https://nofile.io/f/RbUoag4Ma5E/data.xlsx[環境敘述]:Windows 8.1    R v3.5.1--","R_Language"
"96","M.1553361454.A.F36","celestialgod","問題","Re: 類似樞紐分析的表格製作",2019-03-24 01:17:30,NA,NA,"※ 引述《paganina (可以慢慢講嗎)》之銘言：: [問題類型]:程式諮詢: 用R做樞紐分析的表格: [熟悉程度]: 入門(寫過一點點程式，對語法不熟悉)數字計算覺得哪堜ワヰ

group A(B)的三個年紀比例加起來是1

又說那個是性別比例... 覺得很怪...

我先當作你要算男性在group A(B)中，各年紀的分布....

----
好久沒寫R...

給你三種解法，base R再多個欄位就沒辦法了，建議跳過

dplyr的解法不太直覺，自行斟酌

我喜歡的還是data.table的解法乾淨俐落XD


# base R解法
set.seed(100)
DF <- data.frame(
  group = rep(c(""A"", ""B""), 15),
  sex = sample(c(""M"", ""F""), size = 30, replace = TRUE),
  age = rep(c(""0-20"", ""21-60"", ""61-100""), 10),
  stringsAsFactors = FALSE
)

out_DF <- as.data.frame(tapply(DF$sex, list(DF$age, DF$group), function(x)
sum(x == ""M"")))
out_DF$age <- rownames(out_DF)
rownames(out_DF) <- NULL
transform(out_DF, A = A / sum(A), B = B / sum(B))
#           A         B    age
# 1 0.6666667 0.2222222   0-20
# 2 0.3333333 0.4444444  21-60
# 3 0.0000000 0.3333333 61-100

# dplyr
library(dplyr)
library(tidyr)
set.seed(100)
DF <- data_frame(
  group = rep(c(""A"", ""B""), 15),
  sex = sample(c(""M"", ""F""), size = 30, replace = TRUE),
  age = rep(c(""0-20"", ""21-60"", ""61-100""), 10)
)

DF %>% group_by(group, age) %>%
  # get count of male by group and age
  summarise(proportion_male = sum(sex == ""M"")) %>%
  group_by(group) %>%
  # get proportion of male
  mutate(proportion_male = proportion_male / sum(proportion_male)) %>%
  # get pivot table
  spread(group, proportion_male)
# # A tibble: 3 x 3
#  age        A     B
#  <chr>  <dbl> <dbl>
# 1 0-20   0.667 0.222
# 2 21-60  0.333 0.444
# 3 61-100 0.    0.333

# data.table
library(data.table)
set.seed(100)
DT <- data.table(
  group = rep(c(""A"", ""B""), 15),
  sex = sample(c(""M"", ""F""), size = 30, replace = TRUE),
  age = rep(c(""0-20"", ""21-60"", ""61-100""), 10)
)

# get pivot table with male counts in cell
DT2 <- dcast(DT, age ~ group, function(x) sum(x == ""M""), value.var = ""sex"")
# calculate proportion of male
DT2[ , c(""A"", ""B"") := lapply(.SD, function(x) x / sum(x)),
    .SDcols = c(""A"", ""B"")]
DT2
#       age         A         B
# 1:   0-20 0.6666667 0.2222222
# 2:  21-60 0.3333333 0.4444444
# 3: 61-100 0.0000000 0.3333333


--","R_Language"
"97","M.1553357382.A.CE2","paganina","問題","類似樞紐分析的表格製作",2019-03-24 00:09:38,NA,NA,"[問題類型]:程式諮詢
用R做樞紐分析的表格

[熟悉程度]
入門(寫過一點點程式，對語法不熟悉)

[問題敘述]:
以下是我的資料
     group sex  olds
1      A   2    0-20
2      A   2    0-20
3      A   2    0-20
4      A   2    0-20
5      A   1    0-20
6      A   2    0-20
7      A   2    0-20
8      A   2    0-20
9      A   1    0-20
10     A   1    0-20
11     A   1   21-60
12     A   2   21-60
13     A   2   21-60
14     A   1   21-60
15     A   2   21-60
16     B   1   21-60
17     B   1   21-60
18     B   1   21-60
19     B   2   21-60
20     B   2   21-60
21     B   1  61-100
22     B   1  61-100
23     B   1  61-100
24     B   2  61-100
25     B   1  61-100
26     B   1  61-100
27     B   1  61-100
28     B   1  61-100
29     B   1  61-100
30     B   2  61-100
想將資料轉成性別(sex)比例的分布
大概會是這樣
       group_A  group_B
0-20      0.68    0.53
21-60     0.11    0.22
61-100    0.21    0.25
小計       1       1


[目前程式碼]:https://ideone.com/fork/c3ippk[環境]
R R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

other attached packages:
[1] dplyr_0.8.0.1   lubridate_1.7.4 ggplot2_3.1.0
[4] lattice_0.20-38

[關鍵字]:






--","R_Language"
"98","M.1553264787.A.A5B","szx",NA,"barplot中標示特定條件的bar",2019-03-22 22:26:24,NA,NA,"請教如果用barplot指令來畫圖，
有辦法將某些滿足特定條件的bar，
更改其在圖表中呈現的顏色嗎?

比方說我用下列的條件畫了一個圖
barplot(c(1,1,3,4,2,7),names.arg = c(""a"",""b"",""c"",""d"",""e"",""f""))
接著我想將途中大於2的用一個顏色，
剩餘的用另一個顏色來表示，
有辦法嗎?

沒有寫程式經驗的新手懇請各位大大指導，
感謝!!!

--

--","R_Language"
"99","M.1553242247.A.07D","eegame","問題","空間分析",2019-03-22 16:10:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)小弟不清楚R能不能這樣用上來請教各位大大舉例：假設空間有一個梯形空間 知道八個點的XYZ座標 然後有另外10個點的XYZ數據 如何判斷這10個點有沒有落在梯形空間裡面？[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
想做空間判視使用


[環境敘述]:
Win10 R3.2.2


[關鍵字]:選擇性，也許未來有用--","R_Language"
"100","M.1553150492.A.FC3","jerkoffme","問題","變數放在正則表達式中",2019-03-21 14:41:28,NA,NA,"[問題類型]

想將變數放入正則表達式中不知道該如何下手

[軟體熟悉度]:使用R大約一年

[問題敘述]:

由於我想要在特定時間產生報表
我利用系統時間來做filter，但因為系統時間是變動的
我想不通如何把變數塞到正則表達式中



[程式範例]:
systime <- ymd_hms(Sys.time())
report_month <- system - lubridate::days(30)
report_month <- str_sub(report_month, star = 1L, end = -13L)
#若以我現在的時間點則得到
>report_month
""2019-02""

我需要將這個變數塞進grepl裡，可是我想不透怎麼塞
我需要的結果是撈資料前一個月
故以現在這個資料非動態的應該表達為 ""^2019-02""

grepl(""report_month所產生的字串"", 我的資料)

由於加了"" ""，系統就會將字串符裡的東西視為字串故無法放變數，因此想問是否有解法

[環境敘述]

win10
3.4.4

--","R_Language"
"101","M.1552915277.A.182","filialpiety","問題","RStudio介面反應變慢",2019-03-18 21:21:15,NA,NA,"[問題類型]:
使用介面


[軟體熟悉度]:
使用者

[問題敘述]:
使用介面變慢，滑鼠移動變得不靈敏，但是跑資料迴圈速度一樣，只是在使用介面上很當

電腦是今年入手的thinkpad carbon X1 ，記憶體16gb

在開啟rstudio有變慢趨勢，可是其他的編輯器如spyder一樣流暢...

想請問是出了什麼問題？


[關鍵字]:
Lag、變慢


--","R_Language"
"102","M.1552900311.A.18D","frojet","問題","如何內容資料轉置成欄位名稱來計算",2019-03-18 17:11:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我有一組近5萬筆資料，格式如下
每筆""門診序號""就是一次看診紀錄，""處置代碼""為某個藥品代號
每個病人看診，都會開立1~5種不等藥品。https://i.imgur.com/UXNj7M6.jpg原始資料如左圖，但我想轉換資料排版(如右圖)
將藥品代號轉換成每一個欄位，
根據原資料有開立該藥品，則在該欄成 註記成 Yes
方便我後續能統計特定藥品使用頻率


[程式範例]:

不知道如何寫?

[環境敘述]:windows 10R version 3.4.4[關鍵字]:--
當你指責別人時，不要忘記
  一指指向別人，四指是指向自己     ~frojet~

--","R_Language"
"103","M.1552816970.A.72E","Anchorites","問題","非線性回歸, nlme",2019-03-17 18:02:48,NA,NA,"[問題類型]:
給定方程式形式，
非線性回歸。


[軟體熟悉度]:
今天第一次用...
但是時間非常緊迫，
查了一個下午沒結果，
被逼得只好上來問。

[問題敘述]:
給定方程式形式，要決定係數。
方程式形式如下：http://i.imgur.com/MiI8cjm.jpg其中，Mw, Rrup, Vs30, Ztor這4個是已知的參數，要用600筆有以上4個參數的數據，回歸出c0, m1, r1...等7個係數。

結果大概會像這樣http://i.imgur.com/42SXTPf.jpg包含回歸出的係數值及其95%信賴區間。

目前已經知道nlme package似乎可以解決我的問題，也有查過youtube影片。
但nlme好像能處理的非線性，
只有類似像，
y  = a*x1*x2 + b*x1^2 + c
(每個未定係數都是某項的領導係數)
然後R可以決定a, b, c。

但是我的function form太醜了，
在網上找不到類似的範例可以依樣畫葫蘆。

跪求大神解惑
萬分感謝


[程式範例]:
(略)


[環境敘述]:
macOS 10.14.3


[關鍵字]:
特定方程式形式
非線性回歸
nlme

-----
Sent from JPTT on my OPPO CPH1725.

--","R_Language"
"104","M.1552723804.A.80B","paranoia5201","問題","Re: 記憶體不足",2019-03-16 16:10:02,NA,NA,"借標題一問<U+FF61>

我在運行程式時，出圖很慢<U+FF61>

Console出現如下訊息：
Warning message:
Computation failed in 'stat_bin()':
memory exhausted (limit reached?)

由於是筆記型電腦，暫時不考慮擴充記憶體<U+FF61>

請問我可以怎麼做，可以減少出圖等待的時間<U+FF61>

電腦配備：i5、4G記憶體、win8.1。



-----
Sent from JPTT on my Sony G3226.

--","R_Language"
"105","M.1552644143.A.8D9","eegame","問題","刪除特殊符號",2019-03-15 18:02:21,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我想把整理好的矩陣寫入txt裡面
Txt想寫成下面這樣
aaa
bb
Cccc
ddd
矩陣1
矩陣2
矩陣3
End

但是我輸出後會變成
“aaa”
“bb”
“Cccc”
“ddd”
矩陣1
矩陣2
矩陣3
“End”

想要刪除文字前後的”

[程式範例]:
write.table(""aaa"", file = ""D:/R/XX.txt"", sep="" "", append = T, na = "" "", col.na
mes = F, row.name = F)

write.table(""bb"", file = ""D:/R/XX.txt"", sep="" "", append = T, na = "" "", col.nam
es = F, row.name = F)

write.table(""Cccc"", file = ""D:/R/XX.txt"", sep="" "", append = T, na = "" "", col.n
ames = F, row.name = F)

write.table(""ddd"", file = ""D:/R/XX.txt"", sep="" "", append = T, na = "" "", col.na
mes = F, row.name = F)

write.table(矩陣1, file = ""D:/R/XX.txt"", sep=""   "", append = T, na = ""GE4"", co
l.names = F, row.name = F)

write.table(矩陣2, file = ""D:/R/XX.txt"", sep=""   "", append = T, na = ""GN"", col
.names = F, row.name = F)

write.table(矩陣3, file = ""D:/R/XX.txt"", sep=""   "", append = T, na = ""GN"", col
.names = F, row.name = F)

write.table(""End"", file =""D:/R/XX.txt"", sep="" "", append = T, na = "" "", col.nam
es = F, row.name = F)

[環境敘述]:
Win10
R 3.2.2


[關鍵字]:文字處理


--","R_Language"
"106","M.1552572414.A.F20","locka","問題","把物件存成.RData會比較快嗎?(shinyapp)",2019-03-14 22:06:52,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

各位版友好，想請問大家開發 shinyapp 的時候會先把資料存成 .RData 再讀取嗎?

例如讀取外部檔案:
原本是在 runApp() 的時候執行 data <- read.csv(""xxx.csv"")
改成先用 save(data, file=""data.RData"") 存成 .RData
這樣 runApp() 的時候直接執行 load(""data.RData"")

又或者, 我有些物件是用 lapply 函數做成的
一樣先存成 .RData 執行 app 的時候直接 load

這樣就不用每次執行程式都要跑一次 lapply 函數
理論上這樣應該會比較快...嗎?


更明確的說，當部屬到 shinyapps.io 上的時候，這樣會不會比較快

不曉得有沒有高手可以指點一下，或是分享自己的經驗。
謝謝！


[關鍵字]:shiny, shinyapps.io, RData--","R_Language"
"107","M.1552535060.A.110","aklim","問題","時間處裡 (strptime)",2019-03-14 11:44:15,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次[問題敘述]:
我把以下問題簡單化好了。
有一筆資料(txt檔，tab分隔)
19 Jan 19       15:40:00
19 Jan 19       15:41:30
(年月日分別各用一個column(縱向)紀錄)

我把資料讀入到R並將資料轉到 ""time"" object
結果會是:> time[1] ""19 Jan 19 15:40:00"" ""19 Jan 19 15:41:30""

strptime轉換格式> time <- strptime(time, format='%d %b %g %H:%M:%S')> time[1] NA NA
R就會如此無法處理


但若我先設置Sys.setlocale(LC_time)
就可以得到> time <- strptime(time, tz="""", format='%d %b %g %H:%M:%S')> time[1] ""2019-01-19 15:40:00 CST"" ""2019-01-19 15:41:30 CST""
正常處理出需要的結果

現在的問題是，我要使用的package把strptime包在package的一連串程序裡面了。
執行指令後會出現error警告，我猜測是時間轉換會得到跟前面一樣 NA 的結果，
導致後續程序無法進行。

試過在執行package的指令前先設置Sys.setlocale(LC_time)，一樣是會出現
Error警告。

由於我不會修改程式，所以我應該要如何做才能在不更動windows設定，讓
strptime正常運作。

------
目前我在使用R分析從記錄設備所獲得的紀錄資料，資料內容包含日期時間與紀錄。
得到的檔案為txt檔，tab分隔
日期的部分，年月日分別各用一個column(縱向)紀錄，時間總共是以一個column紀錄。

目前的問題是，當我用 ""strptime""要將日期轉成 YYYY-MM-DD HH:mm:SS
的時候，R沒辦法正確處理，所以得到的檔案內容會變成 ""NA"" 。上網查發現有人指出
是時區(時間格式?)的問題，按照指示設定 ""Sys.setlocale(LC_time)"" 就可以正常
處理了。

現在我要使用另一個package進行分析，卡在一個要把A資料組轉成B資料組的步驟。
package的範例只需要下單一步指令就會自己跑，但是我會得到錯誤訊息，指出
D程式找不到時間資料。我上網查發現GitHub裡的D程式碼裡面包含""strptime""步驟，我
懷疑是一樣時間的問題造成。

我試過在執行指令前先照之前設定 ""Sys.setlocale(LC_time)"" 無效。

請問我可以如何在不動到windows本身設定下，解決時間設定的問題，或是設置參數，
讓package能夠正常地處理時間資料?

謝謝大大

[程式範例]:


[環境敘述]:
windows7 sp1
R-3.5.2
Rstudio-1.1.463

[關鍵字]:
strptime

--","R_Language"
"108","M.1552476092.A.187","Jefflien",NA,"請問excel無法匯入rstudio 怎麼辦",2019-03-13 19:21:30,NA,NA,"大家好安安我是r studio的新手，我現在有個excel檔想要匯入但是沒辦法成功一直跳出如下畫面，求解各位好心人我該怎麼解決呢嗚嗚感恩各位十分感恩http://i.imgur.com/CW2bpGP.jpg-----
Sent from JPTT on my Samsung SM-G955F.

--","R_Language"
"109","M.1552440116.A.2BF","paranoia5201","問題","R載入檔案是否有最大限制",2019-03-13 09:21:54,NA,NA,"我有一個約28MB的檔案，每次載入R之後就會等很久，但是每次都在等待超久之後，就直接終止，關閉程式<U+FF61>

無論是用csv格式或txt都是如此<U+FF61>

想問：是否因為檔案太大，所以R無法負荷？

而這種或更大的檔案，是否就要用分散式資料庫才能存取？

還請指導，感謝<U+FF61>



-----
Sent from JPTT on my Sony G3226.

--","R_Language"
"110","M.1552383335.A.A06","frojet","問題","如何link特定個別條件而撈出整筆資料",2019-03-12 17:35:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有一組近12萬筆資料(A資料)，資料格式長的如下圖https://i.imgur.com/hE29QN1.png每個病歷號都會重複，每個病人住院，醫師會給予不同醫療處置(處置代碼)
醫師給n個醫療處置，就會重複n筆有相同病歷號、住院序號等數據

另外有一個住院序號之資料表(B資料)約500多筆，格式如下https://i.imgur.com/QqdXNzE.png我如何寫R程式，把B資料中有的住院序號，從A資料中海底撈月通通拉出來
切成另外一組小檔案存檔，進行後續分析?

--
當你指責別人時，不要忘記
  一指指向別人，四指是指向自己     ~frojet~

--","R_Language"
"111","M.1552379799.A.162","eco100","問題","centos 更新r的問題",2019-03-12 16:36:36,NA,NA,"我想要更新server的R

不管是用 sudo yum install R
或是     yum update R

都顯示

Loaded plugins: fastestmirror, langpacks
Loading mirror speeds from cached hostfile
 * base: free.nchc.org.tw
 * epel: mirror01.idc.hinet.net
 * extras: free.nchc.org.tw
 * ius: mirrors.tuna.tsinghua.edu.cn
 * updates: free.nchc.org.tw
Package R-3.5.2-2.el7.x86_64 already installed and latest version
Nothing to do

表示R已是最新版本？

但是當我執行R時

R version 2.15.2 (2012-10-26) -- ""Trick or Treat""
Copyright (C) 2012 The R Foundation for Statistical Computing
ISBN 3-900051-07-0
Platform: x86_64-unknown-linux-gnu (64-bit)

卻還是2.15.2的舊版本  不知道為何會這樣
有人可以幫忙解疑惑嗎？ 感謝！

--","R_Language"
"112","M.1552273399.A.2F7","HumuHumu","問題","Ubuntu 18.04無法開啟Rstudio Desktop",2019-03-11 11:03:16,NA,NA,"如題

我下載了Rstudio 1.2版本 安裝在Ubuntu 18.04的VM上

可是一打開Rstudio都會顯示這個錯誤https://imgur.com/wkCL6S3查了這個網頁https://goo.gl/2EeJmG他說需要在防火牆設定http和https之類的東西

但我實在不太熟linux，因此來請教版上先進們

感謝大家

--","R_Language"
"113","M.1552195327.A.448","fishg1216","問題","外部匯入csv檔利用ggplot2繪製stripchart",2019-03-10 13:21:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:將想要分析的數據資料存放在C:/Users/USER/Documents/test.csv(demo: https://reurl.cc/lg5j9)匯入R後不知道如何將檔案內容利用ggplot2繪製成stripplot如圖https://reurl.cc/D4ZME即使參考https://reurl.cc/OGkay 教學網站依然不會用[程式範例]:https://ideone.com/pz8SCS[環境敘述]:作業系統:win10R 版本: R x64 3.5.2[關鍵字]:選擇性，也許未來有用--","R_Language"
"114","M.1552118472.A.C75","woowolf","問題","關於R Markdown的使用問題(已解決)",2019-03-09 16:01:01,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。
        建議先到http://tinyurl.com/mnerchs搜尋本板舊文。
- 分享: 當你看到別人的心得時，請使用這個類別。
        版主鼓勵你幫版友歸納重點（選擇性）。
- 情報: 當你看到消息時，請使用這個類別。
        版主鼓勵你幫版友歸納重點（選擇性）。
- 心得: 當你自己想要分享經驗時，請使用這個類別。
- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。

[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(因學校課程需要學過一年)

[問題敘述]:
使用R Markdown遇到不明錯誤無法執行
小妹我使用的是R Studio，
使用R Markdown 前前後後下載了 rmarkdown、knitr、yaml等套件
但是在按knit執行的時候，出現了以下訊息

Error in yaml::yaml.load(..., eval.expr = TRUE) :
  unused argument (eval.expr = TRUE)
Calls: <Anonymous> ... parse_yaml_front_matter -> yaml_load -> <Anonymous>
停止執行

在網路上查過了，查不出個所以然...
拿著我的檔案去詢問過學校的教授，教授表示我的程式碼是沒有問題的，
只是他也不是很理解這個錯誤訊息，還要等他有空的時候研究一下。
想請問各位版上的大大，有沒有這方面的經驗可以指教，
是我R套件下載不齊還是有什麼我電腦設定問題


[環境敘述]：
R version 3.3.3
(解決已更新至 R version 3.5.3)
[關鍵字]:
R Markdown

--","R_Language"
"115","M.1551080779.A.C49","fagaha","情報","Fw: Open Data資料創新應用競賽",2019-02-25 15:46:17,NA,NA,"※ [本文轉錄自 ACMCLUB 看板 #1SSvC4vR ]作者: fagaha (exp) 看板: ACMCLUB
標題: [情報] Open Data資料創新應用競賽
時間: Mon Feb 25 15:02:24 2019

開學新目標∼賺獎金（誤）
↓↓↓↓↓↓↓↓↓↓↓【2019資料創新應用競賽】熱烈開跑政府有上萬筆開放資料，如何替民間服務加值？徵求青年創意！
競賽總獎金上百萬，歡迎個人、團隊、跨域新秀，一起來參賽∼
競賽網址：https://opendata-contest.tca.org.tw/purpose.aspx3/19(三)前完成線上報名、上傳構想草案、並郵寄參賽同意書，
3/22~4/12 海選
5/15(三)晉級團隊請帶著作品來demo，現場將頒發各主題的獎項
（上午將有產官學界評審，先為團隊作品做初步回饋，下午進行作品發表與頒獎！）(一) 競賽資格本競賽每隊人數為1-5人，須有1人為團隊代表人，
代表人必須具中華民國國籍並在中華民國設籍之國民。
代表人需負責與主辦單位聯繫、確認參賽文件與獎金領取等事宜。
團隊成員中若有未滿20歲者，需經由其法定代理人同意始得參賽。(二) 報名方式一律線上完成報名。
每一參賽隊伍至多可報名兩件不同產品，但兩件產品不得同組。如經查獲重複報名，主辦
單位有權協調該參賽團隊選擇其中一組別一作品參賽。(三) 參賽主題A.內政部統計處及地政司》社會經濟空間資料暨地政應用組
B.交通部中央氣象局》多元氣象服務應用組
C.桃園市政府資訊科技局》桃園智慧化生活交通組
D.經濟部資訊中心》經濟部開放資料應用組
E.經濟部工業局、財團法人資訊工業策進會、凱擘股份有限公司》數位家庭暨網路閱聽
行為分析組※競賽簡章http://bit.ly/2Sq2Nlg--","R_Language"
"116","M.1550720174.A.2A3","dorminia","問題","R套件C random number問題",2019-02-21 11:36:12,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
我有個套件要上傳，裡面有包Rcpp的部分，但被CRAN回傳說
不能有rand()。回傳訊息舉例如下：

  Found 'rand', possibly from 'rand' (C)
    Object: 'HMMfit.o'

想問一下要怎麼改 @@

[程式範例]:
inline double randomchisq (double df){
  std::default_random_engine generator(rand());
  std::chi_squared_distribution<double> distribution (df);
  return (distribution(generator));
}

[環境敘述]:
R version 3.5.2 (2018-12-20)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1


--
切記  任何事情都不能抹殺我們對唱歌的熱情

因為這是我們活著的原因

--","R_Language"
"117","M.1550653252.A.2D0","locka","問題","如何預設開啟rstudio的source panel",2019-02-20 17:00:49,NA,NA,"[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

各位版友好：

我發現之前更新 RStudio 後(目前版本 1.1.453)
每次開啟專案，source panel的區塊(編輯程式碼的地方)都會處於關閉的狀態(如下圖)https://i.imgur.com/J0PdL6m.jpg導致我每次都得要重新一個一個開啟檔案，十分的不方便

另，因為我將專案同步在 google 雲端硬碟上
有時候關閉程式的時候會有一些不知道是甚麼的檔案做更動(如下圖)https://i.imgur.com/SnKnQMx.jpg我總是選全部移除

不知道跟這個有沒有關係...


有人知道如何將 Source Panel 設定為上一次關閉前的狀態嗎?

感激不盡!



[關鍵字]:

RStudio, source panel

--","R_Language"
"118","M.1550505138.A.B17","dreler1","問題","使用R 下載 netcdf 檔案 google drive",2019-02-18 23:52:13,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
我想從google drive 下載 netcdf 的檔案https://drive.google.com/drive/folders/1rKRqEoo24sKcRRy5o67Su6SjNV1CV49d但是會出現
Content type 'text/html; charset=utf-8' length unknown
downloaded 3294 bytes

檔案沒有正常下載

我試過 其他檔案都正常 (txt/csv)
[程式範例]:

[環境敘述]:> sessionInfo()R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1


[關鍵字]:


--","R_Language"
"119","M.1550247249.A.7BE","filialpiety","問題","",2019-02-16 00:14:07,NA,NA,"-[問題類型]:
程式資訊




[軟體熟悉度]:
新手（只有五個月的經驗）

[問題敘述]:

想請教各位大大的策略
我有嘗試用FUNCTION搭配IF找誰的Beta<0和>=0
下一部就卡死了
麻煩給點靈感

我是有想到機器學習或深度學習
可是沒學過
網路爬文也不知道從何學起

求求各位!!!!
感謝



[程式策略]:

流程如下

###以下是成功的部份
第一步：整理出Y1, Y2, ….和X1, X1_reverse, X2, X2_reverse, ….

第二步：用迴圈結合線性回歸
For (Y in Y1, Y2, ….){
For ( X in X1, X2, …){
Lm(Y~X
}
}

第三步：找出lm(Y~X)的X1, X2, X3,….的BETA
####成功結束

####以下是瓶頸的部分
第一步：
如果lm(Y~X1)的X1的BETA<0，則用X1_reverse取代X1
如果lm(Y~X2)的X2的BETA<0，則用X1_reverse取代X2
如果lm(Y~X3)的X3的BETA<0，則用X1_reverse取代X3
…..
第二步：
最後跑出新的自變相
X1_new(X1或是X1_reverse),
X2_new(X2或是X2_reverse),
X3_new(X3或是X3_reverse),
…..
第三部：
再把X1_new+ X2_new+ X3_new+ …..加總成X_new_total
####目前卡死在以上這些

[關鍵字]:


條件式判斷

--","R_Language"
"120","M.1550200349.A.303","cd12631","分享","WGS84和台灣二分度帶TWD97轉換套件",2019-02-15 11:12:17,NA,NA,"各位前進大家好：

幾年前因為工作的關係寫了一個

幫助WGS84座標系和台灣二分度帶座標系TWD97互相轉換的套件

最近剛好重新整理一下，剛好分享給需要的人使用：

Tutorial:https://ycsung.studio/trans97/tutorialGithub 頁面：https://github.com/yichunsung/transtwd97另外也整理一下寫成前端js套件放在npm上：https://www.npmjs.com/package/trans97謝謝大家


--","R_Language"
"121","M.1549183041.A.40A","ycclpj","問題","請教二元變項隨機變數",2019-02-03 16:37:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
想用R建立一筆100個發生機率為0.2的二元變項隨機變數

[軟體熟悉度]:
完全新手

[問題敘述]:
如何建立此隨機變數
dbinom(x, 100, 0.2)  x的部分不知道要用什麼值 第一步就卡住了
感謝指點

[程式範例]:

程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[環境敘述]: 5.3.2

[關鍵字]:

--","R_Language"
"122","M.1548746320.A.8BC","bearching","問題","Rselenium網頁爬蟲迴圈問題",2019-01-29 15:18:37,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
===
02/11/2019補上更詳細的問題敘述供參考

我目前想做的事情是在一個資料庫上爬資料，

資料庫是用網頁呈現的，我的需求是複製搜尋資料庫之後的結果，

該搜尋結果一頁只會呈現35筆的資料，

所以如果搜尋結果總共20000筆的話我就會手動複製到天荒地老，

故打算用爬蟲的方式複製資料，再轉成excel可以讀取的檔案，之後再進行下一步分析

coding卡住的地方是我原本想要一筆資料就設定為一個變數，

35筆資料就有35個變數

locka與celestialgod的建議是，R的概念不是這樣子的(也幸好不是，後來想想這樣子抓

資料會很恐怖)

應該是設定一個list函數，再把資料儲存到這個函數裡面

我後來使用的是vector函數，然後把資料儲存進去，

再輸出為csv檔:

a <-vector()

#中間複製資料的code略過

at <- matrix(a)

write.csv(at, file =""abc.csv"")


======
我想要寫的內容是，宣告jump.page當作網頁的頁碼(從第2頁開始)
每頁有0~34行的內容，我用xpath定位這總共35行，
value是paste0(value =""//span[@id='tr_"",m,""']""))

然後整個網頁頁面是從第2頁到第10頁
一樣是用xpath定位網頁上面的頁碼，value是
paste0(value =""//a[text()='"",jump.page,""']""))

我想要問的事情是

1.take_m的這個宣告變數，我想要把m用迴圈的數字代換，但目前就是跳出""take_m""

這個變數而已，

這個目的想要的是把複製的文字記錄在同一個變數(或是vector?)裡面，

再print來看

2.我使用paste0()做這件事情，目前好像時好時壞，有時候會認不得我寫的東西，

有時候又可以，請問有沒有版友跟我發生一樣的事情呢? 感謝




[程式範例]:

jump.page <- 2
while(jump.page <= 10){
  for(m in 0:34) {
    take_m <- remDr$findElement(using = ""xpath"", paste0(value =
""//span[@id='tr_"",m,""']""))
    take_m$getElementText()
  }


web.link <- remDr$findElement(using = ""xpath"", paste0(value =
""//a[text()='"",jump.page,""']""))
  web.link$clickElement()

jump.page <- jump.page + 1
}

[關鍵字]:

爬蟲 Rselenium 迴圈

--","R_Language"
"123","M.1548348073.A.0C3","q5341kh","問題","用ggplot繪製地圖",2019-01-25 00:41:05,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我要用ggplot2和ggmap叫出地圖和標示出某個點之前相同的語法成功過但是最近想重做類似的東西卻一直跑出以下錯誤訊息Error in download.file(url, destfile = tmp, quiet = !messaging, mode = ""wb""):無法開啟 URL'http://maps.googleapis.com/maps/api/staticmap?center=24.03,120.5&zoom=11&size=640x640&scale=2&maptype=roadmap&language=zh-TW&sensor=false'此外: Warning message:In download.file(url, destfile = tmp, quiet = !messaging, mode = ""wb"") :cannot open URL[程式範例]:https://ideone.com/rOGLaJ[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17134)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.1


[關鍵字]:ggplot2ggmap--","R_Language"
"124","M.1548322557.A.A1E","bboybighead2","問題","Re: 數列問題",2019-01-24 17:35:54,NA,NA,"※ 引述《swilly0906 (史威利哥哥)》之銘言：: [問題類型]:: [軟體熟悉度]:: 新手: [問題敘述]:: 其實我覺得這應該很簡單的問題: 但我覺得我的方法感覺好複雜= =: 我的data有4萬筆(dim = 40,000*200): 因為有特殊需求: 接下來我會用trainset<-data[num1,]繼續做一些分析(後面沒問題): 問題程式碼在下面: 我的問題就是:有沒有更精簡的寫法寫出num1: 或者我應該問:除了loop以外,有沒有其他寫法??: [程式範例]:: num <- c(): num1 <- c(): for(i in 0:3999){:   num <- rep((1:8)+i*10):   num1 <- c(num1,num): }: num1: [關鍵字]:: #數列:: 選擇性，也許未來有用:

我想到的方法是先用矩陣格式處理完，再轉回向量。
如果我沒理解錯，
你迴圈的目標就是要把1:4000的數字，尾數9跟0去掉。
所以我先這樣做
mat <- matrix(c(1:40000),c(4000,10),byrow = T)[,c(1:8)]
#這行的作法是生成dim為4000、10的矩陣，然後數字從1:40000
#然後把最後兩列拿掉(相當於把所有尾數為9與0的數字拿掉)

vec <- as.vector(t(mat))
#最後再把處理完的矩陣轉置之後返回成向量(類型為integer，可自行轉為numeric)

這樣可以一次處理完所有數字，不必浪費額外的計算資源。
如果有人還有其他方法請賜教XD



--","R_Language"
"125","M.1548316570.A.867","AndrewShi","問題","迴圈問題",2019-01-24 15:56:08,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
    各位大大好，小弟我想要將台灣多年的降雨觀測資料去計算一些降雨指標，而我所用
的觀測資料將台灣範圍的經緯度切成60x81格，而我所要計算的降雨指標也需要一格一格
網格點去計算(無法所有網格點同時計算)，因此必須寫迴圈，但這個降雨指標在單一格網
格點上一年會算出一個值，所以我會再將多年的值求平均，以代表這個網格點長時間平均
的降雨指標值，之後再將每格網格點的值放入一個矩陣中，以利最後我能畫圖。下面是我所寫的程式碼，希望大大們能提供指點，謝謝，降雨觀測資料可從這裡取得
:http://0rz.tw/JI056。

[程式範例]:

library(ncdf4)
library(climdex.pcic)

#讀檔.變數
memory.limit(size=50000)
TCCIP_file <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TCCIP觀測資料
\\Daily\\pr_day_tccip5kmV2_1960-2015.nc""
TCCIP_data <- nc_open(TCCIP_file)
print(TCCIP_data)
obs_lon <- ncvar_get(TCCIP_data,""lon"")
obs_lat <- ncvar_get(TCCIP_data,""lat"")
obs_time <- ncvar_get(TCCIP_data,""time"")
obs_time <- seq(as.POSIXct(""1960-01-01""), as.POSIXct(""2015-12-31""), by=""day"")
obs_pr <- ncvar_get(TCCIP_data,""pr"")
#obs_pr <- ncvar_get(TCCIP_data,""pr"",start=c(25,25,1),count=c(1,1,20454))
dim(obs_pr)

#降雨指標之計算
#5.rnnmm(Annual count of days when PRCP>1mm)
obs_pr.dates <- as.PCICt(obs_time,cal=""365_day"",origin=""1960-01-01"")
rnnmm.mean <- matrix(NA_real_,nrow=60,ncol=81)
for(i in c(1:60)){
  for(j in c(1:81)){
    obs_pr <- ncvar_get(TCCIP_data,""pr"",start=c(i,j,1),count=c(1,1,20454))
#把要計算降雨指標的資料和時間放入
obs <- climdexInput.raw(tmax = NULL, tmin = NULL,prec=obs_pr,tmax.dates = NULL
,tmin.dates = NULL, prec.dates=obs_pr.dates,base.range=c(1960,2015),northern.h
emisphere=TRUE)
#計算資料的降雨指標值
rnnmm <- climdex.rnnmm(obs)
#將多年的降雨指標值取平均
rnnmm.mean <- mean(rnnmm)
  }
}
View(rnnmm.mean)
[環境敘述]:

[關鍵字]:
for迴圈   降雨指標   經緯度

--→ andrew43: 你說的我可以明白。不過你的code還是有些莫名其妙之處。01/25 08:33→ andrew43: 例如我先前說過的，以及有些物件被多次定義，還有些未定01/25 08:36→ andrew43: 義物件。01/25 08:36→ AndrewShi: andrew大是指obs和rnnmm被多次定義嗎?!可是我每算一次01/26 01:23","R_Language"
"126","M.1548262681.A.089","gbd37","問題","Rstudio server連接資料庫",2019-01-24 00:57:59,NA,NA,"[問題類型] : 經驗諮詢

[軟體熟悉度] : 使用者

[問題敘述] :

1. 目的:     利用rstudio server連接Oracle資料庫 (或其他資料庫)

2. 現狀描述: 因為平常使用的環境為windows用R使用套件RODBC，

             透過ODBC的方式去連接資料庫(Oracle MySql Hadoop)；

             現換了環境後，想架個server遇到了困難... 來這裡跪求解法 > <

3. 進度卡關: 現已灌好unixodbc後，才將RODBC的套件給安裝成功。但下一步...?

4. 問題:     a.請問灌好unixodbc後就可以連接oracle了嗎?
               還是說要灌oracle的其他驅動程式?
               例如:client或oracle odbc driver..?

             b.或者有其他推薦套件，讓我可去連接oracle mysql hadoop等
               (因為我看Rstudio官網是用套件DBI去連接，但我怎麼試都失敗...)

註: 因為我現在的問題出在不知道是ubuntu沒灌好oracle的設定
    還是Rstudio server哪裡沒灌好... 不知道從何下手
    還望版上高手指點我該從哪個地方著手處理，謝謝

[環境敘述]:

R version 3.2.3 (2015-12-10)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.5 LTS

[關鍵字]:rstudio server、連接資料庫

--","R_Language"
"127","M.1548078349.A.CA2","swilly0906","問題","數列問題",2019-01-21 21:45:46,NA,NA,"[問題類型]:

[軟體熟悉度]:
新手
[問題敘述]:

其實我覺得這應該很簡單的問題

但我覺得我的方法感覺好複雜= =

我的data有4萬筆(dim = 40,000*200)

因為有特殊需求

接下來我會用trainset<-data[num1,]繼續做一些分析(後面沒問題)

問題程式碼在下面

我的問題就是:有沒有更精簡的寫法寫出num1

或者我應該問:除了loop以外,有沒有其他寫法??

[程式範例]:

num <- c()
num1 <- c()
for(i in 0:3999){
  num <- rep((1:8)+i*10)
  num1 <- c(num1,num)
}
num1


[關鍵字]:

#數列選擇性，也許未來有用--","R_Language"
"128","M.1548057047.A.E90","Meowdechi","問題","程式碼的問題",2019-01-21 15:50:44,NA,NA,"想問一下我在跑方程式求解(solnl)的程式碼的時候
在前面設定objfun跟confun還有設定起始值的時候都沒發生Error
可是在最後求解的時候卻有Error
Error in if (iopp>0) {: missing value where TRUE/FALSE needed
想問一下這有甚麼解決方法嗎?

--","R_Language"
"129","M.1547431565.A.B59","Billrose","問題","",2019-01-14 10:05:59,NA,NA,"[問題類型]:
程式諮詢（XPath套件安裝顯示錯誤)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位版上高手好，目前自學R，
想跟著網路文章爬火車時刻表的資料，卻在XPath的安裝過程顯示not  available，而用bioclite安裝的原因是，直接用install安裝也無法，謝謝

[程式範例]:
source(""http://bioconductor.org/biocLite.R"")biocLite(""XPath"")


[環境敘述]:
R version 3.5.1 (2018-07-02) -- ""Feather Spray""
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

Warning message:
package ‘XPath’ is not available (for R version 3.5.1)


[關鍵字]:


XPath，套件安裝


-----
Sent from JPTT on my HTC_D10u.

--","R_Language"
"130","M.1547125743.A.E75","jgj12321","問題","Spark平台",2019-01-10 21:08:59,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:請問整理百萬筆的資料用Spark有比用原本Rstudio還快嗎?看很多中文網頁都說Spark可以加快速度，有沒有人實作過能分享經驗的><用筆電跑資料好慢/_\--","R_Language"
"131","M.1547038332.A.C13","daybreakya","問題","計算天數(非日期差)",2019-01-09 20:52:09,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要從一整欄的日期中，得到總共有幾天

如下列程式範例，可以知道共有9天

使用想到的關鍵字搜尋，都是用最大-最小，來得到日期差

但是因為不是每天都會有紀錄，所以不確定該怎麼做?

有想到一個方法，先將年份及日期，另外抓出來

變成
         DateTime
   1 2018-12-04
   2 2018-12-04
   3 2018-12-13

接下來過濾掉重複的，這樣剩下的資料數量，就是我想要的天數

但是不知道是不是有其他更好的方法?

[程式範例]:
          DateTime
   1 2018-12-04 16:05:54
   2 2018-12-04 23:21:46
   3 2018-12-13 17:45:28
   4 2019-01-04 06:11:18
        -------
(假設中間5~9筆 都沒有重複的日期)
        -------
   10 2019-01-09 12:57:11


--","R_Language"
"132","M.1547005533.A.353","rockken","問題","迴圈存圖  quantmod ",2019-01-09 11:45:31,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:[問題類型]:結果輸出檔案自動存取[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)

[問題敘述]:

我享用 R 跑股價走勢圖，附加一些內建的指標數據

如下圖https://imgur.com/a/S5g2qEt單跑一張時候程式沒有問題，可以存取

可是當我用迴圈在執行時

往往 MACD 會不見，不知道有人有遇到類似問題嗎?https://imgur.com/a/KnpAeVh[程式範例]:

 SS=c(1101,1102)

 for(i in 1:dd)
  {
  A=A=getSymbols(paste(SS[dd],"".TW"",sep=""""), auto.assign =F)
  chartSeries(A,theme=""white"",TA=c(addBBands()),name=paste(SS[dd]))
  addRSI()
  addMACD()
  dev.copy(file=paste(""C:\\Users\\USER\\Desktop\\股市圖
\\"",SS[dd],"".jpeg"",sep=""""),device=png, bg=""white"")
  dev.off()
  }

--","R_Language"
"133","M.1546966187.A.375","dreler1","問題","RMySQL in a function不正常",2019-01-09 00:49:44,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:

我使用RMySQL 寫了一個迴圈

其中已經用了

      all_cons <- dbListConnections(MySQL())
      for (con in all_cons)
        dbDisconnect(con)

去關閉connection

如果我不做成function跑起來沒問題

我做成function 之後

Error in .local(dbObj, ...) :
  internal error in RS_DBI_getConnection: corrupt connection handle
In addition: There were 50 or more warnings (use warnings() to see the first
50)

我嘗試把找出錯誤發生的地點 (ERRORfile)

但是他整個loop其實跑完了

write(""finished all data"",ERRORfile,append = TRUE)

這條都跑完了

詳情請見http://0rz.tw/ooC9n[環境敘述]:> sessionInfo()R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United
States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] MOVESdata_0.0.0.9000 tidyr_0.8.2          stringi_1.2.4
readr_1.1.1          readxl_1.1.0
 [6] RMySQL_0.10.15       DBI_1.0.0            roxygen2_6.1.1
usethis_1.4.0        devtools_2.0.1

loaded via a namespace (and not attached):
 [1] Rcpp_1.0.0        pillar_1.3.0      compiler_3.4.3    cellranger_1.1.0
prettyunits_1.0.2 base64enc_0.1-3
 [7] remotes_2.0.2     tools_3.4.3       testthat_2.0.1    digest_0.6.18
pkgbuild_1.0.2    pkgload_1.0.2
[13] tibble_1.4.2      memoise_1.1.0     pkgconfig_2.0.2   rlang_0.3.0.1
cli_1.0.1         rstudioapi_0.8
[19] commonmark_1.7    yaml_2.2.0        withr_2.1.2       stringr_1.3.1
xml2_1.2.0        hms_0.4.2
[25] desc_1.2.0        fs_1.2.6          rprojroot_1.3-2   glue_1.3.0
R6_2.3.0          processx_3.2.1
[31] sessioninfo_1.1.1 callr_3.0.0       purrr_0.2.5       magrittr_1.5
backports_1.1.3   ps_1.2.1
[37] assertthat_0.2.0  crayon_1.3.4

謝謝大家

--","R_Language"
"134","M.1546574944.A.BCA","wheado","問題","定義運算符號函數問題",2019-01-04 12:09:01,NA,NA,"[問題類型]: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]: 入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前我了解的是定義加法的函數是

`+` <- function(x, y) ...

這麼定義在R中就可以實現 x+y := `+`(x,y)

但目前遇到第一個問題是R如何定義!這種邏輯運算函數

當!TRUE 會出現 FALSE

但是`!`前面並沒有其他變數

!TRUE = `!`(??,y)



第二個問題是我想要根據第一個問題定義出一個類似的函數

不同的是後面沒有其他變數

也就是例如一個符號 `.print`

當我使用 print(iris) = iris.print

但是iris是可以換成任意的 data

請問這是有辦法做到的嗎?



[環境敘述]: Win10

[關鍵字]:
Primitive function, operation function in R選擇性，也許未來有用想看資料但不想回頭寫print()這個函數

--","R_Language"
"135","M.1546541105.A.99C","gujason9511","問題","for 迴圈問題",2019-01-04 02:45:03,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
要跑CAPM的三因子模型
總共有25家公司 一家有715筆日資料https://i.imgur.com/5WhmSsA.jpg[程式範例]:
lm(formula = BBT ~ Mkt + SMB + HML + MOM, data = Question_1)
BBT為公司名字
雖然這個方法也是行得通
但由於要跑25次 所以想上來版上請教高手的提點

--","R_Language"
"136","M.1546422684.A.D09","il0306","問題","農曆陽曆轉換",2019-01-02 17:51:22,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 心得: 當你自己想要分享經驗時，請使用這個類別。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。[問題類型]:
農曆陽曆轉換請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:
目標 Function(‘2019-01-02’) = ’11-27‘
以爬過文章，也在google找過許多文章。
目前看起來最接近的packages是lunar和suncalc。但是不清楚如何使用。

[程式範例]:請把以下不需要的部份刪除[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:
農曆，陰曆選擇性，也許未來有用--","R_Language"
"137","M.1545998390.A.870","hanglong","問題","Re: ggsave cairo_pdf family 與儲存路徑的問題",2018-12-28 19:59:46,NA,NA,"※ 引述《hanglong (小煥)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 各位R版上的先進大家好 近期我在使用程式上 遇到一些比較奇怪的問題: 原先使用程式上 都沒有任何的異常 但近期因為電腦有些問題 需要重灌: 我就把自己寫的程式儲存起來 想說重灌後 再重新下載R與R Studio: 灌好R後再重新下載需要的Package 但特別的是 原本可以跑的程式: 就出現了Error 導致程式無法執行 以下為我的程式碼: [程式範例]:: library(gplots): library(ggplot2): library(SixSigma): library(lubridate): library(Cairo): coat <- read.csv(""C:\\Users\\rex\\Desktop\\coating.csv"")*[m: #其中 coat$作業日 是日期的形式，例如：2018/12/27: #coat$average.是浮點數: #我想用這兩個畫圖，X座標為日期，Y座標為數值: ggsave(plot = ggplot(data = coat) + geom_point(aes(strptime(作業日,: ""%Y/%m/%d""), average.1)), file = ""X:\\趨勢圖.pdf"", width = 15, height = 7,: device = cairo_pdf, family = ""Song""): 但程式出現以下錯誤：: Error in dev(filename = filename, width = dim[1], height = dim[2], ...) ::   unable to start device 'cairo_pdf': In addition: Warning message:: In dev(filename = filename, width = dim[1], height = dim[2], ...) ::   cairo error 'out of memory': 在還無法解決此問題的情形下 我想說先畫圖 之後在解決儲存的問題: 因此將內容擷取出來：: ggplot(data = coat) + geom_point(aes(strptime(作業日, ""%Y/%m/%d""), average.1)): 此時出現另外的錯誤：: Error: Column `x` is a date/time and must be stored as POSIXct, not POSIXlt: 而以上的兩個問題 在重灌之前是都不會出現: 程式是可以順利執行的 但是不曉得為什麼會出現這些錯誤: 原本想說是不是有其他的Package我沒有使用到 但是程式並沒有出現看不懂函數的訊息: 希望各位先進可以指點迷津 謝謝:: [環境敘述]::: R version 3.5.2 (2018-12-20): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): Matrix products: default: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] Cairo_1.5-9     lubridate_1.7.4 SixSigma_0.9-52 ggplot2_3.1.0: gplots_3.0.1: loaded via a namespace (and not attached)::  [1] Rcpp_1.0.0         magrittr_1.5       MASS_7.3-51.1      munsell_0.5.0:  [5] xtable_1.8-3       colorspace_1.3-2   lattice_0.20-38    R6_2.3.0:  [9] rlang_0.3.0.1      stringr_1.3.1      plyr_1.8.4: caTools_1.17.1.1: [13] tools_3.5.2        qcc_2.7            grid_3.5.2         gtable_0.2.0: [17] KernSmooth_2.23-15 withr_2.1.2        gtools_3.8.1       digest_0.6.18: [21] lazyeval_0.2.1     tibble_1.4.2       crayon_1.3.4       bitops_1.0-6: [25] testthat_2.0.1     labeling_0.3       stringi_1.2.4      gdata_2.18.0: [29] compiler_3.5.2     pillar_1.3.1       scales_1.0.0:: [關鍵字]::: strptime ggsave ggplot2感謝版上的大神幫忙解決了第一個問題 的確用as.POSIXct可以解決此問題

比較奇怪的是重灌之前不需要此程式碼也可以順利執行 至少已經解決了 謝謝


另外的問題 在今天的嘗試 有一點了解問題的地方 程式碼：

ggsave(plot = ggplot(data = coat) + geom_point(aes(strptime(作業日,
""%Y/%m/%d""), average.1)), file = ""X:\\趨勢圖.pdf"", width = 15, height = 7,
device = cairo_pdf, family = ""Song"")

我有將路徑改成file = ""X:\\Chart.pdf"" 就可以順利執行 且圖片中的中文可以正常顯示

(因為要印出中文 當初才用device = cairo_pdf與family = ""Song""的指令

所以我認為可能跟程式無法看懂輸出位置的中文


但我另外也有嘗試將device = cairo_pdf, family = ""Song""都刪掉

且路徑保持中文 結果也可以執行 但圖片內的中文就無法印出

(當初就是遇到中文無法印出 才用這些指令 所以將其刪除 不意外會有這結果)


現在看起來 好像是指令與輸出路徑(中文)會有衝突

只是這個問題在重灌前也是不會發生的


希望藉由這些資訊 版上的先輩們 可以給些修正的建議 謝謝大家

--肝不好▁▁●◤肝若好人生是黑白的▏◤考卷是空白的▏◤、 ﹐●      ●b囧▎  ●> ●◤▌ ﹍﹍０▊囧＞幹...▲      ■┘■▎  ■█◤▌ㄏ▋     ︶■〈﹀     ∥▁▁∥▎ ﹀〉◤▋▊      〈\                   

--","R_Language"
"138","M.1545920642.A.0A8","hanglong","問題","strptime 與 ggplot 的問題",2018-12-27 22:23:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位R版上的先進大家好 近期我在使用程式上 遇到一些比較奇怪的問題

原先使用程式上 都沒有任何的異常 但近期因為電腦有些問題 需要重灌

我就把自己寫的程式儲存起來 想說重灌後 再重新下載R與R Studio

灌好R後再重新下載需要的Package 但特別的是 原本可以跑的程式

就出現了Error 導致程式無法執行 以下為我的程式碼

[程式範例]:

library(gplots)
library(ggplot2)
library(SixSigma)
library(lubridate)
library(Cairo)

coat <- read.csv(""C:\\Users\\rex\\Desktop\\coating.csv"")*[m
#其中 coat$作業日 是日期的形式，例如：2018/12/27
#coat$average.是浮點數
#我想用這兩個畫圖，X座標為日期，Y座標為數值

ggsave(plot = ggplot(data = coat) + geom_point(aes(strptime(作業日,
""%Y/%m/%d""), average.1)), file = ""X:\\趨勢圖.pdf"", width = 15, height = 7,
device = cairo_pdf, family = ""Song"")

但程式出現以下錯誤：
Error in dev(filename = filename, width = dim[1], height = dim[2], ...) :
  unable to start device 'cairo_pdf'
In addition: Warning message:
In dev(filename = filename, width = dim[1], height = dim[2], ...) :
  cairo error 'out of memory'

在還無法解決此問題的情形下 我想說先畫圖 之後在解決儲存的問題

因此將內容擷取出來：

ggplot(data = coat) + geom_point(aes(strptime(作業日, ""%Y/%m/%d""), average.1))

此時出現另外的錯誤：
Error: Column `x` is a date/time and must be stored as POSIXct, not POSIXlt

而以上的兩個問題 在重灌之前是都不會出現

程式是可以順利執行的 但是不曉得為什麼會出現這些錯誤

原本想說是不是有其他的Package我沒有使用到 但是程式並沒有出現看不懂函數的訊息

希望各位先進可以指點迷津 謝謝


[環境敘述]:R version 3.5.2 (2018-12-20)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] Cairo_1.5-9     lubridate_1.7.4 SixSigma_0.9-52 ggplot2_3.1.0gplots_3.0.1loaded via a namespace (and not attached):[1] Rcpp_1.0.0         magrittr_1.5       MASS_7.3-51.1      munsell_0.5.0[5] xtable_1.8-3       colorspace_1.3-2   lattice_0.20-38    R6_2.3.0[9] rlang_0.3.0.1      stringr_1.3.1      plyr_1.8.4caTools_1.17.1.1[13] tools_3.5.2        qcc_2.7            grid_3.5.2         gtable_0.2.0[17] KernSmooth_2.23-15 withr_2.1.2        gtools_3.8.1       digest_0.6.18[21] lazyeval_0.2.1     tibble_1.4.2       crayon_1.3.4       bitops_1.0-6[25] testthat_2.0.1     labeling_0.3       stringi_1.2.4      gdata_2.18.0[29] compiler_3.5.2     pillar_1.3.1       scales_1.0.0[關鍵字]:strptime ggsave ggplot2--
如果將字母A到Z分別編上1到26的分數（A=1,B=2...,Z=26）
你的知識（KNOWLEDGE）得到96分（11+14+15+23+12+5+4+7+5=96）
你的努力（HARDWORK）也只得到98分（8+1+18+4+23+15+18+11=98）
你的態度（ATTITUDE）才是左右你生命的全部（1+20+20+9+20+21+4+5=100）

--","R_Language"
"139","M.1545792465.A.668","assxass","問題","R<>Arcgis Rbridge 套件的問題",2018-12-26 10:47:40,NA,NA,"抱歉 我實在不知道這問題要PO在哪裡

這是個寫給Arcgis上的套件
可以在地理資訊系統上直接執行R 寫出的程式套疊成圖

我遇到了跟 這位類似的問題https://github.com/R-ArcGIS/r-bridge/issues/21arc.open 和 arc.select 讀檔時就遇到了問題


Error in as.matrix.default : 'data' must be of a vector type, was 'NULL'
Failed to execute (Script).

不知道有沒有高手 有玩過 這個套件

d<- arc.open(path ='D:/test/Export_Output2.shp')
data<- arc.select(d)

這是我自己寫的 沒有 select 這行 就是上面的error
有這行 就是讀不到 d

這邊卡關很久~~ 求解 ~~ 謝謝

--","R_Language"
"140","M.1545574047.A.946","volunter","問題","F test",2018-12-23 22:07:24,NA,NA,"各位前輩好

我的應變數是－有無法務經驗(01變數)
自變數為時間點，設成多個01變數，也就是說會互斥的
（一年至三個月、三個月內、後三個月、後三個月至一年、非於一年內）
並以F檢定來測，看是否因法務經驗而使反應時間有變
但無法跑出結果，請問因為檢定方法無法用R跑出
還是在變數設計或哪個環節出了問題
再請版上高手解惑 謝謝!


--","R_Language"
"141","M.1545365693.A.B6C","chocoluv","問題","S4類型物件無法子集合",2018-12-21 12:14:50,NA,NA,"[問題類型]
在使用C50套件時發生問題

[軟體熟悉度]
學了R約半年多，會基本的操作

[問題敘述]
在安裝打開完C50後嘗試使用C5.0()函數，但console區域會一直回傳 object of type 's4'
 is not subsettable。不知該怎麼解決此問題比較好。

[程式範例]
install.packages(""C50"")
library(C50)
test=C5.0(x[,1:10])

→Error in x[, 1:10]: object of type 's4' is not subsettable

[環境敘述]
R 3.5.0
R studio 1.1.423
Windows 10

--","R_Language"
"142","M.1545189293.A.6C2","resentis","問題","函數中使用left_join出錯",2018-12-19 11:14:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想寫一個function來幫我批次合併表格，直接執行沒有問題
但是包成function來測試就出錯
（然後我不知道問題再哪...）
function中有使用dplyr以及tidyr

[程式範例]:

DateCollection <- function(CountTable, Date){
  dataTable <- CountTable[CountTable[[""Date""]]==Date,]
  groupTable.temp <- gather(GroupTable, Ref_Name, Mut_Name, key = Type, value
= Seq_Name)
  time.vector <- unique(dataTable[[""Time""]])
  temp.table <- list()
  for(i in time.vector){
    dataTable.time <- dataTable[dataTable[[""Time""]]==i, c(3:4)]
    colnames(dataTable.time) <- c(""Seq_Name"", ""Count"")
    groupTable.temp <-
      dplyr::left_join(groupTable.temp, dataTable.time, by = c(""Seq_Name"" =
""Seq_Name"")) %>%
      dplyr::select(Group_No, Type, Count) %>%
      tidyr::spread(Type, Count)
    temp.table[[i]] <- groupTable.temp
  }
  return(temp.table)
}
}

針對合併表格的部份(dplyr::left_join)直接執行做測試是沒有問題，但是包成function
來測試以後就會有錯誤訊息

錯誤: `by` can't contain join column `Seq_Name` which is missing from LHS

請教各位，我弄錯、還是沒弄清楚什麼...謝謝


[環境敘述]:

R version 3.5.1 (2018-07-02)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Linux Mint 19

--","R_Language"
"143","M.1545122212.A.DF2","leawei","問題","R studio console無法顯示結果",2018-12-18 16:36:50,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:網路爬文發現有很多的案例，但卻一直沒找到好的解答在console輸入> 1+1應該會印出[1] 2但他完成計算後什麼都沒有印出來> 1+1>

直接跳出下一行的輸入

查了一下好像是r studio的問題
有請版上各位大神了QQ

[程式範例]:

[環境敘述]:

R 3.5.1
R studio 1.1.463
OS window10


[關鍵字]:



-----
Sent from JPTT on my Asus ASUS_Z01KD.

--","R_Language"
"144","M.1545111025.A.532","bboybighead2","問題","Re: Rmysql匯入中文會亂碼",2018-12-18 13:30:22,NA,NA,"今天嘗試將MySQL資料匯入R的時候

突然發現中文字會出現亂碼

上網搜尋了一下解決方法

剛好看到這篇 後來也找到方式解決了

記錄一篇在這裡，希望對遇到相同問題的人有幫助

##首先在MySQL中先確保編碼都是utf-8

set character_set_client='utf8';
set character_set_connection='utf8';
set character_set_results='utf8';
set character_set_server='utf8';set
collation_connection='utf8_unicode_ci';
set collation_server='utf8_unicode_ci';
show variables like 'character%';

設定好了之後到R的介面

##將資料庫連結至R
con <- DBI::dbConnect(MySQL(), dbname = ""your_data"",
            username = ""your_username"", password =""your_password""
           ,host = ""localhost"")

#這一步很重要，要把編碼改成""big5""

dbSendQuery(con, ""SET NAMES big5"");

##為什麼重要呢，因為我一開始看的教學都是中國網站的教學，
  但是他們使用的編碼是GBK，所以我嘗試很久都還是亂碼，
  後來才醒悟要改成big5!!

#接著將需要的檔案吃入R裡
#使用dbi
query<-DBI::dbSendQuery(con, ""select * from your_table"");

#使用dplyr(remote source)
data_db <- tbl(con, ""your_table"")

##結束
##reference:https://goo.gl/41pm4U--","R_Language"
"145","M.1544886070.A.0CF","Retangle","問題","plot時間關係圖的時間軸間距",2018-12-15 23:01:05,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

我在畫一筆資料和時間的關係，但是資料的時間尺度是5天

所以橫座標的間隔被自動換成星期表示 (時間軸使用lubridate包產生)

想請教如何才能讓他用日期表示

已經試過 yaxt=""n"" 然後用 axis()重設

但時間軸會變成lubridate轉換時間的numeric 如1542528000、1542614400


[程式範例]:

library(readxl)
library(lubridate)
library(plotrix)
#data = read_excel(""C:/Users/User/Desktop/observe.xlsx"",na=""NA"") 原本的資料
data2=list(51,43,39,16,18,22,21,33,43,17,25,29,29,31,32) #其中一項資料

x2=seq(from=ymd_hm(""2018-11-16-08-00""),to=ymd_hm(""2018-11-20-20-00""),by=6*60*60)

x3=c(x2[1],x2[2],x2[3],x2[5],x2[6],x2[7],x2[9],x2[10],x2[11],x2[13],x2[14],x2[15],x2[17],x2[18],x2[19])
plot(x3,data2,type=""b"",xlab=""時間:11/16~11/20每日0800、1400、2000"",
     ylab=""pm10 (μg/m^3)"",yaxs=""i"",yaxt=""n"",ylim=c(15,55),col=""blue"")
axis(2,at=seq(15,55,5))


[環境敘述]:

R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Japanese_Japan.932  LC_CTYPE=Japanese_Japan.932
 LC_MONETARY=Japanese_Japan.932 LC_NUMERIC=C
[5] LC_TIME=Japanese_Japan.932

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lubridate_1.7.4 readxl_1.1.0

loaded via a namespace (and not attached):
 [1] compiler_3.5.1   magrittr_1.5     tools_3.5.1      pillar_1.3.0
tibble_1.4.2     crayon_1.3.4     Rcpp_1.0.0
 [8] cellranger_1.1.0 stringi_1.1.7    stringr_1.3.1    rlang_0.2.2

[關鍵字]:

lubridate　plot  時間軸間隔  星期改回日期

--","R_Language"
"146","M.1544788736.A.3C0","jerkoffme","問題","迴圈控制問題",2018-12-14 19:58:53,NA,NA,"[問題類型]:

最近要交換禮物，想說用R寫一個配對的程式

[軟體熟悉度]:

使用了R半年，會基礎ggplot2和tidyverse

[問題敘述]:

假設9個人，要交換禮物，條件是自己不能送給自己。
我分別把送禮人和被送禮人，寫成兩個c()的向量
，最後能tibble成一個表格

[程式範例]:

library(tidyverse)
library(dplyr)
library(mailR)
x <- sample(c(""A"", ""B"", ""C"", ""D"", ""E"", ""F"", ""G"", ""H"", ""I""), 9)
y <- sample(c(""A"", ""B"", ""C"", ""D"", ""E"", ""F"", ""G"", ""H"", ""I""), 9)

for (i in 1:9){
  if(x[i] != y[i]){
    z <- cbind(x, y)
  }
}
z

[環境敘述]:
window 10，最新版R studio

     x   y
 [1,] ""F"" ""F""
 [2,] ""C"" ""I""
 [3,] ""H"" ""C""
 [4,] ""I"" ""D""
 [5,] ""D"" ""A""
 [6,] ""B"" ""B""
 [7,] ""A"" ""E""
 [8,] ""G"" ""G""
 [9,] ""E"" ""H""


輸出結果就還是會重複，我認為問題應該是for迴圈無法用多個邏輯判斷式，
應該是他判斷x[1] != y[1]就輸出了，想了一個下午還是解不了阿，請大神救一下


--","R_Language"
"147","M.1544673627.A.D09","yaowei2010","問題","以所有的運算子分離公式內的變數",2018-12-13 12:00:22,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。
        建議先到http://tinyurl.com/mnerchs搜尋本板舊文。

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

如題：

如果給任合一個多重運算子複雜的公式，我想要把所有的變數名稱(不要數字)變成一個list，透過strsplit的話


[程式範例]:

test <- ""x + b + (c2 -(d3 + wo22^0.2/123*3))""

輸出：

x b c2 d3 wo22

因為strsplit用regular expression不太會用那麼複雜的寫法

想在這裡問一下怎麼拆掉這些運算符號



--","R_Language"
"148","M.1544646367.A.533","AmigoSafin","問題","用gsub去除某column的comma但未改變整體",2018-12-13 04:26:03,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我想用gsub把data frame ""wide_population.2""中的""country name""裡面的

comma以及comma後的text都刪除

我使用以下code

當我run完前兩行

console裡面的country name都是乾淨的 我需要的

但是我回去view原來的data frame

登愣 都沒有改

想請教各位高手我是否欠缺了什麼步驟

謝謝大家！！


[程式範例]:
z <-wide_population.2$`Country Name`

gsub("",.*"", """", z)

View(wide_population.2)


[環境敘述]:
R studio

[關鍵字]:

gsub選擇性，也許未來有用--

--","R_Language"
"149","M.1544533545.A.FC3","asdfrtg","問題","如何使用shiny textInput()",2018-12-11 21:05:36,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

想嘗試將ui端輸入的文字帶入函式中，按下執行鈕後出現錯誤
Warning: Error in [: incorrect number of dimensions
想請問出現此錯誤是因為server 與ui沒有對應到，或是帶入函式方法錯誤

[程式範例]:
shinyServer(
  function(input, output,session) {
    library(rsconnect)
    library(tseries)
    library(quantmod)
    library(forecast)
    library(car)
    library(haven)


    observeEvent(
    input$goButton,{
     index2<-as.character( input$index1)
    getSymbols(c(index2),from = ""1900-01-05"")
    index.open<-data.frame(as.numeric(c(index2)[,1]))
    index.open.year<-data.frame(tail(index.open,365))
    colnames(index1.open.year)=""OP.value""


    output$year.plot<-renderPlot(plot(index.open.year,main = ""index plot""))
    output$value<-renderTable(data.frame(tail(index.open.year,5)))

    })})


library(shiny)
library(rsconnect)
shinyUI(fluidPage(

  titlePanel(""index plot and table""),
  mainPanel(
    textInput( ""index1"",label = ""index"") ,
    actionButton(""goButton"", ""Go!""),

    plotOutput(""year.plot""),
    tableOutput(""value"")
  )))
[環境敘述]:
 R 3.5 shiny
[關鍵字]:

shiny ui 輸入

--","R_Language"
"150","M.1544508130.A.1DC","engfen","問題","請教如何將下列的資料塞入上一列?",2018-12-11 14:02:08,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手

[問題敘述]:

我有近3萬筆資料要分析，我拿到原始數據是純文字檔，
這個純文字檔，用固定行距來區隔資料，
但如果處置代碼過長，會自動換行到下一行

如下圖所示(圖例是已用excel先切開欄位)https://i.imgur.com/XRn6MwQ.jpg請問 我如何撰寫程式，將自動換行的處置代碼，
加回至上一行的處置代碼末端
並同時刪除自動換行的那一行資料?

--","R_Language"
"151","M.1544418029.A.321","Chihuah","問題","計算英文字串中 雙字元的出現次數",2018-12-10 13:00:22,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

我想要統計一個英文字串中，雙字母的出現次數，例如:
<input>
aabaaa
abbacazz


input    aa  ab  ac  ad  ...  az  ba  bb  bc ... ca  cb  cc ... zz
aabaaa    3   1   0   0        0   1   0   0      0   0   0      0
abbacazz  0   1   1   0        1   1   1   0      1   0   0      1

輸入資料是一個csv檔，內含一個欄位<input>，每一筆(行)內容即為一個英文字串
輸出資料是新增aa~zz共676個欄位，
  每一行的英文字串後，加入雙字母的出現次數，未出現的為0次

下述程式碼是我目前想到的，但是雙迴圈執行mutate(程式第4~10行)，過程速度很慢
想請教對於雙字元的統計 是否有更好、執行效率更高的寫法?

[程式範例]:

以下圖片為程式碼與註解https://imgur.com/utlNEB7以下為程式碼原文
file_csv<- read.csv(""test.csv"",header=TRUE,sep="","")
n <- 1:nrow(file_csv)
patt <- NULL
for(i in 0:25){
  for(j in 0:25){
    tmp_2char <- paste(intToChar(97+i),intToChar(97+j),sep="""")
    patt <- c(patt,tmp_2char)
    file_csv<-mutate(file_csv,!!tmp_2char:=0)
  }
}
m <- length(patt)
for(x in n){
  tmp_input <- tolower(as.character(file_csv$input[x]))
  file_csv[x,2:(m+1)] <- str_count(tmp_input,patt)
}

[環境敘述]:
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:mutate str_count 雙字元出現次數--
「那女怪，活潑潑，春意無邊；這長老，死丁丁，禪機有在。一個
  似軟玉溫香，一個如死灰槁木。」
                                       《西遊記．第五五回》

--","R_Language"
"152","M.1544411189.A.F5D","hhuscout","問題","RSelenium 爬蟲迴圈問題",2018-12-10 11:06:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要各個節點分別存取，因此利用迴圈的方式，但會出錯，不知問題點在哪。

[程式範例]:
title = web.elem$findChildElement(using = ""css selector"", value =
""th:nth-child(i)"")

上面這行可以順利執行。
但寫成迴圈如下，就會出錯。
for(i in 2:25)
{
  title = web.elem$findChildElement(using = ""css selector"", value =
""th:nth-child(i)"")
  result[1,i] = title$getElementText()
}
會出現錯誤如下：
Selenium message:invalid selector: An invalid or illegal selector was
specified


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"153","M.1544324985.A.D37","AmigoSafin","問題","R subset問題",2018-12-09 11:09:42,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

想問我想要將一個氣象資料根據年份畫曲線圖
資料理面只有給season(1998-1999)
所以我先用substr把前四位數挑出 新增加一個year
然後我要選取月份是Nov.到Mar.的
並與year做plot
但就出現了argument ""subset"" is missing這樣的錯誤

我的資料長得如下：https://reurl.cc/12an9我的code為：

#read in the data

R.snow <- read.csv(paste0(dirdata,""RochesterSnowfall.csv""),header = FALSE,
na.strings = ""T"")
View(R.snow)
R.snow[is.na(R.snow)] <-0

# clean it

R.snow.c <- R.snow[5:122,]
View(R.snow.c)

# add names

names(R.snow.c) <-c(""Season"", ""Sep"", ""Oct"", ""Nov"", ""Dec"", ""Jan"", ""Feb"",
""Mar"", ""Apr"", ""May"", ""Total"")
View(R.snow.c)

# create a copy

snow <-R.snow.c
str(snow)

# create year

snow$year <- as.numeric(substr(snow$Season,1,4))
View(year)

# create plots from 1950 - 2001

snow1950 <- subset(snow, year>=1950)
View(snow1950)
snow1950 <-snow1950[,-12]

snow1950 <- as.numeric(snow1950) # error generated

snow1950  <- as.numeric(unlist(snow1950))

range(snow1950) # 2-2001

ylimis <- range(subset(snow1950,select=Nov:Mar)) # argument ""subset"" is
#missing


winds(1,1,6,aryx=.7,title=TRUE)

plot(snow1950$Year,snow1950$Nov,type=""n"",ylim=ylimis,ylab=""Snowfall
(in)"",xlab=""Year"") # this is what I want to do


還請大家不吝指導了

感謝∼∼

[關鍵字
]:


R subset plot



--

--","R_Language"
"154","M.1543975508.A.E70","HumuHumu","問題","Re: Publish R Shiny app失敗",2018-12-05 10:05:06,NA,NA,"※ 引述《Lynnhan (林翰)》之銘言：: [問題類型]:: RShiny的publish問題: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: runAPP 的時候都非常順利: 已看過非常多youtube教學 但不知道卡在哪裡: 以至於無法成功publish: 有想過是不是要連csv檔一起publish 但後來還是得到結果: Error: An error has occurred. Check your logs or contact the app author for: clarification.: https://imgur.com/a/5xnS0wt: [程式範例]:: Ui -> https://pastebin.com/WwK3rJ5V: Server -> https://pastebin.com/s4X24tvN: 其他資料檔 -> https://pastebin.com/tFt66j0x: [環境敘述]:: [關鍵字]:: R Shiny Publish: 如果順利解決 會給幫忙的大大300P以表感謝!: 麻煩了..你把你的MCAS17.csv和MCAS18.csv兩個csv檔跟妳的ui.R和server.R放在相同路徑下

然後把其他資料的那份Rscript中的

setwd(""D:"") 刪掉

再把

WP17 <- read.csv(""D:MCAS17.csv"")

WP18 <- read.csv(""D:MCAS18.csv"")

改成

WP17 <- read.csv(""MCAS17.csv"")

WP18 <- read.csv(""MCAS18.csv"")

然後重新Publish應該就可以了

--","R_Language"
"155","M.1543933119.A.4CC","asdfrtg","問題","Re: Publish R Shiny app失敗",2018-12-04 22:18:36,NA,NA,"不好意思可能沒講很清楚
資料需上傳到網路上
電腦裡面的資料行不通@@
如果還有其他問題可能要去看他的紀錄※ 引述《Lynnhan (林翰)》之銘言：: [問題類型]:: RShiny的publish問題: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: runAPP 的時候都非常順利: 已看過非常多youtube教學 但不知道卡在哪裡: 以至於無法成功publish: 有想過是不是要連csv檔一起publish 但後來還是得到結果: Error: An error has occurred. Check your logs or contact the app author for: clarification.: https://imgur.com/a/5xnS0wt: [程式範例]:: Ui -> https://pastebin.com/WwK3rJ5V: Server -> https://pastebin.com/s4X24tvN: 其他資料檔 -> https://pastebin.com/tFt66j0x去掉setwd()
在read.csv()這個函數裡面為
資料上傳後的雲端網址（可編輯）看看: [環境敘述]:: [關鍵字]:: R Shiny Publish: 如果順利解決 會給幫忙的大大300P以表感謝!: 麻煩了..--","R_Language"
"156","M.1543878945.A.72F","Lynnhan","問題","Publish R Shiny app失敗",2018-12-04 07:15:41,NA,NA,"[問題類型]:

RShiny的publish問題

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

runAPP 的時候都非常順利

已看過非常多youtube教學 但不知道卡在哪裡

以至於無法成功publish

有想過是不是要連csv檔一起publish 但後來還是得到結果

Error: An error has occurred. Check your logs or contact the app author for
clarification.https://imgur.com/a/5xnS0wt[程式範例]:

Ui ->https://pastebin.com/WwK3rJ5VServer ->https://pastebin.com/s4X24tvN其他資料檔 ->https://pastebin.com/tFt66j0x[環境敘述]:

[關鍵字]:

R Shiny Publish

如果順利解決 會給幫忙的大大300P以表感謝!

麻煩了..

--","R_Language"
"157","M.1543809934.A.6C6","ksherry","問題","Re: 如何對一組觀測值求confidence interval",2018-12-03 12:05:32,NA,NA,"這個比較接近統計的問題,

首先, X_i \sim Laplace(0, \theta), 因此 |X_i| \sim exp(\theta)

Gamma 分配具可加性, 因此 \sum |X_i| \sim Gamma(1, \theta)

而 Gamma 分配無適當的臨界值表可參考, 故將該分配轉換為卡方分配

Gamma 分配亦具可乘性, 因此 (2\sum |X_i|)/\theta \sim \chi^2(2n)

因此 \theta 之100(1-\alpha)% CI 為

[2\sim |X_i|/\chi^2_{\alpha/2}(2n),2\sim |X_i|/\chi^2_{1-\alpha/2}(2n)]

其中 n 為樣本數,

而 \chi^2_{\alpha/2}(2n) 可透過 qgamma(1-alpha/2, shape=2n/2, rate=1/2) 得到※ 引述《AmigoSafin ()》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 大家好: 搜尋了一些範例: 還是不太知道怎麼寫: 上來向大家請教：: 已知 X_i ~Laplace (0, \theta): 目標是希望用以下的data set :: D={0.17, 0.15, 0.35, -2.60, 2.65, -0.17, 7.50, 2.26, -0.02}: 求 \theta的100(1-\alpha)% confidence interval: 想請教板上高手如何破關？: 感謝大家！！--","R_Language"
"158","M.1543804709.A.3A2","Lynnhan","問題","RSHINY 對應不同dataset做不同圖表",2018-12-03 10:38:26,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

各位大大好 我目前在做RShiny的UI Server

我想做的是讓Ui 在選擇不同年份資料的時候

Server可以對應出相對年份跑出那個資料夾

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我有兩個年份的資料 2017 & 2018

我在Ui的select input上面做了

selectInput(""year"", ""Select the year:"", choices = c(""2017"", ""2018""))

Server部分則是

datasetInput <- reactive({
    switch(input$year,
           ""2017"" = m17,
           ""2018"" = m18)

其中 m17 m18 是我兩個dataset的資料

但在跑圖的時候我用了

output$data <- renderTable({
    cc <- as.numeric(input$var)
    ccc <- as.numeric(input$gen)
    dset <- datasetInput()
    dset[1:20,c(cc,ccc)]

我用dset去代表對應的datasetInput

但是跑出來的結果是

Error: undefined columns selected

[已解決]

謝謝各位大大的用心 後來自己從頭到尾寫一遍後發現

UI的命名有問題 所以才跑出undefined columns


[關鍵字]:

RShiny

--","R_Language"
"159","M.1543644678.A.A63","AmigoSafin","問題","如何對一組觀測值求confidence interval",2018-12-01 14:11:15,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

搜尋了一些範例

還是不太知道怎麼寫

上來向大家請教：


已知 X_i ~Laplace (0, \theta)

目標是希望用以下的data set :

D={0.17, 0.15, 0.35, -2.60, 2.65, -0.17, 7.50, 2.26, -0.02}

求 \theta的100(1-\alpha)% confidence interval


想請教板上高手如何破關？

感謝大家！！



--

--","R_Language"
"160","M.1543558056.A.C93","andrew43","問題","Re: 在變數中找出factor",2018-11-30 14:07:33,NA,NA,"※ 引述《AmigoSafin ()》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 想請教大家: 已知一個data frame內有1000個變數: 寫code找出其中為factor的變數: ( You may choose to create a data frame but it is not part of the: requirement): 得到的解答是這樣：: sum(sapply(x,is.factor))x如果是一個長度為k的list或有k欄的data.frame
（其實data.frame就是一種list），
則sapply(x,is.factor)會回傳k個布林值，
分別指出每個單位是不是factor。
至於sum(一串布林值)就是有幾個True的意思。
在R中布林值加減是把True當成1而False當成0。: getNFactors<-function(x) sum(sapply(x,is.factor)): y<-data.frame(a=letters[1:2],b=1:2,d=c(""A"",""Factor?""),e=2:3): getNFactors(y) # 2在使用data.frame()的時候，
有一個參數叫stringsAsFactors可以自動把字元型式的欄位變成factor。
通常stringsAsFactors的預設值是True，
因此，y$a和y$d此時是factor。
你可以藉由sapply(y, class)或是class(y$d)看出來。: y$d<-as.character(y$d): getNFactors(y) # 1這裡是把y$d轉成字串，所以不再是factor了。
一樣，看看sapply(y, class)。: 實話說實在看不太懂最後這一部分: 請問是if getNFactors(y)=2則其中沒有Factors: if getNFactors(y)=1則為有 Factors應該是寫成 if(getNFactors(y)==1)，意思是y裡頭是不是正好有1個factor。: 因為原程式碼用d=c(""A"", ""Factors?"")來測試: 但b=1:2, e=2:3R裡頭建立公差為1的數列的方便寫法。: 是什麼意思呢？: 謝謝大家∼∼--","R_Language"
"161","M.1543545761.A.9C7","AmigoSafin","問題","在變數中找出factor",2018-11-30 10:42:38,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請教大家
已知一個data frame內有1000個變數
寫code找出其中為factor的變數
( You may choose to create a data frame but it is not part of the
requirement)


得到的解答是這樣：

sum(sapply(x,is.factor))

getNFactors<-function(x) sum(sapply(x,is.factor))

y<-data.frame(a=letters[1:2],b=1:2,d=c(""A"",""Factor?""),e=2:3)
getNFactors(y) # 2
y$d<-as.character(y$d)
getNFactors(y) # 1

實話說實在看不太懂最後這一部分
請問是if getNFactors(y)=2則其中沒有Factors
if getNFactors(y)=1則為有 Factors
因為原程式碼用d=c(""A"", ""Factors?"")來測試
但b=1:2, e=2:3
是什麼意思呢？

謝謝大家∼∼



--

--","R_Language"
"162","M.1543411636.A.21C","shingai","問題","請教為何列印不出結果",2018-11-28 21:27:14,NA,NA,"[問題類型]:
迴圈問題
[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
[問題敘述]:

塗色問題，我只是想列印出所有在2*3格子中，左右不同色且上下不同色的列舉。
Run下去，完全沒有動靜，想請教如何排除障礙

[程式範例]:
m<-gtools::permutations(5,3,1:5,rep=FALSE);
for(i in 1:5)
{
  if(j==1)
  {
    if(m[i,1]!=m[j,1])
    {
      if(m[i,2]!=m[j,2])
      {
        if(m[i,3]!=m[j,3])
        {
          print(rbind(m[i,],m[j,]))
        }
      }
    }
  }
}
[環境敘述]:
compiler_3.4.3 tools_3.4.3    gtools_3.8.1

--","R_Language"
"163","M.1543376991.A.5B2","dailylily","問題","讀取xls檔問題",2018-11-28 11:49:49,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除入門使用者

[問題敘述]:
我以R寫了個整理資料的指令
以我的電腦使用沒問題
但同事在使用read_xls讀取xls檔時都顯示failed to open xxxxxx
讀取的檔案都同一個
指令也都同一行
檢查過後是同事的電腦只要是xls檔都無法以R讀取
請問可能是哪裡出問題呢？
謝謝

[程式範例]:
hours <- read_xls(paste0(path,xls_list[i]), sheet = 1)
基本上就是這樣行卡住出不來
但我執行都沒問題



[環境敘述]:win10Rstudio--","R_Language"
"164","M.1543289917.A.5EB","AmigoSafin","問題","使用R plot likelihood function",2018-11-27 11:38:34,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位大大好

想請教一下如何寫R code畫出laplace distribution的likelihood function?

p.d.f: f_x(x)=(1/2\theta)exp{(-1/\theta)*|x|}

現在generate a sample with n=100, theta=2

我把function寫出來為:


library(VGAM)
theta
<-2;
n <-
100
x <-rlaplace(n,scale=theta)


fn <- function(theta){(1/2*theta)^n*exp((-1/theta)*sum(abs(X)))}

這部分沒問題

但接下來該如何用這個function畫圖就困擾了我

plot(fn)是一條直線

有如我的心電圖（眼神死）

還請各位高手幫忙給小魯一點方向

謝謝∼∼





--

--","R_Language"
"165","M.1543149425.A.FE0","leo790124","問題","有重複觀測值的回歸該如何寫",2018-11-25 20:37:02,NA,NA,"x1      x2      x3      x4      y1      y2      y3
-1      -1      -1      -1      28      27.1    26.2
-1      -1      1       1       46.3    43.5    46.5
-1      1       -1      1       21.9    21      20.1
-1      1       1       -1      52.9    53.7    52
1       -1      -1      1       75      73.1    74.3
1       -1      1       -1      127.7   126.9   128.7
1       1       -1      -1      86.2    86.5    87
1       1       1       1       195     195.9   195.7

想請益Fit a first-order regression model to the data and conduct the residual
analysis.
該如何做

我目前只有會分開做，不知道是否需要合起來?

lm.table <- lm(y1 ~ x1+x2+x3+x4 )
summary(lm.table)

plot(lm.table513)


還是要做anova??

請教大大，謝謝。


--","R_Language"
"166","M.1543127938.A.33E","ronald736","問題","能否ㄧ次匯出多個檔案呢? (write.table)",2018-11-25 14:38:55,NA,NA,"各位好 :

目前小弟正清洗資料，已經把許多有NA的資料建立完成，共有10個檔案 N1~N20

各代表原資料 第1~20個欄位出現空值的資料，例如第1個欄位出現空值資料 = N1

但我使用 write.table(N1,""E:/r/N1.csv"",sep="","") 是可以匯出1個檔案

可是我要ㄧ次匯出20個，總不可能寫20行 write.table(N1,""E:/r/N1.csv"",sep="","")

於是我想嘗試用迴圈做，如下 :

for (i in 1:20)
{
  write.table(Ni,""C:/Ni.csv"",sep="","")
}

但以上的Ni是找不到的，我知道沒有Ni這個物件，但我不知道怎麼樣讓R可以自動做匯出
這件事?

能否指點一下 我該用什麼寫法比較好?

我不想每次洗資料 都要寫 20個 write.table

--","R_Language"
"167","M.1542883407.A.8AA","AndrewShi","問題","讀取多年維度為矩陣的變數值(nc檔)",2018-11-22 18:43:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大好，小弟我想要將多年(10年以上)的區域(東亞)降雨資料讀進R，並取出多年的
降雨值來做計算處理，而目前資料可以讀的進R，但在取降雨這個變數的時候，R就跑出
記憶體不足的錯誤訊息，降雨值的資料為一矩陣(經度x緯度)，經度總共360格，緯度共
280格(360*280)，每一格皆有一降雨值，一天一個矩陣(平面)，所以我在想有沒有可能
真的是要取出來的降雨這個變數資料量太佔記憶體，而造成沒辦法取出這麼多年分的降
雨值出來，小弟我目前試我的電腦最多只能取出4年的降雨值出來，所以想請教各位大大
有沒有什麼方法可以解決嗎??謝謝。
資料可從這裡取得:http://0rz.tw/JI056(APHRO這個檔案)
[程式範例]:
rm(list=ls())
library(ncdf4)

Aphrodite_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\Aphrodite資料
\\APHRO_MA_025deg_V1101R2.1961-2007\\APHRO_MA_025deg_V1101R2.1961-2007.nc""
obs <- nc_open(Aphrodite_data)
print(obs)

lon <- ncvar_get(obs,""lon"")
lat <- ncvar_get(obs,""lat"")
level <- ncvar_get(obs,""lev"")
time <- ncvar_get(obs,""time"")
tunits <- ncatt_get(obs, ""time"", ""units"")
precip <- ncvar_get(obs, ""pr"")
precip <- ncvar_get(obs, ""pr"",start=c(1,1,1,1),count=c(360,280,1,1460))
dim(precip)
nc_close(obs)

[環境敘述]:https://imgur.com/kJiIoc7[關鍵字]:
多年資料   變數   nc檔

--","R_Language"
"168","M.1542216388.A.CBF","warpdrive","問題","stata 指令轉成R",2018-11-15 01:26:25,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近上課老師要我們複製別的研究的模型，從中檢驗我們對R以及計量模型的掌握。
我發現很多在社會科學中很多研究都是用stata跑，有些文章有提供原始的stata指令，
可是對於沒有學過stata 的我實在看不懂。
想請教有沒有一些教學、書、或是文件有比較stata指令和R指令，
這樣可以比較快速的把stata模型改寫成R。
謝謝！

--","R_Language"
"169","M.1542102427.A.E65","AndrewShi","問題","將資料時間按月份計算(迴圈)",2018-11-13 17:47:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
這筆資料為2010年全球的降雨資料，資料可從這裡取得:http://0rz.tw/JI056，資料的時
間格式為24小時一筆，總共365筆，現在我想先把時間的格式轉成年月日(如:2010-01-01)
，再判斷日期的月份來做計算(迴圈)，之前有大大解答我是用apply的做法，我也知道在
R裡用apply會比用迴圈來的有效率，不過我想用自己理解的邏輯來寫迴圈做練習，而下面
我所寫的迴圈我知道其中一個問題是time1的維度還是365(雖然數字變成1~12)，我不知道
該怎麼把time1(按月份分好的365天)放到一個12格的矩陣裡，所以想請教各位大大下面的
迴圈該如何修改才正確呢??謝謝。

[程式範例]:
rm(list=ls())
library(ncdf4)
library(data.table)

TRMM_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_2010.nc""
obs <- nc_open(TRMM_data)
print(obs)

lon <- ncvar_get(obs,""lon"")
lat <- ncvar_get(obs,""lat"")
time <- ncvar_get(obs,""time"")
precip <- ncvar_get(obs,""r"")
nc_close(obs)

for(tmonth in c(1:12)){
  for(time1 in c(1:365)){
    time <- as.Date(time / 24, format = ""%Y-%m-%d"", origin = ""2010-01-01"")
    time1 <- strftime(time,format=""%Y-%m-%d)
    tmonth <- month(time1)
     if(tmonth==time1){
      precip1 <- precip[,,tmonth]
      precip2 <- array(NA_real_,dim=c(1440,400,12))
       for(i in c(1:1440)){
        for(j in c(1:400)){
         precip2[i,j,1:12] <- mean(precip1[i,j,tmonth])
      }
    }
  }
 }
}

library(sp)
library(RColorBrewer)
image(lon,lat,precip2[,,1],col=rev(brewer.pal(10,""RdBu"")))

[環境敘述]:

[關鍵字]:
時間處理   迴圈

--","R_Language"
"170","M.1542058643.A.41B","Lynnhan","問題","RShiny Ui Server對應",2018-11-13 05:37:20,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

最近在使用RShiny做圖表

想問有經驗的大大如何讓這兩個Ui 跟 Server連結起來

我是想做grouped bar plot 但一直無法將server的y

[程式範例]:

程式碼可貼於以下網站：

UI:

sidebarPanel(
      selectInput(""var"", ""Select the variable from this dataset"", choices =
c(""English score"" = mod_data$eperpospts, ""math score"" = mod_data$mperpospts)),

s我定義一個input名叫var 然後我想要讓我的English score跟 math score是可以被選擇的

Server:

ggplot(mod_data, aes(y=eperpospts, x = race, fill = highneeds)) +
      stat_summary(fun.y = mean, geom = ""bar"", position = ""dodge"")

然後在y的部分一直無法跟Ui連結 想不到辦法 不知道大大們有什麼建議

非常感謝

如果能幫忙的大大 我以200P作為答謝

[關鍵字]:

RShiny

--","R_Language"
"171","M.1541664493.A.4EE","AndrewShi","問題","選取資料特定區域作圖",2018-11-08 16:08:11,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
這筆資料為2010年全球的降雨資料，資料可從這裡取得:http://0rz.tw/JI056，下面的程
式碼是已經取特定的經緯度範圍(東亞)做月平均的降雨計算所畫出來的圖，我想請教的是
要怎麼做才能畫出經緯度範圍只有東亞這塊(也就是把旁邊地圖空白的部分都去除)??

我試過改image的經緯度範圍，但是會出現變數(precip1)的長度不等於經度乘上緯度的錯
誤訊息，而把變數(precip1)的長度設成跟經緯度一樣或是在計算月平均時就放進跟選取
特定經緯度的範圍一樣大的矩陣裡也不行，還是一開始在讀降雨這個變數時就只讀進特定
的區域也不行，下面加上#號的程式碼是我上述試的方法，如果這些方法是有可行的，只
是程式碼寫的不對，還煩請各位大大給予指點，謝謝。
[程式範例]:
rm(list=ls())
library(ncdf4)
library(data.table)

TRMM_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_2010.nc""
obs <- nc_open(TRMM_data)
print(obs)

lon <- ncvar_get(obs,""lon"")
nlon <- dim(lon)
lat <- ncvar_get(obs,""lat"",verbose = F)
nlat <- dim(lat)
#lon <- seq(60,150,by=0.25)
#lat <- seq(-15,60,by=0.25)
time <- ncvar_get(obs,""time"")
tunits <- ncatt_get(obs, ""time"", ""units"")
precip <- ncvar_get(obs,""r"")
#precip <- ncvar_get(obs,""r"",start=c(240,140,1),count=c(361,261,365))
nc_close(obs)

time <- as.Date(time / 24, format = ""%Y-%m-%d"", origin = ""2010-01-01"")

#precip1 <- matrix(NA_real_,361,261)
precip1 <- matrix(NA_real_,1440,400)
for(i in c(240:600)){
  for(j in c(140:400)){
    precip1[i,j] <- mean(precip[i,j,time=(1:31)])
  }
}

library(sp)
library(RColorBrewer)
library(maps)

#lon <- seq(60,150,by=0.25)
#lat <- seq(-15,60,by=0.25)
#nlon <- 361L
#nlat <- 261L

image(lon,lat,precip1,col=rev(brewer.pal(10,""RdBu"")))
#image(lon=c(60,150),lat=c(-15,60),precip1,col=rev(brewer.pal(10,""RdBu"")))
#precip2 <- matrix(precip1,ncol=length(lat),nrow=length(lon),byrow=F)
#image(lon,lat,precip2,col=rev(brewer.pal(10,""RdBu"")))
map(database='world2',add= TRUE)
#map(database='world2',xlim=c(60,150),ylim=c(-15,60),add= TRUE)

[環境敘述]:https://imgur.com/a/RW1YjV0[關鍵字]:
畫圖   特定區域   nc檔

--","R_Language"
"172","M.1541598532.A.6F4","paranoia5201",NA,"原始檔案為數字，R讀入後變成時間格式，求轉換法",2018-11-07 21:48:49,NA,NA,"資料檔案（excel）內容原是數字，

但是讀入R以後就變成日期格式，如下：

1 1899-12-31 1899-12-30 1900-01-29 07:12:00 1899-12-31 1899-12-30 1899-12-30
2 1900-01-01 1899-12-31 1900-01-26 21:36:00 1899-12-31 1899-12-30 1899-12-30
3 1900-01-02 1899-12-30 1900-02-21 16:48:00 1899-12-30 1899-12-30 1899-12-30
4 1900-01-03 1899-12-30 1900-03-12 14:24:00 1899-12-30 1899-12-30 1899-12-30
5 1900-01-04 1899-12-30 1900-03-04 21:36:00 1899-12-30 1899-12-30 1899-12-30
6 1900-01-05 1899-12-31 1900-02-08 09:36:00 1899-12-31 1899-12-30 1899-12-30

用關鍵字「時間」搜尋了一下，網路上大多是討論如何把數字換成時間格式；

但是我暫時找不到如何把時間格式變回數字......。


陽春的方式是把excel檔案改存成csv後再讀入R，

但是應該有聰明的辦法吧......

還請提供「整個檔案」把日期格式換成數字格式的方法。

感謝∼




--","R_Language"
"173","M.1541236608.A.A6C","TreeMan","問題","Re: 輸出的結果，如何完整貼到文件呢?(求救)",2018-11-03 17:16:45,NA,NA,"我用writeLines試著寫了一個, 應該是可以符合你的需求, 你可以再嘗試最佳化~

#示範用data frame
library(dplyr)

x <- c('A', 'B', 'C')
y <- c(1, 2, 3)
df <- data.frame(x, y) %>%
      mutate_all(as.character)

#先設定一個檔案 (檔名改word也可以), 等會writeline可以寫入

text_print <- file(""text_print.txt"", open=""wt"")

ch.col<- names(df)[sapply(df, is.character)]

for (name in ch.col)
{
  line1 <- sprintf(""Unique value for %s is"",name)
  line2 <- unique(df[[name]])
  writeLines(line1, con = text_print, sep = ""\n"", useBytes = FALSE)
  writeLines(line2, con = text_print, sep = "" "", useBytes = FALSE)
  writeLines(""\n"", con = text_print, sep = ""\n"", useBytes = FALSE)
}

close(text_print)

#開啟檔案就可以看到寫入的資料了

--","R_Language"
"174","M.1541235389.A.A59","Edster","問題","限制CPU使用上限?",2018-11-03 16:56:26,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。

如何限制一隻程式的CUP使用上限。

[問題敘述]:

各位好, 最近用google compute engine + RStudio Server.

雖說 GCE 號稱第一年有300美金的免費額度。
但設定好GCE馬上就收到信用卡通知刷了一元美金。
mmmm, 那這免費是認真的嗎?
一查，原來當超過設定的使用量, 會自動加錢升級.

我的CPU是設定small (1.7G)
剛剛跑一隻程式, cpu使用量來到150%.
我不求快, 反正這是要讓他在那邊自己慢慢算.
有辦法利用 R的語法 限制CPU使用量上限嗎?

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[環境敘述]:
Google Compute Engine in Ubuntu 18.0
RStudio Server 3.5.0


[關鍵字]:選擇性，也許未來有用--","R_Language"
"175","M.1541224016.A.7AE","ronald736","問題","輸出的結果，如何完整貼到文件呢?(求救)",2018-11-03 13:46:54,NA,NA,"目前要做資料清理，想將結果輸出，程式碼如下:

資料檔案 : d1034S ，用途 : 將檔案的所有欄位資料跑出，想貼到文件上

當作資料清洗的狀況，於是寫了一下迴圈

ch.col<- names(d1034S)[sapply(d1034S, is.character)]

for (name in ch.col)
  {
  print(sprintf(""Unique value for %s is"",name))
  print(unique(d1034S[[name]]))
  cat('\n')
}

如上面，我寫了一個for想跑出資料d1034S的所有欄位的內容值，但是R上，因為視窗關係
，

只看到部分欄位的資料，而且也無法複製貼上...重點是: 我想要把全部的輸出貼到文件
上 (如word)


程式碼:https://imgur.com/a/yqn6Aju輸出: (只看到部分，不知道怎麼處理)https://imgur.com/a/qxFGouc請問: 我怎麼將R輸出的""完整""結果，整個貼到文件夾上? (我視窗根本只看到部分而已)

或者程式碼應該怎麼修改?

--","R_Language"
"176","M.1541203041.A.27E","AmigoSafin","問題","R vector的mode問題",2018-11-03 07:57:18,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

想請益R的atomic vector的mode問題
例如以下題目
我的理解是 假設x是一個包含1到10的vector
加了一個character element
整個vector就會變成character
但如果加入TRUE FALSE FALSE
vector中就把logical indexing改為 1 0 0
這部分我就不知道是用到fundemental principle operation的什麼原則了
學長姐給了解答是

the mode which preserves the most information would be used.
想問問大家最後一步要如何解釋
謝謝∼∼


[程式範例]:

x <-1:10
x3 <-c(x, ""Yankees"") # error or run?
x3 <-run without an error
x4 <-as.numeric(x3) # a warning
x4
x5 <-c(x, TRUE, FALSE, FALSE)
x5 # what happened?

我是回答x5這一步做logical indexing,
因為x為numeric vector
所以TRUE FALSE轉為 1,0


請教大家是否有更嚴謹的說法？

謝謝了



--

--","R_Language"
"177","M.1541166048.A.A19","andrew43","問題","Re: 分群和找位置相關問題",2018-11-02 21:40:45,NA,NA,"原po有來信指出大概有多少資料。

我試了 dbscan，請見下例。

library(data.table)
library(dbscan)
library(ggplot2)

# 產生理想 1500 群的 20000 筆假資料
N <- 20000
d <-
  data.table(
    x1 = sample(seq(1:50), size = N, T) + rnorm(N, 0, 0.05),
    x2 = sample(seq(1:30), size = N, T) + rnorm(N, 0, 0.05)
  )

# dbscan
# eps 參數要看情況抓一下，應該不會很難抓（因為你幾乎知道實際有幾群）
# 可用的 eps 值和 0.5 可能差很多
res <- dbscan(d[, x1:x2], eps = 0.5, minPts = 1)
print(length(table(res$cluster))) # 確實抓到 50*30=1500 群
d[, g := as.character(res$cluster)]

# 取中心和每群個數
dc <- d[, list(x1c = mean(x1), x2c = mean(x2), N = .N), by = g]

ggplot(d, aes(x = x1, y = x2)) +
  geom_point(size = 0.2) +
  ggtitle(""raw data"")
ggplot(dc, aes(x = x1c, y = x2c)) +
  geom_point(alpha = 0.2, size = 2) +
  ggtitle(""average per cluster"")
ggplot(dc, aes(x = x1c, y = x2c)) +
  geom_text(aes(x = x1c, y = x2c, label = N), size = 2) +
  ggtitle(""number of raw data per cluster"")
ggplot(dc, aes(x = x1c, y = x2c)) +
  geom_text(aes(x = x1c, y = x2c, label = g), size = 2) +
  ggtitle(""cluster ID"")※ 引述《w32123 (Ru)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大神大家好~: http://i.imgur.com/tbduH5L.jpg: 這個圖中的每一小坨是植物的位置: 是先對每個點的光譜值做kmeans分四群後找出來的: 四個頂點是邊界範圍: 我想找出散布在圖中每一坨的中心點當作植物中心點: 也想知道中心點的位置和個數: Hclust我只放入了x,y座標讓他們分群可是感覺分不太出來QQ結果如圖: http://i.imgur.com/mrC8b6c.jpg: 想請問有除了分群以外的方法嗎?: 另外想讓R自動決定分群數 有嘗試過elbow method: 但是都會出現Error: cannot allocate vector of size 91.4 Gb: 不知道自動決定分群數有沒有比較推薦的方法呢: 先謝過各位大神了~: 現有每個點的資料格式如圖: 最左邊是序號 band1~4是光譜值 x,y是x,y座標: http://i.imgur.com/UUPYeCU.jpg: [程式範例]:: plant.cluster <- hclust(dist(remain.plant.add[,1:2]),method = ""ward.D2""): png(""hclust.png"",res = 200,width = 2259,height = 1549): plot(plant.cluster): dev.off(): #elbow method: elbow.k <- function(mydata){:         dist.obj <- dist(mydata):         hclust.obj <- hclust(dist.obj):         css.obj <- css.hclust(dist.obj,hclust.obj):         elbow.obj <- elbow.batch(css.obj):         k <- elbow.obj$k:         return(k): }: elbow.k(NDVI): #Error: cannot allocate vector of size 91.4 Gb: [環境敘述]:: R version 3.5.0 (2018-04-23): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): Matrix products: default: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods: [7] base: other attached packages:: [1] ggplot2_2.2.1 NbClust_3.0   rgdal_1.3-3   sp_1.3-1: loaded via a namespace (and not attached)::  [1] Rcpp_0.12.18     lattice_0.20-35  crayon_1.3.4:  [4] grid_3.5.0       plyr_1.8.4       gtable_0.2.0:  [7] scales_1.0.0     pillar_1.3.0     rlang_0.2.2: [10] lazyeval_0.2.1   rstudioapi_0.7   labeling_0.3: [13] tools_3.5.0      munsell_0.5.0    compiler_3.5.0: [16] colorspace_1.3-2 tibble_1.4.2: [關鍵字]:: 分群、中心點、位置--","R_Language"
"178","M.1541153336.A.8F9","AndrewShi","問題","Error:can't allocate vector of size Gb",2018-11-02 18:08:53,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
之前一開始用image畫圖出來之後，加上levelplot()那段指令都能畫的出colorbar，但畫
了幾次之後，執行levelplot()那段指令都會出現下圖中的錯誤訊息，且colorbar也沒跑
出來。
我上了stackoverflow查到好像有人說這是記憶體空間的問題，而我也試了在levelplot指
令前加上gc()，且從工作管理員也看到記憶體用量降到40%左右，但執行levelplot()之後
還是出現同樣的錯誤訊息，且在兩台電腦試都一樣，而我裝了ff套件之後試也還是一樣，
所以想請教各位大大這是什麼問題以及可以解決嗎(除了換電腦記憶體的容量)??
小弟的電腦記憶體容量(RAM)為4GB。
[程式範例]:
rm(list=ls())
library(ncdf4)
library(data.table)

TRMM_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_2010.nc""
obs <- nc_open(TRMM_data)

lon <- ncvar_get(obs,""lon"")
lat <- ncvar_get(obs,""lat"")
time <- ncvar_get(obs,""time"")
precip <- ncvar_get(obs,""r"")
time <- matrix(seq(as.Date(""2010-01-01""), as.Date(""2010-12-31""),1))

precip1 <- matrix(NA_real_,1440,400)
for(i in c(1:1440)){
  for(j in c(1:400)){
    precip1[i,j] <- mean(precip[i,j,time=(1:31)])
  }
}

library(RColorBrewer)
image(lon,lat,precip1,col=rev(brewer.pal(10,""RdBu"")))

gc()
library(lattice)
grid <- expand.grid(lon=lon, lat=lat)
cutpts <- c(0,5,10,15,20,25,30,35,40,45,50)
levelplot(precip ~ lon * lat, data=grid, at=cutpts, cuts=11, pretty=T,
          col.regions=(rev(brewer.pal(10,""RdBu""))))

library(sp)
library(maps)
map(database='world2',add= TRUE)
[環境敘述]:https://imgur.com/qdHINqH[關鍵字]:
記憶體空間

--","R_Language"
"179","M.1540980684.A.F97","w32123","問題","分群和找位置相關問題",2018-10-31 18:11:22,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大神大家好~http://i.imgur.com/tbduH5L.jpg這個圖中的每一小坨是植物的位置
是先對每個點的光譜值做kmeans分四群後找出來的
四個頂點是邊界範圍
我想找出散布在圖中每一坨的中心點當作植物中心點
也想知道中心點的位置和個數

Hclust我只放入了x,y座標讓他們分群可是感覺分不太出來QQ結果如圖http://i.imgur.com/mrC8b6c.jpg想請問有除了分群以外的方法嗎?

另外想讓R自動決定分群數 有嘗試過elbow method
但是都會出現Error: cannot allocate vector of size 91.4 Gb
不知道自動決定分群數有沒有比較推薦的方法呢
先謝過各位大神了~

現有每個點的資料格式如圖
最左邊是序號 band1~4是光譜值 x,y是x,y座標http://i.imgur.com/UUPYeCU.jpg[程式範例]:
plant.cluster <- hclust(dist(remain.plant.add[,1:2]),method = ""ward.D2"")
png(""hclust.png"",res = 200,width = 2259,height = 1549)
plot(plant.cluster)
dev.off()


#elbow method
elbow.k <- function(mydata){
        dist.obj <- dist(mydata)
        hclust.obj <- hclust(dist.obj)
        css.obj <- css.hclust(dist.obj,hclust.obj)
        elbow.obj <- elbow.batch(css.obj)
        k <- elbow.obj$k
        return(k)
}

elbow.k(NDVI)
#Error: cannot allocate vector of size 91.4 Gb

[環境敘述]:

R version 3.5.0 (2018-04-23)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

other attached packages:
[1] ggplot2_2.2.1 NbClust_3.0   rgdal_1.3-3   sp_1.3-1

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.18     lattice_0.20-35  crayon_1.3.4
 [4] grid_3.5.0       plyr_1.8.4       gtable_0.2.0
 [7] scales_1.0.0     pillar_1.3.0     rlang_0.2.2
[10] lazyeval_0.2.1   rstudioapi_0.7   labeling_0.3
[13] tools_3.5.0      munsell_0.5.0    compiler_3.5.0
[16] colorspace_1.3-2 tibble_1.4.2

[關鍵字]:
分群、中心點、位置

--","R_Language"
"180","M.1540821800.A.7CC","andrew43","問題","Re: 資料次數依照日序排列",2018-10-29 22:03:17,NA,NA,"轉成日期物件會好處理很多。

library(magrittr)
x <-
  paste0(round(runif(200, 1, 12)),
         ""月"",
         round(runif(200, 1, 28)),
         ""日"")
x.date <-
  lapply(strsplit(x, ""[日月]""), function(foo) {
    paste(foo, collapse = ""-"") %>%
      as.Date(., ""%m-%d"")
  }) %>%
  do.call(""c"", .)
y <- table(x.date)
y[order(names(y))]※ 引述《demonio (亦魯)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 有一批日期資料如下：: 3    1月2日: 4    1月3日: 5    1月3日: 6    1月3日: 7    1月3日: 8    1月3日: 9    1月4日: 10   1月5日: 11   1月5日: 12   1月5日: 13   1月8日: 14  1月10日: 15  1月10日: 16  1月11日: 17  1月11日: ...以下省略: 想用table計算出這些日期出現的次數，然後用折線圖從1月1日開始呈現出次數(預計是用: plot): 可是table不會按照日期排列，table的排列方式如下，是從1月10日開始：: 1月10日 1月11日 1月12日 1月15日 1月17日 1月18日 1月22日 1月23日:       2       7       2       2       1       4       2       3: 1月24日 1月25日 1月26日 1月29日  1月2日 1月30日 1月31日  1月3日:       1       1       3       4       3       2       2       5:  1月4日  1月5日  1月8日 2月12日 2月13日 2月14日 2月21日 2月22日:       1       3       1       1       2       3       3       1: 以至於用plot折線圖畫也是從1月10號開始。無法由1月1日到12月31日呈現次數折線: 請教這是否需要特殊的函數來解？: [程式範例]:: mail2018<-read.csv("" mail.csv"", header = FALSE): mail<-table(mail2018): plot(mail,type = ""l"",xlab=""日期"",ylab=""次數"",ylim=c(0,20)): [環境敘述]:: RStudio Version 1.1.423: [關鍵字]::: table:

--","R_Language"
"181","M.1540815332.A.F8C","demonio","問題","資料次數依照日序排列",2018-10-29 20:15:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

有一批日期資料如下：

3    1月2日
4    1月3日
5    1月3日
6    1月3日
7    1月3日
8    1月3日
9    1月4日
10   1月5日
11   1月5日
12   1月5日
13   1月8日
14  1月10日
15  1月10日
16  1月11日
17  1月11日
...以下省略

想用table計算出這些日期出現的次數，然後用折線圖從1月1日開始呈現出次數(預計是用
plot)
可是table不會按照日期排列，table的排列方式如下，是從1月10日開始：

1月10日 1月11日 1月12日 1月15日 1月17日 1月18日 1月22日 1月23日
      2       7       2       2       1       4       2       3
1月24日 1月25日 1月26日 1月29日  1月2日 1月30日 1月31日  1月3日
      1       1       3       4       3       2       2       5
 1月4日  1月5日  1月8日 2月12日 2月13日 2月14日 2月21日 2月22日
      1       3       1       1       2       3       3       1

以至於用plot折線圖畫也是從1月10號開始。無法由1月1日到12月31日呈現次數折線

請教這是否需要特殊的函數來解？


[程式範例]:
mail2018<-read.csv("" mail.csv"", header = FALSE)
mail<-table(mail2018)
plot(mail,type = ""l"",xlab=""日期"",ylab=""次數"",ylim=c(0,20))


[環境敘述]:
RStudio Version 1.1.423


[關鍵字]:table--","R_Language"
"182","M.1540645828.A.B5B","AmigoSafin","問題","quadratic model 和 linear model",2018-10-27 21:10:23,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我使用了R內建的data ""Prestige""

題目請我們建立兩個model

M_3: prestige=\beta_0+\beta_1^education+\beta_2^income+epsilon

M_4: prestige=\beta_0+\beta_1^education+\beta_2^income+\beta_3^income^2
+epsilon

但是這兩個model的residual plot都長得一樣

AIC值也一樣 BIC等皆同


因此我想請問是否我的code沒有建立成功另一個variable:income^2

是否是語法問題

感謝大家∼∼




--

--","R_Language"
"183","M.1540578275.A.446","AmigoSafin","問題"," 請問可以用R算linear algebra嗎？",2018-10-27 02:24:32,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我目前在上迴歸分析

所以有不少dim在5*5左右的矩陣
就想說都已經用R markdown寫出計算式了
可不可以直接請R幫我算出來
因為都有數字在矩陣內 例如　vector * matrix *vector

因為自己手殘很容易計算錯誤
以下附上code
還請各位高手不吝賜教
謝謝∼∼
跪謝


[程式範例]:
$$ese(\hat\mu(x_0))=\sqrt([1,2,(-1/2),4,-1]\times$$
$$
\sqrt(\left(\begin{array}{cc}
0.180 & 0.018 & 0.013 & -0.077 & -0.015\\
0.018 & 0.164 &-0.002 & -0.050 & 0.018\\
0.013 & -0.002 & 0.053 & -0.002 & -0.014\\
-0.077 & -0.050 & -0.002 & 0.097 & 0.014\\
-0.015 & 0.018 & -0.014 & 0.014 & 0.149
\end{array}\right))\times
$$
$$
\sqrt(\left(\begin{array}{cc}
1\\
2\\
(-1/2)\\
4\\
(-1)
\end{array}\right))
$$


--

--","R_Language"
"184","M.1540342744.A.AF5","andrew43","問題","Re: 魚類資料庫爬蟲，爬不出來",2018-10-24 08:59:01,NA,NA,"我覺得在這個網站應該直接找包括 ""Human uses"" 內容的 h1 為起點會比較可靠。
找到後，取出它之後的第一個同級 div，再取其之下的 span。

如果只是靠「找到第n個class為xxx的div」，
特別該class只是拿來套用樣式而沒有結構上的意義，
那你換另一個頁面時這招大概又沒用了（第幾個class又要重找）。

html_nodes(
  read_html(""http://www.fishbase.org/summary/Decapterus-maruadsi.html""),xpath =
    ""//h1[contains(text(),'Human uses')]/following-sibling::div[1]/span""
) %>%
  html_text %>%
  trimws※ 引述《mary84215 (過剩芒果蘇)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 各位大大好，我想在FishBase網站把這種魚的Human uses爬下<U+6765>，網址如下方所列: http://www.fishbase.org/summary/Decapterus-maruadsi.html: 以此網頁為例，我使用套件rvest爬蟲，並配合SelectorGadget取得元素的css路徑或是xp: ath: 原本期待能爬出""Fisheries: highly commercial""，但是不知<U+7232>何總是爬出character(0): 已經試過許多方法，且此網頁應該也不是動態網頁，但還是不得其解QQ: 只好來這裡求助各位大大了，謝謝各位: [程式範例]:: rm(list=ls()): library(""rvest""): library(""xml2""): library(""magrittr""): library(""httr""): page=read_html(""http://www.fishbase.org/summary/Decapterus-maruadsi.html""): page %>% html_nodes("".smallSpace:nth-child(44) span"") %>%:   html_text(): [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.12.6 (Sierra): locale:: [1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] httr_1.3.1   magrittr_1.5 rvest_0.3.2  xml2_0.1.2: loaded via a namespace (and not attached):: [1] selectr_0.4-1 R6_2.1.2      tools_3.3.1   curl_3.1      Rcpp_0.12.4: [6] stringi_1.0-1 stringr_1.0.0: [關鍵字]:: 爬蟲、rvest--","R_Language"
"185","M.1540308654.A.E0D","mary84215","問題","魚類資料庫爬蟲，爬不出來",2018-10-23 23:30:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
各位大大好，我想在FishBase網站把這種魚的Human uses爬下<U+6765>，網址如下方所列http://www.fishbase.org/summary/Decapterus-maruadsi.html以此網頁為例，我使用套件rvest爬蟲，並配合SelectorGadget取得元素的css路徑或是xp
ath

原本期待能爬出""Fisheries: highly commercial""，但是不知<U+7232>何總是爬出character(0)

已經試過許多方法，且此網頁應該也不是動態網頁，但還是不得其解QQ

只好來這裡求助各位大大了，謝謝各位

[程式範例]:rm(list=ls())library(""rvest"")library(""xml2"")library(""magrittr"")library(""httr"")page=read_html(""http://www.fishbase.org/summary/Decapterus-maruadsi.html"")page %>% html_nodes("".smallSpace:nth-child(44) span"") %>%html_text()[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.12.6 (Sierra)

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] httr_1.3.1   magrittr_1.5 rvest_0.3.2  xml2_0.1.2

loaded via a namespace (and not attached):
[1] selectr_0.4-1 R6_2.1.2      tools_3.3.1   curl_3.1      Rcpp_0.12.4
[6] stringi_1.0-1 stringr_1.0.0


[關鍵字]:
爬蟲、rvest


--","R_Language"
"186","M.1540258357.A.42A","andrew43","問題","Re: 月平均資料",2018-10-23 09:32:35,NA,NA,"# 已先自http://0rz.tw/JI056下載 trmm_2010.nc

library(ncdf4)
library(data.table)

obs <- nc_open(""trmm_2010.nc"")
lon <- ncvar_get(obs, ""lon"") # 經度切1440份
lat <- ncvar_get(obs, ""lat"") # 緯度切400份
time <- ncvar_get(obs, ""time"") # 單位為小時，共365個
precip <- ncvar_get(obs, ""r"") # 第一維為lon，第二維為lat，笫三維為time

time2 <-
  as.Date(time / 24, format = ""%Y-%m-%d"", origin = ""2010-01-01"")
# 先把單位由小時換算成天

##############

# 以每日求12個月平均
# precip.ave.monthly[1, , ] 到 precip.ave.monthly[12, , ] 表示各月均雨量
# 這步很慢，有需要再改寫
precip.ave.monthly <-
  apply(precip, c(1, 2), function(x) {
    tapply(x, month(time2), mean)
  })
image(lon, lat, precip.ave.monthly[6, ,]) # 六月份

# 以每日求全年總平均
precip.ave.overall <- apply(precip, c(1, 2), mean)
image(lon, lat, precip.ave.overall)


par(mfrow = c(3, 4),
    mar = c(2, 2, 2, 2),
    cex = 8 / 12)
for (i in 1:12) {
  image(
    lon,
    lat,
    precip.ave.monthly[i, ,],
    col = gray(0:255 / 256),
    xlab = """",
    ylab = """"
  )
  title(paste(""month:"", i))
}※ 引述《AndrewShi (沒有妳的我)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好，: 我放入的這筆資料是2010年全球每天的降雨(量)資料，現在我想把每日的降雨量計算成月: 平均.年平均降雨量，下面我所想到的迴圈是可以畫得出圖來，但畫出來感覺不太正確，所以想請: 教大大們我的迴圈是否有問題，能否給我一些提點，謝謝。: p.s:原本的資料型態中降雨值的維度只包含經度和緯度(2維)，所以我用rbind把時間的維: 度也併到降雨值裡。: [程式範例]:: rm(list=ls()): library(ncdf4): TRMM_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_2010.nc"": obs <- nc_open(TRMM_data): print(obs): lon <- ncvar_get(obs, ""lon""): lat <- ncvar_get(obs, ""lat""): time <- ncvar_get(obs, ""time""): precip <- ncvar_get(obs,""r""): time <- matrix(seq(as.Date(""2010-01-01""), as.Date(""2010-12-31""),1)): rbind(dim(time),precip[[3]]): time <- c(): for(time in seq_along(1:31)){:   mean(precip): }: time <- c(): for(time in seq_along(1:365)){:   mean(precip): }: lon <- lon-180: #lat <- rev(lat): precip <- precip[,,time]: library(RColorBrewer): image(lon,lat,precip,col=rev(brewer.pal(10,""RdBu""))): library(maptools): gpclibPermit(): data(wrld_simpl): plot(wrld_simpl,add=TRUE): [環境敘述]:: [關鍵字]:: 月平均   nc檔   降雨--","R_Language"
"187","M.1540199720.A.401","AndrewShi","問題","月平均資料",2018-10-22 17:15:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大好，
我放入的這筆資料是2010年全球每天的降雨(量)資料，現在我想把每日的降雨量計算成月
平均.年平均降雨量，下面我所想到的迴圈是可以畫得出圖來，但畫出來感覺不太正確，所以想請
教大大們我的迴圈是否有問題，能否給我一些提點，謝謝。
p.s:原本的資料型態中降雨值的維度只包含經度和緯度(2維)，所以我用rbind把時間的維
度也併到降雨值裡。

[程式範例]:
rm(list=ls())
library(ncdf4)

TRMM_data <- ""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_2010.nc""
obs <- nc_open(TRMM_data)
print(obs)

lon <- ncvar_get(obs, ""lon"")
lat <- ncvar_get(obs, ""lat"")
time <- ncvar_get(obs, ""time"")
precip <- ncvar_get(obs,""r"")
time <- matrix(seq(as.Date(""2010-01-01""), as.Date(""2010-12-31""),1))
rbind(dim(time),precip[[3]])

time <- c()
for(time in seq_along(1:31)){
  mean(precip)
}

time <- c()
for(time in seq_along(1:365)){
  mean(precip)
}

lon <- lon-180
#lat <- rev(lat)
precip <- precip[,,time]
library(RColorBrewer)
image(lon,lat,precip,col=rev(brewer.pal(10,""RdBu"")))
library(maptools)
gpclibPermit()
data(wrld_simpl)
plot(wrld_simpl,add=TRUE)

[環境敘述]:

[關鍵字]:
月平均   nc檔   降雨

--","R_Language"
"188","M.1540179153.A.F1F","andrew43","問題","Re: 請問怎麼把rawdata分組對應?? (資料清洗)",2018-10-22 11:32:30,NA,NA,"原文推文中提到怎麼找一對多的列。
以下都是基於 data.table，不太確定是不是原po要的解答。

library(data.table)
dt <- data.table(A = c(""a"", ""a"", ""a"", ""a"",  ""b"", ""b"", ""c""),
                 B = c(1, 2, 2, 3, 3, 4, 8))
dt

# 唯一
unique(dt)

# 重覆列號並取資料
duplicated(dt)
dt[duplicated(dt)]

# 符合 dt$A 對多 dt$B 的重覆列並取資料
duplicated(dt, by = ""A"")
dt[duplicated(dt, by = ""A"")]

# 符合 dt$B 對多 dt$A 的重覆列並取資料
duplicated(dt, by = ""B"")
dt[duplicated(dt, by = ""B"")]※ 引述《ronald736 (明天會更好)》之銘言：: 我希望把1組散亂的資料，產生對應表格: 如下圖: ***這是我要的: https://imgur.com/a/C3yKEnY: 目前只會用table對應，但那不是我要的，table還要交叉看: 才知道對應，如下圖，這樣看也太累了: https://imgur.com/a/DeDqL0v: 想問有沒有辦法快速對應出表格的函數或寫法呢?--","R_Language"
"189","M.1540134493.A.149","ronald736","問題","請問怎麼把rawdata分組對應?? (資料清洗)",2018-10-21 23:08:11,NA,NA,"我希望把1組散亂的資料，產生對應表格

如下圖: ***這是我要的https://imgur.com/a/C3yKEnY目前只會用table對應，但那不是我要的，table還要交叉看

才知道對應，如下圖，這樣看也太累了https://imgur.com/a/DeDqL0v想問有沒有辦法快速對應出表格的函數或寫法呢?

--","R_Language"
"190","M.1539831837.A.F35","k97231","問題","notepad++編輯R script",2018-10-18 11:03:55,NA,NA,"不知道可不可以發在這裡

想問一下要如何將副檔名.r的檔案
在notepad++開啟時都可以自動以R語言上色
我目前用Notepad++開啟R script都會變成REBOL語言
就算停用REBOL語言後
開啟.R檔案還是變成綠油油的一片字

要設定那些東西才可以把.r 副檔名以notepad++開始時都預設R語言呢?

--
Sent from my Windows

--","R_Language"
"191","M.1539507544.A.EE8","ardodo","問題","同義字轉成標準字(中文文字處理)",2018-10-14 16:59:01,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

我現在有個客戶購物的字串資料，這些字串有許多同義字(例如貧果 and 蘋果)，我希望
能把同義字藉由我定義好的字典通通轉換成標準字。

[程式範例]:

# 購物資料
data <- data.frame(
  ""id"" = seq(1, 8),
  ""item"" = c(""貧果"", ""蘋果"", ""火龍果"", ""紅龍果"", ""番石榴"", ""珍珠拔"", ""馬拉巴栗
"", ""發財樹"")
)

# 定義的字典
dict <- data.frame(
  ""id"" = seq(1, 9),
  ""同義字"" = c(""貧果"", ""蘋果"", ""火龍果"", ""紅龍果"", ""芭樂"", ""番石榴"", ""珍珠拔
"", ""馬拉巴栗"", ""發財樹""),
  ""標準字"" = c(""蘋果"", ""蘋果"", ""火龍果"", ""火龍果"", ""芭樂"", ""芭樂"", ""芭樂"", ""發
財樹"", ""發財樹"")
)

[關鍵字]:

字串處理、文字探勘、中文轉換


--","R_Language"
"192","M.1539230563.A.966","TreeMan","問題","Re: 利用R下載外匯資料",2018-10-11 12:02:40,NA,NA,"1. data_id_all: 指標代碼做成的字串
2. d1: 起始搜尋日期
3. d2: 當前日期
4. RKey: 你的Rkey

library(httr)
for(data_id in data_id_all){
        file_name <- paste0(data_id, "".csv"")
        d1 <- ""2005-01-01""
        d2 <- as.character(Sys.Date())
        url <- paste0(""https://stock-ai.com/ddl?s="",data_id, ""&r=RKey&d1="",
d1, ""&d2="", d2)
        GET(url, write_disk(file_name, overwrite=TRUE))
}

這樣應該會把更新到最新日期的檔案，存到你要的資料夾
我想到比較自動化的方式...

--","R_Language"
"193","M.1539186267.A.960","ericchin0404","問題","利用R下載外匯資料",2018-10-10 23:44:23,NA,NA,"因為研究需要 我需要下載60個國家的外匯歷史資料
我找到一個stock-ai的網站https://stock-ai.com只要申請帳號登入後就可以利用改網址的方式下載資料

詳細方式如下面這個網站https://blog.stock-ai.com/archives/169照著它上面的方法改網址 並貼在網址搜尋欄搜尋確實可以下載資料

但是我的資料量實在有點大
所以希望能用R下載 而不是手動下載
上面那個網站也說可以把網址貼到R去下載
但是我知道一定不是直接貼網址到console
然後執行就能下載的吧

想請問是否有人知道類似這種以網址下載資料的方式在R上要怎麼操作？程式要怎麼打呢
？

Ps若有人知道可以下載大量且完整的外匯資料的方法 也拜託提供給我 不管是網站下載或
用程式執行下載都行 我找到一堆 不是國家數太少就是資料不完整有缺失值

--","R_Language"
"194","M.1538930158.A.B7B","AmigoSafin","問題","geometric distribution驗證weak large n",2018-10-08 00:35:54,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好 (以下數學符號以R markdown code表示 或許方便版友有興趣查閱）

已知 1/n \sum_{i=1}^n Xi^2 ---> E[X^2]  when n--> \infty

Xi 是一個Bernoulli 分配 成功機率為theta 此處我設定p=theta=1/4

題目請我們運用R來對這個Bernoulli 分配做computational demonstration

來驗證這個大數法則 大約是如此 如果我的解讀的正確的

我的code如下  我把上課資料的Poisson試圖改為rbinom

而且原來的code是看1/n \sum_{i=1}^n X_i 與E[X]之間的距離

現在我要求的是 1/n \sum X_i^2 與 E[X_i^2]之間的距離

所以我修改了code 但顯然  我修改得有誤

我們已被提醒要先求出E[X^2]

我求出 E[X^2] = V[X]+E[X]^2=(p-2)(p-1)/p^2

就把上述這值與code中的mu做調換



[程式範例]:

m <- 100

epsilon <- 0.01

#vn <- c(100, 500, 1600, 3200, 6400, 9600, 18000, 25600, 54000, 108000,
256000, 819200, 1000000)

vn <- c(100, 500, 1600, 3200, 6400, 9600, 18000, 25600, 54000, 108000,
256000, 819200)

nn     <- length(vn)
p.good <- numeric(nn)
p <- 1/4
mu     <- (p-2)*(p-1)/p^2

#mu     <- lambda <- 3

?rbinom

for(j in 1:nn)
{
  n    <- vn[j]
  XX   <- matrix(rbinom(n*m, size=1, p),ncol=n)
  #XX   <- matrix(rnorm(n*m,mean=9,sd=2),ncol=n)
  Xbar <- apply(XX,1,XX^2)
  good <- which(abs(Xbar-mu)<epsilon)
  p.good[j] <- length(good)/m
}

windows()
plot(vn, p.good, type='b', xlab='n', ylab='Prob[|Xbar-mu|<epsilon]')



###########################################################################



以下是原來的程式碼

我是初學者 只能先從改別人的程式碼開始.


#  Computational demonstration of the LLN (Law of Large Numbers
#      This first demonstration uses the normal distribution
#       However the LLN applies to all possible distrbutions
#

   m <- 100
   epsilon <- 0.01
   #vn <- c(100, 500, 1600, 3200, 6400, 9600, 18000, 25600, 54000, 108000,
256000, 819200, 1000000)
   vn <- c(100, 500, 1600, 3200, 6400, 9600, 18000, 25600, 54000, 108000,
256000, 819200)
   nn     <- length(vn)
   p.good <- numeric(nn)
   mu     <- 9
   mu     <- lambda <- 3

   for(j in 1:nn)
   {
      n    <- vn[j]
      XX   <- matrix(rpois(n*m,mu),ncol=n)
      #XX   <- matrix(rnorm(n*m,mean=9,sd=2),ncol=n)
      Xbar <- apply(XX,1,mean)
      good <- which(abs(Xbar-mu)<epsilon)
      p.good[j] <- length(good)/m
   }

   windows()
   plot(vn, p.good, type='b', xlab='n', ylab='Prob[|Xbar-mu|<epsilon]')


   windows()
   par(mfrow=c(2,2))





[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:

Geometric distribution選擇性，也許未來有用--

--","R_Language"
"195","M.1538848564.A.315","AmigoSafin","問題","用curve command 將一個pdf畫圖",2018-10-07 01:56:01,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我有一個pdf:f(v) v為continuous random variable [-1/2. 1/2]

遇到題目請我將此函數畫圖 並且graphially determine 他的期望值

我在網上找到簡單的curve指令

但似乎因為我的function有點複雜

不確定是否我寫進R的方式不對

所以出現了錯誤:Unexpected symbol


[程式範例]:

eq <-function(v){2/(pi*sqrt((1-2v)*(1+2v))}
curve(eq, from=-1/2, to=1/2, , xlab=""v"", ylab=""f(v)"", type = ""1"")


我之前還有先做

v <-seq(-1/2, 1/2, length = n)

但也沒用

我的函數就是

f_v(v): 2/ pi* sqrt[(1-2v)(1+sv)]

[-1/2. 1/2]

不知道大家有沒有任何建議？

感謝大家∼



[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"196","M.1538800642.A.C27","HumuHumu","問題","Re: 如何將function放入迴圈? (求救)",2018-10-06 12:37:19,NA,NA,"※ 引述《ronald736 (明天會更好)》之銘言：: 我想將資料每筆按照規則分群，資料如下圖:: https://imgur.com/a/wXNRKJ6: 圖中想把""平均成績""依照P50、P70這2個欄位分成3類: 平均成績 < P50 為第3類: 平均成績 >= P50 且 <P75 為第2類: 平均成績 >=P75  為第1類: 我打算將function放入迴圈 (因為是要每1筆都依照欄位分群): 程式碼如下，能否幫我看看是寫法上錯誤嗎? 還是那邊的觀念不對?: classp <- NULL: for (i in 1:dim(pdata)[1])   {:   cf <- function(pdata$平均成績[i]):   {:     if (pdata$平均成績[i]<pdata$P50[i]) {:       classp[i] = 3:     } else if (pdata$平均成績[i]>=pdata$P50[i] & pdata$平均成績: [i]<pdata$P75[i]) {:       classp[i] = 2:     } else {:       classp[i] = 1:     }:     return(classp[i]):   }:   classp[i] <- cf(pdata$平均成績[i]): }: classp: 程式碼與錯誤圖:: 程式碼 : https://imgur.com/a/Sw9Mrmb: 錯誤 : https://imgur.com/a/3DeYkYJfunction放在迴圈裡其實會很吃效能，因為每一圈都要重新建一次function

而且你function的用法盡量不要用到Global的變數，只要讓他回傳你要的類別就好

你的function的目的應該是，丟進去平均分數、P50和P70，它就會告訴我這個學生

是第幾類，然後你再用迴圈把這個function告訴你的類別丟到你的classp裡面

cf <- function(score,P50,P75){
  if (score<P50) {
    return(3)
  } else if (score>=P50 & score<P75) {
    return(2)
  } else {
    return(1)
  }
}


classp <- NULL
for (i in 1:dim(pdata)[1])   {
  classp[i] <- cf(score=pdata$平均成績[i],P50 = pdata$P50[i],P75 =
                    pdata$P75[i])
}
classphttps://pastebin.com/J1wkCviS--","R_Language"
"197","M.1538795480.A.C1E","ronald736","問題","如何將function放入迴圈? (求救)",2018-10-06 11:11:17,NA,NA,"我想將資料每筆按照規則分群，資料如下圖:https://imgur.com/a/wXNRKJ6圖中想把""平均成績""依照P50、P70這2個欄位分成3類

平均成績 < P50 為第3類

平均成績 >= P50 且 <P75 為第2類

平均成績 >=P75  為第1類

我打算將function放入迴圈 (因為是要每1筆都依照欄位分群)

程式碼如下，能否幫我看看是寫法上錯誤嗎? 還是那邊的觀念不對?

classp <- NULL
for (i in 1:dim(pdata)[1])   {
  cf <- function(pdata$平均成績[i])
  {
    if (pdata$平均成績[i]<pdata$P50[i]) {
      classp[i] = 3
    } else if (pdata$平均成績[i]>=pdata$P50[i] & pdata$平均成績
[i]<pdata$P75[i]) {
      classp[i] = 2
    } else {
      classp[i] = 1
    }
    return(classp[i])
  }
  classp[i] <- cf(pdata$平均成績[i])
}
classp

程式碼與錯誤圖:

程式碼 :https://imgur.com/a/Sw9Mrmb錯誤 :https://imgur.com/a/3DeYkYJ--","R_Language"
"198","M.1538714590.A.A96","k97231","問題","利用迴圈畫圖 ggplot2",2018-10-05 12:43:07,NA,NA,"我有好幾個data frame
這些data frame 都有一些名字相同的column
ex
df1
v1 v2 v3 v5 ...
0   1  2   5
..   ..  ..    ..

df2
v1 v2 v4 v6 ...
0   1  2   5
..   ..  ..    ..
而我想根據這些相同的column畫圖 不同column一張
所以我先用 找到有交集的column
然後將這些焦急帶入迴圈中

a=intersect(colnames(df1),colnames(df2))
$a
>""v1"",""v2""
for ( col in a) {
g=ggplot()
g+geom_density(data=df1,aes(x=a)+
    geom_density(data=df2,aes(x=a)
}

但每次執行此迴圈都不會出現任何圖

但若事先指定a=""v1""時
不執行迴圈時
並只執行畫圖的指令
就可以畫出正確的圖

想問如果要用迴圈畫圖要怎麼修改迴圈呢??


--
Sent from my Windows

--","R_Language"
"199","M.1538562348.A.15E","cindy6519","問題","download.file回傳error",2018-10-03 18:25:42,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手

[問題敘述]:

download.file(method=""curl"")執行後出現error:'curl' call had nonzero exit status
但不知道為何出現error，還請各位指點，謝謝~

[程式範例]:

>data.url <- ""https://quality.data.gov.tw/dq_download_csv.php?nid=91734&md5_url=ef2c4d2409b03c7a6a1ca4452bb96832""> data.file <- C:\\r\\dataset.cv> download.file(url = data.url, destfile = data.file, method = ""curl"")[環境敘述]:

R console

[關鍵字]:

error,download.file,curl

--","R_Language"
"200","M.1538538882.A.27E","AmigoSafin","問題","已有lm model, 求兩個固定差距數的平均值",2018-10-03 11:54:39,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我有兩個變數 mileage and weight

這兩個變數我各有9個observations

我用R建立了一個lm model


現在遇到題目詢問 有兩個數差距5 tons (weight)

那我要如何用R計算出這兩者average milege的差距的估計值呢？


謝謝大家∼




[關鍵字]:

Linear Regression選擇性，也許未來有用--

--","R_Language"
"201","M.1538110834.A.9AE","frojet","問題","如何畫出類似合鬚圖與點圖結合的圖?",2018-09-28 13:00:29,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在跑一份近2萬筆的資料，其中一個分析項目為
不同疾病之醫師開立用藥數量分布
之前慣用SPSS軟體，很輕鬆畫出以下的統計圖https://i.imgur.com/0oJ2Zbb.png但現在學R，使用ggplot2套件，卻怎樣也無法炮製
變成以下的圖形https://i.imgur.com/z3euYk0.png只能請求各位大神給點迷津

[程式範例]:https://pastebin.com/4JWSrdN7--
不去評價別人，是一種修養。
不活在別人評價下，是一種修行。

--","R_Language"
"202","M.1537455663.A.271","a22735557","問題","R 指令消失剩下紅點",2018-09-20 23:01:01,NA,NA,"https://i.imgur.com/YmDBZhF.jpg如圖

懇求求救

願意給與賞金....

--","R_Language"
"203","M.1537288010.A.949","celestialgod","分享","generalized畫圖函數",2018-09-19 00:26:45,NA,NA,"[關鍵字]: ggplot2, generalized plotting function

[出處]:https://goo.gl/RFhBBP[重點摘要]:

最近，遇上一些需要把畫圖函數做到帶入各種變數都能使用

發現不少人在撰寫這種函數的時候，都會遇到一些問題

於是，就有了這篇，我這篇從ggplot2出發，來寫一個廣義的畫圖函數

歡迎各位指教，謝謝

裡面用了不少data.table的語法...

對於不熟data.table的人，可能有點吃力

若有問題，儘管留言，我都會回答

--","R_Language"
"204","M.1537240155.A.A0C","AmigoSafin","問題","用R code算兩條lmintercept差距百分比",2018-09-18 11:09:11,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我想問如果我建立兩條SLR (simple linear regression)

lm.xy  <- lm(y ~ x)

lm.xyw <- lm(y ~ x, weights=i)

如果我要計算兩條regression line之間 beta 0 hat 的距離

我可以用 summary(lm.xy) summary(lm.xyw)方式求出兩個intercept estimate

然後用計算機算差距的百分比

但如果用R code

要怎麼算呢？

還請各位大大不吝給小魯指導

謝謝大家∼

感恩






[環境敘述]:

R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6



[關鍵字]:

SLR選擇性，也許未來有用--

--","R_Language"
"205","M.1537062636.A.C45","milkdicky","問題","將文章以字為單位進行切分",2018-09-16 09:50:26,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
我想用R計算文本的字頻。

大多數的中文文本處理好像都會包含斷詞，
所以都是斷詞後計算詞頻。

有沒有可以直接取得字頻資訊的函數或套件？
或將文本先將字一個一個斷開的函數？

--觀自在菩薩。行深般若波羅蜜多時。照見五蘊皆空。度一切苦厄。舍利子。色不異空。空不異色。色即是空。空即是色。受想行識。亦復如是。舍利子。是諸法空相。不生不滅。不垢不淨。不增不減。是故空中無色。無受想行識。無眼耳鼻舌身意。無色聲香味觸法。無眼界乃至無意識界。無無明。亦無無明盡。乃至無老死。亦無老死盡。無苦集滅道。無智亦無得。已無所得故。菩提薩埵。依般若波羅蜜多故。心無罣礙。無罣礙故。無有恐怖。遠離顛倒夢想。究竟涅槃。三世諸佛。依般若波羅蜜多故。得阿耨多羅三藐三菩提。故--","R_Language"
"206","M.1537055950.A.AD8","AmigoSafin","問題","用R plot all the possibilities",2018-09-16 07:59:07,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好

我現在遇到一個問題 有４個藍色玩具 B1 B2 B3 B4
另有6個紅色玩具 R1 R2 ... R6
現在要看隨機抽出三個玩具 顏色相同的機率
我的做法是 (2C1*4C3 + 2C1*6C3)/10C3 不知道這樣對嗎？

然後現在我遇到一個問題是
write a piece of R code to empirically compute the prob. of the three toys
in the same color, let n be the number of random samples in the bag.

我用的R code如下 當n=50,000

   n <- 50000
   f <- 0
   for(i in 1:n)
   f <- f + ifelse((sample(3)[1]==sample(3)[1]),1,0)
   print(f/n)

但現在問題要我 Plot your estimated probabilities as a function of n (log scale again here,
please) 根據 n=50,100,200,.....,50000 用R繪製出機率的圖表
我在想這是不是要先把取出三種同顏色的玩具的C.D.F.先求出來
再用plot C.D.F的方式去繪製呢？
想了兩天都還是沒頭緒
老師有給蒙地卡羅模擬的參考資料
但我覺得這好像不是
另外還有buffon needle probability的參考資料
但我都無法refer 這些資料 又覺得並沒有我想的複雜
但還是目前無法動彈

不知道有沒有大大願意給小魯一點指點
感謝不盡∼

也希望大家颱風天都一切平安




[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"207","M.1536944439.A.80A","seeboobs","問題","RcmdrMisc could not be loaded",2018-09-15 01:00:36,NA,NA,"[問題敘述]:
我在安裝完Rcmdr後
library(Rcmdr)
出現下面問題

[程式範例]:> library(Rcmdr)Loading required package: RcmdrMisc
Error: package or namespace load failed for ‘RcmdrMisc’ in loadNamespace(i,
c(lib.loc, .libPaths()), versionCheck = vI[[i]]):
 there is no package called ‘digest’
錯誤: package ‘RcmdrMisc’ could not be loaded



--","R_Language"
"208","M.1536891130.A.52B","ericchin0404","問題","建table如何調換行列的排列順序",2018-09-14 10:12:07,NA,NA,"當我建一個table 如下圖所示https://i.imgur.com/ydmwLY3.jpg但是表中行跟列的排列順序是按照a b c
如果我想要讓行列的排列順序變成 b c a或c a b
請問應該怎麼做？

我是為了計算信用評等轉移矩陣用的
所以希望排列順序能夠按照AAA,AA,A,...,D的順序排列
但是直接用table建出來的矩陣順序卻不是如此

btw,問一下除了這方法跟markovchain的套件，
還有沒有其他計算轉移矩陣的方式

--","R_Language"
"209","M.1536814069.A.98D","pig98520","問題","windows工作自動排程",2018-09-13 12:47:45,NA,NA,"各位板大好,近期在使用R script排程,

出現下面的問題:

Error in .External2(C_loadhistory, file) :
  'loadhistory' can only be used in Rgui and Rterm
Calls: loadhistory

估狗了一下沒有找到適合的解答,

想問一下該怎麼解決這個問題QQ

--","R_Language"
"210","M.1536732792.A.B68","sop317","問題","跑模擬疑惑",2018-09-12 14:13:07,NA,NA,"各位大大好，

近期survey一篇論文剛好有附完整Rcode

其有關衰退模型預測https://www.tandfonline.com/doi/suppl/10.1080/00401706.2013.805661?scroll=top備有多個子檔案， 請問該如何執行主程式並且跑模擬?

感謝

檢附

platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status
major          3
minor          5.1
year           2018
month          07
day            02
svn rev        74947
language       R
version.string R version 3.5.1 (2018-07-02)
nickname       Feather Spray
------------------------------------
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] splines   stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] fda_2.4.8     Matrix_1.2-14

loaded via a namespace (and not attached):
[1] compiler_3.5.1  tools_3.5.1     grid_3.5.1      lattice_0.20-35



---------------> version_
platform       x86_64-w64-mingw32
arch           x86_64
os             mingw32
system         x86_64, mingw32
status
major          3
minor          4.3
year           2017
month          11
day            30
svn rev        73796
language       R
version.string R version 3.4.3 (2017-11-30)
nickname       Kite-Eating Tree> sessionInfo()R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C                                 LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.3 tools_3.4.3



照 HumuHumu大大說法 應該是先手動完套件再

install.packages(""MSBVAR"" ,repos = ""https://cran.r-project.org/src/contrib/Archive/MSBVAR/MSBVAR_0.9-3.tar.gz"")應該就可以了? 為什麼還是有以下錯誤訊息 ??

Warning in install.packages :
  unable to access index for repositoryhttps://cran.r-project.org/src/contrib/Archive/MSBVAR/MSBVAR_0.9-3.tar.gz/src/contrib:cannot open URL 'https://cran.r-project.org/src/contrib/Archive/MSBVAR/MSBVAR_0.9-3.tar.gz/src/contrib/PACKAGES'Warning in install.packages :
  package ‘MSBVAR’ is not available (for R version 3.4.3)
Warning in install.packages :
  unable to access index for repositoryhttps://cran.r-project.org/src/contrib/Archive/MSBVAR/MSBVAR_0.9-3.tar.gz/bin/windows/contrib/3.4:cannot open URL 'https://cran.r-project.org/src/contrib/Archive/MSBVAR/MSBVAR_0.9-3.tar.gz/bin/windows/contrib/3.4/PACKAGES'-----還好另外從GITHUB CLONE就搞定了https://github.com/cran/MSBVAR--","R_Language"
"211","M.1536476114.A.498","reebok2009","問題","確認一個觀念",2018-09-09 14:55:12,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。
        建議先到http://tinyurl.com/mnerchs搜尋本板舊文。

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我觀念有點不太確定
我目前工作會用到Ｒ程式 但最近要使用湯普森抽樣
我想確認一下觀念
他使用的方法 是利用已經抽樣的資料

模擬常態分配然後自己跑出隨機值比較之後

在實際去做真正的抽樣嗎？

以上

新手 如果有違反版規 請提醒我抱歉∼！

--","R_Language"
"212","M.1536219052.A.2AF","wheado","問題","rvest與POST爬蟲問題卡關(廉價航空)",2018-09-06 15:30:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想對抓取某廉價航空網站的特定資料，

目前對網站的已知的大概像這張圖，https://imgur.com/a/POOpAI6POST包含From Data裡面那些訊息，

然後按下收尋

跑出像是下面這張圖的網頁https://imgur.com/a/X2uz0Ep這樣就可以用 Xpath 去找到裡面的內容

如果用 html_session 可以怎麼做？

如果用一個 POST 可以做到嗎？

要怎麼去分析這種""需要輸入訊息才能找到想要的資料""這類的網路問題

[程式碼]:https://ideone.com/xXk4qS[環境敘述]:
Win10 + R 64位元

[關鍵字]:
rvest post httr xml2

[其他]:
RSelenium 套件似乎是掛了
所以我想用html_session來解決


--","R_Language"
"213","M.1536153830.A.BA9","b03701245","問題","要怎麼在console中秀出完整數據列",2018-09-05 21:23:48,NA,NA,"想請問大家一個很基本的問題QQ

如果有一筆list的長度很長(例如我想要看的資料有225列)

因此無法完整地呈現在console裡

那麼請問要如何讓這225列都秀在console裡？(我不想要使用View()開成另一個視窗)

這是可以辦到的嗎?

感謝各位


--","R_Language"
"214","M.1535984152.A.791","ntpuisbest","問題","當X是類別變數時的類神經網路",2018-09-03 22:15:49,NA,NA,"如題

身為類神經網路的初學者

看了網路上的範例

有y是類別的，也有y是連續的

可是請問當x是類別的

該怎麼處理呢

有沒有推薦的套件

謝謝各位

--","R_Language"
"215","M.1535620329.A.7DE","Abieskawa",NA,"plot修改參數",2018-08-30 17:12:06,NA,NA,"各位板上高手你們好，
小弟我最近做變異數分析三大檢定時遇到一個問題：跑plot時結果的圖都擠在一起了QQ，
我試圖用axis外加結果都沒反應只要我Hit<return>....(按enter，只會跑出剩下兩個圖
，共五個圖）
附圖是我的統計圖跟程式碼，使用R studio1.1.423
R3.5.1電腦是Machttps://i.imgur.com/iIeexNU.jpghttps://i.imgur.com/d20A5l0.jpg--","R_Language"
"216","M.1535589815.A.643","andrew43","問題","Re: ` 和 ' 的不同",2018-08-30 08:43:32,NA,NA,"※ 引述《bruce89 (啊猛)》之銘言：: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 目前在練習R，練習到有一題不會寫照著網路上別人分享的結果輸入也失敗。: 比對了很久發現竟然是符號的問題，發現`(鍵盤~鍵)和'會出現不一樣的結果。: 前面基礎的單元好像也沒特別提到這個符號(`)，想請問這個符號為何在此會有這樣的: 差異? 謝謝:: [程式範例]:: 請把以下不需要的部份刪除:: daily %>% filter('Parameter Name'==""Sulfate PM2.5 LC"")%>%:         group_by('Site Num', 'County Code', 'State Code')%>%:         summarise(ave=mean('Arithmetic Mean'))%>%:         arrange(desc(ave))這一句明顯是你不希望發生的情況。
例如
'Parameter Name'==""Sulfate PM2.5 LC"" 就和 ""a"" == ""b"" 一樣僅得boolean值而已。
mean('Arithmetic Mean') 其實和 mean(""a"") 是一樣沒有意義的。
group_by('Site Num') 應該和 group_by(`Site Num`) 是一致的。: daily %>% filter(`Parameter Name` == ""Sulfate PM2.5 LC"") %>%:         group_by(`Site Num`,`County Code`,`State Code`) %>%:         summarise(avg = mean(`Arithmetic Mean`)) %>%:         arrange(desc(avg))相對地，這應該是你希望的結果。

:: [環境敘述]::: R version 3.5.0 (2018-04-23): other attached packages:: [1] bindrcpp_0.2.2 tidyr_0.8.1    dplyr_0.7.6    magrittr_1.5   readr_1.1.1:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"217","M.1535546059.A.462","bruce89","問題","` 和 ' 的不同",2018-08-29 20:34:16,NA,NA,"[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:目前在練習R，練習到有一題不會寫照著網路上別人分享的結果輸入也失敗。比對了很久發現竟然是符號的問題，發現`(鍵盤~鍵)和'會出現不一樣的結果。前面基礎的單元好像也沒特別提到這個符號(`)，想請問這個符號為何在此會有這樣的差異? 謝謝[程式範例]:請把以下不需要的部份刪除daily %>% filter('Parameter Name'==""Sulfate PM2.5 LC"")%>%group_by('Site Num', 'County Code', 'State Code')%>%summarise(ave=mean('Arithmetic Mean'))%>%arrange(desc(ave))daily %>% filter(`Parameter Name` == ""Sulfate PM2.5 LC"") %>%group_by(`Site Num`,`County Code`,`State Code`) %>%summarise(avg = mean(`Arithmetic Mean`)) %>%arrange(desc(avg))[環境敘述]:R version 3.5.0 (2018-04-23)other attached packages:[1] bindrcpp_0.2.2 tidyr_0.8.1    dplyr_0.7.6    magrittr_1.5   readr_1.1.1[關鍵字]:選擇性，也許未來有用--","R_Language"
"218","M.1535362149.A.423","ppp1987","問題","reticulate跑迴圈問題",2018-08-27 17:29:06,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

大家好

現在我在使用reticulate這個套件

但在使用迴圈時切換python和R時會無法順利執行

想請問有沒有人研究過如何用這個套件跑迴圈

感謝


[程式範例]:

for(i in 1:5){

  repl_python()
  print(""hello world"")
  exit
  print(i)
}

[環境敘述]:
R version 3.4.2 (2017-09-28)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.5

reticulate_1.9

[關鍵字]:

reticulate

--","R_Language"
"219","M.1535212338.A.D9B","phenixsun","問題","pathview 圖片顯示在Flexdahboard上",2018-08-25 23:52:15,NA,NA,"[問題類型]:

程式諮詢(我想用 R 做某件事情，但是我不知道要怎麼用 R 寫出來)

[軟體熟悉度]:

新手(才剛開始學用 R)

[問題敘述]:

各位前輩!
我想將 pathview 這個 Package 畫出來的圖放在 Flexdashboard 上。
但不想是把圖放在網路或雲端上然後才用網址的方式貼進來，
想直接在生成 Flaxdashborad 的時候，自動抓取圖檔然後顯現。

[程式範例]:

pathview(gene.data = gene_matrix,
         pathway.id = ""04070"",
         species = ""hsa"")

這支 Function 跑完後會在工作目錄中產生一個 has04070.png 的圖檔。
請各位大大指導我!!!!

--","R_Language"
"220","M.1534823700.A.04D","disney82231","問題","同一個dataframe列合併",2018-08-21 11:54:57,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一個dataframe，裡面有:購買產品,客戶ID,日期，這些變數，想根據日期和客戶ID

合併相同客戶ID和相同日期的列(不知道要叫合併還是堆疊)
[程式範例]:
例如

購買產品 客戶ID  日期

筆電      1       2018/8/21
手機      1       2018/8/21
冷氣      1       2018/8/22

合併完後變成


購買產品  客戶ID  日期

筆電,手機  1      2018/8/21
冷氣       1      2018/8/22


因為merger要用兩筆資料，但是我是同一筆dataframe自己合併而已。

謝謝
[環境敘述]:

[關鍵字]:

同一筆資料堆疊 合併

--","R_Language"
"221","M.1534777722.A.128","AmigoSafin","問題","無法安裝""XLConnect""但已有Java",2018-08-20 23:08:38,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好
我想請教大家 不知道有沒有版友也有安裝""XLConnect""這個Package呢？
我的系統是

R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK:
/Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.1 tools_3.5.1    yaml_2.2.0

當我執行 install.package(""XLConnect"")時

R顯示我已經有安裝Java了

但當我用library(""XLConnect"")時

就遇到了錯誤訊息如下：

還請有經驗過這種情形的大大不吝提供建議

感謝不盡！

[程式範例]:> install.packages(""XLConnect"")trying URL
'https://cran.rstudio.com/bin/macosx/el-capitan/contrib/3.5/XLConnect_0.2-15.tgz'Content type 'application/x-gzip' length 9796724 bytes (9.3 MB)
==================================================
downloaded 9.3 MB


The downloaded binary packages are in

/var/folders/v3/4tfsblxs1m314g6pl2bt4t7r0000gn/T//RtmpXdFPSN/downloaded_packages> library(""XLConnect"")Loading required package: XLConnectJars
Error: package or namespace load failed for ‘XLConnectJars’:
 .onLoad failed in loadNamespace() for 'rJava', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object
'/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/libs
/rJava.so':

dlopen(/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/
libs/rJava.so,
6): Library not loaded:
/Library/Java/JavaVirtualMachines/jdk-9.jdk/Contents/Home/lib/server/libjvm.
dylib
  Referenced from:
/Library/Frameworks/R.framework/Versions/3.5/Resources/library/rJava/
libs/rJava.so
  Reason: image not found
Error: package ‘XLConnectJars’ could not be loaded



[關鍵字]:

Java選擇性，也許未來有用--

--","R_Language"
"222","M.1534753709.A.04D","al22545673an","問題","無法安裝rattle至Mac osx系統上",2018-08-20 16:28:26,NA,NA,"各位前輩好，小弟因課堂需求必須使用rattle，但礙於電腦系統是mac osx，在安裝上遇到許多問題，還請各位前輩不吝賜教。

電腦本身已安裝XQuartz, RGtk2和GTK_2.24.17 -X11
R-studio 以及R 3.5.1

我的步驟是：
先打開r-studio
Library(RGtk2)
之後系統會要我在安裝一次GTK+
安裝好後再重新
Library (RGtk2)

Install(“rattle”)
library(rattle)
Rattle()
會出現
Error in .C(“R_gtkInit, length(args, success=logical(1),
:
“R_gtkInit” not available for .C() for package “RGtk2”



上網爬了很多文章，試了許多方法，也將程式重載後還是無法順利運行。以往沒有使用過R的經驗，身邊的朋友也都是windows系統很順利就安裝完成了，希望各位前輩有這方面的經驗，或是知道我哪裡出問題的可以幫我做解答一下，非常感謝！
-----
Sent from JPTT on my iPhone

--","R_Language"
"223","M.1534683299.A.B0E","HumuHumu","問題","上傳Package到CRAN",2018-08-19 20:54:57,NA,NA,"我最近把自己常用的一些功能寫成套件 想要發到CRAN上

我的function是用C++寫的 也用到了某個C++的library

可是這個library只有windows上有 Linux沒有

我上傳到CRAN的時候 CRAN系統在check的時候 在Windows平台上完全沒有Error和Warning

可是系統用Debian check的時候就會出現Compile Error的問題 我很確定是因為Linux沒有這個C++ library

有想過如果是在Linux上執行的話 就改用reticulate call python的方式來做 這樣就可以不用到C++

但是我已經寫好了很多cpp檔 而package在安裝時就會compile這些cpp檔 根本無法根據不同的platform來決定要不要compile這些cpp檔

請問我該如何克服這樣的問題

Thanks in advanced!

--","R_Language"
"224","M.1534270143.A.5DA","yolanda1203",NA,"8/30 AI語言科技與語言學應用沙龍 ＠台大",2018-08-15 02:09:00,NA,NA,"https://imgur.com/a/oGbdnJO[就業不分文理組！你想像不到的職業探索媒合會—AI科技與語言學應用的結合]

報名開始囉 >>http://lope.linguistics.ntu.edu.tw/ling2tech剛畢業的你，是否厭倦了就業博覽會中「文理分科」的歧視？

在這個人人學AI、個個寫程式的時代，只會寫程式已經過時，「跨領域」的菁英才是真正的搶手貨！


由台大語言學研究所、台大國際產學聯盟以及台大共教中心CS+X共同舉辦，「AI科技與語言學應用沙龍暨就業實習媒合會」為台灣首場結合了業界與學界、科技與人文、語言學與電腦科學的跨領域交流盛會。

如果你對於語言科技和自然語言處理有興趣、想了解語言科技現今的發展與未來可能的應用，歡迎前來瞭解就業市場的運作機制，以及台灣NLP新創團隊如何面對國內外市場的競爭。

如果你精通於AI語言科技、機器學習、應用語言學，或將從事NLP相關工作視為一生的志業，跨域就業媒合會是你最好的機會！


本活動盛大邀請華碩科技創新實驗室技術長龐台銘、台大 AI 中心主任陳信希以及科技部優秀年輕學者陳縕儂與 Taiwan AILabs 雅婷語音計畫負責人於會中談語言科技的趨勢，和對於語言學跨域人才培育的建言。

此外，亦請到數間國內外AI和NLP 頗具規模的新創公司和業界頂尖精英，預備與潛力人才進行深度交流。

最重要的是，本活動提供眾多熱門職缺的媒合機會，鎖定頂尖跨域人才，在這個多元、多彩的舞台上潑灑墨水，創造新興世代。讓人才找得到舞台，舞台找得到人才！


學習即是為了應用，歡迎妳／你一起成為國內外NLP和AI相關產業的一員！

讓我們從語言科技的應用出發，一同勾勒語言科技的未來藍圖、創造新的跨域多元世界！


活動資訊：
日期：107年8月30日(四)
時間：13:10 - 17:30
地點：國立臺灣大學應用力學館 國際會議廳
主辦單位：臺大語言學研究所
協辦單位：臺大國際產學聯盟、臺大共教中心CS+X

詳細資訊及報名方式，請見活動網站：http://lope.linguistics.ntu.edu.tw/ling2tech--","R_Language"
"225","M.1534235177.A.081","ChenEye","問題","developer 更新package的問題",2018-08-14 16:26:14,NA,NA,"[軟體熟悉度]:
使用者(已經有用R)

[問題敘述]:

各位版友好，小弟lab之前有大大大學長寫了一個package放到CRAN上，因為

最近發現有一些bug需要修改，但大大大學長已經畢業了，因此小弟負責做這件事。

修改code的部分滿容易的，只有改幾行程式而已。但更新版本到CRAN上讓我頭非常痛。

我參考了Hadley Wickham網路上的R package教學，理解到""更新package""基本上就是把

舊版的package code改完後再上傳到CRAN(跟發布新的package有87%像)。

我的主要問題是，從Hadley Wickham的書看來，我必須要加入cran-comments.md (放

submission comments) 和 NEWS.md (放更新資訊)。

1.cran-comments.md的問題: 裡面有提到要把他的名字放進.Rbuildignore，但這樣一來

 packge在形成壓縮檔時，壓縮檔裡就不會有這個檔，這樣上傳壓縮檔時檢查的人不

 就看不到commemts了?還是說我要把cran-comments.md手動放進已經打包好的package

壓縮檔裡?感覺這樣的作法又很奇怪，先exclude再include。還是說，上傳時有另一個

地方可以讓你單獨上傳md檔?

2.NEWS.md的問題: 書裡面沒有提到NEWS.md不要放進.Rbuildignore中，所以我猜是不

要放?

不好意思因為第一次碰更新package，如果問了笨問題還請見諒，先謝謝大家的回答了!

--","R_Language"
"226","M.1534085006.A.B47","LIAR","問題","測試資料太乾淨反而找不出解？",2018-08-12 22:43:19,NA,NA,"我最近有一堆壓力的資料要分析，因為推測模式是 y ~ a/(x+b)，所以想用nls解。
我先用假的資料> x=seq(-4,-1.5,0.1)> y=-1.58/(x-3.78)> plot(x,y)> m<-nls(y~a/(x+b))Error in nls(y ~ a/(x + b)) : number of iterations exceeded maximum of 50In addition: Warning message:In nls(y ~ a/(x + b)) : No starting values specified for some parameters.Initializing ‘a’, ‘b’ to '1.'.Consider specifying 'start' or using a selfStart model這樣會有錯誤。
但是如果我把y加上一些noise> y=-1.58/(x-3.78)+rnorm(length(x),0,0.01)> m<-nls(y~a/(x+b))Warning message:In nls(y ~ a/(x + b)) : No starting values specified for some parameters.Initializing ‘a’, ‘b’ to '1.'.Consider specifying 'start' or using a selfStart model> mNonlinear regression modelmodel: y ~ a/(x + b)data: parent.frame()a      b-1.698 -4.339residual sum-of-squares: 0.001832Number of iterations to convergence: 9Achieved convergence tolerance: 3.167e-06>
這樣就可以解出a,b(理論值是-1.58,-3.78)
我想請問為何太乾淨的資料反而會跑不出來？

不加rnorm的y我甚至有試過直接帶入正確答案當起始值：
start = list(a=-1.58,b=-3.78)，但是還是一樣有number of iterations exceeded maximum of 50請問測試資料太乾淨反而抓不出模型是正常的嗎？

--
起初，他們追殺共產主義者，我沒有說話，因為我不是共產主義者；
接著，他們追殺猶太人，我沒有說話，因為我不是猶太人；
後來，他們追殺工會成員，我沒有說話，因為我不是工會成員；
此後，他們追殺天主教徒，我沒有說話，因為我是新教教徒；
最後，他們奔我而來，卻再也沒有人站起來為我說話了。
《First They Came（他們首次來時）》，Martin Niemoller牧師（1892-1984）

--","R_Language"
"227","M.1533723314.A.E95","a6409tw","問題","用R爬蟲時SelectorGadget抓到的node有問題",2018-08-08 18:15:11,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
我想使用R爬蟲爬淘寶網的商品名稱，
但利用SelectorGadget所抓出來的節點似乎有點問題，
所以都爬不出任何東西Q


以下是我的程式碼

""https://s.taobao.com/search?q=&cps=yes&cat=2203&sort=sale-desc""%>%read_html() %>% html_nodes("".J_ClickStat"")%>% html_text()

結果都是顯示 character(0)
結果都是顯示 character(0)

但如果我改抓商品以外的東西像是

""https://s.taobao.com/search?q=&cps=yes&cat=2203&sort=sale-desc""%>%
read_html() %>% html_nodes(""a"")%>% html_text()

就可以成功!

我真的不知道問題出在哪，
拜託各位大大我該如何解決QQ

[環境敘述]:
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

--","R_Language"
"228","M.1533609012.A.679","poker0531","問題","Re: 依日期選別欄位的值",2018-08-07 10:30:07,NA,NA,"先謝謝大神的幫忙,
抱歉,是我沒說清楚

結算日的規定是每月第三個週三(如果放假則順延到下一個交易日)
我的資料是2011/1月的sample

也就是說,
假設2011/1/19為第三個週三並且正常交易
我想要篩選出的資料為

test<-rbind(filter(test, Date<=as.Date(""2011/1/19""),`交割年月`==""201101""),
            filter(test, Date>as.Date(""2011/1/19""),`交割年月`==""201102""))

謝謝您願意幫忙~※ 引述《egoweaver (Hiko)》之銘言：: 雖然「在這個日期之前和之後做[交割年月]的篩選」的描述看不懂是怎樣: 的操作，但是應該是類似這樣的狀況吧？: # 如果需要安裝 package 的話 uncomment: # install.packages(c(""lubridate"", ""timeDate"")): library(lubridate): library(timeDate): library(dplyr): # 指定要找出「每月第三個星期三」的時間段: start_date <- ""2007-09-01"": end_date <- ""2014-06-01"": # 載入原始檔: # 注意如果日期格式不是 ""YYYY-MM-DD"" 的話後面的部分要相應修改: test <- read.table(""test.txt"", header = TRUE, stringsAsFactors = FALSE): # 找出指定時間段的每月第三個週三: # 用 format() 把 timeDate 轉成 character: period <- timeSequence(from = start_date, to = end_date, by = ""month""): thirdwed <- format(timeNthNdayInMonth(period, nday = 3, nth = 3,:                                       format = ""%Y-%m-%d"")): # 只留下 Date 為每月第三個週三的 observation: test_fil <- filter(test, Date %in% thirdwed): # 依據交割年月做篩選: # 這邊看不懂原 po 想做什麼篩選...: result <- filter(test_fil, `交割年月` == 201101)--","R_Language"
"229","M.1533580248.A.F9A","AmigoSafin","問題","Twitter 存下的text檔案存檔後是亂碼",2018-08-07 02:30:44,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好

我引用了網路上的一個程式碼
去分析在美國地圖上25,000個談論Spotify的tweets的分佈位置
這個程式碼需要先設定Google API

我的程式碼如下
但奇怪的是
我使用save(x,file="".csv"")
or save(x, file=""...txt"")
or as.data.table(file="""")
存下來後的檔案打開都是亂碼

但我之前用search_tweets(q,n=, lan=""en"")存下的 csv檔案都正常
而這次的code也有設定是搜尋英文tweets
我在R裡面打開是正常的
但沒辦法看到所有的
於是上來請教大家
因為可能是我在哪一個時候（因為這個作業做了蠻多天
改了什麼設定
但我看sessioninfo()
似乎是正常？
不知道可有大大使用Ｒ做文字分析也有遇到這種文碼問題？
還請相助


感謝大家！
程式碼如下



[程式範例]:

test2 <- search_tweets(
  ""#Spotify"",
  n = 25000,
  type = ""recent"",

  include_rts = FALSE,

  ""lang:en"", geocode = lookup_coords(""usa"")
)

test2_table <- as.data.table(test2)
save(test2_table, file = ""TableTest2.txt"")


save(test2, file = ""Spotify_geomap.xls"")

summary(test2)

## create lat/lng variables using all available tweet and profile
geo-location data
test2 <- lat_lng(test2)

## plot state boundaries
par(mar = c(0, 0, 0, 0))
maps::map(""state"", lwd = .25)


[環境敘述]:
R version 3.5.1 (2018-07-02)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS High Sierra 10.13.6

Matrix products: default
BLAS:
/System/Library/Frameworks/Accelerate.framework/Versions/A/
Frameworks/vecLib.framework/Versions/A/libBLAS.dylib

LAPACK:
/Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dylib

locale:
[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] httpuv_1.4.5       readxl_1.1.0       dplyr_0.7.6
bindrcpp_0.2.2     syuzhet_1.0.4
 [6] ggplot2_3.0.0      wordcloud_2.5      RColorBrewer_1.1-2
RPostgres_1.1.1    tokenizers_0.2.1
[11] rtweet_0.6.7.9000  quanteda_1.3.4     devtools_1.13.6
tm_0.7-5           NLP_0.1-11
[16] koRpus_0.10-2      data.table_1.11.4  stopwords_0.9.0

[關鍵字]:
Twitter
text mining選擇性，也許未來有用--

--","R_Language"
"230","M.1533571890.A.C61","egoweaver","問題","Re: 依日期選別欄位的值",2018-08-07 00:11:28,NA,NA,"雖然「在這個日期之前和之後做[交割年月]的篩選」的描述看不懂是怎樣

的操作，但是應該是類似這樣的狀況吧？

# 如果需要安裝 package 的話 uncomment
# install.packages(c(""lubridate"", ""timeDate""))

library(lubridate)
library(timeDate)
library(dplyr)

# 指定要找出「每月第三個星期三」的時間段
start_date <- ""2007-09-01""
end_date <- ""2014-06-01""


# 載入原始檔
# 注意如果日期格式不是 ""YYYY-MM-DD"" 的話後面的部分要相應修改
test <- read.table(""test.txt"", header = TRUE, stringsAsFactors = FALSE)

# 找出指定時間段的每月第三個週三
# 用 format() 把 timeDate 轉成 character
period <- timeSequence(from = start_date, to = end_date, by = ""month"")
thirdwed <- format(timeNthNdayInMonth(period, nday = 3, nth = 3,
                                      format = ""%Y-%m-%d""))

# 只留下 Date 為每月第三個週三的 observation
test_fil <- filter(test, Date %in% thirdwed)

# 依據交割年月做篩選
# 這邊看不懂原 po 想做什麼篩選...
result <- filter(test_fil, `交割年月` == 201101)※ 引述《poker0531 (破殼)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我想篩選一串日期中每月的第三個周三, 並在這個日期之前和之後做[交割年月]的篩選: [程式範例]:: 資料長這樣::         Date   Time 交割年月 成交時間 成交價格 成交數量(B+S): 1 2011-01-03 084500   201101  8450000     9000            24: 2 2011-01-03 084500   201101  8450000     9000             2: 3 2011-01-03 084500   201101  8450000     9000             2: 4 2011-01-03 084500   201101  8450000     9000             6: 5 2011-01-03 084500   201101  8450000     9000             2: 6 2011-01-03 084500   201101  8450000     9000             2: 結算日的判斷方式有google到如下:: require(lubridate): x<-day(unique("": Con<-function(x,y){:         if(day(x)>=15 && day(x)<=21 && y==3){:                 ""SettleDay"":         }else if ((day(x)>=16 && day(x)<=22 && y==4)||:                  (day(x)>=17 && day(x)<=23 && y==5)||:                  (day(x)>=18 && day(x)<=24 && y==6)||:                  (day(x)>=20 && day(x)<=26 && y==1)||:                  (day(x)>=21 && day(x)<=27 && y==1)||:                  (day(x)>=22)){:                  ""SettleDay"":                  }:         }: 感謝各位大神幫忙,搞了我兩個周末了: [環境敘述]:: R version 3.5.1 (2018-07-02): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): Matrix products: default: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C                                 LC_TIME=Chinese: (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] lubridate_1.7.4: loaded via a namespace (and not attached):: [1] compiler_3.5.1 magrittr_1.5   tools_3.5.1    Rcpp_0.12.18: stringi_1.2.4  stringr_1.3.1: [關鍵字]:: 台指期結算日判斷--","R_Language"
"231","M.1533455164.A.0A2","poker0531","問題","依日期選別欄位的值",2018-08-05 15:45:59,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想篩選一串日期中每月的第三個周三, 並在這個日期之前和之後做[交割年月]的篩選


[程式範例]:
資料長這樣:
        Date   Time 交割年月 成交時間 成交價格 成交數量(B+S)
1 2011-01-03 084500   201101  8450000     9000            24
2 2011-01-03 084500   201101  8450000     9000             2
3 2011-01-03 084500   201101  8450000     9000             2
4 2011-01-03 084500   201101  8450000     9000             6
5 2011-01-03 084500   201101  8450000     9000             2
6 2011-01-03 084500   201101  8450000     9000             2
結算日的判斷方式有google到如下:

require(lubridate)
x<-day(unique(""
Con<-function(x,y){
        if(day(x)>=15 && day(x)<=21 && y==3){
                ""SettleDay""
        }else if ((day(x)>=16 && day(x)<=22 && y==4)||
                 (day(x)>=17 && day(x)<=23 && y==5)||
                 (day(x)>=18 && day(x)<=24 && y==6)||
                 (day(x)>=20 && day(x)<=26 && y==1)||
                 (day(x)>=21 && day(x)<=27 && y==1)||
                 (day(x)>=22)){
                 ""SettleDay""
                 }
        }

感謝各位大神幫忙,搞了我兩個周末了

[環境敘述]:

R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C                                 LC_TIME=Chinese
(Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lubridate_1.7.4

loaded via a namespace (and not attached):
[1] compiler_3.5.1 magrittr_1.5   tools_3.5.1    Rcpp_0.12.18
stringi_1.2.4  stringr_1.3.1 

[關鍵字]:


台指期結算日判斷


--","R_Language"
"232","M.1533416145.A.602","AmigoSafin","問題","存下R list的方法",2018-08-05 04:55:42,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

大家好

我使用search_tweets找了25,000個與Pandora有關的tweets,
我是新手 所以在網路上看看能做些什麼
我看到plain_text以及stopwords這兩個functions
所以用plain_text抓2500個text
想要分析stopwords

我有兩個問題,
首先我找到了許多text
因為數量太多
沒辦法在console裡面都列出來
但是我希望將他們另存下來
我用了 stop.df <- as.dataframe
或者 write.table/ write csv
都不成功 並不是有error message
而是那個檔案裡面 就只有我為這個資料夾設置的檔名而已

我用的code為:
tokenize_words(plain.text, stopwords = stopwords::stopwords(""en""))

stop.sp <- tokenize_words(plain.text, stopwords = stopwords::stopwords(""en""))

所以我想做的是把 stop.sp這個list存下來
我就可以有很完整的2500筆資料
但我用了as.data.frame or save.csv都有error> stop.sp.df <- as.data.frame(stop.sp)Error in (function (..., row.names = NULL,
check.rows = FALSE, check.names = TRUE,  :
  arguments imply differing number of rows: 7, 16, 13, 28, 25, 26, 22, 18,
10, 27, 31, 33, 15, 14, 21, 20, 30, 19, 8, 17, 12, 29, 23, 6, 24, 32, 9, 39,
11, 36, 5, 38, 3, 4, 35, 37, 2, 34, 40, 41

我又試了write.table 以及以下

## Trying saving R object

save(stop.sp, list = character(),
     file = stop(""stopword_Spotify.txt""),
     ascii = FALSE, version = NULL, envir = parent.frame(),
     compress = isTRUE(!ascii), compression_level,
     eval.promises = TRUE, precheck = TRUE)

得到error 顯示compression_level not found
請問大家有沒有好用的存下R產出的資料的好方法？

謝謝大家∼


關鍵字:

Twitter

Text_mining


session_info ()
setting  value
 version  R version 3.5.1 (2018-07-02)
 system   x86_64, darwin15.6.0
 ui       RStudio (1.1.456)
 language (EN)
 collate  en_AU.UTF-8
 tz       America/New_York
 date     2018-08-04



--

--","R_Language"
"233","M.1533308215.A.687","ryouka8610","問題","安裝Sleuth2套件",2018-08-03 22:56:52,NA,NA,"[問題類型]:

程式諮詢


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
安裝套件Sleuth2，使用時出現Error
第一次使用R，不確定這樣算不算成功安裝，希望版友提供協助


[程式範例]:

package'Sleuth2' is successfully unpacked and MD5 sums checked
The downloaded binary packages are in
   C:\Users\XXX\AppData\Local\Temp\RtmpGYAnIh\downloaded_packages

>library(Sleuth2)
Error in library(Sleuth2):there is no package called 'Sleuth2'



[環境敘述]
R version 3.5.1 (2018-07-02)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 17134)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.5.1 tools_3.5.1


--","R_Language"
"234","M.1533287357.A.49F","AndrewShi","問題","(更)the dim contain missing value",2018-08-03 17:09:14,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
繼上篇發文一樣想請問當出現the dims contain missing values這個錯誤訊息時該如何
解決??而繼上篇發文的最後的推文後，我試了把兩年的資料讀進去去跑，但還是出現同樣
的錯誤訊息。
因截取問題部分的程式碼會跑出不同的錯誤訊息，且錯誤訊息追回源頭還是需要放資料(
檔案)進去，所以我就把完整的程式碼貼上來了(當然不需要的部分還是有刪掉)，我想要
解決的問題就是能讓這一完整的程式碼跑完都不出錯並輸出結果(因為這一完整的程式碼
是別人寫好的一個package(Climdown，公開的))。
而需要放入的資料(檔案)和其他程式碼我放到下面這個google雲端硬碟的共用資料夾裡(
如無法進入資料夾或下載檔案煩請推文告知)，謝謝。https://drive.google.com/drive/folders/1aI7SnSxJzIIkN9H9QjL8vMv3wF-WSpv5?usp=sharing

其中有一段程式碼會跑需要大概半小時，先行告知。
(ps:如需要Climdown這個package的GitHub網址可在推文告知，可再貼上來)。

希望有大大願意幫忙或是提點我可能是哪裡出了問題，我在程式這塊目前還是新手，所以
抱歉有時候會不太懂你們說的意思，還煩請你們解釋的詳細(白話)一點，真的非常謝謝你
們。

[程式範例]:
# Read fine-scale grid and spatially aggregate to GCM grid
rm(list=ls())
library(ncdf4)
library(RNetCDF)
library(doParallel)
library(PCICt)
source(""C:\\Users\\TOM\\Desktop\\R(code)\\降尺度\\netcdf.calendar.R"")

config <- commandArgs(trailingOnly=TRUE)
if(length(config)==0) config <- ""C:\\Users\\TOM\\Desktop\\R(code)\\降尺度
\\BCSD.config.R""
print(readLines(config))
source(config)

mc.cores<-4
registerDoParallel(mc.cores,cores=NULL)
nc.obs.file<-""C:\\Users\\TOM\\Desktop\\R(資料庫)\\TRMM資料\\trmm_1998.nc""
nc.obs <- nc_open(nc.obs.file)
pr.nc.file<-""C:\\Users\\TOM\\Desktop\\R(資料庫)\\降尺度資料
\\pr_Amon_CCSM4_historical_e1i1p1_185001-200512+rcp45_r2i1p1_200601-210012.nc""
nc.gcm <- nc_open(pr.nc.file)

# Read fine-scale and GCM grid dimensions
obs.lon <- ncvar_get(nc.obs,""longitude"")
obs.lat <- ncvar_get(nc.obs,""latitude"")
obs.time <- ncvar_get(nc.obs,""time"")
n.lon <- length(obs.lon)
n.lat <- length(obs.lat)
obs.lats <- matrix(obs.lat, nrow=n.lon, ncol=n.lat, byrow=TRUE)
obs.lons <- matrix(obs.lon, nrow=n.lon, ncol=n.lat)
#obs.time <- netcdf.calendar(nc.obs)
obs.time <- matrix(seq(as.Date(""1998-01-01""), as.Date(""1998-12-31""),1))
gcm.lon <- ncvar_get(nc.gcm, 'lon')-360
gcm.lat <- ncvar_get(nc.gcm, 'lat')
gcm.lats <- matrix(gcm.lat, ncol=length(gcm.lat), nrow=length(gcm.lon),
                   byrow=TRUE)
gcm.lons <- matrix(gcm.lon, ncol=length(gcm.lat), nrow=length(gcm.lon))
gcm.lons.lats <- cbind(c(gcm.lons), c(gcm.lats))
gcm.time <- netcdf.calendar(nc.gcm)

nc_close(nc.gcm)

# Figure out which GCM grid boxes are associated with each fine-scale grid
point
# Confine search to 15 deg. x 15 deg. neighbourhood
dxy <- 15
mdist <- function(x, y)
  apply(abs(sweep(data.matrix(y), 2, data.matrix(x), '-')), 1, sum)
nn <- foreach(i = seq_along(obs.lons)) %dopar% {
  if((i %% 500)==0) cat(i, '')
  gcm.lims <- ((gcm.lons.lats[,1] >= (obs.lons[i]-dxy)) &
                 (gcm.lons.lats[,1] <= (obs.lons[i]+dxy))) &
    ((gcm.lons.lats[,2] >= (obs.lats[i]-dxy)) &
       (gcm.lons.lats[,2] <= (obs.lats[i]+dxy)))
  gcm.lims <- which(gcm.lims)
  nn.min <- which.min(mdist(c(obs.lons[i], obs.lats[i]),
                            gcm.lons.lats[gcm.lims,]))
  gcm.lims[nn.min]
}
nn <- unlist(nn)
gridpoints <- sort(unique(nn))
cat('\n')

# Spatially aggregate the fine-scale data to the GCM grid
pr.aggregate <- matrix(NA, nrow=nrow(obs.time), ncol=length(gcm.lons))

i.starts <- sapply(split(seq_along(obs.time[,1]), obs.time[,1]), min)
i.lengths <- sapply(split(seq_along(obs.time[,1]), obs.time[,1]), length)

for(i in seq_along(i.starts)){
  cat(obs.time[i.starts[i],], '\n')
  pr.obs <- ncvar_get(nc.obs, varid='r', start=c(1, 1, i.starts[i]),
                      count=c(n.lon, n.lat, i.lengths[i]))
  dim(pr.obs) <- c(prod(dim(pr.obs)[1:2]), dim(pr.obs)[3])
  pr.agg <- matrix(NA, nrow=i.lengths[i],ncol=length(gcm.lons))
  all.agg <- foreach(j=1:length(gridpoints)) %dopar% {
    point <- gridpoints[j]
    cbind(apply(pr.obs[nn==point,], 2, mean, trim=0.1, na.rm=TRUE)
    )
  }
  all.agg <- do.call(cbind, all.agg)
  pr.all.agg <- all.agg[,c(TRUE, FALSE, FALSE, FALSE)]
  pr.agg[,gridpoints] <- pr.all.agg
  pr.agg[is.nan(pr.agg)] <- NA
  pr.aggregate[i.starts[i]:(i.starts[i]+i.lengths[i]-1),] <- pr.agg
}
nc_close(nc.obs)

save(gcm.lons, file=paste(output.dir, 'gcm.lons', output.suffix,
                          '.RData', sep=''))
save(gcm.lats, file=paste(output.dir, 'gcm.lats', output.suffix,
                          '.RData', sep=''))
save(gcm.time, file=paste(output.dir, 'gcm.time', output.suffix,
                          '.RData', sep=''))
save(obs.lons, file=paste(output.dir, 'obs.lons', output.suffix,
                          '.RData', sep=''))
save(obs.lats, file=paste(output.dir, 'obs.lats', output.suffix,
                          '.RData', sep=''))
save(obs.time, file=paste(output.dir, 'obs.time', output.suffix,
                          '.RData', sep=''))
save(pr.aggregate, file=paste(output.dir, 'pr.aggregate', output.suffix,
                              '.RData', sep=''))
[環境敘述]:https://imgur.com/nVXlvbb[關鍵字]:
dim   遺失值

--","R_Language"
"235","M.1533077907.A.D05","AmigoSafin","問題","使用R做Twitter Text Mining的系統問題",2018-08-01 06:58:20,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好

我開始使用TwitteR 做Text Mining,
目前就是自己註冊了Twitter 建立了一個App
然後跟著網路上的步驟連結R與自己的App
就可以用指令搜尋需要的Tweet

然而 初學者總是會遇到一些系統問題
我使用的是 Mac 10.13.6
我是在

# Saving and using certification to connect to Twitter

# Asing for access

這裡的時候 R會direct我到一個authorize的頁面
但我一按下Authorize (這是我的Twitter App的Authorize頁面）
就顯示：
127.0.0.1 refused to connect.
於是我就開始搜尋可能原因

以下先放上我的code
以及stackoverflow上面有人貼的command
我的mkdir: /private/var/log/apache2: File exists
sudo apachectl configtest
Syntax OK
並沒有出現error message
不知道有沒有也是mac使用者版友有類似經驗的
願意分享一下？
謝謝大家！

[程式範例]:

## Install packages and set up working directory

install.packages(c( ""twitteR"", ""ROAuth"", ""RCurl"" ))

## call the packages ##

library(twitteR)
library(ROAuth)
library(RCurl)
## Getting a curl certification

download.file(url = ""http://curl.haxx.se/ca/cacert.pem"",destfile =
""cacert.pem"")

## Setting the certification from Twitter

# Set constant requestURL
requestURL <- ""https://api.twitter.com/oauth/request_token""# Set constant accessURL
accessURL <- ""https://api.twitter.com/oauth/access_token""# Set constant authURL

authURL <- ""https://api.twitter.com/oauth/authorize""# consumer key and consumer secret

consumerKey <- XXXXXX
consumerSecret <- OOOOOO

# Create authorization object by calling function OAuthFactory

twitCred <- OAuthFactory$new ( consumerKey = consumerKey, consumerSecret =
consumerSecret,
                               requestURL = requestURL,
                               accessURL = accessURL,
                               authURL = authURL)

# Saving and using certification to connect to Twitter

# Asing for access

twitCred$handshake( cainfo = ""cacert.pem"")

這邊跳出

To enable the connection, please direct your web browser to:

我也順利進到頁面 但一點authorize就出現

This site can’t be reached
127.0.0.1 refused to connect.

有找到一個類似的苦主:https://stackoverflow.com/questions/39364290/why-would-apache-refuse-connection-to-localhost-127-0-0-1-on-osx

[環境敘述]:R version 3.5.1 (2018-07-02)Platform: x86_64-apple-darwin15.6.0 (64-bit)Running under: macOS High Sierra 10.13.6Matrix products: defaultBLAS:/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylibLAPACK:/Library/Frameworks/R.framework/Versions/3.5/Resources/lib/libRlapack.dyliblocale:[1] en_AU.UTF-8/en_AU.UTF-8/en_AU.UTF-8/C/en_AU.UTF-8/en_AU.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RCurl_1.95-4.11 bitops_1.0-6    ROAuth_0.9.6    twitteR_1.1.9loaded via a namespace (and not attached):[1] bit_1.1-14     httr_1.3.1     compiler_3.5.1 rjson_0.2.20R6_2.2.2       DBI_1.0.0      tools_3.5.1    yaml_2.2.0[9] bit64_0.9-7    digest_0.6.15[關鍵字]:Twitter選擇性，也許未來有用--

--","R_Language"
"236","M.1533025497.A.AD0","AndrewShi","問題","the dims contain missing value",2018-07-31 16:24:55,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
想請問當出現the dims contain missing value這個error時該如何解決??
我上網查了dim這個指令裡放的東西好像不能有missing value(遺失值)，所以我想說在最
後加上,na.rm=TRUE，在元素相乘的計算時將遺失值刪除，但加了之後去跑還是出現同樣
的error，而想說在上面加上na.omit( )去除遺失值之後再去做計算也還是出現同樣的err
or，所以想請問該如何解決這個error??謝謝。
(ps:如需完整程式碼可告知我，可再貼上來)

[程式範例]:https://i.imgur.com/OvSCy3r.jpg[環境敘述]:

[關鍵字]:
dim   遺失值

--","R_Language"
"237","M.1532895426.A.99E","AmigoSafin","問題","R-studio scatterplot 的labels問題",2018-07-30 04:17:03,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我使用一個簡單的scatterplot指令
但在labels=rownames(mtcars)這邊
出現了error
在網路上找了一些相關問題
試著用axis(side = 1, at = Labels, labels = FALSE)
去看看是否可以順利產出跟範例一樣的圖
還是不行
因此來請教大家
初學者還請大家見諒

[程式範例]:請把以下不需要的部份刪除scatterplot(mpg ~ wt | cyl, data = mtcars, xlab = ""Weight of Car"", ylab =""Miles Per Gallon"", main= ""Enhanced Scatter Plot"", labels = row.names(mtcars))Error in axis(side = side, at = at, labels = labels, ...) :'labels' is supplied and not 'at'[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R 3.5.1
R studio


[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"238","M.1532631568.A.549","owem0410","問題","網站擷取表格",2018-07-27 02:59:24,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)

[問題敘述]:https://isslive.com/displays/adcoDisplay2.html目前想要擷取上住網站的角度表格
但是用rvest抓下來都是na
爬了一些文還是抓不到
想請問有是因為藏在js後面？
那有沒有哪些文章可以參考？
[程式範例]:

[環境敘述]:
R version 3.4.4 (2018-03-15)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 16.04.4 LTS[關鍵字]:爬蟲--","R_Language"
"239","M.1532615061.A.239","k97231","問題","Save file 亂碼error",2018-07-26 22:24:19,NA,NA,"https://imgur.com/pDaoXHr一直以來的困擾
有參考置頂將tmp和library更換目錄
但時不時還是會發生
顯示亂碼也不知道怎麼解決

--
Sent from my Windows

--","R_Language"
"240","M.1532606221.A.0E9","alanfengjkl","問題","RStudio console無法出現結果",2018-07-26 19:56:59,NA,NA,"問題:RStudio console無法呈現結果

[問題類型]:
經驗諮詢

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
RStudio的console在我執行程式碼後
結果是已經跑完
跑完後我輸入1+1會跑出2
就如同下面：> 1+1[1] 2

但是過幾秒後(這中間沒有輸入任何程式碼)
我再次輸入1+1時
他只會出現如下：> 1+1並不會出現答案2
輸入其他變數也不會呈現出來

家裡電腦不會這樣
但是公司電腦會= =

[程式範例]:


[環境敘述]:
RStudio 1.1.447
R X64 3.5.0

[關鍵字]:RStudio Console

--","R_Language"
"241","M.1532588265.A.12E","frojet","問題","如何寫迴圈去新增欄位來紀錄住院次數",2018-07-26 14:57:38,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:https://i.imgur.com/ru1axDh.png如上圖   原有資料
已有A欄位:病歷號、 B欄位:住院序號(前7碼住院日期+末四碼流水號)

想根據A及B欄位，新增一個C欄位
來換算紀錄每一個病人住院次數


PS:跟先前網友提的問題很像，但前個問題 是直接算出總和，
但我主要是想新增C欄去跑後續的統計ex: 重複量測或GEE


--
不去評價別人，是一種修養。
不活在別人評價下，是一種修行。

--","R_Language"
"242","M.1532584080.A.946","Wush978","分享","在 C/C++ 中回應使用者的中斷",2018-07-26 13:47:53,NA,NA,"[關鍵字]: R, C, C++, 中斷

最近在爬code的時候看到有些套件會在C loop 中插入一段檢查 user interept 的程式碼

以 dbscan 套件為例子，裡面有：

for (int i = 0;i < nrow; i++) {
  if (!(i % 100)) Rcpp::checkUserInterrupt();
  // ...
}

查了一下 Rcpp 的文件，http://dirk.eddelbuettel.com/code/rcpp/Rcpp-attributes.pdf裡面提到這個函數會適當的呼叫C++物件的destructors，所以可以在C++中安全使用。

ps. 它會丟出一個exception: Rcpp::internal::InterruptedException

R原生的C API有 R_CheckUserInterrupt，但是如果使用它，則會直接跳回R

C++的destructors不會被呼叫，會導致memory leak

底層的細節可以參考：http://r.789695.n4.nabble.com/Interrupting-C-code-execution-td3472972.html有大大解釋得很清楚

--","R_Language"
"243","M.1532571032.A.0A9","taoko","問題","迴圈讀取input欄位",2018-07-26 10:10:29,NA,NA,"請問各位高手

我現在有個需求，有input$x1,input$x2, input$x3....到n

請問要如何用loop去抓取或判斷每個input值？

thanks so much

--

三更燈火五更雞，疾筆振書孤影隨。潮浪不識書中趣，惟有陸翁笑我顛。

--","R_Language"
"244","M.1532431927.A.BDD","bruce89","問題","邏輯判斷式",2018-07-24 19:32:05,NA,NA,"各位版友大家好
有個問題想了好幾天了
在R語言裡的邏輯判斷會用&、|表示交集、聯集
目前遇到兩個不太懂的問題，分別為下:

1.
TRUE & FALSE 會是FALSE
TRUE | FALSE 會是TRUE

為何會有TRUE和FALSE的交集和聯集這種說法?

2.
在swirl裡的logic單元，有這樣的練習題:

Which one of the following expressions evaluates to FALSE?

1: !(8 > 4) ||  5 == 5.0 && 7.8 >= 7.79
2: 6 >= -9 && !(6 > 7) && !(!TRUE)
3: FALSE || TRUE && 6 != 4 || 9 > 4
4: FALSE && 6 >= 6 || 7 >= 8 || 50 <= 49.5

就我目前所學到&&、||是使用在單一邏輯值的判斷，為什麼題目都是使用&&、||，
而非單純&、|呢?

以上問題請教各位專家，謝謝

--","R_Language"
"245","M.1532431356.A.C19","AmigoSafin","問題","Mac 10.13.6 User該下載哪種R-studio",2018-07-24 19:22:33,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好
我使用的是Mac 10.13.6
我本來的R版本是3.4.1
我使用R studio
但因為我想upgrade到R 3.5.1
我現在把兩者都先刪除
R 3.5.1我已經下載好了
想要下載R studio
但來到這頁面 不知道如何處理https://www.rstudio.com/products/rstudio/download-server/我先開terminal執行了
$ sudo apt-get install gdebi-core
但在我鍵入密碼後 顯示command not found
請問有Mac使用者願意指點小的一下
我應該下載哪個R studio server嗎？
感謝∼∼



[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤MAC OS High Sierra
Version 10.13.6

R base 3.5.1


[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"246","M.1532349658.A.471","disney82231","問題","特定欄位更改名稱",2018-07-23 20:40:54,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一個data.frame叫A，其中有40個變數，想更改其中一些變數名稱(例如第10行)，

不知道該怎麼做，用colnames(a)<-需要把40個變數都打上去 但我只想更改某幾行的
[程式範例]:
colnames(a[10])<-c(""ID"")
這樣可以跑 但資料不會有任何變動

有變法更改特定某幾行的變數名稱嗎?
[環境敘述]:

[關鍵字]:

特定欄位名稱

--","R_Language"
"247","M.1532319819.A.F1E","Jesseyuya","情報","Re: R語言商業大數據分析應用實務班-台南",2018-07-23 12:23:36,NA,NA,"※ 引述《Jesseyuya (宅寶寶)》之銘言：: 平板排版，請包涵。: 最近在勞動部勞動力發展署看到有開〔R語言商業大數據分析應用實務班〕: 講課時數有54小時感覺還蠻充實的: 而政府補助6,048元，學員只要負擔1,512元: 只是現在報名人數超不踴躍的，打去問說應該會延後開班: 所以上來宣傳一下，順便看看大家的意見: 報名網址如下：: https://goo.gl/VSa2Zu本課程已確定延期至8/26(日)開課了

目前報名人數已經有8位

有興趣一起來學習的版友趕快來報名

--
Sent from my Windows

--","R_Language"
"248","M.1531960711.A.7F9","e181280","問題","shiny執行source可執行但出現Warnings",2018-07-19 08:38:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想在shiny中顯示一個table,
table是在另一個R script中進行處理（從讀取Excel到mapping，無Warnings訊息）
所以在shiny中想要透過source去執行另一個R script
但卻出現Warnings，目前知道應該是另一個R script在讀取excel產生的，
網路上找了些資料但還是不知道該如何處理

[程式範例]:
1.shiny script
  source(""A.R"", local = TRUE)

2.A script
  mapping_old.rul <-""Desktop/檔案/檔案A/【測試檔案】20180718.xls""
  mapping_old <- read_excel(mapping_old.url, range = ""B3:N103"",
                            col_types = c(""text"", ""text"", ""text"", ""numeric"",
                                          ""text"", ""text"", ""text"", ""numeric"",
                                          ""numeric"", ""numeric"", ""numeric"",
                                          ""numeric"", ""numeric""))
p.s. 原始I欄位在讀取是型態為double但顯示出來為""1900-05-24 02:03:57""，
     我有強制改為numeric
p.s. 單獨執行A script時沒有出現任何warnings訊息，但在shiny中用source執行就有

Warning messages:
1: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I4 / R4C9: got a date
2: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I5 / R5C9: got a date
3: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I6 / R6C9: got a date
4: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I7 / R7C9: got a date
5: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I8 / R8C9: got a date
6: In read_fun(path = path, sheet_i = sheet, limits = limits,  ... :
  Expecting numeric in I9 / R9C9: got a date

[環境敘述]:
R studio mac

[關鍵字]:
shiny, source, readxl

--","R_Language"
"249","M.1531820295.A.FD1","kotenka","問題","R 預設介面語言為日文且無法更改",2018-07-17 17:38:09,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的安裝後預設語言是日文
（中央操作區是英文，但上方工具列及所有分支工具或選項皆為日文）
已參照http://psmethods.postach.io/post/ru-he-geng-gai-rde-yu-she-yu-xi的說明操作，但都無法順利更改，英文或中文都無法

第一次安裝 R 時電腦輸入法好像剛好是日文輸入法，發現 R 有這個問題後，
就把日文輸入鍵盤移除，也把 R 重新安裝許多次，但都無法解決
目前是完全新手，也無其他程式語言背景，雖然不清楚實際上是否會常用到工具列，
但還是希望能在熟悉的語言介面下操作和學習（中英皆可）
先謝謝各位

[程式範例]:
無

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤系統是 macOS 10.13.5
R 是 R 3.3.3


[關鍵字]:

--","R_Language"
"250","M.1531592365.A.C58","AndrewShi","問題","with a re-write of symap in R",2018-07-15 02:19:23,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
想請問標題(with a re-write of symap in R)中的symap是什麼意思呢??
以及想請教R是否可以將測站的資料(非網格化資料)轉換成網格化的資料呢??
如果可以，請問這主要會用到哪個套件來做此資料格式的轉換呢??
上述這個問題是否與symap相關??
謝謝~

[關鍵字]:
symap   資料格式轉換

--","R_Language"
"251","M.1531549905.A.754","piggood","問題","有關 round 的問題",2018-07-14 14:31:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

很好奇 round 的運作方式
我知道他是使用 round to even 的方式
但有些時候我還是不懂為什麼會有這結果？
想跟各位前輩們討教

[程式範例]:

round(0.275, 2)
結果會是 0.28 這個不意外


但如果改成 round(0.11/0.4, 2)　　# 0.11/0.4 等於 0.275
結果會變成 0.27？？


如果把再把分子分母同乘 10
round(1.1/4, 2)
結果又變成了 0.28


是　round to even　的關係嗎?
真的不明白∼請教一下版上的高手，謝謝



--","R_Language"
"252","M.1531311993.A.385","bruce89","問題","載入資料(新手)",2018-07-11 20:26:30,NA,NA,"[問題類型]:

經驗諮詢(載入csv檔卻出現錯誤)


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:目前在上Udemy郭老師的R語言，在第43講的地方卡住，練習是希望我們讀取老師提供的檔案boston-celtics-2007-08.csv我是先將路徑指定到我的下載資料夾，並將老師提供的檔案也放置於此
downloads_windows <- ""C/Users/Dell/Downloads/""

接著執行以下兩行(這兩行其實我看不太懂它的意思)
csv_file <- ""C/Users/Dell/Downloads/boston-celtics-2007-08.csv""
csv_df <- read.csv(csv_file)

但在console出現以下錯誤訊息
Error in file(file, ""rt"") : cannot open the connection
In addition: Warning message:
In file(file, ""rt"") :
  cannot open file 'C/Users/Dell/Downloads/boston-celtics-2007-08.csv': No
such file or directory

想請問各位專家哪裡出錯了，謝謝

--","R_Language"
"253","M.1531043353.A.555","shingai","問題","r讀取問題",2018-07-08 17:49:10,NA,NA,"[問題類型]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
於Rstudio環境下，執行程式範例中的語法出現下列警告，請問可以怎麼排除問題？

Warning message:
3008.TW contains missing values. Some functions will not work if objects
contain missing values in the middle of the series. Consider using na.omit(),
na.approx(), na.fill(), etc to remove or replace them.

[程式範例]:

install.packages(""quantmod"")
require(""quantmod"")
library(quantmod)
tw3008=getSymbols(""3008.TW"",from = ""2010-01-01"",to = Sys.Date())



[環境敘述]:
Rstudio windows 7

--","R_Language"
"254","M.1531036805.A.BCF","frojet","問題","R有meta-analysis相關套件嗎?",2018-07-08 16:00:03,NA,NA,"最近在進行文獻回顧，雖然有使用CMA這軟體進行整合分析，但畢竟是付費版，而且3.0版後
，費用變成每年授權

好奇R 是否有類似這種meta-analysis相關性，幫忙做整合分析?

--","R_Language"
"255","M.1530845585.A.F04","Sagara","問題","glm.nb錯誤訊息",2018-07-06 10:53:03,NA,NA,"[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請問我用Mass函數裡面的NB模式要去擬合一組1000多筆的數據資料
會出現一個錯誤訊息

Warning while fitting theta: iteration limit reached

2 x log-likelihood:  -5098.231

Warning messages:
1: In theta.ml(Y, mu, sum(w), w, limit = control$maxit, trace = control$trace :
  iteration limit reached
2: In theta.ml(Y, mu, sum(w), w, limit = control$maxit, trace = control$trace :
  iteration limit reached

google一下好像是說R本身問題
不過看沒很懂
想請問該如何解決

謝謝

--","R_Language"
"256","M.1530089084.A.717","k97231","問題","match找不到數值",2018-06-27 16:44:41,NA,NA,"這是一段來自於github上的一段程式碼

其中samples=c(""A_r"",""A_ir"",""B_r"",""B_ir"",...)
reps <- grep(""_r|_ir"",samples,value=TRUE) # get the replicates (ending with _r or _ir)
samps <- match(sub(""_r|_ir"","""",reps),samples) # match against its sample (ie names w/o _r or _ir)
不過我照著執行後samps只會出現一堆NA
想問這是怎麼回事?

--
Sent from my Windows

--","R_Language"
"257","M.1530003761.A.306","Jesseyuya","情報","R語言商業大數據分析應用實務班-台南",2018-06-26 17:02:39,NA,NA,"平板排版，請包涵。

最近在勞動部勞動力發展署看到有開〔R語言商業大數據分析應用實務班〕

講課時數有54小時感覺還蠻充實的

而政府補助6,048元，學員只要負擔1,512元

只是現在報名人數超不踴躍的，打去問說應該會延後開班

所以上來宣傳一下，順便看看大家的意見

報名網址如下：https://goo.gl/VSa2Zu--
Sent from my Windows

--","R_Language"
"258","M.1529939564.A.CC9","ianmao","問題","Re: 用迴圈整理同個ID的看病次數",2018-06-25 23:12:41,NA,NA,"可以試試看下面的code會比較簡潔：

medical <- as_tibble(medical) %>%
                group_by(id) %>%
                mutate(age = max(age),
                       docvis_sum = sum(docvis),
                       hhninc_mean = mean(hhninc)) %>%
                select(id, docvis_sum, age, hhninc_mean) %>%
                slice(length(id)) %>%
                ungroup()※ 引述《piggood (成為有品味的男人)》之銘言：: ※ 引述《ntpuisbest (阿龍)》之銘言：: : library(COUNT): : data(rwm5yr): : medical<-rwm5yr: : https://imgur.com/xLr3I5j: : 我的目的是像這樣: : 同個id是同個人: : 我想要把資料整理成: : 去計算同個人的 總共 的看病次數: : 其他的column 就用 同個id最後的 資訊: : 最後要整理成: : id   docvis  age: : 1    1        56: : 2    4        48: : 3    13       62: : 請問有套件可以做到這件事情嗎: : 還是怎麼寫這個迴圈呢: 目前想到的方式: 但也不是很簡潔: 不過還能用: # 先建立一個 medical1 ，除了 docvis 和 hhninc 之外，都取最後一筆觀察值的資料:    medical1 <- medical %>%:      group_by(id) %>%:      summarise_at(vars(-docvis,-hhninc), last): # 再建 medical2 專門處理 docvis 跟 hhninc 的各別需求:    medical2 <- medical %>%:      group_by(id) %>%:      summarise(sum(docvis), mean(hhninc)): # 合併在一起:    medical3 <- data.frame(medical2,medical1)--","R_Language"
"259","M.1529834526.A.359","piggood","問題","Re: 用迴圈整理同個ID的看病次數",2018-06-24 18:02:02,NA,NA,"※ 引述《chuubbyy (byetos)》之銘言：: ※ 引述《piggood (成為有品味的男人)》之銘言：: 我都比較建議用data.table的方式，簡潔又快。: library(data.table): setDT(medical): medical <- medical[,docvis.sum:=sum(docvis), by = ""id""][,hhninc.mean:=mean(hhninc), by =: ""id""][, .SD[.N], by = ""id""]: 上面是data.table特殊chaining方式，若要考慮易讀性可以分3行。: medical[,docvis.sum:=sum(docvis), by = ""id""]: medical[,hhninc.mean:=mean(hhninc), by = ""id""]: medical <- medical[, .SD[.N], by = ""id""]: 或是pipe的方式。: medical <- medical[,docvis.sum:=sum(docvis), by = ""id""] %>%:   .[,hhninc.mean:=mean(hhninc), by = ""id""] %>%:   .[, .SD[.N], by = ""id""]data.table 真的也不錯用，功能強大速度也快，程式也精簡

只是對我這個新手來說，還要再多多練習...

看懂 c 大的 code 之後，練習另一種寫法，也可以達到原 po 的需求 ^^


medical <- medical[,':='(docvis.sum = sum(docvis), hhninc.mean = mean(hhninc)),
by =""id""][,.SD[.N], by = ""id""]



如果本來的 hhninc 和 docvis 也要拿掉的話，後面再多加上一段

medical <- medical[,':='(docvis.sum = sum(docvis), hhninc.mean = mean(hhninc)),
by =""id""][,.SD[.N], by = ""id""][,c(""docvis"",""hhninc""):= NULL]



--","R_Language"
"260","M.1529833551.A.29E","andrew43","問題","Re: ggplot2 擴大繪圖版面和行距/讓字清楚",2018-06-24 17:45:49,NA,NA,"這可以從二個方向來解決。

1. 調整畫板大小。

這不限於是否使用 IDE 或是否使用 ggplot。

如果是windows的螢幕顯示可以這樣：
windows(width=5, height=7)
# make plot here
其中5和7是以英吋為單位。

當然，其它pdf/png/tiff等device也有類似指定長寬的方式。

2. 改變文字大小

如果是傳統的R繪圖，在繪圖前以par(cex=0.5, ...)可以讓文字小50%。

如果ggplot，在theme()中有多個包括「text」的參數都可以控制文字的樣子。
你可以一項一項自行先定義成新的theme，之後給予ggplot物件。
但如果不想這麼麻煩，也可以看看這個網頁https://ggplot2.tidyverse.org/reference/ggtheme.html選一個你習慣的theme（或再加工這些theme），並指定很小的base_size值。※ 引述《ktjoe (ktjoe)》之銘言：: 各位板友好，我代朋友來問一下R的問題: 懇請各位前輩解惑> <: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 做了一個資料的topic modeling分析，用ggplot繪出了16個主題，但是目前他的字都黏在: 一起，請問有什麼指令可以擴大繪圖版面、擴大行距或讓字清楚？: 目前做出的成果如圖：: https://imgur.com/a/rdGekMo: https://imgur.com/a/fjFSGaB: (字都擠在一起QQ): [程式範例]:: top_terms16 %>%:         mutate(term = reorder(term, beta)) %>%:         ggplot(aes(term, beta, fill = factor(topic))) +:         geom_col(show.legend = FALSE) +:         facet_wrap(~ topic, scales = ""free"") +:         coord_flip() +:         theme(axis.text.y=element_text(colour=""black"", family=""BL"", lineheight=.2)):: [環境敘述]::: [關鍵字]:: ggployt, 繪圖, 版面, 行距:: 先謝謝大家！: ======================================: 20180624補：: 我朋友後來想出辦法解了: 原本他是想要在Rmarkdown用coding輸出pdf，但是不行: 若用Rmarkdown嘗試輸出圖片的話，他找不到在哪裡改解析度（有嘗試改，但它不讓改）: 所以字還是會擠在一起: 但後來他直接在R裡面寫coding輸出圖片，調整圖片尺寸（2400x？）: 總之就是把圖片尺寸放大=版面擴大: 字就不會擠在一起了--","R_Language"
"261","M.1529779753.A.46C","ktjoe","問題","ggplot2 擴大繪圖版面和行距/讓字清楚",2018-06-24 02:49:11,NA,NA,"各位板友好，我代朋友來問一下R的問題

懇請各位前輩解惑> <


[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
做了一個資料的topic modeling分析，用ggplot繪出了16個主題，但是目前他的字都黏在
一起，請問有什麼指令可以擴大繪圖版面、擴大行距或讓字清楚？

目前做出的成果如圖：https://imgur.com/a/rdGekMohttps://imgur.com/a/fjFSGaB(字都擠在一起QQ)


[程式範例]:
top_terms16 %>%
        mutate(term = reorder(term, beta)) %>%
        ggplot(aes(term, beta, fill = factor(topic))) +
        geom_col(show.legend = FALSE) +
        facet_wrap(~ topic, scales = ""free"") +
        coord_flip() +
        theme(axis.text.y=element_text(colour=""black"", family=""BL"", lineheight=.2))


[環境敘述]:



[關鍵字]:
ggployt, 繪圖, 版面, 行距



先謝謝大家！

======================================

20180624補：


我朋友後來想出辦法解了

原本他是想要在Rmarkdown用coding輸出pdf，但是不行

若用Rmarkdown嘗試輸出圖片的話，他找不到在哪裡改解析度（有嘗試改，但它不讓改）

所以字還是會擠在一起



但後來他直接在R裡面寫coding輸出圖片，調整圖片尺寸（2400x？）

總之就是把圖片尺寸放大=版面擴大

字就不會擠在一起了



--","R_Language"
"262","M.1529353479.A.7EB","tus","問題","Pass Data Console",2018-06-19 04:24:36,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的目前正在開發一個搜尋網頁 主要的問題是 主程式是用JAVA寫的(同事負責的)

我用R寫了個程式 在每次使用者搜尋後 可以回傳一些資訊(json file)

目前的問題是 我同事希望不要一直儲存檔案 再讀取 希望可以直接

java call R -> pass json file through console

不曉得大家有沒有什麼建議

謝謝


--","R_Language"
"263","M.1529326416.A.250","dailylily","問題","console不顯示結果",2018-06-18 20:53:33,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
R studio下console部分執行指令時不出現結果
不知如何讓其出來
在這之前執行了一條程式碼：
out_demend[i,(ncol(out_demend)+1)] <-
sum(out_supply[which(out_supply$停車場編號==out_demend$停車場編號[i])[1],47:48])-sum(out_demend[i,18:19])
執行之後結果就消失了
連1+1都沒東西

[程式範例]:


[環境敘述]:

[關鍵字]:


--","R_Language"
"264","M.1529248266.A.E99","t00012","問題","rmd檔圖片顯示問題",2018-06-17 23:11:04,NA,NA,"不好意思，又來請教版上各位
高手，小弟在rmd檔中用以下
函數插入圖片：
img(src=""./1111.jpg"")
R默認置左，我要讓圖片置中，
試過幾個網路上的函數都無法
正常執行，是否哪個步驟有誤？

執行knit後圖片能正常顯示（
就還是用以上的函數），但是
上傳到Rpubs後只顯示出一個
小綠格子https://i.imgur.com/C97Wivl.jpg按右鍵在新分頁中開啟圖片卻
顯示以下畫面：https://i.imgur.com/Ce5Lnp4.jpg由於沒有遇過這種狀況，網路
爬文齁也都找不到相關解決辦
法，因此求助於板上高手，不
勝感激。

--","R_Language"
"265","M.1529179523.A.DE9","AmigoSafin","問題","""Dim""的用法(與Array)",2018-06-17 04:05:18,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的在查找""Drop""的用法的時候
看到R documentation裡面的example
如下
dim(drop(array(1:12, dim = c(1,3,1,1,2,1,2)))) # = 3 2 2
drop(1:3 %*% 2:4)  # scalar product

就試著跑看看長什麼模樣
出來是一個3*4的矩陣(就我看來是這樣)
所以我不是很能理解那dim=c(1,3,1,1,2,1,2)的意思為何?

另外也想問最後那一個code
dim(drop(array(1:12, dim = c(1,3,1,1,2,1,2)))) # = 3 2 2
drop(1:3 %*% 2:4)  # scalar product
有查了scalar product是dot product(雖然我沒學過..)
但那個drop的意思是?
算出來答案是20

不好意思請教大家了
感恩~~端午節愉快!!



[程式範例]:


--

--","R_Language"
"266","M.1528875605.A.B21","HumuHumu","問題","Re: shiny讀取不同的csv檔",2018-06-13 15:40:03,NA,NA,"提供兩種方法

1. 用shiny::fileInput

讓使用者自己上傳檔案的Widget


2.用Reactive

Event<-reactive({
 read.csv(paste0(""event"",input$year,"".csv""))
})

後面畫圖直接用Event()去call你的csv檔就可以了

--","R_Language"
"267","M.1528874773.A.B01","ab80308","問題","shiny讀取不同的csv檔",2018-06-13 15:26:11,NA,NA,"[問題類型]:
{式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
s手(沒寫過程式，R 是我的第一次)

[問題敘述]:
bshiny裡面，希望可以讓使用者在ui自己選擇年度等資訊，然後可以在server裡面讓R自動?
因為有很多年度，每個年度要出很多張不同類別的圖，
不想要每一張圖都手工出出來，所以想問看看有沒有辦法讓shiny自己去讀需要的檔案並執行後續程式碼？

[程式範例]:
if(input$year=1997){
   Event<-read.csv(“event1997.csv”)}

[關鍵字]:
Shiny

-----
Sent from JPTT on my iPhone

--","R_Language"
"268","M.1528824822.A.5D5","ntpuisbest","問題","stargazer輸出",2018-06-13 01:33:39,NA,NA,"https://i.imgur.com/6WsJvNQ.jpg為何我的stargazer輸出

不是輸出表格而是給我這些

html呢

請問該如何處理

謝謝各位

--","R_Language"
"269","M.1528816590.A.6D3","t00012","問題","R加載檔案時間",2018-06-12 23:16:27,NA,NA,"我目前在用Studio的import dataset
讀取一個200mb的txt文字檔，工作區
的右上方也出現紅點，顯示正在運行，
但是已經2個小時了，目前停在這個
情況：https://i.imgur.com/6lOtVSi.jpg想請問這樣的讀取時間是正常還是當機，
我嘗試要關掉R時會出現正在忙碌中的
的訊息

--","R_Language"
"270","M.1528796341.A.7EA","jasonfghx","問題","mxnet安裝問題",2018-06-12 17:38:59,NA,NA,"[問題類型]:
程式功能諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

不好意思

我想在R安裝mxnet  但似乎都不太可行  好向該套件只支援python C++

請問是否有什麼方法可以安裝在R studio上

謝謝回答

[程式範例]:


[關鍵字]:

--","R_Language"
"271","M.1528794162.A.83A","chuubbyy","問題","Re: 用迴圈整理同個ID的看病次數",2018-06-12 17:02:40,NA,NA,"※ 引述《piggood (成為有品味的男人)》之銘言：: ※ 引述《ntpuisbest (阿龍)》之銘言：: : library(COUNT): : data(rwm5yr): : medical<-rwm5yr: : https://imgur.com/xLr3I5j: : 我的目的是像這樣: : 同個id是同個人: : 我想要把資料整理成: : 去計算同個人的 總共 的看病次數: : 其他的column 就用 同個id最後的 資訊: : 最後要整理成: : id   docvis  age: : 1    1        56: : 2    4        48: : 3    13       62: : 請問有套件可以做到這件事情嗎: : 還是怎麼寫這個迴圈呢: 目前想到的方式: 但也不是很簡潔: 不過還能用: # 先建立一個 medical1 ，除了 docvis 和 hhninc 之外，都取最後一筆觀察值的資料:    medical1 <- medical %>%:      group_by(id) %>%:      summarise_at(vars(-docvis,-hhninc), last): # 再建 medical2 專門處理 docvis 跟 hhninc 的各別需求:    medical2 <- medical %>%:      group_by(id) %>%:      summarise(sum(docvis), mean(hhninc)): # 合併在一起:    medical3 <- data.frame(medical2,medical1)我都比較建議用data.table的方式，簡潔又快。

library(data.table)
setDT(medical)
medical <- medical[,docvis.sum:=sum(docvis), by = ""id""][,hhninc.mean:=mean(hhninc), by =
""id""][, .SD[.N], by = ""id""]

上面是data.table特殊chaining方式，若要考慮易讀性可以分3行。

medical[,docvis.sum:=sum(docvis), by = ""id""]
medical[,hhninc.mean:=mean(hhninc), by = ""id""]
medical <- medical[, .SD[.N], by = ""id""]

或是pipe的方式。

medical <- medical[,docvis.sum:=sum(docvis), by = ""id""] %>%
  .[,hhninc.mean:=mean(hhninc), by = ""id""] %>%
  .[, .SD[.N], by = ""id""]

--","R_Language"
"272","M.1528570227.A.A87","greg9773606","問題","Two way anova",2018-06-10 02:50:25,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

要做雙因子變異數分析 可是ANOVA表卻顯示不出F值和P值

也顯示不出Residuals跟Signif.code

只顯示出df sum-square mean-aquare

會不會是原始檔案的問題?

[程式範例]:

data18 = read.csv(""xxx/yyy/zzz.csv"",header=T)
Result = aov(y~A*B,data=data18)
summary(Result)

原始檔案：https://drive.google.com/open?id=1S1bPYhH9LXbcQ_l_Xj5G99imPLFX_5Lv--","R_Language"
"273","M.1528552170.A.2ED","genius888053","問題","Re: 求解此檔案如何讀入和如何跑出分群",2018-06-09 21:49:28,NA,NA,"大大我後來讀取成功之後
我試著去跑分群，可是卻發生這種情況https://i.imgur.com/3cKpen8.jpghttps://i.imgur.com/Y6bqvf1.jpg請問我該如何去跑這類型的分群呢
我用過kmeans 還有hclust這類型的分群法
可是都跑不出來...
如果分群跑出來之後要如何判定她的成功率呢？

抱歉 R軟體新手 不太懂這個...
懇請大大能夠再解惑迷津



--","R_Language"
"274","M.1528549156.A.269","jasonfghx","問題","lm問題",2018-06-09 20:59:13,NA,NA,"[問題類型]:
程式功能諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:https://imgur.com/zTNHbHv我的type變數是factor 想用他當y

其他幾個當作x1  x2   x3作回歸

data.glm1 <- lm(factor(type)~X_Maximum+Y_Maximum,data=train)

這樣的程式碼無法執行, 想請教可以如何改善?

我用了multinom這個函式就可以   可以請教如果y是factor 就一定要用multinom這個嗎?

其他的lm就不能用否?

謝謝回答

[程式範例]:

require(nnet)
data.glm1 <- lm(factor(type)~X_Maximum+Y_Maximum,data=train)#不可行
data.glm <- multinom(formula=type~.,data=train)#成功執行
#若有需要我提供詳細的再說  謝謝

[關鍵字]:


--","R_Language"
"275","M.1528538057.A.4F4","piggood","問題","Re: 用迴圈整理同個ID的看病次數",2018-06-09 17:54:13,NA,NA,"※ 引述《ntpuisbest (阿龍)》之銘言：: library(COUNT): data(rwm5yr): medical<-rwm5yr: https://imgur.com/xLr3I5j: 我的目的是像這樣: 同個id是同個人: 我想要把資料整理成: 去計算同個人的 總共 的看病次數: 其他的column 就用 同個id最後的 資訊: 最後要整理成: id   docvis  age: 1    1        56: 2    4        48: 3    13       62: 請問有套件可以做到這件事情嗎: 還是怎麼寫這個迴圈呢目前想到的方式
但也不是很簡潔
不過還能用


# 先建立一個 medical1 ，除了 docvis 和 hhninc 之外，都取最後一筆觀察值的資料

   medical1 <- medical %>%
     group_by(id) %>%
     summarise_at(vars(-docvis,-hhninc), last)


# 再建 medical2 專門處理 docvis 跟 hhninc 的各別需求

   medical2 <- medical %>%
     group_by(id) %>%
     summarise(sum(docvis), mean(hhninc))

# 合併在一起

   medical3 <- data.frame(medical2,medical1)

--","R_Language"
"276","M.1528518253.A.295","ntpuisbest","問題","用迴圈整理同個ID的看病次數",2018-06-09 12:24:10,NA,NA,"library(COUNT)
data(rwm5yr)
medical<-rwm5yrhttps://imgur.com/xLr3I5j我的目的是像這樣

同個id是同個人

我想要把資料整理成

去計算同個人的 總共 的看病次數

其他的column 就用 同個id最後的 資訊

最後要整理成

id   docvis  age
1    1        56
2    4        48
3    13       62

請問有套件可以做到這件事情嗎

還是怎麼寫這個迴圈呢



--","R_Language"
"277","M.1528474412.A.814","andrew43","問題","Re: 求解此檔案如何讀入和如何跑出分群",2018-06-09 00:13:30,NA,NA,"大概寫了一下。
最後 res 是 species by locations 的 binary matrix 為所求。
重點是在要把所有的地點集中起來再逐列與各spp出現的地點做比對。

library(magrittr)

## fatch data
con <-
  url(
""http://archive.ics.uci.edu/ml/machine-learning-databases/plants/plants.data"",""r""
  )
src <- readLines(con)
close(con)

## split string by comma
srcLine <- strsplit(src, "","")

## get sp name
sppName <-
  lapply(srcLine, function(x) {
    x[1]
  }) %>%
  unlist

## get location name per sp
locName <-
  lapply(srcLine, function(x) {
    x[-1]
  })

## get all unique location name
locNameUni <- locName %>% unlist %>% unique

## binary matrix
res <-
  lapply(locName, function(x) {
    locNameUni %in% x
  }) %>%
  do.call(""rbind"", .) %>%
  set_colnames(locNameUni) %>%
  set_rownames(sppName)※ 引述《genius888053 (少年YO)》之銘言：: https://i.imgur.com/InHBPvq.jpg: 我複製到記事本後用txt檔案方式讀取可是卻發生以下問題: https://i.imgur.com/A7iKdyy.jpg: 上圖我有試著將sep刪除掉 可是一樣發生上述情形: https://i.imgur.com/dnBtUX7.jpg: 儘管我讀出來後卻發生資料不整齊和變數只有一筆的情形: 求板上大大提點: 第一次發文，有誤請見諒--","R_Language"
"278","M.1528428523.A.3B3","genius888053","問題","求解此檔案如何讀入和如何跑出分群",2018-06-08 11:28:41,NA,NA,"https://i.imgur.com/InHBPvq.jpg我複製到記事本後用txt檔案方式讀取可是卻發生以下問題https://i.imgur.com/A7iKdyy.jpg上圖我有試著將sep刪除掉 可是一樣發生上述情形https://i.imgur.com/dnBtUX7.jpg儘管我讀出來後卻發生資料不整齊和變數只有一筆的情形

求板上大大提點


第一次發文，有誤請見諒

--","R_Language"
"279","M.1528420428.A.10F","jasonfghx","問題","模型輸出問題",2018-06-08 09:13:45,NA,NA,"[問題類型]:
程式功能諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我有找到這個套件stargazer
將模型寫成文字 但我想請教是否有套件或方法把模型存成一個檔案

將來有需要就將模型load進去然後作要作的事之類的

謝謝答覆

希望是一個通用方法  例如不管是SVM 或決策樹的模型都能夠輸出

[程式範例]:


[關鍵字]:

--","R_Language"
"280","M.1528400517.A.EAD","ntpuisbest","問題","apply能否指定行數dummyvariablecoding",2018-06-08 03:41:54,NA,NA,"請問各位

apply可以指定行數嗎

我不想要每一行都做

想要類似指定2到7行那樣

請問這個要怎麼處理

2.另外問有沒有函數專門在處理虛擬變數的model matrix的

目前看到的是dummy

可是我的資料會有很多個類別變數

像是 種族 性別 國籍
     黑人 男生 台灣
     白人 女生 美國

     黃人 男生 德國
有沒有函數可以直接幫我把上述的類別型變數 直接變成

model matrix( design matrix)

類似

(以黑人，男生，台灣當參考設0)

白人 黃人 女生 美國 德國
0     0   0      0   0
1     0   1      1   0
0     1   0      0   1

謝謝各位大大





--","R_Language"
"281","M.1528395196.A.196","ntpuisbest","問題","grplasso的使用",2018-06-08 02:13:13,NA,NA,"目標是使用grplasso 來挑選重要變數

就是使用group lasso

我的資料是response 是連續的 是房價

regressor 是 類別的 像是建物型態 ex 公寓大廈 高樓大廈 透天厝等等

我的資料類似長這樣

因為有很多個變數 所以要使用group lasso

房價 建物型態 坪數

100  公寓大廈  20

但是我看不懂 那個 grplasso 的 index怎麼用

不知道可不可以請強者稍微示範一下 程式碼該怎麼打

下面附上範例的code



## Use the Logistic Group Lasso on the splice data set
data(splice)
## Define a list with the contrasts of the factors
contr <- rep(list(""contr.sum""), ncol(splice) - 1)
names(contr) <- names(splice)[-1]
## Fit a logistic model
fit.splice <- grplasso(y ~ ., data = splice, model = LogReg(), lambda = 20,
contrasts = contr, standardize = TRUE)
## Perform the Logistic Group Lasso on a random dataset
set.seed(79)
n <- 50 ## observations
p <- 4 ## variables
## First variable (intercept) not penalized, two groups having 2 degrees
## of freedom each


index <- c(NA, 2, 2, 3, 3)


主要就是這行看不懂

看起來好像是 X1 X2 X3 X4

分別有2,2,3,3個 level

可是我去明明 x1 x2 x3 都是連續的阿

## Create a random design matrix, including the intercept (first column)
x <- cbind(1, matrix(rnorm(p * n), nrow = n))
colnames(x) <- c(""Intercept"", paste(""X"", 1:4, sep = """"))lambdamax 9
par <- c(0, 2.1, -1.8, 0, 0)
prob <- 1 / (1 + exp(-x %*% par))
mean(pmin(prob, 1 - prob)) ## Bayes risk
y <- rbinom(n, size = 1, prob = prob) ## binary response vector
## Use a multiplicative grid for the penalty parameter lambda, starting
## at the maximal lambda value
lambda <- lambdamax(x, y = y, index = index, penscale = sqrt,
model = LogReg()) * 0.9^(0:30)
## Fit the solution path on the lambda grid
fit <- grplasso(x, y = y, index = index, lambda = lambda, model = LogReg(),
penscale = sqrt,
control = grpl.control(update.hess = ""lambda"", trace = 0))
## Plot coefficient paths
plot(fit)

--","R_Language"
"282","M.1528305157.A.203","emily40830","問題","如何在shiny app中控制ggplot facet_wrap的個別高度?",2018-06-07 01:12:34,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)




[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

最近在寫shiny app 有一個問題一直沒辦法解決
就是我利用ggplot 的facet_wrap 將每組資料 print出來
但是由於每次篩選出來的組數都不同
然而在設定圖片高度的地方好像是在ui的plotOutput就已經固定了
導致每次出來的圖總高度都會一樣
如果組數多的就會壓縮在同樣的高度裡

因此想問要如何在shiny當中使每次print出來的圖
每組的高度是固定的 組數越多圖就越長

我有在stackoverflow找到相似的問題如下https://stackoverflow.com/questions/18683370/control-ggplot2-facet-height-independently-from-number-of-row-facets回答者是說用knit就可以直接改fig.height
但是shiny app是用R檔寫的 好像不能用knit

所以想上來問問大家 有沒有什麼解決的方法
亦或者是改成shinydashboard之類的就有方法可以解決？



[程式範例]:

由於程式碼過長，我用截圖示意問題
這是當資料只有一組時，高度就會整個拉很長https://imgur.com/a/Xdre2ac多組的時候，又都會擠在一起（圖中示意的是六組）https://imgur.com/a/EJdKNdt[環境敘述]:> sessionInfo()R version 3.4.3 (2017-11-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] lubridate_1.7.4 forcats_0.2.0   stringr_1.3.1   purrr_0.2.5     readr_1.1.1
 [6] tidyr_0.8.1     tibble_1.4.2    tidyverse_1.2.1 bindrcpp_0.2.2  knitr_1.20
[11] ggplot2_2.2.1   dplyr_0.7.5     shiny_1.0.5

[關鍵字]:

shiny ggplot facet_wrap

--","R_Language"
"283","M.1528299984.A.D74","dogi2007","情報","徵求 Datacamp 帳號分享",2018-06-06 23:46:21,NA,NA,"大家好，相信這邊的人對於 Datacamp 學習平台一定不陌生！
能夠邊學習邊 Coding 真的很有效率！！
另外他們今年除了原本的 Python/ R外，還多了 SQL/ Spark/ Shell 的課程，完全為了
資料科學家服務QAQ

我剛拿到 1 年 3000 台幣的優惠價格，想要找一個人跟我平分
（帳號可以用到 2019/6/5，全部課程吃到飽）
我目前人在國外，跟台灣差幾個小時，時間可以錯開∼

另外，不用擔心同時在線的問題，我有試過用不同裝置不同網路登同一個帳號都沒問題，
可以獨立學習。進度部分也不用擔心，做過的題目就 reset 就可以恢復原狀！

有興趣的話請站內信我，一個人是 1500 台幣

不確定 DataCamp 適不適合你的可以試試看這個入門免費課程https://www.datacamp.com/courses/intro-to-python-for-data-scienceDataCamp 是我目前覺得最好用的學習網站
希望能找到一起學習的版友。

[關鍵字]: Datacamp

[出處]: Datacamp Official Website

[重點摘要]: 尋求帳號共享的人，一個人負擔 1,500 台幣，會員到明年 6/5

--","R_Language"
"284","M.1528295928.A.76D","celestialgod","問題","Re: 使用rvest無法爬出網頁的數值",2018-06-06 22:38:45,NA,NA,"※ 引述《j2225653 (水中魚)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 如圖: https://i.imgur.com/ifORXBa.jpg: 已知方法將綠框的數字爬下來: 一樣方法想把網頁中的紅框中三個數值用rvest爬蟲下來卻無法: [程式範例]:: library(rvest): url <-""https://www.wantgoo.com/stock/1101?searchType=stocks"": htmldata <- read_html(url): DATA1 <- htmldata %>% html_nodes("".idx-change span"") %>% html_text(): print(DATA1): #DATA1 可爬到我想要的數值: DATA2 <- htmldata %>% html_nodes("".labs span"") %>% html_text(): print(DATA2): #DATA2卻一直爬到空值: [環境敘述]:: R version 3.4.4 (2018-03-15) -- ""Someone to Lean On"": Copyright (C) 2018 The R Foundation for Statistical Computing: Platform: x86_64-w64-mingw32/x64 (64-bit): [關鍵字]:: 爬蟲認真爬一下javascript code的話就能看到他把那三個值寫在javascript的code裡面

程式：

library(rvest)

url <-""https://www.wantgoo.com/stock/1101?searchType=stocks""htmldata <- read_html(url)

DATA2 <- htmldata %>% html_nodes(""script"") %>% sapply(html_text) %>%
 `[`(grepl(""^var execPrice"", .)) %>% strsplit("";?\\s*var\\s+"") %>% `[[`(1) %>%
  `[`(2:4) %>% paste0(collapse = "","") %>% sprintf(fmt = ""list(%s)"") %>%
  {eval(parse(text = .))}
print(DATA2)

# $execPrice
# [1] 44.8
#
# $supportPriceAvg
# [1] 40.75
#
# $preasurePriceAvg
# [1] 45.74

--","R_Language"
"285","M.1528292215.A.47B","j2225653","問題","使用rvest無法爬出網頁的數值",2018-06-06 21:36:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

如圖https://i.imgur.com/ifORXBa.jpg已知方法將綠框的數字爬下來
一樣方法想把網頁中的紅框中三個數值用rvest爬蟲下來卻無法



[程式範例]:

library(rvest)

url <-""https://www.wantgoo.com/stock/1101?searchType=stocks""htmldata <- read_html(url)

DATA1 <- htmldata %>% html_nodes("".idx-change span"") %>% html_text()
print(DATA1)

#DATA1 可爬到我想要的數值

DATA2 <- htmldata %>% html_nodes("".labs span"") %>% html_text()
print(DATA2)

#DATA2卻一直爬到空值

[環境敘述]:

R version 3.4.4 (2018-03-15) -- ""Someone to Lean On""
Copyright (C) 2018 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

[關鍵字]:

爬蟲


--","R_Language"
"286","M.1528288066.A.8F0","celestialgod","問題","Re: dataframe字串切割",2018-06-06 20:27:43,NA,NA,"※ 引述《wmj10054039 (MJ)》之銘言：: ※ 引述《celestialgod (天)》之銘言：: : 程式：: : library(data.table): : library(pipeR): : library(stringr): : dataStr <- ""流水號  課程名稱        時間     地點  人數: : 102            A  二3,4四5,7       甲    10: : 248            B     一1,2,3       乙    20: : 314            C  三4五7,8,a       丙     5"": : removeEmptyFunc <- function(x) x[nchar(x) > 0]: : fread(dataStr) %>>%: :   `[`(j = `:=`(星期 = str_split(時間, ""[a-zA-Z0-9,]+"") %>>%: :                        lapply(removeEmptyFunc),: :                節次 = str_split(時間, ""[^a-zA-Z0-9,]+"") %>>%: :                        lapply(removeEmptyFunc))) %>>%: :   `[`(j = .(星期 = unlist(星期), 節次 = unlist(節次)),: :          by = .(流水號, 課程名稱, 地點, 人數)) %>>%: :   `[`(j = `:=`(節次 = str_split(節次, "",""))) %>>%: :   `[`(j = .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期)): : ## no pipe 程式碼: : dataDT <- fread(dataStr): : dataDT[ , `:=`(星期 = lapply(str_split(時間, ""[a-zA-Z0-9,]+""),: :                              removeEmptyFunc),: :                節次 = lapply(str_split(時間, ""[^a-zA-Z0-9,]+""),: :                              removeEmptyFunc))]: : tmpDT <- dataDT[ , .(星期 = unlist(星期), 節次 = unlist(節次)),: :                  by = .(流水號, 課程名稱, 地點, 人數)]: : tmpDT[ , `:=`(節次 = str_split(節次, "",""))]: : tmpDT[ , .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期)]: : 結果：: : #     流水號 課程名稱 地點 人數 星期 節次: : #  1:    102        A   甲   10   二    3: : #  2:    102        A   甲   10   二    4: : #  3:    102        A   甲   10   四    5: : #  4:    102        A   甲   10   四    7: : #  5:    248        B   乙   20   一    1: : #  6:    248        B   乙   20   一    2: : #  7:    248        B   乙   20   一    3: : #  8:    314        C   丙    5   三    4: : #  9:    314        C   丙    5   五    7: : # 10:    314        C   丙    5   五    8: : # 11:    314        C   丙    5   五    a: 我在回應區的問題是想要把如果節次包含3節以上的課程，只取出頭跟尾的節次，並且只有: 一節課的課程重複兩次，也就是說每個課程重複在dataframe的次數都會是偶數倍(主要: 目的是想知道每個時段下不同地點會產生的進出人數)，舉例來說:: 流水號  課程名稱          時間   人數   地點: 102       A         二3,4四5,7     10     甲: 248       B            一1,2,3     20     乙: 314       C         三4五7,8,a      5     丙: 整理成: 流水號    課程名稱    地點   人數  星期  節次: 102            A        甲     10    二     3: 102            A        甲     10    二     4: .              .: .              .: .              .: 248            B        乙     20    一     1: 248            B        乙     20    一     3: 314            C        丙      5    三     4: 314            C        丙      5    三     4: 314            C        丙      5    五     7: 314            C        丙      5    五     a: 我目前的想法是利用c大處理我之前問題的方法，將已經把時間拆開成星期跟節次但: 還沒unlist的節次取出，用迴圈搭配條件判斷存成新的list再放回data.frame，但發現: 這個方法存成的list只會有最後一個元素有值，其他都是NULL。想請教是哪邊有錯誤，: 或是有更好的解決方法，謝謝。: [程式範例]: oldlist = df$節次: newlist = list(): for (i in length(oldlist)) {:  if (length(oldlist[[i]]) == 1){:   newlist[[i]] = rep(oldlist[[i]][1], 2):   }else if (length(oldlist[[i]]) == 2){:   newlist[[i]] = c(oldlist[[i]][1], oldlist[[i]][2]):   }else if (length(oldlist[[i]]) == 3){:   newlist[[i]] = c(oldlist[[i]][1], olslist[[i]][3]):   }: }直接用原本整理好的data.table在整理一下就好了

(outDT是前次的輸出)

# 先轉成factor (節次為1~8 然後接A~E，如果不對再自行調整)
# 這樣會轉成整數比較好做
outDT[ , 節次 := factor(節次, c(1:8, letters[1:5]))]
# 用diff找出前後都相差1的節次還把它們移除掉
outDT[ , filter := diff(c(-2, 節次)) == 1 & diff(c(節次, 20)) == 1,
       by = .(流水號, 課程名稱, 地點, 人數, 星期)]
# 過濾掉前後都相差1的節次
finalDT <- outDT[filter == FALSE]
# 把filter這個欄位移除掉
finalDT[ , filter := NULL]

# 最後：

#    流水號 課程名稱 地點 人數 星期 節次
# 1:    102        A   甲   10   二    3
# 2:    102        A   甲   10   二    4
# 3:    102        A   甲   10   四    5
# 4:    102        A   甲   10   四    7
# 5:    248        B   乙   20   一    1
# 6:    248        B   乙   20   一    3
# 7:    314        C   丙    5   三    4
# 8:    314        C   丙    5   五    7
# 9:    314        C   丙    5   五    a

--","R_Language"
"287","M.1528278141.A.A02","wmj10054039","問題","Re: dataframe字串切割",2018-06-06 17:42:18,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《wmj10054039 (MJ)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 我目前整理了一份學校所有課程的時間表，想知道不同星期，不同地點，各時段的: : 人數統計。dataframe資料範例如下:: : 流水號  課程名稱        時間     地點  人數: : 102            A  二3,4四5,7       甲    10: : 248            B     一1,2,3       乙    20: : 314            C  三4五7,8,a       丙     5: : 想請問各位可以用甚麼方法對時間那一欄作字串切割變成以下新的dataframe: : 流水號  課程名稱    星期  節次  地點 人數: : 102            A      二     3    甲   10: : 102            A      二     4    甲   10: : 102            A      四     5    甲   10: : 102            A      四     7    甲   10: : 248            B      一     1    乙   20: : 248            B      一     2    乙   20: : .              .: : .              .: : .              .: : 目前想法只有想到for迴圈搭配strspilt，但還是想不到實際寫法，麻煩各位指教了，謝謝: : [環境敘述]: : R version 3.4.2: 程式：: library(data.table): library(pipeR): library(stringr): dataStr <- ""流水號  課程名稱        時間     地點  人數: 102            A  二3,4四5,7       甲    10: 248            B     一1,2,3       乙    20: 314            C  三4五7,8,a       丙     5"": removeEmptyFunc <- function(x) x[nchar(x) > 0]: fread(dataStr) %>>%:   `[`(j = `:=`(星期 = str_split(時間, ""[a-zA-Z0-9,]+"") %>>%:                        lapply(removeEmptyFunc),:                節次 = str_split(時間, ""[^a-zA-Z0-9,]+"") %>>%:                        lapply(removeEmptyFunc))) %>>%:   `[`(j = .(星期 = unlist(星期), 節次 = unlist(節次)),:          by = .(流水號, 課程名稱, 地點, 人數)) %>>%:   `[`(j = `:=`(節次 = str_split(節次, "",""))) %>>%:   `[`(j = .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期)): ## no pipe 程式碼: dataDT <- fread(dataStr): dataDT[ , `:=`(星期 = lapply(str_split(時間, ""[a-zA-Z0-9,]+""),:                              removeEmptyFunc),:                節次 = lapply(str_split(時間, ""[^a-zA-Z0-9,]+""),:                              removeEmptyFunc))]: tmpDT <- dataDT[ , .(星期 = unlist(星期), 節次 = unlist(節次)),:                  by = .(流水號, 課程名稱, 地點, 人數)]: tmpDT[ , `:=`(節次 = str_split(節次, "",""))]: tmpDT[ , .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期)]: 結果：: #     流水號 課程名稱 地點 人數 星期 節次: #  1:    102        A   甲   10   二    3: #  2:    102        A   甲   10   二    4: #  3:    102        A   甲   10   四    5: #  4:    102        A   甲   10   四    7: #  5:    248        B   乙   20   一    1: #  6:    248        B   乙   20   一    2: #  7:    248        B   乙   20   一    3: #  8:    314        C   丙    5   三    4: #  9:    314        C   丙    5   五    7: # 10:    314        C   丙    5   五    8: # 11:    314        C   丙    5   五    a我在回應區的問題是想要把如果節次包含3節以上的課程，只取出頭跟尾的節次，並且只有
一節課的課程重複兩次，也就是說每個課程重複在dataframe的次數都會是偶數倍(主要
目的是想知道每個時段下不同地點會產生的進出人數)，舉例來說:

流水號  課程名稱          時間   人數   地點
102       A         二3,4四5,7     10     甲
248       B            一1,2,3     20     乙
314       C         三4五7,8,a      5     丙

整理成

流水號    課程名稱    地點   人數  星期  節次
102            A        甲     10    二     3
102            A        甲     10    二     4
.              .
.              .
.              .
248            B        乙     20    一     1
248            B        乙     20    一     3
314            C        丙      5    三     4
314            C        丙      5    三     4
314            C        丙      5    五     7
314            C        丙      5    五     a

我目前的想法是利用c大處理我之前問題的方法，將已經把時間拆開成星期跟節次但
還沒unlist的節次取出，用迴圈搭配條件判斷存成新的list再放回data.frame，但發現
這個方法存成的list只會有最後一個元素有值，其他都是NULL。想請教是哪邊有錯誤，
或是有更好的解決方法，謝謝。

[程式範例]
oldlist = df$節次
newlist = list()
for (i in length(oldlist)) {
 if (length(oldlist[[i]]) == 1){
  newlist[[i]] = rep(oldlist[[i]][1], 2)
  }else if (length(oldlist[[i]]) == 2){
  newlist[[i]] = c(oldlist[[i]][1], oldlist[[i]][2])
  }else if (length(oldlist[[i]]) == 3){
  newlist[[i]] = c(oldlist[[i]][1], olslist[[i]][3])
  }
}

--","R_Language"
"288","M.1528254529.A.9B0","andrew43","問題","Re: 兩層for迴圈問題",2018-06-06 11:08:45,NA,NA,"我不是很明白 nc 檔你想怎麼處理，
所以這篇只簡單說明一次讀入多個 nc 檔怎麼把它們「儲存在同一個 list 裡面」。
假設有 2 * 24 個 nc 檔案，檔名叫
01-00.nc 01-01.nc 01-02.nc ... 01-23.nc 02-00.nc ... 02-23.nc

library(magrittr)
library(stringr)
library(ncdf4)
dt <-
  data.frame(
     day = gl(2, 24, labels = (1:2) %>% str_pad(2, pad = ""0"")),
     hour = gl(24, 1, labels = (0:23) %>% str_pad(2, pad = ""0""))
  )
dt$filename <- paste0(dt$day, ""-"", dt$hour, "".nc"")
nc.res <- vector(""list"", nrow(dt))
names(nc.res) <- dt$filename
for(i in dt$filename){
  nc.res[[i]] <- nc_open(i)
}

則 nc.res 為所求，而 dt 可方便對照檔名與日期時間。
之後對 nc.res 的呼叫就和一般 list 一樣了，
例如 nc.res[[1]] 或 nc.res$`01-00.nc` 之類的。
你也可能需要用到 lapply() 方便操作 list。※ 引述《AndrewShi (沒有妳的我)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想要讀多筆名稱相近的時間資料(nc檔)進R，資料的時間長度為一小時一筆，而我想要: 讀2天共48筆資料進R，因此需寫兩層for迴圈(分別為日期和小時)，我的程式碼如下，雖然: 過程中沒有出現error，但讀進來的資料日期和小時是交錯的(環境敘述中的圖，只有24筆: )所以想請問該如何解決??謝謝。: 資料名稱唯一的差別在於#precip那行的""01""(日期)和""00""(小時)。: [程式範例]:: rm(list=ls()): library(ncdf4): day=c(""01"",""02""): hour=c(""00"",""01"",""02"",""03"",""04"",""05"",""06"",""07"",""08"",""09"",""10"",11:23): class(day): class(hour): nc<-list(): for(i in c(1:2)){:   for(j in c(0:23)){:     precip.file<-paste(""C:\\Users\\TOM\\Desktop\\R(資料庫: )\\201505\\gsmap_mvk.201505"",paste(day[i=(1:2)]),paste("".""),:                        paste(hour[j=(0:23)],paste(""00.v6.4133.0.nc"")),sep=""""):     #precip<-""C:\\Users\\TOM\\Desktop\\R(資料庫: )\\20150501\\gsmap_mvk.201505""01"".""00""00.v6.4133.0.nc"":     #nc[i,j]=rbind(i,j):   }:     i<-i+1:     nc[i,j]<-nc_open(precip.file): }: precip.file: View(matrix(precip.file)): [環境敘述]:: 執行畫面拍照截圖於推文中: [關鍵字]:: 兩層for迴圈   nc檔   讀取多筆資料--","R_Language"
"289","M.1528188678.A.DB2","e181280","問題","篩選含特定文字的資料",2018-06-05 16:51:16,NA,NA,"- 心得: 當你自己想要分享經驗時，請使用這個類別。
- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前在自學寫PTT爬蟲，暫以Stock版為例，由於是抓所有資料，
想要篩選出〔請益〕的那一行的資料，但用filter等一些網路查到的方法去處理
卻一直無法處理完成，所以想請問如何解決，謝謝

做出來的：
   datetime            title                                     month day
   <dttm>              <chr>                                     <chr> <chr>
 1 2018-06-02 21:22:17 Re: [請益] 台灣程式交易工具現況            06    02
 2 2018-06-02 21:55:47 Re: [新聞] 加入MSCI首日 滬指跌0.66% 創業板 06    02
 3 2018-06-02 22:06:30 Re: [心得] 第一季壽險到底虧多少?           06    02
 4 2018-06-02 22:44:21 [請益] 最近生技股在漲什麼呢？              06    02
 5 2018-06-02 22:46:47 [請益] 是不是沒人價值派轉技術派?           06    02
 6 2018-06-02 23:00:09 ""[標的] 3029 零壹 多 ""                     06    02
 7 2018-06-02 23:01:49 [請益] 國泰科技ETF                         06    02
 8 2018-06-03 01:06:21 Re: [心得] 如果能生存，交易是不是最棒的    06    03
 9 2018-06-03 02:27:24 Re: [請益] 台灣程式交易工具現況            06    03
10 2018-06-03 04:16:50 ""Re: [請益] 請問 \""量縮到極盡\"" 怎麼看？   06    03

希望做到：
   datetime            title                                     month day
   <dttm>              <chr>                                     <chr> <chr>
 1 2018-06-02 22:44:21 [請益] 最近生技股在漲什麼呢？              06    02
 2 2018-06-02 22:46:47 [請益] 是不是沒人價值派轉技術派?           06    02

[程式範例]:
filter(article.table,title %in% '請益')

[環境敘述]:
# A tibble: 0 x 4
#.. with 4 variables: datetime <dttm>, title <chr>, month <chr>, day <chr>

[關鍵字]:
filter

--","R_Language"
"290","M.1528129690.A.7B9","celestialgod","問題","Re: dataframe字串切割",2018-06-05 00:28:06,NA,NA,"※ 引述《wmj10054039 (MJ)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我目前整理了一份學校所有課程的時間表，想知道不同星期，不同地點，各時段的: 人數統計。dataframe資料範例如下:: 流水號  課程名稱        時間     地點  人數: 102            A  二3,4四5,7       甲    10: 248            B     一1,2,3       乙    20: 314            C  三4五7,8,a       丙     5: 想請問各位可以用甚麼方法對時間那一欄作字串切割變成以下新的dataframe: 流水號  課程名稱    星期  節次  地點 人數: 102            A      二     3    甲   10: 102            A      二     4    甲   10: 102            A      四     5    甲   10: 102            A      四     7    甲   10: 248            B      一     1    乙   20: 248            B      一     2    乙   20: .              .: .              .: .              .: 目前想法只有想到for迴圈搭配strspilt，但還是想不到實際寫法，麻煩各位指教了，謝謝: [環境敘述]: R version 3.4.2程式：

library(data.table)
library(pipeR)
library(stringr)

dataStr <- ""流水號  課程名稱        時間     地點  人數
102            A  二3,4四5,7       甲    10
248            B     一1,2,3       乙    20
314            C  三4五7,8,a       丙     5""

removeEmptyFunc <- function(x) x[nchar(x) > 0]
fread(dataStr) %>>%
  `[`(j = `:=`(星期 = str_split(時間, ""[a-zA-Z0-9,]+"") %>>%
                       lapply(removeEmptyFunc),
               節次 = str_split(時間, ""[^a-zA-Z0-9,]+"") %>>%
                       lapply(removeEmptyFunc))) %>>%
  `[`(j = .(星期 = unlist(星期), 節次 = unlist(節次)),
         by = .(流水號, 課程名稱, 地點, 人數)) %>>%
  `[`(j = `:=`(節次 = str_split(節次, "",""))) %>>%
  `[`(j = .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期))


## no pipe 程式碼

dataDT <- fread(dataStr)
dataDT[ , `:=`(星期 = lapply(str_split(時間, ""[a-zA-Z0-9,]+""),
                             removeEmptyFunc),
               節次 = lapply(str_split(時間, ""[^a-zA-Z0-9,]+""),
                             removeEmptyFunc))]
tmpDT <- dataDT[ , .(星期 = unlist(星期), 節次 = unlist(節次)),
                 by = .(流水號, 課程名稱, 地點, 人數)]
tmpDT[ , `:=`(節次 = str_split(節次, "",""))]
tmpDT[ , .(節次 = unlist(節次)), by = .(流水號, 課程名稱, 地點, 人數, 星期)]

結果：

#     流水號 課程名稱 地點 人數 星期 節次
#  1:    102        A   甲   10   二    3
#  2:    102        A   甲   10   二    4
#  3:    102        A   甲   10   四    5
#  4:    102        A   甲   10   四    7
#  5:    248        B   乙   20   一    1
#  6:    248        B   乙   20   一    2
#  7:    248        B   乙   20   一    3
#  8:    314        C   丙    5   三    4
#  9:    314        C   丙    5   五    7
# 10:    314        C   丙    5   五    8
# 11:    314        C   丙    5   五    a


--","R_Language"
"291","M.1528127261.A.726","wmj10054039","問題","dataframe字串切割",2018-06-04 23:47:39,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我目前整理了一份學校所有課程的時間表，想知道不同星期，不同地點，各時段的
人數統計。dataframe資料範例如下:
流水號  課程名稱        時間     地點  人數
102            A  二3,4四5,7       甲    10
248            B     一1,2,3       乙    20
314            C  三4五7,8,a       丙     5

想請問各位可以用甚麼方法對時間那一欄作字串切割變成以下新的dataframe

流水號  課程名稱    星期  節次  地點 人數
102            A      二     3    甲   10
102            A      二     4    甲   10
102            A      四     5    甲   10
102            A      四     7    甲   10
248            B      一     1    乙   20
248            B      一     2    乙   20
.              .
.              .
.              .

目前想法只有想到for迴圈搭配strspilt，但還是想不到實際寫法，麻煩各位指教了，謝謝


[環境敘述]
R version 3.4.2



--","R_Language"
"292","M.1528043978.A.B8C","AndrewShi","問題","兩層for迴圈問題",2018-06-04 00:39:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想要讀多筆名稱相近的時間資料(nc檔)進R，資料的時間長度為一小時一筆，而我想要
讀2天共48筆資料進R，因此需寫兩層for迴圈(分別為日期和小時)，我的程式碼如下，雖然
過程中沒有出現error，但讀進來的資料日期和小時是交錯的(環境敘述中的圖，只有24筆
)所以想請問該如何解決??謝謝。
資料名稱唯一的差別在於#precip那行的""01""(日期)和""00""(小時)。

[程式範例]:
rm(list=ls())
library(ncdf4)
day=c(""01"",""02"")
hour=c(""00"",""01"",""02"",""03"",""04"",""05"",""06"",""07"",""08"",""09"",""10"",11:23)
class(day)
class(hour)
nc<-list()
for(i in c(1:2)){
  for(j in c(0:23)){
    precip.file<-paste(""C:\\Users\\TOM\\Desktop\\R(資料庫
)\\201505\\gsmap_mvk.201505"",paste(day[i=(1:2)]),paste("".""),
                       paste(hour[j=(0:23)],paste(""00.v6.4133.0.nc"")),sep="""")
    #precip<-""C:\\Users\\TOM\\Desktop\\R(資料庫
)\\20150501\\gsmap_mvk.201505""01"".""00""00.v6.4133.0.nc""
    #nc[i,j]=rbind(i,j)
  }
    i<-i+1
    nc[i,j]<-nc_open(precip.file)
}
precip.file
View(matrix(precip.file))

[環境敘述]:
執行畫面拍照截圖於推文中

[關鍵字]:
兩層for迴圈   nc檔   讀取多筆資料

--","R_Language"
"293","M.1527766135.A.B6D","zcyee","問題","輸出決策樹圖 可以調版面大小嗎",2018-05-31 19:28:53,NA,NA,"因為我的決策樹分枝比較多

沒辦法拉很大 輸出的圖很小 字都不清楚

想請問有辦法解決嗎
-----
Sent from JPTT on my iPhone

--","R_Language"
"294","M.1527706683.A.3DF","AmigoSafin","問題","如何將R Studio Console的自己顏色改回",2018-05-31 02:57:57,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好,

我不小心在R Studio上方的workplace pane裡面的pane layout ""Appearance""部分
改動了原來的設定
結果console裡面的error變成跟code一樣的藍色
只是比較淡一點的藍色
方便請教大家原來的設定的Editor theme & Editor font是什麼嗎?
只是覺得有點不方便...
謝謝大家了!!

[環境敘述]:R StudioR version 3.4.4[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"295","M.1527689340.A.342","jasonfghx","問題","for迴圈問題",2018-05-30 22:08:58,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

for(j in 1:nrow(datasteel))
  if (datasteel[j,28]==1)
  {
    datasteel[j,35] <- colnames(datasteel[,28])
  }

for(j in 1:nrow(datasteel))
  if (datasteel[j,29]==1)
  {
    datasteel[j,35] <- colnames(datasteel[,29])
  }

for(j in 1:nrow(datasteel))
  if (datasteel[j,30]==1)
  {
    datasteel[j,35] <- colnames(datasteel[,30])
  }

....

for(j in 1:nrow(datasteel))
  if (datasteel[j,34]==1)
  {
    datasteel[j,35] <- colnames(datasteel[,34])
  }




我寫成這樣

for(i in 28:34)
{
  for(j in 1:nrow(datasteel)){
    if (datasteel[j,i]==1)
    {
      datasteel[j,35] <- colnames(datasteel[,i])
    }}
}

Error in `[.data.table`(datasteel, j, i) :
  j (the 2nd argument inside [...]) is a single symbol but column name 'i' is
not found. Perhaps you intended DT[, ..i]. This difference to data.frame is
deliberate and explained in FAQ 1.1.

有點不解, 想一日了自己解決不出來想請教可以怎麼改善

謝謝回復

[程式範例]:


[關鍵字]:

--","R_Language"
"296","M.1527513098.A.939","ntpuisbest","問題","實價登錄的位置處理",2018-05-28 21:11:36,NA,NA,"想問

有沒有辦法讓實價登錄的門牌地址

轉成經緯度呢

我的資料地址是去識別化的

只有類似

台北市中山區中正路1到30號那樣https://i.imgur.com/3JMOdip.jpg或是板友有沒有其他推薦的作法

用來處理位置的

感謝

--","R_Language"
"297","M.1527428817.A.FC4","zcad","問題","讀取excel檔案 將數值作圖",2018-05-27 21:46:55,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的程式目的:將不同進料廠商的商品重量作圖，可以初步看出哪間的重量易落在規格外

敘述:
1.從不同螺絲製造商1~3，皆購買了螺絲A.B.C.D，每周會各取4件測量重量，
並且記錄在excel中https://imgur.com/TDDJu8U2.使用R作圖
(1)規格上下限畫成連續方形區域
(2)可以同時把[螺絲A ^ week48 ^廠商1]的4個綠點都顯示在同x軸上
類似下圖，但用excel同x軸只有一點https://imgur.com/8nHGowq剛學習R，還在很基礎的階段，近期碰到作圖這個需求，不知道要從何下手，
上來詢問高手們指點一下方向，如果有相關的內容能學習也可以推薦一下，謝謝大家~

--","R_Language"
"298","M.1527127732.A.CCC","alanfengjkl","問題","Re: 讀取XML檔",2018-05-24 10:08:50,NA,NA,"※ 引述《alanfengjkl (Alan)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 使用者: [問題敘述]:: 在使用R讀取XML檔案時: 出現下列ERROR: 想知道如何排除問題?: 另外由於資料是BIG5: 讀進來後若有亂碼該如何處理?: [程式範例]:: library(XML): xml.doc <- xmlParse(file,encoding = ""BIG5""): xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: xmlParseEntityRef: no name: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A: encoder errorPremature end of data in tag ?冽<U+997F>??line 168391: Premature end of data in tag 撣喳<U+8159>?<U+603F>敦 line 168384: Premature end of data in tag INVOICE line 2: Error: 1: xmlParseEntityRef: no name: 2: xmlParseEntityRef: no name: 3: xmlParseEntityRef: no name: 4: xmlParseEntityRef: no name: 5: xmlParseEntityRef: no name: 6: xmlParseEntityRef: no name: 7: xmlParseEntityRef: no name: 8: xmlParseEntityRef: no name: 9: xmlParseEntityRef: no name: 10: xmlParseEntityRef: no name: 11: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A: 12: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A: 13: encoder error14: Premature end of data in tag ?冽<U+997F>??line 168391: 15: Premature end of data in tag 撣喳<U+8159>?<U+603F>敦 line 168384: 16: Premature end of data in tag INVOICE line 2: [環境敘述]:: 最新版R:
可是我用xml2也有error如下> rm(list=ls())> file=""C0001BILL9_EBill_20180505_20180505114335.xml""> setwd(""D:/"")> library(xml2)> d=read_xml(file,encoding=""BIG5"")Error in doc_parse_file(con, encoding = encoding, as_html = as_html, options =
 options) :
xmlParseEntityRef: no name [68]> d=read_html(file,encoding=""BIG5"")Error in doc_parse_file(con, encoding = encoding, as_html = as_html, options =
 options) :
input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A [600
3]


--posted frombbs reader hybridon mysamsung SM-G965F--","R_Language"
"299","M.1527125678.A.DBB","betcy",NA,"〔徵求〕網路爬文、文字探勘家教",2018-05-24 09:34:35,NA,NA,"各位高手好！

我是R語言超級新手，剛入門一個多月，
因為論文有部份需要網路爬文和文字探勘的探索，搜尋網站教學自己實做後，依然失敗..
.（沒辦法順利抓取我要的內容、存檔）

因此希望徵求家教一名
學習目標：
1、從網頁中擷取文章、下載、儲存
2、清理贅字斷字

大概2-3小時左右
費用800/小時
地點：舊台中市區（星巴克）
日期：本週日前（再另約）

謝謝各位，若有違反版規，再自行刪文，謝謝。

--","R_Language"
"300","M.1527082878.A.E05","menghsuanliu","問題","部份條件符合的mapping",2018-05-23 21:41:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我有一個mapping的 data framehttps://i.imgur.com/DsvdQgU.jpg還有一個sourcehttps://i.imgur.com/9y01XQj.jpg我想把source dataframe 依mapping table,組出我的target dataframehttps://i.imgur.com/yL4CjeP.jpg請問該如何做？

[程式範例]:
[環境敘述]:

[關鍵字]:

--","R_Language"
"301","M.1527080723.A.D4D","alanfengjkl","問題","讀取XML檔",2018-05-23 21:05:20,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者

[問題敘述]:
在使用R讀取XML檔案時
出現下列ERROR
想知道如何排除問題?

另外由於資料是BIG5
讀進來後若有亂碼該如何處理?

[程式範例]:
library(XML)

xml.doc <- xmlParse(file,encoding = ""BIG5"")



xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

xmlParseEntityRef: no name

input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A

input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A

encoder errorPremature end of data in tag ?冽<U+997F>??line 168391

Premature end of data in tag 撣喳<U+8159>?<U+603F>敦 line 168384

Premature end of data in tag INVOICE line 2

Error: 1: xmlParseEntityRef: no name

2: xmlParseEntityRef: no name

3: xmlParseEntityRef: no name

4: xmlParseEntityRef: no name

5: xmlParseEntityRef: no name

6: xmlParseEntityRef: no name

7: xmlParseEntityRef: no name

8: xmlParseEntityRef: no name

9: xmlParseEntityRef: no name

10: xmlParseEntityRef: no name

11: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A

12: input conversion failed due to input error, bytes 0xF9 0xDC 0xBC 0x7A

13: encoder error14: Premature end of data in tag ?冽<U+997F>??line 168391

15: Premature end of data in tag 撣喳<U+8159>?<U+603F>敦 line 168384

16: Premature end of data in tag INVOICE line 2



[環境敘述]:最新版R--","R_Language"
"302","M.1527067603.A.A24","AndrewShi","問題","讀取多筆資料(nc檔)",2018-05-23 17:26:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想要讀多筆名稱相近的時間資料(nc檔)進R，所以寫了一個for迴圈想要將一天24小時
(24筆資料)讀進R，雖然過程沒有出現error，但只有一筆資料有讀進R，所以想請問該怎
麼解決??謝謝。
資料名稱唯一的差別在於#precip那行的""00""，另外想請問是不是執行#nc那行就會把24筆
都讀進來呢??
[程式範例]:
rm(list=ls())
library(ncdf4)
#day=""20150501""
hour=c(""00"",""01"",""02"",""03"",""04"",""05"",""06"",""07"",""08"",""09"",""10"",11:23)
class(hour)
i<-0
for(i in c(0:23)){
  precip.file<-paste(""C:\\Users\\TOM\\Desktop\\R(資料庫
)\\20150501\\gsmap_mvk.20150501."",
                 paste(hour[i],paste(""00.v6.4133.0"","".nc"")),sep="""")
#precip<-""C:\\Users\\TOM\\Desktop\\R(資料庫
)\\20150501\\gsmap_mvk.20150501.""00""00.v6.4133.0.nc""
i<-i+1
#nc<-nc_open(precip.file)
}
precip.file
View(matrix(precip.file))

#print(nc)

[環境敘述]:
執行畫面拍照截圖於推文中
[關鍵字]:
多筆資料  nc檔  for迴圈

--","R_Language"
"303","M.1527062868.A.F74","ntpuisbest","問題","R語言讀excel有分頁的資料",2018-05-23 16:07:45,NA,NA,"如題

我使用R語言去讀入不動產實價登錄

的資料

但是有個問題是https://imgur.com/ryg86HN我的資料他是有分頁的

我用R去讀 他只會讀第一個分頁的資料

請問這要怎麼處理

謝謝大家

--","R_Language"
"304","M.1527010951.A.868","disney82231","問題","兩個dataframe同個變數找出相同的值",2018-05-23 01:42:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有兩個dataframe，都有類別變數X1，第一個dataframe(t1)的x1為 1 1 2 2 3 3 4 5

第二個(t2)x1為 1 2 4，最後的結果想要 1 1 2 2 4 ，然後其他的變數都取第一個dataframe

的。
[程式範例]:
有嘗試用merge，但不知道錯在哪..

t3<-merge(t1,t2,by=""x1"",all=T)

後面的all ,all.x ,all.y不管是T或F都試過了，合併出來最後的nlevels(t3$x1)都是5

而不是 3，謝謝

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"305","M.1527003312.A.EC2","pp61022","問題","plot label overlapping",2018-05-22 23:35:09,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我想要自己畫出circle of correlation，有順利畫出，
但是由於我的資料的共變異數矩陣有結構性，
有好幾個變數的分配是一樣的, 所以去做主成分之後，
這幾個相關係數是很接近的，所以PLOT上面的LABEL就疊在一起了，
但變數實在太多，沒辦法自己慢慢給定他label的位置，

ex. X1~X4相關係數很接近，X5~X8相關係數很接近，X9~X18相關係數很接近。
變數實際上更多，這裡是小範例。


如下圖所示，https://imgur.com/a/ewGenyB我有查到有避免label overlapping的函數，

但似乎都只能跟ggplot2、lattice搭配才能使用，

但ggplot2與lattice好像不能畫出circle of correlation plot，

想問版友有沒有遇過類似的問題，可以怎麼解決這種label重疊的問題，謝謝大家。




[程式範例]:
我的程式碼如下：

PCA.cor
          Comp.1      Comp.2
 [1,] -0.4004015 -0.91530070
 [2,] -0.4031804 -0.91388941
 [3,] -0.4009309 -0.91467268
 [4,] -0.4051744 -0.91267974
 [5,]  0.9511231 -0.30135543
 [6,]  0.9435535 -0.32519751
 [7,]  0.9466522 -0.31579510
 [8,]  0.9435672 -0.32456862
 [9,]  0.9987228 -0.01456728
[10,]  0.9980840 -0.02914308
[11,]  0.9977504 -0.03330187
[12,]  0.9981728 -0.02351494
[13,]  0.9976536 -0.02976503
[14,]  0.9984927 -0.01768483
[15,]  0.9980019 -0.02672811
[16,]  0.9976367 -0.04240636
[17,]  0.9976763 -0.03634121
[18,]  0.9984849 -0.01990170

corrplot <- function(pca.cor, main){
  a <- seq(0, 2*pi, length = 100)
  plot(cos(a), sin(a), type = 'l', col=""gray"",
       xlab = ""PC1"",  ylab = ""PC2"", main=main)
  abline(h = 0, v = 0, lty = 2)
  # Add active variables
  arrows(0, 0, pca.cor[, 1], pca.cor[, 2],
         length = 0.1, angle = 15, code = 2)
  # Add labels
  text(pca.cor+0.05, labels=1:100, cex = 1, adj=1)
}




[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:
label overlapping




--","R_Language"
"306","M.1526876108.A.AED","disney82231","問題","rstudio markdown問題",2018-05-21 12:15:04,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
使用markdown時，都會跑出
Error in substr(val, 1, 1) :
  invalid multibyte string at '<e8><95><ad>摮<U+67FD>耨'

應該是字串問題，但我完全沒有打中文，而且開一個新的markdown時最上面title區域

都沒有出現，只有下面rmarkdown的範例。

已經完全把R跟STUDIO都重新安裝過了..求各位幫幫忙。
[程式範例]:
無
[環境敘述]:

[關鍵字]:

studio dmarkdown

--","R_Language"
"307","M.1526809347.A.00D","adam100830","問題","shiny dashboard 新增分頁",2018-05-20 17:42:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
現在正在寫一個shiny網站，並使用shiny中的dashboard Package。之前使用 fluidPage
時可以使用navbarPage 裡面再加 tabPanel 就可以有分頁
如：https://i.imgur.com/2aDtMrW.jpg如果我希望 dashboard 也能有分頁，應該在哪裡加入什麼語法。

（官方的文件都是教sidebar的部分，不知道要再header那裡加分頁的話語法要怎麼加）

希望成果如下的紅色底線的分頁（有dashboard 和Recent Downloads兩個分頁）https://i.imgur.com/WLzJ6E2.jpg目前的板型如下：https://i.imgur.com/gil3Y0l.jpg[關鍵字]:
shiny, dashboard

--","R_Language"
"308","M.1526745218.A.FDF","HumuHumu","問題","Re: 每行依比例隨機抽樣",2018-05-19 23:53:35,NA,NA,"提供另一個方法一行搞定

data為你的資料

apply(data,2,function(x){ x[sample(1:length(x),6)]=0;return(x) })

可以把6換成換成其他值


--","R_Language"
"309","M.1526729771.A.149","celestialgod","問題","Re: 每行依比例隨機抽樣",2018-05-19 19:36:08,NA,NA,"產生太多無用資訊，造成不必要的浪費

最簡單的做法就是直接for就好

nrow <- 10L
numValueChange <- 6L
ncol <- 5e5L

st <- proc.time()
M <- matrix(sample(1:100, nrow*ncol, TRUE), nrow, ncol)
for (i in seq_len(ncol))
  M[sample.int(nrow, numValueChange)] <- 0
proc.time() - st
# user  system elapsed
# 1.89    0.03    1.96
# check
colSums(M == 0)

st <- proc.time()
M2 <- matrix(sample(1:100, nrow*ncol, TRUE), nrow, ncol)
ind <- replicate(ncol, sample(c(rep(TRUE, numValueChange),
                                rep(FALSE, nrow - numValueChange))))
M2[ind] <- 0
proc.time() - st
# user  system elapsed
# 4.70    0.09    4.80
# check
colSums(M2 == 0)※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: # 決定誰要變成0的矩陣: ind <- replicate(100, sample(c(rep(T, 6), rep(F, 4)))): # 按ind改M: M <- matrix(1:1000, 10, 100): M[ind] <- 0: M: # check: apply(ind, 2, sum): apply(M, 2, function(x) {:   length(which(x == 0)): }): M: ※ 引述《pp61022 (fight)》之銘言：: : [問題類型]:: :  程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R寫出來): : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 請簡略描述你所要做的事情，或是這個程式的目的: : 我有一個矩陣 10*100 (n=10, p=100): : 我想要把這100行，每行都依比例隨機選出幾個值，改成指定值: : 例如:: : 原始資料範例: :      V1 V2 V3  .... V100: : 1    10  5  4  .... 42: : 2     7 15 18  .... 58: : 3    12 10 77  .... 41: : 4     9 18 65  .... 74: : 5    47 57 10  .... 81: : 6     1 46 18  .... 72: : 7    37  9 49  .... 30: : 8    17  8 75  .... 37: : 9    36 14 10  ....  6: : 10   71 36 87  .... 48: : 每行各隨機選取6個值改成我的指定值: : 轉換後資料範例: :      V1 V2 V3  .... V100: : 1    10  5  0  ....  0: : 2     7  0 18  ....  0: : 3     0 10  0  .... 41: : 4     9  0 65  ....  0: : 5     0  0  0  .... 81: : 6     1 46  0  ....  0: : 7     0  0 49  .... 30: : 8     0  8  0  .... 37: : 9     0  0 10  ....  0: : 10    0  0  0  ....  0: : 我一開始是整筆資料直接*0.6 隨機填成指定值，但後來回去看資料，: : 因為n太少，很容易整行都變成指定值，但我不想要整行都被改成指定值，: : 才想詢問有沒有版友知道可以怎麼設定每行隨機抽樣的比例，謝謝大家。--","R_Language"
"310","M.1526726993.A.B6D","andrew43","問題","Re: 每行依比例隨機抽樣",2018-05-19 18:49:49,NA,NA,"# 決定誰要變成0的矩陣
ind <- replicate(100, sample(c(rep(T, 6), rep(F, 4))))

# 按ind改M
M <- matrix(1:1000, 10, 100)
M[ind] <- 0
M

# check
apply(ind, 2, sum)
apply(M, 2, function(x) {
  length(which(x == 0))
})
M※ 引述《pp61022 (fight)》之銘言：: [問題類型]::  程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我有一個矩陣 10*100 (n=10, p=100): 我想要把這100行，每行都依比例隨機選出幾個值，改成指定值: 例如:: 原始資料範例:      V1 V2 V3  .... V100: 1    10  5  4  .... 42: 2     7 15 18  .... 58: 3    12 10 77  .... 41: 4     9 18 65  .... 74: 5    47 57 10  .... 81: 6     1 46 18  .... 72: 7    37  9 49  .... 30: 8    17  8 75  .... 37: 9    36 14 10  ....  6: 10   71 36 87  .... 48: 每行各隨機選取6個值改成我的指定值: 轉換後資料範例:      V1 V2 V3  .... V100: 1    10  5  0  ....  0: 2     7  0 18  ....  0: 3     0 10  0  .... 41: 4     9  0 65  ....  0: 5     0  0  0  .... 81: 6     1 46  0  ....  0: 7     0  0 49  .... 30: 8     0  8  0  .... 37: 9     0  0 10  ....  0: 10    0  0  0  ....  0: 我一開始是整筆資料直接*0.6 隨機填成指定值，但後來回去看資料，: 因為n太少，很容易整行都變成指定值，但我不想要整行都被改成指定值，: 才想詢問有沒有版友知道可以怎麼設定每行隨機抽樣的比例，謝謝大家。--","R_Language"
"311","M.1526724947.A.8D1","pp61022",NA,"每行依比例隨機抽樣",2018-05-19 18:15:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一個矩陣 10*100 (n=10, p=100)
我想要把這100行，每行都依比例隨機選出幾個值，改成指定值

例如:

原始資料範例
     V1 V2 V3  .... V100
1    10  5  4  .... 42
2     7 15 18  .... 58
3    12 10 77  .... 41
4     9 18 65  .... 74
5    47 57 10  .... 81
6     1 46 18  .... 72
7    37  9 49  .... 30
8    17  8 75  .... 37
9    36 14 10  ....  6
10   71 36 87  .... 48

每行各隨機選取6個值改成我的指定值

轉換後資料範例
     V1 V2 V3  .... V100
1    10  5  0  ....  0
2     7  0 18  ....  0
3     0 10  0  .... 41
4     9  0 65  ....  0
5     0  0  0  .... 81
6     1 46  0  ....  0
7     0  0 49  .... 30
8     0  8  0  .... 37
9     0  0 10  ....  0
10    0  0  0  ....  0

我一開始是整筆資料直接*0.6 隨機填成指定值，但後來回去看資料，
因為n太少，很容易整行都變成指定值，但我不想要整行都被改成指定值，
才想詢問有沒有版友知道可以怎麼設定每行隨機抽樣的比例，謝謝大家。


--","R_Language"
"312","M.1526626868.A.0B9","menghsuanliu","問題","dataframe中找離該筆日期以前最近值",2018-05-18 15:01:06,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我有一個dataframe，每筆皆有日期，但有些日期有值，有些是na，我想針對沒值的部份
抓離自已最近的過去值，當成該期的值(參考以下的圖)
As-ishttps://i.imgur.com/sVbwUM7.jpgTo-behttps://i.imgur.com/wko1lVn.jpg[程式範例]:


[環境敘述]:


[關鍵字]:


--","R_Language"
"313","M.1526614542.A.C79","zcyee","問題","文字探勘 自訂辭典",2018-05-18 11:35:39,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要分詞的時候，依我自訂的辭典分，例如：閃電狼＞他會分成""閃電"",""狼""
姆咪>""姆"",""咪""    其實我已經利用edit_dict() 將我要的字詞輸入到裡面了，
但分出來還是不是我要的


[程式範例]:

edit_dict()
seg <- worker()
seg$encoding
corpus <- NULL
for(i in 1:length(article)){
corpus[[i]] <- segment(article[i], seg)
}

[環境敘述]:
R version 3.5.0 (2018-04-23)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] tm_0.7-3        NLP_0.1-11      RCurl_1.95-4.10 bitops_1.0-6
XML_3.98-1.11
[6] jiebaR_0.9.99   jiebaRD_0.1     readr_1.1.1

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.16    slam_0.1-43     R6_2.2.2        pillar_1.2.2
rlang_0.2.0
 [6] xml2_1.2.0      tools_3.5.0     hms_0.4.2       parallel_3.5.0
yaml_2.1.19
[11] compiler_3.5.0  pkgconfig_2.0.1 tibble_1.4.2
[關鍵字]:

--","R_Language"
"314","M.1526466077.A.E0D","MITIEN","問題","如何將讀入資料由一行變多行",2018-05-16 18:21:14,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)



[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)



[問題敘述]:
我已將csv檔讀入R內,但是原先excel資料的每一行R把它變成同一行,也就是輸入“xxx[1,]
會把全部資料讀出來,請問有什麼辦法可以讓他遵循原先excel的一行來讀取？





--","R_Language"
"315","M.1526395632.A.C40","j0958322080","問題","給訂做標點與該座標點的值畫 3D 圖",2018-05-15 22:47:09,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個三維函數是 f(x,y)，

然後有 n 個點 (x,y,f(x,y))，

想要畫 3D 圖，有點類似 MATLAB的 MESH 作圖，

有看過plotly裡面的畫圖函數，

但看起來沒有辦法達到我的要求。

或者是有辦法給定一個函數 f(x,y)，

然後直接畫出 (x,y) = (0,0)~(100,100) 的圖嗎??

例如(1,1,2)、(2,2,5)、(3,1,9)、(4,0,0)、(5,4,0) 這種的

[環境敘述]:WIN10、R 3.4.3[關鍵字]:

畫圖，3d，函數

--
！！！！！！！！！！！！！簽名檔破555000點擊率啦！！！！！！！！！！！！！！！
Fw: [問卦] 電影：決勝21點的機率問題https://goo.gl/2BpbB7#1MfN3FgZ (joke)→ yeebon: chx64的1/2悖論真的很經典呢07/22 16:41！！！！！！！！！！！！！！簽名檔破555000點擊率啦！！！！！！！！！！！！！！

--","R_Language"
"316","M.1526395585.A.E0E","piggyhawk","問題","求信賴區間",2018-05-15 22:46:22,NA,NA,"手機排版請見諒，在此先謝謝回答的各位了！

[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)s


[軟體熟悉度]:
s
新手(沒寫過程式，R 是我的第一次)


[問題敘述]:

題目已知隨機抽樣樣本數為400，平均數為70，標準差為23，要求95%的信賴區間。
s

[程式範例]:

1.
qnorm(0.975)
70+1.96*(23/sqrt(400))
70-1.96*(23/sqrt(400))

2.
qnorm(0.975,mean=70,sd=23)

上課時所學的方法是1，但朋友從網絡上找到2.方法帶入後與我用1所求出的信賴區間不同，想請問是哪裡出了問題呢？謝謝大家

-----
Sent from JPTT on my iPhone

--","R_Language"
"317","M.1526393225.A.1BB","Sagara","問題","類別變數迴歸",2018-05-15 22:07:02,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請問在有類別變數跑迴歸時候
若是有dummy variables的話
像是性別
出來的結果表
有辦法讓男和女兩個同時顯現出來嗎

謝謝

--","R_Language"
"318","M.1526390032.A.307","alanfengjkl","問題","公司電腦讀取XML檔",2018-05-15 21:13:50,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門

[問題敘述]:

想利用R去讀取XML檔，但是無法讀取
連網路上的範例檔，都失敗，範例如下
但是我用家裡的電腦跑範例
就都可以
用公司的電腦跑就會出現下面那些訊息
想請問是環境設定哪裡有問題嗎??

因為問公司幫我裝的IT
他們也不會R
只是提供權限幫我裝而已= =


[程式範例]:

library(XML)
url <- ""http://opendata2.epa.gov.tw/AQX.xml""xml.doc <- xmlParse(url)


No such file or directoryfailed to load external entity
""http://opendata2.epa.gov.tw/AQX.xml""Error: 1: No such file or directory2: failed to load external entity
""http://opendata2.epa.gov.tw/AQX.xml""[環境敘述]:
R和R-Studio都是最新版


--","R_Language"
"319","M.1526354622.A.065","cywhale","問題","Re: dimensions of z are not length(x)(-1)",2018-05-15 11:23:39,NA,NA,"#ncfile 讀出是一個多維矩陣，你用temp[1:4]當然只會讀出4筆 以下供參
#你可以針對每一次 (1:4)都畫一次，在這裡我不確定你要的操作，我取平均
#OB

library(ncdf4)
#library(magrittr)
#library(lubridate)
#library(units)

infile <- ""D:/Env/air/air.2m.mon.mean.nc""

nx0 <- nc_open(infile)
print(nx0)

air <- ncvar_get(nx0, ""air"")
latx0<- ncvar_get(nx0, ""lat"")
lngx0<- ncvar_get(nx0, ""lon"")
#time<- ncvar_get(nx0, ""time"")
#tattr <- ncatt_get(nx0, ""time"") #get attributes
#units(time) <- make_unit(tattr$units)

#datex<- as.POSIXct(time) %>%  as.Date(origin=""1800-01-01 00:00"") #:0.0"")
#lvl <- ncvar_get(nx0, ""level"")

mair <- apply(air[,,1:4],c(1,2),function(x) mean(x-273.15, na.rm=T))
zt=matrix(mair,ncol=length(latx0),nrow=length(lngx0),byrow=F)

image(x=lngx0-180,y=rev(latx0),z=zt[,ncol(zt):1],
      col = colorRamps::blue2red(128)) #rainbow(128)[50:128])※ 引述《AndrewShi (沒有妳的我)》之銘言：: ※ 引述《AndrewShi (沒有妳的我)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 這是一個全球溫度的資料(nc檔)，時間總共有467筆，我想利用R畫出前4筆的全球溫度圖: : ，所以 寫了一個簡單的while迴圈，但到了要image的時候就跑出了這個error，所以想請問大大: : 們這個error是什麼意思，以及我該如何解決??謝謝~: : [程式範例]:: : https://i.imgur.com/JlqAFxw.jpg: : https://i.imgur.com/fLzCmiC.jpg: 以下為資料來源與程式碼:: 資料來源:: https://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis2.pressure.html: Air Temperature - Monthly Mean - 按圖示 -->裡面的最後一筆資料: 程式碼:: rm(list=ls()): library(ncdf4): air.nc<-nc_open(""C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc""): air.nc: ""file C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc has 5: dimensions:"": ""lon Size:144"": ""lat Size:73"": ""level Size:17"": ""nbnds Size:2"": ""time Size:467"": ""file C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc has 2 variables"": ""short air[lon,lat,level,time] Longname:Air temperature Missval:-32767"": ""short head[level,time]  Longname:Missing Missval:NA"": temp.nc<-nc_open(""C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc""): temp<-ncvar_get(temp.nc,""air""): temp[temp==""-32767""]<-NA: temp.nc$dim$lon$vals -> lon: temp.nc$dim$lat$vals -> lat: temp.nc$dim$level$vals -> lev: temp.nc$dim$nbnds$vals -> nbnds: temp.nc$dim$time$vals -> time: lat<-rev(lat): i<-1: while(i<5){:   print(temp[i]):   i<-i+1: }: time=""i""<-temp[i]: lon<-lon-180: temp<-(time=""i""): temp<-matrix(c(""i""=1:4)): image(lon,lat,matrix(temp,ncol=length(lat),nrow=length(lon),byrow=F)): library(sp): library(maptools): gpclibPermit(): data(wrld_simpl): plot(wrld_simpl,add=TRUE)--","R_Language"
"320","M.1526309815.A.F20","AndrewShi","問題","Re: dimensions of z are not length(x)(-1)",2018-05-14 22:56:52,NA,NA,"※ 引述《AndrewShi (沒有妳的我)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 這是一個全球溫度的資料(nc檔)，時間總共有467筆，我想利用R畫出前4筆的全球溫度圖: ，所以 寫了一個簡單的while迴圈，但到了要image的時候就跑出了這個error，所以想請問大大: 們這個error是什麼意思，以及我該如何解決??謝謝~: [程式範例]:: https://i.imgur.com/JlqAFxw.jpg: https://i.imgur.com/fLzCmiC.jpg以下為資料來源與程式碼:
資料來源:https://www.esrl.noaa.gov/psd/data/gridded/data.ncep.reanalysis2.pressure.htmlAir Temperature - Monthly Mean - 按圖示 -->裡面的最後一筆資料
程式碼:
rm(list=ls())
library(ncdf4)
air.nc<-nc_open(""C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc"")
air.nc
""file C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc has 5
dimensions:""
""lon Size:144""
""lat Size:73""
""level Size:17""
""nbnds Size:2""
""time Size:467""

""file C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc has 2 variables""
""short air[lon,lat,level,time] Longname:Air temperature Missval:-32767""
""short head[level,time]  Longname:Missing Missval:NA""

temp.nc<-nc_open(""C:\\Users\\TOM\\Desktop\\R(資料庫)\\air.2m.mon.mean.nc"")
temp<-ncvar_get(temp.nc,""air"")
temp[temp==""-32767""]<-NA

temp.nc$dim$lon$vals -> lon
temp.nc$dim$lat$vals -> lat
temp.nc$dim$level$vals -> lev
temp.nc$dim$nbnds$vals -> nbnds
temp.nc$dim$time$vals -> time

lat<-rev(lat)
i<-1
while(i<5){
  print(temp[i])
  i<-i+1
}

time=""i""<-temp[i]
lon<-lon-180
temp<-(time=""i"")
temp<-matrix(c(""i""=1:4))
image(lon,lat,matrix(temp,ncol=length(lat),nrow=length(lon),byrow=F))

library(sp)
library(maptools)
gpclibPermit()
data(wrld_simpl)
plot(wrld_simpl,add=TRUE)

--","R_Language"
"321","M.1526264733.A.23E","AmigoSafin","問題","想請教""%%""在R中代表的計算意義",2018-05-14 10:25:30,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好,

在網路上看到一個線上課程
就玩玩裡面的遊戲
看到介紹""%%""的英文解說
不是很能了解
如下:
The modulo returns the remainder of the division of the number to the left
by the number on its right, for example 5 modulo 3

以上的答案5%%3=2
我以為是小數點後面四捨五入的小數點前的數值
但28%%6=4
所以我想請教大家這""%%""是什麼意思呢?

謝謝大家了~~


--

--","R_Language"
"322","M.1526145859.A.3D8","AndrewShi",NA,"dimensions of z are not length(x)(-1) times",2018-05-13 01:24:16,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
這是一個全球溫度的資料(nc檔)，時間總共有467筆，我想利用R畫出前4筆的全球溫度圖
，所以
寫了一個簡單的while迴圈，但到了要image的時候就跑出了這個error，所以想請問大大
們這個error是什麼意思，以及我該如何解決??謝謝~

[程式範例]:https://i.imgur.com/JlqAFxw.jpghttps://i.imgur.com/fLzCmiC.jpg--","R_Language"
"323","M.1526055836.A.132","clsmbstu","問題","無法在CentOS 7上安裝rgeos和leaflet",2018-05-12 00:23:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

我想要試著玩玩看在Google Cloud Platform上面架Shiny Server，
但遇到不少問題，還在一個個解決中，
現在遇到的狀況是安裝leaflet和rgeos這兩個套件都會失敗。

[程式範例]:

```shell
sudo su - -c ""R -e \""install.packages(c('rgeos', 'leaflet'), repo='https://cloud.r-project.org/')\""""```

大概從這裡開始有問題：

/bin/sh: libpng-config: command not found
read.c:3:17: fatal error: png.h: No such file or directory
 #include <png.h>
                 ^
compilation terminated.
make: *** [read.o] Error 1
ERROR: compilation failed for package ‘png’
* removing ‘/usr/lib64/R/library/png’
* installing *source* package ‘rgeos’ ...
** package ‘rgeos’ successfully unpacked and MD5 sums checked
configure: CC: gcc -m64 -std=gnu99
configure: CXX: g++ -m64
configure: rgeos: 0.3-26
checking for /usr/bin/svnversion... no
configure: svn revision: 560
checking for geos-config... no
no
configure: error: geos-config not found or not executable.
ERROR: configuration failed for package ‘rgeos’
* removing ‘/usr/lib64/R/library/rgeos’
ERROR: dependency ‘png’ is not available for package ‘leaflet’
* removing ‘/usr/lib64/R/library/leaflet’
The downloaded source packages are in
        ‘/tmp/RtmpboBa5A/downloaded_packages’
Updating HTML index of packages in '.Library'
Making 'packages.html' ... done
Warning messages:
1: In install.packages(c(""rgeos"", ""leaflet""), repo = ""https://cloud.r-project.org/""):
  installation of package ‘png’ had non-zero exit status
2: In install.packages(c(""rgeos"", ""leaflet""), repo = ""https://cloud.r-project.org/""):
  installation of package ‘rgeos’ had non-zero exit status
3: In install.packages(c(""rgeos"", ""leaflet""), repo = ""https://cloud.r-project.org/""):
  installation of package ‘leaflet’ had non-zero exit status

[環境敘述]:

R version 3.4.4 (2018-03-15)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: CentOS Linux 7 (Core)
Matrix products: default
BLAS/LAPACK: /usr/lib64/R/lib/libRblas.so
locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C
attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base
loaded via a namespace (and not attached):
[1] compiler_3.4.4

[關鍵字]:

CentOS, leaflet, rgeos

--","R_Language"
"324","M.1525861858.A.F00","ab80308","問題","讓整個data frame按照某一欄的值自動分猖",2018-05-09 18:30:56,NA,NA,"[問題類型]:我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)s


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)s

[問題敘述]:
現在有一個有很多筆資料的data frame，其中的某一欄的資料為1.2.3.....，我想按照不同的數字，分別將該筆資料存成不同的csv，預設結果是，值為1的所有筆資料、值為2的所有資料
但問題是我每一次的值可能都不一樣，有可能到10、到20....之類的，想求救一下版上大家，有沒有辦法可以讓他每一次都能「自動分組」，而不需要我去看它這次值到多少，再個別切開data frame呢？

-----
Sent from JPTT on my iPhone

--","R_Language"
"325","M.1525849596.A.1E4","BUQ","問題","facet_grid factor 多圖佈局內部資料錯置",2018-05-09 15:06:31,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:
我有個data.frame 資料前處理已經做好了
因為檔案有點大
我無法重現一個假數據  所以附上檔案連結https://drive.google.com/file/d/13HvtUvdp6pEqgSyz2K051dvYVeoRHEyb/view?usp=sharing再附上短網址https://goo.gl/WMPYMw這裡面是 台灣的網格資料 有溫度t2m 雨量rainf 和病例數
（溫度 雨量 有做7天移動平均 所以年頭6天無值）

網格 切的方面為
S1.N86   由南到北分為1到86格
W1.E41   由西到東分為1到41格

目前試做 2015 高雄市

畫圖之前  有偷看一下病例極大值都落在
S1.N86 =〉7~10
W1.E41 =〉22~26
也就是  高雄市區的部分

後來畫圖 使用ggplot2 facet_grid
因為 facet_grid 自動分圖  會幫我把  W1.E41的格點 南北相反擺

所以又補上
類似這樣的功能
temp$size_f = factor(temp$size, levels=c('50%','100%','150%','200%'))

但是出圖後  病例極大值 確落在中央山脈那邊  〈=這應該是出圖錯誤


如果沒有修改 factor 順序
會得到一個南北格點相反的圖 且 數據是對的

改了 factor 順序
就會出現病例資料在中央山脈出現極大
一直在爬文試方法解決 特地上來求教  感謝各位大德

[程式範例]:程式碼在這  中間有很多種常試解決的片段 可以略過https://ideone.com/4EfhkR[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:r ggplot2 facet_grid order--","R_Language"
"326","M.1525838265.A.2EF","sasuke515","問題","上傳plotly後 圖表X軸分類不見",2018-05-09 11:57:42,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
s
我想要把互動式的圖表放到plotly，
以便合併到PPT上

這是我想要的圖表在R studio上呈現的樣子https://i.imgur.com/4T7IN83.jpg（內部資料，因此把中文分類換成英文字母代替）

但利用api_create()上傳到plotly後，
X軸只剩下數字https://i.imgur.com/BuKRgCi.jpg請問這要怎麼修正呢？
或是有沒有別的辦法能把互動式的圖表放到ppt上呢？

[程式範例]:
s
Point_Comm_Channel <- ggplot(final_Channel_perform_Comm, aes(x = Channel, y = total_Amount, color = Name ))+
  geom_point(aes(group = Name),size = 1)+
  labs(title = ""SKU銷售Top 10 in channels"",
       y = ""Total Amount(千)"")

這是我畫圖的程式碼

[環境敘述]:

R version 3.4.4 (2018-03-15)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

[關鍵字]:


u的是謝謝大家，拜託大家了！

-----
Sent from JPTT on my iPhone

--","R_Language"
"327","M.1525710847.A.CD8","ms0306733","問題","整理資料-插入資料",2018-05-08 00:34:05,NA,NA,"[問題類型]:

想用R 做某件事情，但是我不知道要怎麼用R 寫出來


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

有各樣區不同年份的觀測資料，但是部分樣區有缺少幾年份的資料。

A樣區:2011，2012，2015年有資料
B樣區:2010，2012，2014年有資料

希望可以將各樣區呈現2010~2015都有資料欄位的狀態(缺少的年份資料就呈現NA)

也就是原本的data.frame長這樣:
樣區 . 年份 . 資料
A. 2011. 12
A. 2012. 5
A. 2015. 0
B. 2010. 37
B. 2012. 30
B. 2014. 29


希望後來的data.frame長這樣:
樣區 . 年份 . 資料
A. 2010. NA
A. 2011. 12
A. 2012. 5
A. 2013. NA
A. 2014. NA
A. 2015. 0
B. 2010. 37
B. 2011. NA
B. 2012. 30
B. 2013. NA
B. 2014. 29
B. 2015. NA

--","R_Language"
"328","M.1525608379.A.B1A","jasonfghx","問題","fread讀檔問題",2018-05-06 20:06:10,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:


""view-source:http://archive.ics.uci.edu/ml/machine-learning-databases/00198/Faults.NNA""
數據如上面網址
想用
ul=""
""view-source:http://archive.ics.uci.edu/ml/machine-learning-databases/00198/Faults.NNA""""
a<-fread(ul,sep=',') #但實際上讀不進去

因此我改用把資料存成TXT就可以讀了

a<-fread(""123.txt"",sep='auto')

想請問有沒有方法可以直接在網頁上讀取資料

謝謝回復

[程式範例]:


[關鍵字]:
FREAD

--","R_Language"
"329","M.1525524518.A.009","x9060000456","問題","R 無法連 SQL server",2018-05-05 20:48:35,NA,NA,"- 問題: 在 Windows 環境下無法利用 R 連 sql server,
一直出現
""Error: nanodbc/nanodbc.cpp:950: IM002: [Microsoft][ODBC 驅動程式管理員] 找不到
資料來源""

這個error


[問題敘述]:
當初在 mac 上連 sql server 也是用很久,
但最後連上了,
我是使用 odbc 這個套件,
主要是 dbConnect 中 Driver 這個參數要指向 odbc 的驅動程式,

在家的 windows 環境使用 R 卻不能連,

但無論用 sql operation stuido 或者
SSMS 都可以連,

所以感覺是 R 中的設定導致!

另外如果寫成 Driver =
ODBC Driver 17 for SQL Server
或
SQLServer
時,
程式就直接當掉了,

另外 Driver =
無論是路徑改成 SysWOW64
或是檔案改成
msodbcsql17.dll
或是
odbcad32.exe
也都是連不上,
所以想請問版上的各位大大是否有連 sql server的經驗!
非常感謝!!!!!


[程式範例]:
con <- dbConnect(odbc(),
                 Driver = ""C:\\Windows\\System32\\odbc32.dll"",
                 Port = ""1433"",
                 Server = ""servername"",
                 dbms.name = ""databasename"",
                 UID = ""UID"",
                 PWD = ""PWD"")

--","R_Language"
"330","M.1525430643.A.691","lsshno1","問題","xpathApply with lapply",2018-05-04 18:43:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

各位前輩好, 我目前手邊有一個xml的檔案, 我想要取出其中的parent跟children node,
merge在一起.
Page(我的parent node)為分頁, 範例中有兩頁.
Text與[email<U+00A0>protected], lly, urx, ury為我的children node.

我預期我的data.frame為:

Page  Text  llx    lly    urx    ury
1     D1.2  70.87  43.56  94.53  31.56
1     Date  109.17 156.75 131.80 144.75
2     Forms 70.87  43.56  94.53  31.56
2     only  264.74 43.56  286.73 31.56

目前參考這邊的做法https://tinyurl.com/ya3yh5cj連結的作法為, 取出每個page的node, 並放在list中.
(就範例而言, 會創造出一個list, 其中有兩個element, 分別代表兩個page)
接著, 利用lapply結合xpathApply, 對每個element取出我要的children node.
但, 我發現在values這個list中, 她的確有兩個element,
其中每個elements都是重複page 1 and 2 的資訊.
如下:
[[1]]  [[2]]
D1.2   D1.2
Date   Date
Forms  Forms
only   only

煩請各位指教, 謝謝!

程式碼:https://ideone.com/D2kbyw範例檔案:https://ideone.com/jqS8fo--","R_Language"
"331","M.1525345091.A.DED","augustana","問題","用if想讓R暫停, 但R沒有暫停",2018-05-03 18:58:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我在爬一個網頁, 但如果我爬得太快它會抓不到因為有試過讓他常態性的休息, 但休息時間太短也不行所以我設了一個if條件, 抓不到的時候就休息60秒但他沒有執行 不知道是不是哪裡出了問題[程式範例]:if(a==-1) { Sys.sleep(60)subdoc <- GET(suburl, config = set_cookies('JSESSIONID' ='8F0C390B5E686300BC04AA763900EB6D'))json <- xml_text(xml_find_all(content(subdoc), '/html/body'))}[環境敘述]:R version 3.4.0 (2017-04-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Simplified)_People's Republic of China.936[2] LC_CTYPE=Chinese (Simplified)_People's Republic of China.936[3] LC_MONETARY=Chinese (Simplified)_People's Republic of China.936[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Simplified)_People's Republic of China.936attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] jsonlite_1.5 httr_1.3.1   xml2_1.0.0loaded via a namespace (and not attached):[1] compiler_3.4.0 R6_2.2.0       tools_3.4.0    curl_2.3       Rcpp_0.12.13[關鍵字]:Sys.sleep, if--","R_Language"
"332","M.1525174911.A.550","nmamtb","問題","factor轉成numeric是否有數值的上限?",2018-05-01 19:41:40,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:

大家好，我的問題是在 convert factor to numeric 時，會將遇到超過1,000的數值變成
NA，爬過網路上不少文章，集合了幾種方法都無效。

#convert a factor to a numeric
##way1

library(varhandle)
unfactor(f)

##way2

as.numeric(levels(f))[f]
as.numeric(levels(f))[as.integer(f)]
as.numeric(as.character(f))

##way3

as.numeric.factor <- function(x) {as.numeric(levels(x))[x]}

##way4

,stringsAsFactors=FALSE


[程式範例]:https://pastebin.com/2DQDxYAn請注意第18個數值""1,130.00""變成了NA。

[環境敘述]:

R version 3.4.4 (2018-03-15)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] survival_2.41-3

loaded via a namespace (and not attached):
[1] compiler_3.4.4  Matrix_1.2-12   tools_3.4.4     yaml_2.1.18
splines_3.4.4
[6] grid_3.4.4      lattice_0.20-35

[關鍵字]:

factor,as.numeric

--","R_Language"
"333","M.1525141112.A.778","jasonfghx","問題","Re: 整列作對調問題",2018-05-01 10:18:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:> mahead a b c d
1    a 0 1 2 2
2    b 1 0 5 5
3    c 2 5 0 5
4    d 4 3 6 0

我有以上資料

想要用成

  head d b c a
1    a 2 1 2 0
2    b 5 0 5 1
3    c 5 5 0 2
4    d 0 3 6 4

ma<-data.frame(head=c(""a"",""b"",""c"",""d""),
                  a=c(0,1,2,4),
                  b=c(1,0,5,3),
                  c=c(2,5,0,6),
                  d=c(2,5,5,0)

temp<-ma
data<-subset(temp,select=c(2))
temp[,5]<-data

可實際上變成這樣  head沒改到, 想請問這樣可以怎麼改善?
  head a b c d
1    a 0 1 2 0
2    b 1 0 5 1
3    c 2 5 0 2
4    d 4 3 6 4

謝謝回復

[程式範例]:


[關鍵字]:


--","R_Language"
"334","M.1524911785.A.166","Citizenation","問題","請問怎麼讓兩個不同的csv檔案內容相連",2018-04-28 18:36:23,NA,NA,"軟體熟悉度:新手才開始修這門課

程式諮詢:想求各天氣總共有幾筆
A檔有12萬筆6月的資料 B檔有6月的每日天氣(共四種)
要求各天氣在這A檔中有幾筆
A檔案時間格式為 2018/4/28 06:22:00 PM
B檔案時間格式為 2018/4/28

目前的做法為

SunnyDT<-subset(weatherdata,Weather==""Sunny"",1)  #找出30天中為晴天的時間
省略其他三種天氣程式碼
SunnyDay<-day(SunnyDT$weatherDate) #取日期

date<-A檔案$datetime
day(data)

再來就卡住
不知道要怎麼將B檔案的(日期=天氣)
和A檔案的12萬筆日期變成天氣 進而求當月各天氣數

--","R_Language"
"335","M.1524899930.A.DA1","b41p3987","問題","ggplot2上顏色",2018-04-28 15:18:47,NA,NA,"小弟還不是很熟悉，麻煩大家提點個，謝謝！
=================
[問題類型]
程式諮詢

[軟體熟悉度]
入門

[問題敘述]
想把資料依大小標示不同的顏色，參考官方文件但不知道錯誤訊息是什麼意思


[程式範例]
library(ggplot2)

df <- read.csv(file=""/Users/chenyuying/Desktop/500.csv"", header= TRUE, sep="","")
p<-ggplot(data=df,aes(CTDSalinity,TCARBN))+geom_point(aes(colour=table))
p1<-p+scale_color_gradient(low='green',high='red')
plot(p1)

以下是Error
Error in (function (..., row.names = NULL, check.rows = FALSE, check.names = TRU
E,  :
  arguments imply differing number of rows: 0, 1110

--","R_Language"
"336","M.1524807246.A.FDB","AmigoSafin","問題","Read in ranks",2018-04-27 13:34:02,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:大家好,我有1000個baby names的dataset(dataset只有一個)名字長相為:Jacob (1) Benjamin (25) Hunter (49) Diego (73) Miguel (97) Michael (2)Zachary (26)以上為第一個row我使用read.fwf想讀入dataset但錯誤訊息顯示我沒有widths我的code為bnames <- read.fwf(paste0(dirdata, ""top-1000-baby-names.txt"",widths,header = FALSE, sep = ""\t"",skip = 0, row.names, col.names, n = -1,buffersize = 2000, fileEncoding = """"))請問:1)我是否應該一項一項define widths 只是遇到()我該怎麼處理?()內為rank2)若是我轉換為csv檔案會比較好讀入嗎?謝謝大家~~[程式範例]:[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"337","M.1524568892.A.5C0","celestialgod","問題","Re: list對應座標的運算",2018-04-24 19:21:28,NA,NA,"※ 引述《ntpuisbest (阿龍)》之銘言：: 我有個list: 長這樣: https://imgur.com/glWVNGb: 他是一個模擬得到的VCOV variance covariance矩陣: 我希望做到對應的座標取平均: 也就是: https://imgur.com/tcpNNnY: 希望回傳的也是一個三成三的list: 不知道怎麼做: 發現lapply 也沒用QAQ給四個方法參考XD

library(abind)
# data
l <- replicate(3L, matrix(rnorm(9), 3), FALSE)

# method 1
apply(abind(l, along = 3L), 1:2, mean)
#             [,1]       [,2]       [,3]
# [1,]  0.08595378 -0.9663702 -0.7770976
# [2,]  0.13758227  0.4697197  0.2799617
# [3,] -0.57574027 -0.4079516 -0.9508097

# method 2
apply(array(unlist(l), dim=rep(3,3)), 1:2, mean)
#             [,1]       [,2]       [,3]
# [1,]  0.08595378 -0.9663702 -0.7770976
# [2,]  0.13758227  0.4697197  0.2799617
# [3,] -0.57574027 -0.4079516 -0.9508097

# method 3
Reduce(""+"", l) / length(l)
#             [,1]       [,2]       [,3]
# [1,]  0.08595378 -0.9663702 -0.7770976
# [2,]  0.13758227  0.4697197  0.2799617
# [3,] -0.57574027 -0.4079516 -0.9508097

# method 4
out <- l[[1]]
for (i in 2L:length(l))
  out <- out + l[[i]]
out / length(l)
#             [,1]       [,2]       [,3]
# [1,]  0.08595378 -0.9663702 -0.7770976
# [2,]  0.13758227  0.4697197  0.2799617
# [3,] -0.57574027 -0.4079516 -0.9508097


我做了一下benchmark.... 正如我推文所說的，for比較快XD

# benchmark
forFunc <- function(l){
  out <- l[[1]]
  for (i in 2L:length(l))
    out <- out + l[[i]]
  out / length(l)
}

library(microbenchmark)
l <- replicate(3e3, matrix(rnorm(200^2), 200), FALSE)
print(object.size(l), units = ""Gb"") # 0.9 Gb

microbenchmark(method1 = apply(abind(l, along = 3L), 1:2, mean),
               method2 = apply(array(unlist(l),
                                     dim=c(nrow(l[[1]]), ncol(l[[1]]), 3)),
                               1:2, mean),
               method3 = Reduce(""+"", l) / length(l),
               method4 = forFunc(l), times = 20L)
# Unit: milliseconds
#     expr       min        lq      mean    median        uq       max neval
#  method1 2481.3607 2681.3842 2730.1426 2776.8715 2803.6407 2821.4399    20
#  method2  474.9360  485.1195  531.9193  488.4900  582.2409  670.2529    20
#  method3  123.0389  124.6572  144.5512  126.9948  132.6468  310.0517    20
#  method4  121.3197  123.1581  127.6650  126.5533  131.4164  139.4469    20


記憶體使用方面，abind是裡面最花記憶體的

雖然使用上滿簡單的，但不建議使用abind

# memory usage
library(data.table)
library(profmem)
memUsageList <- vector(""list"", 4L)
memUsageList[[1]] <- profmem({apply(abind(l, along = 3L), 1:2, mean)})
memUsageList[[2]] <- profmem({
  apply(array(unlist(l), dim=c(nrow(l[[1]]), ncol(l[[1]]), 3)), 1:2, mean)
})
memUsageList[[3]] <- profmem({Reduce(""+"", l) / length(l)})
memUsageList[[4]] <- profmem({forFunc(l)})
data.table(methods = paste0(""method"", 1:4),
           ""memory (Mb)"" = sapply(memUsageList, total) / 2^20)
#    methods memory (Mb)
# 1: method1   5076.6124
# 2: method2    918.5794
# 3: method3    915.6992
# 4: method4    915.6418

以上，供你參考

--","R_Language"
"338","M.1524503803.A.1C2","t00012","問題","如何將html檔推送到Rhub",2018-04-24 01:16:40,NA,NA,"我在Studio中以Knit產生一個html檔，但是一直沒辦法
上傳到Rhub，上網查詢發現方法百百種，有的要幾
十個設定程序，有的說要改R的設定，照著做卻沒有一
個成功的，按右上方的Publish只會出現下面這個訊息https://i.imgur.com/JCGcxWd.jpg搞了一個星期仍然找不到問題點在哪裡，請問有高手
能幫幫忙嗎，感激不盡

--","R_Language"
"339","M.1524491097.A.3C1","ntpuisbest","問題","list對應座標的運算",2018-04-23 21:44:55,NA,NA,"我有個list

長這樣https://imgur.com/glWVNGb他是一個模擬得到的VCOV variance covariance矩陣

我希望做到對應的座標取平均

也就是https://imgur.com/tcpNNnY希望回傳的也是一個三成三的list

不知道怎麼做
發現lapply 也沒用QAQ




--","R_Language"
"340","M.1524452034.A.A2A","jas0a150","問題","解壓縮遇上中文",2018-04-23 10:53:52,NA,NA,"[問題類型]:使用R語言進行解壓縮遇上中文檔名的問題

[軟體熟悉度]:
入門

[問題敘述]:
目前是碰上
用R語言進行解壓縮提取中文檔名的csv檔
在解壓縮過程中一直出錯
也使用指定的方式去進行也失敗
以下是我使用的程式碼

1.unzip(""A.zip"")
出現Error in unzip(""A.zip"") : invalid multibyte string at

2.unzip(""A.zip"", files=iconv(unzip(""A.zip"", list = TRUE)$Name, ""utf-8"", ""BIG5""))
出現requested file not found in the zip file

如果裡面是英文檔名 則都沒問題
不曉得unzip能不能處理編碼的問題 找了一些資料都無法解決 跪求大神幫忙

--","R_Language"
"341","M.1524383509.A.81F","wenbuneatble","問題","用R爬Instagram",2018-04-22 15:51:32,NA,NA,"[問題類型]:使用R語言爬Instagram流程遇到問題

程式諮詢(我想用R 做某件事情，但是我遇到問題)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位好
因為目前在學校修R相關的課教到爬蟲
爬一般的新聞網站、PTT、購物網站等的大概都可以了
最近想要嘗試爬爬看Instagram
最終目標是爬下特定hashtag以及特定帳戶的貼文
譬如說搜尋#植劇場 或是到金酒籃球隊(SBL的球隊公開帳號)
抓下貼文、按讚數、追蹤數等
最後再來看是否能夠做一些分析
現在嘗試過三種方法但都有遇到一定的問題
下方分別敘述

*方法一
使用instaR package
連結：https://github.com/pablobarbera/instaR這個方法主要是利用instagram developer tool
連接官方的API
但因為instagram官方調整其政策
所以這個package裡面的一些function會被擋
像是searchInstagram() 函數爬 public content就失效了
在instagram developer tool 的 permission review處
(詳細步驟請參考https://www.r-bloggers.com/analyze-instagram-with-r/)若選擇自己的需求為
""I want to display hashtag content and public content on my website.""
Instagram 的解答是:
""This use case is not supported. We do not approve the public_content
permission for one-off projects such as displaying hashtag based content on
your website. ""
所以這個方法目前看來是不OK了

*方法二
使用RSelenium package
連結：https://github.com/ropensci/RSelenium若需要操作教學的話可以參考https://vectorf.github.io/2017/07/10/20170710-%E5%88%9D%E6%8E%A2RSelenium/http://rpubs.com/bigbrotherchen/randseleniumpractice我目前按照教學操作上沒有太大問題
小提醒一下開啟cmd輸入java...那串之後記得不要關掉cmd!!!

我的作法大致描述如下

# 載入package
library(RSelenium)
library(rvest)
library(tidyverse)
rm(list = ls())
options(stringsAsFactors = FALSE)

username = ""這串打你的IG帳號""  # <username here>
password = ""這串打你的IG密碼""  # <password here>
hashtag = ""#你要搜尋的hashtag"" # <hashtag here>

# 建立連線後開啟instagram登入網址
remDr <- remoteDriver(remoteServerAddr = ""localhost"", port = 4444,
browserName = ""chrome"")
remDr$open()
remDr$navigate(""https://www.instagram.com/accounts/login/"")# 控制輸入帳號密碼後點選登入按鈕
webElem <- remDr$findElement(using = 'xpath', value =
""//div/input[@name='username']"")
webElem$sendKeysToElement(list(username))
webElem2 <- remDr$findElement(using = 'xpath', value =
""//div/input[@name='password']"")
webElem2$sendKeysToElement(list(password))
webElem3 <- remDr$findElement(using = 'xpath', value = ""//span/button"")
webElem3$clickElement()

# 在搜尋框裡面輸入hashtag後點選搜尋按鈕
webElem4 <- remDr$findElement(using = 'xpath', value =
""//div/input[@placeholder='搜尋']"")
webElem4$sendKeysToElement(list(hashtag))
webElem5 <- remDr$findElement(using = 'xpath', value =
""//*[@id='react-root']/section/nav/div[2]/div/div/div[2]/div[2]/div[2]/div/a[1]"")
webElem5$clickElement()

#(到這邊的時候就已經進入特定hashtag的所有貼文頁面了
# 控制網頁自動拉到網頁最下方
last_height = 0
repeat {
  remDr$executeScript(""window.scrollTo(0,document.body.scrollHeight);"",
                      list(remDr$findElement(""css"", ""body"")))
  Sys.sleep(2)
  new_height = remDr$executeScript(""return document.body.scrollHeight"",
                                   list(remDr$findElement(""css"", ""body"")))
  if(unlist(last_height) == unlist(new_height)) {
    break
  } else {
    last_height = new_height
  }
}

#到這邊的時候會拉到所有貼文最底下
#之所以會這樣做是因為請教朋友的時候對方說
#這類網站叫做waterfall 不會一次讀完
#跟FB有點像往下拉才讀的到

# 想要用rvest package一般爬網頁的作法
remDr$getPageSource()[[1]] %>% read_html(encoding = ""UTF-8"")

#這邊就會遇到問題
#結果長這樣
#{xml_document}
#<html xmlns=""http://www.w3.org/1999/xhtml""lang=""zh-tw"" class=""js logged-in
client-root"">
#Error in nchar(desc) : invalid multibyte string, element 2

#上網查了一下Error in nchar(desc)跟invalid multibyte string
#但問題主要是跟編碼有關所以才會加入UTF-8
#可是還是沒有效果
#想要請問一下是否有人知道
#因為我不太熟html跟xpath所以爬得有點辛苦


*方法三
使用jsonlite package

# 載入package
library(rvest)
library(tidyverse)
library(jsonlite)
library(httr)
library(xml2)

#我先以#台啤18天 當作目標進去IG頁面
#其網址如下:
#https://www.instagram.com/explore/tags/台啤18天/?hl=zh-tw
#接下來我按照爬蟲教學常見的作法
#先按下檢查後點preserve log 還有clear(左上角紅點右邊的按鈕)
#圖請參考:https://i.imgur.com/Pt6O5Gl.png#接下來重新整理頁面後
#觀察XHR部分後發現?__a=1這個東西是要抓取的目標

# 用函數開始抓

url =
""https://www.instagram.com/explore/tags/%E5%8F%B0%E5%95%A418%E5%A4%A9/?__a=1""res <- fromJSON(content(GET(url), ""text""))

#這部分res出來之後有自己要的資料
#譬如說抓下來某一則貼文的內容在下方的程式碼裡面可以找到

res$graphql$hashtag$edge_hashtag_to_media$edges$node$edge_media_to_caption$edges[[20]]

#但這段程式碼裡面沒有包含所有的貼文僅有一部分而已
#所以往下拉之後繼續觀察XHR部分發現有一塊東西?query_hash是目標
#圖請參考https://i.imgur.com/jUQLMtt.png#試圖抓取其url之後利用函數但遇到問題了
url10 <-
""https://www.instagram.com/graphql/query/?query_hash=ded47faa9a1aaded10161a2ff32abb6b&variables=%7B%22tag_name%22%3A%22%E5%8F%B0%E5%95%A418%E5%A4%A9%22%2C%22first%22%3A1%2C%22after%22%3A%22AQBs_yhQbCXYxR7WgT2L598zGjRAT1iunnUIPbNxMQx8BbxZsm-S3YMyJK4bCyBRntcrLemDJqF_b_5Y9YlnQvUS7Iz34M6dWu8ONoX9_jJVaw%22%7D""res10 <- fromJSON(content(GET(url10), ""text""))
#遇到的error顯示
#Error: parse error: premature EOF
#
#                     (right here) ------^
#這塊也有找答案但找不到處理方式


再補充一下
我還有參考其他作法
分別如下:https://www.diggernaut.com/blog/how-to-scrape-pages-infinite-scroll-extracting-data-from-instagram/看這則文章知道說原來IG更換網址的做法大概是怎麼樣子
但我不知道如何利用R來複製這件事情https://toyo0103.blogspot.tw/2018/01/selenium-webdriver-instagram.html看這則文章知道說如果用RSelenium的話可以一則一則點開後關掉
也有試著實作但遇到的問題是不知道該抓取哪個xpath或是css selector的節點

現在覺得困擾的是大概知道觀念但還是不知道如何實作...這樣真的很心癢難耐
目前的問題大概是這樣
謝謝大家!

[環境敘述]:
R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] httr_1.3.1      jsonlite_1.5    forcats_0.2.0   stringr_1.2.0
dplyr_0.7.4     purrr_0.2.4
 [7] readr_1.1.1     tidyr_0.8.0     tibble_1.4.2    ggplot2_2.2.1
tidyverse_1.2.1 rvest_0.3.2
[13] xml2_1.2.0      RSelenium_1.7.1

loaded via a namespace (and not attached):
 [1] reshape2_1.4.2   haven_1.1.1      lattice_0.20-35  colorspace_1.3-2
XML_3.98-1.11    rlang_0.1.6
 [7] pillar_1.1.0     foreign_0.8-69   glue_1.2.0       semver_0.2.0
modelr_0.1.1     readxl_1.0.0
[13] bindrcpp_0.2     bindr_0.1        plyr_1.8.4       munsell_0.4.3
 binman_0.1.0     gtable_0.2.0
[19] cellranger_1.1.0 caTools_1.17.1   psych_1.7.8      wdman_0.2.2
 curl_2.8.1       parallel_3.4.3
[25] broom_0.4.3      Rcpp_0.12.13     openssl_0.9.7    scales_0.5.0
mnormt_1.5-5     hms_0.4.1
[31] stringi_1.1.5    grid_3.4.3       cli_1.0.0        tools_3.4.3
 bitops_1.0-6     magrittr_1.5
[37] lazyeval_0.2.0   crayon_1.3.4     pkgconfig_2.0.1  lubridate_1.7.3
 rstudioapi_0.7   assertthat_0.2.0
[43] R6_2.2.2         nlme_3.1-131     compiler_3.4.3

[關鍵字]:
爬蟲 instagram scrapy rvest Rselenium

--","R_Language"
"342","M.1524372044.A.653","killer01","問題","使用STEP尋找最小BIC",2018-04-22 12:40:42,NA,NA,"我是R新手, 第一次使用這個語言. 使用STEP function 尋找最小的BIC, 在建立模型時
我新增了一些 interaction term 到模型中,

context1$abilsq  <- (context1$abil)^2
context1$educsq  <- (context1$educ)^2
context1$expersq <- (context1$exper)^2
context1$abileduc <- context1$abil*context1$educ
context1$abilexper<- context1$abil*context1$exper
context1$educexper<- context1$educ*context1$exper

model2A <- lm(log(wage)~abil+educ+exper+abilsq+educsq
              +expersq+abileduc+abilexper+educexper
              , data = context1)

model2B <- lm(log(wage)~abil+educ+exper+abilsq+educsq
              +expersq+abil*educ+abil*exper+educ*exper
              , data = context1)

兩個模型主要的差別在於 interaction term 有無使用*

model2minBIC <-  step(model2A, direction = ""backward"", k = log(nrow(context1)))
model2minBIC <-  step(model2B, direction = ""backward"", k = log(nrow(context1)))

執行結果似乎 model2B 可以跑出比較小的值, 且兩者跑出來的結果也不一樣.
下面是model2B的結果.

Step:  AIC=-1545.67
log(wage) ~ exper + abileduc + educexper

            Df Sum of Sq    RSS     AIC
<none>                   342.06 -1545.7
- abileduc   1    13.185 355.25 -1506.3
- exper      1    17.853 359.91 -1490.2
- educexper  1    27.377 369.44 -1458.1

下面是model2A的結果
Step:  AIC=-1539.35
log(wage) ~ abil + educ + exper + educ:exper

             Df Sum of Sq    RSS     AIC
<none>                    341.84 -1539.3
- educ:exper  1    2.8843 344.72 -1536.1
- abil        1   10.3991 352.24 -1509.6

想問是什麼原因造成兩個跑出來的結果會不一樣... 謝謝!


[關鍵字]:
BIC, step

--","R_Language"
"343","M.1524230590.A.E0F","popyen","問題","無法繪出arulesViz包的graph圖",2018-04-20 21:23:06,NA,NA,"[問題類型]：無法繪出arulesViz包的graph圖

[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
小弟目前在嘗試使用arules與arulesViz包，想利用apriori演算法，製作文字的關聯網路
圖，範例程式是參考以下ggnaro大的作品。

但是執行到23行:
plot(items, method = ""graph"",control = list(type=""items"", main="""",cex=2, nodeC
ol =c(""green"")))

會使程式崩潰，無法正常產出，但我發現在‘graph’, ‘paracoord’, ‘scatterplot
’三種plot中，只有graph網路圖會崩潰，其他都可以正常產出，請問各位前輩有遇過相
同問題是如何解決的嗎？謝謝


崩潰圖QQhttps://i.imgur.com/iX1VqvS.jpg[程式範例]:

 Githubhttps://goo.gl/w4T4WG[關鍵字]:

arules, apriori

--","R_Language"
"344","M.1524155015.A.EDF","disney82231","問題","保留沒有重複的值或者完全刪掉重複的值",2018-04-20 00:23:32,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

dataframe中 想要保留v1變數中沒有重複的值，或者完全刪掉重複的值。

例如 1 1 2 3 ，執行之後變成 2 3 。

謝謝
[程式範例]:

用duplicated或distinct都不會刪掉完全重複的值。

[關鍵字]:

刪除 保留

--","R_Language"
"345","M.1524153230.A.BCE","AmigoSafin","問題","cannot find function ""ddply""",2018-04-19 23:53:47,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好~

我已經裝了package ""plyr""
但是我的R還是找不到""ddply""這個function

不知道有沒有版友有類似經驗能提供建議?
謝謝~~



[程式範例]:
package ‘plyr’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
        C:\Users\User\AppData\Local\Temp\RtmpAZwHOf\downloaded_packages> findFunction(""ddply"")list()> summarydata<-ddply(shoesales, .(ExerciseType), summarise, Total=sum(Sales))Error in ddply(shoesales, .(ExerciseType), summarise, Total = sum(Sales)) :
  could not find function ""ddply""


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R version 3.4.4 (2018-03-15)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)Matrix products: defaultlocale:[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] compiler_3.4.4 tools_3.4.4[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"346","M.1524149835.A.627","jasonfghx","問題","計數問題",2018-04-19 22:57:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

假設我有一個資料aaaabbbbcccccddddeeeeeeeee ffffff ggggg ttttt s f d g kg
r d d gc xd
就是很多個英文字
但我需要針對a去計算有幾個 b有幾個

以此類推

想請問有沒有適合的套件可以利用? 因為找好久找不到

煩請高人提點

感謝https://imgur.com/a/S1UwTMj我已經畫出來

但底下的字因為太密  想說有沒有辦法讓他斜斜的呈現?

ggplot有這樣功能嗎?

[程式範例]:


[關鍵字]:
資料計數


--","R_Language"
"347","M.1524148250.A.F0D","disney82231","問題","合併list中數個dataframe",2018-04-19 22:30:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一個list中有120個dataframe，想要把第61到120個的dataframe列合併起來，想法是

用迴圈寫但不知道該怎麼打。

[程式範例]:
for(i in 61:length()){
 test<- rbind(x[i]])
}
這邊就卡住了

謝謝

[環境敘述]:

[關鍵字]:
迴圈 合併

--","R_Language"
"348","M.1524054532.A.D7C","wep","問題","請問如何將CSV檔依據”列” 分別存成txt",2018-04-18 20:28:50,NA,NA,"各位前輩您們好，請問該如何在R中將已讀進來的100個row （橫向）自動分別存成100個t
xt檔案呢？ 謝謝！！

--","R_Language"
"349","M.1524021545.A.75D","ciuhkimo","問題","cvs檔第一列作為變數名稱",2018-04-18 11:19:02,NA,NA,"請問如何把讀取的CSV檔的第一列設為變數名稱，而不被R當作變數下去運算？

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

R 3.4.0
RStudio 1.0.153

謝謝

--","R_Language"
"350","M.1523959294.A.81F","disney82231","問題","for迴圈讀取factor的數字",2018-04-17 18:01:29,NA,NA,"[問題類型]:
想要完成某件事情

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
現在有一個data.frame其中有三個factor變數(v1,v2,v3)，每一個factor都是1~3，我想
要

每種狀況下抽取2/3個樣本出來，例如v1為1，v2為1，v3為1時有3筆資料符合，然後隨機

抽取2個樣本出來。遇到問題是，我想要用迴圈讀數字factor的數字，不知道該怎麼讓迴

圈讀取到。
[程式範例]:

for(i in 1:3){
 for(j in 1:3){
  for(k in 1:3){
 sum(data{data$v1==i&data$v2==j&data$v3==k)
}
}}
程式跟問敘述不一樣，因為想要算每種情況下有多少個樣本時，就遇到問題了。

謝謝

[環境敘述]:


[關鍵字]:

迴圈 factor

--","R_Language"
"351","M.1523958970.A.484","jackylikebmw","問題","ggplot繪製圓餅圖問題",2018-04-17 17:56:06,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我目前想要透過ggplot繪製圓餅圖，上網看了很多範例
但是發現套用到我的檔案上時，在圖上繪製百分比時會出現錯誤
好像是當有較大百分比位數時，會有一些錯誤，想要請各位幫忙~

[程式範例]:
#以下為stackoverflow範例
#https://stackoverflow.com/questions/45657990library(dplyr)
library(ggplot2)
data <-
data.frame(a=c(""a1"",""a1"",""a2"",""a3"",""a1"",""a2"",""a3"",""a4"",
""a2"",""a1"",""a5"",""a4"",""a3""),b=1:13)
data <- data %>%
  group_by(a) %>%
  count() %>%
  ungroup() %>%
  mutate(per=`n`/sum(`n`)) %>%
  arrange(per)
data$label <- scales::percent(data$per)
ggplot(data=data)+
  geom_bar(aes(x="""", y=per, fill=a), stat=""identity"", width = 1)+
  coord_polar(""y"", start=0)+
  theme_void()+
  geom_text(aes(x=1, y = cumsum(per) - per/2, label=label))
#在這個範例中，程式是正常顯示的
#https://imgur.com/85FnFOr#但是當我將某一比例加大時，畫圖就出現錯誤
library(dplyr)
library(ggplot2)
data <-
data.frame(a=c(""a1"",""a1"",""a2"",""a3"",""a1"",""a2"",""a3"",""a4"",
""a2"",""a1"",""a5"",""a4"",rep(""a3"",20)),b=1:32)
data <- data %>%
        group_by(a) %>%
        count() %>%
        ungroup() %>%
        mutate(per=`n`/sum(`n`)) %>%
        arrange(per)
data$label <- scales::percent(data$per)
ggplot(data=data)+
        geom_bar(aes(x="""", y=per, fill=a), stat=""identity"", width = 1)+
        coord_polar(""y"", start=0)+
        theme_void()+
        geom_text(aes(x=1, y = cumsum(per) - per/2, label=label))
#https://imgur.com/7BHUOuq[環境敘述]:
R version 3.4.4 (2018-03-15)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)
dplyr_0.7.4
ggplot2_2.2.1


[關鍵字]:
ggplot , piechart , 圓餅圖

--","R_Language"
"352","M.1523955553.A.68D","lsshno1","問題","PDF 文字座標",2018-04-17 16:59:10,NA,NA,"請問各位前輩，R是否有可以抓取文字座標的package呢？目前找到的package都是將pdf輸
出成文字。
目前找到的軟體有：PDFlib TET
但僅有support Python
細節可以參考：https://stackoverflow.com/questions/6418673/pdf-parsing-with-text-and-coordinates
謝謝各位！

--","R_Language"
"353","M.1523889040.A.1CD","andrew43","問題","Re: ggplot2 畫function",2018-04-16 22:30:37,NA,NA,"→ andrew43: 按ggplot設計的風格，你應該要先創造一個dataframe       04/16 22:18
→ andrew43: 包括了所有2 / (ap[k]) * x ^ 2結果以及多一個欄位來說   04/16 22:19
→ andrew43: 明k各別是多少... 所以會有三個欄位: x, fun(x), k       04/16 22:20
→ andrew43: 我上面的k是指ap中各元素                               04/16 22:20
→ andrew43: 之後，就只要一行geom_line()並指定k為不同顏色即可      04/16 22:21
→ andrew43: 我回個文好了

請參考以下簡化的例子
重點就在於生成 dt

library(ggplot2)
x <- seq(0, 200, 10)
ap <- 1:10
dt <-
  data.frame(
    x.val = rep(x, length(ap)),
    ap.val = rep(ap, each = length(x))
  )
dt$y.val <- 2 / dt$ap.val * dt$x.val ^ 2
ggplot(dt, aes(x.val, y.val, color = as.factor(ap.val))) +
  geom_line()

至於指定顏色等等細節先暫不談※ 引述《Itok (浪裡白條)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我有用ggplot2畫function，想畫多條線在同一張圖，: 用for 迴圈卻只能畫出最後一條，: 想請教版上高手如何處理，謝謝。: [程式範例]:: library(ggplot2): ap<-c(10,20,30,40,50,60,70,80,90,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1000): #initial plot p: p<-ggplot(data.frame(x=c(0,200)), aes(x))+ylim(0,200): #畫出多條function: myPlot<-ggplot(data.frame(x=c(0,200)), aes(x))+ylim(0,200)+:   stat_function(fun=function(x)2/(ap[1])*x^2, geom=""line"", aes(colour=""010""))+:   stat_function(fun=function(x)2/(ap[2])*x^2, geom=""line"", aes(colour=""020""))+:   stat_function(fun=function(x)2/(ap[3])*x^2, geom=""line"", aes(colour=""030""))+:   stat_function(fun=function(x)2/(ap[4])*x^2, geom=""line"", aes(colour=""040""))+:   stat_function(fun=function(x)2/(ap[5])*x^2, geom=""line"", aes(colour=""050""))+:   stat_function(fun=function(x)2/(ap[6])*x^2, geom=""line"", aes(colour=""060""))+:   stat_function(fun=function(x)2/(ap[7])*x^2, geom=""line"", aes(colour=""070""))+:   stat_function(fun=function(x)2/(ap[8])*x^2, geom=""line"", aes(colour=""080""))+:   stat_function(fun=function(x)2/(ap[9])*x^2, geom=""line"", aes(colour=""090""))+:   stat_function(fun=function(x)2/(ap[10])*x^2, geom=""line"", aes(colour=""100""))+:   stat_function(fun=function(x)2/(ap[11])*x^2, geom=""line"", aes(colour=""150""))+:   stat_function(fun=function(x)2/(ap[12])*x^2, geom=""line"", aes(colour=""200""))+:   stat_function(fun=function(x)2/(ap[13])*x^2, geom=""line"", aes(colour=""250""))+:   stat_function(fun=function(x)2/(ap[14])*x^2, geom=""line"", aes(colour=""300""))+:   stat_function(fun=function(x)2/(ap[15])*x^2, geom=""line"", aes(colour=""350""))+:   stat_function(fun=function(x)2/(ap[16])*x^2, geom=""line"",aes(colour=""400""))+:   stat_function(fun=function(x)2/(ap[17])*x^2, geom=""line"",aes(colour=""450""))+:   stat_function(fun=function(x)2/(ap[18])*x^2, geom=""line"",aes(colour=""500"")): myPlot: #用for迴圈畫僅能畫出最後一條: for (i in c(1:18)): {:   p<-p+stat_function(fun=function(x){2/(ap[i])*x^2}, geom=""line"", aes(colour=ap[i])): }: p: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤: R version 3.3.3 (2017-03-06): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): [關鍵字]:: ggplot2 function--","R_Language"
"354","M.1523887469.A.3F3","Itok","問題","ggplot2 畫function",2018-04-16 22:04:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我有用ggplot2畫function，想畫多條線在同一張圖，
用for 迴圈卻只能畫出最後一條，
想請教版上高手如何處理，謝謝。


[程式範例]:

library(ggplot2)
ap<-c(10,20,30,40,50,60,70,80,90,100,150,200,250,300,350,400,450,500,550,600,650,700,750,800,850,900,950,1000)
#initial plot p
p<-ggplot(data.frame(x=c(0,200)), aes(x))+ylim(0,200)

#畫出多條function
myPlot<-ggplot(data.frame(x=c(0,200)), aes(x))+ylim(0,200)+
  stat_function(fun=function(x)2/(ap[1])*x^2, geom=""line"", aes(colour=""010""))+
  stat_function(fun=function(x)2/(ap[2])*x^2, geom=""line"", aes(colour=""020""))+
  stat_function(fun=function(x)2/(ap[3])*x^2, geom=""line"", aes(colour=""030""))+
  stat_function(fun=function(x)2/(ap[4])*x^2, geom=""line"", aes(colour=""040""))+
  stat_function(fun=function(x)2/(ap[5])*x^2, geom=""line"", aes(colour=""050""))+
  stat_function(fun=function(x)2/(ap[6])*x^2, geom=""line"", aes(colour=""060""))+
  stat_function(fun=function(x)2/(ap[7])*x^2, geom=""line"", aes(colour=""070""))+
  stat_function(fun=function(x)2/(ap[8])*x^2, geom=""line"", aes(colour=""080""))+
  stat_function(fun=function(x)2/(ap[9])*x^2, geom=""line"", aes(colour=""090""))+
  stat_function(fun=function(x)2/(ap[10])*x^2, geom=""line"", aes(colour=""100""))+
  stat_function(fun=function(x)2/(ap[11])*x^2, geom=""line"", aes(colour=""150""))+
  stat_function(fun=function(x)2/(ap[12])*x^2, geom=""line"", aes(colour=""200""))+
  stat_function(fun=function(x)2/(ap[13])*x^2, geom=""line"", aes(colour=""250""))+
  stat_function(fun=function(x)2/(ap[14])*x^2, geom=""line"", aes(colour=""300""))+
  stat_function(fun=function(x)2/(ap[15])*x^2, geom=""line"", aes(colour=""350""))+
  stat_function(fun=function(x)2/(ap[16])*x^2, geom=""line"",aes(colour=""400""))+
  stat_function(fun=function(x)2/(ap[17])*x^2, geom=""line"",aes(colour=""450""))+
  stat_function(fun=function(x)2/(ap[18])*x^2, geom=""line"",aes(colour=""500""))
myPlot

#用for迴圈畫僅能畫出最後一條
for (i in c(1:18))
{

  p<-p+stat_function(fun=function(x){2/(ap[i])*x^2}, geom=""line"", aes(colour=ap[i]))

}
p

請提供 sessionInfo() 的輸出結果，
裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，
讓版友更容易找出錯誤
R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)
[關鍵字]:
ggplot2 function

--","R_Language"
"355","M.1523883817.A.769","a7319263","問題","轉換日資料到週資料",2018-04-16 21:03:35,NA,NA,"[問題類型]:
轉換載下來的資料期間

[軟體熟悉度]:
新手，很菜的那種


[問題敘述]:
各位大神好
我用BatchGetSymbols抓下sp500股價的日資料
現在我想要把日資料轉換成週資料
但無法用to.weekly()
想請問各位大神我該如何轉換

[程式範例]:
install.packages(""BatchGetSymbols"")
library(""BatchGetSymbols"")




date.start <- ""2004/12/25""
date.end <- ""2017/12/31""

df.SP500 <- GetSP500Stocks()
tickers <- df.SP500$tickers

l.out <- BatchGetSymbols(tickers=tickers,
                         first = date.start,
                         last.date = date.end)



感謝各位大神

--","R_Language"
"356","M.1523630355.A.B4F","cywhale","分享","Re: R shiny web app 一些經驗雜談",2018-04-13 22:39:13,NA,NA,"最近嘗試R shiny async版本 (+ promises) 配合future的實現方式，很簡單的原則是把
 long-run R functions 抽出來，例如

fx <- reactive({ future( foo() ) })

在future()當中不要再放其他 shiny reactive controls 最後在

observeEvent(event, {
  fx() %...>% ({do something 或其他 side effects})
})

簡單的demo可看作者 Joe Cheng的presentation，相當清楚https://goo.gl/qPRrNG詳細的教學可以看官網https://rstudio.github.io/promises/index.html官網中介紹的promise_all，我簡單做了可以抓取不同地方資料庫的應用，概念像是：

  f1 <- reactive({ future( fetchDB1() ) })
  f2 <- reactive({ future( fetchDB2() ) })
  observeEvent(event, {
    df1 <- f1() %...>% ({filtering...}) })
    df2 <- f2() %...>% ({filtering...}) })
    promise_all(df1, df2) %...>% {
      rbindlist(l=., fill=TRUE, use.names=TRUE)
      do some controls or side effects here...
    }
  })

抓取DB1, DB2 等待的時間不盡相同，這樣的好處就是當某一個client user在 shiny app
做這件事時，shiny-server可以拿回控制權，其他client users 仍可正常使用這個shiny
app

剛好 future 釋出1.8版，作者在blog上介紹了這一版與配合promises的修改https://www.jottr.org/2018/04/12/future-results/但 R shiny async 還在development階段，我安裝在ubuntu沒有問題，但在windows安裝
遇到一些問題，還沒解決。至少 ubuntu上跑是沒有問題的，現階段也就這樣用。
有興趣可以試試看

devtools::install_github(""rstudio/shiny"")

有些若shiny app中有使用的套件也需要 async-compatible branches

devtools::install_github(""ramnathv/[email<U+00A0>protected]"")
devtools::install_github(""jcheng5/[email<U+00A0>protected]/feature/async"")
devtools::install_github(""rstudio/[email<U+00A0>protected]"")

簡單分享於此~ 比較詳細的細節可能要參考官網說明了！

--","R_Language"
"357","M.1523628956.A.E0D","wolfoxy","問題","auto.arima()函數請教",2018-04-13 22:15:53,NA,NA,"有人知道 auto.arima() 是根據什麼準則來決定ARMA(p,q)的嗎

有試著調函數出來看
發現目前程度可能還無法解讀…

--","R_Language"
"358","M.1523628214.A.9E3","AmigoSafin","問題","how to modify the code for a matrix",2018-04-13 22:03:30,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好

我目前有的code是整個matrix中的數字是1 to 20
排成四欄
如下:> zMatrix<-matrix(1:20,ncol=4); colnames(zMatrix)<-paste0(""col"",1:4)> zMatrixcol1 col2 col3 col4
[1,]    1    6   11   16
[2,]    2    7   12   17
[3,]    3    8   13   18
[4,]    4    9   14   19
[5,]    5   10   15   20

若我想要修改matrix那邊的指令
讓每一欄位都是1 to 20
同樣地重複四欄
這樣要如何修改那 matrix(1:20,ncol=4)?

剛剛才體悟到[]和()的不同>""<
我自己的理解是[]是位置
例如[1:20]就是有20個
例如x<-c(1:10,20)
是1 2 3 4 5 6 7 8 9 10 20

我改成
x[1:20]就變成
1 2 3 4 5 6 7 8 9 10 20 NA NA NA NA NA NA NA NA NA
所以我認為[1:20]的意思是要佔到20個位置
但因為x這個vector只有11個factor
所以剩下的9個都是NA

然後我就思考了上方的題目
想做些改變
但等級太低無法
想來請教大家
謝謝您們!



[程式範例]:

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"359","M.1523541526.A.B22","Algernon69","問題","R Studio 讀取xlsx 問題",2018-04-12 21:58:42,NA,NA,"[問題類型]:

程式跑不出來


[軟體熟悉度]:

入門

[問題敘述]:

如題，想要讀取xlsx的股票資料繪製k線圖，可是卻一直無法讀取資料，一直跑出 packag
e'rJava' could not be loaded，已經安裝好Java也用sys設定好路徑，唯一的問題是我
的Java長這https://i.imgur.com/hLDwrA1.jpg另外我是從這邊學怎麼設定Javahttp://earthworm2016.pixnet.net/blog/post/323353783[程式範例]:請把以下不需要的部份刪除[環境敘述]:

R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional
)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] quantmod_0.4-12 TTR_0.23-2      xts_0.10-2      zoo_1.8-0       shiny_1.0.
5

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.14    lattice_0.20-35 digest_0.6.13   mime_0.5        grid_3.4.
3      R6_2.2.2        xtable_1.8-2
 [8] curl_3.1        tools_3.4.3     httpuv_1.3.5    compiler_3.4.3  htmltools
_0.3.6
>


[關鍵字]:

Java, xlsx

--","R_Language"
"360","M.1523486697.A.7D4","AmigoSafin","問題","subset R",2018-04-12 06:44:54,NA,NA,"請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我目前在看R for SAS and SPSS Users
看到使用R做Subset,
我不太懂最後那個程式碼後面那個"",""的意思

首先是在mydata中新增一個變數 Zq1
然後新增一個MySubset的data frame
[q1 < mean(q1),]的意思是否是:
將mydata這個data frame中 在q1這個column裡 比mean(q1)小的值subset出來

那後面那個"","" 是代表其他在Mydata這個data frame裡面的factors嗎
所以最後subset出來的data frame
會是 在q1那一column中小於所有q1內的值的平均數的那些數 以及在其他欄位的變數
是這樣嗎?

假設
mydata:
q1 q2 q3
5  8  7
10 4  6

所以Subset出來就應該是

[5 8 7]

是這個意思嗎?
而如果沒有"",""
就會只有
[5]

不知道我的理解對不對?
向大家請教
謝謝您們~



[程式範例]:請把以下不需要的部份刪除# Example multi-level transformation.
mydata$Zq1 <- (q1 - mean(q1) ) / sd(q1)
mydata
mySubset <- mydata[ q1 < mean(q1), ]
mySubset

[關鍵字]:
Subset選擇性，也許未來有用--

--","R_Language"
"361","M.1523443611.A.5B8","viwocm","徵求","股票回測教學",2018-04-11 18:46:49,NA,NA,"急徵R家教
目前的需求如下
讀進我自己的資料(不是透過R抓)、跑均線回測、畫出K線圖、
用A股股價均線突破當擇時點，去買賣B股股票

有看到教學https://goo.gl/qo8Jjb可以用candleChart畫出k線圖
教學中的資料用getSymbol抓的，所以是xts可以直接用
但我用自己的檔案是data.frame格式，
不知道怎麼轉換成xts
像是我的檔案第一欄是日期
用as.ts()的時候第一欄全變數字了...

然後教學中的第二篇https://goo.gl/ejcNq5要下載quantstrat不知道為什麼我載不了QQ

地點：木柵（政大附近）
費用：700/hr（學生沒甚麼錢sorry...）
時間：4/11晚上、4/12早上
請直接加我line：neo1991

--","R_Language"
"362","M.1523369720.A.B9C","dreler1","問題","使用system下面的path windows",2018-04-10 22:15:17,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我其實想要用system 去跑一個windows下面的東西

但是path一直搞不定

我覺得重點是這一行

system(""mysql -u userID -ppassword -h host -P port <
C:\\Users\\USERID\\PATH\\mysql.sql"")

我一直以為 \ 可以escape 但是事情好像不是我想的那麼簡單https://stackoverflow.com/questions/49755010/r-system-mysql我在Ipy/CMD下面都是過了 是可以用 會選R的原因是

電腦限制很多 我這台公務電腦之前R用比較多 所以套件比較多 後面要做事情比較方便

python我是偷偷用我個人電腦測的 不能真的拿去做公務

script都要給上面review 我又是在政府部門所以有點麻煩

請提供 sessionInfo() 的輸出結果，
裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，
讓版友更容易找出錯誤
R 是3.4.3 windows 8


謝謝大家

--","R_Language"
"363","M.1523342429.A.21C","s3714443","問題","Re: 由大排到小分五群",2018-04-10 14:40:25,NA,NA,"自問自答

這個問題是高百分位累積太多重複值

我在stackoverflow發現有個高手自己寫函數來解決

先做一個符合特性的向量 並想分5群

x=c(rep(10,20),runif(50,2,10))

findInterval(x,quantile(x,probs = 0:5/5),
rightmost.closed=T,left.open = T )

會發現只能分4群

hmisc的cut2也是

cut2(x,g=5) %>% as.numeric()


自製函數可以成功分出5群

ntile=function(x,n){
  b <- x[!is.na(x)]
  q <- floor((n * (rank(b, ties.method = ""first"")-1)/length(b))+1)
  d <- rep(NA, length(x))
  d[!is.na(x)] <- q
  return(d)
}

大家可以試試看




--","R_Language"
"364","M.1523325843.A.1C8","LPD666","問題","如何計算excel某一直行內資料個數",2018-04-10 10:04:01,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

假設我有一行資料如下,請問要如何計算A~Z個數,例如:A 5 C 16
                                                B 3 D 3   . . .
type
 A
 A
 A
 A
 B
 B
 A
 D
 D
 E
 B
 .
 .
 .
 Z

--","R_Language"
"365","M.1523280633.A.DA1","s3714443","問題","由大排到小分五群",2018-04-09 21:30:29,NA,NA,"大家好，想跟請問大家一個問題


假設我有一個向量，想要由大到小分五群
想要回傳的函數是1,2,3,4,5這樣

最高的是5，最低的是1


我後來想到
findInterval(vec,quantile(vec, probs=0:5/5,na.rm = T),
rightmost.closed=T,left.open = T ))

但是碰到一個問題是，有一群資料分配比較奇怪，重複值很多

所以80百分位數 跟100百分位數都是同一個數字

       0%       20%       40%       60%       80%      100%
0.4869390 0.7913138 0.8809726 0.9582218 1.0000000 1.0000000


這樣就會只分4個
想問大家有更好的方法可以處理
感謝

--","R_Language"
"366","M.1523274810.A.F53","celestialgod","問題","Re: for迴圈問題請教",2018-04-09 19:53:27,NA,NA,"※ 引述《jasonfghx (工人)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: lib<-c(100,5,10): com<-c(5,100,6): tea<-c(10,6,100): 現在我有這三個向量 lib com tea 都要拿出其中一個相加: for(i in 1:3){:   for(j in 1:3){:     for(k in 1:3){:     a<-lib[i]+com[j]+tea[k]:     b[k]<-lib[i]+com[j]+tea[k]:     print(a):     }:   }: }: 我主要想請教我得到了27個數據可以怎麼做把它存成一個矩陣?: 因為實際上我的問題會是七個向量: 每個向量有七個數字: 謝謝回復: [程式範例]:: [關鍵字]:: for 迴圈for做法：

out <- matrix(NA, length(lib) * length(com) * length(tea), 1)
idx <- 1

for(i in 1:3){
  for(j in 1:3){
    for(k in 1:3){
      out[idx] <- lib[i] + com[j] + tea[k]
      idx <- idx + 1
    }
  }
}

expand.grid做法1:

rowSums(expand.grid(lib, com, tea))

expand.grid做法2: (把全部弄成list之後，用do.call，這方法比較容易延伸到多個向量)

eleList <- list(lib, com, tea)
rowSums(do.call(expand.grid, eleList))

--","R_Language"
"367","M.1523274180.A.CE5","jasonfghx","問題","for迴圈問題請教",2018-04-09 19:42:57,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

lib<-c(100,5,10)
com<-c(5,100,6)
tea<-c(10,6,100)

現在我有這三個向量 lib com tea 都要拿出其中一個相加

for(i in 1:3){

  for(j in 1:3){
    for(k in 1:3){
    a<-lib[i]+com[j]+tea[k]

    b[k]<-lib[i]+com[j]+tea[k]
    print(a)
    }

  }
}

當然我做三層for可以解決
[1] 115
[1] 111
[1] 205
[1] 210
[1] 206
[1] 300
[1] 116
[1] 112
[1] 206
[1] 20
[1] 16
[1] 110
[1] 115
[1] 111
[1] 205
[1] 21
[1] 17
[1] 111
[1] 25
[1] 21
[1] 115
[1] 120
[1] 116
[1] 210
[1] 26
[1] 22
[1] 116

我主要想請教我得到了27個數據可以怎麼做把它存成一個矩陣?
因為實際上我的問題會是七個向量
每個向量有七個數字
謝謝回復

[程式範例]:


[關鍵字]:
for 迴圈




--","R_Language"
"368","M.1523091963.A.578","hakiooi","問題","套件安裝異常（dplyr,tidytext）",2018-04-07 17:06:00,NA,NA,"[問題類型]:程式諮詢


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
在install兩個套件（tidy、dplyr）時，會一直出現錯誤，其中dplyr以前有安裝過，但現在不知道為什麼一直無法成功安裝，進而連library也會出現錯誤


[程式範例]:> install.packages(""dplyr"")Warning in install.packages :
  URL 'http://dmlc.ml/drat/bin/macosx/mavericks/contrib/3.3/PACKAGES.gz':status was '404 Not Found'

Warning in install.packages :
  URL 'http://dmlc.ml/drat/bin/macosx/mavericks/contrib/3.3/PACKAGES':status was '404 Not Found'
Warning in install.packages :
  unable to access index for repositoryhttps://dmlc.github.io/drat/bin/macosx/mavericks/contrib/3.3:cannot download all files
嘗試 URL 'https://cran.rstudio.com/bin/macosx/mavericks/contrib/3.3/dplyr_0.7.4.tgz'Content type 'application/x-gzip' length 6006175 bytes (5.7 MB)
==================================================
downloaded 5.7 MB


The downloaded binary packages are in
        /var/folders/w4/2_4f02095k70nxwym2lw3x5m0000gn/T//RtmpedXZSf/downloaded_packages> library(dplyr)Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]) :
  namespace ‘tibble’ 1.2 is already loaded, but >= 1.3.1 is required
錯誤: package or namespace load failed for ‘dplyr’> install.packages(""tidytext"")Warning in install.packages :
  URL 'http://dmlc.ml/drat/bin/macosx/mavericks/contrib/3.3/PACKAGES.gz':status was '404 Not Found'

Warning in install.packages :
  URL 'http://dmlc.ml/drat/bin/macosx/mavericks/contrib/3.3/PACKAGES':status was '404 Not Found'
Warning in install.packages :
  unable to access index for repositoryhttps://dmlc.github.io/drat/bin/macosx/mavericks/contrib/3.3:cannot download all files

  There is a binary version available but the source version is later:
         binary source needs_compilation
tidytext  0.1.3  0.1.8             FALSE> library(tidytext)Error in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]) :
  namespace ‘tibble’ 1.2 is already loaded, but >= 1.3.1 is required
錯誤: package or namespace load failed for ‘tidytext’

[環境敘述]:
 setting  value
 version  R version 3.3.2 (2016-10-31)
 system   x86_64, darwin13.4.0
 ui       RStudio (0.99.896)
 language (EN)
 collate  zh_TW.UTF-8
 tz       Asia/Taipei
 date     2018-04-07

[關鍵字]:選擇性，也許未來有用--","R_Language"
"369","M.1523071283.A.7CF","jasonfghx","問題","ARULES問題請教",2018-04-07 11:21:21,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

library(arules)
data(""Groceries"")
ar<-Groceries

我想練習說未來如果拿到一份資料要做關聯分析
所以我把範例的Groceries 資料存成1234.csv
然後我再讀取

data.oraginal <- read.table(""1234.csv"", header=F,sep=""\t"")# 這是我讀取的方式

data1<-as(data.original,""transactions"")#我想靠這個方法變成transaction的形式

只是我再看data1內容 顯示出

transactions in sparse format with
 9835 transactions (rows) and
 7011 items (columns)

我有點不明白同樣是ar這個資料
transactions in sparse format with
 9835 transactions (rows) and
 169 items (columns)

col數竟然不一樣, 也因為這樣導致我把data1丟入

data.rule1 <- apriori(data.original, parameter=list(supp=0.001, conf=0.15))

會沒有任何規則被找出, 但是用ar這筆資料就正常 我現在先懷疑是col那應該出問題

只是有點找不道方法解決

還是說變成transaction的形式 不能用data1<-as(data.original,""transactions"")

想請教可以怎麼做 感恩

謝謝

[程式範例]:



[關鍵字]:
關聯規則","R_Language"
"370","M.1523001997.A.4A2","jasonfghx","問題","Re: GLM回歸請教",2018-04-06 16:06:34,NA,NA,"※ 引述《clansoda (小笨)》之銘言：idx <- c(1, 3, 5) #假設你要1、3、5這三個variables

my_formula <-

as.formula(paste(""Classkd ~ "", paste(colnames(training.data)[idx],
           collapse = ""+"")))

剩下來的就是把你的logistic function裡面的formula改成上面這個就好了

--","R_Language"
"371","M.1522983688.A.D9C","clansoda","問題","Re: GLM回歸請教",2018-04-06 11:01:24,NA,NA,"idx <- c(1, 3, 5) #假設你要1、3、5這三個variables

my_formula <-

as.formula(paste(""Classkd ~ "", paste(colnames(training.data)[idx],
           collapse = ""+"")))

剩下來的就是把你的logistic function裡面的formula改成上面這個就好了

--","R_Language"
"372","M.1522982132.A.1A9","jasonfghx","問題","GLM回歸請教",2018-04-06 10:35:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

[1] ""Age""                        ""Blood Pressure""             ""Specific
Gravity""
 [4] ""Albumin""                    ""Sugar""                      ""Red Blood
Cellsabnormal""
 [7] ""Red Blood Cellsnormal""      ""Pus Cellabnormal""           ""Pus
Cellnormal""
[10] ""Pus Cell clumpsnotpresent""  ""Pus Cell clumpspresent""
""Bacterianotpresent""
[13] ""Bacteriapresent""            ""Blood Glucose Random""       ""Blood Urea""

[16] ""Serum Creatinine""           ""Sodium""                     ""Potassium""

[19] ""Hemoglobin""                 ""Packed  Cell Volume""        ""White Blood
Cell Count""
[22] ""Red Blood Cell Count""       ""Hypertensionno""
""Hypertensionyes""
[25] ""Diabetes Mellitus yes""      ""Diabetes Mellitusno""        ""Diabetes
Mellitusyes""
[28] ""Coronary Artery Diseaseno""  ""Coronary Artery Diseaseyes"" ""Appetitegood""

[31] ""Appetitepoor""               ""Pedal Edemano""              ""Pedal
Edemayes""
[34] ""Anemiano""                   ""Anemiayes""                  ""Classckd""

[37] ""Classnotckd""

這是我全部的變數,我想針對""Classckd""　對其他變數做回歸

想請教是否有什麼語法可以比較簡潔的去做回歸

例如data.glm1 <- glm(formula=Classckd~`Pus Cellabnormal`+Age+`Red Blood
Cellsnormal`,data=data.training,family=binomial(link = ""logit""))

我想繼續加其他變數進去，但是如果打他的名字感覺會程式碼很長

想說有沒有辦法就只打行的數字就好，　只是我試了幾個都編譯不過

a<-names(data.training)

像我試著把所有名目存到a ,formula=Classckd~ 在這後面加工好像都是無法判讀

求是否有比較好的方法 除了全部貼上外

謝謝

[程式範例]:


[關鍵字]:
Ｇｌｍ



--","R_Language"
"373","M.1522944497.A.FAA","ktjoe","問題","畫城市地圖出現OVER QUERY LIMIT情況",2018-04-06 00:08:14,NA,NA,"朋友沒有ptt帳號  代朋友詢問

因為朋友剛接觸R不久

希望板上高手能用好理解的方式為他解惑

先謝謝大家了！

=====================

[問題] 畫城市地圖出現OVER QUERY LIMIT情況


[問題類型]:
程式諮詢


[軟體熟悉度]:
入門


[問題敘述]:
想畫香港地圖但是出現OVER QUERY LIMIT, 輸入其他城市也是同樣情況, 但是當把
location換成國家的時候就沒有這個問題


[程式範例]:
library(ggmap)
library(ggplot2)

map <- get_map(location = ""Hong Kong"", zoom = 10, scale = 2, maptype =
""roadmap"", source = ""google"", force = ifelse(source == ""google"", TRUE, TRUE),
messaging = FALSE, urlonly = FALSE, filename = ""ggmapTemp"", crop = TRUE,
color = ""color"", language = ""en-EN"", api_key)


以下是error:
Error in data.frame(ll.lat = ll[1], ll.lon = ll[2], ur.lat = ur[1], ur.lon =
ur[2]) : arguments imply differing number of rows: 0, 1 In addition: Warning
message: geocode failed with status OVER_QUERY_LIMIT, location = ""Hong Kong""
試過用geocodeQueryCheck() 來查是否超過2500的上限, 但結果顯示還有24xx的限額


請問可以如何畫出城市的地圖, 謝謝


[關鍵字]:
地圖

=====================




--","R_Language"
"374","M.1522912297.A.FC5","omit18","問題","數據重新分組",2018-04-05 15:11:35,NA,NA,"[問題類型]:
程式諮詢

其實也是作業，只是遇到瓶頸，想求救

[軟體熟悉度]:
超級新手

[問題敘述]:
需要將50000筆隨機的分數重新分組成(0級分-5級分)
set.seed(15)
x<-runif(50000,min=0,max=100)

這是題目

[程式範例]:
我自己的想法是這樣

for(i in 1:length(x))
{
  if((x[i]>=0)&(x[i]<=59))
  {print(""0"")
  }else if ((x[i]>=60)&(x[i]<=69))
  {print(""1"")
  }else if ((x[i]>=70)&(x[i]<=79))
  {print(""2"")
  }else if ((x[i]>=80)&(x[i]<=84))
  {print(""3"")
  }else if ((x[i]>=85)&(x[i]<=89))
  {print(""4"")
  }else if ((x[i]>=90)&(x[i]<=100))
  {print(""5"")}
}

這樣跑下去，
的確會重新將每個數字重新分類，
但有沒有語法是能夠幫助我統計
0級分有幾個、1級分有幾個，
我試過length(""0"")，但應該是錯誤的...

先謝謝各位大大了。

--","R_Language"
"375","M.1522844775.A.30A","disney82231","問題","讀取CSV檔英文部分亂碼",2018-04-04 20:26:12,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
讀取CSV檔時，總共只有兩行，第一行原名稱是HUMERUS，第二行是CODE

但讀進去第一行名稱變成UMERUS，H變成中文亂碼，第二行正常。

想請問為甚麼會這樣呢?

CSV檔是xls檔轉成的，會是因為這個原因嗎?

如果是該怎麼辦，第一次遇到英文亂碼變成中文的..

謝謝

[程式範例]:
test<-read.table(""CASE.csv"",sep="","",header = T,encoding=""big5"")
test<-read.table(""CASE.csv"",sep="","",header = T,encoding=""UTF-8"")
test<-read.table(""CASE.csv"",sep="","",header = T)
以上三個都試過了..

[關鍵字]:

讀檔 英文 亂碼 CSV

--","R_Language"
"376","M.1522794834.A.96D","Edster","問題","在function中引function比較慢, why?",2018-04-04 06:33:52,NA,NA,"效能諮詢(我想讓R 跑更快)

[問題敘述]:
在function中引function, 主要是為了好讀好修. 可是這樣就很慢.
請問有什麼方式加速嗎? 例如引用的方法?

[程式範例]:
fun0 = function(fun){
  x=1:10
  y=10:1
  fun1 = function(x,y){z=xy}
  fun2 = function(x,y){z=x*y}

  if(fun == ""plus"") z = fun1(x,y) else{
    if(fun == ""product"") z = fun2(x,y)
  }
  return(z)
}

system.time(for(i in 1:1e7) fun0(""product""))
   user  system elapsed
  12.70    0.00   12.72
# -----------------------------------------
for(i in 1:10) gc()
fun0 = function(fun){
  x=1:10
  y=10:1

  if(fun == ""plus"") z=xy else{
    if(fun == ""product"") z=x*y
  }
  return(z)
}

system.time(for(i in 1:1e7) fun0(""product""))
   user  system elapsed
   7.69    0.00    7.73

[環境敘述]:> sessionInfo()R version 3.4.4 (2018-03-15)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.4 tools_3.4.4    yaml_2.1.18

[關鍵字]:選擇性，也許未來有用--","R_Language"
"377","M.1522761337.A.03E","celestialgod","問題","Re: for迴圈呈現的格式",2018-04-03 21:15:34,NA,NA,"※ 引述《omit18 (胖海)》之銘言：: 因為修課的關係剛接觸R語言，: 很菜，: 目前剛上到迴圈。: for(i in 5:1){cat(rep(""*"",times=i),""\n"")}: 跑出來會是: *****: ****: ***: **: *: 我應該怎麼修改才能跑出來是: *****:  ****:   ***:    **:     *: 這個樣子呢？: 先謝謝各位大大的解惑了這是作業吧...

for(i in 0:4) {
  # pirnt spaces
  cat(paste(rep("" "", times = i), collapse = """")) # 空格數是i
  # print starts
  cat(paste(rep(""*"", times = 5-i), collapse = """")) # star數量是5-i
  # print break line
  cat(""\n"")
}

i如果是跑5~1就自己改吧XD

--","R_Language"
"378","M.1522760954.A.69D","omit18","問題","for迴圈呈現的格式",2018-04-03 21:09:12,NA,NA,"因為修課的關係剛接觸R語言，
很菜，
目前剛上到迴圈。

for(i in 5:1){cat(rep(""*"",times=i),""\n"")}

跑出來會是
*****
****
***
**
*

我應該怎麼修改才能跑出來是
*****
 ****
  ***
   **
    *
這個樣子呢？

先謝謝各位大大的解惑了

--","R_Language"
"379","M.1522760673.A.C86","celestialgod","問題","Re: for迴圈讀取大量csv",2018-04-03 21:04:29,NA,NA,"※ 引述《hotlin0709 (hotlin0709)》之銘言：: [問題類型]:使用for迴圈讀取多資料夾內多個csv 處理: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我要讀取多個資料夾內的多個csv，然後讀進來後，全部資料做簡單的處理filter一些變數，: 並將擷取完資料的某一欄位加總起來。: 以下是我寫的方式，但是跑太久了......請問有比較快速的方法嗎？: [程式範例]:: library(dplyr): l<- list.files(path=""/users/Johnny/downloads/M08A"",pattern=""*""): bindtemp <- data.frame(): temp <- data.frame(): for (k in l){:   ll<- list.files(path=paste(""/users/Johnny/downloads/M08A/"",k,sep = ''),pattern=""*""):   for (i in ll) {:     file_names <- paste(""/users/Johnny/downloads/M08A/"",k,i,sep = '/'):     files <- list.files(path=file_names, pattern=""*""):     for (file in files) {:       bindtemp <- read.csv(paste(file_names,file,sep=""/""),header=F):       temp <- rbind(temp,bindtemp):     }:   }: }: df3<-temp %>% filter((V3==""03F0961N""|V3==""03F0846S""),V4==31) %>% summarise(n=sum(V5)): [關鍵字]:: for迴圈 讀取多資料夾的CSV覺得M08A好像在哪看過= =? 你是在用交通部的資料嗎

而且V3 filter的條件看起來像是VD ID，03F0961N是國道三號北上車道961公里吧XD

你的程式主要問題是不斷擴增data.frame，造成不斷重複複製

第二個問題是沒必要用到三層迴圈，只需要recursive = TRUE就可以解決了

所以這兩個問題用下面這樣就可以解決，範例code如下：

library(data.table)
# 直接用list.files直接取得全部的csv檔案 (recursive = TRUE)
csvFiles <- list.files(path=""/users/Johnny/downloads/M08A"",
                       pattern=""\\.csv$"", recursive = TRUE)
# 開一個空間存讀進來的資料
temp <- vector(""list"", length(l))
for (i in seq_along(csvFiles))
   temp[[i]] <- fread(csvFiles[i]) # 讀進每一個csv資料
DF <- rbindlist(temp)  # 把list of data.table/data.frame合併成一個
setDF(DF) # 轉回去成data.frame

剩下就看你DF要拿去做什麼了

建議可以把這個常用的資料直接存成一些可以快速import的格式

之後要讀也比較容易

--","R_Language"
"380","M.1522721365.A.C0C","hotlin0709","問題","for迴圈讀取大量csv",2018-04-03 10:09:22,NA,NA,"[問題類型]:使用for迴圈讀取多資料夾內多個csv 處理
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我要讀取多個資料夾內的多個csv，然後讀進來後，全部資料做簡單的處理filter一些變數，
並將擷取完資料的某一欄位加總起來。

以下是我寫的方式，但是跑太久了......請問有比較快速的方法嗎？

[程式範例]:

library(dplyr)
l<- list.files(path=""/users/Johnny/downloads/M08A"",pattern=""*"")
bindtemp <- data.frame()
temp <- data.frame()
for (k in l){
  ll<- list.files(path=paste(""/users/Johnny/downloads/M08A/"",k,sep = ''),pattern=""*"")
  for (i in ll) {
    file_names <- paste(""/users/Johnny/downloads/M08A/"",k,i,sep = '/')
    files <- list.files(path=file_names, pattern=""*"")
    for (file in files) {
      bindtemp <- read.csv(paste(file_names,file,sep=""/""),header=F)
      temp <- rbind(temp,bindtemp)
    }
  }
}
df3<-temp %>% filter((V3==""03F0961N""|V3==""03F0846S""),V4==31) %>% summarise(n=sum(V5))

[關鍵字]:
for迴圈 讀取多資料夾的CSV

--","R_Language"
"381","M.1522683813.A.CAF","girl5566","問題","確認小數點後有幾位",2018-04-02 23:43:31,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:想要確認使用者輸入的數字小數點後到底有幾位例如：123.4565  回傳 小數點4位[程式範例]:[環境敘述]:R 3.2.2--","R_Language"
"382","M.1522387597.A.8A0","clansoda","問題","Re: 把column寫到函數裡面",2018-03-30 13:26:33,NA,NA,"我對這個資料集有點印象，不知道是不是John Hopkins在coursera上面的課程

先說我的想法，我覺得這件事沒有變成function的必要性，不過這是作業

好像是要測試寫function的概念，我不確定這是不是你要的

Pollutant_mean <- function(data, column, selectedindex) {
    return (mean(data[selectedindex, column]))
}

建議你可以google一下""Google R Style""

把程式碼寫的乾淨一點會比較容易看一點

--","R_Language"
"383","M.1522383609.A.C69","rosetree","問題","把column寫到函數裡面",2018-03-30 12:20:06,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
在寫courser作業時，
把csv寫到myfiles檔案後，

#delet NA
specdata2<-na.omit(myfiles)
#mean
specdata<-subset(specdata2,subset = ID%in%c(1:10))
mean(specdata$sulfate)

想把它改成可以用函數呼叫的形式
pollutantmean(""specdata"", ""sulfate"", 1:10)

可是一直卡在不知道怎麼把specdata$sulfate放到函數裡面@@

[程式範例]:
我試著這樣寫

pollutantmean<-function(x,y){
    specdata<-subset(specdata2,subset = ID%in%x)
    mean(y)
}
x<-1:10
y<-specdata$sulfate
pollutantmean(x,y)

出現：Error in mean(y) : object 'y' not found


[環境敘述]:3.4.3[關鍵字]: function選擇性，也許未來有用--","R_Language"
"384","M.1522337707.A.E77","celestialgod","問題","Re: apply 取代for",2018-03-29 23:35:04,NA,NA,"※ 引述《disney82231 (小刀會序曲)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 用for 寫了一個迴圈，想用apply寫出一樣的結果: 另外想請問，在多數情況下，apply都能取代for嗎: [程式範例]:: for (i in 2:10){:   x$v1[x[,i]==1] <- i }: }: 若每列x的第i行=1時，x每列的第一行改成i: [關鍵字]::  apply for測試了一下我原本預想的方法，發現用for就很快了XDDD

然後回一下，像這種case，其實用apply是不適合的

基本上直接去修改原本的值是最簡單的


library(data.table)
## random generation
x <- matrix(rbinom(1e6, 3, 0.5), 1e5)
# check dimension of x
dim(x) # 100000, 10

## copy x
x2 <- x

## for-loop method
st <- proc.time()
for (i in 2:10)
  x2[x2[ , i] == 1, ] <- i
proc.time() - st
#   user  system elapsed
#   0.02    0.00    0.01

## vectorized method
st <- proc.time()
# get indices which is equal to 1 in column 2 to 10
idxDT <- data.table(which(x[ , 2:10] == 1, arr.ind = TRUE))
# calculate what the value at i-th location will change to
out <- idxDT[ , .(value = min(col) + 1), by = .(row)]
# assign the values
x[out$row, ] <- out$value
proc.time() - st
#   user  system elapsed
#   0.12    0.01    0.14


## check equality
all.equal(x, x2) # TRUE: > sessionInfo()R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


--","R_Language"
"385","M.1522316273.A.28E","andrew43","問題","Re: 如何使用迴圈跑變數命名",2018-03-29 17:37:50,NA,NA,"我建議不要生成10個物件，而改成以一個list來做，之後會好操作很多。
下面的例子做3次glm()

Y <- data.frame(
  Y1 = rbinom(10000, 1, 0.1),
  Y2 = rbinom(10000, 1, 0.5),
  Y3 = rbinom(10000, 1, 0.9)
)
X <- data.frame(foo = rnorm(10000), bar = rnorm(10000))
fit <-
  apply(
    Y,
    2,
    FUN = function(this.Y) {
      glm(this.Y ~ ., family = binomial, data = X)
    }
  )

# 接下來看看下面的code回傳什麼
exp(coef(fit$Y1))
summary(fit$Y2)
predict(fit$Y3)

# 明白後可以利用lapply()或sapply()做工作了
sapply(fit, coef)
lapply(fit, function(this.fit) {
  print(summary(this.fit))
})
sapply(fit, function(this.fit) {
  predict(this.fit,
          type = ""response"",
          newdata = X)
})※ 引述《ss12356tw (ss12356tw)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 正在用logistic regression的function: 但因為模型要重複跑9次: 不知道該如何使用迴圈處理變數命名的部分讓程式碼縮短: 謝謝大家: [程式範例]:: ml_1=glm(group[,1]~.,data=data,family = ""binomial""): p_1=predict.glm(ml_1,newdata=pendigits.tst[,-17], type=""response""): ml_2=glm(group[,2]~.,data=data,family = ""binomial""): p_2=predict.glm(ml_2,newdata=pendigits.tst[,-17], type=""response""): ml_3=glm(group[,3]~.,data=data,family = ""binomial""): p_3=predict.glm(ml_3, newdata=pendigits.tst[,-17],type=""response""): ml_4=glm(group[,4]~.,data=data,family = ""binomial""): p_4=predict.glm(ml_4,newdata=pendigits.tst[,-17], type=""response""): ml_5=glm(group[,5]~.,data=data,family = ""binomial""): p_5=predict.glm(ml_5,newdata=pendigits.tst[,-17], type=""response""): ml_6=glm(group[,6]~.,data=data,family = ""binomial""): p_6=predict.glm(ml_6,newdata=pendigits.tst[,-17], type=""response""): ml_7=glm(group[,7]~.,data=data,family = ""binomial""): p_7=predict.glm(ml_7, newdata=pendigits.tst[,-17],type=""response""): ml_8=glm(group[,8]~.,data=data,family = ""binomial""): p_8=predict.glm(ml_8,newdata=pendigits.tst[,-17], type=""response""): ml_9=glm(group[,9]~.,data=data,family = ""binomial""): p_9=predict.glm(ml_9,newdata=pendigits.tst[,-17], type=""response""): 我將ml_1~9改成i: 發現沒辦法處理命名的部分: 想請問該如何修正: 謝謝: for(i in 1:9){:   ml_i=glm(group[,i]~.,data=data,family = ""binomial""):   p_i=predict.glm(ml_i,newdata=pendigits.tst[,-17], type=""response""): }: 跑出的錯誤：:   Error in as.data.frame.default(data, optional = TRUE) ::   cannot coerce class """"function"""" to a data.frame: [環境敘述]:: 3.4.3: [關鍵字]:: 變數命名迴圈:

--","R_Language"
"386","M.1522314614.A.2A7","ss12356tw","問題","如何使用迴圈跑變數命名",2018-03-29 17:10:11,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
正在用logistic regression的function
但因為模型要重複跑9次
不知道該如何使用迴圈處理變數命名的部分讓程式碼縮短
謝謝大家

[程式範例]:


ml_1=glm(group[,1]~.,data=data,family = ""binomial"")
p_1=predict.glm(ml_1,newdata=pendigits.tst[,-17], type=""response"")

ml_2=glm(group[,2]~.,data=data,family = ""binomial"")
p_2=predict.glm(ml_2,newdata=pendigits.tst[,-17], type=""response"")

ml_3=glm(group[,3]~.,data=data,family = ""binomial"")
p_3=predict.glm(ml_3, newdata=pendigits.tst[,-17],type=""response"")

ml_4=glm(group[,4]~.,data=data,family = ""binomial"")
p_4=predict.glm(ml_4,newdata=pendigits.tst[,-17], type=""response"")

ml_5=glm(group[,5]~.,data=data,family = ""binomial"")
p_5=predict.glm(ml_5,newdata=pendigits.tst[,-17], type=""response"")

ml_6=glm(group[,6]~.,data=data,family = ""binomial"")
p_6=predict.glm(ml_6,newdata=pendigits.tst[,-17], type=""response"")

ml_7=glm(group[,7]~.,data=data,family = ""binomial"")
p_7=predict.glm(ml_7, newdata=pendigits.tst[,-17],type=""response"")

ml_8=glm(group[,8]~.,data=data,family = ""binomial"")
p_8=predict.glm(ml_8,newdata=pendigits.tst[,-17], type=""response"")

ml_9=glm(group[,9]~.,data=data,family = ""binomial"")
p_9=predict.glm(ml_9,newdata=pendigits.tst[,-17], type=""response"")



我將ml_1~9改成i
發現沒辦法處理命名的部分
想請問該如何修正
謝謝
for(i in 1:9){
  ml_i=glm(group[,i]~.,data=data,family = ""binomial"")
  p_i=predict.glm(ml_i,newdata=pendigits.tst[,-17], type=""response"")
}

跑出的錯誤：
  Error in as.data.frame.default(data, optional = TRUE) :
  cannot coerce class """"function"""" to a data.frame


[環境敘述]:

3.4.3


[關鍵字]:

變數命名迴圈



--","R_Language"
"387","M.1522306793.A.5DA","disney82231","問題","apply 取代for",2018-03-29 14:59:49,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
用for 寫了一個迴圈，想用apply寫出一樣的結果

另外想請問，在多數情況下，apply都能取代for嗎


[程式範例]:
for (i in 2:10){
  x$v1[x[,i]==1] <- i }
}
若每列x的第i行=1時，x每列的第一行改成i
[關鍵字]:

 apply for

--","R_Language"
"388","M.1522253556.A.1D7","rosetree","問題","讀取csv資料後的計算問題",2018-03-29 00:12:32,NA,NA,"[問題類型]: 讀取csv資料後，無法用裡面的資料做計算

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:在world bank下載一些經濟數據資料，存成csv檔讀取csv資料後，想要做基本的平均數計算，卻顯示Warning message:In mean.default(t) : argument is not numeric or logical: returning NA想把數字轉成interger，可是轉出來的值卻和原data不一樣[環境敘述]:3.4.3[關鍵字]: csv選擇性，也許未來有用--","R_Language"
"389","M.1522244600.A.247","disney82231","問題","ifelse不執行動作",2018-03-28 21:43:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
ifelse(條件，成立時動作，不成立動作)， 有辦法像 if else一樣當條件不成立時，

不做任何動作嗎?

[程式範例]:

x$V1<-ifelse(x$V2==1,2,XXX)

想要XXX不做任何動作，若X第2二行不等於1，X第一行不做任何動作。



[關鍵字]:

ifelse不動作

--","R_Language"
"390","M.1522233827.A.F5C","jasonfghx","問題","arules的問題",2018-03-28 18:43:45,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:https://imgur.com/a/jz6Sg我這是用arules跑出來的關聯規則
想請教上面這些規則我可以怎麼下載下來? 或是輸出?
謝謝答覆


[程式範例]:

ar=read.table(""123456.csv"", header=F,sep=""\b"")
ar1=as(ar,""transactions"")
rules <- apriori(ar1, parameter=list(support=0.001,confidence=0.15,maxlen=5))
inspect(rules)
#想請教為何inspect(rules) 執行下去都沒有反應?

[關鍵字]:
關聯規則



--","R_Language"
"391","M.1521991458.A.5D6","jackylikebmw","問題","Re: shiny 恢復上次結果",2018-03-25 23:24:12,NA,NA,"嗨，不好意思，一忙就忘記回應這篇文章了
我依照程式碼修改成可自動上傳一半的結果上去dropbox雲端的版本
我當初撰寫程式碼時也參考過以下兩個網址，給大家參考https://daattali.com/shiny/persistent-data-storage/https://shiny.rstudio.com/articles/persistent-data-storage.html希望可以幫助到也擁有這個問題的版友們
---以下程式碼
library(shiny)
library(shinyjs)
library(DT)
library(rdrop2)
#example data

#write.csv(data.frame(x=c(1:5)+rnorm(5),y=c(5:1)+rnorm(5)),""thedata.csv"",row.names
= F,fileEncoding = 'UTF-8')
ui <- fluidPage(
        useShinyjs(),
        # 載入讀取按鈕
        actionButton(""btn"", ""Continue?""),
        # 使用者匯入資料
        fileInput(""userData"", label=""Your Data"", multiple=T,
accept=c("".csv"")),
        # 第一個結果
        DT::dataTableOutput(""list1""),
        # 使用者輸入值
        numericInput(""n"", ""wait n seconds"", value=1),
        actionButton(""btn2"", ""confirm?""),
        # 第二個結果
        DT::dataTableOutput(""list2""),
        plotOutput(""plotResult"")
)

server <- shinyServer(function(input, output, session){
        drop_auth(new_user = FALSE, key = ""xxxxxxxxxxx"",
                  secret = ""xxxxxxxxxxx"", cache = TRUE)

        # 匯入使用者資料
        getData <- reactive({
                req(input$userData)
                out <- read.csv(input$userData$datapath)
                return(out)
        })
        # 第一個複雜的計算
        calResult1 <- reactive({
                #抓取檔案位置
                file_name=drop_dir('yourapphere/data')
                if(dim(file_name)[1]<1){
                        #因為之前沒資料，所以不顯示繼續按鈕
                        hide(""btn"")
                        d <- getData()
                        #假裝運算(第1次複雜運算)
                        Sys.sleep(10)
                        #上傳第一次處理結果
                        write.csv(d,""thedata.csv"",row.names = F,fileEncoding
= 'UTF-8')
                        drop_upload(""thedata.csv"",path = ""yourapphere/data"")
                        #重新讀取一次dropbox，抓取確切位置
                        file_name_path
<<-drop_dir('yourapphere/data')$path_display
                }else{
                        #因為之前有資料，所以不顯示上傳按鈕
                        hide(""userData"")
                        #按按鈕才讀取
                        req(input$btn)
                        #讀取dropbox檔案
                        file_name_path <<-file_name$path_display
                        d <- drop_read_csv(file_name_path,fileEncoding =
'UTF-8',stringsAsFactors = F)
                }
                out <- d
                return(out)
        })

        # 顯示第一個結果
        output$list1 <- DT:: renderDataTable(
                datatable(calResult1())
        )

        # 第二個複雜的計算
        calResult2 <- reactive({
                d  <-calResult1()
                #假裝運算(第2次複雜運算)
                req(input$btn2)
                Sys.sleep(isolate(input$n))
                out <- d[order(d$x),]
                #記得，當結果出爐，記得刪除第一次處理的結果
                drop_delete(file_name_path)
                #關掉繼續及選擇時間按鈕
                hide(""n"");hide(""btn2"")
                return(out)
        })
        # 顯示第二個結果
        output$list2 <- DT:: renderDataTable({
                datatable(calResult2())
        })

        output$plotResult <- renderPlot({
                d <- calResult2()
                plot(x=d$x, y=d$y)
        })
})
shinyApp(ui,server)
---
ps:記得去套用成自己的dropbox api、檔案位置也記得換※ 引述《puppy77 (  )》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我寫了一個網頁，主要功能是使用者匯入他的data: 網頁會使用匯入的data做複雜的運算後顯示出第一個結果: 使用者檢視過這個結果後再input一些值: 網頁再依第一個結果搭上這次的input的值做另一個複雜的運算: 最後再顯示出第二個結果及畫圖: 因使用者看過第一個結果後會需要時間決定之後要input的值 可能是隔幾天: 又加上運算實在花很多時間: (我已經很努力修改程式減少運算時間，但還是很久....Orz): 所以希望能夠在使用者下一次打開網頁後能夠恢復到他上次關掉的狀態: 有考慮過把所有的計算結果全部都匯出下次再匯入: 但因為這樣要匯出很多東西 又要再匯入很多東西(下面程式是簡化過的): 所以不知道是否能有其他更好的選擇: 又若真的必須把所有結果一一匯出的話: 匯入的部分會建議從哪個步驟匯入??: 譬如下面程式第一個計算結果: 把匯入寫在calResult1內或是output$list1內比較好??: [程式範例]:: ui <- fluidPage(:   # 使用者匯入資料:   fileInput(""userData"", label=""Your Data"", multiple=T, accept=c("".csv"")),:   # 第一個結果:   DT::dataTableOutput(""list1""),:   # 使用者輸入值:   numericInput(""n"", ""N"", value=1),:   # 第二個結果:   DT::dataTableOutput(""list2""),:   plotOutput(""plotResult""): ): server <- shinyServer(function(input, output, session){:   # 匯入使用者資料:   getData <- reactive({:     req(input$userData):     out <- read.csv(input$userData$datapath):     return(out):   }):   # 第一個複雜的計算:   calResult1 <- reactive({:     d <- getData():     out <- complicatedFunction1(d):     return(out):   }):   # 顯示第一個結果:   output$list1 <- DT:: renderDataTable(:     datatable(calResult1()):   ):   # 第二個複雜的計算:   calResult2 <- reactive({:     d <- calResult1():     out <- complicatedFunction2(d, input$n):     return(out):   }):   # 顯示第二個結果:   output$list2 <- DT:: renderDataTable(:     datatable(calResult2()):   ):   output$plotResult <- renderPlot({:     d <- calResult2():     plot(x=d$x, y=d$y):   }): })--","R_Language"
"392","M.1521977692.A.9B7","jasonfghx","問題","如何定位出遺漏值在哪一行哪一列",2018-03-25 19:34:49,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

不好意思 原始資料中 有些空白被填上- ? NA這種

但實際上他是遺漏值, 有沒有什麼方式可以把它們取代成空白

讓is.na判斷成是遺漏值, 謝謝!!




[程式範例]:

wdbc=read.table(""DM_Assignment_2_Kidney.csv"", header=F,sep="","")
wdbc1=wdbc
names(wdbc) <- c(""Age"",""Blood Pressure"",""Specific
Gravity"",""Albumin"",""Sugar"",""Red Blood Cells"",""Pus Cell"",""Pus Cell
clumps"",""Bacteria"",""Blood Glucose Random"",""Blood Urea"",""Serum
Creatinine"",""Sodium"",""Potassium"",""Hemoglobin"",""Packed  Cell Volume"",""White
Blood Cell Count"",""Red Blood Cell Count"",""Hypertension"",""Diabetes
Mellitus"",""Coronary Artery Disease"",""Appetite"",""Pedal Edema"",""Anemia"",""Class"")

for(i in 1:25)(
wdbc1[,i]<-gsub(""[?]"",NA, wdbc[,i])
)


[關鍵字]:
遺漏值


--","R_Language"
"393","M.1521886827.A.BCF","b2815914","問題","讀取資料如何正確分列?",2018-03-24 18:20:25,NA,NA,"我想要把這txt檔開頭0與開頭1的句子分開

檔案如下https://goo.gl/Yo5hw8可是我用read.delim()沒辦法分乾淨，如圖所示

麻煩各位大大幫忙解惑一下~~謝謝大家!https://i.imgur.com/pc2hDUa.jpghttps://i.imgur.com/QsROUuj.jpg--","R_Language"
"394","M.1521819966.A.5E3","wu860125","問題","xlsx套件安裝問題",2018-03-23 23:46:03,NA,NA,"[問題類型]:



程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)



[軟體熟悉度]:



入門(寫過其他程式，只是對語法不熟悉)



[問題敘述]:

有一個用readlx匯入的.xlsx檔整理後想再匯出到excel

但用write.csv會跑掉 （不同的兩列資料被存在同一列）https://i.imgur.com/i2eRdWF.jpg沒有找到解決的辦法 所以想用xlsx匯出成.xlsx試試

但xlsx跟rJava都載不進去 看過一些國外網站 還是沒辦法解決



[程式範例]:https://i.imgur.com/IW4xhf8.jpg[環境敘述]:
R version 3.4.2 (2017-09-28)

Platform: x86_64-apple-darwin15.6.0 (64-bit)

Running under: macOS Sierra 10.12.6



Matrix products: default

BLAS:

/System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.f
r
LAPACK:

/Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib



locale:

[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8



attached base packages:

[1] stats     graphics  grDevices utils     datasets  methods   base



other attached packages:

[1] rio_0.5.9



loaded via a namespace (and not attached):

 [1] compiler_3.4.2      magrittr_1.5        tools_3.4.2

haven_1.1.0
[5] foreign_0.8-69      tibble_1.3.4        curl_2.8.1

Rcpp_0.12.12

 [9] cellranger_1.1.0    readxl_1.0.0        data.table_1.10.4-3

forcats_0.2.0

[13] openxlsx_4.0.17     rlang_0.1.2



[關鍵字]:



write.csv格式跑掉, xlsx安裝錯誤

--","R_Language"
"395","M.1521712713.A.EE3","HumuHumu","問題","Shiny呈現類似EXCEL的合併儲存格",2018-03-22 17:58:30,NA,NA,"想請問Shiny有沒有辦法呈現類似下圖這種表格的形式呢?https://imgur.com/5SWwt1t不一定要是R的data frame可以讀取的格式，只要呈現看起來像是這樣就可以了

--","R_Language"
"396","M.1521617104.A.BC4","locka","問題","當read_csv遇到utf-8-BOM",2018-03-21 15:24:59,NA,NA,"各位好:

我使用readr::read_csv讀取csv檔

ex:a <- read_csv(""xxx.csv"")

按下enter後出現幾行字:

Parsed with colum specification:
cols(
    `<U+FEFF>id` = col_character(),
    ...
)

當時沒有想太多, 因為View(a)看起來都很正常


接著要把 a 跟其他的 dataFrame merge的時候總是會出現錯誤:
Error in fix.by(by.x, x) : 'by' must specify a uniquely valid column

用dplyr::left_join()則是會出現:
Error in left_join_impl(x, y, by$x, by$y, suffix$x, suffix$y) :
  'id' column not found in rhs, cannot join


懷疑應該是那個`<U+FEFF>id`在作怪
用關鍵字找到這篇https://github.com/tidyverse/readr/issues/263不過看完還是不知道發生了甚麼事[email<U+00A0>protected]@a

不曉得有人可以協助解釋嗎?
1. UTF-8-BOM 跟 UTF-8 的差別? (之前讀csv檔從來沒注意過有這個問題)
2. R 要怎麼正確的讀取 UTF-8-BOM 的檔案呢?


任何觀念的釐清小弟都很歡迎
先謝謝各位了！！！


ps.
最後我是用很笨的方法
a <- a %>% select(id=`<U+FEFF>id`...)
把欄位改名後就可以成功merge（但還是想知道大家遇到這問題都怎麼處理的）


補充:
用names(a), colnames(a), summary(a)看起來欄位都顯示正常
不過head(a)會顯示以下的東西
# A tibble: 6 × 5
          `<U+FEFF>id`
                 <chr>
          ......


--","R_Language"
"397","M.1521609161.A.697","AndrewShi","問題","increasing 'x' and 'y' values expected",2018-03-21 13:12:39,NA,NA,"想請教當出現下面那個error(increasing 'x' and 'y' values expected)時是哪裡出錯
以及該如何解決??
我是否可以詢問R這個error是什麼意思該如何解決，如果可以，請問可以用什麼指令來查
詢呢??https://i.imgur.com/iEc3dX8.jpghttps://i.imgur.com/f17hQTW.jpg順便想問下上面那個error代表的意思是什麼??
我上網查了stackoverflow類似的問題，有人說是記憶體空間不足的問題，我開了電腦效
能的監視器來看在執行那個步驟的時候記憶體空間的確是使用100%的狀態，但不確定是不
是真的是記憶體空間不足的問題，而且之後還是可以執行後面的指令(程式碼)且記憶體使
用狀態有下降回穩的趨勢，所以想請問這個error會不會影響到後續資料能不能跑的出來
，如果會的話，想請教有沒有什麼方法可以解決，stackoverflow那裡有人提到可以打gc(
 )來釋放記憶體，但當下試了之後還是使用100%的狀態，下降回穩的情況是打完gc( )隔
很久之後才出現的情形，煩請各位高手解答了，謝謝~--","R_Language"
"398","M.1521268077.A.7B5","clansoda","問題","Re: 迴圈轉向量或apply,關於股票macd技術指標",2018-03-17 14:27:54,NA,NA,"這種方法叫做anonymous function，在配合sapply與lapply這兩個function上有

很好的效果，不需要在外頭定義一個function並賦予variable name再使用apply

家族的functions，其實類同於python的lambda。

data <- c(1, 3, 5, 7, 9) # 簡單的資料

data <- sapply(1 : 5, function(k) {
    data[k] + 1
})

上面的這個k函數是你可以隨便給予的一個暫時的variable

這個值會接下來暫代你前面的資料，也就是1、2、3、4、5

這個apply會跑5次，因為你的資料給進去的長度是5

第一次跑的時候他看到你的資料是1，所以這時候k就是1

我給的指令是幫我算data這個向量裡面的第一個值 + 1

所以是data[1] + 1，第二項是data[2] + 2

做了五次，所以最後的結果是1 + 1, 3 + 1, 5 + 1....

如果你不assign給一個varaible，他的預設就是print出來

所以上面如果不給data這個variable他就會print 2, 4, 6, 8, 10

跟迴圈一樣，你不一定要跟k有關係，可能他就是拿來定義要跑的次數的

sapply(1 : 5, function(k) {
   ""I Love You""
})

這個型態一樣可行，一般建議不需要更改function外的variable才使用apply

要更改function外的variable用for loop，兩個雖然有時可以交換使用，但各

有適合的地方。如果你真的很想在這邊用apply，下面這個做法可能可行

data <- c(5, 4, 3, 2, 1)

sapply(1 : 5, function(k) {
   data[k] <<- data[k] + 1
})

這是一種可行的方案，你也不需要assign variable

但這只是提供你這個方法，這個方法並不建議使用。

--","R_Language"
"399","M.1521260428.A.F1C","tus","問題","Parse JSON (httr)",2018-03-17 12:20:22,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我的目標是建立一個API來query UMLS databasehttps://www.nlm.nih.gov/research/umls/[程式範例]:

遇到的問題是 使用content來讀取UMLS的database時

ST <- content(xxxxxx)  會得到以下錯誤訊息
Error: lexical error: invalid char in json text.
                                        ST-1404656-xMnOFQS7TBwygkyKiEf6
                      (right here) ------^

其實錯誤訊息內的""ST-1404656-xMnOFQS7TBwygkyKiEf6"" 就是我要得到的ST碼

這個程式一年前可以用 看來應該是某些package update後造成的

今天 Google 很久 有人在JSON file最後按個enter 或者先用readLine

但此錯誤訊息依然存在 所以我用了一個很笨的方法 我寫了一個function來讀錯誤訊息

然後抓出ST_140xxxxxx

想請問有沒有更好的解決方法

謝謝

--","R_Language"
"400","M.1521249374.A.564","a3236852","問題","迴圈轉向量或apply,關於股票macd技術指標",2018-03-17 09:16:09,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我寫了一個function,裡面有使用迴圈,我有看到人家說在R中使用迴圈速度會變慢,
所以我希望能轉成向量或apply,但如果有其他能加快這個程式的速度的方法都可以

我不曉得該怎麼改,讓程式能跑更快,
在quantmod中有MACD()function跟我要做的事情其實一樣
只是開頭每日需求指數(Demand Index，DI)，DI = (最高價 + 最低價 + 2 ? 收盤價) ?
它使用的是收盤價,我看了MACD的function看不懂,所以就自己看公式一條一條寫出來


[程式範例]:
data2.csv檔案,我使用google雲端https://drive.google.com/file/d/1ODee0oJyxXuCPNqg0fjv5SErMm1gs87i/view程式碼https://ideone.com/8SMiD8我是看以下公式寫出來的
參考公式http://nengfang.blogspot.tw/2014/09/macd-excel.htmlhttp://www.ezchart.com.tw/inds.php?IND=MACD[環境敘述]:
3.4.1

[關鍵字]:
迴圈,向量,apply

--","R_Language"
"401","M.1521205417.A.C58","paranoia5201","心得","免費R入門課程，有人會想要嗎？",2018-03-16 21:03:35,NA,NA,"感謝大家的支持！回信或推文說有興趣者，都已經逐一去信蒐集時間。

人數超過10人，遠高於我想預期的小班制......。

如果第一梯次的時間妳／你無法配合，我會看上課狀況、再安排第二梯次！

敬請期待∼











本人自學R軟體好一段時間，背景算是文組跨到資料的領域。

除了遇到問題時靠google解決，若有實體上課的機會也會盡量去湊一腳。

但是可能許多教學者（無論是網路上或實體課程），多是資訊或統計背景出身，

有時候有些觀念的說明，我都覺得......還是很不容易懂，對於初學者則更困難。



因此、我想說我曾作為門外漢的經驗，

可以提供給一些完全沒有碰過這軟體的人，有好更理解的方式。



會來這裡看板的人，大多應該都是R的高手高手高高手，

但若我有意思開個簡單的初級班，是否有人有興趣參加呢？

（其實我也不知道該去哪裡找初學者，談R還是來R版最適合）



我的經驗比較少有用R做高深的分析，但是「資料處理」卻是我工作的主要內容。

資料可以怎麼「整理」，也是有很多細節。



如果有人完全沒有人碰過數理統計、完全沒有碰過統計軟體、如果你有心想從R開始學習、

歡迎來信告訴我，我們可以討論如何進行這個初級班。

地點、在台北；時間、再安排。



謝謝大家∼




--","R_Language"
"402","M.1521163005.A.C5F","a3236852","問題","shiny中的checkboxgroup的選擇",2018-03-16 09:16:39,NA,NA,"[問題類型]:

效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想說上個問題好像太雜了,將問題縮小一點。

我在shiny中用checkbox只要勾選就要是一個條件,
舉例來說 checkbox1=a>1 , checkbox2=b>3 ,checkbox3=c>4
本來一個checkbox是可以成立,我可以寫成checkbox1=a>1 回給我一個true or false
但是因為我想要多個checkbox 舉例我選擇了checkbox1&checkbox2
我希望條件會是cond=b>3&c>4,但是那個&我不曉得怎麼讓它出現

所以我做成字串的方式,再丟回server端,在判斷哪一個條件存在,存在的話就將cond設為
b>3&c>4,雖然可行但是要將所有可能列出,這樣效率太差,
不曉得有什麼樣的方式可以讓程式簡潔一些
前面有看到一篇類似的,但是還是不曉得該怎麼改~https://www.ptt.cc/bbs/R_Language/M.1514992617.A.5F0.html先謝謝大家幫忙了~~

[程式範例]:
server,覺得function資料不給應該也ok,就用(..).代替https://ideone.com/5ZtgbTuihttps://ideone.com/fHSdRJmacd資料https://imgur.com/wBICXH5kd資料https://imgur.com/zggxpQp[環境敘述]:
3.4.1

[關鍵字]:
checkboxgroup,shiny

--","R_Language"
"403","M.1521033954.A.E52","Darlsa","問題","Re: NLP英文文章處理",2018-03-14 21:25:50,NA,NA,"嗨，我之前處理tm的時候，也有遇到同樣的問題，
我要抓雙字詞的出現頻率，但tm包都會直接分成兩個字，

例如「social design」會被分成「social」跟「design」，

我的做法是直接把兩個字的空格去掉，黏在一起，然後用gsub()把原文替換成黏起來的，
這樣tm包在處理的時候，就會認為是一個單字了。

希望能夠解決你的問題。※ 引述《piercelin (pierce)》之銘言：: [問題敘述]::     大家好，最近在練習用R跑NLP，目前處理英文文章，在斷詞方面我想使用自己的: 詞庫進行斷詞，例如文章中""My name is Pierce""，正常斷詞會斷在空格處變成""My"" ""name"": ""is"" ""Pierce""，但我想使用自己的詞庫讓斷詞變成：""My name"" ""is"" ""Pierce""。:     目前Google關鍵字name entity recognition已經搜尋過，試過openNLP package，: 但都沒有辦法達到我想要的效果(使用自己的詞庫進行斷詞)，請問其他有經驗的大大有: 什麼解決的辦法嗎?: [環境敘述]:: R version 3.4.2 (2017-09-28): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): [關鍵字]:: NLP、斷詞、name entity recognition--","R_Language"
"404","M.1521015335.A.237","a3236852","問題","shiny跑出來的速度很慢",2018-03-14 16:15:30,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我用R做了一個股票回測,在放到shiny上,但是回測圖很慢才跑出來,超過10秒
我不確定問題出在哪裡,我想了幾個可能
1.macd(技術指標)的方法我是自己寫的,因為原本的套件跑出來的值跟我要的有點不一樣,
我照著公式寫出來,但是寫的方法是土法煉鋼,有用到迴圈,我知道用到迴圈速度會慢,
但不知道該怎麼改

2.選擇要什麼決策我用checkbox group,假設我今天checkbox寫KD>80,macd<50
抓到的值
K <- ""K>80"" %in% input$checkstrategy
M <- ""macd<50"" %in% input$checkstrategy
我用if else的方式把所有可能窮盡
像是 if(K){cond=kd<80}
else if (K&M){cond=kd<80&Macd<50}
else if (M){cond=Macd<50}
像是這樣,我前面有看到一篇一樣是shiny的,但我還是看不懂如何簡化跟怎麼
把我要的公式設成條件

3.方法該放在哪裡,放在output$Strategy <- renderPlot({})輸出還是放在
shinyServer(function(input, output) {}裡面
或是放在shinyServer(function(input, output) {}外面
問題有點雜亂,不好意思~
只是希望能以正常的速度跑出來就好了
不曉得為什麼跑出來的速度很慢


[程式範例]:
程式碼沒有很完整,請見諒
這是1跟2相關的程式碼https://ideone.com/cZ8153[環境敘述]:
3.4.1

[關鍵字]:
shiny,速度

--","R_Language"
"405","M.1520996299.A.67A","clansoda","問題","Re: 分割data.frame裡的文字(像excel資料剖析)",2018-03-14 10:58:14,NA,NA,"Hi,如果你熟悉data.table的基本語法的話 他提供一個很快的方法

mystring <- ""123,123,123""

dt <- data.table(target = mystring)

dt[, c(""first"", ""second"", ""third"") := tstrsplit(target, "","")]


--","R_Language"
"406","M.1520990807.A.C21","a3236852","問題","分割data.frame裡的文字(像excel資料剖析)",2018-03-14 09:26:45,NA,NA,"問題類型:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:我想要將data.frame裡的[123,123,123]
可以讓資料框增加變成[123][123][123]
像excel中的資料剖析
[程式範例]:https://imgur.com/0TQZRtV我想要在R中變成像這樣https://imgur.com/Q2KG5Fx[環境敘述]:
3.4.1
[關鍵字]:
分割,data.frame,資料剖析

--","R_Language"
"407","M.1520839553.A.AF0","zhiying","問題","使用Ｒ進行購物籃分析",2018-03-12 15:25:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想用apriori做十三種藥物的關聯性分析
[程式範例]:
我是參考這篇http://www.cc.ntu.edu.tw/chinese/epaper/0036/20160321_3606.html我的資料是二元檔,共13個變項,
beer=read.xlsx(""d:\\stella\\R\\beer.xls"",header=T,sheetIndex=1)
beer=as.matrix(beer)
進行到這裡之後,要計算關聯性

rule=apriori(beer,parameter=list(supp=0.2,conf=0.8))
可是計算的結果,我的lhs欄位都是空白的,只有rhs有我的13個變項,
想請問是這甚麼原因？謝謝！




[環境敘述]:
R 3.4.3


--","R_Language"
"408","M.1520836964.A.0D8","paranoia5201","問題","如何讓legend在圖表中標示正確的資料",2018-03-12 14:42:41,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述] & [程式範例]:
一個原始的資料為lung、展開後則為lung_spread。詳細資料內容如下：> head(lung)year areaname_new ADJ_R
1 2001       台北市 30.55
2 2001       台中市 32.94
3 2001       台南市 29.64
4 2001       高雄市 25.68
5 2001       新北市 36.65
6 2001       彰化縣 33.75> lung_spreadyear 台中市 台北市 台南市 屏東縣 高雄市 雲林縣 新北市 嘉義縣 彰化縣
1  2001  32.94  30.55  29.64  22.31  25.68  30.22  36.65  32.52  33.75
2  2002  30.80  30.60  31.88  21.89  23.93  30.12  36.82  31.71  35.46
3  2003  31.14  28.12  28.54  28.44  25.40  34.66  30.04  36.14  34.87
4  2004  32.44  31.32  31.75  29.53  29.68  34.60  34.37  38.13  36.27
5  2005  31.77  29.57  34.63  31.19  32.76  39.00  33.98  35.87  32.35
6  2006  32.72  31.12  33.69  27.85  33.99  35.13  34.07  37.66  34.52
7  2007  34.32  31.31  34.87  29.35  34.93  29.02  39.93  36.43  36.16
8  2008  36.04  31.54  34.25  26.50  33.06  33.83  38.79  36.78  35.96
9  2009  34.21  35.32  39.07  30.73  33.25  37.66  42.11  40.54  38.38
10 2010  33.48  33.42  36.86  27.62  33.90  31.79  38.90  38.33  36.49
11 2011  34.76  33.27  35.77  29.30  33.83  33.10  38.69  36.34  37.04
12 2012  36.90  33.39  37.12  30.91  35.77  35.89  41.09  38.36  40.02
13 2013  34.44  33.33  34.14  33.13  34.39  38.50  39.21  36.98  36.73
14 2014  33.92  34.02  35.77  30.99  37.30  37.29  39.96  35.32  40.80
15 2015  37.47  35.78  38.06  32.90  35.58  39.14  38.07  35.44  38.11


問題一：
如果用以下的語法劃出歷年折線圖，旁邊的legend內容不曉得是否正確？
（labels的順序為lung_spread所呈現的順序排列）
（有沒有比較聰明的方式，可以讓我不用一個一個變項輸入......包括legend的名稱？）

ggplot(lung, aes(x=year, y=ADJ_R, group = areaname_new)) +
  geom_line(aes(color=areaname_new))+
  geom_point(aes(color=areaname_new))+
  theme(legend.position=""right"")+
  scale_color_discrete(
    labels = c(""台中市"", ""台北市"", ""台南市"",
               ""屏東縣"", ""高雄市"", ""雲林縣"",
               ""新北市"", ""嘉義縣"", ""彰化縣""))


問題二：如果是照以下語法畫圖，卻又不會出現legend。那我該要怎麼寫才對呢？
（順便一問：這個線條的表現又比上面的成果還醜...有無任何優化方式？）

ggplot(lung_spread, aes(x = year)) +
  geom_line(aes(y = 台中市), colour=""grey"", group = 1, size = 1.5) +
  geom_line(aes(y = 台北市), colour=""blue"", group = 1, size = 1.5) +
  geom_line(aes(y = 台南市), colour=""brown"", group = 1, size = 1.5) +
  geom_line(aes(y = 高雄市), colour=""green"", group = 1, size = 1.5) +
  geom_line(aes(y = 新北市), colour=""pink"", group = 1, size = 1.5) +
  geom_line(aes(y = 彰化縣), colour=""orange"", group = 1, size = 1.5) +
  geom_line(aes(y = 雲林縣), colour=""black"", group = 1, size = 1.5) +
  geom_line(aes(y = 嘉義縣), colour=""white"", group = 1, size = 1.5) +
  geom_line(aes(y = 屏東縣), colour=""yellow"", group = 1, size = 1.5) +
  labs(x = ""Year"", y = ""Age-Standardized Adjustment Ratio"",
       title = ""歷年發生率，2001-2015"")


[環境敘述]:
R version 3.3.2

[關鍵字]:
折線圖、legend


--","R_Language"
"409","M.1520692726.A.69A","piercelin","問題","NLP英文文章處理",2018-03-10 22:38:43,NA,NA,"[問題敘述]:

    大家好，最近在練習用R跑NLP，目前處理英文文章，在斷詞方面我想使用自己的
詞庫進行斷詞，例如文章中""My name is Pierce""，正常斷詞會斷在空格處變成""My"" ""name""
""is"" ""Pierce""，但我想使用自己的詞庫讓斷詞變成：""My name"" ""is"" ""Pierce""。
    目前Google關鍵字name entity recognition已經搜尋過，試過openNLP package，
但都沒有辦法達到我想要的效果(使用自己的詞庫進行斷詞)，請問其他有經驗的大大有
什麼解決的辦法嗎?

[環境敘述]:

R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


[關鍵字]:

NLP、斷詞、name entity recognition

--","R_Language"
"410","M.1520655823.A.31D","Lynnhan","問題","for loop 找 平均數 卡住 ",2018-03-10 12:23:40,NA,NA,"[問題類型]:

用for loop 找每個資料裡的平均數

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

for (i in 1:3){
  n <- paste(""mean"", i, sep = """")
  assign(n, mean(page[i]$sum))
}

我想做成以下這個樣子

但是輸入的時候會有error:

mean1 <- mean(page1$sum)
mean2 <- mean(page2$sum)
mean3 <- mean(page3$sum)

Error in page[i] : object of type 'closure' is not subsettable

請問有什麼其他方法可以解嗎 或是要修改的地方

感謝大大們 如果有解出來 會以200P答謝

[關鍵字]:

for

mean

--","R_Language"
"411","M.1520595766.A.AFC","earlywinter","問題","寫write.csv遇到問題",2018-03-09 19:42:43,NA,NA,"[問題類型]:遇到錯誤


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想把我從FB粉絲專業爬到的內容用成csv檔，在跑write.csv(page,""page.csv"",row.names)時跑出以下：Error in as.logical(test) :cannot coerce type 'closure' to vector of type 'logical'請問這該如何解決呢[程式範例]:install.packages(""Rfacebook"")install_github(""Rfacebook"", ""pablobarbera"", subdir=""Rfacebook"")install.packages(""devtools"")library(devtools)library(Rfacebook)token <-me <- getUsers(""me"", token, private_info = TRUE)me$namerequire(""Rfacebook"")fb.oauth <- fbOAuth(app_id=app_secret=extended_permissions = TRUE)me <- getUsers(""me"",token=fb.oauth)me$namepage.id <- ""170290829685289""page <- getPage(page.id, token=fb.oauth, n = 1)str(page)setwd(""~/R"")write.csv(page,""page.csv"",row.names)[環境敘述]:使用Rstudio[關鍵字]:選擇性，也許未來有用--","R_Language"
"412","M.1520576483.A.9DE","dailylily","問題","匯出xlsx到檔案的指定分頁",2018-03-09 14:21:20,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
因為工作需求想簡化一些重複動作，
需要將A檔案的第三分頁指定存至B檔案的第三分頁
目前我找到的指令最多只有附加到B檔案成為最後一個分頁
不知道是否有方法可以指定存成哪一個分頁呢？
順便問一下，想要修改分頁的指令該用甚麼@@


[程式範例]:

write(data, path, append = T)
這樣是附加成為最後一張sheet的寫法
雖然也可以讀取全部分頁後一頁頁附加達到目的
但想求直接指定分頁的寫法



[環境敘述]:[關鍵字]:選擇性，也許未來有用--","R_Language"
"413","M.1520415622.A.AF6","Wush978","分享","修改既有的R function內容",2018-03-07 17:40:18,NA,NA,"[關鍵字]: R, debug

好讀版：http://wush.ghost.io/trace/今天為了追一個安裝套件的bug，我需要追蹤`tools:::.install_packages`這個程式碼在

`if (test_load) {`以後的行為。



在追蹤R語言函數的行為時，我常用的是在原始碼中插入`browser()`與

`debug(tools:::.install_packages)`兩種方法。`trace`函式我一直不太懂。有興趣的

讀者可以在查閱我過去寫的：[R的除錯功能](http://wush.ghost.io/r-debug/)在追`tools:::.install_packages`這個函數時，一來我懶的去研究如何修改`tools`這個

內建套件的函數原始碼，二來這個函數很複雜，如果用`debug`需要瘋狂的next step...



`trace`這個函數，是用來編輯已經存在的R函數。第一種用法是直接在指定的行數插入給

定的expression。這裡的行數，是以`list(body(tools:::.install_packages))`的輸出

為準。有興趣的讀者直接查閱`examples(trace)`就可以看到範例了。



另外一種作法，是直接設定`edit = TRUE`，R就會打開預設的編輯器(效果應該等同於

`file.edit`)後，讓我們直接編輯原始碼，儲存退出後生效。以我手上的例子，我需要輸

入：`trace("".install_packages, where = loadNamespace(""tools""), edit = TRUE)`。



以下的附加說明是寫給沒這麼熟R套件系統的讀者。`tools:::.install_packages`是

tools套件的內部函數(有三個`:`)，所以即使我`library(tools)`之後，直接在console

輸入`.install_packages`，R仍然會回報錯誤：找不到`.install_packages`物件。因此

我需要指定`where`參數，告訴R`.install_packages`在哪裡。`tools`套件的內部函數，

在R中是放在`<environment: namespace:tools>`這個環境中，我們可以使用

`loadNamespace(""tools"")`的輸出來取得這個環境。



輸入以後，我就可以手動編輯原始碼，直接找到`test_load`這段程式之後，在下一行插

入`browser()`，就可以在執行`tools:::.install_packages`時直接中斷在我要的地方。


--","R_Language"
"414","M.1520307614.A.96C","a3236852","問題","關聯式規則有空集合",2018-03-06 11:40:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我要用R做關聯式規則,
使用arules套件,分析出來不知道為什麼會有空集合?(不知道怎麼描述XD)
我想可能是我最小信賴度(min confidence)調太低?
想知道為什麼調太低會出現空集合?

還有想知道要怎麼提高分析出來的結果數量,
本來以為是增加資料,但因為原始樣本就只有這些,
所以用隨機的方式增加原本的樣本,
結果不知道是不是因為關聯式規則算法是
在全部東西裡佔幾分之幾,還有在a東西裡b也存在的幾分之幾,
所以整體就跟著增加,並沒有比較多的分析結果
後來把資料刪減到50筆反而比較多
有沒有什麼方法可以將結果增加呢?除了得到更多原始資料,
謝謝~



[程式範例]:

張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題
建立重現錯誤的方法可以參考:
install.packages(""readxl"")
library(readxl)
path <- ""random.csv""
data <- read.csv(path, header=T, sep="","")
data1=as.matrix(data)
require(arules)
rule <- apriori(data1,parameter=list( supp=0.1, conf=0.1))
inspect(rule)https://imgur.com/kH9IvlP資料大概是長這樣 有49個項目A1~A49
原始資料筆數是大約是五百筆,
結果是這樣https://imgur.com/PCEz9We[環境敘述]:

R version 3.4.1

[關鍵字]:

關聯式規則

--","R_Language"
"415","M.1520248733.A.502","tytony","問題","R Leaflet讀取JS plugin方法",2018-03-05 19:18:45,NA,NA,"[問題類型]:

經驗諮詢

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

各位好

最近在github找到在Leaflet畫風標(windbarb)的JS套件
我照著在R Leaflet運用JS套件的方法去寫程式碼
執行之後地圖可開啟，但無法顯示出風標，也沒有任何錯誤訊息
不知從何處debug，感覺是JS部分沒吃進去
懇請有用處理過類似語法的前輩指點，謝謝！

風標JS套件Githubhttps://github.com/JoranBeaufort/Leaflet.windbarbR使用Leaflet JS套件方法https://gist.github.com/jcheng5/c084a59717f18e947a17955007dc5f92[程式範例]:

library(leaflet)
library(htmltools)
library(htmlwidgets)

windbarb <- htmlDependency(""leaflet-windbarb"", ""0.0.1"",
                            c(href =
""https://github.com/JoranBeaufort/Leaflet.windbarb/blob/master/src/""),script = ""leaflet-windbarb.js"")

registerPlugin <- function(map, plugin) {
   map$dependencies <- c(map$dependencies, list(plugin))
   map
}

# 下面JS部分是直接拿風標github的範例語法

leaflet() %>% addTiles() %>% setView(7.222309, 47.11285, 12) %>%
   registerPlugin(windbarb) %>%
   onRender('function(el, x) {
           var meteoPoints = [
            [ 47.11285 , 7.222309, 5, 190],
            [ 47.085272, 7.20377 , 30, 90],
            [ 47.092285, 7.156734, 47, 170],
            ];

            meteoPoints.forEach(function(p){
            var icon = L.WindBarb.icon({deg: p[3], speed: p[2]});
            var marker = L.marker([p[0],p[1]], {icon: icon}).addTo(this);
            });')

[環境敘述]:

R 3.4.3 + Win 7

[關鍵字]:

Leaflet / Javascript

--","R_Language"
"416","M.1520243797.A.3F6","paranoia5201","問題","Fw: 不乾淨的資料匯入、如何處理？",2018-03-05 17:56:35,NA,NA,"※ [本文轉錄自 Statistics 看板 #1QdHGr4X ]作者: paranoia5201 (社會黑暗、行路難) 看板: Statistics
標題: [問題] 不乾淨的資料匯入、如何處理？
時間: Mon Mar  5 17:56:03 2018



各位好：


這裡想要請教、如果拿到的原始檔不是很漂亮、該要怎麼匯入處理？

我直接面對的例子是死因統計年報（下載：dep.mohw.gov.tw/DOS/lp-3352-113.html）

打開檔案後會發現它每個分頁的頭幾列都是各式主標題與子標題。

我該如何處理這部分、好讓它可以在匯入之後做運算整理呢？

感謝∼

（預計使用的軟體為R、Python、還有SAS）



--","R_Language"
"417","M.1520168126.A.1C2","l83083121","問題","如何合併N筆資料",2018-03-04 20:55:24,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

剛入門

[問題描述]:

剛接觸R語言，想請問各位
我原本將3筆資料儲存於3個object中，
所以我要合併這三筆資料用的程式碼是

result <- c(data1,data2,data3)

但我現在要改寫成合併N筆資料

原本的想法是寫個for迴圈
for(i in 1:n ){
    result <- c(result,datai)
}

但由於我每一筆資料都非常大，如果這樣寫會花費相當多的運算時間,
所以想請問我該怎麼做處理呢。

--","R_Language"
"418","M.1520078998.A.9BC","ntpuisbest","問題","R輸出PDF(已裝mikteex complete)",2018-03-03 20:09:56,NA,NA,"如提

我的Rstuido

已經裝了miktex 而且是 完整版的

可是依然不能輸出PDFhttps://imgur.com/ENbZ7lI請問是要怎麼處理呢



--","R_Language"
"419","M.1519925469.A.38A","AndrewShi","問題","降尺度(downscale)方法應用",2018-03-02 01:31:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
大家好，我是R的初學者，但因做研究需要利用R裡已寫好的降尺度方法(package)，來將
資料(ncdf檔)做降尺度，所以想請問各位大大能否提供一個將資料做過降尺度(利用R裡的
降尺度方法)簡單的例子給小弟我參考呢??或是有哪裡有相關的教學呢??
小弟我查了很久，但都沒查到有相關的範例可供參考，有關R的講義也是，目前只有看過
下面這個講義(pdf檔)，但看完之後還是不知道該怎麼打程式碼以利用R裡的降尺度方法(p
ackage)，還得煩請大家幫忙或提供建議給我，謝謝大家。https://cran.r-project.org/web/packages/downscale/index.html[關鍵字]:降尺度 ncdf檔


--","R_Language"
"420","M.1519801953.A.746","yault",NA,"徵R統計軟體家教",2018-02-28 15:12:30,NA,NA,"1.對象: 女(會Sas及Spss)
2.地點: 台北市
3.科目：R統計軟體
4.上課時間：星期六日(可討論)
5.時薪：600/h (可商議)
6.條件：專精R, 並有強大統計背景及實作經驗，具處理大數據經驗豐富(資料讀取，整理
碰檔，產製交叉結果表及檢定畫圖)
7.聯絡方式：站內信 (請附簡歷跟聯絡方式email及手機, 合適者會以email聯絡)
8.附註：指導寫R程式然後講解給我聽，以及指導相關R軟體操作分析實際數據

--","R_Language"
"421","M.1519795854.A.45C","nina8598","問題","csv儲存格存成記事本txt檔",2018-02-28 13:30:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

有個csv檔(約三萬筆資料)

no      id      time    message
1       12345   2016-07-07T02:07:15+0000
        Sounds great!
2       67890   2016-07-07T02:12:14+0000
        Good good eat!
3       66666   2016-07-07T02:28:44+0000
        I like it.
.       .       .       .
.       .       .       .
30000   34567   2017-11-01T09:47:53+0000        The end~

我想做的是，把message那欄的每個儲存格都存成一個txt檔，

例如
Sounds great! >> 1.txt
Good good eat! >> 2.txt
I like it. >> 3.txt
.
.
The end~ >> 30000.txt

請問應該怎麼做?

感謝各位大神了~

--","R_Language"
"422","M.1519711558.A.CF3","tpotryoma","情報","Fw: SASX玉山銀行第七屆大數據資料科學家競賽",2018-02-27 14:05:57,NA,NA,"※ [本文轉錄自 Statistics 看板 #1QbF4H-B ]作者: tpotryoma (晴時多雲偶陣雨) 看板: Statistics
標題: [情報] SAS&玉山銀行第七屆大數據資料科學家競賽
時間: Tue Feb 27 13:47:57 2018
在這個巨量資料的時代，懂得巨量分析的專業人才「資料科學家」（Data Scientist）將
成為未來炙手可熱的明日之星。
SAS 希望學生以創意無限及發掘新商機的角度出發，搭配巨量資料分析實例主題，鼓勵全
國大學以分組專案及簡報競賽方式，分析高達上億筆的巨量資料，親身體驗巨量分析的神
奇魔力！這次若闖進複賽更有大數據平台讓你親身體驗資料分析師的專業分析環境呢！
今年還替不同專業的同學們開立了不同的組別來挑戰
＊商業洞察組
＊模型挑戰組
歡迎選擇適合自己的組別來挑戰！
〔但任一組報滿85組/總組別達150組後即不再超收〕跟往年只能考SASEG相比，今年增加 R、python的名額（一組四人可以有兩人選擇報考R、python）報名資格：
1. 不限科系、對數據分析有興趣者皆可組隊報名參加
2. 大學三年級以上及碩士在學生(在職專班研究生及博士生除外)
3. 三~四位學生組成一隊，不得跨校，不得跨隊參加
4. 就讀租用 SAS 全校授權版的大學 (被po了這個訊息,放心！本學校可以參加的！)

沒用過SAS 資料採礦的工具也別擔心
我們會為報名成功的您舉辦SAS 資料採礦密集訓練班，趕快組隊來參加就對了

2018年2月26日起 0:00 正式接受報名！
獎金池高達$600,000，還可能得到寶貴的企業實習機會

詳細資訊請參考
比賽Facebook粉專https://www.facebook.com/saschampion/比賽官方網站http://saschampion.com.tw--","R_Language"
"423","M.1519658324.A.741","a6409tw","問題","想請問在使用str_subset時\\.的功能",2018-02-26 23:18:42,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近正在練習使用R來爬蟲
但一直無法理解
str_subset(x,""\\.html"")中\\.

我的理解是
左邊的\將右邊的\功能跳脫
使得結果變成在x中尋找符合\.html的元素
可是這樣.的功能並沒有被跳脫
一直都想不通

另外如果將程式碼改成
str_subset(x,"".html"")竟然跟
str_subset(x,""\\.html"")的結果一樣
str_subset(x,""\\.html"")的結果一樣

我已經徹底混亂了
拜託各位大大了QQ


[環境敘述]:

Win10 64bit Version 1.1.383

[關鍵字]:

正則表示法、爬蟲選擇性，也許未來有用--","R_Language"
"424","M.1519651015.A.E52","tmpuauee","問題","複迴歸的固定變數",2018-02-26 21:16:53,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想請問各位大神...

我想要做一個複迴歸。

例如：
依變數是g
自變數有三個類別變數：t81、t82和t83
固定變數是性別(sex)和類組(group)
資料檔為ALL

然後我google到的code是：

lm(g~ factor(t81)+factor(t82)+ factor(t83), data= ALL,
index=c(""sex"",""group""), method=""within"", effect=""twoways"")

結果出現錯誤訊息

Warning messages:
1: In lm(g ~ factor(t81) + factor(t82) + factor(t83), data = ALL,
   index = c(""sex"",  : method = 'within' is not supported. Using 'qr'
2: In lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) :
   extra arguments ‘index’, ‘effect’ will be disregarded

想請問的是：

1. 固定變數的code真的是這樣打嗎？
   (非常抱歉我的統計能力很弱...QQ然後找了好幾天一直都沒有解法...)

2. 請問錯誤訊息是什麼意思呢？

先謝謝各位大神！

[環境敘述]:

RGui(64-bit)
Windows10


--","R_Language"
"425","M.1519615754.A.DA1","x9060000456","問題","Rselenium 點擊右鍵開啟新分頁",2018-02-26 11:29:11,NA,NA,"- 問題: 請問如何利用Rselenium控制瀏覽器點擊右鍵
        並按t開啟""在新分頁開啟連結""


[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[問題敘述]:
        想開啟新分頁或新視窗，在新分頁或視窗進行爬蟲動作。
        以下code是參考stack overflowhttps://goo.gl/QZn9Q9，沒有出現error，只有執行按右鍵，但按t這個問題一直
        未執行，請各位大大麻煩看一下，謝謝!

[程式範例]:
library(RSelenium)
dr <- remoteDriver(remoteServerAddr = ""localhost"", port = 4444, browserName =
""chrome"")

dr$open()
dr$navigate(""http://www.stackoverflow.com"")# find the Users tab
webElem <- dr$findElement(""id"", ""nav-users"")
dr$mouseMoveToLocation(webElement = webElem) # move to the required element
dr$click(2) # right mouse button click
webElem$sendKeysToElement(list(key = ""shift"", ""t""))

[關鍵字]:Crawler, RSelenium--","R_Language"
"426","M.1519462489.A.5E1","clsmbstu","問題","在IRkernel中安裝套件",2018-02-24 16:54:45,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
在IRkernel中無法自行安裝套件
（SO連結：https://goo.gl/VRBrDX）

[程式範例]:
install.packages(""RPostgreSQL"", lib = .libPaths(),
                 repo = ""https://cloud.r-project.org/"")出現訊息：
Warning message in install.packages(""RPostgreSQL"", lib = .libPaths(), repo = ""https://cloud.r-project.org/""):“installation of package ‘RPostgreSQL’ had non-zero exit status”Updating HTML index of packages in '.Library' Making 'packages.html' ... done

[環境敘述]:
R version 3.4.2 (2017-09-28)
Platform: x86_64-conda_cos6-linux-gnu (64-bit)
Running under: Ubuntu 14.04.5 LTS

Matrix products: default
BLAS: /home/ytu/anaconda3/lib/R/lib/libRblas.so
LAPACK: /home/ytu/anaconda3/lib/R/lib/libRlapack.so

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
 [1] compiler_3.4.2  R6_2.2.2        magrittr_1.5    IRdisplay_0.4.4
 [5] pbdZMQ_0.2-6    tools_3.4.2     crayon_1.3.4    uuid_0.1-2
 [9] stringi_1.1.6   IRkernel_0.8.9  jsonlite_1.5    stringr_1.2.0
[13] digest_0.6.12   repr_0.12.0     evaluate_0.10.1

[關鍵字]:
套件
jupyter-notebook
jupyter-irkernel

--","R_Language"
"427","M.1519269807.A.757","guitarbird","問題","找局部極小值",2018-02-22 11:23:25,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

使用迴圈寫一個簡單的局部極小值判斷程式,但出現error

[程式範例]:

k為一個n=2685的value,型態為num

n<-30
b<-rep(k[1]+1,n)
e<-rep(k[length(k)]+1,n)
k<-c(b,k,e)
p<-0
for (i in (n+1):(length(k)+n)) {
  if (min(k[i-n:i+n])==k[i]) {p1<-1}
  else {p1<-0}
  p<-c(p,p1)
}


到for loop前都沒問題,之後會出現error
Error in if (min(k[i - n:i + n]) == k[i]) { :
  missing value where TRUE/FALSE needed

請問各位高手該如何修改,謝謝!


[環境敘述]:

R x64 3.4.3
win10

--","R_Language"
"428","M.1519210528.A.F96","huangsam","問題","分組問題",2018-02-21 18:55:25,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)


[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想計算同個類組的比例
舉例來說> V1=c( ""A"",""A"",""A"",""A"",""B"", ""B"" ,""C"", ""C"")> V2= c( ""A2"",""A3"",""A4"",""A5"",""A1"", ""B1"" ,""A1"", ""C1"")> DTTEST <- data.frame(V1,V2)> DTTESTV1 V2
1  A A2
2  A A3
3  A A4
4  A A5
5  B A1
6  B B1
7  C A1
8  C C1

我想看V2這個欄位中分群的關係，好比說A1出現兩次有跟B1跟C1同群過
那是否有函數可以呈現以下
  A1 A2 A3 A4 A5 B1 C1
A1 2  0  0  0  0  1  1
A2 0  1  1  1  1  0  0
A3 0  0  1  1  1  0  0
.
.
.
B1 1  0  0  0  0   1  0

-----------------------------------------------------------------
嘗試C大的方法結果如下> table(DTTEST$V1, DTTEST$V2)A1 A2 A3 A4 A5 B1 C1
  A  0  1  1  1  1  0  0
  B  1  0  0  0  0  1  0
  C  1  0  0  0  0  0  1

有辦法像我上面想呈現的那樣嗎?


  A1 A2 A3 A4 A5 B1 C1
A1 2  0  0  0  0  1  1
A2 0  1  1  1  1  0  0
A3 0  0  1  1  1  0  0
.
.
.
B1 1  0  0  0  0   1  0

還是需要再加上那些函數轉成以下形式
謝謝

-------------------------------------------------
後來我想了一下不知道這樣方法可否?
利用矩陣的關係
table(DTTEST$V2, DTTEST$V1) %*% table(DTTEST$V1, DTTEST$V2)
謝謝

類似相關性的呈現，謝謝

[程式範例]:

[環境敘述]:

[關鍵字]:
分組關係

--","R_Language"
"429","M.1519056348.A.B7D","celestialgod","問題","Re: 讀取數據，在轉到excel或筆記本",2018-02-20 00:05:45,NA,NA,"※ 引述《shingai (吸收正能量)》之銘言：: 想要了解一下如何讀取網站內每一期開獎數字訊息: http://www.lotto-8.com/listlto539.asp?indexpage=27&orderby=new: 想必知道學過機率的人都曉得次數頻率分析對於預測並無效果，: 因此這裡只是好奇如何操作，並且希望之後也許可以作為跟學生分享的內容: 希望會做的好手不吝賜教，希望以今彩539或其中一種彩券為例子即可∼(小弟還是R初學者，如有禮貌不周，煩請告知): 謝謝∼！稍微寫一下... 有問題再問...

Result:https://i.imgur.com/VqWwxsb.pngcode:https://pastebin.com/iDrX8pYW--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"430","M.1519054903.A.08C","shingai","問題","讀取數據，在轉到excel或筆記本",2018-02-19 23:41:41,NA,NA,"想要了解一下如何讀取網站內每一期開獎數字訊息http://www.lotto-8.com/listlto539.asp?indexpage=27&orderby=new想必知道學過機率的人都曉得次數頻率分析對於預測並無效果，

因此這裡只是好奇如何操作，並且希望之後也許可以作為跟學生分享的內容

希望會做的好手不吝賜教，希望以今彩539或其中一種彩券為例子即可∼(小弟還是R初學者，如有禮貌不周，煩請告知)

謝謝∼！

--","R_Language"
"431","M.1518961023.A.F96","puppy77","問題","shiny 恢復上次結果",2018-02-18 21:37:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我寫了一個網頁，主要功能是使用者匯入他的data

網頁會使用匯入的data做複雜的運算後顯示出第一個結果

使用者檢視過這個結果後再input一些值

網頁再依第一個結果搭上這次的input的值做另一個複雜的運算

最後再顯示出第二個結果及畫圖


因使用者看過第一個結果後會需要時間決定之後要input的值 可能是隔幾天

又加上運算實在花很多時間

(我已經很努力修改程式減少運算時間，但還是很久....Orz)

所以希望能夠在使用者下一次打開網頁後能夠恢復到他上次關掉的狀態


有考慮過把所有的計算結果全部都匯出下次再匯入

但因為這樣要匯出很多東西 又要再匯入很多東西(下面程式是簡化過的)

所以不知道是否能有其他更好的選擇


又若真的必須把所有結果一一匯出的話

匯入的部分會建議從哪個步驟匯入??

譬如下面程式第一個計算結果

把匯入寫在calResult1內或是output$list1內比較好??



[程式範例]:

ui <- fluidPage(
  # 使用者匯入資料
  fileInput(""userData"", label=""Your Data"", multiple=T, accept=c("".csv"")),
  # 第一個結果
  DT::dataTableOutput(""list1""),
  # 使用者輸入值
  numericInput(""n"", ""N"", value=1),
  # 第二個結果
  DT::dataTableOutput(""list2""),
  plotOutput(""plotResult"")
)

server <- shinyServer(function(input, output, session){
  # 匯入使用者資料
  getData <- reactive({
    req(input$userData)
    out <- read.csv(input$userData$datapath)
    return(out)
  })

  # 第一個複雜的計算
  calResult1 <- reactive({
    d <- getData()
    out <- complicatedFunction1(d)
    return(out)
  })

  # 顯示第一個結果
  output$list1 <- DT:: renderDataTable(
    datatable(calResult1())
  )

  # 第二個複雜的計算
  calResult2 <- reactive({
    d <- calResult1()
    out <- complicatedFunction2(d, input$n)
    return(out)
  })

  # 顯示第二個結果
  output$list2 <- DT:: renderDataTable(
    datatable(calResult2())
  )

  output$plotResult <- renderPlot({
    d <- calResult2()
    plot(x=d$x, y=d$y)
  })
})

--","R_Language"
"432","M.1518826636.A.7B0","zxc741qaz123","問題","資料提取跟合併",2018-02-17 08:17:13,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

例如下面有兩個資料集長這樣


球員   特徵1                      球員  特徵2

A       12                        A     20

D       13                        B     12

H       12                        C     12
.
.                                 D     50
.
                                  E     30

                                  F     40
                                  .


我想做的是，依照球員編號把特徵2放進左邊的資料集

請問該怎麼做(資料很大沒辦法一個一個弄)

感謝各位大神

--","R_Language"
"433","M.1518437015.A.C26","menghsuanliu","問題","計算差異百分比",2018-02-12 20:03:32,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個data.frame, 其中一個column是數值(有正有負),我想計算與前一筆的差異百分比
(percentage difference)

[程式範例]:
x <- data.frame(year = c('2012','2013','2014'), value = c(15,-10,-12))
x$pd <- ???

**x$pd就是我想去算出的差異百分比 (NA,-1.67, -0.2)

--","R_Language"
"434","M.1518432685.A.4AA","blacktea12","問題","R 斷詞問題!!",2018-02-12 18:51:23,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有個檔案要做中文文字斷句，使用UTF-8 codeing讀入之後一直出問題
我也看不太懂R的error狀態想跟我說什麼

[檔案類型]  <csv檔>
名稱
舒爽衛生紙 12X6包
好神脫
舒爽廚房紙巾
年菜預購禮盒
...

[程式碼]
df1<-read.csv(file=...)
jiebar.worker<-worker()
seg<-segment(df1$名稱,jiebar.worker)

[顯示的錯誤碼]
Argument 'code' must be an string!!!!!!!!!!!!!!!!

[結論]
所以..我該怎麼辦? 我把資料用toString之後會變成亂碼...

--","R_Language"
"435","M.1518238394.A.FBA","MKII5566","問題","R有可能直接開發成後端框架嗎？",2018-02-10 12:53:11,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

我知道R語言中有Shiny可以將成果展現成網頁

但是如果不透過shiny

是否可以利用R語言直接將資料庫中資料做運算之後往前端丟呢？

就類似php+MySQL這樣，有無R+MySQL或是R+其他Database的組合呢？

google了一下幾乎都是搭配Shiny

不知道有沒有前輩能夠提供相關的關鍵字或是想法?


--","R_Language"
"436","M.1518234349.A.FC8","a6409tw","問題","如何在使用ggplot畫圖時加上標籤",2018-02-10 11:45:46,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近趁著寒假想把R處理資料的基礎學完，目前還在學習dplyr,ggplot2
在自我練習時，自己輸入資料像這樣

code:
NTU_pop<-data.frame(c(106,105,104,103,102,101,100,99,98,97),c(16526,16499,16532,16505,16575,16915,17277,17514,17492,17152),c(9377,9403,9441,9425,9456,9609,9703,9770,9774,9504),c(7149,7096,7091,7080,71
names(NTU_pop)<-c(""year"",""total"",""boy"",""girl"")

資料呈現:
 year total  boy girl
1   106 16526 9377 7149
2   105 16499 9403 7096
3   104 16532 9441 7091
4   103 16505 9425 7080
5   102 16575 9456 7119
5   102 16575 9456 7119
6   101 16915 9609 7306
7   100 17277 9703 7574
8    99 17514 9770 7744
9    98 17492 9774 7718
10   97 17152 9504 7648

然後我想畫出x軸是年分，y軸是人數，然後再用顏色區分總人數男女人數
但這樣的資料好像沒辦法使用ggplot裡面的fill
我只能像這樣:

arrange(NTU_pop,year)%>%ggplot(aes(x=year,y=total))+geom_point()+geom_line()+
geom_point(aes(x=year,y=boy),color=""red"")+
geom_line(aes(x=year,y=boy),color=""red"")+
geom_point(aes(x=year,y=girl),color=""blue"")+
geom_line(aes(x=year,y=girl),color=""blue"")

不管我再怎麼修改程式碼都沒辦法讓標籤顯示出來，像是說
紅色:boy,藍色:girl,黑色:total

我上網爬過很多文了大部分都是用fill，
所以想請問各位大大如何解決了QQ



[環境敘述]:

Win10, 64bit
R:Version 1.1.383


--","R_Language"
"437","M.1518106989.A.77D","gtgrthrst","問題","讀取文字檔後將資料複製到剪貼簿",2018-02-09 00:23:06,NA,NA,"[軟體熟悉度]:
入門(自學半年)

[問題敘述]:

資料大約60到100萬筆之間，
以前都用excel讀取文字檔後，
再複製到其他繪圖軟體，
不知道有沒有辦法簡短R繪圖的時間，
繪製80萬筆資料的散布圖需要1min，
但用其他軟體只需15 sec，
或是有辦法讓資料直接用r讀取後，
複製到剪貼簿上以便處理，
不然又需要開啟excel也是需要花費更多時間

謝謝大家

--","R_Language"
"438","M.1518085696.A.B42","wheado","問題","RandomForest的VarImportance",2018-02-08 18:28:13,NA,NA,"[問題類型]:

Variable Importance

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

RandomForest的fit出來的model有一個importance

裡面的MeanDecreasingGini是用來判斷變數的重要性的指標

這個指標是一個平均值的結果

我想問的是

對於第i棵樹

要怎麼算出DecreasingGini值

在網路上參考了一篇文章  連結如下https://goo.gl/6WSuoi但這篇主要說明是Mean Decrease in Accuracy

不過概念上是很像

第一個step說: 隨機挑一些data與variable => 產生一棵樹

第二個step說: 將樹的模型用來預測沒有被挑到的data => 產生一個OOB-accuracy

第三個我就看不懂了

甚麼是permute variable i

有使用RandomForest的使用者能夠指導一下嗎？

不想似懂非懂認為這是重要指標

但不曉得如何而來

謝謝大家

[環境敘述]:

R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:

Measures of variable importance in random forests




謝謝大家指導


--","R_Language"
"439","M.1518012940.A.43A","x9060000456","問題","最近使用 Rfacebook 發現互動用戶id消失",2018-02-07 22:15:38,NA,NA,"- 問題: 禮拜日(2018/2/4)使用Rfacebook爬取粉絲團
        互動(按讚, 分享與留言)用戶的id還可以取得,
        但今天中午爬取時, id這個欄位只出現NA.

- 心得: 目前只能用 RSelenium 控制瀏覽器爬取.

- 討論: 雖然用 RSelenium 可以強制爬取, 但效率不佳.(小弟不熟)
        想詢問最近有使用過的Rfacebook這個套件的大大們有碰過
        相同的問題嗎~謝謝


[問題敘述]:
以下是簡單使用Rfacebook這個套件的程式碼,
原本在 post 這個list中,
$comments 的 from_id 與 from_name 是可以取得的,
另外也有 $likes 這層list, 但今日執行皆無法取得且消失,
再麻煩各位大大了~
謝謝!

[程式範例]:
library(Rfacebook)

## 麻煩自行產生
token = ''

## 任一粉絲團ID測試
ID = 'boyaapoker'
page <- 50

FB_page = getPage(page = ID, token = token, n = page)

## list 結構, $comments 的 from_id 與 from_name 為NA
## $likes 此層消失
post = getPost(post = FB_page$id[1], token = token)


[關鍵字]:Facebook, Facebook devolopers


--","R_Language"
"440","M.1517904715.A.73A","ChenEye","問題","改package裡的函數",2018-02-06 16:11:52,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R)

[問題敘述]:
各位大神好，小弟想改package裡面寫好的函數，情況是這樣的:

這個package裡有一個函數A會呼叫package裡A1~A6共六個6函數，小弟想把這六個函數裡

的某個變數改成我自己定義的變數

我的作法是先install、library package，然後把函數名稱A打出來，反白按F2進去看

程式碼，發現A、A1~A6都在同一個頁面，改完A1~A6之後再save，但是我跑A的時候發現

結果還是跟沒改一樣，但是這時候再去重複反白按F2的動作卻發現程式碼已經變了，

真的是好困擾，拜託各位大神救救小弟RRRRR

[程式範例]:


[環境敘述]:
作業系統: win7 64-bit
R 的版本: 3.4.3

[關鍵字]:

--","R_Language"
"441","M.1517819211.A.069","blacktea12","問題","如何執行文字分群??",2018-02-05 16:26:48,NA,NA,"如題
我目前有一批商品檔(品名/商品ID/售價)要做分組
就是讓大致上相同的東西以及相同使用屬性放在一群
是不是有辦法直接使用商品品名做關鍵字分群呢?
勞煩各位版上神人求解阿阿阿

--","R_Language"
"442","M.1517535684.A.E21","cywhale","問題","Re: shiny rgl package",2018-02-02 09:41:21,NA,NA,"我在ubuntu14 + shiny-server的環境測試下列code是沒問題的可以出rgl圖
但很抱歉我沒有測過shinyapps.io

library(shiny)
library(rgl)
ui <- fluidPage(
  rglwidgetOutput(""distPlot"")
)

server <- function(input, output) {

  output$distPlot <- renderRglwidget({
    plot3d(x=1:5, y=6:10, z=11:15)
    rglwidget()
  })
}

shinyApp(ui = ui, server = server)※ 引述《a94jim (大頭曼)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別。: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 因為工作需求，需要用shiny製作3d網頁: 在這邊我是使用rgl package，在本端電腦嘗試時都會有視窗跳出，一切正常: 但經過rsconnect package publish到shinyapps.io後，便沒有視窗跳出，: 更沒有呈現3d圖了: 不知道各位大神有沒有辦法可以幫助我: [程式範例]:: library(shiny): library(rgl): ui <- fluidPage(:   plotOutput(""distPlot""): ): server <- function(input, output) {:    output$distPlot <- renderPlot({:      plot3d(1:5, 6:10, 11:15):    }): }: shinyApp(ui = ui, server = server): [環境敘述]:: 這是我的sessionInfo:: https://imgur.com/WciqAUk: [關鍵字]:: rgl--","R_Language"
"443","M.1517488860.A.932","myfirstjump","問題","呼叫list中的lm model",2018-02-01 20:40:49,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
建立多個lm模型，用loop存入一個list，給 $reg1, $reg2, ...等名字
建立多個變數，用loop存取這些lm的coefficient[[2]]，就是想存斜率

如下code，卡在呼叫lm的coefficient的地方，呼叫line[i]是okay的。
呼叫coefficient後，會return NULL。

[程式範例]:https://ideone.com/LfFEzUtest <- function() {
        vec1 <- c(1,2,3)
        vec2 <- c(4,5,6)
        line <- list()
        for (i in 1:2) {
                line$i <- lm(vec2 ~ vec1)
                names(line)[i] <- paste0(""reg"", i)
        }
        # return(line)
        coef <- list()
        for (i in 1:2) {
                coef$i <- line[i]$coefficient[[1]]
                return(coef$i)   # <---------------- 卡在這個輸出
                names(coef)[i] <- paste0(""coe"", i)
        }
        return(coef)
}
test()

[環境敘述]:> sessionInfo()R version 3.4.3 (2017-11-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] dplyr_0.7.4         readxl_1.0.0        data.table_1.10.4-3 xlsx_0.5.7

[5] xlsxjars_0.6.1      rJava_0.9-9         limma_3.34.6

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.15     assertthat_0.2.0 cellranger_1.1.0 R6_2.2.2
magrittr_1.5
 [6] pillar_1.1.0     rlang_0.1.6      bindrcpp_0.2     tools_3.4.3
 glue_1.2.0
[11] compiler_3.4.3   pkgconfig_2.0.1  bindr_0.1        tibble_1.4.2


[關鍵字]:

for loop, lm, coefficient

--","R_Language"
"444","M.1517460500.A.2DE","thinkahead","問題","使用cmd連的MSSQL問題",2018-02-01 12:48:17,NA,NA,"[問題類型]:
經驗諮詢
cmd檔連接MSSQL2014的問題
R版本3.3.3

[軟體熟悉度]:
入門

[問題]
主要想設定排程定時存入數據資料，
但使用cmd檔執行Rscript的時候會出現
warning:closing unused rodbc handle 1https://imgur.com/NqrCs3Y但是在Rstudio中執行卻可以順利插入資料進去MSsql
已經試過許多網路上的解法，但是還無法QQ
跪求各位大神幫助

[程式範例]:

程式的邏輯是我接DDE存資料 再組合成存入sql
library(tcltk2) # tk2dde.request()
library(RODBC)
channel<-odbcConnect(""R_SQL2014"") #連資料庫
on.exit(odbcClose(""R_SQL2014""))
~~中間抓資料的地方略過~~
sqlQuery(channel,insert_sql)

insert_sql print出來的值是(這部分應該不會有錯，在sql上面執行也可以存入)
[1] ""insert into Daily_Price.dbo.Day_Price(future_name,contract_month,trade_date,contract_codes,open_price,high_price,low_price,close_price,trade_volume,open_interests,trade_amount,settlement_price,final_price)values('
日經225AM','???g225AM1803','2018/02/01','S2NIA&',23295.00,23425.00,23215.00,23405.00,34456,181677,Null,23105.00,23405.00)""





[環境敘述]:
R環境
[1] ""LC_COLLATE=Chinese (Traditional)_Taiwan.950;LC_CTYPE=Chinese
(Traditional)_Taiwan.950;LC_MONETARY=Chinese
(Traditional)_Taiwan.950;LC_NUMERIC=C;LC_TIME=Chinese
(Traditional)_Taiwan.950""

Rstudio環境
""LC_COLLATE=Chinese (Traditional)_Taiwan.950;LC_CTYPE=Chinese
(Traditional)_Taiwan.950;LC_MONETARY=Chinese
(Traditional)_Taiwan.950;LC_NUMERIC=C;LC_TIME=Chinese
(Traditional)_Taiwan.950""
[關鍵字]:
MSSQL

--","R_Language"
"445","M.1517410281.A.6BC","a94jim","問題","shiny rgl package",2018-01-31 22:51:19,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)


[問題敘述]:
因為工作需求，需要用shiny製作3d網頁
在這邊我是使用rgl package，在本端電腦嘗試時都會有視窗跳出，一切正常
但經過rsconnect package publish到shinyapps.io後，便沒有視窗跳出，
更沒有呈現3d圖了
不知道各位大神有沒有辦法可以幫助我

[程式範例]:
library(shiny)
library(rgl)
ui <- fluidPage(
  plotOutput(""distPlot"")
)

server <- function(input, output) {

   output$distPlot <- renderPlot({
     plot3d(1:5, 6:10, 11:15)
   })
}

shinyApp(ui = ui, server = server)

[環境敘述]:
這是我的sessionInfo:https://imgur.com/WciqAUk[關鍵字]:

rgl

--","R_Language"
"446","M.1517397789.A.91D","rrr518","問題","輸入時間跟畫出來的不一樣",2018-01-31 19:23:05,NA,NA,"[軟體熟悉度]:
對於R語言來說新手，只有接觸過C C++ Java等

[問題敘述]:

使用plot作圖

時間放在x軸，指定xlim範圍後

發現跟我指定的好像不太一樣

粗略估計早了8小時5分鐘

我直接加29100秒回去

但是發現並不是每次都剛好8小時5分鐘

想請問是不是我寫錯了

[程式範例]:

x <- A1$Date

start <- as.POSIXct(""2017-11-16 13:05:00"", format=""%Y-%m-%d %H:%M:%S"")
end <- as.POSIXct(""2017-11-17 00:00:00"", format=""%Y-%m-%d %H:%M:%S"")

plot(A1$Date,A1$Temp,type = ""l"",xlim=c(start, end), ylim = c(0,80),
col = ""red"", main = ""趨勢圖"", xlab = ""Date-Time"", ylab = "" "")

lines(x, A1$pH, col = ""green"")
lines(x, A1$DO, col = ""black"")
lines(x, A1$ORP, col = ""cyan"")
lines(x, A1$Salt, col = ""blue"")
lines(x, A1$NH3, col = ""darkorchid"")

[呈現結果]https://imgur.com/kJEjPCB謝謝各位!!
--","R_Language"
"447","M.1517116551.A.608","tus","問題","Read.table Not ALL Rows",2018-01-28 13:15:48,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[問題敘述]:

用R讀text檔 但好像沒有全部的rows都讀進去 不知道原因是什麼

用EXCEL打開資料 可以看到約有1000000 entries (rows) 原始資料應該更多

因為這是EXCEl的上限 1048576

但用R read.table or read.csv 讀進去時 約只有700000筆資料 沒有任何錯誤訊息

目前是用 read.table(filename, quote = """", comment.char = """", fill = TRUE)

如果不加quote = """" 會出現EOF within quoted string

fill = TRUE 是因為好像有幾筆資料column length不同

幾筆資料可以在EXCEL中看到的 R沒讀進去的 找不到任何異樣

用count.fields 也是只有700000筆資料左右

sorry 沒辦法share資料 但還是想請問看看 有沒有什麼原因會造成這樣的情況

感謝


--","R_Language"
"448","M.1516941465.A.B13","sacidoO","問題","numeric group by rank ",2018-01-26 12:37:43,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

想要將numerical 變數根據/ 數值區間 /rank group/binning 在一起
理想狀況是將相似數值組成新的組

限制
(1)由於變數量大 (>100) 不希望手動調區間
(2)bucket上限是20個 下限2個
(3)不使用ntile方法 因為平均分20組有可能將tie分成好幾組 (which is 不合理)

ex.
x1 value:
-1.2,-1.1,-0.8,-0.6,-0.6,-0.6,0.0,0.0,0.0,1.8,1.9,2.1,2.2,8.8,8.9
x1_group(範例)
 1    1      1    1    1   1    2   2   2   3   3   3   3   4   4

x2 value:
-100,-99,-88,-50,-49,-31,-22,0, 0, 0,0,0,1,2,3
x2_group(範例)
 1,1,1,2,2,2,2,3,3,3,3,3,3,3,3


[程式範例]:
嘗試一:
網上找了一些clustering method (ex. k-means)
但是該方法需要輸入想要的組數 (但是因為變數分布不同 組數不應該是固定的)

嘗試2:
看到有網友分享ddply transform rank group 的方法
ex. ddply(df, .(dep_var), transform, group=rank(x1,ties.method='min')-1)
但是這個方法會根據數值的真正值排序  並不會把""相似""值bin一起

不知道版上有沒有人有處理過相似的問題  請教了!!


[關鍵字]:
binning / grouping numeric into categorical / clustering/...選擇性，也許未來有用--","R_Language"
"449","M.1516870444.A.F42","m28633146","問題","R 預訓練模型修改",2018-01-25 16:54:02,NA,NA,"最近在嘗試使用R
keras的pre train model
像是vgg19 inception _v3
但是我需要分類的數量只有三類

所以include_top設為false後
似乎要自己加入全連結層
才能把dense unit設為我想要的數量
但程式碼我怎麼找都找不到...

所以想請問一下
接下來該怎麼做？
感覺是很小的問題
但是我程式碼就是找不到...
卡超久QQ

--","R_Language"
"450","M.1516765300.A.423","paschen","問題","徵求Datacamp 共用會員",2018-01-24 11:41:37,NA,NA,"大約是12 月初的時候買了datacamp一年份

當時特價是90美元=2700台幣左右

我本身是上python，希望找想學R的一起共用


算1000台幣就好

希望不要動到我的python進度

有興趣的請站內信

感謝


--","R_Language"
"451","M.1516753461.A.4EB","jasonfghx","問題","Re: 資料整理",2018-01-24 08:24:19,NA,NA,": 欄位有日期、姓名、金額:        date   name   花費金額:  2018-01-01      A        50:  2018-01-01      B        60:  2018-01-02      A        40:  2018-01-03      B        80:  2018-01-05      A       120:  2018-01-06      B        90: 我想將這個資料轉成下面這個形式:        date   name   花費金額   前一次金額  前前一次金額:  2018-01-01      A        50           NA            NA:  2018-01-01      B        60           NA            NA:  2018-01-02      A        40           50            NA:  2018-01-03      B        80           60            NA:  2018-01-05      A       120           40            50:  2018-01-06      B        90           80            60: 也就是說，除了知道消費者當天消費金額，也可以知道該消費者前兩次的消費金額: 試過用data.table去做，但都無法整理出像上述的形式: 麻煩指點一下，謝謝！假裝你資料叫data

data$前一次金額 <- """"

data[i, ""前一次金額""] <- 輸入你要的數字

不知這樣做可不可以?

--","R_Language"
"452","M.1516708076.A.D3A","xdd1524","問題","資料整理",2018-01-23 19:47:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

手上有大量消費者每日消費金額

欄位有日期、姓名、金額

       date   name   花費金額
 2018-01-01      A        50
 2018-01-01      B        60
 2018-01-02      A        40
 2018-01-03      B        80
 2018-01-05      A       120
 2018-01-06      B        90

我想將這個資料轉成下面這個形式

       date   name   花費金額   前一次金額  前前一次金額
 2018-01-01      A        50           NA            NA
 2018-01-01      B        60           NA            NA
 2018-01-02      A        40           50            NA
 2018-01-03      B        80           60            NA
 2018-01-05      A       120           40            50
 2018-01-06      B        90           80            60

也就是說，除了知道消費者當天消費金額，也可以知道該消費者前兩次的消費金額

試過用data.table去做，但都無法整理出像上述的形式

麻煩指點一下，謝謝！

--","R_Language"
"453","M.1516701564.A.6A7","nestwood","問題","R叫喚Fortran程式容易當機",2018-01-23 17:59:21,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。[問題類型]:請把以下不需要的部份刪除經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位前輩好，
小弟最近進行的計畫需要從R呼喚Fortran程式，

但是往往呼喚第一次時成功(因此Fortran程式本身應該沒問題)，

再練續呼喚時Rstudio就會掛點直接要重開(R aborted)，

請問這是否有可能是Rstudio容量或記憶體方面的問題，

要怎麼改善呢?

在使用比較簡易的程fortran式是可以呼喚很多次都沒問題，

放進Loop裡重複call也沒問題；

但換成較大的fortran subroutine時往往就只能成功一次。

謝謝!

[程式範例]:請把以下不需要的部份刪除dyn.load(""subroutine_1.dll"")foo<-.Fortran(""subroutine"",x=as.double(x),y=as.double(y),......)出現訊息:R enxounter a fatal error.The Session was terminated.[環境敘述]:R version 3.4.3 (2017-11-30)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows >= 8 x64 (build 9200)Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets[6] methods   baseother attached packages:[1] maxLik_1.3-4     miscTools_0.6-22loaded via a namespace (and not attached):[1] zoo_1.8-0       minqa_1.2.4     MASS_7.3-47[4] compiler_3.4.3  Matrix_1.2-12   sandwich_2.4-0[7] tools_3.4.3     yaml_2.1.16     Rcpp_0.12.14[10] splines_3.4.3   nlme_3.1-131    grid_3.4.3[13] nloptr_1.0.4    lme4_1.1-15     lattice_0.20-35[關鍵字]:Fortran--","R_Language"
"454","M.1516351759.A.C47","z888888861","問題","R keras 自訂 loss function",2018-01-19 16:49:15,NA,NA,"[問題類型]:

  最近在使用R上的keras，因為我的model需要自訂loss function，但不太熟悉語法，
因此詢問看看，謝謝


[問題敘述]:

  目前是預計同時使用MAPE和另外一個loss function，並用權重加成，因MAPE會將error
(Y-Yhat)取絕對值，但在我目前的case上，短時間內的error是可以正負相抵的，而且也
希望error總和靠近0，就我的認知僅有MAPE無法考慮相消的效果。

  目前已經知道如何自訂loss function，但不知道如何做到以下條件:

  每連續四個error(e1+e2+e3+e4 or e2+e3+e4+e5....)加總，將數個error的加總回傳




[程式範例]:http://codepad.org/3iYeiNPc[關鍵字]:


  R keras

--作者Yui5 (唯控)看板NBA標題[情報] Kobe：8號的我和24號的我完全不同時間Tue Nov  7 10:55:26 2017→ AdaDaDj     : 8號的你是強姦犯，24號的你是強姦通緝犯--","R_Language"
"455","M.1516290335.A.173","va12024","情報","線上8小時爬蟲課程/64折倒數3天",2018-01-18 23:45:32,NA,NA,"太晚發現這個好康！！一門教授「Python&R」的爬蟲線上課程優惠價即將要結束了
<U+25B6>https://goo.gl/cxGosP#64折倒數三天 （1/23恢復原價4600）這堂課程不只會教你爬蟲如何撰寫，
更重要的內容是教你如何『觀察各種網站』。
老師說「觀察資料藏在網站的哪個地方才是爬蟲教學的重點！」
在真實世界中不會所有的資料都是乾淨的，若是不從觀察開始搭配實戰，而是單純看 cod
e 教範例的話，面對一個新的網站，一樣是束手無策。
　
一開始入門若單純學習Python或Ｒ語言可能會覺得枯燥，爬蟲會是一個適合的主題，讓你
學完可以看到自己爬到的成果，從學習中得到成就感。
　
詳細的課程安排看課程介紹吧 <U+25B6>https://goo.gl/cxGosP有影片有真相，想看爬蟲案例示範與過往學員推薦，都在頁面中了！

--","R_Language"
"456","M.1516193038.A.D3A","celestialgod","問題","Re: 移動平均的開頭和結尾處理",2018-01-17 20:43:54,NA,NA,"※ 引述《giock18 (小武)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者: [問題敘述]:: 遇到一個問題卡關想請教版上大大: 我有一筆資料，必須依ID分組處理: 在每組當中，針對每小時的資料，必須往前、往後做移動平均: 範例:: Test<-data.frame(hrs=seq(from=0,to=23),TaxiTime=runif(24,min=15,max=25)): Test$ID<-'a': Test2<-Test: Test2$ID<-'b': Test <- rbind(Test,Test2): df1 <- group_by(Test,ID) %>%:   mutate(TaxiTime2 =  lead(TaxiTime, 1), TaxiTime3 = lag(TaxiTime, 1)) %>%:   filter(!is.na(TaxiTime) | !is.na(TaxiTime2) | !is.na(TaxiTime3)): %>%data.frame(): print(df1): #在這裡可以看出，這個做法還沒考慮到，遇到00點和23點的時候的問題: df2 <-mutate(df1, TaxiTime.Mean = rowMeans(select(df1,: starts_with(""TaxiTime"")), na.rm = TRUE)): 但遇到一個問題是，如果是分組的第一列資料(00點的時候)，該如何讓他去取23點的資料: 去補TaxiTime2 的空值。: 同理，遇到最後一列資料(23點的時候)該如何讓他去取00點的資料補值。: 這樣的功能有點像移動平均的頭尾問題，所以我問題這樣取名，: 如果有更好的問題命名建議我可以修正！！拜託大大了！: [關鍵字]:: moving average,分組處理library(zoo)
library(data.table)
library(pipeR

# 資料生成
DT <- data.table(hr = rep(0:23, 2), id = rep(letters[1:2], each = 24),
                 taxiTime = runif(48, 15, 25))

# pipe版本 (no temporary variables)

out <- DT[hr %in% c(0, 23)] %>>% # 先取出頭尾
  `[`(hr == 23, hr := -1) %>>%   # 讓尾巴變頭
  `[`(hr == 0, hr := 24) %>>%    # 讓頭變尾巴
  rbind(DT) %>>% setorder(id, hr) %>>% # 跟原本資料合併後排序
  `[`(j = mvAvg := rollapply(taxiTime, 3, mean, fill = NA), by = .(id)) %>>%
  # 取moving average
  `[`(hr >= 0 & hr <= 23) # 移除剛剛新增的列

# 或是不用pipe的版本：

tmp <- DT[hr %in% c(0, 23)]
tmp[hr == 23, hr := -1]
tmp[hr == 0, hr := 24]
DT2 <- rbind(tmp, DT)
setorder(DT2, id, hr)
out <- DT2[ , mvAvg := rollapply(taxiTime, 3, mean, fill = NA),
              by = .(id)][hr >= 0 & hr <= 23]


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"457","M.1516186586.A.1DC","giock18","問題","移動平均的開頭和結尾處理",2018-01-17 18:56:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者

[問題敘述]:
遇到一個問題卡關想請教版上大大

我有一筆資料，必須依ID分組處理
在每組當中，針對每小時的資料，必須往前、往後做移動平均

範例:
Test<-data.frame(hrs=seq(from=0,to=23),TaxiTime=runif(24,min=15,max=25))
Test$ID<-'a'
Test2<-Test
Test2$ID<-'b'
Test <- rbind(Test,Test2)

df1 <- group_by(Test,ID) %>%
  mutate(TaxiTime2 =  lead(TaxiTime, 1), TaxiTime3 = lag(TaxiTime, 1)) %>%
  filter(!is.na(TaxiTime) | !is.na(TaxiTime2) | !is.na(TaxiTime3))
%>%data.frame()
print(df1)
#在這裡可以看出，這個做法還沒考慮到，遇到00點和23點的時候的問題

df2 <-mutate(df1, TaxiTime.Mean = rowMeans(select(df1,
starts_with(""TaxiTime"")), na.rm = TRUE))

但遇到一個問題是，如果是分組的第一列資料(00點的時候)，該如何讓他去取23點的資料
去補TaxiTime2 的空值。

同理，遇到最後一列資料(23點的時候)該如何讓他去取00點的資料補值。


這樣的功能有點像移動平均的頭尾問題，所以我問題這樣取名，
如果有更好的問題命名建議我可以修正！！拜託大大了！



[關鍵字]:
moving average,分組處理

--","R_Language"
"458","M.1516063100.A.6CC","angel50732","問題","資料整合處理",2018-01-16 08:38:17,NA,NA,"[問題類型]:

因為資料數太大所以抓資料時有進行分割。(即，有兩份檔案)
我想要把兩份檔案有出現相同名字的資料合併成一行，下面有範例。

[軟體熟悉度]

新手

[問題敘述]:

example:資料格式
第一份 I   He She
            10 20  30
             6.  7.   2
第二份 I.   They.   He
             2     30      8
             35   2        1
我想要變成：第二份疊在第一份下面
             I.     He.    She.    They
            10    20       30
             6       7         2
             2       8                     30
             35     1                      2

麻煩大家幫我解惑，謝謝！

--","R_Language"
"459","M.1516040917.A.41B","raydai","問題","Re: 在R裡面的if then output寫法？",2018-01-16 02:28:35,NA,NA,"※ 引述《paranoia5201 (社會黑暗、行路難)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 以下是一個SAS的簡單程式，想問在R中要如何也做出同樣的事情。: 這裡是針對if then ""output""的部分。: 若需要先下載某packages也請直說！: [程式範例]:: data m0 m1 m2;: set mor;: keep year sex areaname_new ADJ_R TotalCase;: if type = ""綜合"" & areaname_new = ""全國"" ;: if sex = ""0"" then output m0;: if sex = ""1"" then output m1;: if sex = ""2"" then output m2;: run;: [環境敘述]:: R3.2.3: [關鍵字]:: 初學者經驗？我也很久沒有使用SAS，不過對於我的理解，我就想到這樣寫．或許有更容易的寫法
提供給你參考
==================================================================================
## create a fake dataset
mydata<-data.frame(""year""=c(1986,2012,2013,2020,2019,1999,1986,2012,2013,2020,2019,1999),
                   ""type""=rep(c(""A"",""B""),6),
                   ""sex""=rep(c(""male"",""female""),6),
                   ""areaname_new""=rep(c(""global"",""local""),6),
                   ""ADJ_R""=rnorm(n =12,mean = 0,sd = 1),
                   ""TotalCase""=rnorm(n = 12,mean = 5,sd = 1.5))

library(""dplyr"")   ## Data manupulation
## Assinge the data to a new varaible ""m0""
## %>% this is pipe function from ""dplyr"" package.
mydata%>%filter(type==""A"",areaname_new==""global"",sex==""male"")%>%    ## filter
  select(""year"",  ""sex"" ,""areaname_new"" ,""ADJ_R"", ""TotalCase"")%>%   ## Keep the variables you want
  assign(""m0"",value =.,envir =.GlobalEnv )                 ## Assign the dataset to a new varaible

==========================================================================================



--","R_Language"
"460","M.1515976700.A.740","jasonfghx","問題","Re: 網路爬蟲抓資料問題",2018-01-15 08:38:17,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:http://jsjustweb.jihsun.com.tw/z/zc/zcj/zcj_4960.djhtm我想抓""所屬產業"" 這四個字

因為我用utf-8的網頁練習都沒問題

但這個big5 的 執行出來都是空的

想請問是有什麼問題在裡面嗎




[程式範例]:

library(plyr)
library(dplyr)
library(data.table)
library(stringi)


base_url <- ""http://jsjustweb.jihsun.com.tw""url <- ""http://jsjustweb.jihsun.com.tw/z/zc/zcj/zcj_""t_url <- paste0(url, i=""4960.djhtm"")
doc1   <- read_html(t_url, encoding = ""big5"")

xpath <- '//div[@id=""SysJustIFRAMDIV""]/a'
title <- xml_text(xml_find_all(doc1, xpath))

[關鍵字]:
網路爬蟲


很感謝回復","R_Language"
"461","M.1515946547.A.6D4","adam100830","問題","shiny呼叫local端R檔",2018-01-15 00:15:45,NA,NA,"〔問題類型〕：
程式諮詢

〔軟體熟悉度〕：
Shiny新手

〔問題敘述〕：

問題1 ：
我試寫了一個網站，在server.R的地方呼叫了另一個R(a.R)，但之前一直在local端跑都沒發現問題，後來放上shinyapp.io才發現問題。
不知道如果我如果要把網頁放上網，我的a.R要怎麼呼叫才行，之前我都使用source(a.R)，那我的server.R放上網要怎麼呼叫local端的a.R檔？

問題2 ：
我ui.R的要輸出表格，也想要輸出圖片，而圖片和表格都在a.R檔計算好了，可是server.R在寫的時候就要指定輸出的形式是什麼，如：output$x <- renderTable(...)。
我的a.R中有表格（table1）、圖（pic1）、字串（string1 ）

我嘗試過使用
output$x <- renderTable(a.R) #表格#table1
output$y <- renderPlot(a.R) #圖#pic1
output$z <- renderText(a.R) #字串#string1
結果失敗，他只會輸出表格，我想是因為我的a.R最下面一個變數是表格(pic1)的關係。

ui.R同時想輸出a.R裡面的多樣東西的時候怎麼使用呢？

因為剛接觸用法很多都不熟悉，還請各位指點。
如果大家有什麼推薦的shiny教學，也希望可以推薦給我。

非常謝謝大家。

-----
Sent from JPTT on my iPhone

--","R_Language"
"462","M.1515846641.A.C54","tony1331","問題","回歸固定效果問題",2018-01-13 20:30:38,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
s手(沒寫過程式，R 是我的第一次)

[問題敘述]:
跑回歸要用到公司和時間的固定效果，有google找到code，但跑出來錯誤，想請問大家那些錯誤是什麼意思?謝謝大家~

[程式範例]:http://i.imgur.com/A8XxFx7.jpg-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"463","M.1515830677.A.C15","jasonfghx","問題","時間序列, 想在同一時間上呈現兩種數據",2018-01-13 16:04:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想用時間序列形式在一個年份上呈現兩種數據
所以想請教要怎麼寫。
感謝指導∼


[程式範例]:

sales1<-c(40,9.8,12,8.94,10.2)
sales<-c(20,7.8,11,6.94,12.2)
tsales<-ts(sales,start=c(2012),frequency = 1)
tsales1<-ts(sales1,start=c(2012),frequency = 1)
plot(tsales,ylab=""營業毛利"",main=""日月光營業毛利變化"")

#主要是我分別畫都沒問題, 只是很想試著把這兩隻圖可以合併在一起比較,

我想請教是不是時間序列沒法在同一時間呈現兩筆或兩種折線資料?



[關鍵字]:
時間序列


很感謝回復


有人回我用
ts.plot(tsales,sales1,gpars=list(col=c(""blue"",""red"")),ylab=""營業毛利"",main=""日
月光營業毛利變化"")

感謝
--","R_Language"
"464","M.1515663669.A.E24","gitsvn","問題","quantmod chartSeries 繪圖問題",2018-01-11 17:41:06,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
請問用 quantmod 裡 chartSeries 這個函數畫出來的圖形有辦法改變大小嗎?
不是要存成 png/jpeg, 是要改變顯示出來的圖形的大小.

我目前的做法是寫一個 app 透過 shiny server 顯示, 如下圖:https://imgur.com/sAFd8nu我想要改變圖形的 height 讓它看起來不會太扁, 請問應該怎麼做?

--","R_Language"
"465","M.1515652042.A.479","cywhale","分享","R shiny web app 一些經驗雜談",2018-01-11 14:27:20,NA,NA,"分享自己寫的shiny app 主題是海洋浮游動物的生態資料庫查詢
在這就不介紹生態上的議題，主要分享技術上心得可供參考http://bio.odb.ntu.edu.tw/query/資料連結部分...
shiny-server 和 PostgresSQL資料庫可架在不同server，在UI 完成篩選條件後，
抓資料的function寫成內部使用的package，經由Opencpu API 去抓使用者要的資料，
抓完即斷掉和資料庫連結。 Opencpu API作法參考https://www.opencpu.org/posts/scoring-engine/Opencpu server可在Apache 和 Nginx屏蔽成內網使用。用此做法在shiny-server
session中，不需要持續和資料庫保持連結。

Async...
另一個好處是預先要抓的資料，可以丟進 future::future() (以及其他讀外部檔等工作)
讓shiny-server繼續完成其他UI要做的事，等到需要render資料時才用future::value()
叫用出來。這樣減少一些lag..

順提，前日在Hadley twitter讀到他介紹 RPostgres 相對於RPostgresql這個
目前使用的package的優勢，包括會自動清除佚失的連結，與query速度較快。之後應該會
改用看看~~https://github.com/r-dbi/RPostgresLoading...
網頁一開始會慢的一部分原因都在掛載的javascript and css，這在nginx中若設
js | css 的cache, 網站都會出錯。但可以把這些倚賴的資源放在CDN上，
參考做法：https://goo.gl/fum9Ji可以看到重複連結網站時，掛載在CDN上的resource都是取用被cache的，速度就會提升。

其實遇到很多問題，都靠孤狗大神一個個解決。我列了我使用到的package在這，其他有
機會再續談。http://bio.odb.ntu.edu.tw/index_tech_citations.html以上做法可能都有其他更好、更快的方式，目前這樣做僅供參考，也歡迎討論。
(如果您有使用此網站，使用經驗上好或不好的地方，或有其他細節要聯絡，
敬請告知或透過網頁上email聯絡。)

[關鍵字]: Shiny-server, API, Database


--","R_Language"
"466","M.1515637245.A.C9F","paranoia5201","問題","改趨勢圖中的legand",2018-01-11 10:20:43,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我用以下語法要展現出各疾病(type)的歷年發生趨勢。
但是想不到要怎麼改圖像中legand裡的label。
所以想請教要怎麼寫。
感謝指導∼


[程式範例]:
d_yearly1 # 各疾病資料歷年資料

# 資料的模樣> head(d_yearly1)year  type ADJ_R TotalCase AgeMedian
1 2001 140_9 15.06      3588        51
2 2001   150  5.38      1257        62
3 2001   151 14.79      3502        70
4 2001 153_4 32.56      7640        67
5 2001   155 39.30      9122        63
6 2001   162 30.08      7062        70

# 作趨勢圖的語法
ggplot(d_yearly1, aes(x=year, y=ADJ_R, group = type)) +
  geom_line(aes(color=type))+
  geom_point(aes(color=type))+
  theme(legend.position=""right"")

### 圖片做出來的legand裡的label，羅列著140_9、150、151、153_4、155、162等...
### 我想把上述label改成各個疾病名稱......
### 如果有可能把label名稱直接放在線的尾端，也可以教一下怎麼放嗎？感謝。

[環境敘述]:
Rstudio
library(tidyverse)
library(ggplot2)

[關鍵字]:
製圖、視覺化



--","R_Language"
"467","M.1515586322.A.399","HumuHumu","問題","data frame裡面一格塞很多string或numeri",2018-01-10 20:12:00,NA,NA,"想問一下 有沒有套件或function

可以在data.frame的其中一格塞很多東西的

譬如說data.frame裡面的第一個row中的第一個column可以放很多String，用換行隔開

df11<-cat(""A"",""B"",sep=""\n"")

mydata<-data.frame(X=df11,Y=NA)

--","R_Language"
"468","M.1515561574.A.CBE","lambking","問題","combinations",2018-01-10 13:19:32,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一個dataframe

name
A
B
C
D
E

想把它轉成2個column 的dataframe 且為有順序的配對
如下

origin  destination
A       B
A       C
A       D
A       E
B       C
B       D
B       E
C       D
C       E
D       E

想請問Ｒ裡面有沒有package 可以做到


--","R_Language"
"469","M.1515410883.A.E8E","celestialgod","問題","Re: 製作dummy variable矩陣效能問題",2018-01-08 19:27:57,NA,NA,"※ 引述《Wush978 (拒看低質媒體)》之銘言：: 你的問題，剛好等價於在文字探勘中建立document term matrix: ps. 給一段文字(一個字串)，用空格或其他符號切割後建立矩陣: 感謝前面幾位板友的分享，不過我從這個角度切入問題後，: 可以站在巨人的肩膀來解問題（也就是以下的程式跑得比較快，是因為套件作者寫的好）: 目前我覺得R 裡面做這件事情比較好的套件是text2vec，: 另一個小要點是輸出的矩陣，最好是sparse，因為你的資料大部分都是0，用sparse: matrix可以大幅度的加速與節省記憶體。: 而且當你的球員名單越多人，加速的效果越明顯。: 這是我用text2vec去處理你給的範例資料：: it <- itoken(data[[1]], tokenizer = word_tokenizer, progressbar = FALSE,: n_chunks = 10): it2 <- itoken(data[[2]], tokenizer = word_tokenizer, progressbar = FALSE,: n_chunks = 10): vocab <- create_vocabulary(player): vectorizer <- vocab_vectorizer(vocab): m1 <- create_dtm(it, vectorizer): m2 <- create_dtm(it2, vectorizer): [email<U+00A0>protected][] <- -1: cbind(m1, m2): 這是與其他板友的方法的比較結果：: http://rpubs.com/wush978/345283: andrew43 大大的版本效能比較好: 但是text2vec在打開平行處理之後，在我的電腦上可以比andrew43的方法再快一點: ※ 引述《mowgur (PINNNNN)》之銘言：: : *[m- 問題: 當你想要問問題時，請使用這個類別。: :         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。: : [問題類型]:: : 效能諮詢(我想讓R 跑更快): : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 大家好 我的資料是紀錄籃球比賽每個play是哪5個進攻及防守球員在場上: : 想做的事情是: 假設總共有500位球員 做出一個n(750000) x p(1000)的矩陣: : 前500欄為進攻 後500欄為防守: : 矩陣內的元素為1代表球員在場上進攻(防守為-1) 不在場上為0: : 所以每列會有5個1及5個-1還有很多個0: : 資料大概長這樣: :         data$p.combination              data$p.com.allowed: : 1        A, B, C, D, E                   J, K, L, M, N: : 2        A, C, F, H, I                   K, L, M, N, O: : 3        C, D, X, Y, Z                   K, M, O, Q, R: : ...          ...                              ...: : 人名之間是用逗號和一個空格分開: : 用我自己寫的已經跑了快12小時還沒跑完: : 想請教版上各位大大有沒有更好的寫法: : [程式範例]:: : https://ideone.com/PaBtM4之前不方便回文，今天終於有空來提供一下我的方法XD

我是直接用fastmatch這個套件，找出需要的index直接得到sparse matrix

比較一下andrew大跟wush大的方法(單核心3.87 GHz下)，我的方法可以快上近4倍

好讀版：https://pastebin.com/ySxqNtxt程式碼：

library(pipeR)
library(stringr)
library(data.table)
library(fastmatch)
library(plyr)
library(text2vec)
library(Matrix)

# 資料生成
numPlayers <- 500
numGames <- 300000
namePlayers <- sprintf(""P_%03d"", 1:numPlayers)

getCombinedFunc <- function(data, numSampling, numGroup) {
  DT <- data.table(V = sample(data, numGroup * numSampling, TRUE),
                   i = rep(1:numSampling, each = numGroup,
                           length.out = numGroup * numSampling), key = ""i"")
  # 確保每一列都是五個不同的PlayerNames
  uniqueDT <- unique(DT)
  while (nrow(uniqueDT) < numSampling * numGroup) {
    tmpDT <- uniqueDT[ , .N, by = .(i)][N < 5][ , N := 5 - N]
    uniqueDT <- rbind(uniqueDT, data.table(V = sample(data,nrow(tmpDT),TRUE),
                                           i = tmpDT$i)) %>>% unique
  }
  return(uniqueDT[ , .(combinedV = str_c(V, collapse = "","")),
                   by = .(i)]$combinedV)
}

# 測一下生成時間
system.time(getCombinedFunc(namePlayers, numGames, 5)) # 1.64 seconds

# 生成目標資料表
DT <- data.table(attack = getCombinedFunc(namePlayers, numGames, 5),
                 defence = getCombinedFunc(namePlayers, numGames, 5))

# 修改自andrew大的方法
andrew <- function(data, name.player) {
  out.attack <- strsplit(data[[1]], "","") %>>%
    sapply(function(x) name.player %in% x) %>>% t %>>%
    `colnames<-`(str_c(""attack_"", name.player)) %>>%
    mapvalues(c(TRUE, FALSE), c(1L, 0L), FALSE)
  out.defence <- strsplit(data[[2]], "","") %>>%
    sapply(function(x) name.player %in% x) %>>% t %>>%
    `colnames<-`(str_c(""defense_"", name.player)) %>>%
    mapvalues(c(TRUE, FALSE), c(-1L, 0L), FALSE)
  cbind(out.attack, out.defence)
}

# 修改自wush大的方法
wush <- function(data, name.player) {
  it <- itoken(data[[1]], tokenizer = word_tokenizer, progressbar = FALSE,
n_chunks = 10)
  it2 <- itoken(data[[2]], tokenizer = word_tokenizer, progressbar = FALSE,
n_chunks = 10)
  vocab <- create_vocabulary(name.player)
  vectorizer <- vocab_vectorizer(vocab)
  m1 <- create_dtm(it, vectorizer)
  colnames(m1) <- str_c(""attack_"", colnames(m1))
  m2 <- create_dtm(it2, vectorizer)
  colnames(m2) <- str_c(""defense_"", colnames(m2))[email<U+00A0>protected][] <- -1
  cbind(m1, m2)
}

# 我的方法
getLocMatFunc <- function(x, table, value = 1, colnames = NULL) {
  tmp <- str_split(x, "","")
  # 找出column位置
  j <- fmatch(do.call(c, tmp), table)
  # 找出row位置
  i <- do.call(c, mapply(function(i, x) rep(i, length(x)), seq_along(tmp),
                         tmp, SIMPLIFY = FALSE))
  # 產生出sparse matrix
  sparseMatrix(i, j, x = value, dims = c(length(x), length(table)),
               dimnames = list(NULL, colnames))
}

getMatrixFunc <- function(DT, namePlayers) {
  cbind(getLocMatFunc(DT$attack, namePlayers,1,str_c(""attack_"",namePlayers)),
       getLocMatFunc(DT$defence, namePlayers,-1,str_c(""defense_"",namePlayers)))
}

# check結果
Andrew <- andrew(DT, namePlayers)
Wush <- wush(DT, namePlayers)
rownames(Wush) <- NULL
MyMethod <- getMatrixFunc(DT, namePlayers)

all.equal(Wush, Matrix(Andrew, sparse = TRUE)) # TRUE
all.equal(MyMethod, Wush) # TRUE
all.equal(MyMethod, Matrix(Andrew, sparse = TRUE)) # TRUE

# 使用microbenchmark
library(microbenchmark)
microbenchmark(
  Andrew = andrew(DT, namePlayers),
  Wush = wush(DT, namePlayers),
  MyMethod = getMatrixFunc(DT, namePlayers),
  times = 10L
)
# Unit: seconds
#      expr       min        lq      mean    median        uq       max neval
#    Andrew 25.564674 25.631636 26.357786 26.429542 26.804092 27.312797    10
#      Wush  8.051787  8.127275  8.327858  8.319552  8.556822  8.621760    10
#  MyMethod  1.978885  2.033370  2.240003  2.145650  2.334539  2.959432    10

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"470","M.1515398751.A.6BF","sFKP","問題","有效率的字串比對方法",2018-01-08 16:05:49,NA,NA,"代朋友發問，希望格式沒有錯

[問題類型]: 是否有更有效率的字串比對方法



[軟體熟悉度]: 入門(寫過其他程式，只是對語法不熟悉)



[問題敘述]: 版上各位前輩好，最近遇到處理比對字串的問題。欲處理的問題大概是這樣，想從 main 裡的字串內，找尋是否有匹配 match_list 裡的 element (不分大小寫)，若有，則在新建立的變數 impute_name 裡填上匹配到的element。



目前可以用這種方法用迴圈讓每一個 element 都找一次，但是我的 match_list 其實很長，效率不彰，想請問是否有比較有效率的方法。



[程式範例]:

main <- data.table(string = c(""NIKE is good"", ""how about adidas"", ""something else""))



match_list <- data.table(brand = c(""Nike"",""Puma"",""Adidas""))



for(j in seq_along(match_list$brand)){



  main[str_detect(str_to_lower(string),str_to_lower(match_list$brand[j]))

       ,impute_name := match_list$brand[j] ]



}

[環境敘述]:

R version 3.4.2 (2017-09-28)

Platform: x86_64-w64-mingw32/x64 (64-bit) Windows 8.1

--","R_Language"
"471","M.1515393938.A.B60","paranoia5201","問題","在R裡面的if then output寫法？",2018-01-08 14:45:35,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
以下是一個SAS的簡單程式，想問在R中要如何也做出同樣的事情。
這裡是針對if then ""output""的部分。
若需要先下載某packages也請直說！

[程式範例]:
data m0 m1 m2;
set mor;
keep year sex areaname_new ADJ_R TotalCase;
if type = ""綜合"" & areaname_new = ""全國"" ;
if sex = ""0"" then output m0;
if sex = ""1"" then output m1;
if sex = ""2"" then output m2;
run;



[環境敘述]:
R3.2.3

[關鍵字]:
初學者經驗？


--","R_Language"
"472","M.1515342151.A.8F9","blablabla46","問題","股票的回測",2018-01-08 00:22:28,NA,NA,"[問題類型]:
程式諮詢(我想寫一個用60分的K棒做回測,但由於資料只有日周月)


[問題熟悉度]:新手 第一次
[程式範例]:
libytary(quantmood)
AAPL <- getsymbols(""AAPL"",from=""2016-12-01"",to=""2017-12-30"" )
AAPL <-to.weekly(AAPL)

有疑問的地方為  to.weekly 這個函數是以周為週期 我可以用甚麼函數來改變成小時嗎?



--","R_Language"
"473","M.1515280783.A.85F","hohiyan","問題","Re: R怎麼做多組資料合併? (for迴圈問題)",2018-01-07 07:19:39,NA,NA,"※ 引述《askpeople (就是要問!!!)》之銘言：: [軟體程式類別]:R: [程式問題]:for迴圈不知道怎麼寫比較好?: [軟體熟悉度]:新手: [問題敘述]:: 我想問的是: 如果希望整欄的資料做多次合併，有辦法用迴圈寫嗎?: 現在有一個問卷資料，題項有22欄，是由7個系共185位同學填寫: 資料形態如下:: https://imgur.com/a/6gJdq: (每個題項一共有185筆資料、共23個題項、7個系的同學填答): 這題是複選題，我必須要統計出每個系回答題項的數目分布: 1.要第1欄 (系所) + 第2欄 (題項1) = 1組資料:   以此類推...一共有22組資料: 2.將22組資料合併，就可以統計出每個系的題項分布，於是我用圖法煉鋼方式寫了如 (1): 但重點來了，我要問的就是: 有辦法用迴圈寫嗎? 但我用for迴圈寫如下面 (2)，: 因為沒寫過整組資料的合併，不知道問題出在那? 可以幫我看一下嗎?【以下引言恕刪】
這邊講的跟R無關，但跟問卷資料coding有關。如果版主覺得偏離版旨可以刪文沒關係 XD

在研究怎麼用R處理資料之前，可能要先釐清這個問卷的設計

從你的擷圖來看，這應該是一個

A. 複選題
B. 有22個子題
C. 有N個選項供受訪者選擇（依你的描述，N≧22）
D. 1~22個子題（可能）依序表示受訪者認為每個選項的重要程度
E. 受訪者最少只需要選擇一個選項（所以有些資料只有題項1有內容）

以複選題來說，這並不是一個好的coding方式，會造成後續分析上很多的問題

如果還來得及的話，看原po是不是要重新整理一下資料
例如：

假設在這個複選題下共有22個選項，
把所有的選項都當成一個欄位(column)，總共至少就有1（系所）+22（選項）=23個欄位
（雖然應該還要有一個case_id欄位比較好）
丟到R裡的話資料就會是一個 185*23 的dataframe

在選項的值的編碼方面，如果要保留選項被受訪者選擇的先後次序
值的範圍可以是0~22
0表示該選項未被選取（或直接coding成NA）
1~22表示被選取的先後次序（如果不考慮先後次序，那就有選取的都是1就好了）

這樣就可以很直接的產生以下資料：
A. 每個選項被全部受訪者選取的次數（% of none-zero values)
B. 每個選項被受訪者當成第幾順位選取的比例

加上group_by系所之後就可以得到原po需要的資料了（如果我沒會錯意的話…）


上面這些跟量化研究方法跟問卷設計有關，但跟R沒有直接的關係就是了 XD

--","R_Language"
"474","M.1515229432.A.E9C","askpeople","問題","R怎麼做多組資料合併? (for迴圈問題)",2018-01-06 17:03:49,NA,NA,"[軟體程式類別]:R

[程式問題]:for迴圈不知道怎麼寫比較好?

[軟體熟悉度]:新手

[問題敘述]:

我想問的是: 如果希望整欄的資料做多次合併，有辦法用迴圈寫嗎?

現在有一個問卷資料，題項有22欄，是由7個系共185位同學填寫

資料形態如下:https://imgur.com/a/6gJdq(每個題項一共有185筆資料、共23個題項、7個系的同學填答)

這題是複選題，我必須要統計出每個系回答題項的數目分布


1.要第1欄 (系所) + 第2欄 (題項1) = 1組資料

  以此類推...一共有22組資料


2.將22組資料合併，就可以統計出每個系的題項分布，於是我用圖法煉鋼方式寫了如 (1)

但重點來了，我要問的就是: 有辦法用迴圈寫嗎? 但我用for迴圈寫如下面 (2)，

因為沒寫過整組資料的合併，不知道問題出在那? 可以幫我看一下嗎?


(1) 圖法煉鋼 (確實可以正確合併，但花時間)

#data名稱是data31

#1使用cbind合併...

r1 =cbind(data31[,1],data31[,2])
r2 =cbind(data31[,1],data31[,3])
r3 =cbind(data31[,1],data31[,4])
.....

r22 =cbind(data31[,1],data31[,23])

#2使用rbind合併，得到最後的rf大矩陣

rf = rbind(r1,r2,r3...r22)

(2) for迴圈 : 遇到問題

n = 22
r22 = matrix()
for (i in 1:n)
{
  ri = cbind(data31[,1],data31[,i+1])
}
r22

因為這個是要把整組資料做合併，並非一個一個，所以我明知道迴圈有

問題，確不知道怎麼改? 可以指點我一下嗎? 我知道要給定一個矩陣讓迴圈儲存

可是我有22組，該怎麼存起來?

--","R_Language"
"475","M.1515164429.A.840","ms0344303","問題","",2018-01-05 23:00:26,NA,NA,"上一篇沒有照格式打請版主處理謝謝
[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:
如題
在下使用決策樹的CA R T
進行回歸樹預測
目前在評價這個演算法準確率上面遇到一點瓶頸
一般分類樹可以用混淆矩陣曲對角線的方式來計算準確率

可是回歸樹的話每一個預測都會有一點誤差沒有一個是猜的完全一樣的

不知道這問題是不是很常識
我真的不太清楚要如何計算準確率

還請各位指點一下


[程式範例]:


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"476","M.1515146801.A.D70","andrew43","問題","Re: 求優化後之精簡寫法",2018-01-05 18:06:37,NA,NA,"判斷式可以用小括號來決定作用順序。
另外此例可以用 %in% 方便正向選擇特定的符合項目。
例如，

ir104 %>%
  filter((year == ""2015"" & sex == ""2"" & areaname_new == ""台閩地區"") &
         type %in% c(174, 180, 182))

或是

ir104 %>%
  filter(year == ""2015"" & sex == ""2"" & areaname_new == ""台閩地區"") %>%
  filter(type %in% c(174, 180, 182))

意思是一樣的。
後者比較好閱讀的樣子。※ 引述《paranoia5201 (社會黑暗、行路難)》之銘言：: [問題類型]:: 效能諮詢：我會寫出我要的東西，但是想讓R跑得更快更精簡: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 以下程式碼是在篩選資料，但是除了type以外所有條件都相同；: 需要如下列寫法才能跑出我要的結果，是否有簡化的寫法？: 以下是在library(tidyverse)環境下工作。: [程式範例]:: top202 <-:   ir104 %>%:   filter(year == ""2015"" &:            sex == ""2"" &:            areaname_new == ""台閩地區"" &:            type == 174:          |:            year == ""2015"" &:            sex == ""2"" &:            areaname_new == ""台閩地區"" &:            type == 180:          |:            year == ""2015"" &:            sex == ""2"" &:            areaname_new == ""台閩地區"" &:            type == 182:          |:            year == ""2015"" &:            sex == ""2"" &:            areaname_new == ""台閩地區"" &:            type == 183) %>%:   select(year, type, ADJ_R, TotalCase): [環境敘述]:: Rstudio: library(tidyverse): [關鍵字]:: 無--","R_Language"
"477","M.1515143122.A.F2F","paranoia5201","問題","求優化後之精簡寫法",2018-01-05 17:05:19,NA,NA,"[問題類型]:

效能諮詢：我會寫出我要的東西，但是想讓R跑得更快更精簡

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
以下程式碼是在篩選資料，但是除了type以外所有條件都相同；
需要如下列寫法才能跑出我要的結果，是否有簡化的寫法？
以下是在library(tidyverse)環境下工作。


[程式範例]:

top202 <-
  ir104 %>%
  filter(year == ""2015"" &
           sex == ""2"" &
           areaname_new == ""台閩地區"" &
           type == 174
         |
           year == ""2015"" &
           sex == ""2"" &
           areaname_new == ""台閩地區"" &
           type == 180
         |
           year == ""2015"" &
           sex == ""2"" &
           areaname_new == ""台閩地區"" &
           type == 182
         |
           year == ""2015"" &
           sex == ""2"" &
           areaname_new == ""台閩地區"" &
           type == 183) %>%

  select(year, type, ADJ_R, TotalCase)


[環境敘述]:
Rstudio
library(tidyverse)

[關鍵字]:
無


--","R_Language"
"478","M.1515123450.A.F3E","andrew43","問題","Re: Pipe 使用問題",2018-01-05 11:37:26,NA,NA,"有一些小細節你可以留意一下。

a$X1 和 a[""X1""] 和 a[X1] 三者是不同的。
a$X1 同於 a[[""X1""]] 回傳的是向量；
a[""X1""] 回傳的是 data frame；
a[X1] 要預先定義 X1 的值才有作用（這是實際你發生的問題）。

綜合以上，改成：

reorder_level <- function(df, col_name) {
  df[col_name] <-
    factor(df[[col_name]], levels = mixedsort(unique(df[[col_name]])))
  df
}

b <- a %>% reorder_level(""X1"")
b
b$X1

重點在於雙重中括號和 ""X1"" 而不是 X1※ 引述《tus (new life)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 主要目的是重新排列一個factor level的順序: 我的問題是 如何能用pipe的表示方法來做到: [程式範例]:: library(dplyr): library(gtools): rm(list = ls()): a <- data.frame(matrix(c(""b_1"",""b_2"",""b_3"",""b_10"",""b_2"",1,2,3,4,5), nrow = 5)): a$X1 <- as.character(a$X1): levels(as.factor(a$X1)) # ""b_1""  ""b_10"" ""b_2""  ""b_3"": # 假設 a 是我們的資料 因為原始資料的型態是 chr 所以我把 a$X1 轉成chr: # 這樣的level排序是 b_1, b_10, b_2, ...: # 但我想要的是 b_1, b_2, b_3, b_10: b <- a: b$X1 <- factor(b$X1, levels = mixedsort(unique(b$X1))): levels(b$X1) # ""b_1"" ""b_2"", ""b_3"", ""b_10"": # 所以我用了以上程式來改變level的順序: # 可是當我寫了一個reorder level的function 想使用pipe時 卻一直出現問題: reorder_level <- function(df, col_name){:   df[col_name] <- factor(df[col_name], levels = mixedsort(unique(df[col_name]))):   df: }: c <- a %>% reorder_level(X1): # Error message 是: # Error in [.data.frame (df, col_name) : object 'X1' not found]: Thanks!--","R_Language"
"479","M.1515122429.A.2A3","tus","問題","Pipe 使用問題",2018-01-05 11:20:22,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

主要目的是重新排列一個factor level的順序

我的問題是 如何能用pipe的表示方法來做到

[程式範例]:

library(dplyr)
library(gtools)

rm(list = ls())

a <- data.frame(matrix(c(""b_1"",""b_2"",""b_3"",""b_10"",""b_2"",1,2,3,4,5), nrow = 5))
a$X1 <- as.character(a$X1)
levels(as.factor(a$X1)) # ""b_1""  ""b_10"" ""b_2""  ""b_3""

# 假設 a 是我們的資料 因為原始資料的型態是 chr 所以我把 a$X1 轉成chr
# 這樣的level排序是 b_1, b_10, b_2, ...
# 但我想要的是 b_1, b_2, b_3, b_10

b <- a
b$X1 <- factor(b$X1, levels = mixedsort(unique(b$X1)))
levels(b$X1) # ""b_1"" ""b_2"", ""b_3"", ""b_10""

# 所以我用了以上程式來改變level的順序

# 可是當我寫了一個reorder level的function 想使用pipe時 卻一直出現問題

reorder_level <- function(df, col_name){
  df[col_name] <- factor(df[col_name], levels = mixedsort(unique(df[col_name])))
  df
}

c <- a %>% reorder_level(X1)

# Error message 是
# Error in [.data.frame (df, col_name) : object 'X1' not found]

Thanks!


--","R_Language"
"480","M.1515073332.A.B9C","nina8598","問題","時間序列畫圖",2018-01-04 21:42:10,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門

[問題敘述]:

no      ;created_time
247     ;2017/10/31
246     ;2017/10/31
245     ;2017/10/30
244     ;2017/10/29
243     ;2017/10/28
242     ;2017/10/27
241           ;2017/10/24
240     ;2017/10/22
.
.
.
7       ;2016/7/14
6       ;2016/7/13
5       ;2016/7/13
4       ;2016/7/11
3       ;2016/7/9
2       ;2016/7/8
1       ;2016/7/7



以上是我的資料，
總共有247個，時間橫跨16個月，
中間日期沒有一定的間隔，但每個月都有資料，
第一欄的編號則是會連到另一個匯入的檔案。

data$created_time <- as.Date(data$created_time, ""%Y/%m/%d"")
posttime <- levels(factor(data$created_time))
posttime<- as.Date(posttime, ""%Y-%m-%d"")

然後因為我要畫圖，
X軸就是要用時間序列的方式呈現，
想要以一個月一個月做為間隔(ex:2016/7 2016/8 2016/9)

這邊我試了兩個時間序列的函數
1. theta_mean_by_year_ts <- ts(theta_mean_by_year,frequency=12,start = posttim
e[1])
2. theta_mean_by_year_ts <- ts(theta_mean_by_year,frequency=12,start =c(2016-0
7-07))

但最後都無法成功，
形成的圖超奇怪，
連x軸都不是日期呈現而是一堆奇怪的數字，
但我明明把他轉成日期格式了阿https://imgur.com/a/uiGmI想請問，
我想要以每個月作為間隔來畫圖，
然後x軸要正確顯示日期該怎麼做?
麻煩大家幫幫忙了~~~https://drive.google.com/open?id=1arfLeV6xGU_dxcYSMGlyjuLYe-V3mP84程式檔和要匯入的檔案

--","R_Language"
"481","M.1514992617.A.5F0","daybreakya","問題","shiny判斷式重複性高 簡化方法",2018-01-03 23:16:55,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

[程式範例]:
因為研究的關係，選擇R，其中對於shiny內使用if else

若有重複性高的程式，不知道可以怎麼處理? 例如：https://imgur.com/a/QehYQ文字說明：有5個 checkboxGroupInput

分別為年級、性別、年度、學期、事件

我想要讓使用者可以自由的配對，然後顯示出圖形

可能會有很多種排列，而且5個checkbox每個一定都會有選擇

大一、男、103年、第一學期、期末、除夕

大二、大四、男女、105年度、106年度、第二學期、暑假

找了各種關鍵字，在stackoverflow找到一篇類似的問題，但沒人回...
網址：https://goo.gl/KgDTrs於是今天很笨拙地慢慢一個一個if else做判斷

光是做完年級、性別的任意搭配，就已經3萬多行...https://imgur.com/a/Rtga1雖然可以運行，但有點蠢，不知道有什麼關鍵字或是方法，處理呢?

謝謝

[環境敘述]:
R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:選擇性，也許未來有用--","R_Language"
"482","M.1514982882.A.B9B","ntpuisbest","問題","變數比資料個數還多",2018-01-03 20:34:40,NA,NA,"最近拿到一份作業

變數高達兩萬多個

但資料的個數只有150個左右

想問該如何選出重要的變數?

逐步回歸應該會想死==

想問R有沒有相關的套件可以處理?

謝謝各位!

--","R_Language"
"483","M.1514877479.A.3A9","developme223","問題","R連結MS_SQL資料格式問題",2018-01-02 15:17:56,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[程式範例]:
建立重現錯誤的方法可以參考：

[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

因某些需求，須利用R套件RODBC連結SQL資料庫，但連接後發現，Rstudio會把欄位判斷為

數字導致若開頭為0的字串皆不會顯示，例如：欄位HospSeqNo本應為：01、00，卻顯示

為1、0。

如下：

語法：https://imgur.com/a/qoL24資料表：https://imgur.com/79w2oMw已在MS_SQL建立表格時，欄位格式設定為字串CHAR，但上述問題仍會發生。

MsSQL語法如下：

語法：https://imgur.com/zhBMqFQ資料表：https://imgur.com/LaSoxPZ懇求版上高手能提供解決方法，十分感謝！


[程式範例]:

[環境敘述]:

R版本: 3.2.1

本機:WIN10


[關鍵字]:

MsSQL、Rstudio

--","R_Language"
"484","M.1514875041.A.39C","eri820503","問題","網路爬蟲cookie設定",2018-01-02 14:37:13,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我想用R做網路爬蟲，透過設定不同的cookie爬資料，
我用591租屋網(""https://rent.591.com.tw/new/?kind=0&region=15"")做練習，
不過不知道該如何在R設定cookie，使用的package為httr及rvest。

從chrome及Postman查到該網站的資料放在:https://rent.591.com.tw/home/search/rsList?region=15&firstRow=0，
而我想更改不同的縣市，從網址上來看是改region，
不過因為該網站是從cookie控制縣市，cookie變數為""urlJumpIp""，
但不知道該如何在R內修改。

參考網頁:https://ithelp.ithome.com.tw/articles/10191506http://slides.com/andylin/deck-3#/https://rpubs.com/jnwang/226877[程式範例]:
library(jsonlite)
library(httr)
library(rvest)
#########從這兩行code查出的資料皆為台南
d1=fromJSON(""https://rent.591.com.tw/home/search/rsList?region=1&firstRow=0"")d2=fromJSON(""https://rent.591.com.tw/home/search/rsList?region=15&firstRow=0"")d1$data$data$regionname
d2$data$data$regionname
#########所以透過rvest內的session去爬
url=""https://rent.591.com.tw/new""session  <- html_session(url,set_cookies(""urlJumpIp=1""))> session<session>https://rent.591.com.tw/new/Status: 200
   Type:   text/html; charset=UTF-8
   Size:   210222

#接著透過下面指令將資料抓出來，不過仍為台南的資料
session%>%
  html_node(""body"")%>%
  html_text(trim=TRUE)

#若把url改成
url=""https://rent.591.com.tw/home/search/rsList?region=1&firstRow=0""session  <- html_session(url,set_cookies(""urlJumpIp=1""))
＞session
 <session>https://rent.591.com.tw/home/search/rsList?region=1&firstRow=0Status: 200
   Type:   application/json
   Size:   98311

#但做到這裡不知道該如何把json的資料抓出來


##############若透過httr的GET
url=""https://rent.591.com.tw/home/search/rsList?region=1&firstRow=0""doc <- GET(url,set_cookies(""urlJumpIp""=""1""))
fromJSON(content(doc, ""text""))

#爬出來的資料仍然是台南的

[關鍵字]:
webcrawling、rvest、httr、cookie

--","R_Language"
"485","M.1514860414.A.A86","MIZUYAMA","問題","summary後的疑惑",2018-01-02 10:33:27,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

問題很簡單以前都沒特別注意到
我在處理學生""朝遲到""統計資料
資料x
x[,1] x[,2]  x[,3]
姓名  座號  日期   朝遲到  一堂遲到   二堂遲到....八堂遲到



隨著日期不同
同一個人每天可能都會有一筆
但僅採用朝遲到
同時只要計算某個人出現幾次就好
於是用summary(x[,1])
也很基本的算了出來
不過最後卻出現(other) (次數)
我才注意到並非展示出全部的x

想請問版上高手有沒有甚麼建議?
(多年沒碰R了 生疏了好多...)

[程式範例]:
x<-read.csv(""D:\\data\\106H1.csv"",T)
summary(x[,1])

--
大學院研究的主題是時間∼直到他們將時間用盡

--","R_Language"
"486","M.1514640039.A.C6E","Wush978","問題","Re: 製作dummy variable矩陣效能問題",2017-12-30 21:20:32,NA,NA,"你的問題，剛好等價於在文字探勘中建立document term matrix

ps. 給一段文字(一個字串)，用空格或其他符號切割後建立矩陣

感謝前面幾位板友的分享，不過我從這個角度切入問題後，

可以站在巨人的肩膀來解問題（也就是以下的程式跑得比較快，是因為套件作者寫的好）

目前我覺得R 裡面做這件事情比較好的套件是text2vec，

另一個小要點是輸出的矩陣，最好是sparse，因為你的資料大部分都是0，用sparse

matrix可以大幅度的加速與節省記憶體。

而且當你的球員名單越多人，加速的效果越明顯。

這是我用text2vec去處理你給的範例資料：

it <- itoken(data[[1]], tokenizer = word_tokenizer, progressbar = FALSE,
n_chunks = 10)
it2 <- itoken(data[[2]], tokenizer = word_tokenizer, progressbar = FALSE,
n_chunks = 10)
vocab <- create_vocabulary(player)
vectorizer <- vocab_vectorizer(vocab)
m1 <- create_dtm(it, vectorizer)
m2 <- create_dtm(it2, vectorizer)[email<U+00A0>protected][] <- -1
cbind(m1, m2)

這是與其他板友的方法的比較結果：http://rpubs.com/wush978/345283andrew43 大大的版本效能比較好

但是text2vec在打開平行處理之後，在我的電腦上可以比andrew43的方法再快一點※ 引述《mowgur (PINNNNN)》之銘言：: *[m- 問題: 當你想要問問題時，請使用這個類別。:         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 大家好 我的資料是紀錄籃球比賽每個play是哪5個進攻及防守球員在場上: 想做的事情是: 假設總共有500位球員 做出一個n(750000) x p(1000)的矩陣: 前500欄為進攻 後500欄為防守: 矩陣內的元素為1代表球員在場上進攻(防守為-1) 不在場上為0: 所以每列會有5個1及5個-1還有很多個0: 資料大概長這樣:         data$p.combination              data$p.com.allowed: 1        A, B, C, D, E                   J, K, L, M, N: 2        A, C, F, H, I                   K, L, M, N, O: 3        C, D, X, Y, Z                   K, M, O, Q, R: ...          ...                              ...: 人名之間是用逗號和一個空格分開: 用我自己寫的已經跑了快12小時還沒跑完: 想請教版上各位大大有沒有更好的寫法: [程式範例]:: https://ideone.com/PaBtM4: library(magrittr): p.combination = character(1000): for(i in 1:length(p.combination)){:   p.combination[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: p.com.allowed = character(1000): for(i in 1:length(p.com.allowed)){:   p.com.allowed[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: data = data.frame(p.combination = p.combination,:                   p.com.allowed = p.com.allowed): player = LETTERS[1:26]: input.matrix0 = function(data, player, off){:   X = matrix(ncol = length(player), nrow = dim(data)[1]):   for(i in 1:dim(data)[1]){:     if(off) {:       colnames(X) = paste0(""O_"",player):       coding = 1:       pp = data$p.combination:     } else {:       colnames(X) = paste0(""D_"",player):       coding = -1:       pp = data$p.com.allowed:     }:     player.temp = pp[i] %>% gsub("", "", ""|"",.):     index = grep(player.temp, player):     X[i,index] = coding:     X[i,-index] = 0:   }:   return(X): }: input.matrix = function(data, player){:   X.off = input.matrix0(data, player, T):   X.def = input.matrix0(data, player, F):   return(cbind(X.off, X.def)): }: out = input.matrix(data,player)--","R_Language"
"487","M.1514564621.A.16B","andrew43","問題","Re: 製作dummy variable矩陣效能問題",2017-12-30 00:23:38,NA,NA,"我按你需要的 750000 x 1000 為目標。
有一個前題是，500 位球員的名字（我叫name.player）要預先知道，
不然要事先從原始資料中生成。

我是把攻擊和防守可以分開處理，但其實方法是一樣的。
主要用 %in% 來對比進行比對，再把T/F換成1/0或-1/0。
轉換過程以單核 3.4GHz CPU運算大概算了 80 秒，
ram 吃大概 10 MB（R官方GUI）。

library(magrittr)
library(plyr)
library(data.table)

## preamble
N.player <- 500
N.game <- 750000
name.player <- sprintf(""%04d"", 1:N.player)
dt <-
  data.table(
    p.attack =
      replicate(N.game, sample(name.player, 5)) %>%
      apply(., 2, paste, collapse = "", ""),
    p.defence =
      replicate(N.game, sample(name.player, 5)) %>%
      apply(., 2, paste, collapse = "", "")
  )

## find dummy matrix
start_time <- Sys.time()
out.attack <-
  strsplit(dt$p.attack, "", "") %>%
  sapply(., function(x) {
    name.player %in% x
  }) %>%
  t %>%
  set_colnames(paste0(""att_"", name.player)) %>%
  mapvalues(., c(T, F), c(1L, 0L))
out.defence <-
  strsplit(dt$p.defence, "", "") %>%
  sapply(., function(x) {
    name.player %in% x
  }) %>%
  t %>%
  set_colnames(paste0(""def_"", name.player)) %>%
  mapvalues(., c(T, F), c(-1L, 0L))
out <- cbind(out.attack, out.defence)
Sys.time() - start_time
# Time difference of 1.363288 mins

## check var out
dim(out)
# [1] 750000   1000
rowSums(out) %>% str
# num [1:750000] 0 0 0 0 0 0 0 0 0 0 ...※ 引述《mowgur (PINNNNN)》之銘言：: *[m- 問題: 當你想要問問題時，請使用這個類別。:         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 大家好 我的資料是紀錄籃球比賽每個play是哪5個進攻及防守球員在場上: 想做的事情是: 假設總共有500位球員 做出一個n(750000) x p(1000)的矩陣: 前500欄為進攻 後500欄為防守: 矩陣內的元素為1代表球員在場上進攻(防守為-1) 不在場上為0: 所以每列會有5個1及5個-1還有很多個0: 資料大概長這樣:         data$p.combination              data$p.com.allowed: 1        A, B, C, D, E                   J, K, L, M, N: 2        A, C, F, H, I                   K, L, M, N, O: 3        C, D, X, Y, Z                   K, M, O, Q, R: ...          ...                              ...: 人名之間是用逗號和一個空格分開: 用我自己寫的已經跑了快12小時還沒跑完: 想請教版上各位大大有沒有更好的寫法: [程式範例]:: https://ideone.com/PaBtM4: library(magrittr): p.combination = character(1000): for(i in 1:length(p.combination)){:   p.combination[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: p.com.allowed = character(1000): for(i in 1:length(p.com.allowed)){:   p.com.allowed[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: data = data.frame(p.combination = p.combination,:                   p.com.allowed = p.com.allowed): player = LETTERS[1:26]: input.matrix0 = function(data, player, off){:   X = matrix(ncol = length(player), nrow = dim(data)[1]):   for(i in 1:dim(data)[1]){:     if(off) {:       colnames(X) = paste0(""O_"",player):       coding = 1:       pp = data$p.combination:     } else {:       colnames(X) = paste0(""D_"",player):       coding = -1:       pp = data$p.com.allowed:     }:     player.temp = pp[i] %>% gsub("", "", ""|"",.):     index = grep(player.temp, player):     X[i,index] = coding:     X[i,-index] = 0:   }:   return(X): }: input.matrix = function(data, player){:   X.off = input.matrix0(data, player, T):   X.def = input.matrix0(data, player, F):   return(cbind(X.off, X.def)): }: out = input.matrix(data,player)--","R_Language"
"488","M.1514532224.A.1E8","tan800630","問題","Re: 製作dummy variable矩陣效能問題",2017-12-29 15:23:39,NA,NA,"同上一篇我自己的回文，這個code絕對還有很大的進步空間:p

請版上的各位再不吝指教

我自己想的方向是先把資料整理成long_format的資料格式，再用dcast轉形狀

模擬的資料筆數較大時兩個方法運作時間會差比較多
因此我把n設成10000而非原本的1000(在n=1000時甚至你的方法比較快一點)

希望對你有幫助:)

code:https://ideone.com/sVCoRDrequire(dplyr)
require(data.table)

#前置作業如原文

w2long=function(array){
        lapply(c(1:length(array)),function(i) {
        data.table(""id""=i,""player""=as.character(array[i]) %>%
        strsplit("", "") %>% .[[1]])
        }) %>% rbindlist()
}

out=merge(
w2long(data$p.combination) %>% mutate(show=1) %>%
dcast(id~player,value.var=""show""),
w2long(data$p.com.allowed) %>% mutate(show=-1) %>%
dcast(id~player,value.var=""show""),by=""id"",suffix=c(""_O"",""_D"")
)
out[is.na(out)]=0※ 引述《mowgur (PINNNNN)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別。:         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 大家好 我的資料是紀錄籃球比賽每個play是哪5個進攻及防守球員在場上: 想做的事情是: 假設總共有500位球員 做出一個n(750000) x p(1000)的矩陣: 前500欄為進攻 後500欄為防守: 矩陣內的元素為1代表球員在場上進攻(防守為-1) 不在場上為0: 所以每列會有5個1及5個-1還有很多個0: 資料大概長這樣:         data$p.combination              data$p.com.allowed: 1        A, B, C, D, E                   J, K, L, M, N: 2        A, C, F, H, I                   K, L, M, N, O: 3        C, D, X, Y, Z                   K, M, O, Q, R: ...          ...                              ...: 人名之間是用逗號和一個空格分開: 用我自己寫的已經跑了快12小時還沒跑完: 想請教版上各位大大有沒有更好的寫法: [程式範例]:: https://ideone.com/PaBtM4: library(magrittr): p.combination = character(1000): for(i in 1:length(p.combination)){:   p.combination[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: p.com.allowed = character(1000): for(i in 1:length(p.com.allowed)){:   p.com.allowed[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", ""): }: data = data.frame(p.combination = p.combination,:                   p.com.allowed = p.com.allowed): player = LETTERS[1:26]: input.matrix0 = function(data, player, off){:   X = matrix(ncol = length(player), nrow = dim(data)[1]):   for(i in 1:dim(data)[1]){:     if(off) {:       colnames(X) = paste0(""O_"",player):       coding = 1:       pp = data$p.combination:     } else {:       colnames(X) = paste0(""D_"",player):       coding = -1:       pp = data$p.com.allowed:     }:     player.temp = pp[i] %>% gsub("", "", ""|"",.):     index = grep(player.temp, player):     X[i,index] = coding:     X[i,-index] = 0:   }:   return(X): }: input.matrix = function(data, player){:   X.off = input.matrix0(data, player, T):   X.def = input.matrix0(data, player, F):   return(cbind(X.off, X.def)): }: out = input.matrix(data,player)--","R_Language"
"489","M.1514527291.A.C47","mowgur","問題","製作dummy variable矩陣效能問題",2017-12-29 14:01:27,NA,NA,"*[m- 問題: 當你想要問問題時，請使用這個類別。
        建議先到http://tinyurl.com/mnerchs搜尋本板舊文。

[問題類型]:

效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)


[問題敘述]:
大家好 我的資料是紀錄籃球比賽每個play是哪5個進攻及防守球員在場上

想做的事情是: 假設總共有500位球員 做出一個n(750000) x p(1000)的矩陣
前500欄為進攻 後500欄為防守
矩陣內的元素為1代表球員在場上進攻(防守為-1) 不在場上為0
所以每列會有5個1及5個-1還有很多個0
資料大概長這樣
        data$p.combination              data$p.com.allowed
1        A, B, C, D, E                   J, K, L, M, N
2        A, C, F, H, I                   K, L, M, N, O
3        C, D, X, Y, Z                   K, M, O, Q, R
...          ...                              ...
人名之間是用逗號和一個空格分開

用我自己寫的已經跑了快12小時還沒跑完
想請教版上各位大大有沒有更好的寫法

[程式範例]:https://ideone.com/PaBtM4library(magrittr)

p.combination = character(1000)
for(i in 1:length(p.combination)){
  p.combination[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", "")
}

p.com.allowed = character(1000)
for(i in 1:length(p.com.allowed)){
  p.com.allowed[i] = LETTERS[sample(1:26,5)] %>% paste0(collapse = "", "")
}

data = data.frame(p.combination = p.combination,
                  p.com.allowed = p.com.allowed)
player = LETTERS[1:26]



input.matrix0 = function(data, player, off){
  X = matrix(ncol = length(player), nrow = dim(data)[1])
  for(i in 1:dim(data)[1]){
    if(off) {
      colnames(X) = paste0(""O_"",player)
      coding = 1
      pp = data$p.combination
    } else {
      colnames(X) = paste0(""D_"",player)
      coding = -1
      pp = data$p.com.allowed
    }
    player.temp = pp[i] %>% gsub("", "", ""|"",.)
    index = grep(player.temp, player)
    X[i,index] = coding
    X[i,-index] = 0
  }
  return(X)
}

input.matrix = function(data, player){
  X.off = input.matrix0(data, player, T)
  X.def = input.matrix0(data, player, F)
  return(cbind(X.off, X.def))
}


out = input.matrix(data,player)





--","R_Language"
"490","M.1514380572.A.765","nosense","問題","ggplot 資料問題",2017-12-27 21:16:08,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我有一筆資料，想用ggplot畫成時間序列的圖
畫出來後，分成男女性別再畫一次
結果出現 ""錯誤: Aesthetics must be either length 1 or the same as the data ""
google之後還是不太清楚原因

[程式範例]:

有四個變數no,sex,time,type   type的值只有1跟4

head(data)
  no      sex     time    type
 12094851   2 2015-10-18    1
 12094851   2 2016-04-15    1
 12094851   2 2016-07-14    1
 12024856   2 2016-01-19    1
                :
                :
 10567401   1 2015-12-20    4
 11339563   1 2016-04-03    4
 11255465   1 2015-12-12    4
 31444461   2 2015-09-03    4

ggplot(data,aes(y=factor(no),x=time))+
geom_point(shape=type,size=1.7,colour=sex)+
geom_line()
畫出來是這樣https://i.imgur.com/pOwgrDr.pngdata_men<-data[data$sex==1,]   之後把男性的資料分離出來再做一次
ggplot(data=data_men,aes(y=factor(no),x=time))+
geom_point(shape=type)+
geom_line()
錯誤: Aesthetics must be either length 1 or the same as the data (162): shape

如果把shape移到aes()裡面是可以執行 但線的位置會跑掉

ggplot(data=data_men,aes(y=factor(no),x=time,shape=factor(type)))+
geom_point()+
geom_line()https://i.imgur.com/kJUlJ23.png想知道錯誤訊息原因 謝謝


--","R_Language"
"491","M.1514370607.A.4B3","daybreakya","問題","多個data.frame對應",2017-12-27 18:30:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
學R是透過書跟R的翻轉教室(沒上完...)

目前手邊有5個檔案，每個檔案會有採購項目(多筆)

例如:

 購買時間     品項      數量
2017-12-22   XXXXXX       2
2017-12-21   XYYYYY      10
2017-12-18   XZZZZZ       1
2017-12-10   XZYYYZ       1
   ....       ....       ..
   ....       ....       ..

在自己電腦上有跑shiny，已經可以將單一的data frame

根據時間、品項、數量，任意的搭配(checkbox)，來跑出我要的圖形

現在想要另外增加一個data frame叫客戶資料表

(原有的新增ID欄位，來對應客戶資料表)
   ID   購買時間       品項      數量
    1   2017-12-22   XXXXXX      2
    2   2017-12-21   XYYYYY      10
    1   2017-12-18   XZZZZZ      1
    3   2017-12-10   XZYYYZ      19
   ....       ....     ..        ...

(新增客戶資料表)
   ID     性別      年齡    職業
   1      男        16      學生
   2      女        20     上班族
   3      男        14      學生
  ....       ....       ..

可以由這張客戶表的性別或年齡加上原有的時間或品項或數量，來跑出要的圖形

例如：

要找「性別」為""女""的採購紀錄

從客戶資料表找出「性別」為""女""的ID→再透過ID到「採購項目表」找採購紀錄

有參考版上2384的文，但還是不太清楚

因為只有SQL的概念，一個客戶資料表又要對應原有的採購項目表
(一個客戶可能採購多筆，但不同天)

就不知道怎麼抓了，不知道可以利用什麼關鍵字查詢?

謝謝

[程式範例]:


[環境敘述]:
R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:

--","R_Language"
"492","M.1514330897.A.7F4","chiehfu","問題","R randomForest 是否能不重複使用變數",2017-12-27 07:28:13,NA,NA,"[問題類型]:

隨機森林相關問題

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在研究用R做隨機森林, randomForest function是否可以不重複使用變數做樹?
目前只找到可以決定節點的最大個數, 但是還是有可能會用重複變數分支

或者有別的套件可以推薦.

謝謝!!

--","R_Language"
"493","M.1514269038.A.C24","ewmm","問題","Re: 求助R與Latex中文呈現問題  致贈500元",2017-12-26 14:17:11,NA,NA,"※ 引述《ewmm (兩團肉的爸)》之銘言：: 標題: [問題] 求助R與Latex中文呈現問題  致贈500元: 時間: Tue Nov 14 22:03:43 2017:
:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別。:         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。: - 分享: 當你看到別人的心得時，請使用這個類別。:         版主鼓勵你幫版友歸納重點（選擇性）。: - 情報: 當你看到消息時，請使用這個類別。:         版主鼓勵你幫版友歸納重點（選擇性）。: - 心得: 當你自己想要分享經驗時，請使用這個類別。: - 討論: 當你自己已經有答案，但是也想聽聽版友意見時。:: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我的電腦是Mac OS Sierra: （1）我想用R軟體的ggplot2繪圖，並用gridExtra套件輸出於pdf檔: 如果圖中沒有中文，完全沒問題。如果圖中有中文（例如標題有中文），則無法顯示或出現錯誤訊息: 我想用中文楷體: 已在電腦內安裝”Kaiti TC”: 但始終無法正確印出: 聽說裝Macport，Cairo可解決，但我一直無法成功: https://groups.google.com/forum/#!topic/r-sig-mac/7IrhMr1K264:
:: （2）: 另外一個問題是Latex中文問題: 我是用TeXStudio: 我可以打英文文件，做英文beamer: 也可打簡單的中文文件，可用楷體: 但嘗試做中文beamer，卻始終無法成功（沒有選擇字體）:: 如果有人能跟我在台大附近碰面，幫我解決這兩個問題: 我請您喝杯茶吃點心，致贈500元新台幣: 我方便的時間：週六白天或週日下午，台大新生南路對面或巷子內的餐廳: 請留聯絡方式:
:
:: [程式範例]:: R程式碼:: #rm(list=ls()): library(ggplot2): library(gridExtra): df1<-data.frame(x=1:2, y=3:4, z=5:6): #p1<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""test1""): #p2<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""test2""): p1<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""測試"")  #Chinese title: p2<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""中文"")  #Chinese title: p1<-p1+theme(text = element_text(family = ""Kaiti TC"")): p2<-p2+theme(text = element_text(family = ""Kaiti TC"")):: p<-array(list(NA), dim=2): p[[1]]<-p1: p[[2]]<-p2: p_series <- lapply(1:(length(p)), function(.x) p[.x][[1]]): m2 <- marrangeGrob(p_series, nrow=2, ncol=1): ggsave(""test_plot_chinese.pdf"", m2):
:: R錯誤訊息: ""Saving 7.47 x 5.15 in image: Error in grid.Call.graphics(L_text, as.graphicsAnnot(x$label), x$x, x$y,  ::   invalid font type: In addition: There were 50 or more warnings (use warnings() to see the first 50)"":
:: [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.12.6 (Sierra):: locale:: [1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8:: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods: [7] base:: loaded via a namespace (and not attached):: [1] tools_3.3.1:: [關鍵字]::
:: 選擇性，也許未來有用:
:
:: --","R_Language"
"494","M.1514218560.A.C91","circusbest","問題","修改package裡面的程式碼",2017-12-26 00:15:56,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

想要修改package裡面的程式碼
有用download.packages下載package裡面的程式碼並進行修改
但當修改完後，且壓縮成zip檔後，用install package archive file進行安裝
但卻無法使用
想請問是否有方法可以直接開啟RDB檔案可以直接修改的修改器呢?
亦或是我在修改package的程式碼時，有那些地方出錯了呢？


[程式範例]:請把以下不需要的部份刪除如果直接用install package archive file進行安裝後，修改地方會出現下面錯誤訊息files ’R/rugarch-sgarch.R’ have the wrong MD5 checksums[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"495","M.1514198076.A.980","blacktea12","問題","迴圈撰寫問題!!",2017-12-25 18:34:33,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

問題敘述:

我需要寫一個迴圈，資料裡面有11列跟556欄
希望他跑的方式是抓完11列的資料之後，再換一個欄位抓11列的數值

選取A<C[1,1] & A>=C[2,1]的數值
選取A<C[2,1] & A>=C[3,1]的數值
選取A<C[3,1] & A>=C[4,1]的數值
....
選取A<C[10,1] & A>=C[11,1]的數值
抓取11次之後，換下一個欄位[ ,1+1]重複抓取11次

選取A<C[1,2] & A>=C[2,2]的數值
選取A<C[2,2] & A>=C[3,2]的數值
選取A<C[3,2] & A>=C[4,2]的數值
....
選取A<C[10,2] & A>=C[11,2]的數值

我有556欄我不想這樣打到崩潰阿...可是我又不知道怎麼寫迴圈
希望各位大大求助阿!!

--","R_Language"
"496","M.1514169058.A.517","Wush978","問題","Re: 內建資料集輸出成excel時如何保留日期欄",2017-12-25 10:30:55,NA,NA,"不好意思，我注意到 ts 型態的物件對於常見的除錯方法不太適用

回到你的問題，你無法輸出月份到csv的理由是因為，

月份等任何與時間相關的資訊根本不存在於 ts 型態的物件

也就是說，無法直接辦到。只能從start , frequency... 等資訊去自己拼出時間資訊

（也就是說，你在螢幕上看到 data 印出的月份是假的）

實務上，R的社群已經不推薦使用ts物件，建議用xts等套件的物件。

所以我的建議是，在輸出到 csv 的時候，自己插入一列並且手打月份吧...※ 引述《andyphy (Mimo)》之銘言：: [問題敘述]: 小弟是R新手，想要輸出內建資料集的資料到csv: 輸出時，原本在R裡面看到的日期在欄位A就變成1, 2, 3, 4, ....: 有辦法保持日期格式輸出成csv file嗎?: [程式碼]: data <- co2: data: write.csv(data, file = ""test.csv""): [環境敘述]:: R 3.4: R Studio 1.0.143--","R_Language"
"497","M.1514109018.A.482","disney82231","問題","檢定迴歸兩個係數相加為0",2017-12-24 17:50:13,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
跑了一個複回歸，a<-lm(y~c+d+e+c*e+d*e,data=data)
其中e為類別變數1或0
想要檢定H0=c+(c*e)的係數是否=0，以及檢定在e=1下H0=c和d的係數=0，應該如何做呢?
用linearHypothesis(b,""c+(c*e)=0"")無法檢定

謝謝

[程式範例]:



[關鍵字]:


--","R_Language"
"498","M.1514084782.A.F46","andyphy","問題","內建資料集輸出成excel時如何保留日期欄",2017-12-24 11:06:19,NA,NA,"[問題敘述]
小弟是R新手，想要輸出內建資料集的資料到csv
輸出時，原本在R裡面看到的日期在欄位A就變成1, 2, 3, 4, ....
有辦法保持日期格式輸出成csv file嗎?

[程式碼]
data <- co2
data
write.csv(data, file = ""test.csv"")


[環境敘述]:
R 3.4
R Studio 1.0.143

--","R_Language"
"499","M.1513868742.A.F52","withhappy","問題","直方圖繪圖請益",2017-12-21 23:05:39,NA,NA,"[軟體熟悉程度]:
新手


[問題敘述]:
有個data frame(member)，想畫出性別年齡直方圖，
圖形設定：
1、x軸為年齡，範圍為0-110歲
2、年齡以10歲為區間計算人數(0~10歲、11~20歲…類推)
3、用顏色區分性別，並以疊合方式同時看

下圖為我自行畫出的圖：https://imgur.com/rA59aO5遇到的問題
1、為何10、20、30歲是在圖形的中間，而非兩側？
2、圖形上的人數和實際資料好像不符https://imgur.com/ITunOHhhttps://imgur.com/gUJ715i[程式範例]：https://imgur.com/UHAdqUr謝謝各位

--","R_Language"
"500","M.1513845530.A.138","ch325199","問題","ggplot2求救",2017-12-21 16:38:48,NA,NA,"最近在學Ｒ語言的課程(大概兩個月了
其中有一項小作業是關於ggplot2

請使用 ggplot
與 stat_smooth
繪製出Aids2中
繪製出 death 與 diag 以 state 分類後的線性回歸結果

不知為何我都叫不出Aids2這筆資料
後面繪圖的部分我也看不太懂題目
有人知道該怎麼寫嗎
跪求幫助

--","R_Language"
"501","M.1513821363.A.7AD","li70534","問題","找網路虛擬主機執行shiny",2017-12-21 09:56:00,NA,NA,"[問題類型]:

經驗諮詢(我想讓shiny能夠透過網頁運行，請問大家的經驗)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我利用shiny寫一套午餐的選擇器，我希望將它放置網路主機上讓每個人
能透過網頁就能使用。我有用過shinyapp.io，但她沒辦法將更新的data下載下來
詢問各位高手是否有免費的虛擬主機能夠做到既可以下載資料也能在網頁上使用?


在此先謝謝各位高手

--","R_Language"
"502","M.1513783873.A.820","tan800630","問題","Re: 在dataframe中抓取前n筆的值做平均",2017-12-20 23:31:10,NA,NA,"code有點難看，套件也是因為手順所以用了一點dplyr
(其實只要用自己習慣的資料整理套件應該都可)

主要是先做一個函數可以在輸入特定array 與 要往前平均幾筆的""n"" 之後

產生我們想要的那個平均(用ifelse做得好醜)

之後用apply系列處理掉

感覺應該有很大的進步空間

再請各位大大指教O_Q



--------------------------------------------------------
library(dplyr)
library(data.table)

dat=data.frame(group=c(""A"",""A"",""A"",""A"",""B"",""B"",""B"",""B""),
value=c(10,15,12,30,11,20,25,22))
n=3

func=function(value,n){
        sapply(c(1:length(value)),function(i){
                cur_value=value[ifelse(i-n>0,i-n,0):ifelse(i-1>0,i-1,0)]
                sum(cur_value)/ifelse(length(cur_value)>0,n,0)})
        }

#這行輸出後即是整理過後的資料
lapply(unique(dat$group),function(g){
        dat %>% filter(group==g) %>% mutate(avg=func(value,n))
}) %>% rbindlist()※ 引述《menghsuanliu (庫庫少)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有一個Dataframe,以第一欄做group by, 第二欄的值做前三筆的平均,然後把值寫在第三欄: [程式範例]:: dataframe (AS-IS):         group   value: 1       AAA     10: 2       AAA     15: 3       AAA     12: 4       AAA     30: 5       AAA     11: 6       BBB     20: 7       BBB     25: 8       BBB     22: 9       BBB     17: .......: (TO-BE):         group   value   avg: 1       AAA     10      na: 2       AAA     15      3.33    10/3: 3       AAA     12      8.33    (10+15)/3: 4       AAA     30      12.33   (10+15+12)/3: 5       BBB     11      na: 6       BBB     20      3.67    11/3: 7       BBB     25      10.33   (11+20)/3: 8       BBB     22      18.67   (11+20+25)/3: 9       BBB     17      21.67   (20+25+22)/3: [環境敘述]:: R 3.3.3: R Studio 1.0.143--","R_Language"
"503","M.1513782445.A.B76","celestialgod","問題","Re: 在dataframe中抓取前n筆的值做平均",2017-12-20 23:07:21,NA,NA,"※ 引述《menghsuanliu (庫庫少)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有一個Dataframe,以第一欄做group by, 第二欄的值做前三筆的平均,然後把值寫在第三欄: [程式範例]:: dataframe (AS-IS):         group   value: 1       AAA     10: 2       AAA     15: 3       AAA     12: 4       AAA     30: 5       AAA     11: 6       BBB     20: 7       BBB     25: 8       BBB     22: 9       BBB     17: .......: (TO-BE):         group   value   avg: 1       AAA     10      na: 2       AAA     15      3.33    10/3: 3       AAA     12      8.33    (10+15)/3: 4       AAA     30      12.33   (10+15+12)/3: 5       BBB     11      na: 6       BBB     20      3.67    11/3: 7       BBB     25      10.33   (11+20)/3: 8       BBB     22      18.67   (11+20+25)/3: 9       BBB     17      21.67   (20+25+22)/3: [環境敘述]:: R 3.3.3: R Studio 1.0.143你的TO-BE資料跟AS-IS好像不太對XDDD

DF <- read.table(textConnection(""group   value
AAA     10
AAA     15
AAA     12
AAA     30
AAA     11
BBB     20
BBB     25
BBB     22
BBB     17""), header = TRUE)

DF$avg <- do.call(c, tapply(DF$value, DF$group, function(x){
  c(NA, cumsum(x[-length(x)]) / rep(3, length(x)-1))
}))
#   group value       avg
# 1   AAA    10        NA
# 2   AAA    15  3.333333
# 3   AAA    12  8.333333
# 4   AAA    30 12.333333
# 5   AAA    11 22.333333
# 6   BBB    20        NA
# 7   BBB    25  6.666667
# 8   BBB    22 15.000000
# 9   BBB    17 22.333333

library(data.table)
DT <- DF
setDT(DT)
DT[ , avg := c(NA, cumsum(value[-length(value)]) / rep(3, length(value)-1)),
   by = .(group)]
#    group value       avg
# 1:   AAA    10        NA
# 2:   AAA    15  3.333333
# 3:   AAA    12  8.333333
# 4:   AAA    30 12.333333
# 5:   AAA    11 22.333333
# 6:   BBB    20        NA
# 7:   BBB    25  6.666667
# 8:   BBB    22 15.000000
# 9:   BBB    17 22.333333


--

--","R_Language"
"504","M.1513777110.A.98F","menghsuanliu","問題","在dataframe中抓取前n筆的值做平均",2017-12-20 21:38:28,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個Dataframe,以第一欄做group by, 第二欄的值做前三筆的平均,然後把值寫在第三欄


[程式範例]:
dataframe (AS-IS)
        group   value
1       AAA     10
2       AAA     15
3       AAA     12
4       AAA     30
5       AAA     11
6       BBB     20
7       BBB     25
8       BBB     22
9       BBB     17
.......
(TO-BE)
        group   value   avg
1       AAA     10      na
2       AAA     15      3.33    10/3
3       AAA     12      8.33    (10+15)/3
4       AAA     30      12.33   (10+15+12)/3
5       BBB     11      na
6       BBB     20      3.67    11/3
7       BBB     25      10.33   (11+20)/3
8       BBB     22      18.67   (11+20+25)/3
9       BBB     17      21.67   (20+25+22)/3




[環境敘述]:
R 3.3.3
R Studio 1.0.143

--","R_Language"
"505","M.1513772988.A.65A","newns","問題","救救新手,無法匯入excel檔",2017-12-20 20:29:43,NA,NA,"已經安裝程式套件""Rcmdr""

在R console輸入""library(Rcmdr)""

開啟R commander，點選資料->匯入資料->按OK後

在學校用的時候會出現一個資料夾可以選excel檔案啊...

可是我在家裡電腦用完全沒反應...

R console顯示:

 in structure(.External(.C_dotTclObjv, objv), class = ""tclObj"") :
  [tcl] list element in braces followed by ""{""所有檔案"""" instead of space.

請問這到底是...

R新手現在作業寫不出來焦慮中...


--","R_Language"
"506","M.1513686922.A.982","celestialgod","公告","Re: R板新板規",2017-12-19 20:35:18,NA,NA,"禁止刪文規範已經上路三個月有餘

現在將禁止刪文的規定正式納入板規之中

----------------------------------------

本板板規採累進制初犯：警告一次再犯：水桶一周累犯：水桶加倍上述處罰適用於下列七類文類一．禁空白/過短文過短文乃指二行以下文（含二行）或未滿２０字文，符前述任一要件者．
　　煩請善用""推薦文章功能""（將游標對著欲推之文或其內按大寫半型X）二．不明文不明文仍指意義不明，致使他人產生閱讀障礙之注音文、火星文或
    不當之重覆推文等內容三．謾罵文（含推文）含有挑釁、辱罵、毀謗、人身攻擊或流於非理性討論者四．政治文/與本板無關廣告文等偏離看板主旨文請張貼與本板相關文章五．非板主人員使用公告po文時之文章種類請勿選""[公告]""，
　　另如[么告][公吉]等混淆視聽之標題亦不得使用。六．未經作者同意擅自轉錄他人作品無論由本板轉文或者轉文來本板，請先經過作者同意。七．清空文章無論是否有得到板友回答，不得自行清空文章
    要刪除文章，請寄信給板主，並說明刪文原因以下為特殊違規從重處置（可越級處置，如不給予警告直接水桶及給予劣文處置）八．惡意擾亂板上秩序如惡意轉文、鬧板、洗板或違反板規情節重大者皆包含在內。

以上板規若有未盡事宜，板主隨時保有對板規解釋權及修改權．2017/12/19 celestialgod/andrew43/cywhale--","R_Language"
"507","M.1513680075.A.B2A","ruokcnn","問題"," for loop 轉成 apply 寫法",2017-12-19 18:41:04,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)



[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)



[問題敘述]:

為了要做RNN整理table的時候寫了一個for loop

核心大概長這樣



for(i in 21:(nrow(a))){    #a是含所有變數的table

b <- a %>% select(varname[j]) #一次挑一個變數整成(row , steps)

c <- rbind(c,b[(i-20):i,]) #time stpes = 20
}


後面再用abind一層一層疊上去


但這個for loop不知道要怎麼用apply家族取代他（想說會不會快一些＋自我挑戰）

怎麼試都失敗

跪求大大開示

[程式範例]:

[關鍵字]:

apply

for loop

--

安藤抬頭一看，驀然發現長野傑克就坐在窗邊，
帶著魅力不減的自信笑容微笑招手著。
此時整棟房子的LED燈如夢幻般全數打開，
安藤的眼眶濕潤，閃閃映出幾個大字：
""Fuck all night""                              －《變態Ｘ假面的變態派對邀請》

--","R_Language"
"508","M.1513654287.A.4FD","IceBear","問題","聯合分析 教學",2017-12-19 11:31:25,NA,NA,"各位前輩們好

最近做報告雖然沒說一定要用R

但是我想試著用R來跑聯合分析

希望有經驗的版大能指教

[問題類型]:

程式諮詢


[軟體熟悉度]:

新手

[問題敘述]:

想利用R跑聯合分析

想詢問推薦的書 或 影片教學 中文優先

如果有版大分析過也麻煩指教..

[關鍵字]:

conjoint analysis


--","R_Language"
"509","M.1513615523.A.845","melodyheyhey","問題","dataframe使用ifelse將符合條件的print出",2017-12-19 00:45:20,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想只用ifelse函式將data frame 裡符合資料的印出[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題house = read.csv('D:/house.csv',header=TRUE,stringsAsFactors=FALSE)head(house)str(house)a=house$price
if(a>5000){
  print(a)
}


[環境敘述]:
R-3.4.2

執行結果如下：house = read.csv('D:/house.csv',header=TRUE,stringsAsFactors=FALSE)> head(house)price unit_price measure parking parking_price floor floor2 nfloor area1   545      35.86   15.20       0           0.0     5     25      5   A42  1568      41.42   37.86       0           0.0     6     36     12   A43  2100      34.80   53.20       1          16.9     2      4     11   A54   926      28.10   33.00       0           0.0     5     25      5  A115  1050      35.50   29.60       0           0.0     2      4      6  A116   750      42.47   17.66       0           0.0     2      4      3   A9room hall bath house_age date house_type season1    1    2    1      26.9 9903       公寓    Q12    3    2    2       5.9 9907       大樓    Q33    3    2    2       9.3 9907       大樓    Q34    3    2    2      26.2 9812       公寓    Q45    3    2    2      10.5 9902       大樓    Q1
6    2    2    1      36.7 9906       公寓    Q2> str(house)'data.frame':   2931 obs. of  16 variables:
 $ price        : int  545 1568 2100 926 1050 750 1180 1416 4110 1295 ...
 $ unit_price   : num  35.9 41.4 34.8 28.1 35.5 ...
 $ measure      : num  15.2 37.9 53.2 33 29.6 ...
 $ parking      : int  0 0 1 0 0 0 0 0 1 0 ...
 $ parking_price: num  0 0 16.9 0 0 ...
 $ floor        : int  5 6 2 5 2 2 2 14 9 3 ...
 $ floor2       : int  25 36 4 25 4 4 4 196 81 9 ...
 $ nfloor       : int  5 12 11 5 6 3 3 16 14 5 ...
 $ area         : chr  ""A4"" ""A4"" ""A5"" ""A11"" ...
 $ room         : int  1 3 3 3 3 2 2 3 2 2 ...
 $ hall         : int  2 2 2 2 2 2 2 2 2 2 ...
 $ bath         : num  1 2 2 2 2 1 1 2 2 1 ...
 $ house_age    : num  26.9 5.9 9.3 26.2 10.5 36.7 35.5 11.2 3.9 26.5 ...
 $ date         : int  9903 9907 9907 9812 9902 9906 9907 9905 9907 9811 ...
 $ house_type   : chr  ""公寓"" ""大樓"" ""大樓"" ""公寓"" ...
 $ season       : chr  ""Q1 "" ""Q3 "" ""Q3 "" ""Q4 "" ...> a=house$price> if(a>5000){+   print(a)
+ }
Warning message:
In if (a > 5000) { : 條件的長度 > 1，因此只能用其第一元素
>


謝謝大家∼∼


[關鍵字]:選擇性，也許未來有用--","R_Language"
"510","M.1513582249.A.224","andrew43","問題","(救回) 找出佩服數",2017-12-18 15:30:45,NA,NA,"原文已被版友以編輯原文的方式技術性自刪，似乎得到協助立馬自刪，明顯違背板規。
為維持看板整齊又不違背禁止自刪的規則，手動救回。
希望這類「技術性自刪」不要再發生。


 作者  TwIsAcountry (台灣國)                                 看板  R_Language
 標題  [問題] 找出佩服數
 時間  Mon Dec 18 14:45:48 2017
───────────────────────────────────────


[問題類型]:

程式諮詢(我想用R 找出1~n的佩服數 但卡在不知道怎麼從向量一個一個抽出因數檢驗)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
找出1~n的佩服數

佩服數的定義是自已所有的因數加上自己本身後扣掉2倍的某個因數後會等於自己本身

EX:20是佩服數 因為20的因數為:1 2 4 5 10 20
(1+2+4+5+20)-2*1=20*2
我卡在不知道怎麼讓他一個一個減減看
[程式範例]:


div <- function(a){
  divNumberlist <- c()
  for (b in 1:ceiling(a/2)){
    if (a%%b == 0){
      divNumberlist <- c(divNumberlist,b)
    }
  }
  divNumberlist

  }





AdmirableNumber <- function(a){
  AdmirableNumberlist<-c()
  for(b in 2:a){
    for(i in 1:length(div(a)))

    if((sum(div(b))))+b-2*div[i]==2b){

      AdmirableNumberlist<-c(AdmirableNumberlist,b)
    }
  }

}
{
  AdmirableNumberlist
}

--","R_Language"
"511","M.1513500466.A.53B","monkeygo66","問題","用R來分析粉專facebook文章的心情符號",2017-12-17 16:47:43,NA,NA,"小弟想用R語言來分析facebook粉專上的文章
像是分析近1000篇文章中的最多讚的文章
或是最多評論與最多分享的文章小弟都可以分析了
唯獨前一陣子才出來的心情符號系統不知道怎麼加入統計內
小弟還想要分析出近1000篇文章中最多笑或愛心或哭哭等等的數據
不知道有沒有大神可以指導一下
謝謝

--","R_Language"
"512","M.1513353828.A.AA6","Esmelee","問題","要怎麼把自己的app弄進shiny server裡",2017-12-16 00:03:46,NA,NA,"文章分類提示:
- 問題: 把app弄進ubuntu的shiny server裡

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
不知道要怎麼把檔案丟進server的資料夾裡
已經成功用rstudio server成功執行過
最後就是要移動到shiny的資料
但不知道到怎麼弄...

[程式範例]:

[環境敘述]:
aws es2 Ubuntu Server 16.04 LTS (HVM), SSD Volume Type
r 3.4.3
shiny server

[關鍵字]:
shiny server ubuntu aws es2

--","R_Language"
"513","M.1513259610.A.B08","angel50732","問題","資料配對",2017-12-14 21:53:27,NA,NA,"以下簡述資料格式
第一份Data：
座號 名字 內容                        日期
1       Amy 第一次數學成績     2017/1/3
2       Tom 第一次英文成績     2017/1/4
3       Ken  第二次數學成績     2017/2/3

第二份Data：
                       1Amy   2Tom   3Ken
日期                成績   成績   成績
2017/1/3         80        56      30
2017/1/4         95        80      75
2017/2/3         66        84      80


我想做的事如下：
1. 先從第一份Data搜尋 “內容”字串中的“第一次數學”
2. 接著在將其對應的座號名字與日期做配對對應
3. 最後再將每一個配對出的資料帶進第二份Data，然後找出對應的日期＋做好名字 下的
數字陳列出來   (因為有很多，所以希望是以矩陣陳列)

舉例來說，
我想要所以有內容中有“第一次數學”的人→成績
所以過程可能是，
內容“第一次數學”→Amy 1 2017/1/3 → 到第二份Data→ 把 Amy 1 2017/1/3 所屬的
成績陳列出來，在此例子下為80

上述是我想要跑出資料的想法，但在轉換成字串後我就無從下手了，請求大家的做法及想
法，先謝謝大家！




--","R_Language"
"514","M.1513176203.A.4BD","nina8598","問題","移除WordNet以外的字",2017-12-13 22:43:20,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來



[軟體熟悉度]:
新手


[問題敘述]：

小妹最近在做資料清理
但資料來源是社群網站的留言，所以有很多不同的語言和沒有意義的詞

我已經把非英文的字刪掉了，如下方程式碼 (files是指多個txt檔)
for (i in 1:length(files)) {
  files[[i]] <- gsub('[^ -~]', '', files[[i]])    # remove non-English
}

wordcorpus <- Corpus(VectorSource(files))  #形成我的語料庫

但還是有詞是由英文字母組成的其他國家文字留著(例如德文Spielzeug、波蘭文Zabawki
…)，或是留言者打錯字等無法意會的詞留著



因此我想用R的package “wordnet”
讓我的資料內容對應WordNet字典裡的詞，
只要不是屬於這字典裡面的詞就移除掉，
但我實在是不知道該怎麼做，想請問有高手可以解決嗎?
另外想請問如果要用這個方法要先把詞形還原嗎?如果需要又該如何做呢?

剩下的一般移除停止詞、數字、標點符號我都ok，
就剩這些問題需要解決，麻煩大家幫幫忙了謝謝~

--","R_Language"
"515","M.1513067330.A.C69","NBpoly","問題","在變數名稱前插入逗號",2017-12-12 16:28:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手

[問題敘述]:
手邊有一筆有一百多個變數 (X1, X2,...., X100) 的資料,
要寫成 c(""X1"", ""X2, ""X3"",..., ""X100"")的格式(當作reshape的參數)，
目前用names()叫出變數名稱，但得到的格式為
[1] ""X1""      ""X2""      ""X3""    ""X4""
[5] ""X5""      ""X6""      ""X7""    ""X8""

想請問版上高手有甚麼方法能把變數整理成個別用引號框起來再逗號分隔的格式，
感謝萬分!

--","R_Language"
"516","M.1513043882.A.69C","cywhale","分享","nrow, references and copies",2017-12-12 09:57:59,NA,NA,"還蠻讓我驚訝的，原來不能亂加 nrow(x)，要也得寫dim(x)[1]... XD

[關鍵字]:
R speed

[出處]:https://goo.gl/EhqsYZ[重點摘要]:
如果我沒會錯意，意思大概是
R 在決定是否在記憶體中複製一份物件，是依靠指向該物件的reference count是否增加
若增加，下一次的賦值便會執行copy後再賦值
nrow(x) 雖然底層是呼叫dim 但因為是function 所以reference to x 會增加
直接呼叫dim 是 R primitive 則不會...

如果呼叫nrow 下一步改變x中的值則會執行一次copy...
照範例code執行 並用tracemem, pryr::refs()看的確如此...
(若有誤解，請指正，謝謝！)

原文中範例使用nrow(), dim()[1] 在我電腦上跑，速度也是天差地遠...
這實在太雷了，以前並未注意，不知道各位還有沒有踩過什麼效能""雷""？^^

--","R_Language"
"517","M.1513002959.A.03F","asdfrtg","問題","想要把shiny的 sidebarPanel刪掉",2017-12-11 22:35:56,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
因為 sidebarPanel沒有東西想要把它去除
沒有去除會出現一個深色的矩形
把sidebarPanel()刪掉 會無法讀@@
不知道有甚麼方法可以解決這個問題
[程式範例]:


[關鍵字]:
UI
選擇性，也許未來有用


--","R_Language"
"518","M.1512913160.A.0E6","rusimida","問題","年份前後做比較",2017-12-10 21:39:17,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手
[問題敘述]:
目前跑統計需要比較某年份前與某年份後的數據圖,
data範例如下

年份 數量 體型 顏色
2001  5   10   15
2002  5   10   15
.
.
.

想要做出能夠比較2008年前跟2008年後的比較圖

[程式範例]:
不確定要用barchart還是boxplot,
目前只有先做資料篩選成功QAQ
abc=subset(a,year>2008)



請版上高手幫忙QQ  小妹明天要大考惹呀!!QAQ

--","R_Language"
"519","M.1512740158.A.938","rusimida","問題","怎麼只選兩個比較",2017-12-08 21:35:55,NA,NA,"[問題類型]:

程式問題https://i.imgur.com/njcr2Xi.jpg這是我們的考古題 題目是問說棲地類型跟主頻率的關係，可是中間還卡一個體型，試了
很多方法都是error


[軟體熟悉度]:
新手

[問題敘述]:

只想抓棲地類型跟主頻率出來比較
本來用t test 可是棲地類型有三個變數
就用不出來有想過用anova不過都會用到體型

[程式範例]:

記憶中code

C=aov(d$主頻率∼d$棲地類型，data=d)
Summary(C)

東西有跑出來只是不知道是對還錯的數字


[環境敘述]:

最新的R


[關鍵字]:

禮拜一就要用∼（期末考QaQ)


--","R_Language"
"520","M.1512700036.A.75A","circusbest","問題","時間序列資料篩選",2017-12-08 10:27:12,NA,NA,"[問題類型]:請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
資料型態為時間序列資料，如果再沒有篩選特定時間範圍資料之前，可以順利完成
dccfit，但如果篩選出特定時間範圍資料後，跑dccfit時，就會出現

Error in array(x, c(length(x), 1L), if (!is.null(names(x))) list(names(x),  :
  'data' must be of a vector type, was 'NULL'

[程式範例]:請把以下不需要的部份刪除原本可執行的程式碼為etfdatatest<-etfretgarchmode<-ugarchspec(variance.model =list(model = ""gjrGARCH"",garchOrder=c(1,1)),mean.model = list(armaOrder=c(1,0), arfima = FALSE),distribution.model = ""std"")y<-dccspec(uspec=multispec(replicate(ncol(etfdatatest), garchmode)),dccOrder = c(1,1), distribution = ""mvnorm"")z<-dccfit( y, data = etfdatatest, solver=c(""hybrid"", ""solnp""))但如果有篩選特定資料範圍時如
etfdatatest<-etfret[""2008-01-03/2008-12-31"",] 時 ，就會出現上面的錯誤
但如果是篩選特定欄時，卻又可以正常執行
etfdatatest<-etfret[,colnames(etfret) %in% colnames(tenmom)]

我在想是不是資料型態的問題

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"521","M.1512651014.A.9D4","BUQ","問題","data.table setnames 奇怪的現象 ",2017-12-07 20:50:11,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:
張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題

library(magrittr)
library(data.table)

dt1=data.table(type=c('aa','bb','cc'),class=c('01','02','03'),num=c(11,22,33))
dt2=dt1
setnames(dt2,'class','顆顆')
dt1 %>% colnames
dt2 %>% colnames

我在 setnames 改了dt2的colnames
但是 dt1的colnames 也被更改了
這是正常的嗎？

[環境敘述]:

R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:選擇性，也許未來有用data.table setnames--","R_Language"
"522","M.1512645210.A.6AB","banduna","問題","R studio 中的plots視窗沒作用",2017-12-07 19:13:27,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 心得: 當你自己想要分享經驗時，請使用這個類別。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:)
入門(寫過其他程式，只是對語法不熟悉))

[問題敘述]:
我今天使用R studio時在plots視窗（右下那個）中按了clean all plots
(就是那個刷子的圖示),結果再也沒辦法在那個視窗畫出圖了。
我解決的方法是用語法windows()重開視窗畫圖。
但我想畫ICC的圖,共15題,如果用我的方法,一次只能出現一條ICC
我想像之前一樣,用plots視窗,這樣就可以一次看一條ICC
而且,我也想要讓plots視窗可以有作用
不知如何做？感謝各位前輩



[程式範例]:


程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[環境敘述]:win7,R studio[關鍵字]:
R studio時在plots視窗無法使用選擇性，也許未來有用--","R_Language"
"523","M.1512392594.A.055","rn940111","問題","哪裡的R才是對的路徑？",2017-12-04 21:03:10,NA,NA,"[問題類型]:  版本安裝位置


[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)

[問題敘述]:

一般來說使用mirror下載的R.pkg 會安裝在  /Library/Framework/R.Framework/....

我安裝在這邊的版本是3.4.2

之前都是用遠端螢幕控制寫R，發現MacOS也能裝RStudio Server後就決定改用這個，

但是剛剛在安裝RStudio Server跟Hadoop的時候我是利用terminal下指令，

搞定了server之後發現RStudio吃的版本跟R GUI吃的版本不同

RStudio現在使用的是/usr/local/cellar/r/3.4.3，

也就是剛剛透過安裝server而指定的路徑

R GUI則是使用/Library/Framework/R.Framework/....

如果是在terminal開R，則是跟R GUI使用相同版本

在這之前RStudio跟R GUI使用的R版本與library路徑都相同，

但是現在兩者的路徑不同了。

（同時 3.4.2 無法判定Taipei時區，所以不能安裝某些包而使得R session出錯，

希望使用3.4.3！）

嘗試重新安裝R.pkg之後，RStudio的版本回歸正常，但是server版本仍為3.4.3




其實我不是很確定兩種路徑哪一種才是放在最正確的位置，

這樣我是應該選擇

1. 指定library的安裝與讀取路徑到原本的/Library/Framework/R.Framework/...
   並且讓RStudio固定使用/usr/local/bin/R的版本（往後必須注意更新路徑）

2. 把library的所有東西複製到/usr/local/lib/R/library下，
   並且往後固定把R安裝在這，讓RStudio以後都在這裡執行（以後別使用pkg安裝）

3. 改變RStudio的讀取路徑，並且把3.4.3的版本放到3.4.2之路徑下，
   往後不使用terminal進行安裝（不確定是否會使得RStudio Server失效）


3的實際作法正在尋找中，但感覺應該是相對不實際的作法



[環境敘述]:

MacOS x64  (High-Sierra)

R version 3.4.3 / 3.4.2


--","R_Language"
"524","M.1512274551.A.EC9","a83912a","問題","等深分箱法",2017-12-03 12:15:49,NA,NA,"最近老師上課有提到分箱法
有等寬、等深分箱法
他是要取 CSV 檔的欄位去算
等寬分箱法已經知道怎麼使用
就是先讓數值排序    接著算出最大最小值
然後在分成要的等分  就可以用 cut 分群出來

但是等深卻一直用不出來
等深是用資料的數量
但是用 cut , split 都沒有辦法
最後還是用迴圈去寫
但是感覺這就不是真正的方法

想請問有高手能教教剛入門的菜鳥嗎
謝謝各位

--","R_Language"
"525","M.1511973716.A.69E","d19970419",NA,"請問有人知道"" ' ""符號在R有什麼意義嗎",2017-11-30 00:41:03,NA,NA,"因為我想定義yp'=expression( )
我以為只要打出expression裡面的式子就好了可是R一直跳出要我繼續加點什麼函式
請問  ' 在R是什麼函式嗎
那我又該打什麼呢
因為是初學還不懂那麼多


-----
Sent from JPTT on my Sony F3115.

--","R_Language"
"526","M.1511946530.A.383","HumuHumu","問題","setwd()至網路儲存空間",2017-11-29 17:08:47,NA,NA,"如題

我有使用一個NAS平台，假如IP叫做140.114.12.34好了

我想請問如用把工作目錄改到該IP下呢?

我使用setwd(""//140.114.12.34/"")會一直出現

Error in setwd(""//140.114.12.34/"") : cannot change working directory

--","R_Language"
"527","M.1511863306.A.78D","tony1331","問題","迴歸交互作用問題",2017-11-28 18:01:43,NA,NA,"[問題類型]:
我想用R 做某件事情，但是我不知道要怎麼用R 寫出來


[軟體熟悉度]:
沒寫過程式，R 是我的第一次

[問題敘述]:
我想跑回歸的交互作用，跑出來會有2個變數的個別係數和交乘項的係數，請問有什麼方法可以只跑交乘項的係數，不要跑個別的，
因為這樣結果會被影響，謝謝!

[程式範例]:
lm(y~a*b,data=X)
這個會跑出a,b個別係數

-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"528","M.1511841816.A.04E","HumuHumu","問題","rstudio server中的runGithub",2017-11-28 12:03:34,NA,NA,"如題，我自己架了一個rstudio server在Ubuntu 16.04的環境上

然後我在我的windows電腦連線上rstudio server後，想要使用shiny中的runGithub這個function

可是因為runGithub這個function它會從Github上下載一個master.tar.gz檔，但是Ubuntu似乎因為權限問題不給我下載這個檔案，所以這個function都無法正常執行

我想問說有沒有什麼辦法是可以給我的使用者帳戶權限，讓它允許下載檔案到Server上的呢

--","R_Language"
"529","M.1511770689.A.627","ruokcnn","問題","對照另一個matrix來補NA值",2017-11-27 16:18:02,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:


有兩個matrix/dataframe

row/column一樣, 但兩個是不同變數所以值不同

一個有NA值

另一個是完整的

想讓a的na值對照在b同樣row/column底下的值去補

目前寫法就是最洨慢的用兩層for loop包

在一個一個對應

想知道比較快的寫法

或者其實他可以用apply家族包但我還未參透


[程式範例]:

for(i in 1:nrow(a)){
for(j in 1:ncol(a)){
if(is.na(a[i,j])) b[i,j] else a[i,j]}
}


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--作者seacore07 (海角7號)看板Gossiping標題[問卦] 異性戀的男生跟女生 真的有純友誼嗎？時間Thu Dec  8 10:55:50 2016→ VVizZ: 有阿 我跟我老婆--","R_Language"
"530","M.1511576182.A.157","angel50732","問題","先對字串中的字，後續再跑不同的程式",2017-11-25 10:16:19,NA,NA,"大家好，我想詢問一個關於先選字再跑程式的問題
意思大概如下：
我身高高於.....
你體重高於.....
他身高低於.....
她體重低於.....
牠身高等於.....

根據上述可以分成身高，體重，高於，低於，等於
我想做的事是：字串分成五類再跑程式
1.身高＋高於會跑一種程式；
2.身高＋低於；3.身高＋等於；4.體重＋高於；5.體重＋低於；
每種都會去跑一種程式(後續這個程式我會寫)
但要去區分前面的條件我不知道要怎麼做

據說python有這種一個字對一個字的程式功能，不知道R有沒有？

--","R_Language"
"531","M.1511368335.A.95B","x9060000456","問題","Google play 評論所有爬蟲(Crawler)",2017-11-23 00:32:12,NA,NA,"- 問題:
各位大神前輩大大們好, 問題如下:
Google play '所有'評論抓取疑問,
想爬取如下圖之'所有'評論https://imgur.com/a/zpxnf[問題敘述]:
Google play 中用戶對於 APP 的評論,
Google限制只能抓取前40筆,
參照 stack overflow 的 script後,
卻不能如期抓取任何內容.
另外, 發現 Google 找尋其他方法時,
Python的大多解法, 最多可以抓取500評論,
但依循其想法, 在 R 的 script 中,
Request refer 卻怪怪的,
故特此懇求版上的大大能指點迷津!


[程式範例]:

library(httr)
library(stringr)

baseUrl <- 'https://play.google.com/store/getreviews?authuser=0'urls <-
'https://play.google.com/store/apps/details?id=com.gravity.ro.and&hl=zh-TW'dataJson <- GET(baseUrl, add_headers(Referer = urls, 'accept' = '*/*',
'accept-encoding' = 'gzip, deflate, br',
'accept-language' = 'en-US,en;q=0.9,zh-TW;q=0.8,zh;q=0.7',
'content-type' = 'application/x-www-form-urlencoded;charset=UTF-8',
'user-agent' = 'Mozilla/5.0 (Windows NT 6.3; Win64; x64)
AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36')) %>%
content %>% as.character

## 發現https://play.google.com/store/getreviews?authuser=0'並無此網址
dataJson

[關鍵字]:
Google play, Crawler, 爬蟲

非常感謝各位大大!

--","R_Language"
"532","M.1511273025.A.E6E","d19970419","問題","如何用R解二階微分方程",2017-11-21 22:03:39,NA,NA,"我想用R解RLC電路的二階微分方程
可是不知道該如何寫
我是想用dI<-function(t){ }的方法寫
不知道有沒有高手可以幫我解答的

-----
Sent from JPTT on my Sony F3115.

--","R_Language"
"533","M.1511235398.A.6B2","qazwsx879345","問題","用戶端輸入資料",2017-11-21 11:36:34,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

想要在SHINY 讓使用者可以輸入數字/選擇變數

做到類似改變回歸式參數的東西

例如現在是 3x1+5y1=12

可以讓使用者改變3、5 或是改變x1 y1

而程式幫她做到算結果出來

想要紀錄是因為有後續讓使用者自己修改 維護的問題

另外想要的是 下次打開來 會自動記憶最新的結果

目前想到的是可能將輸入的結果匯出成一個excel

再在程式中去讀那個excel的內容

但不知道有沒有方法/函式 可以實行

(主要是不知道怎麼讓用戶端輸入的textinput的值可以匯出至excel

另外也還不確定這個想法是否可行

還請各位大大解答 謝謝大家

[程式範例]:[環境敘述]:R 3.3.3 SHINY[關鍵字]:用戶端資料匯出及匯入--","R_Language"
"534","M.1511095463.A.CFD","asdfrtg","問題","",2017-11-19 20:44:20,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
在電腦系統還原之後想要更新之前shiny的作品上傳至shinyapps.io
但是卻無法更新https://imgur.com/a/BDcuc/
s
[環境敘述]:
安裝shiny 及devtools
執行
devtools::install_github('rstudio/shinyapps')
devtools::install_github('rstudio/rscrypt')
[關鍵字]:

shiny  重新佈署
選擇性，也許未來有用




--","R_Language"
"535","M.1510903800.A.010","andrew43","問題","Re: data.frame依欄位順序轉成樹狀lists",2017-11-17 15:29:58,NA,NA,"不用刻輪子喔。這裡簡單地把你的例子用 package data.tree 解析。
library(data.tree)
library(data.table)
library(magrittr)

dt <- fread('A B C D
a1 b1 NA NA
a2 b2 cx1 NA
a2 b2 cx1 dxx
a2 b2 cx2 NA
a3 b3 cx3 dx1
a3 b3 cx3 dx2
a4 b4 cx4 dx3')

# append a column to describe terminals
dt[, pathString := paste(""theRoot"", A, B, C, D, sep = ""/"")]

# convert data frame to a tree
dt.tree <- as.Node(dt)
dt.tree
#              levelName
# 1  theRoot
# 2   |--a1
# 3   |   °--b1
# 4   |       °--NA
# 5   |           °--NA
# 6   |--a2
# 7   |   °--b2
# 8   |       |--cx1
# 9   |       |   |--NA
# 10  |       |   °--dxx
# 11  |       °--cx2
# 12  |           °--NA
# 13  |--a3
# 14  |   °--b3
# 15  |       °--cx3
# 16  |           |--dx1
# 17  |           °--dx2
# 18  °--a4
# 19      °--b4
# 20          °--cx4
# 21              °--dx3

plot(dt.tree)
# seehttps://imgur.com/a/zja70# convert tree to a list
dt.tree.list <- as.list(dt.tree$root)
dt.tree.list$a1
dt.tree.list$a1$b1※ 引述《cywhale》之銘言：: [問題敘述]:: 想得到依欄位展開的樹狀結構list，且在leaf nodes 保留 names of leaf nodes: 嘗試了幾次沒有得到很好的結果，以下是最接近的方式，想請教~: library(data.table): library(magrittr): dt <- fread('A B C D: a1 b1 NA NA: a2 b2 cx1 NA: a2 b2 cx1 dxx: a2 b2 cx2 NA: a3 b3 cx3 dx1: a3 b3 cx3 dx2: a4 b4 cx4 dx3'): out <- dt %>% split(.$A) %>%:   lapply(function(x):     lapply(split(x, x$B), function(y):       lapply(split(y, y$C), function(z) {:         sapply(z$D, function(u) {:           if (is.na(u)) return(names(u)):           list(u)}):       }))): out: #================以下輸出結果: $a1: $a1$b1: named list() #這是錯的結果，想得到""b1"": $a2: $a2$b2: $a2$b2$cx1: $a2$b2$cx1$<NA> #這是錯的結果 到$cx1 即停止: NULL ##這是錯的結果 ，想得到""cx1"": $a2$b2$cx1$dxx: $a2$b2$cx1$dxx[[1]]: [1] ""dxx"" ##這是對的結果，留下name of leaf node: $a2$b2$cx2: $a2$b2$cx2$<NA>  #這是錯的結果  到$cx2 即停止: NULL  #這是錯的結果 ，想得到""cx2"": $a3: $a3$b3: $a3$b3$cx3: $a3$b3$cx3$dx1: [1] ""dx1"" ##這是對的結果: $a3$b3$cx3$dx2: [1] ""dx2"" ##這是對的結果: $a4: $a4$b4: $a4$b4$cx4: $a4$b4$cx4$dx3: [1] ""dx3"" ##這是對的結果: 如上結果，我想得到依欄位ABCD 展開的樹狀結構list，所以用了split: 可以正確地依階層順序展開 ($A -> $B -> $C -> $D): 而且想在leaf nodes 保留 names of leaf nodes: 比如 $a3$b3$cx3$dx1 [1] ""dx1"" 這是對的結果: 但 像後面有NA 的node 在 split 時就會被拋棄，因此我得不到node名: 我希望得到: $a1$b1: [1] ""b1"": $a2$b2$cx1: [1] ""cx1"": $a2$b2$cx2: [1] ""cx2"": 不知道有無解法？謝謝~~: (附註，上面a1, b1, c1 字母和數字均為範例無意義，真實資料中為任意字串，請勿依數: 字規則來當作程式一部分，僅是舉例）","R_Language"
"536","M.1510751995.A.C6A","celestialgod","問題","Re: 根據條件刪除資料",2017-11-15 21:19:52,NA,NA,"※ 引述《Whatfor (Live for what?)》之銘言：: 大家好，: 我是R的新手，: 下列問題若過於簡單請多包涵~~: 目前有資料如下:: A       B       C       D       E       F: 1       96      1       NA      NA      3: NA      NA      NA      NA      96      NA: 1       0       1       0       1       2: A~F是欄位名稱，: 我想把只要A~F中有96者的紀錄整筆刪除，: 指令下這樣:: d<-data[!(A==96|B==96|C==96|D==96|E==96),]: 可是跑不出正確的筆數，: 想請問這樣寫是否哪邊要更正?: 或有其他寫法，: 謝謝大家~讀入資料：

library(data.table)
DT <- fread(""A       B       C       D       E       F
1       96      1       NA      NA      3
NA      NA      NA      NA      96      NA
1       0       1       0       1       96   "")

# 一般解法：

DF <- copy(DT)
setDF(DF)
idx <- Reduce(`&`, lapply(names(DF)[1:5], function(c) DF[[c]] != 96))
DF[idx, ]
#   A B C D E  F
# 3 1 0 1 0 1 96

# dplyr 解法

library(dplyr)
tbl <- tbl_df(DT)
filter_(tbl, .dots = paste0(LETTERS[1:5], ""!='"", 96, ""'""))
# # A tibble: 1 x 6
#       A     B     C     D     E     F
#   <int> <int> <int> <int> <int> <int>
# 1     1     0     1     0     1    96

# data.table解法

DT[ , removeRow := Reduce(`|`, lapply(.SD, `==`, 96)), .SDcols =
names(DT)[1:5]]
DT2 <- DT[removeRow == FALSE][ , removeRow := NULL]
#    A B C D E F
# 1: 1 0 1 0 1 2

--","R_Language"
"537","M.1510738028.A.FCE","HumuHumu","問題","Re: 根據條件刪除資料",2017-11-15 17:27:05,NA,NA,"※ 引述《Whatfor (Live for what?)》之銘言：: 大家好，: 我是R的新手，: 下列問題若過於簡單請多包涵~~: 目前有資料如下:: A       B       C       D       E       F: 1       96      1       NA      NA      3: NA      NA      NA      NA      96      NA: 1       0       1       0       1       2: A~F是欄位名稱，: 我想把只要A~F中有96者的紀錄整筆刪除，: 指令下這樣:: d<-data[!(A==96|B==96|C==96|D==96|E==96),]: 可是跑不出正確的筆數，: 想請問這樣寫是否哪邊要更正?: 或有其他寫法，: 謝謝大家~可以用apply找出哪些row含有96，然後去掉這些row

可能有其他版友有更好的方法也可以分享一下https://pastebin.com/wEMeEY1w你那樣的寫法必須要先定義ABCDE是什麼東西 不然他會顯示沒有這個物件

或是要用data$A才能正確的判別A是data這個data.frame裡面的一個欄位

d<-data[!(data$A==96|data$B==96|data$C==96|data$D==96|data$E==96),]

或是先

attatch(data)

再

d<-data[!(A==96|B==96|C==96|D==96|E==96),]

才可以抓到ABCDE這些物件

還有一種方法是用with

with(data,data[!(A==96|B==96|C==96|D==96|E==96),])

還有一個資料整理神器dplyr 但這我不常用

library(dplyr)
filter(df,A!=96,B!=96,C!=96,D!=96,E!=96)

以上
--","R_Language"
"538","M.1510737606.A.0DD","Whatfor","問題","根據條件刪除資料",2017-11-15 17:20:03,NA,NA,"大家好，
我是R的新手，
下列問題若過於簡單請多包涵~~

目前有資料如下:
A       B       C       D       E       F
1       96      1       NA      NA      3
NA      NA      NA      NA      96      NA
1       0       1       0       1       2

A~F是欄位名稱，
我想把只要A~F中有96者的紀錄整筆刪除，
指令下這樣:
d<-data[!(A==96|B==96|C==96|D==96|E==96),]
可是跑不出正確的筆數，
想請問這樣寫是否哪邊要更正?
或有其他寫法，
謝謝大家~

--","R_Language"
"539","M.1510672614.A.446","puppy77","問題","Shiny runExample結果connection refused",2017-11-14 23:16:52,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

我使用公司電腦執行

library(shiny)

runExample(""01_Hello"")

結果網頁打開顯示Connection refused

Console只顯示 Listening onhttp://127.0.0.1:XXXX(每次重開R跑出來的host都不一樣)

因為版權問題不能使用RStudio 是直接在R(版本3.3.3)上執行

另公司電腦應該是虛擬環境 座位上無主機只有一個黑色盒子連到公司主機

是否可能是因為虛擬環境所造成

想詢問公司IT也不知道應該要問什麼 而且IT不會使用R

不知是否有人碰過相同的情況

或是覺得有可能是哪邊出了問題

或是能給我一點建議應該要詢問IT什麼問題....

謝謝


[程式範例]:

library(shiny)

runExample(""01_Hello"")


[環境敘述]:

Window7 x64

R x64 3.3.3


[關鍵字]:

Shiny connection refused

--","R_Language"
"540","M.1510668228.A.C35","ewmm","問題","求助R與Latex中文呈現問題  致贈500元",2017-11-14 22:03:43,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點（選擇性）。- 心得: 當你自己想要分享經驗時，請使用這個類別。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時。[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
[軟體熟悉度]:
使用者(已經有用R 做過不少作品)
[問題敘述]:
我的電腦是Mac OS Sierra
（1）我想用R軟體的ggplot2繪圖，並用gridExtra套件輸出於pdf檔
如果圖中沒有中文，完全沒問題。如果圖中有中文（例如標題有中文），則無法顯示或出現錯誤訊息
我想用中文楷體
已在電腦內安裝”Kaiti TC”
但始終無法正確印出
聽說裝Macport，Cairo可解決，但我一直無法成功https://groups.google.com/forum/#!topic/r-sig-mac/7IrhMr1K264（2）
另外一個問題是Latex中文問題
我是用TeXStudio
我可以打英文文件，做英文beamer
也可打簡單的中文文件，可用楷體
但嘗試做中文beamer，卻始終無法成功（沒有選擇字體）

如果有人能跟我在台大附近碰面，幫我解決這兩個問題
我請您喝杯茶吃點心，致贈500元新台幣
我方便的時間：週六白天或週日下午，台大新生南路對面或巷子內的餐廳
請留聯絡方式



[程式範例]:
R程式碼

#rm(list=ls())
library(ggplot2)
library(gridExtra)
df1<-data.frame(x=1:2, y=3:4, z=5:6)
#p1<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""test1"")
#p2<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""test2"")
p1<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""測試"")  #Chinese title
p2<-ggplot(df1, aes(x=x, y=y))+geom_line()+ggtitle(""中文"")  #Chinese title
p1<-p1+theme(text = element_text(family = ""Kaiti TC""))
p2<-p2+theme(text = element_text(family = ""Kaiti TC""))

p<-array(list(NA), dim=2)
p[[1]]<-p1
p[[2]]<-p2
p_series <- lapply(1:(length(p)), function(.x) p[.x][[1]])
m2 <- marrangeGrob(p_series, nrow=2, ncol=1)
ggsave(""test_plot_chinese.pdf"", m2)


R錯誤訊息
""Saving 7.47 x 5.15 in image
Error in grid.Call.graphics(L_text, as.graphicsAnnot(x$label), x$x, x$y,  :
  invalid font type
In addition: There were 50 or more warnings (use warnings() to see the first 50)""


[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.12.6 (Sierra)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

loaded via a namespace (and not attached):
[1] tools_3.3.1

[關鍵字]:選擇性，也許未來有用--","R_Language"
"541","M.1510647221.A.690","asdfrtg","問題","shiny disconnected from server",2017-11-14 16:13:37,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)



[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
建立shiny sever 之後 也把文件deploy，並把需要用到的資料上傳到雲端
可是在running的時候出現沒連接的狀況

[程式範例]:https://ideone.com/sFAGcQ[關鍵字]:

shiny server
選擇性，也許未來有用


--","R_Language"
"542","M.1510583950.A.58C","Edster","問題","Abbreviated weekday name 用英文縮寫?",2017-11-13 22:39:07,NA,NA,"[問題敘述]:

strftime(ISOdate(2017,11,13), ""%a"")
我想要呈現""Mon"", 可是跑出的卻是 ""週一"". 電腦環境如下(中文OS)：
困擾好久, 用英文查過卻沒有, 不知如何用中文查.

[環境敘述]:> sessionInfo()R version 3.4.2 (2017-09-28)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] magrittr_1.5

loaded via a namespace (and not attached):
[1] compiler_3.4.2 tools_3.4.2
>

[關鍵字]:選擇性，也許未來有用--","R_Language"
"543","M.1510548730.A.C35","chauFayJai","問題","安裝ROpenCVLiter的問題",2017-11-13 12:52:08,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我照網站上面的步驟安裝，然後出現了這個問題。https://i.imgur.com/6CfuzrE.jpg--","R_Language"
"544","M.1510419861.A.1CC","s3714443","問題","讀取資料的時候如何固定column數？",2017-11-12 01:04:18,NA,NA,"各位好
今天我有一筆資料 是空白分隔的

資料原始型態




11   22   33   44   55   66
11   22   33   44   55   66  77  88  99
11   22   33   44   55   66  77  88  99  00


固定6行

V1   V3   V4   V5   V6   V7
11   22   33   44   55   66
11   22   33   44   55   66
77   88   99   NA   NA   NA
11   22   33   44   55   66
88   99   00   NA   NA   NA

有辦法用這個方式把檔案讀進來嗎？
研究了很久都沒辦法
搜尋關鍵字「read text in fixed cols」也沒有
有看到read.fwf 但也不適合
請各位大神幫幫忙
感恩感恩

範例檔在這
我想用16個col讀進來
但是到最後都會變22

感謝各位https://goo.gl/VTiXn5--","R_Language"
"545","M.1510412152.A.C22","psinqoo","問題","Re: 用system功能送job給cluster ",2017-11-11 22:55:50,NA,NA,"我最近也用到 從R 下 system cmd

用R  paste0 system 指令 裡面不能斷行

太長的 先 paste0 把命令斷成 2個  然後再拼※ 引述《hkopee123 (..)》之銘言：: [問題敘述]:: 我有個R script長這樣: 檔名是 Rcode.r: 裡面包含: system (paste (""qsub /path/test.sh"", sep=""""), ignore.stdout=T, wait=T ): q(""no""): 我想使用這個 R script 送 shell script job 給 cluster 執行: 我在 terminal 畫面打上: $ rR Rcode.r: 執行後卻出現 sh: qsub: command not found 的錯誤訊息: 當我在terminal進入R畫面: 直接打上一樣的 R script: > system (paste (""qsub /path/test.sh"", sep=""""), ignore.stdout=T, wait=T ): 我卻可以成功把job送出去: 並且執行完成: 我確定當我打$ qsub test.sh: terminal可以正常的送job出去: 但當我透過R 用system這功能送job時: 卻回覆command not found的錯誤: 為什麼會這樣呢??: ps. 我也試過: system (paste (""/usr/torque/bin/qsub /path/test.sh"", sep=""""),: ignore.stdout=T, wait=T ): 但一樣出現: sh: /usr/torque/bin/qsub: No such file or directory: [程式範例]:: [環境敘述]:: [關鍵字]::: 選擇性，也許未來有用:

--







--","R_Language"
"546","M.1510411155.A.C1C","tnzikom","問題","如何以逗號分割數字",2017-11-11 22:39:13,NA,NA,"已經google兩天還是不知道要怎麼寫
希望有版友可以解惑

我有一組資料如下：
ID.       Group
1.         2
2.         5
3.         35

目前想把35改成3,5，就是在兩個組別以上要用逗號分割，不知道應該怎麼寫呢?

明明很簡單但卻搞很久寫不出來QQ太廢

--","R_Language"
"547","M.1510376464.A.661","ciuhkimo","問題","ROC curve的X-Y軸的文字如何放大",2017-11-11 13:01:00,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 請問在用plot作圖時，如何把x-y軸的文字放大？試過legend, xlab, ylab，都不行。請把以下不需要的部份刪除程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
把X-Y軸文字放大

[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:XY軸上的文字放大*[m[程式範例]:請把以下不需要的部份刪除# Data preprocess and Variable designationfit1 <- glm ( y ~ x, data=dt, family= binomial)summary(fit1)# Loading the package requiredlibrary(pROC)# formula for multiple ROCprob1<-predict(fit1,type=c(""response""))dt$prob1 <- prob1g1<-roc(y~prob1, data =dt)# plotplot(g1, lty=1, col=""black"",lwd=8, main=“test”,cex=2,font=2)#legend(x=0.455,y=0.4,legend = “a”,col=""black"",lty=“1”, lwd=10, bty = ""n"", box.col=""red"", merge=TRUE)張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[環境敘述]:RStudio，R3.4.2[關鍵字]:選擇性，也許未來有用--","R_Language"
"548","M.1510307773.A.CF2","F0011010101","問題","dataframe資料隨機賦值",2017-11-10 17:56:10,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
小弟想請問一下,我想把資料框架中的資料以隨機的方式賦值為NA
但總覺得自己的方法效率不高,所以來版上請教大家
有沒有比較好的寫法
我自己的程式碼如下

[程式範例]:
nr <- 10000
nc <- 10
n <- nr*nc
data <- as.data.frame(matrix(rnorm(n),nrow = nr))

#方法1 可行,但總覺得效率不高
abc <- stack(data)
abc$values[sample(n, n/10)] <- NA
data2 <- as.data.frame(matrix(abc$values, nrow = nr))

#方法2 這個比較有瑕疵,不夠隨機,也無法控制總共有幾個NA值
data3 <- cbind.data.frame(
    lapply(data, function(x, n = rnorm(1, mean = nr/10, sd = nr^(1/4))){
        x[sample(nr,n)] <- NA
        return(x)
    })
)
sum(is.na(data3))

方法二中
雖然想避免讓每一行的NA數都固定
卻變得無法控制NA的總數
有點自己絆自己腳的感覺...
至於速度是比第一種快的


[環境敘述]:

[關鍵字]:

--","R_Language"
"549","M.1510214317.A.5AA","chauFayJai","問題","readJPEG的問題",2017-11-09 15:58:34,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
(沒寫過程式，R 是我的第一次）

[問題敘述]：
jpeg的套件都載好了
也library了
可是輸入
img <- readJPEG(""00.JPEG"")
他出現error：
Empty input file

然後file.info(""00.jpg"")後
全部的值都是NA

請問版上大神這個問題怎麼解決

--","R_Language"
"550","M.1509954610.A.457","tony1331","問題","把資料某欄 大於1 小於0的 令為NA",2017-11-06 15:50:07,NA,NA,"問題:
把資料某欄 大於1 小於0的 令為NAhttp://i.imgur.com/c3zBtv3.jpghttp://i.imgur.com/URDExKW.jpg請問大家這跑出來是什麼問題?
謝謝~

-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"551","M.1509937581.A.F3B","dp2046","問題","讀取csv檔如何不把資料讀到座標上?",2017-11-06 11:06:14,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
由於用文字不太好敘述
所以我直接把圖貼出來
這是我讀取的csv檔案中的表格https://imgur.com/DRxnQye然後這是用read.csv函式讀出的結果https://imgur.com/fooh6Io可以看到第一筆資料讀到表格的標題裡了
要怎樣才能讀出例如下面的結果？

         X
1     [data1]
2     [data2]
3     [data3]
4     [data4]
5     [data5]
6     [data6]

[程式範例]:
MyData <- read.csv(file=""/Users/guest/Desktop/xxx.csv"", header=TRUE, sep="","")

[環境敘述]:
R version 3.4.1 (2017-06-30)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

[關鍵字]:

csv, matrix, row, column

--","R_Language"
"552","M.1509298805.A.725","iambakr","問題","ggplot繪圖問題",2017-10-30 01:40:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一

[問題敘述]:
想呈現#程式2的圖形，用#程式1的方法寫卻怎麼也沒辦法上加紅色的線
想請問是哪裡出問題?

另想順便問一下，同樣都是ggplot程式
程式1跟程式2的差別在哪?
ggplot()+
ggplot(diamonds, aes(x=price)) +

[程式範例]:
# 程式1 (無法正確顯示)
ggplot()+
  geom_histogram(data = diamonds, aes(x=price), binwidth = 1000)+
  geom_density(y=density, color=""red"")

# 程式2 (正確顯示)
ggplot(diamonds, aes(x=price)) +
  geom_histogram(aes(y=..density..),binwidth = 1000) +
  geom_density(color=""red"")


謝謝各位先進

--","R_Language"
"553","M.1509032811.A.7DA","cywhale","問題","Re: 使用lmap::gdist找兩組資料最近點的錯誤",2017-10-26 23:46:49,NA,NA,"試試看這是不是你要的，沒有再試其他方法，可能有更快的解法..
如果不要那個 偵測 > 5 的criteria, 可以不要那些if else 直接回傳which.min

library(data.table)
library(Imap)

data <- fread('Lon Lat
100.7200 13.61500
100.6683 13.52000
100.5717 13.54500
100.5750 13.69333
100.5783 13.82333
100.3983 13.90833')

mindst <- function(i,x,y,criteria=NA) {

 y$id <- seq_len(nrow(y))
 if(!is.na(criteria)) {
   idx <- which(y$Lon<=x$Lon[i]+criteria & y$Lat<=x$Lat[i]+criteria)
   if (!any(idx)) {
     return(0L)
   }
   y <- y[idx,]
 }

 y$id[which.min(sapply(1:nrow(y),function(j) {
                    gdist(x$Lon[i],x$Lat[i],
                          y$Lon[j],y$Lat[j],
                          units = ""nm"",verbose = FALSE)} ))]
}

set.seed(123L)
temp <- data.table(Lon=100.0+sample.int(1000,size=1000, replace=T)/100,
                   Lat=10.0+sample.int(100,size=1000, replace=T)/10)

system.time(out1 <- sapply(1:nrow(data),mindst, x=data, y=temp))

system.time(out2 <- sapply(1:nrow(data),mindst, x=data, y=temp, criteria=5))

#> system.time(out1 <- sapply(1:nrow(data),mindst, x=data, y=temp))
#   user  system elapsed
#   0.86    0.00    0.86
#>
#> system.time(out2 <- sapply(1:nrow(data),mindst, x=data, y=temp, criteria=5))
#   user  system elapsed
#   0.41    0.00    0.40

#> out1
#[1] 289 289 289 289 326 326
#> out2
#[1] 289 289 289 289 326 326※ 引述《giock18 (小武)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有兩組經緯度座標，每組資料長得像這樣: data$Lon  data$Lat: 100.7200 13.61500: 100.6683 13.52000: 100.5717 13.54500: 100.5750 13.69333: 100.5783 13.82333: 100.3983 13.90833: 另一組稱為temp: temp$Lon & temp$Lat: 其中一組是參考地標的經緯度，另外一組是實際的軌跡: 我使用gdist來算出點和點之間的距離，並找最小值，: 也就是最靠近這個地標的點。: 因此我的程式碼這樣寫: for (i in nrow(data)){: closest<-which.min(gdist(data$Lon[i],: OFPdata$Lat[i],temp$LONGITUDE,temp$LATITUDE,units = ""nm"",verbose = FALSE) )}: 用迴圈的方式去找每個地標對應到的最靠近軌跡: which.min雖然有用，但是應該是因為原本lmap::gdist的設計是輸入單值，: 但我卻給他一欄資料，所以他會跳出警告如下，雖然程式還是可以work，: 但想知道有沒有更正確的寫法？:  Warning messages:: 1: In while (abs(lamda - lamda.old) > 1e-11) { ::   the condition has length > 1 and only the first element will be used: 2: In while (abs(lamda - lamda.old) > 1e-11) { ::   the condition has length > 1 and only the first element will be used: 另外，為了提升程式的效率，想要將軌跡與地標的計算迭代縮小成: 經度或緯度差5度以內的才計算，不知道有甚麼方法可以達成呢？: 我有在stackoverflow發問，原文網址如下:: https://stackoverflow.com/questions/46843802/find-the-nearest-point-using-lmapgdist-function: 先謝謝了: [環境敘述]:: R version 3.4.1 (2017-06-30): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): [關鍵字]:: lmap,gdsit,nearest point,closer point,經緯度距離--","R_Language"
"554","M.1509027623.A.1BF","giock18","問題","使用lmap::gdist找兩組資料最近點的錯誤",2017-10-26 22:20:20,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有兩組經緯度座標，每組資料長得像這樣
data$Lon  data$Lat
100.7200 13.61500
100.6683 13.52000
100.5717 13.54500
100.5750 13.69333
100.5783 13.82333
100.3983 13.90833

另一組稱為temp
temp$Lon & temp$Lat

其中一組是參考地標的經緯度，另外一組是實際的軌跡

我使用gdist來算出點和點之間的距離，並找最小值，
也就是最靠近這個地標的點。
因此我的程式碼這樣寫
for (i in nrow(data)){
closest<-which.min(gdist(data$Lon[i],
OFPdata$Lat[i],temp$LONGITUDE,temp$LATITUDE,units = ""nm"",verbose = FALSE) )}
用迴圈的方式去找每個地標對應到的最靠近軌跡

which.min雖然有用，但是應該是因為原本lmap::gdist的設計是輸入單值，
但我卻給他一欄資料，所以他會跳出警告如下，雖然程式還是可以work，
但想知道有沒有更正確的寫法？

 Warning messages:
1: In while (abs(lamda - lamda.old) > 1e-11) { :
  the condition has length > 1 and only the first element will be used
2: In while (abs(lamda - lamda.old) > 1e-11) { :
  the condition has length > 1 and only the first element will be used

另外，為了提升程式的效率，想要將軌跡與地標的計算迭代縮小成
經度或緯度差5度以內的才計算，不知道有甚麼方法可以達成呢？

我有在stackoverflow發問，原文網址如下:https://stackoverflow.com/questions/46843802/find-the-nearest-point-using-lmapgdist-function先謝謝了

[環境敘述]:
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:
lmap,gdsit,nearest point,closer point,經緯度距離

--","R_Language"
"555","M.1508950673.A.0B2","guitarbird","問題","始用R呼叫JAVA程式",2017-10-26 00:57:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
           我現在有一個JAVA程式 my.jar,希望在R處理完匯出資料後,使用my.jar接著
           執行後續步驟,因此想使用R code呼叫my.jar,這樣直接run R就可以直接處
           裡完,不用再手動執行java,有爬過文,rJava似乎可以做到,但是不太會用
           (我不會java,my.jar是另一位寫出來的,他不會R),請各位高手指教!

[程式範例]:

--","R_Language"
"556","M.1508922291.A.347","dogi2007","分享","DataCamp共用帳號徵求",2017-10-25 17:04:48,NA,NA,"各位大大好，

先感謝上次刊登的會員徵求資訊，我目前已經有一團順利開始運作！
這次主要是幫室友代徵，他們一直都有３個人共用帳號，因為很穩定所以都買年約，近期
要到期了，但有人要退出，所以託我來版上代徵
我們都是學生QAQ  窮窮的，知道共用帳號不是好事QAQ  但希望撐過就職前這階段
DataCamp 平台不會互相擋共線的 IP，三人共分＄＄

有興趣的請站內信！

--","R_Language"
"557","M.1508778708.A.23C","kevin850128","問題","快速設定多個變數",2017-10-24 01:11:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

小弟第一次發文，如有違反板歸請見諒

我想將匯入R的多個csv檔命名

如:m1 <- M00001.csv
   m2 <- M00002.csv
   .
   .
   .
   m695 <- M0000.csv

除了一個一個命名，有更快的方法嗎?

網路上找了好久，沒有找到類似的問題

麻煩各位高手解答了

[程式範例]:

[環境敘述]:

RSstudio

[關鍵字]:

變數命名

--","R_Language"
"558","M.1508750575.A.CBB","tony1331","問題","t.test問題",2017-10-23 17:22:52,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
(沒寫過程式，R 是我的第一次)

[問題敘述]:http://i.imgur.com/69qe83B.jpghttp://i.imgur.com/9cL6tUB.jpg我想把資料兩欄做t.test
兩欄都有NA值   長度也不一樣
請問有什麼方法可以執行?
謝謝~


-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"559","M.1508736741.A.5A1","peipeifish","問題","shiny server顯示不出網頁",2017-10-23 13:32:19,NA,NA,"https://i.imgur.com/gVncKru.jpg我在shinyserver上上傳了我自己的r作品
可是打上網址就顯示有問題
其他shiny內建的檔案都可以顯示
就我自己做好的不能顯示
像上圖一樣 未啟動
已經爬文了 有些人說換一個server就可以顯示了
可是學校就只給一台電腦 也沒辦法換
所以 想請問有沒有更專業的方法讓我的檔案可以跑出來

--","R_Language"
"560","M.1508596981.A.8EA","celestialgod","問題","Re: shiny讀取大檔案csv會當機",2017-10-21 22:42:58,NA,NA,"※ 引述《Esmelee (Esme)》之銘言：: 文章分類提示:: - 問題:shiny: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我做了一個shiny讀取歷年資料的程式: 可是我的csv檔案有2gb大: 發現讀取可以，可是要用shiny+套件時就會當機: 如果不用shiny就可以正常繪圖了: 有人建議我用mysql可是我把資料弄進mysql，mysql就當機了: 檔案太大嗎??只有2g阿: 到底要怎麼用才能正常在shiny上跑呢: 我的記憶體有16g: 我是不是要用甚麼spark hadoop的就會跑得出來: 而且後端檔案有2g大網站要怎麼做呢: shinyapps.io好像不可能...幫你做個簡單的修改，只是改用data.table

因為data.frame在過程中會不斷被複製，會增加記憶體使用量，拖慢速度

給個測試例子：https://pastebin.com/tHZ8UGpx: [程式範例]:: library(leaflet): library(shiny): library(shinydashboard): library(readr): library(methods): library(DT): library(RCurl)library(data.table)

alldata_2010 <- fread(""alldata_test.csv"",
                      colClasses = c(""PM2.5"" = ""numeric"",
                                     year = ""character"",
                                     month = ""character"",
                                     day = ""character"",
                                     hour = ""character""))

setkey(alldata_2010, year, month, day, hour): ui <-:   fluidPage(:     titlePanel(""Basic DataTable""),:     fluidRow(:       column(4,:              selectInput(""year"",:                          ""year:"", alldata_2010, selectize=TRUE):       ),:       column(4,:              selectInput(""month"",:                          ""month:"", alldata_2010, selectize=TRUE):       ),:       column(4,:              selectInput(""day"",:                          ""day:"", alldata_2010, selectize=TRUE):       ),:       column(4,:              selectInput(""hour"",:                          ""hour:"", alldata_2010, selectize=TRUE):       ),:       fluidRow(:         title = ""data MAP"",:         collapsible = TRUE,:         width = ""100%"",:         height = ""100%"",:         leafletOutput(""datamap"", height = ""900px""):       ):     ):   ): server <-:   function(input, output) {:     output$datamap <- renderLeaflet({data <- copy(alldata_2010):       if (input$year != ""All"") {data <- data[year == input$year]:       }:       if (input$month != ""All"") {data <- data[month == input$month]:       }:       if (input$day != ""All"") {data <- data[day == input$day]:       }:       if (input$hour != ""All"") {data <- data[hour == input$hour]:       }但是，最好的改法是下面這樣：

filter <- """"
for (colname in c(""year"", ""month"", ""day"", ""hour"")) {
  if (input[[colname]] != ""All"")
    filter <- sprintf(""%s %s %s == %s"", filter,
              ifelse(ncahr(filter)>0,""&"",""""), colname, input[[colname]])
}
data <- alldata_2010[eval(filter)]:       cPal <- colorNumeric(palette =:                 c(""green"",""orange"",""red"",""purple""),domain = 0:100):       leaflet(taiwan) %>% addProviderTiles(providers$CartoDB.Positron) %>%:         addPolygons(color = ""#444444"", weight = 1.5, smoothFactor = 1.5,:                     opacity = 1.5, fillOpacity = 0.1) %>%:         addCircleMarkers(lng=data$TWD97Lon,lat=data$TWD97Lat,:                          radius=13,stroke=FALSE, fillOpacity = 0.9,:                          fillColor = ~cPal(data$PM2.5),:                          label =~as.character(data$PM2.5),:                          popup = ~as.character(data$site))%>%:         addLegend(""bottomright"", pal = cPal, values =data$PM2.5,:                   title = ""PM2.5"",:                   labFormat = labelFormat(suffix = "" ""),opacity = 1):     }:     ):   }: shinyApp(ui = ui, server = server): [環境敘述]:: R version 3.3.3: windows 10: 記憶體16gb: [關鍵字]:shiny 資料大--","R_Language"
"561","M.1508593359.A.BE4","Esmelee","問題","shiny讀取大檔案csv會當機",2017-10-21 21:42:37,NA,NA,"文章分類提示:
- 問題:shiny

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我做了一個shiny讀取歷年資料的程式
可是我的csv檔案有2gb大
發現讀取可以，可是要用shiny+套件時就會當機
如果不用shiny就可以正常繪圖了
有人建議我用mysql可是我把資料弄進mysql，mysql就當機了
檔案太大嗎??只有2g阿
到底要怎麼用才能正常在shiny上跑呢
我的記憶體有16g
我是不是要用甚麼spark hadoop的就會跑得出來
而且後端檔案有2g大網站要怎麼做呢
shinyapps.io好像不可能...


[程式範例]:
library(leaflet)
library(shiny)
library(shinydashboard)
library(readr)
library(methods)
library(DT)
library(RCurl)
alldata_2010 <- read_csv(""alldata_test.csv"",
                         col_types = cols(PM2.5 = col_number(),
                                          year = col_character(),
                                          month = col_character(),
                                          day = col_character(),
                                          hour = col_character()))



ui <-
  fluidPage(
    titlePanel(""Basic DataTable""),
    fluidRow(
      column(4,
             selectInput(""year"",
                         ""year:"", alldata_2010, selectize=TRUE)
      ),

      column(4,
             selectInput(""month"",
                         ""month:"", alldata_2010, selectize=TRUE)
      ),
      column(4,
             selectInput(""day"",
                         ""day:"", alldata_2010, selectize=TRUE)
      ),

      column(4,
             selectInput(""hour"",
                         ""hour:"", alldata_2010, selectize=TRUE)
      ),
      fluidRow(
        title = ""data MAP"",
        collapsible = TRUE,
        width = ""100%"",
        height = ""100%"",
        leafletOutput(""datamap"", height = ""900px"")
      )
    )
  )
server <-
  function(input, output) {

    output$datamap <- renderLeaflet({
      data <- alldata_2010
      if (input$year != ""all"") {
        data <- data[data$year == input$year,]
      }
      if (input$month != ""All"") {
        data <- data[data$month == input$month,]
      }
      if (input$day != ""All"") {
        data <- data[data$day == input$day,]
      }
      if (input$hour != ""All"") {
        data <- data[data$hour == input$hour,]
      }

      cPal <- colorNumeric(palette =
c(""green"",""orange"",""red"",""purple""),domain = 0:100)
      leaflet(taiwan) %>%addProviderTiles(providers$CartoDB.Positron) %>%
        addPolygons(color = ""#444444"", weight = 1.5, smoothFactor = 1.5,
                    opacity = 1.5, fillOpacity = 0.1) %>%
        addCircleMarkers(lng=data$TWD97Lon,lat=data$TWD97Lat,
                         radius=13,stroke=FALSE, fillOpacity = 0.9,
                         fillColor = ~cPal(data$PM2.5),
                         label =~as.character(data$PM2.5),
                         popup = ~as.character(data$site))%>%
        addLegend(""bottomright"", pal = cPal, values =data$PM2.5,title =
""PM2.5"",
                  labFormat = labelFormat(suffix = "" ""),opacity = 1)

    }
    )
  }
shinyApp(ui = ui, server = server)

[環境敘述]:
R version 3.3.3
windows 10
記憶體16gb
[關鍵字]:shiny 資料大

--","R_Language"
"562","M.1508501057.A.B6D","ruokcnn","問題","Rstudio console 畫面完全卡住",2017-10-20 20:04:08,NA,NA,"[問題類型]:

效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

從今天開始時不時code打到一半console會凍住

可以下command，但不會回傳值或是error/warning訊息

到下班時夠狠，不管我重開session重開Rstudio都會卡住

我裝了三個版本的R: 3.3.3/3.2.4/3.4.1

重灌Rstudio無數次

一直死在某行read.csv上

後來發現同樣一行code開新的script就可以繼續跑不會凍住console

這是什麼巫術？

求救！！！！



[程式範例]:
大盤 <- read.csv(""D:/R/Project/Data/大盤價量.csv"")
#有時死在這行
大盤 <- 大盤[,-1]
#有時到這行才死這行

[環境敘述]:

R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1    yaml_2.1.14


[關鍵字]:選擇性，也許未來有用--作者seacore07 (海角7號)看板Gossiping標題[問卦] 異性戀的男生跟女生 真的有純友誼嗎？時間Thu Dec  8 10:55:50 2016→ VVizZ: 有阿 我跟我老婆--","R_Language"
"563","M.1508497233.A.917","bboybighead2","問題","寫計算台鐵票價函數跑不出結果",2017-10-20 19:00:26,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[使用R的經驗]
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

寫了計算台鐵票價小程式，但卻跑不出結果。
建立完函數後，依下列方式使用卻跑不出結果。
--------------------------------------
output> Price(from=""基隆"",to=""高雄"",yoyo=T)numeric(0)
--------------------------------------
若但若不使用函數，自己一行一行跑，是可以執行出結果的。
希望版友能幫忙指出盲點為何，/(_ _)\

[程式範例]:
程式碼在此：https://ideone.com/baBmUR[環境敘述]:

R version 3.2.4 Revised (2016-03-16 r70336)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


--","R_Language"
"564","M.1508382165.A.939","ophelie525","問題","",2017-10-19 11:02:43,NA,NA,"請求協助

學習R語言中...
老師出了作業
有一個要查看資料結構（型態）
不太懂應該下什麼語法
請求幫忙

--","R_Language"
"565","M.1508253611.A.CF9","wheado","問題","formula 輸入格式問題",2017-10-17 23:20:06,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

在指令 lm() 中 formula 參數通常都是輸入

y~x 當資料變數名稱是 x 和 y

如果今天 target <- ""y""

接著輸入 lm( target~x, data ) 會跑出 error

如果不改變資料內部變數名稱的話

要怎麼做才可以把讓上面的程式跑得過

謝謝

[程式範例]:https://ideone.com/dWpek1[環境敘述]:

R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:

formula

--","R_Language"
"566","M.1508249482.A.7F9","celestialgod","問題","Re: GGplot ggsave用cairo不能存字型？",2017-10-17 22:11:19,NA,NA,"※ 引述《ruokcnn (Dean)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 為了ggplot抗鋸齒輸出 ，小弟找到可以用type = ""cairo""包在ggsave裡面: 但只要有包原本嵌好的字型在存的時候就會被打回新細明體: 令人好不傷心: 想請問有沒有一兼二顧，摸蛤仔兼洗褲的方式呢？: 還是只能把dpi調爆高看起來比較沒鋸齒？: [程式範例]:: [環境敘述]:: R3.3.3: [關鍵字]:: GGplot: cairo: 字型Linux:
# centos 7 要先yum install -y google-noto-cjk-fonts

library(ggplot2)
library(Cairo)

df <- data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
g <- ggplot(df, aes(gp, y)) + geom_point() + labs(title = ""中文測試"") +
  theme(text = element_text(family = ""Noto Sans CJK TC""))
ggsave(""tmp1.png"", g)
#https://imgur.com/f5fALCaggsave(""tmp2.png"", g, type = ""cairo"")
#https://imgur.com/3LtezUkWindows:

library(ggplot2)
library(Cairo)
library(showtext)
showtext.auto()

df <- data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
g <- ggplot(df, aes(gp, y)) + geom_point() + labs(title = ""中文測試"") +
  theme(text = element_text(family = ""Noto Sans CJK TC""))
ggsave(""tmp1.png"", g)
#https://imgur.com/T9XGpxdggsave(""tmp2.png"", g, type = ""cairo"")
#https://imgur.com/1FRfOWU# windows正常情況：
windowsFonts(""Noto Sans CJK TC Regular"" =
                windowsFont(""Noto Sans CJK TC Regular""))
df <- data.frame(gp = factor(rep(letters[1:3], each = 10)), y = rnorm(30))
g <- ggplot(df, aes(gp, y)) + geom_point() + labs(title = ""中文測試"") +
  theme(text = element_text(family = ""Noto Sans CJK TC Regular""))
ggsave(""tmp3.png"", g)
#https://imgur.com/7Z56rCj--","R_Language"
"567","M.1508232484.A.C9D","dummytrue","問題","計算整個表格中某個數值的出現次數",2017-10-17 17:28:02,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
表格中有多個變數，我想計算整個表個中出現""?""的次數

[程式範例]:

sum(data[,]==""?"")

跑出NA，但我確定表格中是有""?""

[關鍵字]:

計算個數

--","R_Language"
"568","M.1508133616.A.70A","ruokcnn","問題","GGplot 用cairo不能存字型？",2017-10-16 14:00:07,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

為了ggplot抗鋸齒輸出 ，小弟找到可以用type = ""cairo""包在ggsave裡面

但只要有包原本嵌好的字型在存的時候就會被打回新細明體

令人好不傷心

想請問有沒有一兼二顧，摸蛤仔兼洗褲的方式呢？

還是只能把dpi調爆高看起來比較沒鋸齒？

[程式範例]:

[環境敘述]:

R3.3.3

[關鍵字]:

GGplot
cairo
字型

--推 GauYi:我有一個學妹沒有胸部12/28 19:56推 VVVV5555:哈哈。你真有才12/28 19:56→ rs5556:難怪他們沒被嚇跑 哈哈12/28 19:56→ VVVV5555:這邊只剩下一堆無聊影片。但你讓我笑了，你真的很不一樣12/28 20:00→ VVVV5555:五樓帥哥12/28 20:00→ VVVV5555:哈哈XD你幹嘛說出來12/28 20:01--","R_Language"
"569","M.1508086161.A.054","dogi2007",NA,"Datacamp 徵求會員",2017-10-16 00:49:19,NA,NA,"大家好，

小弟最近對於資料科學非常有興趣，在網路上找了許多課程並開始學習，最近發現了一個
可以邊操作邊學習的網站，叫做 DataCamp ，我目前已經上完他的免費課程，正要準備買
付費課程，然而我上班時間關係，都是凌晨才自學，想說找人共用帳號分錢，這樣不但可
以讓每月開銷壓力少一點，彼此使用上又不會衝突。

每月共付 750 台幣，有興趣的人請站內信！

--","R_Language"
"570","M.1508010264.A.F82","Paravion","問題","Re: 裡面放邏輯矩陣也可以嗎？",2017-10-15 03:44:21,NA,NA,"※ 引述《s3714443 (metalheads)》之銘言：: 小弟最近想把資料(data frame)裡面的na值用0取代: 查一查發現: data[is.na(data)]<-0就可以解決: 但是有點想不透為什麼這樣子就可以指定到那些na的值: is.na(data)出來是一個矩陣: 所以[]放矩陣也可以嗎？ 規則是如何呢？: 感謝各位大神其實不用想那麼複雜
data[is.na(data)]<-0 和以下代碼

aaa <- is.na(data)
data[aaa] <- 0

是同義的

aaa的資料數和data一樣
每個布林值對應data的一格
TRUE就取出 FALSE就不取

本來就可以用來取值

舉個簡單的例子

x <- 1:10
x.index <- x>5
str(x.index)
x[x.index]

自己執行看看你就會懂了

--","R_Language"
"571","M.1507972007.A.590","PhysicsBoy","問題","做圖後關於文字下標標示的問題",2017-10-14 17:06:44,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

做完數據分析且作圖後，在標示軸的意思上遇到一些問題，請看下圖 :https://i.imgur.com/Q9IjQVS.jpg目前已知使用 expression(paste(""<"",V[1],"">"")) 可詮釋出<V1>的部分
但在<>之外的下標g(t)卻不知道怎麼把它標示出來
這裡想請教板上大大們，煩請知道的大大助功一下小弟我吧
感謝萬分阿!


--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"572","M.1507955035.A.AD6","tony1331","問題","資料配對和權重處理",2017-10-14 12:23:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
s
新手(沒寫過程式，R 是我的第一次)s

[問題敘述]:
(1)http://i.imgur.com/EvGLkgV.jpghttp://i.imgur.com/fvanMSD.jpg有2張表，我想要把一樣ticker的公司配對填入INS，如果沒有的話就NA

(2)http://i.imgur.com/deaE2tW.jpg請問要如何算每個sic中 ，個別公司at的權重，sic有非常多組

請教大家，謝謝~




-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"573","M.1507527339.A.9F8","s3714443","問題","裡面放邏輯矩陣也可以嗎？",2017-10-09 13:35:35,NA,NA,"小弟最近想把資料(data frame)裡面的na值用0取代
查一查發現
data[is.na(data)]<-0就可以解決
但是有點想不透為什麼這樣子就可以指定到那些na的值
is.na(data)出來是一個矩陣
所以[]放矩陣也可以嗎？ 規則是如何呢？
感謝各位大神

--","R_Language"
"574","M.1507481587.A.4FC","ademon","問題","factor問題",2017-10-09 00:53:03,NA,NA,"[問題類型]:
套件更新

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想用factor把a,b,c類別轉換成h,h,j兩種類別 但年初可以用的，現在卻出現
factor level [2] is duplicated 的錯誤代碼
也就是說一定要一對一，h,k,j就不會有錯誤了...


[程式範例]:> x <- c(letters[1:3], letters[1:3])> factor(x, levels = c(""a"", ""b"", ""c""), labels = c(""h"", ""h"", ""j""))[環境敘述]:
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字」:

factor

--","R_Language"
"575","M.1507453635.A.D09","rockchangnew","情報","SQL Server 2017 AI 之 Python / R 實作",2017-10-08 17:07:13,NA,NA,"時間：2017/10/23 19:00~21:00
講師群：
趨勢 科技 AI GROUP
楊志強 MVP
林裕軒 台灣大學物理系碩士 (Python)https://www.facebook.com/SHAHGER張婷雅 倫敦大學學院 (UNIVERSITY COLLEGE LONDON) - 計算統計與機器學習碩士(R 語言)https://www.facebook.com/profile.php?id=100002592623816主題：SQL Server 2017 AI 之 Python / R 實作
資料庫SQL Server 2017同時有了 Python與R語言，兩大新利器。

想知道DBA如何利用R 語言與 Python結合兩者在新的SQL 2017上實作出AI嗎?
由楊老師帶領R 語言與Python領域中的專家林裕軒老師以及張婷雅老師，以實戰經驗，透過 R+PYTHON實做出 AI deep dive，分享從0-->100的Python & R 快速學習，讓自己的DBA，DBD生涯有機會轉成為 DB AI，千萬別錯過，歡迎大家一同參加。
也別忘記在FB訂閱，以獲取楊老師的最新資訊
Super SQL Serverhttps://www.facebook.com/groups/supersqlserver/PS:
1.楊老師新書簽名活動持續中，別忘記帶書來索取簽名喔..
2.有興趣的同學，可以先安裝SQL Server 2017 + Machine learning Services R+ Python，現場可提供CODE下載一起進行實作，同步學習。
活動地點：淡江大學台北校區
地址：台北市大安區金華街199巷5號
活動費用：150元整(現場報到繳費)
報名網址：https://goo.gl/forms/Lyff6N8JMnFyH4mo2名額有限，快點把握機會搶先報名喔 :)

--
Sent from my Windows

--","R_Language"
"576","M.1507431994.A.4B0","ciuhkimo","問題","PredeictABEL coding",2017-10-08 11:06:27,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除使用PredictABEL package時，出現Error in table(c1, c2, data[, cOutcome]) :all arguments must have the same length但是我分別用length(c1), length(c2), length(cOutcome)，結果都是相同的想請問問題可能在哪裡？[問題類型]:請把以下不需要的部份刪除經驗諮詢：IDI_NRI計算作表格


[軟體熟悉度]:新手入門[問題敘述]:使用PredictABEL跑IDI_NRI統計評估model[程式範例]:請把以下不需要的部份刪除coding:library(PredictABEL)m1 <- glm(d ~ va1, family=binomial(logit), data=dt)$fittedm2 <- glm(d ~ va1 + GM, family=binomial(logit), data=dt)$fittedvalue<-as.vector(quantile(m1))cutoff <- c(0,value[2],value[3],value[4],1)length(m1)   # 確定length是否一樣:149length(m2)   # 確定lenght:149length(dt$va1)  #length: 149reclassification(predrisk1 = m1, predrisk2=m2,cOutcome = 3,data = dt, cutoff = cutoff)   # cOutcome =3, 第3欄為va1Output:
 _________________________________________

     Reclassification table
 _________________________________________
Error in table(c1, c2, data[, cOutcome]) :
  all arguments must have the same length

length不是都一樣？我也有用na.omit()去把可能的NA值去掉了，
但是仍然無法


[關鍵字]:
PredictABEL, IDI, NRI, model選擇性，也許未來有用--","R_Language"
"577","M.1507262019.A.157","disney82231","問題","在R裡面使用LATEX",2017-10-06 11:53:33,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
在R裡面使用LATEX，跑出的PDF檔，中文都是亂碼
有嘗試使用LATEX的preamble檔，但使用會出現errorhttps://imgur.com/a/AMJLBhttps://imgur.com/a/3Hfo3可是跳到28行看不出錯在哪

單獨使用latex都可以順利進行。

[環境敘述]:https://imgur.com/a/hBAU5這是我R的資訊


--","R_Language"
"578","M.1507138126.A.880","annie1827","問題","",2017-10-05 01:28:44,NA,NA,"〔問題分類〕：程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
我想用readRDS的方式讀取下載下來的.rds的檔案，我有解完壓縮了，但不管怎麼讀取都
是顯示無法開啟壓縮檔案，想請問各位高手我該怎麼做∼謝謝大家！

[程式範例]:https://i.imgur.com/y7Gvj83.jpg[環境敘述]:
Rstudio

[關鍵字]:
readRDS


--","R_Language"
"579","M.1507124612.A.39B","Esmelee","問題","篩選日期時間",2017-10-04 21:43:30,NA,NA,"文章分類提示:
問題

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想篩選特定的時間，可是不知道為什麼挑出的時間卻不一樣
不知道是不是時區的問題

[程式範例]:
alldata03210000 <- alldata[alldata$date==""2010-03-20 00:00:00"",]

最後輸出的資料卻是2010-03-19 16:00:00

[關鍵字]:
篩選時間


有人知道為什麼挑出的時間會不一樣嗎
篩選20日1點，輸出的時間卻是19日17點
還是有其他的方法可以更好篩選時間的?

--","R_Language"
"580","M.1507026326.A.429","hatemath1991","問題","關於wordcloud2繪圖",2017-10-03 18:25:23,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
抱歉自己耍蠢...後來發現把資料排序後就好了。
========================
現在想要使用wordcloud2繪製文字雲，
但是想要的效果是頻率最高的會出現在中間
然後字最大
但是跑出來都不是這樣
我看一下help好像也沒有關於這方面的設定http://0rz.tw/8RdbM然後順便問一下，我是用rfacebook擷取柯文哲市長的公開粉絲頁

----下面找到了utf-8的表情符號

但是裡面留言用jiebaR切詞之後都會有<ed><b1><8d>或者<ed><a0><bd>



[程式範例]:

wordcloud2(word_freq,minSize = 10, size = 1, gridSize =  1,shape=""circle"")

[環境敘述]:R version 3.4.2 (2017-09-28)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.3 LTSMatrix products: defaultBLAS: /usr/lib/libblas/libblas.so.3.6.0LAPACK: /usr/lib/lapack/liblapack.so.3.6.0[關鍵字]:

wordcolurd2

--","R_Language"
"581","M.1507000502.A.FA3","MKII5566","問題","前輩們都是去哪些網站吸收R語言的新知?",2017-10-03 11:14:59,NA,NA,"我是新手

基本上置底的連結都有參考過了

不過是以教學網站為主

但我想知道的是有沒有R語言的新聞類網站

目前常看的都是https://www.r-bloggers.comR-Bloggers

台灣或中文的就是偶爾看到部落格文章

主要是想知道目前世界上的使用R的開發者 有沒有什麼新的技術或是新的套件

甚至是很潮的機器學習 深度學習在R上的應用目前有無什麼新的新聞或資訊

例如微軟前年併購企業級R語言工具公司Revolution Analytics

去年有推出自己R語言產品等新聞

不知道大家都去哪吸收新知呢?


--","R_Language"
"582","M.1506869664.A.239","KKbiger","問題","Re: 關於類神經網絡模型選擇",2017-10-01 22:54:21,NA,NA,"※ 引述《asdfrtg (asdfrtg)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我想用train這個指令進行模型選擇 可是跑出一大堆警告:  並且所有出來的結果都是遺失值: [程式範例]:: library(neuralnet): library(nnet): library(lattice): library(ggplot2): library(caret): setwd(""D:\\""): Stock<-read.csv(""real.csv"",header=T): N<-nrow(Stock): set.seed(123): ind1<-sample(N,round(N*0.7)): Train<-Stock[ind1,-1]: Test<-Stock[-ind1,-1]: st.net<-stock~usd.z+coffee.z+rice.z+oil.z+wheat.z+djopen.z+cu.z+corn.z: model <- train(formula =st.net,data = Train,method=""neuralnet"", tuneGrid: =data.frame(layer1=2:4,layer2=0, layer3=0),learningrate = 0.1, threshold =: 0.1,stepmax =10000): https://imgur.com/rm3gifL: [關鍵字]::: 選擇性，也許未來有用:

我用你的資料直接照你的程式碼下去測試基本上沒問題

不過st.net先as.formula

train函數裡面的擺的參數自己看一下套件文件再確定一下

不過我執行起來沒什麼問題 我測試時設了兩層神經層

st.net <- as.formula('stock ~
                  usd.z+coffee.z+rice.z+oil.z+wheat.z+dj.z+cu.z+corn.z')

modelst <- train(form = st.net,
               data = traindata_real,
               method = ""neuralnet"",
               tuneGrid = expand.grid(.layer1 = c(2:4),
                                      .layer2 = c(1:4),
                                      .layer3 = c(0)),
               learningrate = 0.01)

--","R_Language"
"583","M.1506673183.A.BC4","asdfrtg","問題","關於類神經網絡模型選擇",2017-09-29 16:19:40,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
我想用train這個指令進行模型選擇 可是跑出一大堆警告
 並且所有出來的結果都是遺失值

[程式範例]:
library(neuralnet)
library(nnet)
library(lattice)
library(ggplot2)
library(caret)
setwd(""D:\\"")
Stock<-read.csv(""real.csv"",header=T)
N<-nrow(Stock)
set.seed(123)
ind1<-sample(N,round(N*0.7))

Train<-Stock[ind1,-1]
Test<-Stock[-ind1,-1]

st.net<-stock~usd.z+coffee.z+rice.z+oil.z+wheat.z+djopen.z+cu.z+corn.z


model <- train(formula =st.net,data = Train,method=""neuralnet"", tuneGrid
=data.frame(layer1=2:4,layer2=0, layer3=0),learningrate = 0.1, threshold =
0.1,stepmax =10000)https://imgur.com/rm3gifL[關鍵字]:選擇性，也許未來有用--","R_Language"
"584","M.1506596337.A.5F7","mowgur","問題","如何查詢.Call使用的函數",2017-09-28 18:58:54,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
大家好 我想要找出igraph套件裡的page.rank指令的內容
其中有一段為
res <- .Call(C_R_igraph_personalized_pagerank, graph, algo,
        vids - 1, directed, damping, personalized, weights, options)

就我的理解這裡的C_R_igraph_personalized_pagerank應該是一個C的 function?
那請問要從哪裡找到這個function的內容呢?



[程式範例]:


[環境敘述]:請提供 sessionInfo() 的輸出結果，R version 3.4.1 (2017-06-30)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:
page.rank .Call igraph選擇性，也許未來有用--","R_Language"
"585","M.1506570506.A.8C6","PTTOuO","問題","怎麼做出矩陣中對角線的數平方",2017-09-28 11:48:23,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
假設矩陣為[1,3] 我想要得出 [1,3]
           2,4              2,16
[程式範例]:

DF<-matrix(c(1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25),nrow=5)

k <- function(g){
  j<-diag(g)^2
  return(j)
}

apply(DF,1,k(DF))


我自己寫一個function , k(DF)可以順利取出對角線的數字，並平方
但是放到apply卻不能用了，出現下列訊息

Error in match.fun(FUN) :
  'k(DF)' is not a function, character or symbol

求大大幫忙 謝謝

-------------------------------------

我修改一下程式碼 可以讓對角線平方了
但是其他數字變0了  求解QQhttp://i.imgur.com/PHDYHw3.jpg我想要呈現下圖那樣子http://i.imgur.com/LZ8DRPQ.jpg用apply看起來變好奇怪http://i.imgur.com/C68xg1j.jpg--","R_Language"
"586","M.1506524943.A.391","hatemath1991","問題","關於randomforest",2017-09-27 23:09:00,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)

[問題敘述]:
抱歉有一些關於randomforest使用上的問題想要問一下
目前我使用randomForest這個套件去訓練我的樹
然後想要使用https://github.com/araastat/reprtree/tree/master/R上面那個套件的retree畫出我的樹
但是遇到了一些問題
訓練組跟測試組所畫的樹不一樣
以及如果我現在是想要做隨機森林的特徵選取
那我該如何下手因為用不同的資料所會出的樹不一樣

[程式範例]:請把以下不需要的部份刪除library(reprtree)rforest <- randomForest(type~., data=train_data)reptree <- ReprTree(rforest, train_data, metric='d2')plot(reptree, index=1)reptree <- ReprTree(rforest, test_data, metric='d2')plot(reptree, index=1)[環境敘述]:R version 3.4.1 (2017-06-30)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.3 LTSMatrix products: defaultBLAS: /usr/lib/libblas/libblas.so.3.6.0LAPACK: /usr/lib/lapack/liblapack.so.3.6.0locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] compiler_3.4.1 tools_3.4.1[關鍵字]:隨機森林、特徵選取、繪圖--","R_Language"
"587","M.1506409395.A.D12","wheado","問題","html_notebook輸出字體大小調整",2017-09-26 15:03:12,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

R notebook輸出字體大小調整，在網路上查到的都是有關圖片大小的調整。

但如果今天要show一個資料的summary卻發現輸出字體過大導致結果排列有點混亂，

不容易閱讀，請問哪個參數是可以調的？

感激不盡。

[關鍵字]:

R html_notebook font

R notebook text size of output

--","R_Language"
"588","M.1506354369.A.FD5","wewe1227","問題","徵R+Shiny的高手 (代po )",2017-09-25 23:46:06,NA,NA,"as title 徵R+Shiny的高手
薪資：1500
時間：9/26（二）晚上約7:30-10:30

朋友最近在做專題報告
有一些問題和邏輯想要釐清
她本身會寫一些程式，
所以不用幫她寫，
只要和她一起討論，幫助她把問題解決就好了
（她Shiny有玩過，但不熟）

有興趣的話請email至[email<U+00A0>protected]地點在台北捷運綠線上，台電大樓附近

--","R_Language"
"589","M.1506252969.A.8C0","applehpsh","問題","取出數列或data.frame中奇數或偶數列",2017-09-24 19:36:05,NA,NA,"[問題類型]:請把以下不需要的部份刪除意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:假設有一data.framedf <-data.frame(col1 = c(1:10), col2 = c(11:20))想要若要取出偶數列 變成col1 col21    2   122    4   143    6   164    8   185   10   20或是想抓一個數列偶數項次 col <- c(1:10)變成 [1]  2  4  6  8 10請問有什麼比較快的寫法通常我都是寫迴圈直接抓google了一下看到很多也都是寫迴圈但是想知道有沒有別種寫法 謝謝[環境敘述]:R 3.4[關鍵字]:選擇性，也許未來有用--","R_Language"
"590","M.1506240507.A.5CE","PTTOuO","問題","請問這段程式碼的意思",2017-09-24 16:08:24,NA,NA,"[問題類型]:
程式碼諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
答案是 1101，主要的原因是不知道apply後面參數的3和rw是代表什麼意思，是c=3,rw=x矩
陣嗎？那第二段程式碼sum(rw[1:c]) / c 是把1:c列的數字加總再除以c？


[程式範例]:

copymaj <- function(rw,c) {
  maj <- sum(rw[1:c]) / c
  return(ifelse(maj > 0.5,1,0))
}
(x <- matrix(c(1,1,1,0,0,1,0,1,1,1,0,1,1,1,1,1,0,0,1,0),nrow = 4))

apply(x,1,copymaj,3)


[環境敘述]:
R version 3.4.1 (2017-06-30)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

Matrix products: default

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] compiler_3.4.1 tools_3.4.1


--","R_Language"
"591","M.1506010831.A.E5F","KKbiger","問題","Re: 資料篩選(日期問題)",2017-09-22 00:20:28,NA,NA,"※ 引述《tony1331 (BLUE)》之銘言：: [問題類型]:: (我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: (沒寫過程式，R 是我的第一次): [問題敘述]:: http://i.imgur.com/woqwvM1.jpg: Table有一欄是時間，假設是7-8月的資料，: 請問如果我只想要1點到2點的資料該如何寫: (不管日期 只要1點到2點): 謝謝~: -----: Sent from JPTT on my Asus ASUS_Z012DA.timedata <- as.POSIXct(c(""2017-01-01 01:30:20"", ""2017-05-02 01:12:20"",
""2017-07-21 05:30:20"", ""2017-04-27 01:13:40"", ""2016-12-27 13:13:40""),
""%Y-%m-%d %H:%M:%S"", tz=""GMT"")
id <- c(1:5)
df <- data.frame(id, timedata)

===================以上是隨意做一個data.frame來示範=====================

因為是1點到2點 所以是01:00:00~01:59:59

以下提供直接寫迴圈的方式:

time_strsplit<- c()
for(i in 1:nrow(df)){
  time_strsplit <- c(time_strsplit,
as.numeric(substr(strsplit(as.character(df$timedata), "" "")[[i]][2], 1, 2)))
}
df_subset <- subset(cbind(df, time_strsplit), time_strsplit == 1)


--","R_Language"
"592","M.1505979556.A.BE3","tony1331","問題","資料篩選(日期問題)",2017-09-21 15:39:13,NA,NA,"[問題類型]:

(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
(沒寫過程式，R 是我的第一次)s

[問題敘述]:http://i.imgur.com/woqwvM1.jpgTable有一欄是時間，假設是7-8月的資料，
請問如果我只想要1點到2點的資料該如何寫
(不管日期 只要1點到2點)
謝謝~

-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"593","M.1505973444.A.AE3","s1032901",NA,"R的button應用",2017-09-21 13:57:21,NA,NA,"最近打好一串程式是能夠讀取到某資料夾的內容能夠顯示出來
（（以下是能夠自己讀檔的方式
setwd(""C:/home/user521/桌面/0519/545"")
    getwd()

    list.files() # dir()

    (filenames <- list.files(""."", pattern=""*.csv""))

    (quiz.data <- lapply(filenames, read.table))


但現在想更進一步就是利用shiny方式 然後按按鍵之後就能夠讓檔案自動讀取
想請問該如何更改

以下是Server端

shinyServer(function(input, output) {
  output$plot1 <- renderPlot({
    # Simply accessing input$goButton here makes this reactive
    # object take a dependency on it. That means when
    # input$goButton changes, this code will re-execute.
    input$goButton

    # Use isolate() to avoid dependency on input$n
    isolate({
      hist(rnorm(input$n))
    })
  })
})

想問是不是要從input$goButton 這邊下去做更改 還是render方面該如何做修改
我們想讓按鈕按下去程式才會運作 而不是程式直接運作


--","R_Language"
"594","M.1505914710.A.E34","Heydontmind","問題","卡方檢定時如何加權",2017-09-20 21:38:28,NA,NA,"[問題類型]:程式諮詢
[軟體熟悉度]:新手
[問題敘述]:
簡單的做兩組類別資料的卡方檢定
但因為抽樣問題，需進行加權
有用sas算過，程式碼舉例如下
proc freq data=a;
  tables survey*sex/chisq;
  weight wt;
run;
但是現在要把他轉成r我不知道要怎麼加權@@
chisq.test() 好像不能直接使用加權

麻煩大家幫我解答一下了QQ，謝謝~

--","R_Language"
"595","M.1505882508.A.2F7","s3714443","問題","周資料與日資料的合併、填滿NA",2017-09-20 12:41:44,NA,NA,"https://imgur.com/a/sNZtc各位好，小弟碰到一個問題
因為我想要同時判定周資料與日資料的技術指標
所以把它們用left_join弄再一起，也成功了
目前有一個問題，我想要如圖示那樣填滿na值
就是本週的日資料，都填入上週的周資料
不知道該怎麼解決呢ＱＱ
感謝各位

--","R_Language"
"596","M.1505881085.A.6E9","hewolf","問題","為什麼function的return值是NaN",2017-09-20 12:18:03,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:大家好我寫了一個function 對於這個function的傳回值有疑問,不知道如何解就是如果只要輸入一個值data$V5[100],回傳值是自己期待的但如果輸入一整排的值data$V5,卻會出現NaN有人說NaN會出現是因為function裡面有0/0的情況出現但如果真的如此,data$V5[100]也應該是NaN才對真不知道怎麼解這個問題  麻煩高手解答[程式範例]:從csv讀資料data<-read.csv(""input.csv"", header=F, sep="" "",skip=29)[ ,c('V3','V5')]V5的第一百筆data為0.8 ( [99] 0.8022100 0.8000000)data$V5[100]function對data$V5[100]這個輸入的return值為35093.64function(data$V5[100])如果一次輸入一排資料data$V5,結果return值卻是( [99]       NaN       NaN)function(data$V5)[環境敘述]:linux[關鍵字]:
NaN, function選擇性，也許未來有用--","R_Language"
"597","M.1505803901.A.FA8","HumuHumu","問題","Shiny重新整理網頁時清空Enviroment",2017-09-19 14:51:38,NA,NA,"我的App架在自己的Shiny Server上面

請問有沒有什麼辦法可以讓F5重新整理網頁時，利用rm清除某些特定變數或清空整個Enviroment嗎

有Google相關的function叫做on.exit，但好像沒辦法用在shiny重整網頁的時候

謝謝版上各位大神 <(_ _)>

--","R_Language"
"598","M.1505739006.A.779","ericchin0404","問題","Re: 關於逐步迴歸",2017-09-18 20:50:03,NA,NA,"※ 引述《ericchin0404 (凜魂)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 新手: [問題敘述]:: 就是我現在有一個反應變數向量Y: 跟一個解釋變數矩陣X，每一行代表一個變數: 然後我對他做迴歸: m=lm(Y~X): 然後我想用stepwise選變數，所以寫了: step(m): 不過做出來的結果就是原來的模型，他根本沒有挑選: 但如果我把模型寫成: m=lm(Y~X[,1]+X[,2]+X[,3]+X[,4]): 他就可以選: 所以我的問題是，如果我要做逐步迴歸，可是迴歸模型想用矩陣表示，那程式應該怎麼寫: ？: 另外想問若想把模型改成有二次項跟交互作用項，要怎麼寫？: 麻煩各位，謝謝我還是遇到一些問題
我的迴歸模型嘗試了以下兩種寫法
1.
X2 = cbind(model.matrix(~.^2,data = as.data.frame(X[ind2,]))[,-1],X[ind2,]^2)

m2 = lm(Y[ind2]~-1+sqrt(size[a,k])[ind2]+.,as.data.frame(X2))

2.
m2 = lm(Y[ind2]~-1+sqrt(size[a,k])[ind2]+(.)^2
                  +I(X[ind2,1]^2)+I(X[ind2,2]^2)+I(X[ind2,3]^2)
                  +I(X[ind2,4]^2)+I(X[ind2,5]^2)+I(X[ind2,6]^2)
                  ,as.data.frame(X[ind2,]))

以上兩種迴歸模型都是無截距項，且包含交互作用項和平方項
然後使用step(m2)這個指令進行選模
但是為什麼選出來的變數會不相同
理論上模型相同，選模的指令也相同，只是模型寫法不同，選出來的變數應該要相同才對
，
到底是哪邊出了差錯???

Btw, X本身是一個6行的矩陣，也就是它是一個有六個變數的矩陣

--","R_Language"
"599","M.1505553635.A.89A","celestialgod","問題","Re: 在IPAD PRO 上如何讀檔案",2017-09-16 17:20:32,NA,NA,"※ 引述《ntpuisbest (阿龍)》之銘言：: 在 IPAD PRO 上 使用了 其 專屬的 APP來執行 r: 但是不知道要怎麼讀檔案: 目前的想法是 把 檔案 放到 DROPBOX上面: 只是不知道 如何用 r 去 利用 帳號 密碼 登入DROPBOX 使用檔案: 還希望版友們推薦方法: 謝謝install.packages('rdrop2')
library(rdrop2)
drop_auth() # 進入網頁選擇授權，如果授權過就不會跳出來了

drop_dir() # 顯示資料夾 (下面是我的)
# No encoding supplied: defaulting to UTF-8.
# A tibble: 4 x 5
#        path is_dir    root bytes                        modified
# *     <chr>  <lgl>   <chr> <int>                           <chr>
# 1     /Data   TRUE dropbox     0 Thu, 31 Mar 2016 12:44:22 +0000
# 2 /personal   TRUE dropbox     0 Tue, 19 Jan 2016 12:52:54 +0000
# 3 /相機上傳   TRUE dropbox     0 Sun, 23 Aug 2015 03:52:42 +0000
# 4 /螢幕截圖   TRUE dropbox     0 Mon, 07 Aug 2017 17:47:09 +0000

詳細可以參考：https://github.com/karthik/rdrop2--","R_Language"
"600","M.1505550896.A.CC9","ntpuisbest","問題","在IPAD PRO 上如何讀檔案",2017-09-16 16:34:53,NA,NA,"在 IPAD PRO 上 使用了 其 專屬的 APP來執行 r

但是不知道要怎麼讀檔案

目前的想法是 把 檔案 放到 DROPBOX上面

只是不知道 如何用 r 去 利用 帳號 密碼 登入DROPBOX 使用檔案

還希望版友們推薦方法

謝謝


--","R_Language"
"601","M.1505462399.A.D1C","qazwsx879345","問題","shiny結合identify 或locator",2017-09-15 15:59:56,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前有結合shiny 開發程式

會讀取資料畫圖

現在想要可以按 畫出來的點 顯示相關資料

有查到

locator和indentify函數 可以直接點圖去顯示點或是座標

但想結合shiny的時候卻失敗了

想請問有沒有辦法可以結合

或是用其他的方式 去做到

滑鼠點或滑到 圖上的點 而顯示相關資訊的事情

[程式範例]:

  randomvals_event<-eventReactive(input$event,
                                  {
                                    autoInvalidate()
                                    pts<-locator(n=3)
                                    pts
                                  })

我是想說存一個變數

按按鈕時可以啟動locator函數

並存下按下的座標

再回傳去顯示資料

但這方式好像行不通


[環境敘述]:

shiny
r 3.3.3
win10

[關鍵字]:

shiny 繪圖

--","R_Language"
"602","M.1505398422.A.CE2","ericchin0404","問題","關於逐步迴歸",2017-09-14 22:13:40,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:請把以下不需要的部份刪除新手

[問題敘述]:
就是我現在有一個反應變數向量Y
跟一個解釋變數矩陣X，每一行代表一個變數
然後我對他做迴歸
m=lm(Y~X)
然後我想用stepwise選變數，所以寫了
step(m)
不過做出來的結果就是原來的模型，他根本沒有挑選
但如果我把模型寫成
m=lm(Y~X[,1]+X[,2]+X[,3]+X[,4])
他就可以選

所以我的問題是，如果我要做逐步迴歸，可是迴歸模型想用矩陣表示，那程式應該怎麼寫
？
另外想問若想把模型改成有二次項跟交互作用項，要怎麼寫？
麻煩各位，謝謝



--","R_Language"
"603","M.1505393910.A.1B3","hkopee123","問題","用system功能送job給cluster ",2017-09-14 20:58:14,NA,NA,"[問題敘述]:

我有個R script長這樣
檔名是 Rcode.r
裡面包含
system (paste (""qsub /path/test.sh"", sep=""""), ignore.stdout=T, wait=T )
q(""no"")

我想使用這個 R script 送 shell script job 給 cluster 執行
我在 terminal 畫面打上
$ rR Rcode.r
執行後卻出現 sh: qsub: command not found 的錯誤訊息

當我在terminal進入R畫面
直接打上一樣的 R script> system (paste (""qsub /path/test.sh"", sep=""""), ignore.stdout=T, wait=T )我卻可以成功把job送出去
並且執行完成

我確定當我打$ qsub test.sh
terminal可以正常的送job出去

但當我透過R 用system這功能送job時
卻回覆command not found的錯誤

為什麼會這樣呢??

ps. 我也試過
system (paste (""/usr/torque/bin/qsub /path/test.sh"", sep=""""),
ignore.stdout=T, wait=T )
但一樣出現
sh: /usr/torque/bin/qsub: No such file or directory

[程式範例]:

[環境敘述]:


[關鍵字]:選擇性，也許未來有用--","R_Language"
"604","M.1505318559.A.6AD","celestialgod","問題","Re: 保持物件結構，將值依照預設填入問題。",2017-09-14 00:02:35,NA,NA,"※ 引述《wheado (principal component QQ)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(對語法不熟悉): [問題敘述]:: 保留物件結構，假設我有一個物件如下：: obj_A <- list(matrix(NA,nrow = 2,2),:               matrix(NA,nrow = 3,2),:               matrix(NA,nrow = 2,1));: 假設我有一些數值，如下：: num <- 1:12;: 有甚麼辦法可以很快的: 將 num 中的數字按照 R 內建排列矩陣的方式將值填入，: 但又不破壞物件的結構。: 我試過寫for迴圈來解決，但是當矩陣及數值是大量的時候會等很久，: 例如每個矩陣都是5000*2000這種的QQ: 想問有沒有類似""將值填入物件""的指令，讓coding可以更簡單快速。: [程式範例]:: https://ideone.com/HPIsOg: [環境敘述]:: windows10: [關鍵字]:: 慚愧不知道怎麼找相關資訊。好讀板：https://pastebin.com/UpgqyUTK# 產生一百萬個常態變數值
num <- rnorm(1e6)
# 建一個要輸出的matrix dimention的list
struct <- list(c(500, 900), c(500, 100), c(250, 350), c(550, 750))

st <- proc.time()
# 先把數字切成你要的length (#rows * #columns)
out <- split(num, rep(seq_along(struct), sapply(struct, Reduce, f = `*`)))
# 把每個list改成你要的dimension
for (i in seq_along(struct))
  dim(out[[i]]) <- struct[[i]]
proc.time() - st
# user  system elapsed
# 0.17    0.01    0.18

# 確認結果跟原PO想要的一樣
all(unlist(out) == num) # TRUE


一百萬個數值切成四個矩陣差不多0.2秒

一千萬個拆成十個，我猜大概也不過十秒以內的事情

這樣希望能夠解到原PO的問題

--","R_Language"
"605","M.1505316955.A.D95","wheado","問題","保持物件結構，將值依照預設填入問題。",2017-09-13 23:35:47,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:

入門(對語法不熟悉)

[問題敘述]:

保留物件結構，假設我有一個物件如下：

obj_A <- list(matrix(NA,nrow = 2,2),
              matrix(NA,nrow = 3,2),
              matrix(NA,nrow = 2,1));


假設我有一些數值，如下：

num <- 1:12;

有甚麼辦法可以很快的

將 num 中的數字按照 R 內建排列矩陣的方式將值填入，

但又不破壞物件的結構。

我試過寫for迴圈來解決，但是當矩陣及數值是大量的時候會等很久，

例如每個矩陣都是5000*2000這種的QQ

想問有沒有類似""將值填入物件""的指令，讓coding可以更簡單快速。


[程式範例]:https://ideone.com/HPIsOg[環境敘述]:

windows10

[關鍵字]:

慚愧不知道怎麼找相關資訊。

--","R_Language"
"606","M.1505316129.A.087","celestialgod","問題","Re: 資料整理問題(更改)",2017-09-13 23:22:05,NA,NA,"※ 引述《tony1331 (BLUE)》之銘言：: [問題類型]:: 我想用R 做某件事情，但是我不知道要怎麼用R 寫出來: [軟體熟悉度]:: 寫過程式，R 是我的第一次: [問題敘述]:: http://i.imgur.com/yKt85T3.jpg: 目前只會單列unique，想把每列都unique~: 懇請教導，感謝~: 不好意思手機發文好像怪怪的: -----: Sent from JPTT on my Asus ASUS_Z012DA.不用套件有點麻煩，懶得寫XD，下面是最簡單的作法：

# 好讀板：https://pastebin.com/67j92ptNlibrary(data.table)
library(pipeR)

# data generation
numRows <- 3e4
numCols <- 8
s <- matrix(NA_integer_, numRows, numCols)
idx <- sample(numCols, numRows, TRUE)
for (i in 1:numCols)
  s[idx == i, 1:i] <- sample(42, i * sum(idx == i), TRUE)

time <- seq(ISOdate(2017, 9, 12) - numRows*3600, ISOdate(2017, 9, 12),
            by = ""hour"")
DT <- data.table(time = head(time, numRows), s)
#                       time V1 V2 V3 V4 V5 V6 V7 V8
#     1: 2014-04-11 12:00:00 31 26 20 19  7 NA NA NA
#     2: 2014-04-11 13:00:00  4  5  4  4  7 NA NA NA
#     3: 2014-04-11 14:00:00 17 17 32 36 NA NA NA NA
#     4: 2014-04-11 15:00:00  2 23 25 28 41 14 32 10
#     5: 2014-04-11 16:00:00 40 33 25 27 29 NA NA NA
#    ---
# 29996: 2017-09-12 07:00:00 36 13  7 38 21 34 36 NA
# 29997: 2017-09-12 08:00:00 18 NA NA NA NA NA NA NA
# 29998: 2017-09-12 09:00:00  8  9 35 32 12 18  3 NA
# 29999: 2017-09-12 10:00:00 41 10 22 32 28 39 17 31
# 30000: 2017-09-12 11:00:00 21 21 NA NA NA NA NA NA

# 主程式
# 第一個問題
st <- proc.time()
melt(DT, 1, 2:9) %>>% na.omit(""value"") %>>%
  `[`(j = .(value = unique(value), idx = 1:uniqueN(value)), by = .(time)) %>>%
  dcast(time ~ idx, value.var = ""value"")
proc.time() - st
# user  system elapsed
# 0.68    0.00    0.71

#                       time  1  2  3  4  5  6  7  8
#     1: 2014-04-11 12:00:00 31 26 20 19  7 NA NA NA
#     2: 2014-04-11 13:00:00  4  5  7 NA NA NA NA NA
#     3: 2014-04-11 14:00:00 17 32 36 NA NA NA NA NA
#     4: 2014-04-11 15:00:00  2 23 25 28 41 14 32 10
#     5: 2014-04-11 16:00:00 40 33 25 27 29 NA NA NA
#    ---
# 29996: 2017-09-12 07:00:00 36 13  7 38 21 34 NA NA
# 29997: 2017-09-12 08:00:00 18 NA NA NA NA NA NA NA
# 29998: 2017-09-12 09:00:00  8  9 35 32 12 18  3 NA
# 29999: 2017-09-12 10:00:00 41 10 22 32 28 39 17 31
# 30000: 2017-09-12 11:00:00 21 NA NA NA NA NA NA NA

# 第二個問題
st <- proc.time()
melt(DT, 1, 2:9) %>>% na.omit(""value"") %>>%
  `[`(j = .(cnt = .N), by = .(time, value))
proc.time() - st
# user  system elapsed
# 0.14    0.03    0.17

#                        time value cnt
#      1: 2014-04-11 12:00:00    31   1
#      2: 2014-04-11 13:00:00     4   3
#      3: 2014-04-11 14:00:00    17   2
#      4: 2014-04-11 15:00:00     2   1
#      5: 2014-04-11 16:00:00    40   1
#     ---
# 128084: 2017-09-11 03:00:00    29   1
# 128085: 2017-09-11 16:00:00     6   1
# 128086: 2017-09-11 22:00:00    24   1
# 128087: 2017-09-12 05:00:00     4   1
# 128088: 2017-09-12 10:00:00    31   1



--","R_Language"
"607","M.1505316037.A.7A7","qazwsx879345","問題","繪圖-事件紀錄",2017-09-13 23:20:33,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前有結合SHINY 讀取資料繪製出一些圖表

因為讀取的資料中 可以讀到說發生了甚麼事件

想要將事件呈現在圖形上

位置大概就是點和點的中間的線段上

顯示的也是編號 可能是 A103 之類的代碼

想請問該怎麼做呢

因為用TEXT打字在圖上 好像需要設定字出現的位子

但每次讀到的點的數量 位子 是不一樣的

想知道有沒有辦法可以將文字 設置在點旁邊 或是點和點中間的線條上

並且不會被輸入的資料影響

[程式範例]:

其中一段的繪圖 大概是這樣

 plot(x=date,y=Q,main = ""tip  chart"",xaxt=""n"",
       xlab = ""date"",ylab = "" statistics"",
       ylim = c(-15,15)
  )
  axis(side=1,at=seq(1,length(as.numeric(final_m))),label =final_m)
  lines(x=date,y=Q)

現在就是用單純內建的PLOT

沒有使用其他像是GGPLOT的PACKAGE

[環境敘述]:
SHINY
R 3.3.3
WIN 10

[關鍵字]:繪圖 事件紀錄--","R_Language"
"608","M.1505306585.A.FCC","celestialgod","問題","Re: 資料整理問題",2017-09-13 20:43:02,NA,NA,"※ 引述《tony1331 (BLUE)》之銘言：: [問題類型]:: 我想用R 做某件事情，但是我不知道要怎麼用R 寫出來: [軟體熟悉度]:: S寫過程式，R 是我的第一次: [問題敘述]:: 01:00   a s j e j e l d k: 02:00   d w e w g w: 03:00   l e f w e g: 04:00   e r s: ..: ..: ..: 一個data.frame 時間後面號碼，每列不一: 有重複: (1)  請問大家要怎麼讓每列的號碼沒有重附，用unique好像不行不知道你怎麼存那些character，先假設你用字串把它們combine再一起

DF <- data.frame(time = c(""01:00"", ""02:00"", ""03:00"", ""04:00"", ""05:00""),
                 characters = c(""asjejeldk"", ""dwewgw"", ""lefweg"", ""ers"",
                                ""qaqasdfd""),
                 stringsAsFactors = FALSE)

transform(DF, characters = lapply(strsplit(characters, """"), unique))

#    time          characters
# 1 01:00 a, s, j, e, l, d, k
# 2 02:00          d, w, e, g
# 3 03:00       l, e, f, w, g
# 4 04:00             e, r, s
# 5 05:00       q, a, s, d, f: (2)  有什麼方法讓a b c ...這些號碼可以整理成在哪個時間出現幾次是unique後取？ 這樣就是每個都一次阿，下面用沒unique方式做：


DF3 <- transform(DF, characters = strsplit(characters, """"))
DF4 <- data.frame(time = unlist(mapply(function(x, y) rep(x, length(y)),
                                       DF3$time, DF3$characters)),
                  character = unlist(DF3$characters), stringsAsFactors = FALSE)
aggregate(rep(1, nrow(DF4))~ character + time, DF4, length)

# 前五筆
#    character  time rep(1, nrow(DF4))
# 1          a 01:00                 1
# 2          d 01:00                 1
# 3          e 01:00                 2
# 4          j 01:00                 2
# 5          k 01:00                 1: 懇請教導，感謝~: -----: Sent from JPTT on my Asus ASUS_Z012DA.套件做法：

library(data.table)
library(pipeR)

DT <- data.table(time = c(""01:00"", ""02:00"", ""03:00"", ""04:00"", ""05:00""),
                 characters = c(""asjejeldk"", ""dwewgw"", ""lefweg"", ""ers"",
                                ""qaqasdfd""))

# 1.
DT[ , .(character = unlist(tstrsplit(characters, """"))), by = .(time)][ ,
      .(characters = paste(unique(character), collapse = """")), by = .(time)]
#     time characters
# 1: 01:00    asjeldk
# 2: 02:00       dweg
# 3: 03:00      lefwg
# 4: 04:00        ers
# 5: 05:00      qasdf


# 2.
DT[ , .(character = unlist(tstrsplit(characters, """"))), by = .(time)][ ,
      .(cnt = .N), by = .(time, character)]
#      time character cnt
#  1: 01:00         a   1
#  2: 01:00         s   1
#  3: 01:00         j   2
#  4: 01:00         e   2
#  5: 01:00         l   1

--

--","R_Language"
"609","M.1505305534.A.764","tony1331","問題","",2017-09-13 20:25:31,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來

[軟體熟悉度]:
寫過程式，R 是我的第一次

[問題敘述]:http://i.imgur.com/yKt85T3.jpg目前只會單列unique，想把每列都unique~


懇請教導，感謝~

不好意思手機發文好像怪怪的


-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"610","M.1505062779.A.9B8","lyssa","問題","set.seed 取消",2017-09-11 00:59:37,NA,NA,"[問題類型]:

程式諮詢


[軟體熟悉度]:

新手


[問題敘述]:

如果 console 以執行過 set.seed(1)

是否有指令可以 讓它恢復成未固定的隨機取樣呢

謝謝 QQ



[環境敘述]:

R studio



[關鍵字]:

set.seed  隨機取樣





--","R_Language"
"611","M.1504967499.A.46E","celestialgod","問題","Re: 日期與迴圈問題",2017-09-09 22:31:37,NA,NA,"※ 引述《swilly0906 (史威利哥哥)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我有一個工作的raw data: 其中有一個column是時間(小時:分鐘:秒): 現在我想把時間全部變成以分鐘表示: 且超過(含)30秒以上,強制進位一分鐘: [程式範例]:: library(chron): test <- c(""01:11:28"", ""01:01:30"", ""02:32:31"",""00:30:42""): timestest <- times(test): 60 * hours(timestest) + minutes(timestest) + round(seconds(timestest)/60): #這個ouput輸出的vector,就是我要的樣式,結果我突然發現round(0.5)竟然不會進位成1: #所以我只好寫迴圈了(但我是新手,以前根本沒碰過迴圈就是了...)round1 <- function(x){
  a <- vector(""integer"", length(x))
  for(i in seq_along(x)) {
    if(x[i] < 0.5){
      a[i] <- floor(x[i])
    } else if(x[i] >= 0.5 & x[i] <= 1){
      a[i] <- ceiling(x[i])
    }
  }
  return(a)
}
# 我不熟chron這個套件，但是用data.table應該是差不多意思
library(data.table)
times <- c(""01:11:28"", ""01:01:30"", ""02:32:31"",""00:30:42"")
timestest <- as.ITime(times)
60 * hour(timestest) + minute(timestest) + round1(second(timestest)/60)
# [1]  71  62 153  31: round1 <- function(x){:   for(i in 1:length(x)){:    if(x[i]<0.5){:        a <- floor(x[i]):      }:    else if(x[i]>=0.5 & x[i]<=1){:        a<- ceiling(x[i]):      }:    else{:        a <- 1:      }:    print(a):  }: }: 60 * hours(timestest) + minutes(timestest) + round1(seconds(timestest)/60): 結果發現output出現錯誤(應該說不是我要的output): 我直接問了,這邊到底要怎麼改才對??????????????: ---------------------------------------------------------------------------: 後記: 後來我在Stackoverflow找到類似問題,網友說用ifelse就可以了: 60 * hours(timestest) + minutes(timestest) +: ifelse(seconds(timestest)/60<0.5,0,1) #這個output就是我要的答案(所以算解決了): 但我還是想知道,如果我很頑固,一定要用上面的function處理: 到底要怎麼寫啊??請各位大大救救我QQ: [關鍵字]: #時間單位以分鐘單位表示: #迴圈loop: #function你也可以試試看這個：

library(lubridate)
times <- c(""01:11:28"", ""01:01:30"", ""02:32:31"",""00:30:42"")
durations <- as.duration(hms(times))[email<U+00A0>protected]<- round([email<U+00A0>protected]/ 60)
minutes(durations)$minute
# [1]  71  62 153  31



--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"612","M.1504966415.A.463","swilly0906","問題","日期與迴圈問題",2017-09-09 22:13:32,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有一個工作的raw data

其中有一個column是時間(小時:分鐘:秒)

現在我想把時間全部變成以分鐘表示

且超過(含)30秒以上,強制進位一分鐘

[程式範例]:
library(chron)
test <- c(""01:11:28"", ""01:01:30"", ""02:32:31"",""00:30:42"")
timestest <- times(test)
60 * hours(timestest) + minutes(timestest) + round(seconds(timestest)/60)
#這個ouput輸出的vector,就是我要的樣式,結果我突然發現round(0.5)竟然不會進位成1
#所以我只好寫迴圈了(但我是新手,以前根本沒碰過迴圈就是了...)
round1 <- function(x){
  for(i in 1:length(x)){
   if(x[i]<0.5){
       a <- floor(x[i])
     }
   else if(x[i]>=0.5 & x[i]<=1){
       a<- ceiling(x[i])
     }
   else{
       a <- 1
     }
  print(a)
 }
}
60 * hours(timestest) + minutes(timestest) + round1(seconds(timestest)/60)

結果發現output出現錯誤(應該說不是我要的output)

我直接問了,這邊到底要怎麼改才對??????????????

---------------------------------------------------------------------------
後記: 後來我在Stackoverflow找到類似問題,網友說用ifelse就可以了

60 * hours(timestest) + minutes(timestest) +
ifelse(seconds(timestest)/60<0.5,0,1) #這個output就是我要的答案(所以算解決了)

但我還是想知道,如果我很頑固,一定要用上面的function處理

到底要怎麼寫啊??請各位大大救救我QQ


[關鍵字]

#時間單位以分鐘單位表示
#迴圈loop#function--","R_Language"
"613","M.1504708653.A.4AA","andrew43","情報","R 板專用search: https://goo.gl/AxCbkr",2017-09-06 22:37:29,NA,NA,"各位板友好，

以下網址是可以搜尋本看板文章及精華區的 google custom searchhttps://cse.google.com/cse/publicurl?cx=010367937036022115655:isru2d9p09y縮一下https://goo.gl/AxCbkr請大家多多利用。

請注意，
目前這個頁面是我個人google帳號所擁有，
所以我有權看見有多少人使用它，
但不會看見是誰使用與輸入之關鍵字。
如果板友對此不甚放心，
可以自行製作個人使用的 custom search，
只要記得把搜尋網頁範圍限制在https://www.ptt.cc/man/R_Language/-> 就是爬精華區
及https://www.ptt.cc/bbs/R_Language/-> 就是爬現有文章
之內即可。

若不希望使用 google custom search 介面，
可在任意 google search 中加入以下字串：
site:https://www.ptt.cc/*/R_Language/以限制 google 搜尋位址，亦可達到目的。

--","R_Language"
"614","M.1504702051.A.608","celestialgod","公告","新版規及試辦禁止自刪",2017-09-06 20:47:27,NA,NA,"板規已經停留在初板板規許久

現在引用我管理的另一個板-統計板的板規

並做一些修改以適用本板

----------------------------------------

本板板規採累進制初犯：警告一次再犯：水桶一周累犯：水桶加倍上述處罰適用於下列七類文類一．禁空白/過短文過短文乃指二行以下文（含二行）或未滿２０字文，符前述任一要件者．
　　煩請善用""推薦文章功能""（將游標對著欲推之文或其內按大寫半型X）二．不明文不明文仍指意義不明，致使他人產生閱讀障礙之注音文、火星文或
    不當之重覆推文等內容三．謾罵文（含推文）含有挑釁、辱罵、毀謗、人身攻擊或流於非理性討論者四．政治文/與本板無關廣告文等偏離看板主旨文請張貼與本板相關文章五．非板主人員使用公告po文時之文章種類請勿選""[公告]""，
　　另如[么告][公吉]等混淆視聽之標題亦不得使用。六．未經作者同意擅自轉錄他人作品無論由本板轉文或者轉文來本板，請先經過作者同意。以下為特殊違規從重處置（可越級處置，如不給予警告直接水桶及給予劣文處置）七．惡意擾亂板上秩序如惡意轉文、鬧板、洗板或違反板規情節重大者皆包含在內。

以上板規若有未盡事宜，板主隨時保有對板規解釋權及修改權．2015/09/06 celestialgod/andrew43/cywhale註一：對板規有意見者，可以推文或書信告知，有違規行為亦同．

--","R_Language"
"615","M.1504701434.A.A4C","celestialgod","情報","R的相關資源",2017-09-06 20:37:10,NA,NA,"重新整理Wush大大的文章

----------------------------------------------------------

歡迎大家推文提供資源和建議，版主不定期會更新這個列表# 線上學習資源## 中文- R導論http://www.biosino.org/pages/newhtm/r/tchtml/- 國網中心的R學習筆記http://statlab.nchc.org.tw/rnotes/- 陳鐘誠老師的免費電子書 -- 機率與統計 (使用 R 軟體)http://ccckmit.wikidot.com/st:main- 2014年資料科學愛好者年會，資料分析上手課程之教材與影片http://taiwanrusergroup.github.io/DSC2014Tutorial/- R語言翻轉教室http://www.datascienceandr.org- Tibame R語言教學https://www.tibame.com/course/41## 英文- coursera, R Programminghttps://www.coursera.org/course/rprog- codeschool, 線上互動式的R學習網站http://tryr.codeschool.com/- 兩分鐘的R簡介http://www.twotorials.com/- Google Dev的許多教學影片http://www.youtube.com/user/GoogleDevelopers- R and Data Mininghttp://cran.r-project.org/doc/contrib/Zhao_R_and_data_mining.pdf- EDX線上課程：https://www.edx.org/course/introduction-r-data-science-microsoft-dat204x-5https://www.edx.org/course/programming-r-data-science-microsoft-dat209x-4- DataCamphttps://www.datacamp.com/- swirlhttp://swirlstats.com/# 線上討論區## 中文- 發信到R社群mailing list討論http://www.meetup.com/Taiwan-R/messages/archive/- R軟體學會的台灣R使用者論壇https://groups.google.com/forum/#!forum/taiwanruser- 統計之都http://cos.name/cn/forum/15- 陳景祥老師的FB社團https://www.facebook.com/groups/1210634969026548/## 英文- R mailing listhttps://stat.ethz.ch/mailman/listinfo/r-help- stackoverflowhttp://stackoverflow.com/# 實體聚會- MLDM Monday:https://www.meetup.com/Taiwan-R/events/169290002/- 台灣R 研討會https://goo.gl/iDjCHD- R語言應用講座https://goo.gl/ucRmaK# 電子書## 英文- Data Science Bookhttp://jsresearch.net/groups/teachdatascience/wiki/- The R Infernohttp://www.burns-stat.com/pages/Tutor/R_inferno.pdf- The R Manualshttp://cran.r-project.org/manuals.html- The R Languagehttp://stat.ethz.ch/R-manual/R-patched/doc/html/- R by examplehttp://www.mayin.org/ajayshah/KB/R/index.html- Introduction to Probability and Statistics Using Rhttp://cran.r-project.org/web/packages/IPSUR/vignettes/IPSUR.pdf- Advanced R Programminghttp://adv-r.had.co.nz/- R practicalshttps://goo.gl/LfGhD3- R for spatial analysishttps://goo.gl/LSffMj- Learning Statistics with Rhttp://health.adelaide.edu.au/psychology/ccs/teaching/lsr/- R language for Programmershttp://www.johndcook.com/R_language_for_programmers.html- Little Book of R for Time Serieshttp://a-little-book-of-r-for-time-series.readthedocs.org/en/latest/- R and Data Mininghttp://cran.r-project.org/doc/contrib/Zhao_R_and_data_mining.pdf## 中文-https://joe11051105.gitbooks.io/r_basic/content/- 台北大學林建甫老師的<<醫學統計與R>>http://web.ntpu.edu.tw/~cflin/Teach/R/R06C01Intro.pdf- 淡江大學吳漢銘老師的<<統計計算語言R學習手冊>>http://www.hmwu.idv.tw/downloads/Teaching/LearningR-content.pdf# 指令表## 中文- 版友 JAHT 提供：https://goo.gl/Da31wp## 英文- Rstudio Cheatsheets :http://www.rstudio.com/resources/cheatsheets/--

CHANGES

2017-09-06

- 整理資源，部分改以縮網址呈現
- 整理板友新增的資源
- 新增R語言翻轉教室
- 新增陳景祥老師的FB社團

2015-01-13

開始紀錄修編緣由

- 新增Rstdio Cheatsheets
- 新增Coursera R Programming
--","R_Language"
"616","M.1504681836.A.C60","a78998042a","問題","Re: 矩陣的處理...拜求各位大大",2017-09-06 15:10:26,NA,NA,"來個基本語法版

通常遇到行列數量差異很大的計算時
就要設法利用R語言物件的原始結構特性

像是如果你有一個矩陣 X
100萬列，20行

你需要列加總，你第一個選擇不會是
apply(X, 1, sum)

而是
X[,1] + X[,2] +....+ X[,20]



同理可證，原本的問題

# 資料生成
X = matrix(c(replicate(50, c(rep(0, 6), rnorm(1)))),,8, byrow = TRUE)
X[sample(1:dim(X)[1], 10),] = 0

# 生成結果向量
result = rep(NA, dim(X)[1])

# 依行判讀
for(i in 1:m)
  result[is.na(result) & X[,i]!=0] = X[is.na(result) & X[,i]!=0, i]
result[is.na(result)] = 0

沒驗算，應該是對的吧..... XD
不知道跟data.table哪個快，晚點再比一下※ 引述《s3714443 (metalheads)》之銘言：: http://imgur.com/a/1s7Is: 資料大概是長這樣: 我想要處理的是：: 像第8 row就有兩個非0的數字: 那我就是取最左的那column   26.57這個數字: 倒數第2 row 有26.43跟26.57這兩個數字: 那就是取最左邊column的26.43: 反正就是 先選取特定column(MA10down1~MA10donw9)之中: 逐row先看有沒有非0的數字，有就取最左column的，沒有就取0: 然後就是mutate出來新的一行: 我想不到除了sapply之外的辦法了: 但是我的資料有500多萬筆: sapply可能會跑到電腦燒掉ＸＤ: 感恩各位--","R_Language"
"617","M.1504681380.A.D29","MonsterBorn","問題","Shiny中plot位置的問題",2017-09-06 15:02:56,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
在建立類神經網路時，使用Shiny介面想Plot出最後的類神經網路結構圖
但Plot出來的圖總是會出現在R內，而不是在Shiny介面上
如下圖，謝謝大家。

[程式範例]:
原諒我僅列出部分程式碼ui部分mainPanel({
tabsetPanel(
tabPanel(""結構圖"", plotOutput(""data2Plot"")),
tabPanel(""Summary"", verbatimTextOutput(""summary"")),
tabPanel(""表格"", tableOutput(""table2""))
)
}server部分output$data2Plot<-renderPlot({
plot(datafile2())
})

截圖：https://imgur.com/a/3sblH[環境敘述]:

R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] neuralnet_1.33 shiny_1.0.3

loaded via a namespace (and not attached):
 [1] R6_2.2.2        htmltools_0.3.6 tools_3.3.3     Rcpp_0.12.10
 grid_3.3.3      jsonlite_1.5    digest_0.6.12
 [8] xtable_1.8-2    httpuv_1.3.5    mime_0.5

[關鍵字]:Shiny  neuralnet--","R_Language"
"618","M.1504625084.A.934","x9060000456","問題","Shiny上做crawler(爬蟲)",2017-09-05 23:24:41,NA,NA,"- 問題: 各位大大好, 目前想在shiny上做爬蟲,但一直出現'Warning: Error in curl::curl_fetch_memory:Bad URL, colon is first character', 感激不盡![問題類型]:Shiny與Crawler做連結[問題敘述]:想在Shiny進行爬蟲, 並進行文字雲分析![程式範例]:#Submit使用 https://forum.gamer.com.tw/C.php?bsn=23805&snA=564246&tnum=13 為例suppressPackageStartupMessages({# library(tcltk)library(httr)library(data.table)library(stringr)library(rvest)require(jiebaR)require(data.table)# library(tidyverse)library(text2vec)library(stringr)# library(iterators)library(pbapply)# library(doParallel)library(class)library(plyr)library(DT)library(wordcloud)require(RColorBrewer)library(reshape2)library(tmcn)library(parallel)library(shiny)library(curl)})ui <- shinyUI(fluidPage(# Application titletitlePanel(""Word Cloud""),tags$style(type=""text/css"","".shiny-output-error { visibility: hidden; }"","".shiny-output-error:before { visibility: hidden; }""),sidebarLayout(# Sidebar with a slider and selection inputssidebarPanel(#######textInput(""scholarid"",'google scholar profile link',value = """"),actionButton(""submit"", ""Submit""),hr(),sliderInput(""freq"",""Minimum Frequency:"",min = 1,  max = 50, value = 15),sliderInput(""max"",""Maximum Number of Words:"",min = 1,  max = 300,  value = 100)),# Show Word CloudmainPanel(plotOutput(""plot"")))))server <- shinyServer(function(input, output, session) {# Define a reactive expression for the document term matrixterms <- reactive({# Change when the ""update"" button is pressed...input$update# ...but not for anything elseisolate({withProgress({setProgress(message = ""Processing corpus..."")getTermMatrix(input$submit)})})})# Make the wordcloud drawing predictable during a sessionwordcloud_rep <- repeatable(wordcloud)output$plot <- renderPlot({v <- terms()wordcloud_rep(names(v), v, scale=c(8,1),min.freq = input$freq, max.words=input$max,colors=brewer.pal(8, ""Dark2""))})})# Using ""memoise"" to automatically cache the resultsgetTermMatrix <- function(f) {cutter <- worker()core <- detectCores() - 1cl <- makeCluster(core)clusterEvalQ(cl, library(magrittr))clusterEvalQ(cl, library(httr))clusterEvalQ(cl, library(rvest))f <- as.character(f)Contents <- f %>% GET(encoding = 'UTF-8') %>% content %>%html_nodes(css = '.c-article__content div') %>% html_text()DF_Data_list <- list()for(i in 1:length(Contents)){DF_Data_list[i] <- as.character(Contents[i])}text <- sapply(DF_Data_list, function(x) {segment(x, cutter)})Data_list_split.token <- itoken(text)Data_list_split.vocab <- create_vocabulary(Data_list_split.token, ngram =c(1L, 1L))Data_list_split.vocab <- Data_list_split.vocab %>% data.frame %>% .[order(.$ term_count, decreasing = T), -3]v <- Data_list_split.vocab[, 2] %>% as.vector()names(v) <- Data_list_split.vocab $ termv}shinyApp(ui, server)--","R_Language"
"619","M.1504624323.A.DB9","owem0410","問題","Rstudio 輸入中文",2017-09-05 23:12:00,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:之前因為沒這個需求所以也沒去管它，有需要在剪下貼上，但是最近需要打大量的中文google到對岸的網站照上面的處理還是沒辦法[程式範例]:[環境敘述]:R version 3.4.1 (2017-06-30)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.3 LTSMatrix products: defaultBLAS: /usr/lib/libblas/libblas.so.3.6.0LAPACK: /usr/lib/lapack/liblapack.so.3.6.0locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] compiler_3.4.1 tools_3.4.1[關鍵字]:Ubuntu Rstudio------------------------------------------以解決附上解決方法我是參考rstudio官網上面回文方法如下＄wget http://ikuya.info/tmp/fcitx-qt5-rstudio.tar.gz＄tar xf fcitx-qt5-rstudio.tar.gz＄cd fcitx-qt5-rstudio＄sudo apt install ./fcitx-frontend-qt5-rstudio_1.0.5-1_amd64.deb./libfcitx-qt5-1-rstudio_1.0.5-1_amd64.deb之後我就可以輸入中文了--","R_Language"
"620","M.1504520266.A.D91","hotlin0709","問題","大筆資料多條件的平均問題",2017-09-04 18:17:44,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
有筆大資料，店名有1000個，然後有每天的營業額，也有日期跟星期幾的欄位，
我想要得知1到1000號店在星期一到星期天的平均營業額。
ex：1號店，星期一，10000
    1號店，星期二，9004
      .
      .
    1000號電，星期天，10220

請問有辦法可以做到嗎？
謝謝

--","R_Language"
"621","M.1504455481.A.D70","d03n3ji3","問題","新手預測組合 利用shiny",2017-09-04 00:17:56,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

希望各位能給我一點方向或者意見。

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

學校老師出了一道題目，但接觸R的時間真的不久，沒有甚麼頭緒

老師說可以試著用R shiny 來做做看

假設給你一塊地，上面能種不同的菜，但是地的大小有限，

可以自己選擇甚麼菜種多少面積，

一樣大小的地產量一樣，因為會有天氣或是各種因素的影響(不用放進去裡面)，

所以看看最後誰預測的較為準確

做了一年後從農產品市場交易行情看誰的預測組合利潤較高。

做出來後最終是要給很多人填寫他們的預測 ， 然後看誰預測的利潤較為高。

--","R_Language"
"622","M.1504427928.A.B2A","username","問題","請教一下股票資訊源",2017-09-03 16:38:38,NA,NA,"最近常用getsymbols去抓股票的資料
但是遇到一個問題  歐洲或者是大陸的股票
前者歐洲是常常明明YAHOO網頁上有資料，但是抓不下來
後者也常常有這樣的問題
請教各位高手，是否可以建議我其他的資訊源
或者是抓歐洲跟大陸的股票資料時有哪裡需要注意的地方
非常感謝

--
   湖西月下望,
     盼君來相見,
       長夜空寂寞,
         無語問蒼天.Designed by[email<U+00A0>protected](∼ 獨 醉 狂 沙 ∼).  .     ☆   .<U+7225>☆   .   ★       .    ☆      .  ☆    .--","R_Language"
"623","M.1504264562.A.98C","celestialgod","問題","Re: 兩兩比較運算",2017-09-01 19:15:58,NA,NA,"※ 引述《pk790127 (<>)》之銘言：: ※ 引述《pk790127 (<>)》之銘言：: : [問題類型]:: : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : 算是有學了一陣子,但感覺程式邏輯還是很差: : [問題敘述]:: : [關鍵字]: dtw , 距離矩陣 ,兩兩比較: : 以上 就是我的問題敘述,不曉得有沒有表達清楚: : 基本上就是多層迴圈太慢了,我也正在嘗試使用lapply家族進行運算: : 謝謝~~: 回應自己的問題,板友提出我的問題瓶頸不在於矩陣填值的部份,在於我修改的演算法上: 實際上,我修改了dtw套件當中的dtw的函式,把權重的概念加進去: 我測試了同筆資料用於原始dtw函式與我修改後的dtw(kai_dtw)函式去做運算時間的比較: 果真...差了6秒多,問題在於我修改的函式!! (非常感謝兩位版友): dtw的程式碼如下,我儘截錄我修改的部份,只有增加一個矩陣並做相乘: lm <- NULL:   if (is.null(y)) {:     if (!is.matrix(x)):       stop(""Single argument requires a global cost matrix""):     lm <- x:   }:   else if (is.character(dist.method)) {:     x <- as.matrix(x):     y <- as.matrix(y):     lm <- proxy::dist(x, y, method = dist.method) #lm x,y 距離矩陣:     lm.v<- as.vector(lm)  #轉成vector#:     weight<-vector()      #weight function#:     for(i in lm.v){:       tmp<-logisticWeight(i,median(lm.v),g):       weight<-c(weight,tmp):     }:     lm.v_weight <- lm.v*weight     #相乘#:     lm<-matrix(lm.v_weight ,length(x),length(y))  #轉回矩陣#:   }:   else if (is.function(dist.method)) {:     stop(""Unimplemented""):   }: .: .: .: 紅色表示我新增的部份,原始程式碼下面還有很多,但我直接省略: 在原始function中填入x與y目的是要計算距離矩陣lm: 我先將它轉成vector的形式,並且利用logisticWeight函式(自己寫的公式): 並搭配for迴圈逐一的給予Weight(vector的形式),再將lm.v與weight相乘: 最後再轉成適當大小矩陣。: 簡單來說,原先是矩陣,我運算完(乘上weight)後轉回矩陣,讓它做DTW的運算: logisticWeight函式內容,僅是一般的S形函數: logisticWeight <- function(i,mc,g){:   1 / (1 + exp(-g * (i - mc ))): }: 我想我應該要優化它賦與權重與相乘的動作,才能達到我降低運算時間的需求: 謝謝~: 小試了一下,將for loop改成用apply家族,大大改善運算效率: (應該沒有錯吧!?): weight<-vector()      #weight function#: for(i in lm.v){:   tmp<-logisticWeight(i,median(lm.v),0.05):   weight<-c(weight,tm): }: 改成: tmp<-sapply(1,function(x){logisticWeight(lm.v,median(lm.v),0.05)}): weight<- as.vector(tmp)其實可以直接改成

lm.v<- as.vector(lm)
lm.v_weight <- sapply(seq_along(lm.v), function(i){
  logisticWeight(i, median(lm.v), g)
})
lm.v_weight <- lm.v*weight
...

快就快在sapply會預先配置輸出的vector大小

不然其實weight先給他輸出長度，在用迴圈，速度是一樣的

(詳細可以在板上/preallocation可以找到我的文章)


至於你之前的code可以直接這樣改：

library(dtw)
library(Matrix)

# 產生資料
x <- replicate(10, rnorm(sample(6:10, 1)), simplify = FALSE)

# 直接產生出來要比較的i, j位置，然後用apply餵進去
out <- apply(subset(expand.grid(seq_along(x), seq_along(x)), Var1 > Var2),
             1, function(v){
  c(v, dtw(x[[v[1]]], x[[v[2]]])$distance)
})

# 把out轉成距離矩陣
output <- as.dist(sparseMatrix(out[1, ], out[2, ], x = out[3, ],
                  dims = rep(length(x), 2)))

這樣就會很快了(攤手


--","R_Language"
"624","M.1504248024.A.A0B","pk790127","問題","Re: 兩兩比較運算",2017-09-01 14:40:22,NA,NA,"※ 引述《pk790127 (<>)》之銘言：: [問題類型]:: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): 算是有學了一陣子,但感覺程式邏輯還是很差: [問題敘述]:: [關鍵字]: dtw , 距離矩陣 ,兩兩比較: 以上 就是我的問題敘述,不曉得有沒有表達清楚: 基本上就是多層迴圈太慢了,我也正在嘗試使用lapply家族進行運算: 謝謝~~回應自己的問題,板友提出我的問題瓶頸不在於矩陣填值的部份,在於我修改的演算法上
實際上,我修改了dtw套件當中的dtw的函式,把權重的概念加進去

我測試了同筆資料用於原始dtw函式與我修改後的dtw(kai_dtw)函式去做運算時間的比較
果真...差了6秒多,問題在於我修改的函式!! (非常感謝兩位版友)

dtw的程式碼如下,我儘截錄我修改的部份,只有增加一個矩陣並做相乘

lm <- NULL
  if (is.null(y)) {
    if (!is.matrix(x))
      stop(""Single argument requires a global cost matrix"")
    lm <- x
  }
  else if (is.character(dist.method)) {
    x <- as.matrix(x)
    y <- as.matrix(y)
    lm <- proxy::dist(x, y, method = dist.method) #lm x,y 距離矩陣lm.v<- as.vector(lm)  #轉成vector#weight<-vector()      #weight function#for(i in lm.v){tmp<-logisticWeight(i,median(lm.v),g)weight<-c(weight,tmp)}lm.v_weight <- lm.v*weight     #相乘#lm<-matrix(lm.v_weight ,length(x),length(y))  #轉回矩陣#}
  else if (is.function(dist.method)) {
    stop(""Unimplemented"")
  }
.
.
.
紅色表示我新增的部份,原始程式碼下面還有很多,但我直接省略

在原始function中填入x與y目的是要計算距離矩陣lm
我先將它轉成vector的形式,並且利用logisticWeight函式(自己寫的公式)
並搭配for迴圈逐一的給予Weight(vector的形式),再將lm.v與weight相乘
最後再轉成適當大小矩陣。
簡單來說,原先是矩陣,我運算完(乘上weight)後轉回矩陣,讓它做DTW的運算

logisticWeight函式內容,僅是一般的S形函數
logisticWeight <- function(i,mc,g){
  1 / (1 + exp(-g * (i - mc )))
}

我想我應該要優化它賦與權重與相乘的動作,才能達到我降低運算時間的需求

謝謝~


小試了一下,將for loop改成用apply家族,大大改善運算效率
(應該沒有錯吧!?)

weight<-vector()      #weight function#
for(i in lm.v){
  tmp<-logisticWeight(i,median(lm.v),0.05)
  weight<-c(weight,tm)
}

改成

tmp<-sapply(1,function(x){logisticWeight(lm.v,median(lm.v),0.05)})
weight<- as.vector(tmp)


--","R_Language"
"625","M.1504114085.A.EE5","scts1215","問題","excel無法計算變項",2017-08-31 01:28:02,NA,NA,"目前想學習R
剛試用卻遇到困難
自己做了一個excel如下
檔名為test

age
52
46
20
25
26
60
35
25
36
68
42

匯入到Rstudio的語法為：> library(readxl)> test <- read_excel(""~/R/test.xlsx"", col_types = c(""numeric""))但我輸入平均值  mean(test)
卻出現這樣的訊息  Warning message:
In mean.default(test) : argument is not numeric or logical: returning NA
再輸入標準差  sd(test)
出現Error in is.data.frame(x) :
  (list) object cannot be coerced to type 'double'


平均值的部分我有使用colmeans有成功，
但我疑問是若使用scan()自行輸入資料跑mean(test)和sd(test)是能成功的
煩請各位解惑
謝謝

--","R_Language"
"626","M.1504085270.A.0BE","ciuhkimo","問題","survminer Package無法安裝",2017-08-30 17:27:45,NA,NA,"文章分類提示:問題：無法安裝survminer package[問題類型]:安裝套件問題：windows系統使用可以，但是MacBook Air無法[軟體熟悉度]:請把以下不需要的部份刪除新手[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的要跑survival analysis和作圖，survival package可以安裝使用
但是survminer無法安裝使用
我是使用R version 3.4.1 (2017-06-30) -- ""Single Candle""

[程式範例]:> library(survminer)[環境敘述]:R version 3.4.1 (2017-06-30) -- ""Single Candle""Copyright (C) 2017 The R Foundation for Statistical ComputingPlatform: x86_64-apple-darwin15.6.0 (64-bit)R 是免費軟體，不提供任何擔保。在某些條件下您可以將其自由散布。用 'license()' 或 'licence()' 來獲得散布的詳細條件。R 是個合作計劃，有許多人為之做出了貢獻。用 'contributors()' 來看詳細的情況並且用 'citation()' 會告訴您如何在出版品中正確地參照 R 或 R 套件。用 'demo()' 來看一些示範程式，用 'help()' 來檢視線上輔助檔案，或用 'help.start()' 透過 HTML 瀏覽器來看輔助檔案。用 'q()' 離開 R。[R.app GUI 1.70 (7375) x86_64-apple-darwin15.6.0][Workspace restored from /Users/user/.RData][History restored from /Users/user/.Rapp.history]> library(survminer)Loading required package: ggplot2Error: package or namespace load failed for ‘ggplot2’ in loadNamespace(j <- i[[1L]], c(lib.loc, .libPaths()), versionCheck = vI[[j]]):there is no package called ‘munsell’錯誤: package ‘ggplot2’ could not be loaded嘗試 URL 'https://cloud.r-project.org/bin/macosx/el-capitan/contrib/3.4/survminer_0.4.0.tgz'Content type 'application/x-gzip' length 2924896 bytes (2.8 MB)==================================================downloaded 2.8 MBThe downloaded binary packages are in/var/folders/nx/j08ccp31313f8w8rhf985drh0000gn/T//Rtmpfb1AmP/downloaded_packages[關鍵字]:選擇性，也許未來有用謝謝大家

--","R_Language"
"627","M.1504073346.A.4C9","pk790127","問題","兩兩比較運算",2017-08-30 14:09:03,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

不曉得標題這樣下對不對,我想要計算多比不等長的資料(存在list)
舉例:共四筆資料,我想要運算1 vs 2,3,4 ; 2 vs 3,4 ; 3 vs 4
(vs:比較或是運算,並且重覆的不算)

效能諮詢(我想讓R 跑更快)

我已經有使用多層for loop將上述描述實作完畢,但是迴圈多層,運算效能非常差...


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)
算是有學了一陣子,但感覺程式邏輯還是很差

[問題敘述]:
如上述,我要運算多筆資料,且作兩兩比較,目的是將計算的結果使用矩陣表示

舉例:共四筆資料,1,2,3,4 想要兩兩比較,並以矩陣方式表示 (如下圖)

    1     2    3
2 1vs2

3 1vs3  2vs3

4 1vs4  2vs4  3vs4




[程式範例]:
我直接貼程式碼,並以註解的方式解釋
實際上我要做的是修改DTW這個套件,並已經將裡面的內容改成我要的運算方式


sample_list<- list(1,2,3,4)
#有幾筆資料就設定list放幾筆的資料tmp1 <-list()
i <-1
  for(i in 1:3){
    tmp <- lapply(sample_list, function(x) x+i)
    tmp1[[i]] <- unlist(tmp)
    tmp1[[i]][which(tmp1[[i]]>4)] <- NA
  }
#for 1 到 3(4筆資料-1自己),逐步隨著i值相加,最後將大於4的設為NAtmp1 <-lapply(tmp1, function(x) x[!is.na(x)])

#把NA 刪掉tmp_vector<-vector()
  for (i in 1:3){
    for(k in 1:length(unlist(tmp1[i]))){
      for(j in unlist(tmp1[i])[k]){
      kai<-kai_dtw(x=unlist(data.list[i]) ,y=unlist(data.list[j]),
                        g=0, step.pattern = symmetric1)
      tmp<- kai$distance
      tmp_vector <- c(tmp_vector,tmp)
      }
    }
  }
#多層迴圈,達到我要兩兩比較的意境,當中的kai_dtw是我修改演算法的函式它對應的x與y一定要unlist,後面就是將其取distance存在vector中tmp_vector1 <- matrix(nrow = 4,ncol = 4)

tmp_vector1 <- as.dist(tmp_vector1)

tmp_vector1[1:6] <- tmp_vector

#創一個空的矩陣(tmp_vector1)m,並轉算距離矩陣的形式,將前述得到的vector填入,得到我要的結果[關鍵字]: dtw , 距離矩陣 ,兩兩比較

以上 就是我的問題敘述,不曉得有沒有表達清楚
基本上就是多層迴圈太慢了,我也正在嘗試使用lapply家族進行運算
謝謝~~

--","R_Language"
"628","M.1504069433.A.130","dppman","問題","Windows 10 無Administrator權限安裝R Package",2017-08-30 13:03:50,NA,NA,"請問一下,

  我的環境是Windows 10 X64 Enterprise
R 3.4.1 (Administrator已經安裝好)

  因為沒有Administrator權限所以我的RStudio(1.0.153版)適安裝zip版
Ref.https://download1.rstudio.org/RStudio-1.0.153.zip是現在要安裝R Package時,他卻會安裝到一個網路磁碟機,
用Sys.getenv()看
下列兩個環境變數是指到網路磁碟機的路徑
R_LIBS_USER
R_USER

  請問如何在RStudio啟動時就把這兩個環境變數所指的路徑改到自己想要的路徑呢?
google過, 有人說設在.Rprofile,但也有人說設在.Renviron, 但是了都無效...

  我的RStudio中的Global options中的工作目錄是設在C:/Users/MIyID/RworkDir,
當用RStudio中的Install packages功能要安裝Package時卻不能改Install to Library:
所指的路徑! :(

  不知道有前輩可以分享一下怎麼改嗎?

Thanks in advance!


--","R_Language"
"629","M.1503916513.A.335","asdfrtg","問題","用quantmod抓原物料資料",2017-08-28 18:35:11,NA,NA,"[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
想用r抓取KC=F的資料



[環境敘述]:

getsymbols(""CF=K"",src=yahoo)

之後試過抓取別種原物料都可以
可是唯獨咖啡不行
下面執行欄位出現error 404
[關鍵字]:選擇性，也許未來有用--","R_Language"
"630","M.1503888683.A.35C","swedrf0112","問題","Re: 矩陣的處理...拜求各位大大",2017-08-28 10:51:20,NA,NA,"看了 c 大的 code ，啟發良多XD
以下修改主要把 非 0 的 index, group by row 找最小的 column number,
再與 0 的 row bind 起來。

## data 來自 c 大的 code
DT2 <- data.table(X)
DT2[ , `:=`(V9 = sample(1:5, nrow(DT2), TRUE),
            V10 = sample(LETTERS, nrow(DT2), TRUE))]

findValueF2 = function(X){

  indm = as.matrix(data.table(which(X!=0, arr.ind = TRUE))[,min(col),by=""row""]) ## 每個非0 row 的最左邊 column number
  out_d1 = data.table(indm[,1],X[indm]) ## 指 index 與 value
  out_d2 = data.table(V1=setdiff(seq_len(nrow(X)),indm[,1]), v2=0) ## 補 0
  outd = rbindlist(list(out_d1,out_d2))[order(V1)] ## rbind 起來 by row order
  return(outd$V2)

}

st1 <- proc.time()
DT[ , v := findValue(do.call(cbind, .SD)), .SDcols = V1:V8]
t1 = proc.time() - st1

st2 <- proc.time()
DT2[ , v := findValueF2(do.call(cbind, .SD)), .SDcols = V1:V8]
t2 = proc.time() - st2

t1
# user system elapsed
# 1.16 0.05 1.24
t2
# user system elapsed
# 0.28 0.01 0.29
all.equal(DT$v,DT2$v)
# [1] TRUE※ 引述《s3714443 (metalheads)》之銘言：: http://imgur.com/a/1s7Is: 資料大概是長這樣: 我想要處理的是：: 像第8 row就有兩個非0的數字: 那我就是取最左的那column   26.57這個數字: 倒數第2 row 有26.43跟26.57這兩個數字: 那就是取最左邊column的26.43: 反正就是 先選取特定column(MA10down1~MA10donw9)之中: 逐row先看有沒有非0的數字，有就取最左column的，沒有就取0: 然後就是mutate出來新的一行: 我想不到除了sapply之外的辦法了: 但是我的資料有500多萬筆: sapply可能會跑到電腦燒掉ＸＤ: 感恩各位--","R_Language"
"631","M.1503856815.A.CF7","s3714443","問題","如何快速mutate多行？",2017-08-28 02:00:11,NA,NA,"小弟又來請教問題

 mutate(.,MA10t=SMA(Ct,10),
         MA10lower=as.numeric(Ct<MA10t),
         MA10down=as.numeric(MA10lower==1&lag(MA10lower)==0),
         MA10down1=ifelse(lead(MA10down,1)==0,0,lead(Ct,1)),
         MA10down2=ifelse(lead(MA10down,2)==0,0,lead(Ct,2)),
         MA10down3=ifelse(lead(MA10down,3)==0,0,lead(Ct,3)),
         MA10down4=ifelse(lead(MA10down,4)==0,0,lead(Ct,4)),
         MA10down5=ifelse(lead(MA10down,5)==0,0,lead(Ct,5)),
         MA10down6=ifelse(lead(MA10down,6)==0,0,lead(Ct,6)),
         MA10down7=ifelse(lead(MA10down,7)==0,0,lead(Ct,7)),
         MA10down8=ifelse(lead(MA10down,8)==0,0,lead(Ct,8)),
         MA10down9=ifelse(lead(MA10down,9)==0,0,lead(Ct,9)))
請問各位 我想要創建column 直到
MA10down60=ifelse(lead(MA10down,60)==0,0,lead(Ct,60))

不知是否有什麼好方法呢？

再者有個情況是
pmin(MA10down1,MA10down2,MA10down3,MA10down4,
     MA10down5,MA10down6,MA10down7,MA10down8,MA10down9,MA10down10...MA10down60)
有什麼方法可以巧妙把60個用精簡的語法一次選取起來？
感謝各位ＱＱ

--","R_Language"
"632","M.1503827007.A.D2A","celestialgod","問題","Re: 矩陣的處理...拜求各位大大",2017-08-27 17:43:21,NA,NA,"※ 引述《s3714443 (metalheads)》之銘言：: http://imgur.com/a/1s7Is: 資料大概是長這樣: 我想要處理的是：: 像第八行就有兩個非0的數字: 那我就是取最左的那排 26.57這個數字: 倒數第二排有26.43跟26.57這兩個數字: 那就是取最左邊的26.43: 反正就是 特定欄之中 先看有沒有非0的數字，有就取最左的，沒有就取0: 然後就是mutate出來新的一行: 我想不到除了sapply之外的辦法了: 但是我的資料有500多萬筆: sapply可能會跑到電腦燒掉ＸＤ: 感恩各位# 資料生成
n <- 5e5 + 12
m <- 8
r <- 2
X <- matrix(0, n, m)

for (i in seq(1, n - 5, by = m-r))
  X[cbind(i:(i+7), m:1)] <- rnorm(1)
X[cbind((n-1):n, 8:7)] <- rnorm(1)
# 隨機抽10000列讓整列變成0
zeroLocIdx <- sample(n, 10000)
X[zeroLocIdx, ] <- 0

# 程式開始
st <- proc.time()
# 取出全部不等於0的位置，並以matrix矩陣表示 row跟column位置 (arr.ind)
tmp <- which(X != 0, arr.ind = TRUE)
# 對每一個row取最小的column index
out <- tapply(tmp[ ,2], tmp[ ,1], min)
# 組出位置矩陣
locMat <- cbind(row = as.integer(names(out)) , col = out)
# 處理非0部分
zeroLocIdx2 <- setdiff(1:nrow(X), locMat[ , 1])
if (length(zeroLocIdx2) > 0)
  locMat <- rbind(locMat, cbind(zeroLocIdx2, 1))
# 排序
locMat <- locMat[order(locMat[ , 1]), ]
# 取出值
out <- X[locMat]
proc.time() - st
# user  system elapsed
# 1.05    0.03    1.10

驗證結果：http://imgur.com/QMpBoGh驗證0位置： all(zeroLocIdx2 == sort(zeroLocIdx)) # TRUE


搭配data.table的做法如下：

library(data.table)
# 轉成data.table
DT <- data.table(X)
# 假設有其他欄位
DT[ , `:=`(V9 = sample(1:5, nrow(DT), TRUE),
           V10 = sample(LETTERS, nrow(DT), TRUE))]

# 把上面的程式直接抓下來用
findValue <- function(X){
  tmp <- which(X != 0, arr.ind = TRUE)
  minColLoc <- tapply(tmp[ ,2], tmp[ ,1], min)
  locMat <- cbind(row = as.integer(names(minColLoc)) , col = minColLoc)
  zeroLocIdx2 <- setdiff(1:nrow(X), locMat[ , 1])
  if (length(zeroLocIdx2) > 0)
    locMat <- rbind(locMat, cbind(zeroLocIdx2, 1))
  locMat <- locMat[order(locMat[ , 1]), ]
  X[locMat]
}

st <- proc.time()
# 直接把需要的column抓出來利用do.call + cbind組成矩陣丟進去
DT[ , v := findValue(do.call(cbind, .SD)), .SDcols = V1:V8]
proc.time() - st
# user  system elapsed
# 1.04    0.04    1.09

# 驗證結果
head(DT, 40)http://imgur.com/NxjaCaH--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"633","M.1503825048.A.0CB","swedrf0112","問題","Re: 矩陣的處理...拜求各位大大",2017-08-27 17:10:46,NA,NA,"拋磚引玉，提供兩個方法XD

## 方法1: 使用 apply

# 生成測試資料
d1 = data.frame(matrix(c(0,1,2,0,0,0,1,0,2,0,2,1),nrow=4,byrow=T))
d1

###   X1 X2 X3
### 1  0  1  2
### 2  0  0  0
### 3  1  0  2
### 4  0  2  1

apply(d1,1,function(x){
             ind = which(x!=0)
             return(ifelse(length(ind)==0,0,x[min(ind)]))
})

## [1] 1 0 1 2

裡面的 ifelse 主要是針對 0,0,0 取 min(ind) 的時候會有 Warning
不然直接 return(x[min(which(x!=0))]) 也可以XD

## 方法2: 使用 data.table

library(data.table)
d2 = data.table(d1)

findLeftValueF = function(input, ...){
    x = unlist(input)  ## 每一列都是 List 物件，所以要做 unlist
    ind = which(x!=0)
    return(ifelse(length(ind)==0,0,x[min(ind)]))
}

d2[, val := findLeftValueF(.SD),by=row.names(d2)]
d2$val

## [1] 1 0 1 2

至於哪個比較快我就沒測了，應該會比 sapply 效率好點XD
有錯誤的話請板上各位大大再指教囉~※ 引述《s3714443 (metalheads)》之銘言：: http://imgur.com/a/1s7Is: 資料大概是長這樣: 我想要處理的是：: 像第八行就有兩個非0的數字: 那我就是取最左的那排 26.57這個數字: 倒數第二排有26.43跟26.57這兩個數字: 那就是取最左邊的26.43: 反正就是 特定欄之中 先看有沒有非0的數字，有就取最左的，沒有就取0: 然後就是mutate出來新的一行: 我想不到除了sapply之外的辦法了: 但是我的資料有500多萬筆: sapply可能會跑到電腦燒掉ＸＤ: 感恩各位--","R_Language"
"634","M.1503824722.A.664","k5171","問題","爬蟲個股公開資訊",2017-08-27 17:05:19,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
至公開資訊觀測站 > 營運概況 > 財務比率分析 > IFRS 後 > 財務分析資料，
爬蟲公司名稱, 以及財務分析資料的表格．
過去爬蟲以 id 或 class 爬很方便，
這次碰到沒有唯一 id 或 class 的項目，
用了最根部的 id：table01 完全爬不下來，
表格內的 class 又各有不同，
也嘗試了 xpath 都爬不下來，
求解版上的各位，非常謝謝

[程式範例]:

url <- 'http://mops.twse.com.tw/mops/web/t05st22_q1'co_id = 2330
        res <- POST(url,
                    body = list(
                            step = 1,
                            firstin = 1,
                            co_id = co_id,
                            isnew = FALSE, # 歷史資料
                            year = 106,    # 年度
                    encode = 'form')
        res_text <- content(res, as = 'text', encoding = 'UTF-8')#------------------------------------------------------------------#
        # 公司名稱 (因為公司名稱沒有唯一的 id 或 class 可獲取，因此用 xpath#------------------------------------------------------------------#
        name <- res_text %>%
                read_html(encoding = 'UTF-8') %>%
                html_node('//*[@id=""table01""]/table[2]/tbody/tr/td/b/') %>%
                html_text()
        #==> 錯誤訊息：Error in tokenize(css) : Unexpected character '/' found at position 1#------------------------------------------------------------------#
        # 表格#------------------------------------------------------------------#
        table <- res_text %>%
                 read_html(encoding = 'UTF-8') %>%
                 html_node(xpath = '//*[@id=""table01""]/center[2]/table/tbody/tr[1]/th[3]') %>%
                 html_text()
        #==> table 為 NA

        #----再嘗試將 html_text() 替換成 html_table()----#
        table <- res_text %>%
                 read_html(encoding = 'UTF-8') %>%
                 html_node(xpath = '//*[@id=""table01""]/center[2]/table/tbody/tr[1]/th[3]') %>%
                 html_table()
        #==> 錯誤訊息：Error in UseMethod(""html_table"") :
                    沒有適用的方法可將 'html_table' 套用到 ""xml_missing"" 類別的物件

[環境敘述]> sessionInfo()R version 3.4.0 (2017-04-21)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

--","R_Language"
"635","M.1503818717.A.A30","s3714443","問題","矩陣的處理...拜求各位大大",2017-08-27 15:25:13,NA,NA,"http://imgur.com/a/1s7Is資料大概是長這樣
我想要處理的是：

像第8 row就有兩個非0的數字
那我就是取最左的那column   26.57這個數字

倒數第2 row 有26.43跟26.57這兩個數字
那就是取最左邊column的26.43
反正就是 先選取特定column(MA10down1~MA10donw9)之中
逐row先看有沒有非0的數字，有就取最左column的，沒有就取0
然後就是mutate出來新的一行

我想不到除了sapply之外的辦法了
但是我的資料有500多萬筆
sapply可能會跑到電腦燒掉ＸＤ

感恩各位

--","R_Language"
"636","M.1503655016.A.A1A","ciuhkimo","問題","繪圖參數warning",2017-08-25 17:56:53,NA,NA,"繪圖參數錯誤：> warnings()Warning messages:
1: In plot.window(...) : ""level"" 不是一個繪圖參數
2: In plot.xy(xy, type, ...) : ""level"" 不是一個繪圖參數
3: In axis(side = side, at = at, labels = labels, ...) : ""level"" 不是一個繪圖參數
4: In axis(side = side, at = at, labels = labels, ...) : ""level"" 不是一個繪圖參數
5: In box(...) : ""level"" 不是一個繪圖參數
6: In title(...) : ""level"" 不是一個繪圖參數
7: In plot.window(...) : ""level"" 不是一個繪圖參數
8: In plot.xy(xy, type, ...) : ""level"" 不是一個繪圖參數
9: In axis(side = side, at = at, labels = labels, ...) : ""level"" 不是一個繪圖參數
10: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
11: In box(...) : ""level"" 不是一個繪圖參數
12: In title(...) : ""level"" 不是一個繪圖參數
13: In plot.window(...) : ""level"" 不是一個繪圖參數
14: In plot.xy(xy, type, ...) : ""level"" 不是一個繪圖參數
15: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
16: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
17: In box(...) : ""level"" 不是一個繪圖參數
18: In title(...) : ""level"" 不是一個繪圖參數
19: In plot.window(...) : ""level"" 不是一個繪圖參數
20: In plot.xy(xy, type, ...) : ""level"" 不是一個繪圖參數
21: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
22: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
23: In box(...) : ""level"" 不是一個繪圖參數
24: In title(...) : ""level"" 不是一個繪圖參數
25: In plot.window(...) : ""level"" 不是一個繪圖參數
26: In plot.xy(xy, type, ...) : ""level"" 不是一個繪圖參數
27: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
28: In axis(side = side, at = at, labels = labels, ...) :
  ""level"" 不是一個繪圖參數
29: In box(...) : ""level"" 不是一個繪圖參數
30: In title(...) : ""level"" 不是一個繪圖參數> warnings()請問這是什麼意思？

--","R_Language"
"637","M.1503632028.A.126","Esmelee","問題","xml氣象資料轉csv",2017-08-25 11:33:45,NA,NA,"文章分類提示:
問題

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
xml轉csv但是不會寫

[程式範例]:https://data.gov.tw/dataset/9176[環境敘述]:
弄了好久但就不知道怎麼寫
root跟node不知道怎麼用
找不到類似的xml格式
希望各位給我一些建議
[關鍵字]:
xml csv

--","R_Language"
"638","M.1503560187.A.8C1","ruokcnn","問題","ggplot histogram切資料的問題",2017-08-24 15:36:24,NA,NA,"我有一組資料按照市值切大中小

個別是20以下（不含20），20∼小於100，100以上（含）做為colour變數

但做直方圖出來會遇到同一根含兩個顏色

我確定資料的tag 切得很乾淨，不知道我ggplot參數有沒有錯

(我有嘗試把binwidth設19.999或20.001但都沒用)

然後公司電腦

東西出來有點麻煩我先用照的請多包涵

圖http://i.imgur.com/WWHFbkE.jpgCodehttp://i.imgur.com/bCbcA6k.jpg--","R_Language"
"639","M.1503489426.A.815","celestialgod","問題","Re: N*1資料 轉 a*b格式",2017-08-23 19:57:03,NA,NA,": 想再請教一下各位，不知道R語言對於資料量的處理效率是如何?: 因為我在嘗試各位提供的方法時，發現把檔案丟進去處理: 在下面console的地方等很久還是沒有>出現: 想把過程中的一個階段的data也點出來看也常常是還在跑的空白XD: 我的data全部約57萬筆: 因為之前只有load過10萬筆內的資料去練習畫圖之類的而已: 所以不知道是不是上到這個數字量的資料後 R在執行上就會比較需要時間?: 或是可能只是我程式有地方沒改好XD","R_Language"
"640","M.1503486206.A.9C3","clsmbstu","問題","繪圖時不直接使用變數名稱",2017-08-23 19:03:23,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
在ggplot2、plotly、leaflet等繪圖套件中，
很常直接用變數的名稱去做aesthetic mapping，
但是一旦碰到迴圈或其它programming需求，
它反而很難一般化。
像是下列的ggplot2繪圖範例就有些結果上的差別。

我知道ggplot2套件中有aes_string提供較好的解決方案，
但是其它繪圖套件（例如plotly或leaflet）有類似的function嗎？
還是它們用non-standard evaluation時不會有問題？
這個問題困擾我滿久了，有沒有人願意分享一下經驗？
謝謝！

[程式範例]:# 最一般的做法ggplot(mtcars, aes(mpg, qsec)) + geom_point() + facet_grid(. ~ am)# 利用aes_string functionggplot(mtcars, aes_string(""mpg"", ""qsec"")) + geom_point() + facet_grid(. ~ am)# 以下結果是錯誤的圖# 用[]指定columnggplot(mtcars, aes(mtcars[,1], mtcars[,7])) + geom_point() + facet_grid(. ~ am)# Non-standard evaluationggplot(mtcars, aes(eval(parse(text = ""mpg""), envir = mtcars),
                   eval(parse(text = ""qsec""), envir = mtcars))) +
  geom_point() +
  facet_grid(. ~ am)

Stack Overflow相關解答：https://goo.gl/onbTcz[關鍵字]:

Non-standard evaluation, aesthetic mapping

--","R_Language"
"641","M.1503476516.A.5CF","PhysicsBoy","問題","如何避免畫出來的直線形成鋸齒狀",2017-08-23 16:21:53,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請問一下板上的大大，我使用lines()在結果上畫斜線時，
結果都無法像一些期刊論文上的直線那麼漂亮，我畫出來的
始終都是鋸齒狀，這個問題有辦法改善嗎?



--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"642","M.1503466528.A.9E7","alternate","情報","2017國泰大數據競賽",2017-08-23 13:35:25,NA,NA,"http://i.imgur.com/uKkhPsM.jpg[關鍵字]: 2017國泰大數據競賽『保險創意挑戰賽』

[出處]:https://goo.gl/9a4SSy[重點摘要]:

這是一個國泰人壽及政治大學共同舉辦的大數據競賽，其中會有R的實機課程以及保險線
上課程，比賽內容為利用主辦方提供之資料做出企劃書投稿。


---------


我不知道發在這裡適不適合，但因為活動裡有R的實機課程，因此可能有人會有興趣。

我是想來這裡看看有沒有人想參加比賽，我的背景是112社科院的研究生，目前學習R大約
...一週，所以我超級弱，接近一張白紙，但因為我覺得參加比賽可以讓我學到更多東西
，因此希望試試看，如果你有興趣一起組隊可以來信詳聊。

如果你跟我一樣很弱沒關係，我們一起腦力激盪，如果你很強又樂於教學，那我會盡力向
你學習！我是以學習為目的參加比賽的，所以如果你的得失心很強我們也許不適合，但如
果在比賽中可以走很遠那也很好！但

--","R_Language"
"643","M.1503414254.A.448","celestialgod","問題","Re: N*1資料 轉 a*b格式",2017-08-22 23:04:10,NA,NA,"※ 引述《playaround (打滾)》之銘言：: [問題類型]:: N*1的資料 轉換成M*16: [軟體熟悉度]:: R初學: [問題敘述]:: 原始資料(csv檔)資料大致是這樣:: time1: a = 5: b = 70: c = ""rest"": ...: ...: time2: a = 8: b = 15: c = ""rest_2"": ...: ...: 想要以16列為單位整理成M*16的矩陣: 第一列是col標題: 和每列前面的a,b,c等是row標題: 類似這樣:: time        a           b            c ...: time1      5         70        ""rest"": time2      8         15       ""rest_2"": 有找一些指令好像都是以同col內同樣資料來分組: 所以不太知道目前需要做的這功能要怎麼處理: 手機發文，排版請見諒: 感謝大家: -----: Sent from JPTT on my Xiaomi MI 5.給另外一種方法參考，然後教你怎麼做自動轉型XD

dataStr <- 'time1
a = 5
b = 70
c = ""rest""
time2
a = 8
b = 15
c = ""rest_2""
time3
a = 1
b = 45
c = ""rest_3""'

# 等同於前兩位用readLines讀檔案的txt變數
txt <- strsplit(dataStr, ""\n"")[[1]]

# 把time也取代成同樣的格式
txt[grepl(""time"", txt)] <- paste0(""time = "", txt[grepl(""time"", txt)])

# 把每一列切割成 column name跟value兩個，然後用cbind合併全部分割的資料
out <- do.call(cbind, strsplit(txt, ""\\s+=\\s+""))

# 取得column names
columnNames <- unique(out[1, ])
# 把每一個column對應的value取成一個list
columnList <- lapply(columnNames, function(colname){
  type.convert(out[2 , out[1, ] == colname]) # 取出對應名字的值並做自動轉型
})

# 確定每一個欄位長度都一樣
if (length(unique(sapply(out, length))) != 1)
  stop(""每個欄位的長度不一樣，請檢查資料"")

# 給名字
names(columnList) <- columnNames
# 轉成data.frame
resultDf <- as.data.frame(columnList)

#    time a  b        c
# 1 time1 5 70   ""rest""
# 2 time2 8 15 ""rest_2""
# 3 time3 1 45 ""rest_3""> str(resultDf)'data.frame':   3 obs. of  4 variables:
 $ time: Factor w/ 3 levels ""time1"",""time2"",..: 1 2 3
 $ a   : int  5 8 1
 $ b   : int  70 15 45
 $ c   : Factor w/ 3 levels ""\""rest\"""",""\""rest_2\"""",..: 1 2 3


難得一篇完全沒用套件XD


套件版：

library(data.table)
library(stringr)
library(pipeR)

txt <- strsplit(dataStr, ""\n"")[[1]]
txt[str_detect(txt, ""time"")] <- str_c(""time = "", txt[str_detect(txt, ""time"")])

outDf <- txt %>>% str_detect(""time"") %>>% cumsum %>>%
  cbind(do.call(rbind, str_split(txt, ""\\s+=\\s+""))) %>>%
  data.table %>>% setnames(c(""id"", ""var"", ""value"")) %>>%
  `[`(j = id := NULL) %>>%
  `[`(j = eval(names(.)) := lapply(.SD, type.convert))
#    a  b        c  time
# 1: 5 70   ""rest"" time1
# 2: 8 15 ""rest_2"" time2
# 3: 1 45 ""rest_3"" time3> str(outDf)Classes ‘data.table’ and 'data.frame':        3 obs. of  4 variables:
 $ a   : int  5 8 1
 $ b   : int  70 15 45
 $ c   : Factor w/ 3 levels ""\""rest\"""",""\""rest_2\"""",..: 1 2 3
 $ time: Factor w/ 3 levels ""time1"",""time2"",..: 1 2 3
 - attr(*, "".internal.selfref"")=<externalptr>

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"644","M.1503413145.A.02B","HumuHumu","問題","shiny中選擇client端路徑的方法",2017-08-22 22:45:43,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
目前寫了一個shiny App，只要選定資料夾的路徑後，每隔30秒都會讀取該路徑的所有檔案
並繪圖，在windows上使用choose.dir搭配Action Button執行都沒有問題，但是丟到Shiny
Server上就不能執行了，後來發現Ubuntu不支援choose.dir

想請問有沒有其他辦法可以選取client端的資料夾路徑的呢?
目前嘗試過的有:
tcltk::tc_chooseDirectory → Ubuntu上也無法執行
shinyFiles → 只能選取Server端的路徑
shiny::FileInput  → 選取的檔案是暫存路徑，不是client端的資料夾路徑


[環境敘述]:Ubuntu 14.04感謝大家 估狗很久都沒找到適合的方法 <(_ _)>

--","R_Language"
"645","M.1503412210.A.D18","f496328mm","問題","Re: N*1資料 轉 a*b格式",2017-08-22 22:30:07,NA,NA,"※ 引述《playaround (打滾)》之銘言：: [問題類型]:: N*1的資料 轉換成M*16: [軟體熟悉度]:: R初學: [問題敘述]:: 原始資料(csv檔)資料大致是這樣:: time1: a = 5: b = 70: c = ""rest"": ...: ...: time2: a = 8: b = 15: c = ""rest_2"": ...: ...: 想要以16列為單位整理成M*16的矩陣: 第一列是col標題: 和每列前面的a,b,c等是row標題: 類似這樣:: time        a           b            c ...: time1      5         70        ""rest"": time2      8         15       ""rest_2"": 有找一些指令好像都是以同col內同樣資料來分組: 所以不太知道目前需要做的這功能要怎麼處理: 手機發文，排版請見諒: 感謝大家: -----: Sent from JPTT on my Xiaomi MI 5.library(data.table)
library(dplyr)
setwd(""d:/"")

data = readLines(""test.txt"", n = -1)
var.name = data[2:4] %>% substr(.,1,1)

data = data %>%
  sub('a = ','',.) %>%
  sub('b = ','',.) %>%
  sub('c = ','',.) %>%
  gsub('""','',.)

data = matrix(data,ncol=2) %>%
  t %>%
  data.table
colnames(data) = c('time',var.name)

data#----------------------------------------------------

執行結果http://imgur.com/Sjdnc64先用 matrix 處理，最後再轉成 data.table，之後變數型態再改成自己要的就好了


--","R_Language"
"646","M.1503399605.A.EEB","andrew43","問題","Re: N*1資料 轉 a*b格式",2017-08-22 19:00:01,NA,NA,"假如原始資料檔（以4列為一組為例）如下
#### data.txt begin ####
time1
a = 5
b = 70
c = ""rest""
time2
a = 8
b = 15
c = ""rest_2""
#### data.txt end ####

我用字串的角度把資料取出再排入 data frame。
重點在於從各列的規格寫成 regular expression。

library(magrittr)
txt <- readLines(""data.txt"", n = -1)
n <- length(txt)
ncol <- 4  # 之後自行修改成16
nrow <- n / ncol

data.frame(
  time =
    txt[grep(""^time[[:digit:]]+"", txt)],
  a =
    gsub(""^a = ([[:digit:]]+)"",
         ""\\1"",
         txt[grepl(""^a = [[:digit:]]"", txt)]) %>%
    as.numeric,
  b =
    gsub(""^b = ([[:digit:]]+)"",
         ""\\1"",
         txt[grepl(""^b = [[:digit:]]"", txt)]) %>%
    as.numeric,
  c =
    gsub(""^c = \""([[:print:]]+)\"""",
         ""\\1"",
         txt[grepl(""^c = \""[[:print:]]+\"""", txt)])
)

可得 data frame

'data.frame':   2 obs. of  4 variables:
 $ time: Factor w/ 2 levels ""time1"",""time2"": 1 2
 $ a   : num  5 8
 $ b   : num  70 15
 $ c   : Factor w/ 2 levels ""rest"",""rest_2"": 1 2※ 引述《playaround (打滾)》之銘言：: [問題類型]:: N*1的資料 轉換成M*16: [軟體熟悉度]:: R初學: [問題敘述]:: 原始資料(csv檔)資料大致是這樣:: time1: a = 5: b = 70: c = ""rest"": ...: ...: time2: a = 8: b = 15: c = ""rest_2"": ...: ...: 想要以16列為單位整理成M*16的矩陣: 第一列是col標題: 和每列前面的a,b,c等是row標題: 類似這樣:: time        a           b            c ...: time1      5         70        ""rest"": time2      8         15       ""rest_2"": 有找一些指令好像都是以同col內同樣資料來分組: 所以不太知道目前需要做的這功能要怎麼處理: 手機發文，排版請見諒: 感謝大家: -----: Sent from JPTT on my Xiaomi MI 5.--","R_Language"
"647","M.1503389305.A.6A1","playaround","問題","N*1資料 轉 a*b格式",2017-08-22 16:08:22,NA,NA,"[問題類型]:
N*1的資料 轉換成M*16

[軟體熟悉度]:
R初學


[問題敘述]:

原始資料(csv檔)資料大致是這樣:

time1
a = 5
b = 70
c = ""rest""
...
...
time2
a = 8
b = 15
c = ""rest_2""
...
...

想要以16列為單位整理成M*16的矩陣
第一列是col標題
和每列前面的a,b,c等是row標題
類似這樣:

time        a           b            c ...
time1      5         70        ""rest""
time2      8         15       ""rest_2""

有找一些指令好像都是以同col內同樣資料來分組
所以不太知道目前需要做的這功能要怎麼處理

手機發文，排版請見諒
感謝大家

-----
Sent from JPTT on my Xiaomi MI 5.

--","R_Language"
"648","M.1503335847.A.998","s3714443","問題","xgboost如何把畫出的樹狀圖匯出？",2017-08-22 01:17:23,NA,NA,"大家好，小弟有用xgboost畫出樹狀圖
也可以在viewer看到
但是直接按export都沒有東西，不知道大家怎麼匯出？
感恩感恩

--","R_Language"
"649","M.1503326582.A.2EC","clsmbstu","問題","Shiny可以在運算未完成時於UI提示嗎？",2017-08-21 22:43:00,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我最近做了一隻Shiny程式，但它需要的運算耗時比較久，
（而且在shinyapps.io上花的時間比我在本地長很多...）
好奇有沒有可能在UI裡面加一行提示（例如「運算中，請稍候」之類的），
而且只在結果還沒出來時才有那一行？
我知道也許長期目標是讓我的程式碼更有效率一點，
但目前我還想不到改寫的方式。 orz

[程式範例]:
ui <- fluidPage(
  # Other UI elements

  conditionalPanel(condition = ""output.done == 'FALSE'"",
                   helpText(""運算中，請稍候""))
)

server <- function(input, output) {
  output$done <- reactive({""FALSE""})

  # Complicated processes

  output$done <- reactive({""TRUE""})
  outputOptions(output, ""done"", suspendWhenHidden = FALSE)
}

[關鍵字]:
shiny, dynamic UI

--","R_Language"
"650","M.1503131455.A.B5D","tony1331","問題","",2017-08-19 16:30:52,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來

[軟體熟悉度]:
沒寫過程式，R 是我的第一次

[問題敘述]:

假設A是一個144*1的dataframe
B是48*3
想要B[ ,1] =A[ ,1][ 1:48]
        B[ ,2] =A[ ,1][ 49:96]
        B[ ,3] =A[ ,1][ 97:144]

因為資料量很大  請問該怎麼寫迴圈
謝謝~

s


-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"651","M.1503111976.A.187","hanglong","問題","ggpolt2加線",2017-08-19 11:06:07,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我想用ggplot2去畫散佈圖，且在裡面畫幾條輔助線，

例如我X的範圍是0~100，我想要畫5條輔助線，分別是：

1. 0~20：Y軸是10的線。
2. 20~40：Y軸是20的線。
3. 40~60：Y軸是30的線。
4. 60~80：Y軸是40的線。
5. 80~100：Y軸是50的線。

[程式範例]:如果用一般的繪圖很簡單：plot(c(0:100), 斜率推移)points(c(0,20), c(10,10), type = ""l"")...可適用ggplot2畫圖，散佈圖可以畫出來，但線的部分會出問題，我無法限定範圍，它只會畫出整條線...ggplot(data = URCDanalysis) + geom_point(aes(c(1 : 100), 斜率推移)) + geom_hline(xintercept = 10) + ...麻煩大家了

[環境敘述]:RStudio[關鍵字]:

ggplot2畫線，限定範圍

--我很正吧~~╲◤◢─█╰>  <█▽﹀◤▕▏                                          

--","R_Language"
"652","M.1502947929.A.594","Lamu","問題","會R可以找哪方面工作?",2017-08-17 13:32:07,NA,NA,"在下不是資工專業，R是因研究需要而自學

  雖說不到很厲害可以寫一個PACKAGE

  但至少整理資料，寫function等等都OK

  也這樣跌跌撞撞完成了論文

  可是就業市場是殘酷的

  很多都還需要其他程式語言例如C, java, python等等

  當然不排斥學另一個語言如python，可是學到上手也得一陣子

  很想知道只會R的話比較能找哪方面工作?

  我的專業領域是冷門中的冷門(歐美還滿多出路但在台灣基本上吃土XD)

  即便我有熱忱，但餵不飽自己有熱忱也沒用

  想轉換工作到資料庫分析，大數據，ML等等，又沒信心可以跟資工領域的人競爭

  也想請問各位該從哪種產業開始轉換比較適合?

  (ex.醫院方面的健保資料庫分析研究助理?)

  感謝各位。

--","R_Language"
"653","M.1502946482.A.33C","lyssa","問題","R studio 清除console指令",2017-08-17 13:08:00,NA,NA,"[問題類型]:

程式諮詢



[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)



[問題敘述]:

請問 R Studio 在 console 視窗，如果想要清除資料除了 Ctrl+L 外

能否使用指令清除呢

(因 Ctrl+L 和學校電腦教室還原卡快捷鍵相衝而無法使用 QQ)


謝謝:)




[關鍵字]:

R Studio console 清除





--","R_Language"
"654","M.1502809887.A.04F","mewtwo","問題","Re: Knitr + WinEdt下中文顯示的問題(p幣)",2017-08-15 23:11:24,NA,NA,"自已的文自已回。

基本上，這是個很複雜的問題 (差點丟上Stack overflow了)。

1.
後來在純RStudio下測試更絕了，主要的.Rnw以uft8編碼沒事，

外面引入的knit::read_chunk(./...)要big5編碼才沒有亂碼.... (這什麼鬼)。

2. WinEdt好像會自動改成編碼方式…無法控制。

寫信給WinEdt，他們回說R功能是由contributor寫的，要加入mail list。

3. 解決方法是使用RStudio底下的Save with encoding，將主Rnw以uft8，

副檔案以Big5存檔 (有時候)。

4. 然後編碼方式參閱Sweave User Manual的Section 3.7 Encoding。

把該加的都加上去。

就編譯成功了。※ 引述《mewtwo (mewtwo)》之銘言：: ※ [本文轉錄自 LaTeX 看板 #1PZKhtiH ]: 作者: mewtwo (mewtwo) 看板: LaTeX: 標題: [問題] Knitr + WinEdt下中文顯示的問題(p幣): 時間: Fri Aug 11 14:13:06 2017: 各位先進好，我現在在WinEdt 10.2底下安裝它的R外掛：RManager: http://www.winedt.org/config/modes/RManager.html: 已執行Macro，在WinEdt的右上角出現R字樣。: 將程式碼存成.Rnw之後，可直接使用WinEdt -> R -> Knitr -> Knitr>>XeLaTeX 編譯，: 但是(繁體)中文一直出現亂碼。: 亂試之下，如果中文不出現亂碼，R區塊中的#就會讀不到。: 已經搞了一個早上了，一直得不到解答，請先進煩請解答。: 欲答謝10000 p幣。(這夠行情嗎？): 程式碼如下(是一個最基本的程式碼)，感謝。: \documentclass[11pt,a4paper]{book}: %%%%%% 中文與字體設定 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%: \usepackage{fontspec}   %加這個就可以設定字體: \setmainfont{Times New Roman}: \usepackage[utf8]{inputenc}: \usepackage{xeCJK}       %讓中英文字體分開設置: \usepackage{CJKnumb}: \setCJKmainfont{PMingLiU} %設定中文為系統上的字型，而英文不去更動，使用原TeX字型: \XeTeXlinebreaklocale ""zh""             %這兩行一定要加，中文才能自動換行: \XeTeXlinebreakskip = 0pt plus 1pt     %這兩行一定要加，中文才能自動換行: \begin{document}: You can type R commands in your \LaTeX{} document: and they will be properly run and the output printed in the document.: 中文在此: <<>>=: # Create a sequence of numbers: X = 2:10: # Display basic statistical measures: summary(X): @: \end{document}--","R_Language"
"655","M.1502631367.A.0DF","ddtwu","問題","Re: 用不同條件抓data",2017-08-13 21:36:02,NA,NA,"※ 引述《joson4921 (特務)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 手邊有資料 df 如下:: Goback   Toward  TravelTime  UniqueID: 1        A1      32          AA01: 1        A2      47          AA01: 1        A3      83          AA01: 1        A4      122         AA01: 1        A5      143         AA01: 0        B1      284         BB01: 0        B2      302         BB01: 0        B3      419         BB01: 0        B4      492         BB01: 0        B5      701         BB01: 0        B1      104         BB02: 0        B2      231         BB02: 0        B3      245         BB02: 0        B4      268         BB02: 0        B5      313         BB02: 1        A1      31          AA02: 1        A2      83          AA02: 1        A3      172         AA02: 1        A4      198         AA02: 1        A5      276         AA02: 希望用同一 UniqueID 欄位的五筆資料,算出他們之間 TravelTime 的時間差(秒數): 並新增 TT_diff 欄位容納其結果,但這邊有個問題: 因為 5筆 TravelTime資料只能產出 4個 時間差(秒數): 以 UniqueID == AA02 為例,產出之TT_diff欄位結果如下: (第一筆 TT_diff = 83-31 = 52, 以此類推): TT_diff: 52: 89: 26: 78: 但我希望產出的結果能夠長得像這樣: 也用 UniqueID == AA02 的第一筆資料(TravelTime = 31)塞進去 TT_diff 欄位: 後面再接上面產出的4個時間差,像下面這樣:: TT_diff(我想要的結果): 31: 52: 89: 26: 78: 因為之前用 [, := ] 跑運算(好像是magrittr?)沒有跑過這種同時設定兩種條件的: 用別的方法試了兩天,弄不出我想要的結果,: 如底下程式碼所示,那個31沒辦法出現在第一列.而且最後一列會出現NA: 請問板上大大,如果要產出上面我想要的結果,程式碼該怎麼修正,謝謝!!: [程式範例]::: <我的程式碼>: result <- df[ , .(TT_diff = TravelTime[2L:5L]-TravelTime[1L:4L] ),:                 by=.(UniqueID)]: TT_diff(跑出來的結果,跟想要的差很多): 52: 89: 26: 78: NA:: [環境敘述]::
:: [關鍵字]::: 選擇性，也許未來有用:

我的做法，參考看看：

library(data.table)
library(dplyr)
library(magrittr)

dt <- fread(
  ""Goback   Toward  TravelTime  UniqueID
  0        B1      104         BB02
  0        B2      231         BB02
  0        B3      245         BB02
  0        B4      268         BB02
  0        B5      313         BB02
  1        A1      31          AA02
  1        A2      83          AA02
  1        A3      172         AA02
  1        A4      198         AA02
  1        A5      276         AA02
  ""
) %>% tbl_df()

dt %>% group_by(UniqueID) %>%
  mutate(seq = order(Toward),
         lagTime = lag(TravelTime)) %>%
  ungroup() %>%
  mutate(TT_diff = TravelTime - lagTime) %>%
  mutate(TT_diff = ifelse(seq == 1, TravelTime, TT_diff)) %>%
  select(-seq, -lagTime)


--","R_Language"
"656","M.1502630653.A.3AD","ddtwu","問題","Re: 如何將一個欄位按降冪排列變成另一個欄位",2017-08-13 21:24:06,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《henry48124 (= =)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 各位大大好，我有一筆資料長得像是：: : head(df): : id  place  count: : 1   A      1: : 1   B      1: : 2   B      1: : 2   C      3: : 3   D      2: : 4   A      1: : 4   C      2: : 4   D      5: : 5   B      1: : 我希望能讓他變成: : id count top_place1 top_place2: : 1  2     A          B: : 2  4     C          B: : 3  2     D: : 4  8     D          C: : 5  1     B: : [程式範例]:: : 這是我目前的做法，總覺得寫得怪怪的，如果未來要做到 top100 就不能這樣寫: : 謝謝各位 Orz: : library(dplyr): : answer <- NULL: : for(x in as.list(unique(df$id))) {: :         df_id <- df %>%: :                 filter(id == x) %>%: :                 arrange(-count): :         count <- sum(df$count): :         top_place1 <- NA: :         top_place2 <- NA: :         col <- c(x, count, top_place1, top_place2): :         for(y in 1:nrow(df_id)) {: :                 if(y <= 2) {: :                         col[y+2] <- df_id[y,]$place: :         }: :         answer <- rbind(answer, col): : }: : [環境敘述]:: : [關鍵字]::  method 1是硬幹，可以直接先看method 2: library(data.table): library(stringr): library(pipeR): DT <- data.table(id = rep(1:5, c(2,2,1,3,1)),:                  place = c(""A"",""B"",""B"",""C"",""D"",""A"",""C"",""D"",""B""),:                  count = c(1,1,1,3:1,2,5,1)): ## method 1:: setorder(DT, id, -count, -place): numRank <- 3: DT[ , .(lapply(1:numRank, function(i){:   ifelse(length(place) >= i, place[i], """"): }) %>>% transpose %>>% sapply(str_c, collapse = "","")), by = .(id)] %>>%:   `[`(j = str_c(""top_place"", 1:numRank) := transpose(str_split(V1, "","")),:       by = .(id)) %>>%:   `[`(j = V1 := NULL) %>>%:   merge(DT[ , .(count = sum(count)), by = .(id)], by = ""id""): #    id top_place1 top_place2 top_place3 count: # 1:  1          A          B                2: # 2:  2          C          B                4: # 3:  3          D                           2: # 4:  4          D          C          A     8: # 5:  5          B                           1: ## method 2:: setorder(DT, id, -count, -place): numRank <- 3: DT[ , rr := length(count) - frank(count, ties.method = ""first"")+1, by = .(id)]: DT[rr %in% 1:numRank] %>>%:   dcast(id ~ rr, value.var = ""place"") %>>%:   setnames(as.character(1:numRank), str_c(""top_place"", 1:numRank)) %>>%:   merge(DT[ , .(count = sum(count)), by = .(id)], by = ""id""): #    id top_place1 top_place2 top_place3 count: # 1:  1          A          B         NA     2: # 2:  2          C          B         NA     4: # 3:  3          D         NA         NA     2: # 4:  4          D          C          A     8: # 5:  5          B         NA         NA     1我的作法是這樣：

library(dplyr)
library(magrittr)
library(tidyr)

df <- data.frame(id = rep(1:5, c(2,2,1,3,1)),
                 place = c(""A"",""B"",""B"",""C"",""D"",""A"",""C"",""D"",""B""),
                 count = c(1,1,1,3:1,2,5,1), stringsAsFactors = FALSE) %>% tbl_df()

df %>% group_by(id) %>%
  mutate(seq = order(count, decreasing = TRUE),
         sumCount = sum(count)) %>%
  filter(seq <= 2) %>%
  ungroup() %>%
  mutate(seqName = sprintf('top_place%s', seq)) %>%
  select(-count, -seq) %>%
  spread(key = seqName, value = place, fill = NA)

# A tibble: 5 x 4
     id sumCount top_place1 top_place2
* <int>    <dbl>      <chr>      <chr>
1     1        2          A          B
2     2        4          C          B
3     3        2          D       <NA>
4     4        8          D          C
5     5        1          B       <NA>


--","R_Language"
"657","M.1502625645.A.D8E","parcequetoi","問題","R可以畫互動式的臺灣地圖嗎？",2017-08-13 20:00:42,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我知道googleVis套件可以做到畫出美國各州資料的互動式視覺化，
（""Example showing US data by state"",https://goo.gl/r1ss6T）
那臺灣各縣市、甚至各鄉鎮的尺度，有沒有可能用R做到同樣的事情呢？
我在網路上搜尋了一些文章，沒有找到解答，想向各位高手請教一下方向。謝謝！

PS: 我現在已經可以用ggplot2套件配合政府公開的鄉鎮界線畫出靜態圖，
    曾經嘗試過用ggplotly函數轉換，但是原本透過coord_map的校正會整個跑掉。

[關鍵字]:

地圖、互動

--","R_Language"
"658","M.1502534757.A.2B2","celestialgod","問題","Re: 如何將一個欄位按降冪排列變成另一個欄位",2017-08-12 18:45:53,NA,NA,"※ 引述《henry48124 (= =)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好，我有一筆資料長得像是：: head(df): id  place  count: 1   A      1: 1   B      1: 2   B      1: 2   C      3: 3   D      2: 4   A      1: 4   C      2: 4   D      5: 5   B      1: 我希望能讓他變成: id count top_place1 top_place2: 1  2     A          B: 2  4     C          B: 3  2     D: 4  8     D          C: 5  1     B: [程式範例]:: 這是我目前的做法，總覺得寫得怪怪的，如果未來要做到 top100 就不能這樣寫: 謝謝各位 Orz: library(dplyr): answer <- NULL: for(x in as.list(unique(df$id))) {:         df_id <- df %>%:                 filter(id == x) %>%:                 arrange(-count):         count <- sum(df$count):         top_place1 <- NA:         top_place2 <- NA:         col <- c(x, count, top_place1, top_place2):         for(y in 1:nrow(df_id)) {:                 if(y <= 2) {:                         col[y+2] <- df_id[y,]$place:         }:         answer <- rbind(answer, col): }: [環境敘述]:: [關鍵字]:method 1是硬幹，可以直接先看method 2

library(data.table)
library(stringr)
library(pipeR)

DT <- data.table(id = rep(1:5, c(2,2,1,3,1)),
                 place = c(""A"",""B"",""B"",""C"",""D"",""A"",""C"",""D"",""B""),
                 count = c(1,1,1,3:1,2,5,1))

## method 1:

setorder(DT, id, -count, -place)

numRank <- 3
DT[ , .(lapply(1:numRank, function(i){
  ifelse(length(place) >= i, place[i], """")
}) %>>% transpose %>>% sapply(str_c, collapse = "","")), by = .(id)] %>>%
  `[`(j = str_c(""top_place"", 1:numRank) := transpose(str_split(V1, "","")),
      by = .(id)) %>>%
  `[`(j = V1 := NULL) %>>%
  merge(DT[ , .(count = sum(count)), by = .(id)], by = ""id"")
#    id top_place1 top_place2 top_place3 count
# 1:  1          A          B                2
# 2:  2          C          B                4
# 3:  3          D                           2
# 4:  4          D          C          A     8
# 5:  5          B                           1

## method 2:

setorder(DT, id, -count, -place)
numRank <- 3
DT[ , rr := length(count) - frank(count, ties.method = ""first"")+1, by = .(id)]
DT[rr %in% 1:numRank] %>>%
  dcast(id ~ rr, value.var = ""place"") %>>%
  setnames(as.character(1:numRank), str_c(""top_place"", 1:numRank)) %>>%
  merge(DT[ , .(count = sum(count)), by = .(id)], by = ""id"")
#    id top_place1 top_place2 top_place3 count
# 1:  1          A          B         NA     2
# 2:  2          C          B         NA     4
# 3:  3          D         NA         NA     2
# 4:  4          D          C          A     8
# 5:  5          B         NA         NA     1

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"659","M.1502533023.A.ED1","henry48124","問題","如何將一個 Column 變成很多個",2017-08-12 18:17:01,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

各位大大好，我有一筆資料長得像是：

head(df)
id  place  count
1   A      1
1   B      1
2   B      1
2   C      3
3   D      2
4   A      1
4   C      2
4   D      5
5   B      1

我希望能讓他變成

id count top_place1 top_place2
1  2     A          B
2  4     C          B
3  2     D
4  8     D          C
5  1     B

[程式範例]:

這是我目前的做法，總覺得寫得怪怪的，如果未來要做到 top100 就不能這樣寫

謝謝各位 Orz

library(dplyr)

answer <- NULL
for(x in as.list(unique(df$id))) {
        df_id <- df %>%
                filter(id == x) %>%
                arrange(-count)
        count <- sum(df$count)
        top_place1 <- NA
        top_place2 <- NA
        col <- c(x, count, top_place1, top_place2)
        for(y in 1:nrow(df_id)) {
                if(y <= 2) {
                        col[y+2] <- df_id[y,]$place
        }
        answer <- rbind(answer, col)
}


[環境敘述]:

[關鍵字]:


--","R_Language"
"660","M.1502528998.A.2C8","x9060000456","問題","關於Google自訂搜尋類之爬蟲",2017-08-12 17:09:55,NA,NA,"[問題類型]:
爬蟲

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
小弟最近在爬遊戲類的文章,
想爬關於一些透過google 自訂搜尋的文章,
但不確定能不能爬, 因此上板詢問各問大大!
謝謝呀!
[程式範例]:
## 像是爬以下兩類搜尋網頁之title或href
url_1 <- 'https://search.gamer.com.tw/?q=season120'ur1_2 <- 'https://read01.com/search/?q=roguelike'Crawler <- function(urls, css){
results <- urls %>% GET(encoding = 'UTF-8') %>% content %>%
html_nodes(css = css) %>% html_text()
return(results)
}

url_1_results <- Crawler(url_1, '.gs-title .gs-title')
url_2_results <- Crawler(url_2, '.gs-title .gs-title')

## 兩個結果都抓不到!


--","R_Language"
"661","M.1502525096.A.B2A","hewolf","問題","不同長度的資料作fitting",2017-08-12 16:04:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:手邊有幾組資料,長這樣data1 200x2 matrixV1   Y[1]...[200]data2 150x2 matrixV1   Y[1]...[150]data3 120x2 matrixV1   Y[1]...[120]這幾組資料分別對應另一個變數V2我預計的fitting的方程式最後會長Y= (a+aa*V2)+(b+bb*V2)*V1目前想到最土法鍊鋼的方式是每一組先假設成Y=A+B*V1,再把一組的A和B求出來,再分別以V2對他們作fitting得到(a,aa,b,bb).這樣的做法跟手動沒什麼差別,沒辦法處理大量資料.有辦法用比較簡單的code或package來作這件事情嗎？謝謝[環境敘述]:Linux[關鍵字]:fitting--","R_Language"
"662","M.1502432065.A.B44","mewtwo","問題","Fw: Knitr + WinEdt下中文顯示的問題(p幣)",2017-08-11 14:14:23,NA,NA,"※ [本文轉錄自 LaTeX 看板 #1PZKhtiH ]作者: mewtwo (mewtwo) 看板: LaTeX
標題: [問題] Knitr + WinEdt下中文顯示的問題(p幣)
時間: Fri Aug 11 14:13:06 2017


各位先進好，我現在在WinEdt 10.2底下安裝它的R外掛：RManagerhttp://www.winedt.org/config/modes/RManager.html已執行Macro，在WinEdt的右上角出現R字樣。

將程式碼存成.Rnw之後，可直接使用WinEdt -> R -> Knitr -> Knitr>>XeLaTeX 編譯，

但是(繁體)中文一直出現亂碼。

亂試之下，如果中文不出現亂碼，R區塊中的#就會讀不到。

已經搞了一個早上了，一直得不到解答，請先進煩請解答。

欲答謝10000 p幣。(這夠行情嗎？)

程式碼如下(是一個最基本的程式碼)，感謝。

\documentclass[11pt,a4paper]{book}

%%%%%% 中文與字體設定 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\usepackage{fontspec}   %加這個就可以設定字體
\setmainfont{Times New Roman}
\usepackage[utf8]{inputenc}
\usepackage{xeCJK}       %讓中英文字體分開設置
\usepackage{CJKnumb}
\setCJKmainfont{PMingLiU} %設定中文為系統上的字型，而英文不去更動，使用原TeX字型
\XeTeXlinebreaklocale ""zh""             %這兩行一定要加，中文才能自動換行
\XeTeXlinebreakskip = 0pt plus 1pt     %這兩行一定要加，中文才能自動換行


\begin{document}

You can type R commands in your \LaTeX{} document
and they will be properly run and the output printed in the document.

中文在此

<<>>=
# Create a sequence of numbers
X = 2:10

# Display basic statistical measures
summary(X)
@

\end{document}



--","R_Language"
"663","M.1502369283.A.41D","LinNine","問題","Re: 爬蟲表格問題",2017-08-10 20:48:01,NA,NA,"檢查他切換『詳細』與『清單』的按鈕
會看到他在點擊『清單』的時候塞cookie --> $.cookie.set('ckACGSHOWTYPE','L')
所以你先塞cookie就可以爬到排行榜table了

library(rvest)
library(magrittr)
library(httr)

urls <- 'https://acg.gamer.com.tw/index.php?t=1&p=Android'ranktableList <- html_session(urls, set_cookies('ckACGSHOWTYPE' = ""L"")) %>%
    html_nodes(css = 'td:nth-child(1)') %>% html_text() %>% .[-1]※ 引述《x9060000456 (你好)》之銘言：: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 各位前輩大大大家好,: 小弟我最近爬巴哈姆特的文章,: 關於哈拉版和新聞都能夠爬,: 但是到了爬排行榜時, 卻爬不出任何結果,: 因此上板來求救~ 謝謝!: [程式範例]:: library(rvest): library(magrittr): library(httr): urls <- 'https://acg.gamer.com.tw/index.php?t=1&p=Android': ranktable <- urls %>% GET(encoding = 'UTF-8') %>% content %>%: html_nodes(css = 'td:nth-child(1)') %>% html_text()--","R_Language"
"664","M.1502200216.A.AAC","x9060000456","問題","爬蟲表格問題",2017-08-08 21:50:13,NA,NA,"[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
各位前輩大大大家好,
小弟我最近爬巴哈姆特的文章,
關於哈拉版和新聞都能夠爬,
但是到了爬排行榜時, 卻爬不出任何結果,
因此上板來求救~ 謝謝!

[程式範例]:

library(rvest)
library(magrittr)
library(httr)

urls <- 'https://acg.gamer.com.tw/index.php?t=1&p=Android'ranktable <- urls %>% GET(encoding = 'UTF-8') %>% content %>%
html_nodes(css = 'td:nth-child(1)') %>% html_text()



--","R_Language"
"665","M.1502174958.A.7C1","PhysicsBoy","問題","標示軸的文字，能否同為粗體和斜體",2017-08-08 14:49:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:小弟我作圖時想讓x及y軸的文字同時是斜體和粗體但異想天開的使用下列語法時只會個別出現斜體或粗體xlab = expression(paste(bold(italic(g[t]))))或xlab = expression(paste(italic(bold(g[t]))))顯然地我的猜想錯誤所以大大們有方法達成同時是粗體也是斜體嗎?--離開你的視線~讓情緒完完整整的宣洩~我想今夜就這樣吧~反正孤獨也無所謂~--","R_Language"
"666","M.1502134178.A.B42","andrew43","問題","Re: 用不同條件抓data",2017-08-08 03:29:35,NA,NA,"這用 data.table 很容易解。
library(data.table)
dt <- fread(
  ""Goback   Toward  TravelTime  UniqueID
  0        B1      104         BB02
  0        B2      231         BB02
  0        B3      245         BB02
  0        B4      268         BB02
  0        B5      313         BB02
  1        A1      31          AA02
  1        A2      83          AA02
  1        A3      172         AA02
  1        A4      198         AA02
  1        A5      276         AA02
  ""
)

# 一個簡單的 function 回傳初值與其它前後差
funcDelta <- function(x) {
  baseline <- min(x)
  delta <- diff(x)
  # 或是 delta <- diff(sort(x))
  return(c(baseline, delta))
}

# try funcDelta
funcDelta(c(1,4,6,7)) # return c(1,3,2,1)

# 以下為所求
dt[,
   .(deltaTravelTime = funcDelta(TravelTime), Toward),
   by = UniqueID]
#     UniqueID deltaTravelTime Toward
#  1:     BB02             104     B1
#  2:     BB02             127     B2
#  3:     BB02              14     B3
#  4:     BB02              23     B4
#  5:     BB02              45     B5
#  6:     AA02              31     A1
#  7:     AA02              52     A2
#  8:     AA02              89     A3
#  9:     AA02              26     A4
# 10:     AA02              78     A5※ 引述《joson4921 (特務)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 手邊有資料 df 如下:: Goback   Toward  TravelTime  UniqueID: 1        A1      32          AA01: 1        A2      47          AA01: 1        A3      83          AA01: 1        A4      122         AA01: 1        A5      143         AA01: 0        B1      284         BB01: 0        B2      302         BB01: 0        B3      419         BB01: 0        B4      492         BB01: 0        B5      701         BB01: 0        B1      104         BB02: 0        B2      231         BB02: 0        B3      245         BB02: 0        B4      268         BB02: 0        B5      313         BB02: 1        A1      31          AA02: 1        A2      83          AA02: 1        A3      172         AA02: 1        A4      198         AA02: 1        A5      276         AA02: 希望用同一 UniqueID 欄位的五筆資料,算出他們之間 TravelTime 的時間差(秒數): 並新增 TT_diff 欄位容納其結果,但這邊有個問題: 因為 5筆 TravelTime資料只能產出 4個 時間差(秒數): 以 UniqueID == AA02 為例,產出之TT_diff欄位結果如下: (第一筆 TT_diff = 83-31 = 52, 以此類推): TT_diff: 52: 89: 26: 78: 但我希望產出的結果能夠長得像這樣: 也用 UniqueID == AA02 的第一筆資料(TravelTime = 31)塞進去 TT_diff 欄位: 後面再接上面產出的4個時間差,像下面這樣:: TT_diff(我想要的結果): 31: 52: 89: 26: 78: 因為之前用 [, := ] 跑運算(好像是magrittr?)沒有跑過這種同時設定兩種條件的: 用別的方法試了兩天,弄不出我想要的結果,: 如底下程式碼所示,那個31沒辦法出現在第一列.而且最後一列會出現NA: 請問板上大大,如果要產出上面我想要的結果,程式碼該怎麼修正,謝謝!!: [程式範例]::: <我的程式碼>: result <- df[ , .(TT_diff = TravelTime[2L:5L]-TravelTime[1L:4L] ),:                 by=.(UniqueID)]: TT_diff(跑出來的結果,跟想要的差很多): 52: 89: 26: 78: NA:: [環境敘述]::
:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"667","M.1502127633.A.F99","joson4921","問題","用不同條件抓data",2017-08-08 01:40:28,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的手邊有資料 df 如下:

Goback   Toward  TravelTime  UniqueID
1        A1      32          AA01
1        A2      47          AA01
1        A3      83          AA01
1        A4      122         AA01
1        A5      143         AA01
0        B1      284         BB01
0        B2      302         BB01
0        B3      419         BB01
0        B4      492         BB01
0        B5      701         BB01
0        B1      104         BB02
0        B2      231         BB02
0        B3      245         BB02
0        B4      268         BB02
0        B5      313         BB02
1        A1      31          AA02
1        A2      83          AA02
1        A3      172         AA02
1        A4      198         AA02
1        A5      276         AA02

希望用同一 UniqueID 欄位的五筆資料,算出他們之間 TravelTime 的時間差(秒數)
並新增 TT_diff 欄位容納其結果,但這邊有個問題
因為 5筆 TravelTime資料只能產出 4個 時間差(秒數)

以 UniqueID == AA02 為例,產出之TT_diff欄位結果如下
(第一筆 TT_diff = 83-31 = 52, 以此類推)

TT_diff
52
89
26
78

但我希望產出的結果能夠長得像這樣
也用 UniqueID == AA02 的第一筆資料(TravelTime = 31)塞進去 TT_diff 欄位
後面再接上面產出的4個時間差,像下面這樣:

TT_diff(我想要的結果)
31
52
89
26
78

因為之前用 [, := ] 跑運算(好像是magrittr?)沒有跑過這種同時設定兩種條件的
用別的方法試了兩天,弄不出我想要的結果,
如底下程式碼所示,那個31沒辦法出現在第一列.而且最後一列會出現NA
請問板上大大,如果要產出上面我想要的結果,程式碼該怎麼修正,謝謝!!

[程式範例]:<我的程式碼>result <- df[ , .(TT_diff = TravelTime[2L:5L]-TravelTime[1L:4L] ),by=.(UniqueID)]TT_diff(跑出來的結果,跟想要的差很多)52892678NA[環境敘述]:[關鍵字]:選擇性，也許未來有用--","R_Language"
"668","M.1501831734.A.112","HumuHumu","問題","VM  shiny server外部連線設定方式",2017-08-04 15:28:46,NA,NA,"Host : Win7 64bit

Guest : Ubuntu 14.04

VMWare版本 : VMware workstation player 12 (免費版)

如題，我想用研究室的電腦裝VM架設server

但因為我們研究室是用router把同一個IP分成許多個port給每台電腦

像我的電腦就是140.114.53.208:10009，坐我左邊的人可能就:10008等等

我VM環境都架設好了以後，我該如何在任何一部電腦輸入某一組指派給VM的IP就連線到我
的VM上的App(或是直接使用140.114.53.208也可以)


GOOGLE過如果要指派另一組實體IP好像要用bridge方式連線，但我VM一設了bridge連線，
就沒辦法上網了

也找到過好像要用什麼port forwarding的方式讓連線到140.114.53.208的人都轉到我的V
M上

可是VMware workstation player 12好像沒辦法設定

現在我在VM的網路設定上改成使用Host Only，只要我的shiny-server正常啟動的話，我的我Host端的網址輸入http://192.168.230.128:3838/MyApp/是可以正常使用我的App的

但我希望他可以做到任何外部電腦都可以連到我的App上，但查很久還是不會設定

<(_ _)>


PS另外請問一個問題

假設我的shiny server架設好了，今天有user連到我的server使用我寫的App

可是如果我的App有用到資料上傳的功能，那在選取要上傳的資料的時候，可以是在user的電腦系統底下選擇嗎?

因為我現在看到別人使用，在選擇資料的時候，選取資料的環境好像都是在Server那台Linux電腦下選

--","R_Language"
"669","M.1501823060.A.FCE","empireisme","問題","用R做枚舉",2017-08-04 13:04:17,NA,NA,"如題

本身初學

會初步使用迴圈和if

想用r寫出 12345

的所有排列數(不是有幾種)

例如12345 15234  這樣

不知道只有上述兩個工具

可以用嗎？

--","R_Language"
"670","M.1501686743.A.466","kk741852963","問題","製作R呼叫C function的package",2017-08-02 23:12:20,NA,NA,"[問題類型]：
製作 R package 時出現錯誤
裡面的 R function 會呼叫 C function

[軟體熟悉度]：
學過一些 R 相關的應用, 對 C 語言有基本了解
第一次製作 R package

[問題敘述]
沒有用到外部 package 裡的 C function

/src 底下有
1.      chanmat.h
2.      一些 .c 檔以及各自的標頭檔
    這些標頭檔都有 #include ""chanmat.h""

namespace file 裡已有 useDynLib(test2,chanmat)
在 build & reload 時出現以下錯誤訊息http://imgur.com/6KNWZyp小弟已上網 google 過, 但還是沒解決QAQ
希望版上有高手能幫忙解惑
感謝!

[環境敘述]
OS：Windows10 家用版[10.0.14393]
R：3.4.1 (2017-06-30) -- ""Single Candle"" 32-bit
Rstudio：1.0.143
Rtools：3.4.0.1964

在64-bit下編譯會有錯誤, 故用32-bit


--
Sent from my Windows

--","R_Language"
"671","M.1501656479.A.A1E","ruokcnn","問題","parSapply 無法運算",2017-08-02 14:47:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

小弟在用parSapply整理資料的時候寫了一個function


myfunc <-function(x){
   n <- as.data.frame(subset(Forthewin,客戶帳號==unlist(Forthewin[x,4])&股票==unlist(Forthewin[x,8])&委託日期==unlist(Forthewin[x,20])))
   z <- unique(n[,23])
   if(length(grep(""^1$"",z))+length(grep(""^-1$"",z))==2 & if(length(n[which(n[,23]>0),21])>0) sum(n[,21]*n[,23])/sum(n[which(n[,23]>0),21])<0.2 ) 1 else if(length(grep(""^-2$"",z))+length(grep(""^2$"",z))==2) 2 else 0
 }


結果回傳error


parSapply(cl,index(Forthewin)[1:9],FUN=myfunc)

Error in checkForRemoteErrors(val) :

 4 nodes produced errors; first error: 二元運算子中有非數值引數


發現如果裡面只要包了dataframe特定row的運算(我不會稱呼)

像這種：sum(n[,21]*n[,23])/sum(n[which(n[,23]>0),21])

就不行用parSapply的function運算（但普通sapply還是可以）


 myfunc <- function(x){o <- sum(n[,21]*n[,23])/sum(n[which(n[,23]>0),21])}
 parSapply(cl,index(Forthewin)[1:9],FUN=myfunc)
#Error in checkForRemoteErrors(val) :
#  4 nodes produced errors; first error: 二元運算子中有非數值引數


如果remove那行就可以正常運行


 myfunc <-function(x){
   n <- as.data.frame(subset(Forthewin,客戶帳號==unlist(Forthewin[x,4])&股票==u
   z <- unique(n[,23])
   if(length(grep(""^1$"",z))+length(grep(""^-1$"",z))==2) 1 else if(length(grep(""^
 }
 parSapply(cl,index(Forthewin)[1:9],FUN=myfunc)
#[1] 0 0 0 0 0 0 0 0 0


可以問為什麼會這樣或是可以怎麼解決嗎？

非本科系也沒上過計概，對於程式運算邏輯有很多不懂的地方

感謝各位指點



[程式範例]:

[環境敘述]:

R 3.4.1

[關鍵字]:ParallelparSapplysnow更新：

在萬念俱灰之下我把cluster關掉再重開就可以了

stopCluster(cl)

cl <- makeCluster(4,type = ""SOCK"")

myfunc <-function(x){
   n <- as.data.frame(subset(Forthewin,客戶帳號==unlist(Forthewin[x,4])&股票==u
   z <- unique(n[,23])
   if(length(grep(""^1$"",z))+length(grep(""^-1$"",z))==2 & if(length(n[which(n[,23
 }


parSapply(cl,index(Forthewin)[1:9],FUN=myfunc)

[1] 0 0 0 0 0 0 0 0 0



WHY??????
--作者seacore07 (海角7號)看板Gossiping標題[問卦] 異性戀的男生跟女生 真的有純友誼嗎？時間Thu Dec  8 10:55:50 2016→ VVizZ: 有阿 我跟我老婆--","R_Language"
"672","M.1501643881.A.3E9","linkpon5566","問題","while迴圈不會動",2017-08-02 11:17:59,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在練習單層感知機
用for迴圈寫的版本是OK的

但不知為何while迴圈就不行



初始值:
x1 <- c(0, 0)
x2 <- c(0, 1)
x3 <- c(1, 0)
x4 <- c(1, 1)

ans0 <- c(1, 1, -1, 1)
x0 <- cbind(x1, x2, x3, x4)
w0 <- c(0, 1)  # 初始weights


目的:
找到一個w0
把x1, x2, x3, x4 分成 1, -1 兩類    ans0為預設答案

行合併之後   逐行檢驗
分類正確則w0不變    反之則迭代新的w0
全部一輪沒錯則停止



[for版本]

perceptron <-
function(x = x0, w0 = c(0, 1), threshold = -1, rate = 0.8, ans = ans0, n = 1000)
{
  w0 <- c(threshold, w0)
  x  <- rbind(-1, x)
  for(i in 1:n){
    j <- (i + 3) %% 4 + 1
    if( all(sign(t(w0) %*% x) == ans) ){
      break
    }else if(sign(t(w0) %*% x[, j]) == ans[j])
    {
      w0 <- w0
    }else{w0 <- w0 + sign(ans[j]) * rate * x[, j]}
 }
   return(w0)
 }




[while版本]

perceptron <-
function(x = x0, w0 = c(0, 1), threshold = -1, rate = 0.8, ans = ans0)
{
  w0 <- c(threshold, w0)
  x  <- rbind(-1, x)

  i <- 1
  while(all(sign(t(w0) %*% x) != ans)){
    j <- (i + 3) %% 4 + 1
    if(sign(t(w0) %*% x[, j]) == ans[j]){
      w0 <- w0
    }else{w0 <- w0 + sign(ans[j]) * rate * x[, j]}
      i <- i + 1
  }
  return(w0)
}




for 版本成功輸出正確的w0
while版本還是輸出初始w0


主要是迴圈寫法的問題
不知道演算法部分是否要寫詳細

若需要我再補充   謝謝

--","R_Language"
"673","M.1501641558.A.BC9","andrew43","分享","全域與子域變數名相同的風險",2017-08-02 10:39:14,NA,NA,"請先看看下列網頁中的圖。
看起來還滿嚇人的。

順便一問，
如果要改寫圖中的code有沒有什麼穩健方法？

對於R從哪個環境取變數，要更小心點了。

[出處]:
R Tip: Don't let the name of a
function's return value clash
with an existing object.
See pic!
#rstats#DataSciencehttps://t.co/6cgn0KZABK--","R_Language"
"674","M.1501580249.A.6DD","Wush978","心得","使用Rscript一定要先library(methods)",2017-08-01 17:37:25,NA,NA,"先附上一個範例程式碼https://gist.github.com/wush978/cc97a807de5d23c9d6d8c3729aeb0e52如果把這個程式碼存到  test.R

無論在console跑 source(""test.R"") 或是在command line下輸入 R --no-save < test.R

都不會發生錯誤

但是如果在command line下輸入 Rscript test.R 就會發生錯誤





















原因在於， R 載入套件的時候，如果該有定義S3/S4方法，那有沒有載入methods套件會

對這些方法的行為造成影響。

而在console或 R --no-save 這種用法，預設都會載入methods套件。

但是在Rscript 的環境中，預設不會載入methods套件

心得： 如果要使用Rscript，請在載入套件之前，載入methods套件才能保證你的R 不會

發生錯誤

ps. 這次我花了20分鐘找到原因，上一次... 好像是一個工作天吧... (遇到很多次了)

--","R_Language"
"675","M.1501567970.A.3F9","momo123163","問題","H2o延伸應用問題＿求救ＱＱ",2017-08-01 14:12:48,NA,NA,"<問題>
小弟上次有發文詢問一下H2o的問題，
但因為有網路大神幫忙
有嘗試改善一下自己丟入資料狀況
但還是有些問題想請教大神：
1. 這是我資料的樣子：http://imgur.com/a/5cBMa但當我下指令轉換成h20.hex後
也沒有狀況http://imgur.com/9gDEMRg於是簡易丟入
訓練模型的model
(只是簡易看一下資料是否能丟入建模因此沒有加太多的參數)http://imgur.com/a/3cxnU但跑起來後
就發現錯誤代碼ＱＱhttp://imgur.com/a/3vegO但我資料的型別用typeof 確認後
跟原本範例提供的iris大同小異
想問一下大神
問題到底出自哪裡ＱＱ？
再拜託大神多多幫忙！！

--","R_Language"
"676","M.1501331984.A.25E","abc2090614","問題","Re: ggplot轉plotly 自訂hovertext內容",2017-07-29 20:39:42,NA,NA,"※ 引述《parcequetoi (Sky)》之銘言：: 但是這樣畫的對應結果是錯的。: 目前遇到的最大問題是：: 我不知道我的character vector究竟要用什麼順序，: 每一個elements才會順利對到正確的圖上位置。: 常常hovertext是改了，但是hovertext文字顯示的交易種類卻跟線的顏色不符。: 即使符合了，我也沒有把握數列的順序到底是不是正確的。: 或是這種例子有直接用plotly作圖的方法？Thanks in advance!!: 已參考過下列文章：: 1. R_Language (#1O6p-6pq): 2. https://plot.ly/r/time-series/: 3. http://www.r-graph-gallery.com/2017/06/07/get-the-best-from-ggplotly/: [程式範例]:: https://gist.github.com/anonymous/c39f842543e49c5963671e333eb396abplot_ly(usd, x=~掛牌日期,y=~匯率 ,color = ~交易種類,
        type = 'scatter', mode = 'lines',
        hoverinfo = 'text',
        text = ~paste('交易種類: ', 交易種類, '<br>',
                      '掛牌日期: ', 掛牌日期, '<br>',
                      '匯率: ', 匯率))


我目前是這樣弄, 日期出來是ISO格式的 2017-07-21 然後 x軸 tick label是英文

這些都能再改, 我不太懂的是為什麼你說交易種類和線的顏色不符??

因為出來的圖, 折線的次序和用ggplot2弄出來的一樣?

--","R_Language"
"677","M.1501325059.A.3A3","parcequetoi","問題","ggplot轉plotly 自訂hovertext內容",2017-07-29 18:44:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
下方的程式範例直接執行可出現一個互動式圖。
當滑鼠移到線上的時候，在「掛牌日期」那個項目已經從日期被自動轉成數字，
但我想要的是原本日期的樣子（例如2017/07/28）。

我查過資料，知道可以透過下列方法自訂hovertext：
p <- plotly_build(g)
my.text <- paste0(""交易種類："", usd$交易種類, ""\n"",
           ""掛牌日期："", strftime(usd$掛牌日期, ""%Y/%m/%d""), ""\n"",
           ""匯率："", usd$匯率)
style(p, text = my.text, hoverinfo = ""text"", traces = 1:4)
但是這樣畫的顏色與類別對應結果是錯的。

目前遇到的最大問題是：
我不知道我的character vector究竟要用什麼順序，
每一個elements才會順利對到正確的圖上位置。
常常hovertext是改了，但是hovertext文字顯示的交易種類卻跟線的顏色不符。
即使符合了，我也沒有把握數列的順序到底是不是正確的。

或是這種例子有直接用plotly作圖的方法？Thanks in advance!!

已參考過下列文章：
1. R_Language (#1O6p-6pq)
2.https://plot.ly/r/time-series/3.http://www.r-graph-gallery.com/2017/06/07/get-the-best-from-ggplotly/[程式範例]:https://gist.github.com/anonymous/c39f842543e49c5963671e333eb396ab[環境敘述]:
R version 3.4.0 (2017-04-21)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: macOS Sierra 10.12.6

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] shiny_1.0.3          shinydashboard_0.6.1 reshape2_1.4.2
[4] plotly_4.7.0         ggplot2_2.2.1        magrittr_1.5
[7] rvest_0.3.2          xml2_1.1.1           httr_1.2.1

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.11      compiler_3.4.0    plyr_1.8.4
 [4] bindr_0.1         tools_3.4.0       digest_0.6.12
 [7] evaluate_0.10.1   jsonlite_1.5      tibble_1.3.3
[10] gtable_0.2.0      viridisLite_0.2.0 pkgconfig_2.0.1
[13] rlang_0.1.1       crosstalk_1.0.0   yaml_2.1.14
[16] curl_2.8.1        bindrcpp_0.2      knitr_1.16
[19] dplyr_0.7.2       stringr_1.2.0     htmlwidgets_0.9
[22] rprojroot_1.2     grid_3.4.0        glue_1.1.1
[25] data.table_1.10.4 R6_2.2.2          rmarkdown_1.6
[28] purrr_0.2.2.2     tidyr_0.6.3       selectr_0.3-1
[31] backports_1.1.0   scales_0.4.1      htmltools_0.3.6
[34] assertthat_0.2.0  mime_0.5          colorspace_1.3-2
[37] xtable_1.8-2      httpuv_1.3.5      labeling_0.3
[40] stringi_1.1.5     lazyeval_0.2.0    munsell_0.4.3

[關鍵字]:

ggplot2, plotly, ggplotly, hovertext

--","R_Language"
"678","M.1501214224.A.CDD","CAPPON","問題","ggplot X軸排序",2017-07-28 11:57:01,NA,NA,"在畫圖時，X軸順序會亂跳
如何固定我要的順序來呈現

d$Team1為我要的順序
用d$Team2來轉換確出現問題

圖的呈現要日期分開 再依Team1的group產生

是哪邊有出錯呢

謝謝

d <- data.frame(Team1=c(""Cowboys"",""Cowboys"", ""Giants"", ""Giants"", ""Eagles"", ""Ea
gles"", ""Redskins"", ""Redskins""), Win=c(20, 13, 9, 12,10, 13, 22, 12),Date=c(""7/
25"",""7/26"",""7/25"",""7/26"",""7/25"",""7/26"",""7/25"",""7/26""))

d$Team2 <- factor(d$Team1, as.character(d$Team1))

ggplot(d, aes(x=Date,y=Win,fill=Team2))+ geom_bar( stat=""identity"")

--","R_Language"
"679","M.1501140479.A.88F","BUQ","問題","%in% subset 用法差異",2017-07-27 15:27:55,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的s=read.csv(""./data/outp_m.csv"")

gg<- s[s$year %in% c(2000:2011), ]
kk=subset(s,year==2000|year==2011)
請問上面這兩行差在哪裡

最後變數  變成這樣http://imgur.com/z1ByHuh[程式範例]:


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:%in%  subset--","R_Language"
"680","M.1501063745.A.5E3","augustana","問題","text2vec 怎麼取 context vectors",2017-07-26 18:09:02,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想利用text2vec將文字向量化
不過我沒辦法抓到他的word vector跟context vector
感覺是因為這兩個向量是在glove這個environment中private的區塊
所以怎麼寫都抓不出來
當我輸入glove$的時候, R自己跑出來的選單都只有public的東西

environment如下, 其中w_i, w_j就是我想要抓的向量

<GloVe>
  Inherits from: <word_embedding_model>
  Public:
    clone: function (deep = FALSE)
    dump_every_n: 0
    dump_model: function ()
    fit: function (x, n_iter, convergence_tol = -1, ...)
    get_history: function ()
    get_word_vectors: function ()
    initialize: function (word_vectors_size, vocabulary, x_max, learning_rate
= 0.15,
    shuffle: FALSE
    verbose: TRUE
  Private:
    alpha: 0.75
    b_i: -0.088758796453476 -0.200479492545128 -0.276277631521225 ...
    b_j: 0.158077865839005 0.00269329198636115 -0.506954908370972 ...
    cost_history: 0.0582876185658562 0.0376007230450009 0.0264438356106707 ...
    fitted: TRUE
    glove_fitter: Rcpp_GloveFitter
    grain_size: 100000
    initial: NULL
    internal_matrix_format: dgTMatrix
    lambda: 0
    learning_rate: 0.15
    max_cost: 10
    vocab_terms: 3000 體型 較 呵護 m62 護膚 新生兒 s12 級 白金 特極 頂級 ...

    w_i: 0.194914728403091 -0.0265734232962132 -0.611702501773834 ...
    w_j: 0.273217976093292 -0.193755224347115 0.475706458091736 0 ...

    word_vectors_history: NULL
    word_vectors_size: 50
    x_max: 10


[程式範例]:library(text2vec)keyword <- as.character(article_list$keyword[1])keyword <- enc2utf8(keyword) #轉UTF8keyword <- strsplit(keyword,',')########計算不重複的詞# iteratortoken <- itoken(keyword)# to create unique word matrixvocab <- create_vocabulary(token, ngram=c(1, 1)) #詞,頻率,文章佔比##只篩出現5次以上的詞#vocab <- prune_vocabulary(vocab, term_count_min = 5L)########向量化# vectorization of wordsvectorizer <- vocab_vectorizer(vocab,grow_dtm= FALSE, #don't vectorize inputskip_grams_window= 5L) #use window of 5 forcontext words# tcm= term co-occurrence matrix 字段共現矩陣tcm <- create_tcm(token, vectorizer)# glove fitting model, 分解TCM矩陣glove <- GlobalVectors$new(word_vectors_size = 50, vocabulary = vocab, x_max= 10)glove$fit(tcm, n_iter = 20)#詞向量word.vec <- glove$word_vectors$w_i + #文字向量glove$word_vectors$w_j #脈絡向量就是最後一行這出了問題
不知道是不是因為text2vec裡面的glove()已經被刪除
改成GlobalVectors()的關係所以這條就失敗了

[環境敘述]:R version 3.4.0 (2017-04-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1Matrix products: defaultlocale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] stringi_1.1.2  RODBC_1.3-14   text2vec_0.4.0loaded via a namespace (and not attached):[1] compiler_3.4.0      magrittr_1.5        R6_2.2.0            Matrix_1.2-9tools_3.4.0[6] Rcpp_0.12.11        codetools_0.2-15    grid_3.4.0iterators_1.0.8     foreach_1.4.3[11] data.table_1.10.4   digest_0.6.10       RcppParallel_4.3.20lattice_0.20-35[關鍵字]:text2vec, environment, private--","R_Language"
"681","M.1500996375.A.BCC","DDinin","問題","R studio打不開",2017-07-25 23:26:12,NA,NA,"剛剛安裝R studio

但是安裝完後無法打開

一點開都會出現下面這個訊息http://i.imgur.com/VUt1Gak.png希望各位可以幫幫我

--","R_Language"
"682","M.1500974175.A.A9F","tony1331","問題","請教資料處理問題",2017-07-25 17:16:12,NA,NA,"[問題類型]:

我想用R 做某件事情，但是我不知道要怎麼用R 寫出來


[軟體熟悉度]:

沒寫過程式，R 是我的第一次)


[問題敘述]:

  a     20
  b     39
  c     9
  w     29
  k     45
  e     93

a~z為中文(為電視節目，有很多)
且有很多重複的
請問該如何把一樣節目的秒數加總起來
我需要把他們做排名，謝謝~






-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"683","M.1500953434.A.471","liu02112","問題","Python能爬這個網頁 R卻一直沒辦法?",2017-07-25 11:30:29,NA,NA,"- 問題: 不確定爬以下網頁資料要用GET還是POST?https://www.investing.com/commodities/gold-historical-data[軟體熟悉度]:
對於R有一定的基礎,但是對R Craeler很不熟

[問題敘述]:
目前想抓取 www.investing.com 的任意時間區間歷史資料

但是看到這網頁我真是傻眼,不知道是用

GET(""https://www.investing.com/instruments/HistoricalDataAjax"")不可能..沒有要求時間或ID...

POST(""https://www.investing.com/instruments/HistoricalDataAjax"",Form Data=....)
但是想想也不對 而且try過資料也沒進來...

在Github上找了Python的code確實可以爬,

但是對Python不熟,所以我不解為什麼Python能辦到R卻不行?

以上

就算不一定能幫我解決問題

還是要謝謝各位願意花時間看本文

--","R_Language"
"684","M.1500917409.A.FCF","forgotnow","問題","請問Rstudio中無法顯示中文",2017-07-25 01:30:06,NA,NA,"[問題類型]:
使用 Rstudio 時無法顯示中文
(輸入中文字會直接消失只有空白,copy paste其它人注解也一樣)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

目前使用 Win10 筆電, 和Win7桌機, 在R(3.3.1) console下可以打中文;
但是只要進入 Rstudio 想要輸入中文就會只出現空白
即使是copy paste注解的中文也一樣...
想問問看是否有解決方法 (我試了改global options to UTF-8 但沒有幫助@[email<U+00A0>protected])

感謝感謝~

[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950


[關鍵字]:
Rstudio, 消失的中文字

--","R_Language"
"685","M.1500776667.A.C47","qazwsx879345","問題","自動更新",2017-07-23 10:24:24,NA,NA,"[問題類型]:

想要持續自動更新呈現出來的圖


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前用R3.3.3  + SHINY package 寫了一個簡單的介面

可以先按一個CHOOSE 鍵 選取資料夾 讀裡面的檔案後

按下UDPATE 會計算資料  畫圖

大多都是用eventReactive 偵測到INPUT$UPDATE鈕後

就去計算不同的數據(平均數之類的  去畫圖

但現在想要做到可能選完資料夾後 可能按一次UPDATE

就自動持續更新(因為資料夾可能會一直丟新的檔案進去

所以想請問可以用甚麼方式

來做到可能類似 每一分鐘 自動按UPDATE扭

或是其他任何不用按UPDATE

就能讓他自動讀取新資料 計算數據的方式



[關鍵字]:自動更新/自動讀檔--","R_Language"
"686","M.1500705634.A.F7B","bluecadence","分享","使用R抓取證交所股價資料",2017-07-22 14:40:28,NA,NA,"因為有網友來信問到如何使用 R 抓取證交所網站股價資料
我就把簡單的作法，貼在這裡，讓有需要的網友參考。
(其實我本身是習慣使用 python 抓資料的)

原則上證交所有非常多種資料，資料的抓取方式都大同小異，
因為證交所前一陣子把資料都改成 json 格式，非常好抓。
大家可以依照自己需求，改一下參數，抓取想要的資料。

這裡我抓取特定日期，上市所有股票的交易資訊。
#http://www.tse.com.tw/zh/page/trading/exchange/MI_INDEX.html# 全部(不含權証 牛熊證 ....etc)

library(jsonlite)
qdate <- '20170721'   #要抓取的日期
qtype <- 'ALLBUT0999' #全部(不含權証 牛熊證 ....etc)
ttime <- as.character(as.integer(as.POSIXct(Sys.time()))*100)
url <- paste0('http://www.twse.com.tw/exchangeReport/MI_INDEX?','response=json&date=',qdate,'&type=',qtype,'&_=',ttime)
x <- fromJSON(url,flatten=T)
x$data5

個股資料都在 x$data5，有需求者依照自己要的清理一下資料，
例如存成csv，或存進資料庫，寫成自動程式等,這部份就請自行
處理。如果只想抓取特定股票例如台積電 2330，請研究一下
網站，抓取方式類似。
另外上櫃股票的網站抓取方式類似，也都是 json 格式資料。

:p

補上 python3 的程式碼
import time
import requests

qdate = '20170721'
qtype = 'ALLBUT0999'
ttime = str(int(time.time()*100))
url = 'http://www.twse.com.tw/exchangeReport/MI_INDEX?response=json&date={}&type={}&_={}'.format(qdate,qtype,ttime)
page = requests.get(url)
x = page.json()

資料都在
x['data5']

--","R_Language"
"687","M.1500655217.A.C2F","kial","問題","Re: 如何將表格轉換成一行資料",2017-07-22 00:40:14,NA,NA,"※ 引述《c9052002 (c9052002)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]::: 目前有一個表格內容，但因為需要匯出至其他軟體，因此要變更目前的格式，: 原先的表格抬頭為編號，排序分別依照日期由上至下排列，: 而希望變更的內容為:排序=日期*編號數量由上至下: 原本:     1 2 3 4 ......: 1/1 a b c d: 1/2 g h i j: 1/3 m n o p: 1/4 s t u v一步一步來的版本


#製作sample資料
a0 <- c(""1/1"",""1/2"",""1/3"",""1/4"")
a1 <- c(""a"",""g"",""m"",""s"")
a2 <- c(""b"",""h"",""n"",""t"")
a3 <- c(""c"",""i"",""o"",""u"")
a4 <- c(""d"",""j"",""p"",""v"")
#以dataframe形式合併放進data
data<-as.data.frame(cbind(a0,a1,a2,a3,a4))
#取名
names(data)<-c(""date"",""1"",""2"",""3"",""4"")
#看資料
data


#==output
#date 1 2 3 4
#1  1/1 a b c d
#2  1/2 g h i j
#3  1/3 m n o p
#4  1/4 s t u v

#install.packages(""reshape2"")
#載入reshape2包
library(reshape2)
#用melt()以date為準將橫資料轉為長資料放進data
data <- melt(data,id.vars=""date"")
#留下date和value欄位
data <- as.data.frame(cbind(as.character(data$date),data$value))
#取名
names(data)<-c(""date"",""x"")
#排序
data<-data[order(data$date),]
#看資料
data


#==output
#   date x
#1   1/1 a
#5   1/1 b
#9   1/1 c
#13  1/1 d
#2   1/2 g
#6   1/2 h
#10  1/2 i
#14  1/2 j
#3   1/3 m
#7   1/3 n
#11  1/3 o
#15  1/3 p
#4   1/4 s
#8   1/4 t
#12  1/4 u
#16  1/4 v



日期跟欄位的處理主要都是資料型態的問題，

主要是利用reshape2包中的melt()來處理數據。


--","R_Language"
"688","M.1500633836.A.304","celestialgod","問題","Re: 中英文分割成兩變數",2017-07-21 18:43:53,NA,NA,"※ 引述《pp61022 (fight)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我有一個變數是字串，裡面同時包含中文英文，但沒有任何分隔符號。: 例如：: [1] ""劍橋大學University of Cambridge"": [2] ""皇家理工學院（帝國理工學院）Imperial College London"": [3] ""加州大學洛杉磯分校University of California-Los Angeles"": [4] ""Melbourne University"": ......: ......: 我想把這個變數拆成兩個變數: ""學校中譯"",  ""學校英名"": 如：: [1] ""劍橋大學"", ""University of Cambridge"": [2] ""皇家理工學院（帝國理工學院）"",  ""Imperial College London"": [3] ""加州大學洛杉磯分校"" , ""University of California-Los Angeles"": [4] NA, ""Melbourne University"": ...: ...: 這變數有一部分含中譯，一部分只有英文，: 因為他中文字長度不一樣，沒辦法直接取個數分割，: 不過有中譯結尾都是""學院"", ""大學"", ""分校""(但並非整個字串的結尾）: 剛接觸文字清理，對全部函數還沒辦法通透運用，有搜尋一陣子但都無法達成想要的結果: ，想請教版友有沒有好方法可以將中英文完整分割成兩個變項，謝謝版友。: 或是沒辦法中英文分割，能否只留下英文，之後我再自己串中英文對照，謝謝版友。: [程式範例]:: [環境敘述]:: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤: [關鍵字]::

我已經習慣用stringr了，所以如果你想要用R原生的就用strsplit跟gsub

library(stringr)

x <- c(""劍橋大學University of Cambridge"",
""皇家理工學院（帝國理工學院）Imperial College London"",
""加州大學洛杉磯分校University of California-Los Angeles"",
""Melbourne University"")

str_split(str_replace_all(x, ""([^A-Za-z ]*)([A-Za-z\\- ]+)"", ""\\1,\\2""), "","")

output:

[[1]]
[1] ""劍橋大學""                ""University of Cambridge""

[[2]]
[1] ""皇家理工學院（帝國理工學院）"" ""Imperial College London""

[[3]]
[1] ""加州大學洛杉磯分校""      ""University of California-LosAngeles""

[[4]]
[1] """"                     ""Melbourne University""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"689","M.1500617592.A.993","c9052002","問題","如何將表格轉換成一行資料",2017-07-21 14:13:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:目前有一個表格內容，但因為需要匯出至其他軟體，因此要變更目前的格式，原先的表格抬頭為編號，排序分別依照日期由上至下排列，而希望變更的內容為:排序=日期*編號數量由上至下原本1 2 3 4 ......1/1 a b c d1/2 g h i j1/3 m n o p1/4 s t u v希望變更結果x1/1 a1/1 b1/1 c1/1 d1/2 g1/2 h1/2 i1/2 j1/3 m1/3 n1/3 o1/3 p1/4 s1/4 t1/4 u1/4 v不知大大們是否有解，小的以往都是用excel，但要處理的資料量太大了，希望可以用r來減少人工動作的時間QAQ或是人工動完EXCEL死機的悲劇Orz感謝[程式範例]:目前用以下方法print出來的結果""看起來""是我要的，但我不知該如何將資料匯出成我要的結果x=1while(x<=4){print(c(表格名稱[x,1:107]))x=x+1}至於日期的序列我有另外找到可以生成的方式c<-rep(seq(as.POSIXct(""1990-01-01""), len=9131, by=""day""), rep(107, 9131))data.frame(c)->表格名稱write.table(表格名稱,file = ""匯出名稱"", sep = "","")以上是目前用很笨的方式逐一修改再合併資料。[環境敘述]:Window 7 ,RStudio介面[關鍵字]:更改格式,表格資料轉為單行資料--","R_Language"
"690","M.1500615148.A.A2E","pp61022","問題","中英文分割成兩變數",2017-07-21 13:32:26,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:
我有一個變數是字串，裡面同時包含中文英文，但沒有任何分隔符號。

例如：

[1] ""劍橋大學University of Cambridge""
[2] ""皇家理工學院（帝國理工學院）Imperial College London""
[3] ""加州大學洛杉磯分校University of California-Los Angeles""
[4] ""Melbourne University""
......
......

我想把這個變數拆成兩個變數
""學校中譯"",  ""學校英名""

如：
[1] ""劍橋大學"", ""University of Cambridge""
[2] ""皇家理工學院（帝國理工學院）"",  ""Imperial College London""
[3] ""加州大學洛杉磯分校"" , ""University of California-Los Angeles""
[4] NA, ""Melbourne University""
...
...

這變數有一部分含中譯，一部分只有英文，
因為他中文字長度不一樣，沒辦法直接取個數分割，
不過有中譯結尾都是""學院"", ""大學"", ""分校""(但並非整個字串的結尾）

剛接觸文字清理，對全部函數還沒辦法通透運用，有搜尋一陣子但都無法達成想要的結果
，想請教版友有沒有好方法可以將中英文完整分割成兩個變項，謝謝版友。


或是沒辦法中英文分割，能否只留下英文，之後我再自己串中英文對照，謝謝版友。


[程式範例]:




[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:


--","R_Language"
"691","M.1500567132.A.432","celestialgod","問題","Re: time loop",2017-07-21 00:12:06,NA,NA,"※ 引述《peterwu76 (金岡)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 讓R每5分鐘執行一次資料下載: 想讓儲存的檔案名稱變成數字，如第一筆檔案為 1.xlsx，第二筆為 2.xlsx，: 但一直噴錯出來。: 另外，如果用上篇的code，好像常常跑10小時就停了，沒有跳出紅字。: : [程式範例]:: cat(rep(""\n"",64)): library(jsonlite): library(RCurl): library(httr): library(xlsx): for (i in 1:(60*24*5/5)){  #創建 i 等於數字: while (TRUE) {:   if (format(Sys.time(), ""%S"") == ""01"") return(""Downloading"") else:     Sys.sleep(300): Dataurl<-url(""https://airbox.edimaxcloud.com/devices?token=EA81A1FA-8EDB-:               4CA0-B07B-A881C74B0401""):   DATA<-fromJSON(Dataurl):   Table<-data.frame(DATA):   Sites<-c(""74DA38C7D1C2"",""74DA38C7D0B0"",""74DA38C7D1C4"",""74DA38C7D1CA"",:            ""74DA38C7D0A2"",""74DA38C7D0A0"",""74DA38C7D09C"",""74DA38C7D09E"",:            ""74DA38C7D0AE"",""74DA38C7D1D2"",""74DA38AF4860"",""74DA38AF47F8"",:            ""G0000000000E""):   Table <- subset(Table, devices.id %in% Sites):    datenum <- i:    toString(datenum)  # 將 i 命名為datenum再改為字串:   outfile = paste(""D:\\"", datenum, sep = """"):   write.xlsx(Table, file = outfile): }: }: : [環境敘述]:: : R-Studio: : [關鍵字]:: : 選擇性，也許未來有用: : Sys.time sys.sleep time loop其實可以寫得很簡單，請參考：


library(httr)
library(pipeR)
library(xlsx)
library(data.table)

url <- ""https://airbox.edimaxcloud.com/devices""Sites <- c(""74DA38C7D1C2"",""74DA38C7D0B0"",""74DA38C7D1C4"",""74DA38C7D1CA"",
           ""74DA38C7D0A2"",""74DA38C7D0A0"",""74DA38C7D09C"",""74DA38C7D09E"",
           ""74DA38C7D0AE"",""74DA38C7D1D2"",""74DA38AF4860"",""74DA38AF47F8"",
           ""G0000000000E"")
while (TRUE) {
  # i是從零點到現在共度過幾分鐘
  i <- hour(Sys.time()) * 60 + minute(Sys.time())
  # i不能被5整除的話，就休息一分鐘，每分鐘起來跑才不會漏
  if (i %% 5 != 0) Sys.sleep(60)
  # 直接取得資料，然後轉成data.table後直接寫出
  GET(url, query = list(token = ""EA81A1FA-8EDB-4CA0-B07B-A881C74B0401""),
      user_agent(""Chrome/59.0.3071.115"")) %>>% content %>>% `[[`(2) %>>%
    lapply(as.data.table) %>>% rbindlist %>>% `[`(id %in% Sites) %>>%
    write.xlsx(file = paste0(""D:/"", i/5, "".xlsx""))
}

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"692","M.1500563798.A.B27","peterwu76","問題","Re: time loop",2017-07-20 23:16:33,NA,NA,": [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):
:: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]::: 讓R每5分鐘執行一次資料下載想讓儲存的檔案名稱變成數字，如第一筆檔案為 1.xlsx，第二筆為 2.xlsx，
但一直噴錯出來。

另外，如果用上篇的code，好像常常跑10小時就停了，沒有跳出紅字。: [程式範例]::
cat(rep(""\n"",64))

library(jsonlite)
library(RCurl)
library(httr)
library(xlsx)

for (i in 1:(60*24*5/5)){  #創建 i 等於數字

while (TRUE) {
  if (format(Sys.time(), ""%S"") == ""01"") return(""Downloading"") else
    Sys.sleep(300)


Dataurl<-url(""https://airbox.edimaxcloud.com/devices?token=EA81A1FA-8EDB-4CA0-B07B-A881C74B0401"")
  DATA<-fromJSON(Dataurl)
  Table<-data.frame(DATA)
  Sites<-c(""74DA38C7D1C2"",""74DA38C7D0B0"",""74DA38C7D1C4"",""74DA38C7D1CA"",
           ""74DA38C7D0A2"",""74DA38C7D0A0"",""74DA38C7D09C"",""74DA38C7D09E"",
           ""74DA38C7D0AE"",""74DA38C7D1D2"",""74DA38AF4860"",""74DA38AF47F8"",
           ""G0000000000E"")
  Table <- subset(Table, devices.id %in% Sites)


   datenum <- i
   toString(datenum)  # 將 i 命名為datenum再改為字串
  outfile = paste(""D:\\"", datenum, sep = """")
  write.xlsx(Table, file = outfile)
}
}


:: [環境敘述]::: R-Studio:: [關鍵字]::
:: 選擇性，也許未來有用:: Sys.time sys.sleep time loop:

--","R_Language"
"693","M.1500541797.A.A59","defvocal","問題","Rmysql匯入中文會亂碼",2017-07-20 17:09:54,NA,NA,"[問題類型]:  想透過Rmysql將資料匯入mysql，但中文字會變成亂碼。

[軟體熟悉度]:
使用者

[問題敘述]:
透過Rmysql連結mysql，寫入中文或非英數字串，會變成亂碼，
試過一些網路上的解法，但好像沒有辦法改變...
且網路上的資源英文居多，但英文就比較不容易發生這種問題。
直接在用phpmyadmin讀寫mysql的中英文都正常。
環境是windows 10 64位元
R 3.3.2 。
麻煩高手賜教...謝謝！

[程式範例]:

library(DBI)
library(RMySQL)
library(dplyr)
con <- dbConnect(MySQL(), user=""root"", password=""test"", dbname=""test"",
host=""localhost"")> dbSendQuery(con,""SET NAMES utf8"")<MySQLResult:0,0,13>> df <- data.frame(aa = enc2utf8(""台北""), bb = enc2utf8(""台中""), cc=enc2utf8(""<U+306E><U+306E><U+306E><U+306E><U+306E>"") , dd=""FF"" ,ee=""GG"")> dbWriteTable(con, name = ""new10"", value = df, overwrite = FALSE,row.names = FALSE, append = T, fileEncoding=""UTF-8"")

 [1] TRUE> dbReadTable(con, 'new10')aa      bb                                       cc dd ee
1 瞼x瞼_ 瞼x瞻瞻 <U+306E><U+306E><U+306E><U+306E><U+306E> FF GG

## 如上，寫入的中文跟日文都變成亂碼了..

## 附上一些其他資訊如下：> dbGetQuery(con,""show variables like 'character_set_%'"")Variable_name                                      Value
1     character_set_client                          utf8
2 character_set_connection                          utf8
3    character_set_databas                        latin1
4 character_set_filesystem                        binary
5    character_set_results                          utf8
6     character_set_server                          utf8
7     character_set_system                          utf8
8       character_sets_dir C:\\Bitnami\\wampstack-5.6.30-1\\mysql\\share\\charsets\\


[環境敘述]:> sessionInfo()R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)
locale: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C                                 [5] LC_TIME=Chinese (Traditional)_Taiwan.950      attached base packages: [1] stats     graphics  grDevices utils     datasets  methods   base       other attached packages: [1]
RMySQL_0.10.11 DBI_0.5-1
loaded via a namespace (and not attached): [1] tools_3.3.2

[關鍵字]:   Rmysql  mysql


--","R_Language"
"694","M.1500538749.A.549","KKbiger","心得","用R連接gooel試算表",2017-07-20 16:18:57,NA,NA,"[關鍵字]:

google 試算表


[重點摘要]:

網頁廢話版:http://yichunsung.github.io/r_notebook/notebook_for_goolesheets因為我工作時有很多工作夥伴不懂coding、資料庫這些東西。

唯一會的就是goole試算表和execl，後來便想到乾脆用R連接google試算表

方便大家需要資料的人自己上去google試算表中抓，省去很多電話打來打去的時間

網頁版的是我寫給一些會用R的工作夥伴的筆記，想說順道分享上來。1. 前言直接利用R存取google試算表的資料，簡化一些不必要的操作2. 套件安裝利用googlesheets套件可以輕鬆地串接R與存取在雲端上的google試算表。※ 範例:install.packages('googlesheets')library(googlesheets)3. 連結google帳戶安裝好套件後，首先第一步驟是要連結你的google帳戶，在此之前你可以先去隨意於網頁
上建立一個測試用資料表，但也可以不用，googlesheets套件好用之處在於你可以完全利
用R去建立、存取和刪除你帳戶中的任何試算表。

利用這個函數googlesheets::gs_auth()建立與google帳戶的授權※ 範例:gs_auth(new_user = TRUE) # 與帳戶建立新的受權gs_user()# 查看user資料

此時會自動幫你開啟瀏覽器，你必須於瀏覽器中登入你的google帳號。登入成功後瀏覽器
會顯示訊息，之後便可回到R的執行環境之下。gs_user()這個函數可以查看該帳戶的資
訊。4. 查看google試算表使用gs_ls()這個函數可以直接查看該帳戶中所有可用的google試算表，如果該帳戶中無
任何可存取的試算表他就會顯示訊息告知你無任何試算表可使用※ 範例:gs_ls()# 查看帳戶中的google試算表list5. 讀取gs_tittle(): 註冊帳戶中可使用的Spreadsheet進入R，function內的參數為該
Spreadsheet名稱。gs_read(): 讀取選擇的spreadsheet中的某個Worksheet。

利用gs_title()註冊帳戶中一個Spreadsheets，再利用gs_read()去讀取Spreadsheet中
的其中一個worksheet，讀取後他將存成一個data frame。※ 範例:test_gs<-gs_title('testFile')# 讀取帳戶中名為""testFile""的 SpreadsheetUBspot<-gs_read(ss=test_gs, ws = ""工作表1"", skip=0)# ss = spreadSheet, ws = worksheetgs_url(): 利用連結註冊，function內的參數為該Spreadsheet的公開連結。gs_read(): 讀取選擇的spreadsheet中的某個Worksheet。

可利用gs_url()註冊的spreadsheet分為兩類，一種是已發布的公開spreadsheet，另一種
是一般私人spreadsheet。

要利用私人的Spreadsheet，一樣需要取得帳戶授權，步驟如上面相同，只是註冊
spreadsheet時由gs_title()改成gs_url()，而已經發佈且公開的Spreadsheet則不需要帳
戶授權的步驟，因為是公開發佈的資料，所以任何人都可以透過該URL去註冊這個
Spreadsheet。

但通常公開發佈的資料表並不會開放權限給外人寫入，只有讀取功能而已。但相對地，如
果你有一份資料想要提供給超多人使用，這就是一個很好的途徑，不然私人資料表你就得
透過google的共用功能去分享給別人。註: 網頁版有圖教學如何公開發布goole試算表http://yichunsung.github.io/r_notebook/notebook_for_goolesheets發佈成功後，便可以取得連結，在不需要帳戶登入或授權情況下可以註冊該spreadsheet
。除此之外，對R來說使用gs_url()最重要的場合就是讓shinyapps去讀取這個資料表，這
部分後面會有詳盡的範例。※ 範例:Purl<-
""https://docs.google.com/spreadsheets/d/1aoXyR7foNOsSergX39cEalNGOJNBMrWbIog0dASocpw/edit?usp=sharing""sibi_spreadsheet<-gs_url(Purl)sibidf<-gs_read(ss=sibi_spreadsheet, ws = ""K3_station_list"", skip=0)6. 寫入新的資料新增資料※ 範例:newdata<-data.frame(name=c(""Ulaanbaatar Railway Station"",
                             ""Ulaanbaatar Airport""),
                    eng = c(""Ulaanbaatar Railway Station"",
                            ""Ulaanbaatar Airport""),
                    lat = c(47.908592, 47.840388),
                    lng = c(106.883938, 106.769976)
                    )gs_add_row(ss=test_gs, ws = ""工作表1"", input = newdata) # 新增資料

在你已授權的帳戶中建立一個新的spreadsheet。※ 範例:gs_new(""CWB-data"", ws_title = ""Beiliao"", input = Beiliao, trim = TRUE,
verbose = FALSE)

在已註冊的Spreadsheet中新增一個新的worksheet。※ 範例:CWB_gs<-gs_title('CWB-data')gs_ws_new(ss = test_gs, ws_title = ""Zhudong"", input = test2, trim = TRUE,
verbose = FALSE)7. Shinyapps應用把google sheets當作資料庫，而shinnyapps的server.R可以連結進去

程式碼在下面，Demo:https://yichunsung.shinyapps.io/testgooglesheets/這樣的東西方便性在於，未來你要更新資料，你不必在把server.R打開來重新更新code，
你可以直接上去Google Sheet增加資料就好，介面簡單直觀，對於不用R的工作夥伴而言
也非常輕鬆可以協助更新資料。另外注意，gs_read()千萬記得放在shinyServer(function(input, output){}裡面，才會自動更新資料server.R:library(shiny)
library(googlesheets)
library(plotly)

GTPurl <-
""https://docs.google.com/spreadsheets/d/11VFUdSCfZahqIuaO5eAvtCyyIjpnnYkG4w7KliiY_fc/edit?usp=sharing""GTPtest <- gs_url(GTPurl)


shinyServer(function(input, output) {
  GTPtestdf <- gs_read(ss=GTPtest, ws = ""工作表1"", skip=0)
  GTPtestdf$date <- as.Date(GTPtestdf$date)
  output$the_data <- renderDataTable({

    GTPtestdf
  })
  output$plotlyData <- renderPlotly({

    GTPdataplotly <- plot_ly(
      data = GTPtestdf,
      x = GTPtestdf$date,
      y = GTPtestdf$TA_Day,
      type = ""scatter"",
      mode = ""liners+markers""
    )
    GTPdataplotly
  })
})ui.R:library(shiny)
library(googlesheets)
library(plotly)

shinyUI(fluidPage(
  titlePanel(""Quick demo""),
  sidebarLayout(
    sidebarPanel(
      dateRangeInput(""dates"",
                     label = h3(""date""),
                     start = ""2017-01-01"",
                     end = ""2017-01-01"",
                     format = ""yyyy-mm-dd""),
      selectInput(""title"",
                  label = h3(""station""),
                  choices = c(""title1"", ""title2"", ""title3""),
                  selected = ""title1""),
      submitButton(""Submit""),
      br()
    ),
    mainPanel(
      tabsetPanel(
        tabPanel(""result"",
                 dataTableOutput(""the_data"")),
        tabPanel(""Plot"",
                 plotlyOutput(""plotlyData""))
      )
    )
  )
))Referencehttps://shiny.rstudio.com/articles/persistent-data-storage.html#gsheetshttps://github.com/jennybc/googlesheets/issues/126https://www.r-bloggers.com/reading-data-from-google-sheets-into-r/https://is.gd/t7yHAm--","R_Language"
"695","M.1500476501.A.3BD","cccc12345","問題","Re: gtrendR錯誤訊息不知如何解決",2017-07-19 23:01:37,NA,NA,"應該是原作者https://github.com/PMassicotte/gtrendsR看了下底下,作者表示因為google trends的api 改變所以他會在github先做測試
,之後才會更新到cran ,你如果要用 ,就要下載github的版本


我幫你看了下
程式碼如下:

if (!require(""devtools"")){
  install.packages(""devtools"")
  library(devtools)
}
if(!require(""gtrendsR"")){
  devtools::install_github(""PMassicotte/gtrendsR"")
  library(gtrendsR)
}
res <- gtrends(""Brexit"",time=""2016-01-01 2017-07-15"")
plot(res)

把資料畫出來長:http://i.imgur.com/6atryM8.png補充:因為你已經有安裝,所以如果有出現視窗或其他問你要不要覆蓋過去之類的
就點YES(使用Rstudio) , 如果是直接用R就把
if(!require(""gtrendsR"")){
  devtools::install_github(""PMassicotte/gtrendsR"")
  library(gtrendsR)
}
改成
  devtools::install_github(""PMassicotte/gtrendsR"")
  library(gtrendsR)
就好
--","R_Language"
"696","M.1500387732.A.9C5","circlesquare","問題","gtrendR錯誤訊息不知如何解決",2017-07-18 22:22:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:使用gtrendsR套件，出現下列錯誤訊息，但不知道該如何解決。錯誤: Not enough search volume. Please change your search terms.此外: Warning message:In request_GET(x, url, ...) : Gone (HTTP 410).[程式範例]install.packages(""gtrendsR"")library(gtrendsR)account_code <- gconnect(usr = ""username"", psw = ""password"")gtrends(query = ""Brexit"",start_date = ""2016-01-01"",end_date = ""2017-07-15"")[程式範例]:usr與psw是登入gmail的帳號密碼，不方便給大家，跟大家說抱歉。[環境敘述]:> sessionInfo()R version 3.3.2 (2016-10-31)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: macOS Sierra 10.12.3locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] gtrendsR_1.3.5loaded via a namespace (and not attached):[1] Rcpp_0.12.10     lattice_0.20-35  codetools_0.2-15 XML_3.98-1.6[5] zoo_1.8-0        grid_3.3.2       plyr_1.8.4       R6_2.2.0[9] jsonlite_1.4     gtable_0.2.0     magrittr_1.5     scales_0.4.1[13] ggplot2_2.2.1    httr_1.2.1       stringi_1.1.5    curl_2.6[17] lazyeval_0.2.0   googleVis_0.6.2  xml2_1.1.1       tools_3.3.2[21] stringr_1.2.0    selectr_0.3-1    munsell_0.4.3    colorspace_1.3-2[25] rvest_0.3.2      tibble_1.3.0[關鍵字]:gtrendsR--","R_Language"
"697","M.1500129163.A.8ED","sacidoO","問題","Re: 請教各位大神，H2O的使用問題",2017-07-15 22:32:40,NA,NA,"不知道原po的train data frame資料裡面是什麼型態呢? 建議處理一下
(ex.assign factor for 字元/類別變數...)
如果轉成h2o前 您的train data frame有處理過factor的話
train.hex應該是不用在assign factor

 - 另外數據內有時間變數嗎? 不太清楚h2o能不能處理時間



另外不知到為什麼原po寫x, y等於 1:7跟9呢？
建議改成train.hex 堶悸瘍僂あW稱(或是train的- 一樣的 )
p.s.你可以像正常R一樣用names 來看 train.hex的變數名稱




另外我ｐｏ上官方的ｃｏｄｅ　－　不知道設立其他參數有無幫助你的模型：


m2 <- h2o.deeplearning(
  model_id=""dl_model_faster"",
  training_frame=train,
  validation_frame=valid,
  x=predictors,
  y=response,
  hidden=c(32,32,32),                  ## small network, runs faster
  epochs=1000000,                      ## hopefully converges earlier...
  score_validation_samples=10000,      ## sample the validation dataset
(faster)
  stopping_rounds=2,
  stopping_metric=""misclassification"", ## could be ""MSE"",""logloss"",""r2""
  stopping_tolerance=0.01
)

出處:https://github.com/h2oai/h2o-tutorials/tree/master/tutorials/deeplearning※ 引述《momo123163 (RT-boy)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 想請問大神，小弟剛接觸Ｒ語言的深度學習: 按照網路上提供的iris 的範例示範: 但如果用自己創造的data 就一直出現下圖編譯錯誤: 想請問一下是我哪裡出問題呢？: 還是我資料有什麼問題ＱＱ: 感謝感謝: 程式碼與編譯錯誤如圖：: http://imgur.com/a/2NuPQ: 感謝各位大神的幫忙ＱＱ--","R_Language"
"698","M.1500055039.A.9D7","momo123163","問題","請教各位大神，H2O的使用問題",2017-07-15 01:57:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
想請問大神，小弟剛接觸Ｒ語言的深度學習
按照網路上提供的iris 的範例示範
但如果用自己創造的data 就一直出現下圖編譯錯誤
想請問一下是我哪裡出問題呢？
還是我資料有什麼問題ＱＱ
感謝感謝


程式碼與編譯錯誤如圖：http://imgur.com/a/2NuPQ感謝各位大神的幫忙ＱＱ

--","R_Language"
"699","M.1500024757.A.A8F","power80203","問題","在plot room 顯示 R summary 結果",2017-07-14 17:32:34,NA,NA,"[問題類型]:


程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門

[問題敘述]:

目前就我認識的R程式套件中，僅有gplots中的textplot 可以打印出文字資訊在輸出圖表
中，

但是偶而會遇到輸出資訊非常多，導致整個圖表的文字變得很小，會變成如下:

圖片網址:http://imgur.com/msgpWM0但是如果我加上textplot的參數(cex=2)文字會超出範圍，則會變成如下:

圖片網址:http://imgur.com/a/E9kDX想請問各位大大是否有相關的textplot的參數或是R系統參數可以調整，
方能使輸出圖表的字體可以保持正常的大小例如說:跑出捲軸可以拉之類的? 謝謝各位


[程式範例]:

# load the lavaan package (only needed once per session)
library(lavaan)
# specify the model
HS.model <- ' visual =~ x1 + x2 + x3
textual =~ x4 + x5 + x6
speed =~ x7 + x8 + x9 '

# fit the model
fit <- cfa(HS.model, data=HolzingerSwineford1939)
# display summary output
textplot(capture.output(summary(fit, fit.measures=TRUE)))


[環境敘述]:

R-Studoio

R 3.2.5

Windows 7

[關鍵字]:

textplot, R environment parameter



--","R_Language"
"700","M.1499953018.A.279","celestialgod","問題","Re: 兩個矩陣同時操作",2017-07-13 21:36:54,NA,NA,"這種事情殺雞焉用牛刀，用迴圈最快也最簡單

A <- matrix(c(1:48),ncol = 16L)
B <- matrix(c(1:80),ncol = 16L)

mutual <- function(delta, a, FUN = ""*""){
  delta  <- as.matrix(delta)
  a      <- as.matrix(a)
  result <- matrix(outer(delta, a, FUN), nrow = nrow(delta))
  return(result)
}

f <- function(a,b){
  return(as.matrix(a) %*% t(b))
}

g <- function(A, B){
  out <- array(dim = c(nrow(A), nrow(B), ncol(A)))
  for (i in 1L:ncol(A)) out[ , , i] <- A[ , i] %o% B[ , i]
  return(out)
}

library(microbenchmark)
microbenchmark(
  original = lapply(1L:ncol(A) , function(x) mutual(A[,x], B[,x])),
  simplify2array = simplify2array(lapply(1:ncol(A) , function(x) f(A[,x],
B[,x]))),
  forLoop = g(A, B), times = 20L
)
# Unit: microseconds
#            expr     min       lq     mean   median       uq      max neval
#        original 419.838 423.6410 702.6495 426.2735 431.6865 5669.115    20
#  simplify2array 222.938 224.8400 389.2933 229.0820 236.2500 3406.385    20
#         forLoop 183.734 187.5375 486.0899 190.7555 195.4375 5987.723    20

不過我的R是3.4.0，所以JIT加持快很多，不確定其他版本是不是一樣水準


A <- matrix(c(1:48000), ncol = 1600L)
B <- matrix(c(1:8000), ncol = 1600L)
microbenchmark(
  original = lapply(1L:ncol(A) , function(x) mutual(A[,x], B[,x])),
  simplify2array = simplify2array(lapply(1:ncol(A) , function(x) f(A[,x],
B[,x]))),
  forLoop = g(A, B), times = 20L
)

# Unit: milliseconds
#            expr      min       lq     mean   median       uq      max neval
#        original 44.37369 46.77744 48.24738 47.98765 49.32776 53.08230    20
#  simplify2array 21.89062 23.83928 28.64161 25.65306 26.21406 94.59203    20
#         forLoop 21.23322 22.69387 24.72092 24.64764 25.65935 31.67589    20※ 引述《wheado (principal component QQ)》之銘言：: [問題類型]:: 兩個滿大的矩陣同時透過row來進行操作: 用一個例子來說明我的問題: [軟體熟悉度]:: 新手: [問題敘述]:: A=[  1  2  3  4 ]   B=[  1  2  3  4 ]  A與B的column相同:   [  5  6  7  8 ]     [  5  6  7  8 ]:   [  9 10 11 12 ]     [  9 10 11 12 ]:   [ 13 14 15 16 ]     [ 13 14 15 16 ]:   [ 17 18 19 20 ]     [ 17 18 19 20 ]:                       [ 21 22 23 24 ]:                       [ 25 26 27 28 ]:                       [ 29 30 31 32 ]: 我想透過類似apply的運算，將A與B兩個矩陣的Column分別提出來運算，: 運算內容是有點複雜，用上述例子來說明。:                                      A*     B*: 以第一個column來說，提出來的分別是 [  1 ] [  1 ]:                                    [  5 ] [  5 ]:                                    [  9 ] [  9 ]:                                    [ 13 ] [ 13 ]:                                    [ 17 ] [ 17 ]:                                           [ 21 ]:                                           [ 25 ]:                                           [ 29 ]: 接著將A*每個元素與B*每個元素""乘積""，也就是產生一個矩陣(向量也可以)如下: [  1*1  1*5  1*9  1*13  1*17  1*21  1*25  1*29 ]: [  5*1  5*5  5*9  5*13  5*17  5*21  5*25  5*29 ]: [  9*1  9*5  9*9  9*13  9*17  9*21  9*25  9*29 ]: [ 13*1 13*5 13*9 13*13 13*17 13*21 13*25 13*29 ]: [ 17*1 17*5 17*9 17*13 17*17 17*21 17*25 17*29 ]: 以此類推會產生 4 個矩陣(或向量)，輸出方式目前想到只有 list 比較方便。: 由於我們兩個矩陣A與B可能會有點大，因此希望可以稍微快一些的計算方法，: 又希望程式碼可讀性可以高一點，讓自己以後比較容易看懂(修改)。: ~~~謝謝各位神人閱讀~~~: [程式範例]:: 我有嘗試了一個方式，但我覺得可讀性很低，: 希望可以改的更簡單易懂，速度更快一些。: 我是用 指令outer 來做，以下程式碼，矩陣大一點就要等一些時間了QQ: 程式碼貼於以下網址：: http://ideone.com/NmFGVT: [環境敘述]:: win10 + R_64: [關鍵字]:: outer apply mapply lapply--","R_Language"
"701","M.1499941278.A.A8B","wheado","問題","兩個矩陣同時操作",2017-07-13 18:21:14,NA,NA,"[問題類型]:

兩個滿大的矩陣同時透過row來進行操作

用一個例子來說明我的問題

[軟體熟悉度]:

新手

[問題敘述]:

A=[  1  2  3  4 ]   B=[  1  2  3  4 ]  A與B的column相同
  [  5  6  7  8 ]     [  5  6  7  8 ]
  [  9 10 11 12 ]     [  9 10 11 12 ]
  [ 13 14 15 16 ]     [ 13 14 15 16 ]
  [ 17 18 19 20 ]     [ 17 18 19 20 ]
                      [ 21 22 23 24 ]
                      [ 25 26 27 28 ]
                      [ 29 30 31 32 ]

我想透過類似apply的運算，將A與B兩個矩陣的Column分別提出來運算，

運算內容是有點複雜，用上述例子來說明。

                                     A*     B*
以第一個column來說，提出來的分別是 [  1 ] [  1 ]
                                   [  5 ] [  5 ]
                                   [  9 ] [  9 ]
                                   [ 13 ] [ 13 ]
                                   [ 17 ] [ 17 ]
                                          [ 21 ]
                                          [ 25 ]
                                          [ 29 ]


接著將A*每個元素與B*每個元素""乘積""，也就是產生一個矩陣(向量也可以)如下

[  1*1  1*5  1*9  1*13  1*17  1*21  1*25  1*29 ]
[  5*1  5*5  5*9  5*13  5*17  5*21  5*25  5*29 ]
[  9*1  9*5  9*9  9*13  9*17  9*21  9*25  9*29 ]
[ 13*1 13*5 13*9 13*13 13*17 13*21 13*25 13*29 ]
[ 17*1 17*5 17*9 17*13 17*17 17*21 17*25 17*29 ]

以此類推會產生 4 個矩陣(或向量)，輸出方式目前想到只有 list 比較方便。

由於我們兩個矩陣A與B可能會有點大，因此希望可以稍微快一些的計算方法，

又希望程式碼可讀性可以高一點，讓自己以後比較容易看懂(修改)。

~~~謝謝各位神人閱讀~~~

[程式範例]:

我有嘗試了一個方式，但我覺得可讀性很低，

希望可以改的更簡單易懂，速度更快一些。

我是用 指令outer 來做，以下程式碼，矩陣大一點就要等一些時間了QQ

程式碼貼於以下網址：http://ideone.com/NmFGVT[環境敘述]:

win10 + R_64

[關鍵字]:

outer apply mapply lapply

--","R_Language"
"702","M.1499910578.A.CD3","andrew43","問題","Re: list賦值 & matrix資料選擇",2017-07-13 09:49:35,NA,NA,"試試這個
沒有什麼高深的部份，就是三個向量逐列塞入 matrix，再逐欄變成 list，
最後就會是一整個 list 了。


# 建假資料
seqno <- c(1, 2)
name <- c(""aa"", ""bb"")
type <- list(c(""A1"", ""A2""), c(""B1"", ""B2""))

# x 為所求
x <- apply(rbind(seqno, name, type), 2, as.list)
x
x[[1]]
x[[1]]$seqno # 同 x[[1]][[1]]
x[[1]]$name  # 同 x[[1]][[2]]
x[[1]]$type  # 同 x[[1]][[3]]※ 引述《samex4x4 (Same)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 十分基礎的幾個問題...Orz: 1.: 我想要創建list的型態長這樣: list[[1]]: $seq_no: [1] '0001': $name: [1] '水果': $type: [1] 'A' 'B' 'C': list[[2]]: $seq_no: [1] '0002': $name: [1] '肉類': $type: [1] 'B','C': ....: 現在我手邊有seq_no,name,type 的vector: (07/13更新：type會是一個長度和seq_no，name相同的list，裡面包不同長度的vector: 我的問題是 我要怎麼給list按照如上的順序寫入資料?: 我可以這樣寫接forloop去做↓↓: list[[1]]$seq_no <- seqno[1]: list[[1]]$name <- name[1]: list[[1]]$type <- type[[1]]: list[[2]]$seq_no <- seqno[2]: list[[2]]$name <- name[2]: list[[2]]$type <- type[[2]]: 但是我有沒有辦法一次性的叫出list[[1]]['seq_no'] list[[2]]['seq_no']....: 以前用lapply(list, '[[', 1) 可以看到這個值 但要怎麼寫進去沒有頭緒Orz: 謝謝大家): 想要每個寫入給list[[1]] list[[2]]......: 目前寫到這邊就不太確定要怎麼把內部資料寫進去了: test <- vector(mode = 'list', length = length(seq_no)): 要怎麼給每個list[[i]] 寫入資料?: 我知道用forloop可以寫進去 但感覺蠢翻了...: 2.: 我的資料長這樣: c('A','B','C'): 另外有一筆選擇資料的matrix: [1,] T,F,F: [2,] F,F,T: [3,] F,T,T: [4,] F,F,F: [5,] T,T,T: 想要輸出另一個matrix為: [1,] A,NA,NA: [2,] NA,NA,C: [3,] NA,B,C: [4,] NA,NA,NA: [5,] A,B,C: 不知道要怎麼寫出來?: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]:: list, matrix--","R_Language"
"703","M.1499848279.A.2A6","ciaozikom","問題","擷取某一列中的數字",2017-07-12 16:31:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有一個矩陣中的某一列如下，想擷取出後面的ID，
我用str_extract只能擷取出前面的電話號碼
  ID
1 XXX / 09xxxxxxxx (16543)
2 XXX / 09xxxxxxxx (11049)
3 XXX / 09xxxxxxxx (3058)

希望的Output如下
  ID
1 16543
2 11049
3 3058

請問有什麼好的作法呢？

--","R_Language"
"704","M.1499845094.A.B34","samex4x4","問題","list賦值",2017-07-12 15:38:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

十分基礎的幾個問題...Orz

1.
我想要創建list的型態長這樣
list[[1]]

$seq_no
[1] '0001'
$name
[1] '水果'
$type
[1] 'A' 'B' 'C'

list[[2]]
$seq_no
[1] '0002'
$name
[1] '肉類'
$type
[1] 'B','C'
....

現在我手邊有seq_no,name,type 的vector
(07/13更新：type會是一個長度和seq_no，name相同的list，裡面包不同長度的vector
我的問題是 我要怎麼給list按照如上的順序寫入資料?
我可以這樣寫接forloop去做↓↓
list[[1]]$seq_no <- seqno[1]
list[[1]]$name <- name[1]
list[[1]]$type <- type[[1]]

list[[2]]$seq_no <- seqno[2]
list[[2]]$name <- name[2]
list[[2]]$type <- type[[2]]
但是我有沒有辦法一次性的叫出list[[1]]['seq_no'] list[[2]]['seq_no']....
以前用lapply(list, '[[', 1) 可以看到這個值 但要怎麼寫進去沒有頭緒Orz

謝謝大家)

想要每個寫入給list[[1]] list[[2]]......

目前寫到這邊就不太確定要怎麼把內部資料寫進去了
test <- vector(mode = 'list', length = length(seq_no))
要怎麼給每個list[[i]] 寫入資料?
我知道用forloop可以寫進去 但感覺蠢翻了...


2.

我的資料長這樣
c('A','B','C')

另外有一筆選擇資料的matrix

[1,] T,F,F
[2,] F,F,T
[3,] F,T,T
[4,] F,F,F
[5,] T,T,T

想要輸出另一個matrix為
[1,] A,NA,NA
[2,] NA,NA,C
[3,] NA,B,C
[4,] NA,NA,NA
[5,] A,B,C

不知道要怎麼寫出來?

[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:
list, matrix

--","R_Language"
"705","M.1499791856.A.0E4","f496328mm","分享","KAGGLE 購物籃分析  NO. 92 / 1306",2017-07-12 00:50:52,NA,NA,"給對資料分析有興趣的朋友，一個參考的方向，

我目前還在學習中，所以分享一些過程，有錯也請多多指教

----------------------------------------------------------

先來張圖http://imgur.com/61QDYQ5終於在正式比賽中    打到 TOP 10%,

實際上 92/1036 大約是 7%

問題是關於購物籃分析   這類問題應該蠻常見的https://www.kaggle.com/c/instacart-market-basket-analysis不過比賽還沒結束    應該會被打下來XD

等到比賽結束後

會寫一篇文章介紹，並公開 code 在 github 上

就像這篇https://github.com/f496328mm/kaggle_Production_Line分享給各位，比賽還有一個月　

就等我的好消息吧QQ   希望能打入前10

有問題也歡迎私訊



PS : 我一樣用 R 去做，也蠻多人用 PYTHON 的


--","R_Language"
"706","M.1499754775.A.D03","peterwu76","問題","time loop",2017-07-11 14:32:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

讓R每5分鐘執行一次資料下載

[程式範例]:

library(jsonlite)
library(RCurl)
library(httr)

while (TRUE) {
  if (format(Sys.time(), ""%S"") == ""01"") return(""Downloading"") else
Sys.sleep(300)

Dataurl<-url(""https://airbox.edimaxcloud.com/devices?token=EA81A1FA-8EDB-4CA0-B07B-A881C74B0401"")
  DATA<-fromJSON(Dataurl)
  Table<-data.frame(DATA)

  date <- sprintf(""%s_minutes.csv"", format(Sys.time(),""%Y%m%d%H%M%S""))
  outfile = paste(""D:\\"", date, sep = """")
  write.csv(Table, file = outfile)
}

# 以上code已可成功執行並output，只是 return(""Downloading"") 沒什麼供用
#http://i.imgur.com/mdIdBY1.jpg結果如連結圖片[環境敘述]:R-Studio[關鍵字]:選擇性，也許未來有用Sys.time sys.sleep time loop

--","R_Language"
"707","M.1499700160.A.9EF","mickey1231","問題","function欄位處理疑問",2017-07-10 23:22:37,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
我的資料有20個欄位，a1~a20
想挑出特定的欄位做相同的運算跟補值
用了lapply、跟function()兩種寫法都有錯誤
lapply會把原本欄位所有的值都變成Missing
function error 顯示Error in `$<-.data.frame`(`*tmp*`, ""x"", value = character(0)) :
請問我該怎麼修改比較好？
感謝∼


[程式範例]:
1.lapply
try=c('a1','a2','a5','a6','a13','a19')
data[try]=lapply(data[try],
                 function(x) x[which(is.na(x)>0)]=""Missing"")

2.function()
missing=function(x)
{
 data$x[which(is.na(data$x)>0)]=""Missing""
}
missing(a1)


[環境敘述]:
R 3.4

[關鍵字]:


--","R_Language"
"708","M.1499603159.A.7EE","lin15","問題","rmarkdown包含shiny要如何發布?",2017-07-09 20:25:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的現在已經有rstudio server
想要用rmarkdown 配合shiny來使用
想要請問要如何發布?
在rstudio中能上傳到shiny io
也確實可以使用，但是要錢

如果是單純的shiny則可以用shiny server來執行
不知道用rmarkdown
要如何在自己的伺服器上執行?
謝謝!

[程式範例]:無[環境敘述]:[關鍵字]:
Rmarkdown Shiny--","R_Language"
"709","M.1499501265.A.2AE","k5171","問題","quantmod 無法抓股價資料",2017-07-08 16:07:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]
:
之前曾經用 quantmod package 抓過台灣個股的資料開發 shiny，
但在近期發現套件沒辦法到 Yahoo Finance 抓台灣個股資料了，
有上網查過問題，問題似乎來自 Yahoo Finance API 的網址有更動，
但網路好像沒有解決方法（如下文），
但若直接到 Yahoo Finance 的 Historical Data 區似乎還是可以下載 csv 檔，
不確定是否可以 debug，或有其他方法可以用 R 抓個股股價資料？
感激不盡（已跪）

根據此文：https://github.com/joshuaulrich/quantmod/issues/149[程式範例]:> library(quantmod)> getSymbols('2330.TW')Error in download.file(paste(yahoo.URL, ""s="", Symbols.name, ""&a="", from.m,  :
  無法開啟 URL 'https://ichart.finance.yahoo.com/table.csv?s=2330.TW&a=0&b=01&c=2007&d=6&e=08&f=2017&g=d&q=q&y=0&z=2330.TW&x=.csv'
此外: Warning message:
In download.file(paste(yahoo.URL, ""s="", Symbols.name, ""&a="", from.m,  :
URL 'https://ichart.finance.yahoo.com/table.csv?s=2330.TW&a=0&b=01&c=2007&d=6&e=08&f=2017&g=d&q=q&y=0&z=2330.TW&x=.csv':
status was 'Couldn't resolve host name'

[環境敘述]:> sessionInfo()R version 3.4.0 (2017-04-21)
Platform: x86_64-apple-darwin15.6.0 (64-bit)
Running under: OS X El Capitan 10.11.6

Matrix products: default
BLAS: /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
LAPACK: /Library/Frameworks/R.framework/Versions/3.4/Resources/lib/libRlapack.dylib

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils
[5] datasets  methods   base

other attached packages:
[1] gridExtra_2.2.1 urca_1.3-0
[3] quantmod_0.4-10 TTR_0.23-1
[5] xts_0.9-7       zoo_1.8-0
[7] plotly_4.7.0    ggplot2_2.2.1
[9] shiny_1.0.3

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.11      magrittr_1.5
 [3] munsell_0.4.3     lattice_0.20-35
 [5] viridisLite_0.2.0 colorspace_1.3-2
 [7] xtable_1.8-2      R6_2.2.2
 [9] httr_1.2.1        plyr_1.8.4
[11] dplyr_0.7.1       tools_3.4.0
[13] grid_3.4.0        nlme_3.1-131
[15] gtable_0.2.0      DBI_0.7
[17] htmltools_0.3.6   yaml_2.1.14
[19] lazyeval_0.2.0    digest_0.6.12
[21] assertthat_0.2.0  tibble_1.3.3
[23] tidyr_0.6.3       purrr_0.2.2.2
[25] htmlwidgets_0.8   mime_0.5
[27] compiler_3.4.0    scales_0.4.1
[29] jsonlite_1.5      httpuv_1.3.5


[關鍵字]:
quantmod

--","R_Language"
"710","M.1499442722.A.445","tnzikom","問題","篩選組別和刪除文字",2017-07-07 23:51:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
1.想針對矩陣中前兩個column來分組
2.想刪除某一個column中的文字只留下數字

[程式範例]:

1.
有個矩陣類似這樣
   group class  tall
1   one     a    186
2   two     a    178
3   one     b    168
我想要篩選group=one且class=a的話應該要怎麼做呢？
output:
   group class tall
1   one    a    186


2.
另外則是在某一列中，column中有如下的文字，
那要怎麼只把294、39、462的數字部分留下來呢
    amount
1   $294(294dollars)
2   $39(39dollars)
3   $462(462dollars)
output:
    amount
1    294
2    39
3    462


謝謝！

--","R_Language"
"711","M.1499425168.A.24A","peterwu76","問題","針對時間重複進行篩選",2017-07-07 18:59:24,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:


我有個Excel檔，匯入後會變成

ID  PM DateTime
S1  12 2017/07/07 15:20
S2  19 2017/07/07 15:22
S1  12 2017/07/07 15:20
S2  19 2017/07/07 15:35
S1  10 2017/07/07 15:27

請問該用何種code或package將相同ID的重複時間的row刪除

只留下
ID  PM DateTime
S1  12 2017/07/07 15:20
S2  19 2017/07/07 15:22
S2  19 2017/07/07 15:35
S1  10 2017/07/07 15:27


看了https://www.ptt.cc/bbs/R_Language/M.1458237598.A.088.html感覺不是很懂，狀況也不太一樣?

[程式範例]:library(""readxl"")x <- read_excel(""E://Airbox//0626AirAll.xlsx"" ,col_names = FALSE)就卡住了.........[環境敘述]:R-Studoio[關鍵字]:重複,repeat,時間,time--","R_Language"
"712","M.1499313273.A.AF9","eco100","問題","list算variance?",2017-07-06 11:54:30,NA,NA,"假設我有一個長度是10的list好了

list的每個元素 都是20*20的矩陣

我想要針對list的""每個元素""的""相同位置""算變異數

有沒有什麼函數可以快速做這件事呢

意思就是 我希望得到一個20*20的變異數矩陣

本來以為Reduce可以，但查了一下Ruduce的運作 是不行的

很常覺得 數字都看到了 卻想不出什麼辦法可以快速得到想要的結果

謝謝

--","R_Language"
"713","M.1499140328.A.4FE","peipeifish","問題","如何判斷繪出最佳圖形",2017-07-04 11:52:06,NA,NA,"我已經把繪圖的程式寫好了
只是是手動的 丟csv檔 然後選擇圖形種類
然後繪出

現在要丟入csv 讓他自動選擇一個最佳化的圖形顯示
這個部分研究很久還是沒辦法解決

本來是用矩陣的方式判斷可是每筆資料的行列都不同，很難做

不知道是不是我邏輯有問題
跪求大大幫幫我QQ
謝謝

--","R_Language"
"714","M.1499108443.A.29E","weian530323",NA,"merge合併後編號問題",2017-07-04 03:00:41,NA,NA,"[問題類型]:

合併兩個data.frame後希望可以按照第二個編號排序


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

wugo1.tthttp://i.imgur.com/g3u0VR8.jpgwugo1.stdhttp://i.imgur.com/dehMoZn.jpgwugo1.tt有22個樣本，wugo1.std則有35個樣本，我想把這兩個data.frame合併，並且編號依照wugo1.std的編號下去做排列
我的code:

wugo1.final <- merge(wugo1.tt,wugo1.std,by=""station"",all.x=FALSE,all.y = TRUE)
wugo1.last <- wugo1.final %>% arrange(time,station,wugo1.diff) %>% select(station,wugo1.diff)
plot(wugo1.last)

用merge合併後，編排方式都以wugo1.tt為默認，有嘗試用dplyr的arrange做重新排列，雖然排列有依照wugo1.std的順序，不過之後要plot時卻還是以wugo1.tt的順序下去畫圖，想請教各位前輩要怎麼讓兩個data frame合併後可以自由選擇排序的data frame？























-----
Sent from JPTT on my iPhone

--","R_Language"
"715","M.1498816022.A.CAB","dppman","問題","CIFAR-10, ImageNet dataset 格式",2017-06-30 17:46:58,NA,NA,"[問題類型]:經驗諮詢 : CIFAR-10 / ImageNet dataset File format[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
最近用RSstudio的keras package在研究image classification
有兩個dataset : CIFAR-10 / ImageNet
下載data的網址:https://www.cs.toronto.edu/~kriz/cifar-10-python.tar.gzhttp://download.tensorflow.org/models/image/imagenet/inception-2015-12-05.tgz想請教如果是要用自己的IMAGE(jpeg/PNG/DICOM/..)該怎麼塞入這兩個data set?
或者是說, 我該怎麼產生一樣格式的data set呢?也許未來有用--","R_Language"
"716","M.1498815221.A.ABD","ppp1987","問題","ggplot畫圖問題",2017-06-30 17:33:38,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

大大們好

我想用ggplot畫圖

類似像這個https://goo.gl/B4Gujy不過我畫出來顏色深淺沒有出來 只有某個點有顏色 其他都灰色 圖在下方https://goo.gl/rq2s2q想請問高手們問題出在哪 謝謝

[程式範例]:

Data:https://goo.gl/w5RE2Ma<-read.csv(""DT_6.csv"")

a$finish_hms <- as.POSIXlt(a$finish_hms)
ggplot(a, aes(x=as.factor(finish_date), y=finish_hms, fill = timediff )) +
    geom_dotplot(binaxis = ""y"",stackdir = ""center"", binwidth = 600 ) +
    xlab(""Date"") + ylab(""time"") + ggtitle( paste(""NO.8 Before"")) +
    scale_fill_gradient(low = 'blue', high = 'red')


[環境敘述]:
macbook pro 2015

[關鍵字]:
ggplot

--","R_Language"
"717","M.1498793728.A.858","chuubbyy","情報","R初學者line群組",2017-06-30 11:35:24,NA,NA,"因人數過多，先暫停收新成員！
因人數過多，先暫停收新成員！
因人數過多，先暫停收新成員！

如果有人還有興趣可以寄信說明想加入群組的目的並附上lineID喔！
（現在只收可參加讀書會的人）


大家好！
我是某研究所課程的課助，這學期的期末作業就是要大家學會R，完成R語言翻轉教室的部
分內容，想說藉這個機會成立一個line群""R Beginners""，大家可以不怕發問初學者的問
題，並且在78月期間每週三晚上聚會一次，教材就是R語言翻轉教室（http://datascienceandr.org/）、DataCamp（http://www.datacamp.com/）以及其他在
網路上的學習教材（歡迎推薦）。

這個群組很適合研究生、研究助理、大學生加入，並歡迎各位帶自己論文、計畫或是其他
手邊的資料來討論。

每次聚會前會先訂定當天的學習目標，然後大家聚在一起學習，有問題就可以直接討論。
若是手邊的資料能夠應用當天學習的內容，歡迎示範給大家看，或是提供給大家當作練習
。

DataCamp裡面的課程有些是需要付費才能使用，我們預計會購買一個共用的付費帳戶，經
費就來自使用者的Donate，只要累積超過 $29 US 就可以續定下個月。（是否要購買可以
討論）



-----
Sent from JPTT on my iPhone

--","R_Language"
"718","M.1498793582.A.06C","dppman","問題","RStudio 怪問題 :~",2017-06-30 11:32:59,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:在RStudio內已經安裝好不少需要的package,但是用RStudio New一個新Project時,之前安裝過的package都不見了,需要重新安裝請問是不是有甚麼地方設定有問題?[環境敘述]:RStudio 1.0.143 64bit under Windows 10 Enterprise 64bit[關鍵字]:RStudio--","R_Language"
"719","M.1498743600.A.191","likuyun","問題","R segment fault on linux Centos7",2017-06-29 21:39:58,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:我在linux Centos7.3的環境下使用linux本機端的R-3.4.0,結果出現segment fault(core dump)但使用同一台linux的RStudio server IDE執行相同code,可正常執行.確認linux本機端開啟的R與RStudio server開啟的都是/srv/lib64/R/bin/R <---都是它因為需要使用到linux排程執行R code,所以如果linux本機端的R無法正常運作,排程執行就會有問題[程式範例]:我主要目的在使用JDBC連結資料庫MSSQL,同樣指令使用RStudio server IDE是可以運行且正常抓SQL資料做後續運算,但使用本機端R-3.4.0卻不行library(RJDBC)drv <- JDBC(""com.microsoft.sqlserver.jdbc.SQLServerDriver"",""/etc/jdbc/sqljdbc4.jar"",identifier.quote=""`"")執行此行會直接跳出segment fault(core dump)後強制離開R,回到linux命令提示字元[環境敘述]:明天進公司待補...[關鍵字]:segment fault(core dump)--","R_Language"
"720","M.1498715097.A.3B3","swedrf0112","問題","Re: 有點小複雜的字串計數",2017-06-29 13:44:54,NA,NA,"拋磚引玉一下

主要就是 3 個步驟
1. 把每個字母的位置 dataframe 作出來
2. 計算在該字母在不同字串長度下的次數
3. left join 1,2，之後再修改成想要的格式

要注意的地方是一開始 sapply 結束存完的東西，
看起來像是矩陣，實際上 element 都是 list，這邊比較難理解

tidyr::spread 主要用來從 long 格式轉 wide 格式，看個人習慣，我比較
習慣用 tidyr XDhttps://pastebin.com/5Y5rbTTg--","R_Language"
"721","M.1498672863.A.2FE","x9060000456","問題","爬蟲問題",2017-06-29 02:01:00,NA,NA,"- 問題: 新手想詢問crawler基本問題。

[軟體熟悉度]:
對於R crawler接觸甚短, 並不扎實, 基本上都是依照版上的例子依樣畫葫蘆,
但如果抓取網頁不同時, 立即碰壁.

[問題敘述]:
目前想抓取的資料為巴哈姆特文章做練習, 但因為html不太熟, 因而請教
版上各位大神.

[程式範例]:
## 目標是想抓某手機遊戲巴哈哈拉區的20個頁面中每個標題內的文章內容,
## 目前先只以第一個頁面進行練習, 以下是我寫的極短code,

require(xml2)
library(XML)
library(httr)
result.urls <- 'https://forum.gamer.com.tw/B.php?page=1&bsn=26742'html.page = read_html(url(result.urls[1]))
xpath = ""//*[@class='FM-blist3']/a""
target = xml_find_all(html.page, xpath)
title = xml_text(target)
download.url = unlist(xml_attr(target, ""href""))
page.info = data.frame(title=title, url=download.url, stringsAsFactors = F)

## 這邊成功抓取該頁面的每個標題與url, 但接下來就不會直接使用page.info的
## 第二個column(url)抓取內文, 比如page.info[1, 2], 因而又按F12重新搜尋url

url1 <- '/C.php?bsn=26742&amp;snA=32159""'
html <- htmlParse(GET('https://forum.gamer.com.tw',path = url1),
encoding = 'UTF-8')
doc <- xpathSApply(html, ""//*[@id='BH-master']/div[4]"", xmlValue)

## 以上code執行也沒有出現error,
## 並且GET('https://forum.gamer.com.tw',path = url1)執行結果看起來也正常
## 但是doc <- xpathSApply(html, ""//*[@id='BH-master']/div[4]"", xmlValue)
## 的結果卻是NULL.


因此主要想請問各位大大兩個問題,
第一, 如何直接使用抓到的url放進到htmlParse,
第二, 請問doc <- xpathSApply(html, ""//*[@id='BH-master']/div[4]"", xmlValue)
      這個步驟該如改進, 進而得到內文呢? 而不是空值.

謝謝各位大大耐心地看完!
這個function

--","R_Language"
"722","M.1498665340.A.4BC","eco100","問題","有點小複雜的字串計數",2017-06-28 23:55:37,NA,NA,"我問題是這樣的
我有如下的字串 基本上是 A B C D E F G 這七個字母的組合
白色的字體不是我想要計數的範圍 所以不管是x或這七個字母 都不重要
黃色字體 才是我想要計數的長度 也就是每組字串的後面七個
位置是指字串的位置   原諒我10後面數字會黏一塊 我就不打了
長度指的就是字串的長度

      位置
長度  1 2 3 4 5 6 7 8 9 .......                              29

9     B AG F F A B F C9     B AG F F A B F C13    x x x F A AB C C G B B F13    x x x F A AB F C G F B F15    x x x x G B B FC G F E E B A15    x x x x G B B FG G F E E B A25    x x x x x x x x x x x x E E B A C AE E G F G A A29    x x x x x x x x x x x x x x x x x x G F G FA A C D A B G29    x x x x x x x x x x x x x x x x x x G F G FA C C D A B G相同的長度為一組字串 我想要計算同一組的計數
例如長度9的  我想要得到如下的結果：
-1 ~ -7 表示從後面倒數過來的位置

   -7 -6 -5 -4 -3 -2 -1
 A           1
 B             1/2
 C                    1/3
 D
 E
 F    1  1         1
 G 1

原則就是同一組長度 重覆出現的字母 算一次就好
所以長度9雖然有兩條字串 在-7這位置都是G 但是G只要算一次
另一個重點就是那個1/2的算法，
因為B這個字母除了是長度9的-3這位置外
同時也是長度13這組 -7 的位置
所以B的次算 要分給兩組 各為0.5次  其他沒出現的就為0

以此類推 我再列一下長度15會有的結果：

  -7  -6  -5  -4  -3  -2  -1
A                          1
B                      1
C 1/3
D
E              1   1
F          1
G  1  1/2

C這個字母同時出現在長度9、長度13、長度15 所以次數是1/3
分別是長度9的-1  長度13的-5  長度15的-7

所以我其實就是想要每一組長度字串的這個計數結果
這樣舉例不知是否清楚 @@

我想了一天 還是不知道有什麼具體的寫法
謝謝各位指教

--","R_Language"
"723","M.1498648257.A.E43","celestialgod","問題","Re: 進行特定欄位加總",2017-06-28 19:10:54,NA,NA,"※ 引述《directly (天使的圓舞曲)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想要進行特定欄位(特定變數)的加總，但不知道怎麼處理: [程式範例]:: 資料:: id  A1  B1  B2  A2  C1  C2  C3: 1   1    2   0   4   5   6   7: 2   5    6   8   8   1   3   2: 請問如果我希望: A1+A2形成一個新的變數，變成新的一欄叫作A，: B1+B2形成一個新的變數，變成新的一欄叫作B，: C1+C2+C3形成一個新的變數，變成新的一欄叫作C，: 想要得到:: id   A  B  C: 1   5   2  18: 2   13  14  6: 我試著用aggregate、colSums去做但沒有成功，: 請問用有人可以出手指導嗎?: 謝謝!以下共七種方法，自行選擇適用的XD

rlang + dplyr我還沒試出來Orz，這新東西真的搞不太懂


library(data.table)

DT <- fread(""id  A1  B1  B2  A2  C1  C2  C3
1   1    2   0   4   5   6   7
2   5    6   8   8   1   3   2"")
DF <- copy(DT)
setDF(DF)

# base, transform + subset
subset(transform(DF, A = A1 + A2, B = B1 + B2, C = C1 + C2 + C3),
       select = c(id, A, B, C))
#   id  A  B  C
# 1  1  5  2 18
# 2  2 13 14  6

# base, eval
res <- sapply(c(""A"", ""B"", ""C""), function(ch){
  expr <- paste0(names(DT)[grepl(paste0(""^"", ch), names(DT))], collapse = ""+"")
  eval(parse(text = expr), DF, parent.frame())
})
cbind(id = DF$id, as.data.frame(res))
#   id  A  B  C
# 1  1  5  2 18
# 2  2 13 14  6

# data.table, method 1
DT[ , .(A = A1 + A2, B = B1 + B2, C = C1 + C2 + C3) , by = .(id)]
#    id  A  B  C
# 1:  1  5  2 18
# 2:  2 13 14  6

# data.table, method 2
exprs <- lapply(c(""A"", ""B"", ""C""), function(ch){
  parse(text = paste0(names(DT)[grepl(paste0(""^"", ch), names(DT))], collapse
= ""+""))
})
names(exprs) <- c(""A"", ""B"", ""C"")
DT[ , lapply(exprs, eval, envir = DT) , by = .(id)]
#    id  A  B  C
# 1:  1  5  2 18
# 2:  2 13 14  6

# data.table, method 3
lapply(c(""A"", ""B"", ""C""), function(ch){
  nn <- names(DT)[grepl(paste0(""^"", ch), names(DT))]
  DT[ , eval(ch) := Reduce(function(x, y) x+y, .SD), .SDcols = nn]
  DT[ , eval(nn) := NULL]
  return(NULL)
})
DT
#    id  A  B  C
# 1:  1  5  2 18
# 2:  2 13 14  6

library(dplyr)
# dplyr, method 1
DF %>% group_by(id) %>%
  summarise(A = A1 + A2, B = B1 + B2, C = C1 + C2 + C3)
# # A tibble: 2 x 4
#      id     A     B     C
#   <int> <int> <int> <int>
# 1     1     5     2    18
# 2     2    13    14     6

# dplyr, method 2
exprs <- lapply(c(""A"", ""B"", ""C""), function(ch){
  paste0(names(DF)[grepl(paste0(""^"", ch), names(DF))], collapse = ""+"")
})
names(exprs) <- c(""A"", ""B"", ""C"")
DF %>% group_by(id) %>% summarise_(.dots = exprs)


--","R_Language"
"724","M.1498622259.A.BD3","directly","問題","進行特定欄位加總",2017-06-28 11:57:36,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要進行特定欄位(特定變數)的加總，但不知道怎麼處理

[程式範例]:

資料:
id  A1  B1  B2  A2  C1  C2  C3
1   1    2   0   4   5   6   7
2   5    6   8   8   1   3   2

請問如果我希望
A1+A2形成一個新的變數，變成新的一欄叫作A，
B1+B2形成一個新的變數，變成新的一欄叫作B，
C1+C2+C3形成一個新的變數，變成新的一欄叫作C，
想要得到:
id   A  B  C
1   5   2  18
2   13  14  6

我試著用aggregate、colSums去做但沒有成功，
請問用有人可以出手指導嗎?
謝謝!

--","R_Language"
"725","M.1498552262.A.0AB","qazwsx879345","問題","SHINY的按鈕位移",2017-06-27 16:30:59,NA,NA,"[問題類型]:

SHINY的BOTTON跑掉

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

各位大大好

目前有用R的SHINY寫了一些東西

可是剛寫到一半的時候

突然怪怪的

我原本都是用一個choose dir的botton去選擇我的路徑
然後按update

但新寫了一些要輸出的東西後

一直按choose dir 卻都不能選路徑

才發現要按update才能選

後來繼續增加

發現兩個都不能選了

害我現在不能debug寫得對不對QQ

我剛測試一下

我在ui.R有一個PAGE

是navbarMenu(""prediction,

是用來畫出一些圖而已

我把prediction的刪掉後  可以在update按鈕選路徑

但如果prediction留著就不能選路徑

可是我實在想不到ui.R跟選路徑有甚麼關系

在我的認知應該是在SERVER.R裡面用 input$ 去控制的才對

不知道有沒有大大能幫我解惑一下

[關鍵字]:

shiny

--","R_Language"
"726","M.1498524111.A.5F2","REIDO","問題","迴圈中回歸output的變數名稱不想用迴圈變數",2017-06-27 08:41:44,NA,NA,"[軟體熟悉度]:
請把以下不需要的部份刪除
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
for(j in c(3,15,30)){
      temp=summary(lm(d1[,31]~d1[,j]))
   print(temp)
}
執行後的結果節錄如下：

Call:
lm(formula = d1[, 31] ~ d1[, j])

Coefficients:
            Estimate Std. Error t value Pr(>|t|)
(Intercept)  11.4379     0.1714  66.716  < 2e-16 ***d1[, j]-1.5832     0.2105  -7.521 3.73e-13 ***

就是這樣，因為它顯示""j""，變成好幾筆oputput的變數都一樣。我希望至少直接顯示j代表的數字，請問要如何做？
或是更進階一點的，請問有辦法顯示成原本在names(d1)[j]裡面的名稱嗎？(d1是我的data)

--
當你選了一間新餐廳，發現沒想像中的好吃的時候，你下次願意去吃另一間食安有問題的，
                                                當作給新餐廳老闆的一點抗議嗎？
當你發現新買的飲料不好喝，你下次願意去喝化糞池的水，當作表示對飲料商的不滿嗎？
當你宿舍舍友管機歪又囉嗦，你願意搬去和強暴犯住一起，表達對原本舍友的不滿嗎？
當你發現小孩還不會講話，只會哭很煩，你會選擇把這個小孩丟到孤兒院，再生一個看會不會安靜點嗎？

--","R_Language"
"727","M.1498401225.A.6D3","REIDO","問題","output的tab一直對不齊",2017-06-25 22:33:35,NA,NA,"我要用R計算一堆mean ±SD，有用round或signif之類的把太長的小數壓縮一下，然後用tab分隔> for(j in c(3,7,8,13:15,24:29)){+   cat(""G3_3=0"",""\t"",""G3_3=1"",""\t"",""G3_3=2"",""\n"")
+   for(g in 0:2){
+     MEAN=round(mean(d1[,j][d1$G3_3==g]),2)
+     SD=round(sd(d1[,j][d1$G3_3==g]),2)
+     cat(paste0(MEAN,""±"",SD,""\t""))
+   }
+   cat(""\n"")
+ }
G3_3=0   G3_3=1          G3_3=2
17.08±1.3      17±1.42        16.54±1.19
G3_3=0   G3_3=1          G3_3=2
2.32±1.02      2.67±1.11      2.84±1.09
G3_3=0   G3_3=1          G3_3=2
2.29±1.11      2.38±1.06      2.6±1.09
G3_3=0   G3_3=1          G3_3=2
1.61±0.79      1.45±0.69      1.43±0.69
G3_3=0   G3_3=1          G3_3=2
1.97±0.91      1.93±0.74      2.08±0.86
G3_3=0   G3_3=1          G3_3=2
0.92±1.08      0.6±0.95       0.16±0.5
G3_3=0   G3_3=1          G3_3=23.84±1 3.9±0.84       3.97±0.9G3_3=0   G3_3=1          G3_3=2
3.13±0.88      3.32±0.99      3.22±1.02
G3_3=0   G3_3=1          G3_3=2
3.21±1.32      3.48±1.04      2.97±1.08
G3_3=0   G3_3=1          G3_3=21.34±0.53      1.64±1 1.45±0.89G3_3=0   G3_3=1          G3_3=2
1.92±1.17      2.52±1.36      2.26±1.27
G3_3=0   G3_3=1          G3_3=2
3.61±1.28      3.72±1.31      3.49±1.43

像紅色的部分就會對不齊，文字部分則是全部歪掉(和數字比)。
因為長度問題，不同行會對不起來，請問對於這種排版問題，有辦法對齊嗎？


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)--當你選了一間新餐廳，發現沒想像中的好吃的時候，你下次願意去吃另一間食安有問題的，當作給新餐廳老闆的一點抗議嗎？當你發現新買的飲料不好喝，你下次願意去喝化糞池的水，當作表示對飲料商的不滿嗎？當你宿舍舍友管機歪又囉嗦，你願意搬去和強暴犯住一起，表達對原本舍友的不滿嗎？當你發現小孩還不會講話，只會哭很煩，你會選擇把這個小孩丟到孤兒院，再生一個看會不會安靜點嗎？--","R_Language"
"728","M.1498261579.A.E23","alvinwu408","問題","互動式圖表的檔案格式",2017-06-24 07:46:17,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
只有用R做過一些簡單的數據分析，畫圖表等等

[問題敘述]:
最近利用R的Plot_ly畫出一些互動式圖表，雖然利用Plot_ly可以將圖放到網路
上，但是我想詢問是否有功能，可以將該圖表存成『檔案』，也就是說，當下
載到電腦後，不管未來有沒有網路都可以看，且依然保持『互動式圖表』的特性

[程式範例]:
程式碼與問題較無關連

[環境敘述]:
無

[關鍵字]:
互動式圖表、Plot_ly


初次發文，若有什麼不符合規定的地方，請盡量跟我說，感謝

--","R_Language"
"729","M.1498203276.A.257","Wush978","問題","Re: sample中一個每個都抽到",2017-06-23 15:34:34,NA,NA,"逆向思考全壘打

我把問題改一下。

如果我要從1:10中抽20個sample，並且要保證每一個資料都有抽到

我想到兩種寫法：

# 抽到符合條件為止

x <- sample(10, 20, TRUE)
while(length(unique(x)) != 10) {
  x <- sample(10, 20, TRUE)
}

# 先保證1:10, 然後再抽
x <- c(1:10, sample(10, 10, TRUE))
## 如果順序重要，則要再亂序一次
x <- sample(x, length(x), FALSE)※ 引述《jas9441314 (jet B)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): *[m: [問題敘述]::: 我想要從1:368個數字當中 根據每個數字出現的機率p=c(p1,p2,...,p368)抽取1次放回: 希望1:368每個數字都能被抽中: 然後重複抽10次這樣的動作: 但是目前抽出來有些情況只會抽出367個數字而非368個: 想請問各位大大如何解決  感謝:: [程式範例]::: replicate(10,saple(1:368,nrow(data),replace=TRUE,prob=p)):: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"730","M.1498150111.A.1FD","jas9441314","問題","sample中一個每個都抽到",2017-06-23 00:48:28,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:我想要從1:368個數字當中 根據每個數字出現的機率p=c(p1,p2,...,p368)抽取1次放回希望1:368每個數字都能被抽中然後重複抽10次這樣的動作但是目前抽出來有些情況只會抽出367個數字而非368個想請問各位大大如何解決  感謝[程式範例]:replicate(10,saple(1:368,nrow(data),replace=TRUE,prob=p))[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"731","M.1498038223.A.AC3","shirley7483","問題","平均分布分割測試與訓練資料",2017-06-21 17:43:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

透過logit model，用各個商品的屬性及是否閱讀商品評論，預測消費者會購買哪種商品

為了實作predit()要分割資料集

已知caret package的createDataPartition能將訓練與測試集的商品依比例平均分布

但資料集為long format，每四列為一個單位（一個受測者產生四列資料，為四個商品）

使用createDataPartition後，資料被打散了，不再是每四列為一單位

該如何保持資料每四列一個單位，但訓練與測試集中的商品還是可以按比例分布呢？

ps被購買的商品比例本來就不平均，但希望訓練集與測試集的比例相同，例如10:5:2:1


[程式範例]:

共有432名受測者，1728列資料，long format資料集如圖http://imgur.com/pWhvNCF各商品被購買的比例大約為
HighJ  HighU  LowJ  LowU
 272    80     60    20

library(caret)
Train <- createDataPartition(mydata$purchase, p=0.6, list=FALSE)
training <- mydata[ Train, ]
testing <- mydata[ -Train, ]

照上述程式碼跑無錯誤訊息，但是資料被打散
推測可能是用來取index的mydate$purchase有問題，不知道該怎麼改才好@@


[環境敘述]:
R version: 3.2.3 (2015-12-10)
Platform: x86_64-w64-mingw32
Running under: Windows >= 10

[關鍵字]:

--","R_Language"
"732","M.1498029317.A.50E","eco100","問題","如何把變數帶入SQL語法？",2017-06-21 15:15:15,NA,NA,"我的問題是

例如我得到一個變數 ID

這個ID裡面可能有100個

我要依序將這100個ID 用迴圈帶入SQL語法裡面

像是

select * from data_table where `ID` = 'ID'

'ID' 這邊的內容就是我要用迴圈方式帶入的

請問R裡面，這邊應該怎麼表達？謝謝！

--","R_Language"
"733","M.1497943858.A.F45","clansoda","問題","update or replace reactive",2017-06-20 15:30:55,NA,NA,"Hi，先感謝cywhale大，上次的問題已經解決了

這次的另外一個問題是我的data是來自外來的database

my_data <- reactive({
  input$data %>% return
})

理論上他只會在剛開啟這個應用的時候抓一次資料

問題來了，我設定了一個按鈕他會需要這裡面的資料來做指定的事

observeEvent(input$thebutton, {
   Tempdata <- my_data()
   newdata <- doingsomething to Tempdata
})

因為這個按鈕設計要按很多次，大家也看得出來他是根據my_data()這個reactive

的值而有所不同，所以我現在按第一次的時候會跟我要求的一樣

但是按第二次後就會出錯，因為這個my_data裡面的資料還是從資料庫來的那個

沒有更新，想請問要如何才能更新的這個reactive的值呢

我在observeEvent裡面試過

my_data <- reactive({
  return (newdata)
})

也就是想把新作出來的資料表用replace的方式替代舊的my_data

這個方面他跟R的global variables不一樣

想請問有人有解決這種問題的類似經驗嗎

我已經先搜尋過stackoverflows沒找到類似的問題

--","R_Language"
"734","M.1497511763.A.CB5","PhysicsBoy","問題","軸上數字標示問題",2017-06-15 15:29:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請教一下大大們
一般使用plot()畫圖時
座標軸預設的數字會以科學記號如1e-02表示10的負2次方
那我該如何做才能讓其直接顯示為10的負2次方呢?

煩請大大們解惑^^
感謝

--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"735","M.1497503939.A.81C","jklkj","問題","Re: 在R中有處理http query string",2017-06-15 13:18:57,NA,NA,"做完才看到這份，我寫寫我的作法好了
S1 <- regexpr(""\\?"", XXX$text)
S1[S1 < 0] = NA
End <- 1000
XXX$text <- substr(XXX$text, S1+1, End)
--上面把?後面的取出來
XXX <- na.omit(XXX)
code_1 <- strsplit(XXX$text, ""&"")
names(code_1) <- XXX$id
--為了可以識別url來自哪個id
code_2 <- do.call(rbind, lapply(code_1, data.frame, stringsAsFactors = F))
do.call(rbind, ......)跟rbind不是一樣的嗎？可是我只用rbind解不出來
S2 <- regexpr(""\\="", code_2$X..i..)
跟&的一樣                   ^^^^^^我懶得改了
code_2$Name <- substr(code_12$X..i.., 1, S2-1)
code_2$Value <- substr(code_12$X..i.., S2+1, 50)
把=前後的值設為對應的值
S3 <- regexpr(""\\."", rownames(code_2))
因為列名不能重複，所以id會出現.１、.2、.3、......我只要.之前的id
code_2$line_id <- substr(rownames(code_2), 1, S3-1)
result <- code_12[,c(""line_id"", ""Name"", ""Value"")]
rownames(result) <- NULL
這我自己龜毛，rowname看起來很阿砸
cast <- dcast(result, formula = id ~ Name, value.var = ""Value"")
這是大神的套件，我之前的動作就是為了產生這個cast
有其他更好的方法嗎？
求教了※ 引述《celestialgod (天)》之銘言：: 前面先隨便給他一個protocle跟host 加個?表示是query string: 然後用httr::parse_url就可以輕鬆處理完了: 剩下就是看你要什麼欄位mapping到table中，改個名字，然後as.data.frame即可: library(httr): x <- parse_url(paste0(""http://1?"", ""utm_source=apple&utm_campaign=PRO&"",:                       ""utm_medium=banner&text_id=12228473&date=970101&"",:                       ""loc=65173194cbfdbb89e06742a196ec150f"")): x$query: # $utm_source: # [1] ""apple"": #: # $utm_campaign: # [1] ""PRO"": #: # $utm_medium: # [1] ""banner"": #: # $text_id: # [1] ""12228473"": #: # $date: # [1] ""970101"": #: # $loc: # [1] ""65173194cbfdbb89e06742a196ec150f"": ※ 引述《jklkj (誠實可靠小郎君)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 目前我有A、B兩個table: : 我想做一件事是把兩個table先join成C，這部分沒問題我用merge: : 之後我想當item欄位是空值時把text的資料擷取出部分: : text的資料是url類似: : utm_source=apple&utm_campaign=PRO&utm_medium=banner&text_id=12228473&date=: : 970101&loc=65173194cbfdbb89e06742a196ec150f: : 我想把各別的字串丟進資料庫的欄位中: : 例如：: : apple 丟進source欄位: : PRO丟進campaign欄位: : banner丟進medium欄位: : 65173194cbfdbb89e06742a196ec150f丟進loc欄位: : 但是text_id我沒有設欄位，所以不需要解析: : [程式範例]:: : if(C$item == """") {C$apple <- C$text}: : 我本來是想說先丟進去再拆解，可是我連這個最基礎的都ERROR: : the condition has length > 1 and only the first element will be used: : 想問一下這怎麼處理: : [環境敘述]:: : R version 3.3.3 (2017-03-06): : Platform: x86_64-w64-mingw32/x64 (64-bit): : Running under: Windows 7 x64 (build 7601) Service Pack 1: : locale:: : [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950: : [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: : [5] LC_TIME=Chinese (Traditional)_Taiwan.950: : attached base packages:: : [1] stats     graphics  grDevices utils     datasets  methods   base: : other attached packages:: : [1] RPostgreSQL_0.4-1 DBI_0.6: : loaded via a namespace (and not attached):: : [1] tools_3.3.3: : [關鍵字]:: : ETL--","R_Language"
"736","M.1497473188.A.5EA","locka","問題","Re: 折線圖+長條圖呈現",2017-06-15 04:46:26,NA,NA,"原文恕刪。


這邊提供另一種解法,使用的是highcharter套件
可以做出不少漂亮的互動圖形! :)

完成圖可參考:http://i.imgur.com/7ScoSnl.jpg(這邊借用celestialgod大大的資料)

library(dplyr)
library(highcharter)

numSamples <- 200L
DF <- data.frame(V1 = sample(1L:4L, numSamples, TRUE),
                 V2 = sample(1L:2L, numSamples, TRUE))
sum0 <- DF %>% group_by(V1) %>% summarise (mean = mean(V2), n = n())



highchart() %>%
    hc_xAxis(categories=sum0[[""V1""]]) %>%
    hc_yAxis_multiples(
        list(title=list(text=""n"")),
        list(title=list(text=""mean""),opposite=T)
    ) %>%

    hc_add_series(name=""n"",type=""column"",
                  data=sum0[[""n""]],
                  dataLabels=list(enabled=T,color=""green"")) %>%

    hc_add_series(name=""mean"",type=""line"",yAxis=1,
                  data=round(sum0[[""mean""]],digits=2),
                  dataLabels=list(enabled=T)) %>%

    hc_exporting(enabled = TRUE)


指定x軸、y軸,然後添加series就搞定了。
(還可以享受滑鼠滑來滑去、點來點去有動態效果的成就感XD)

加了hc_exporting()那行,用瀏覽器開啟時就可以把圖存成靜態圖片(JPEG,PNG...)

有一些tricky的地方,個人覺得要花不少時間才能熟悉作者的邏輯
有html或javascript基礎應該可以比較快上手
(更別提highcharter套件的help文件非常貧脊...)



不過會發現當放大或縮小圖形的時候,圖形也會跟著改變!
(應該是因為highchart會自己調整圖形為最適合視窗的大小)

例如下圖就跟上圖長得不太一樣(紅圈處)http://i.imgur.com/OFlMgcz.png也就是說這種double axis的圖形
因為要把兩種「不能比較」的單位同時放在一張圖裡,
只要對應的轉換公式改變,圖形相對位置就有可能改變,造成不同的解讀。


我想這應該是Hadley大神堅持不在ggplot2中添加這功能的原因吧~
(要的話自己刻...哈哈)
""Because they are easily manipulated to mislead.""


就算是後來的ggplot2新增sec.axis參數,
初衷也只是提供像是華氏攝氏、公里英哩之類,有固定轉換公式單位的對照https://goo.gl/g3LTFw有興趣可以去找stackoverflow上那篇討論,(我推文在前面文章裡)
有滿多關於double axis plot 適用情境的討論,
(還可以看Hadley大神跟網友互嗆XD)

""I don't understand why you think I should do something that I believe is
wrong just because lots of people think it's a good idea.""



總之使用上要特別小心~~~~~


--","R_Language"
"737","M.1497459832.A.098","hatemath1991","問題","關於Logistic迴歸的問題",2017-06-15 01:03:50,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:想要訓練一個高維度資料的Logistic迴歸模型，但是在後面的特徵卻都出現NA就是summary之後對於個特徵如下面的圖，這是因為glm沒辦法處理太多特徵？https://goo.gl/aJJNca[程式範例]:train_sample<-sample(40,30)train_data<-temp[train_sample,]test_data<-temp[-train_sample,]model<-glm(type~.,family=binomial,data=train_data)[環境敘述]:R version 3.4.0 (2017-04-21)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.2 LTSMatrix products: defaultBLAS: /usr/lib/libblas/libblas.so.3.6.0LAPACK: /usr/lib/lapack/liblapack.so.3.6.0locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C               LC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C                  LC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] ROCR_1.0-7   gplots_3.0.1loaded via a namespace (and not attached):[1] compiler_3.4.0     class_7.3-14       tools_3.4.0        KernSmooth_2.23-15 gdata_2.18.0[6] caTools_1.17.1     bitops_1.0-6       gtools_3.5.0[關鍵字]:選擇性，也許未來有用--","R_Language"
"738","M.1497454783.A.636","cd12631","問題","爬蟲問題",2017-06-14 23:39:40,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

平常是很少爬蟲 之前有在爬的時候也算是順利

今天臨時把之前爬過的東西翻出來要抓資料

網頁如下:http://ntpc.youbike.com.tw/cht/f12.php?loc=taipei但之前爬得很順利的東西(兩年前)

今天突然抓不下來

爬文以及google一下 似乎是Keep-Alive Connection的問題

也許這兩年內這網站加上這東西

google了一下相關的資訊還是無法爬成功

只好上來請教各位先進

[程式範例]:
library(magrittr)
library(httr)
library(rvest)
library(stringr)


# 例如我要抓這網頁可停空位那一欄

ubikeurl <- ""http://ntpc.youbike.com.tw/cht/f12.php?loc=taipei""urlubike <- read_html(ubikeurl)

ubike <- urlubike %>%
    html_nodes(., xpath = ""//tr/td[4]"") %>%
    html_text


[環境敘述]:

R version 3.4.0 (2017-04-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)


[關鍵字]:選擇性，也許未來有用--","R_Language"
"739","M.1497441620.A.6FA","celestialgod","問題","Re: 折線圖+長條圖呈現",2017-06-14 20:00:17,NA,NA,"我Update一下ggplot2的狀態

ggplot2 2.2.0已經准許你這樣做了

成果：http://imgur.com/7YIrEB8程式好讀版：https://pastebin.com/u6fCQKuy程式碼：


library(ggplot2)
library(dplyr)

numSamples <- 200L
DF <- data.frame(V1 = sample(1L:4L, numSamples, TRUE),
                 V2 = sample(1L:2L, numSamples, TRUE))
sum0 <- DF %>% group_by(V1) %>% summarise (mean = mean(V2), n = n())

ggplotColours <- function(n = 6, h = c(0, 360) + 15){
  if ((diff(h) %% 360) < 1) h[2] <- h[2] - 360/n
  hcl(h = (seq(h[1], h[2], length = n)), c = 100, l = 65)
}

transDblAxisForBar <- function(x, y) {
  return((y - min(y)) / (max(y) - min(y)) * extendrange(x)[2])
}

cols <- ggplotColours(2)
ggplot(sum0, aes(V1, n)) +
  geom_bar(position = ""stack"", stat = ""identity"", fill = cols[1]) +
  geom_line(aes(x = V1, y = transDblAxisForBar(n, mean)),
            col = cols[2], lwd = 1.5) +
  scale_y_continuous(""n"",
    sec.axis = sec_axis(~ . / extendrange(sum0$n)[2] * diff(range(sum0$mean))+
                        min(sum0$mean), name = ""mean""))※ 引述《sacidoO (阿罵)》之銘言：: #更新 感謝版主c大各種code詳解 及G大還有Andrew大的幫忙!已經有解了: 更新方法一於置底: 借用這個標題 跟原po有一樣的問題 試了幾個幫法 但是都不成功.........: 不知道版上有沒有人能有方法解決兩種方法使其更優......感謝了!: [程式範例]: #data: 用c大分享的 code: library(dplyr): ngrp <- 2L: numSamples <- 200L: DF <- data.frame(V1 = sample(1L:3L, numSamples, TRUE), V2 = sample(1L:2L,: numSamples, TRUE),:                  V3 = rnorm(numSamples), V4 = rnorm(numSamples), V5 =: rnorm(numSamples)): #sum statistics: sum0<-DF %>% group_by(V1) %>% summarise (mean=mean(V2),n=n()): #方法一: bar chart 不在節點上,看起來怪怪的: par(mar=c(4,4.5,4,4)): barplot(sum0$n,ylim=c(0,max(sum0$n)+0.1*max(sum0$n)),: yaxt=""n"",width=0.2,space=2): axis(side=4): mtext(""Count"", side=4, line=1.8): par(new=T): plot(sum0$V1,sum0$mean, xlab=""cartegpory level"", ylim=c(0,2), ylab=""""): mtext(""Group mean"",side=2, line=1.8): lines(sum0$V1,sum0$mean, type=""o""): #方法二 使用ggpltot, 但是無法讓兩圖在同一圖上...: library(ggplot2): #frequency plot: g.botton<-ggplot()+geom_bar(data=sum0,aes(x=V1, y=n), stat=""identity"")+:   labs(y=""Counts"")+:   theme_classic(): #line plot: g.top<-ggplot()+geom_line(data=sum0, aes(x=V1, y=mean,: group=1))+geom_point(data=sum0,aes(x=V1,y=mean, group=1))+:   scale_y_continuous(limits = c(0,2),position=""right"")+:   labs(y=""Group mean"")+:   theme_classic(): print(g.bottom) #vp ?: print(g.top) #vp?: ※ 引述《samex4x4 (Same)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？: : 兩者是不同的數值(取不同欄位): : 大概是長這樣: : http://imgur.com/b5XELZF.jpg: : 謝謝QQ: : [程式範例]:: : [環境敘述]:: : 3.3.2: : [關鍵字]:: : 選擇性，也許未來有用--","R_Language"
"740","M.1497351455.A.36E","celestialgod","問題","Re: 折線圖+長條圖呈現",2017-06-13 18:57:33,NA,NA,"(法一)

library(dplyr)
numSamples <- 200L
DF <- data.frame(V1 = sample(1L:4L, numSamples, TRUE),
                 V2 = sample(1L:2L, numSamples, TRUE))
sum0 <- DF %>% group_by(V1) %>% summarise (mean = mean(V2), n = n())

library(latticeExtra)
g1 <- barchart(n ~ V1, sum0, horizontal = FALSE)
g2 <- xyplot(mean ~ V1, sum0, type = ""b"")
doubleYScale(g1, g2)http://i.imgur.com/4xUqrDu.png(法二)

成果：http://i.imgur.com/gPudXxI.png程式碼：https://pastebin.com/8Ld815Ns※ 引述《sacidoO (阿罵)》之銘言：: 借用這個標題 跟原po有一樣的問題 試了幾個幫法 但是都不成功.........: 不知道版上有沒有人能有方法解決兩種方法使其更優......感謝了!: [程式範例]: #data: 用c大分享的 code: library(dplyr): ngrp <- 2L: numSamples <- 200L: DF <- data.frame(V1 = sample(1L:3L, numSamples, TRUE), V2 = sample(1L:2L,: numSamples, TRUE),:                  V3 = rnorm(numSamples), V4 = rnorm(numSamples), V5 =: rnorm(numSamples)): #sum statistics: sum0<-DF %>% group_by(V1) %>% summarise (mean=mean(V2),n=n()): #方法一: bar chart 不在節點上,看起來怪怪的: par(mar=c(4,4.5,4,4)): barplot(sum0$n,ylim=c(0,max(sum0$n)+0.1*max(sum0$n)),: yaxt=""n"",width=0.2,space=2): axis(side=4): mtext(""Count"", side=4, line=1.8): par(new=T): plot(sum0$V1,sum0$mean, xlab=""cartegpory level"", ylim=c(0,2), ylab=""""): mtext(""Group mean"",side=2, line=1.8): lines(sum0$V1,sum0$mean, type=""o""): #方法二 使用ggpltot, 但是無法讓兩圖在同一圖上...: library(ggplot2): #frequency plot: g.botton<-ggplot()+geom_bar(data=sum0,aes(x=V1, y=n), stat=""identity"")+:   labs(y=""Counts"")+:   theme_classic(): #line plot: g.top<-ggplot()+geom_line(data=sum0, aes(x=V1, y=mean,: group=1))+geom_point(data=sum0,aes(x=V1,y=mean, group=1))+:   scale_y_continuous(limits = c(0,2),position=""right"")+:   labs(y=""Group mean"")+:   theme_classic(): print(g.bottom) #vp ?: print(g.top) #vp?: ※ 引述《samex4x4 (Same)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？: : 兩者是不同的數值(取不同欄位): : 大概是長這樣: : http://imgur.com/b5XELZF.jpg: : 謝謝QQ: : [程式範例]:: : [環境敘述]:: : 3.3.2: : [關鍵字]:: : 選擇性，也許未來有用--","R_Language"
"741","M.1497350749.A.7EA","celestialgod","問題","Re: 在R中有可以做到text to columns的語法或封包嗎",2017-06-13 18:45:46,NA,NA,"前面先隨便給他一個protocle跟host 加個?表示是query string

然後用httr::parse_url就可以輕鬆處理完了

剩下就是看你要什麼欄位mapping到table中，改個名字，然後as.data.frame即可

library(httr)
x <- parse_url(paste0(""http://1?"",""utm_source=apple&utm_campaign=PRO&"",
                      ""utm_medium=banner&text_id=12228473&date=970101&"",
                      ""loc=65173194cbfdbb89e06742a196ec150f""))
x$query
# $utm_source
# [1] ""apple""
#
# $utm_campaign
# [1] ""PRO""
#
# $utm_medium
# [1] ""banner""
#
# $text_id
# [1] ""12228473""
#
# $date
# [1] ""970101""
#
# $loc
# [1] ""65173194cbfdbb89e06742a196ec150f""※ 引述《jklkj (誠實可靠小郎君)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前我有A、B兩個table: 我想做一件事是把兩個table先join成C，這部分沒問題我用merge: 之後我想當item欄位是空值時把text的資料擷取出部分: text的資料是url類似: utm_source=apple&utm_campaign=PRO&utm_medium=banner&text_id=12228473&date=: 970101&loc=65173194cbfdbb89e06742a196ec150f: 我想把各別的字串丟進資料庫的欄位中: 例如：: apple 丟進source欄位: PRO丟進campaign欄位: banner丟進medium欄位: 65173194cbfdbb89e06742a196ec150f丟進loc欄位: 但是text_id我沒有設欄位，所以不需要解析: [程式範例]:: if(C$item == """") {C$apple <- C$text}: 我本來是想說先丟進去再拆解，可是我連這個最基礎的都ERROR: the condition has length > 1 and only the first element will be used: 想問一下這怎麼處理: [環境敘述]:: R version 3.3.3 (2017-03-06): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] RPostgreSQL_0.4-1 DBI_0.6: loaded via a namespace (and not attached):: [1] tools_3.3.3: [關鍵字]:: ETL--","R_Language"
"742","M.1497333230.A.A9A","tan800630","心得","Rfacebook使用心得與問題",2017-06-13 13:53:47,NA,NA,"[關鍵字]: Rfaceook package

[重點摘要]:

各位前輩好，最近在玩Rfacebook這個套件時發現部分抓取到的資料有些不大對勁，在此
把我看到的狀況整理出來(可能還未遇到所有狀況)讓大家參考，若是其實有規則只是我沒
有發覺也請大家指教，謝謝: )


目前遇到的主要是照片類型文章，抓取照片類型文章的各種訊息(按讚、回應、分享)主要
是參照Po文文章網址(有加字說明的那個頁面)，但在按讚人數上的紀錄卻會有出入，以下
列出幾個目前看到的狀況，
p.s.有些資料甚至沒看到吻合的數字，但可能是爬文日期較早或是曾有編輯紀錄的問題因
此先忽略1.上傳照片並新增至xxx相簿：photo  post都可以看的到文章內容ex. 文章ID:136845026417486_814387378663244photo網址：https://www.facebook.com/DoctorKoWJ/photos/a.814387368663245.1073741880.136845026417486/814387378663244/?type=3改成post網址：https://www.facebook.com/DoctorKoWJ/posts/814387378663244/?type=3按讚人數：參照post網址/photo網址(全文而非第一張照片)
分享人數：(全文而非第一章照片)2.新增照片：改成post也看不到文章內容與相關訊息，無法用下列兩個網址中的按讚人數對應到爬到的內容ex.文章ID:136845026417486_682365098532140photo網址：https://www.facebook.com/DoctorKoWJ/photos/a.415511451884174.1073741827.136845026417486/682365098532140/?type=3改成post網址：https://www.facebook.com/DoctorKoWJ/posts/682365098532140/?type=3自己去google到的Po文文章網址：https://www.facebook.com/DoctorKoWJ/posts/682365261865457按讚人數：參照Po文文章網址 (全文而非第一張照片)
分享人數：(全文而非第一張照片)#不一致的狀況3.上傳照片並新增至xxx相簿：post網址只顯示第一張照片的訊息，沒有內文 (photo網址反而才是全文文章網址)ex.文章ID：136845026417486_476154822486503photo網址：https://www.facebook.com/DoctorKoWJ/photos/a.476104919158160.1073741860.136845026417486/476154822486503/?type=3改成post網址：https://www.facebook.com/DoctorKoWJ/posts/476154822486503/?type=3按讚人數：參照post網址 ""而非Po文文章網址""(第一張照片而非全文)分享人數：(全文而非第一張照片)



##總結##

a. 當專頁管理者使用新增相簿功能發文時，Rfacebook套件可能會抓取到照片而非Po文的
按讚資訊。(主觀感受：大部分狀況會造成大幅低估文章的按讚人數)

b. 當專頁管理者使用上傳照片(但無新增相簿)功能發文時，Rfacebook套件抓取的連結網
址為第一張照片的連結而非Po文的連結網址，然而抓取的資訊仍以Po文為主。





以下為使用的R-code

require(Rfacebook)

#請自行更改token
fb.oauth=""""

#抓取粉絲專頁資料
start_date <- ""2013/01/01""
end_date <- ""2017/05/31""
page.id <- ""DoctorKoWJ""

page <- getPage(page.id,token=fb.oauth,n=3000,since=start_date,until=end_date)


#抓取文章資料
post_ID=""""
n=100000

post=getPost(post_ID,token=fb.oauth,n,reactions=T)


以上，不好意思第一次在版上發這類的文章，如果敘述不好或格式很醜再麻煩見諒

--","R_Language"
"743","M.1497327383.A.763","sacidoO","問題","Re: 折線圖+長條圖呈現",2017-06-13 12:16:21,NA,NA,"#更新 感謝版主c大各種code詳解 及G大還有Andrew大的幫忙!已經有解了
更新方法一於置底

借用這個標題 跟原po有一樣的問題 試了幾個幫法 但是都不成功.........
不知道版上有沒有人能有方法解決兩種方法使其更優......感謝了!

[程式範例]
#data: 用c大分享的 code
library(dplyr)
ngrp <- 2L
numSamples <- 200L
DF <- data.frame(V1 = sample(1L:3L, numSamples, TRUE), V2 = sample(1L:2L,
numSamples, TRUE),
                 V3 = rnorm(numSamples), V4 = rnorm(numSamples), V5 =
rnorm(numSamples))
#sum statistics
sum0<-DF %>% group_by(V1) %>% summarise (mean=mean(V2),n=n())

#方法一: bar chart 不在節點上,看起來怪怪的
par(mar=c(4,4.5,4,4))
barplot(sum0$n,ylim=c(0,max(sum0$n)+0.1*max(sum0$n)),
yaxt=""n"",width=0.2,space=2)
axis(side=4)
mtext(""Count"", side=4, line=1.8)
par(new=T)
plot(sum0$V1,sum0$mean, xlab=""cartegpory level"", ylim=c(0,2), ylab="""")
mtext(""Group mean"",side=2, line=1.8)
lines(sum0$V1,sum0$mean, type=""o"")


#方法二 使用ggpltot, 但是無法讓兩圖在同一圖上...
library(ggplot2)#frequencyplot
g.botton<-ggplot()+geom_bar(data=sum0,aes(x=V1, y=n), stat=""identity"")+
  labs(y=""Counts"")+
  theme_classic()
#line plot
g.top<-ggplot()+geom_line(data=sum0, aes(x=V1, y=mean,
group=1))+geom_point(data=sum0,aes(x=V1,y=mean, group=1))+
  scale_y_continuous(limits = c(0,2),position=""right"")+
  labs(y=""Group mean"")+
  theme_classic()
print(g.bottom) #vp ?
print(g.top) #vp?※ 引述《samex4x4 (Same)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？: 兩者是不同的數值(取不同欄位): 大概是長這樣: http://imgur.com/b5XELZF.jpg: 謝謝QQ: [程式範例]::
:: [環境敘述]::: 3.3.2:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"744","M.1497257737.A.19D","f496328mm","分享","Kaggle Bosch 生產線分析  74名, 前6%",2017-06-12 16:55:33,NA,NA,"給對資料分析有興趣的朋友，一個參考的方向，

我目前還在學習中，所以分享一些過程，有錯也請多多指教

----------------------------------------------------------

我的 CODE 是用 R 寫的，因為使用parallel，必須在 linux 環境下才能執行https://github.com/f496328mm/kaggle_Production_Line問題主要是 生產線分析  需要預測該產品是 良品 or 不良品

詳細過程我都寫在 github 上，

由於我沒有相關經驗，部分方法參考 kaggle 的 kernel ，

文筆可能不夠好，如果有問題可以直接寄信給我


--","R_Language"
"745","M.1497255490.A.194","berlin0212","問題","leaflet for R 是否可使用 TGOS 底圖？",2017-06-12 16:18:06,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
大家好，我剛學R不久，對地圖視覺化有興趣，相較於跟Google Map串接的套件，
leaflet提供的互動地圖可以不受螢幕框框限制呈現不同尺度範圍的資料讓我非常喜歡，
配合shiny使用可以達到不錯的網頁呈現效果。
雖然R未必是最好的工具但我只會R，請大家不要笑 XD

leaflet預設提供開放街圖(Open Street Map, OSM)，不提供Google Map
根據官網的說明也可以按照需要的視覺效果，用addProviderTiles()函數叫出其他預設有
配合的底圖，例如黑白圖、地形圖、衛星圖：https://rstudio.github.io/leaflet/basemaps.html不過以台灣而言，最準確的圖資應該還是政府的TGOS圖台，
例如台北市的「地圖化資訊展示系統」(http://163.29.163.57/eocmap)就可以按「地球」切換四種底圖：
街圖(看來是Google map)、衛星、地形、TGOS，非常實用

想請教板上各位大大是否可能用leaflet叫出TGOS的底圖呢？謝謝解惑！

TGOS有提供API但不太知道怎麼串...https://www.tgos.tw/TGOS/Web/API/TGOS_API_Center.aspx另外RStudio的leaflet說明頁有這句話，但沒有實際舉例：
Custom Tile URL Template
If you happen to have a custom map tile URL template to use, you can provide
it as an argument to addTiles().

[關鍵字]:
Leaflet for R
TGOS

--","R_Language"
"746","M.1497204078.A.C71","fjuheadache","問題","shiny模板問題",2017-06-12 02:01:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)學校有上過r
不過目前沒有教過shiny 套件


[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好
我想請問
我想做一個有十個變數每個都是類別
然後目標只有是跟否
然後想用shiny 讓五個變數有可以選的下拉選單
選完後會跑出結果是或否

[程式範例]:
沒學過shiny 套件
上網爬文也沒找到想要的資訊

--","R_Language"
"747","M.1497113842.A.0ED","HumuHumu","問題","shiny error : undedinfe column select",2017-06-11 00:57:19,NA,NA,"我目前把App寫好後

透過runApp()可以用Rstudio 跑出結果而沒有任何Bug

但是用瀏覽器執行 runApp(launch.browser = TRUE) 時就會跳出

Error : Undefined column selected

不知道有沒有人遇過這種問題 透過不同的方式runApp結果會有差異的

--","R_Language"
"748","M.1497106491.A.6A4","qazwsx879345","問題","choose.dir() 資料夾的選取",2017-06-10 22:54:48,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

大大們安安

目前是有一些成果

但因為在選取資料夾的時候

要選擇太多資料夾

EX:C:/XXX/XXX/X/XX/X/XXXXXX/XXXX/XX/X/X

(因為資料量很大  分很細

在不能移動資料夾的情況下

不想要每次選都要點10幾次才能點到要去使用的資料夾

不知道有沒有甚麼辦法

例如一開始就設定在最接近的資料夾再去choose的話可以嗎?

目前不能把資料夾的路徑寫死  因為資料夾的名子可能是會變化的QQ


[關鍵字]:

資料夾的縮短

--","R_Language"
"749","M.1497015168.A.125","clansoda","問題","shiny reactiveValue observe疑問",2017-06-09 21:32:42,NA,NA,"先簡述一下我要做的事情 我想要做一個網頁讓使用者可以輸入帳號密碼後

看到根據他們權限能看到的東西

我讓使用者第一眼看到的是一個帳號輸入的格子與一個密碼格子

使用者輸入帳號密碼按下確認後

我想讓系統去比對資料庫裡面使用者資料的帳號密碼看看是否符合

如果符合則傳回TRUE否則FALSE

這是我這擷取有問題的這部分https://pastebin.com/aiKhWug2系統告訴我 closure' 類型的物件無法具有子集合

我想統整一下我的問題

1 要如何處理這個因為reactiveEvent造成的Error

2 有更好的方式來完成我想做的事情嗎

3 我目前用RMySQL來連接我另外一台電腦的MySQL

我已經有開啟防火牆設定與讓所有IP都可以連線的設定了

但是我把app傳到shinyappio上面後卻連不到我的server

我用自己的筆電連接時沒有問題

請問有前輩在shinyappio上面用過MySQL的服務嗎?

--","R_Language"
"750","M.1496998981.A.87C","jklkj","問題","在R中有類似Excel的資料剖析的語法或工具",2017-06-09 17:02:58,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前我有A、B兩個table
我想做一件事是把兩個table先join成C，這部分沒問題我用merge
之後我想當item欄位是空值時把text的資料擷取出部分
text的資料是url類似
utm_source=apple&utm_campaign=PRO&utm_medium=banner&text_id=12228473&date=
970101&loc=65173194cbfdbb89e06742a196ec150f
我想把各別的字串丟進資料庫的欄位中
例如：
apple 丟進source欄位
PRO丟進campaign欄位
banner丟進medium欄位
65173194cbfdbb89e06742a196ec150f丟進loc欄位
但是text_id我沒有設欄位，所以不需要解析

[程式範例]:

if(C$item == """") {C$apple <- C$text}
我本來是想說先丟進去再拆解，可是我連這個最基礎的都ERROR
the condition has length > 1 and only the first element will be used
想問一下這怎麼處理
[環境敘述]:
R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RPostgreSQL_0.4-1 DBI_0.6

loaded via a namespace (and not attached):
[1] tools_3.3.3
[關鍵字]:

ETL

--","R_Language"
"751","M.1496838410.A.DBA","celestialgod","問題","Re: ggplot2 有關scale_fill_或Legends",2017-06-07 20:26:47,NA,NA,"※ 引述《BUQ (固執又暴燥)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: [程式範例]::: 我想改  圖的Legends的文字內容  用google找到這教學: http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/: 其中的一段 http://ideone.com/g0dEeN: http://i.imgur.com/tWPaACT.jpg  我想改標示上的文字也就是legend.text: http://i.imgur.com/jyAuJmW.jpg: Q1 為何範例 有時用scale_fill_manual 有時用scale_fill_discrete差別在哪？: Q2 我的程式碼 http://ideone.com/JB8Vjw 我需要畫的是 geom_density:    有很多行被註解是因為在網路上找了很多解法 試都沒有用:    沒註解的  就是我現階段妥協的畫法: http://i.imgur.com/J3NWTRi.jpg: [環境敘述]:: R version 3.3.3 (2017-03-06): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): [關鍵字]:: Legends ggplot2都已經用ggplot2，就不要再花費太多心力再手動設定的部分，盡量讓它幫你完成

就像推文說的轉成long table即可：

畫出來的圖：http://imgur.com/a/DLG1Ilibrary(data.table)
library(plyr)
library(pipeR)
library(ggplot2)

DT <- data.table(mean = rnorm(1000), wweather = rnorm(1000, 2),
                 prmean = rnorm(1000, 2.5)) %>>%
  melt(measure.vars = 1:3) %>>%
  `[`(j = fill := mapvalues(variable, c(""mean"",""wweather"", ""prmean""),
                            c(""平均"", ""觀測"", ""75百分位"")))

ggplot(DT, aes(value, fill = fill)) +
  geom_density(alpha = 0.3) +
  labs(x = ""溫度"", title = ""2012 高雄市"", fill = ""溫度"") +
  theme(plot.title = element_text(hjust = 0.5))

--","R_Language"
"752","M.1496837550.A.2F5","celestialgod","問題","Re: 相關爬蟲問題",2017-06-07 20:12:26,NA,NA,"建議不要用XML，其實你很多程式是可以省下來不用的

用foreach，日後要改平行也可以比較簡單更動

好讀版：https://pastebin.com/xhCkV0Cdlibrary(data.table)
library(stringi)
library(lubridate)
library(foreach)
library(httr)
library(xml2)
library(rvest)
library(pipeR)

# windows才需要先把locale改成C，並用stringi::stri_conv轉成big5
backupLocale <- Sys.getlocale(""LC_COLLATE"")
Sys.setlocale(""LC_ALL"", 'C')

timeVec <- seq(ymd(""2003/01/01""), ymd(""2003/01/11""), 1)
reservoirUrl <-
""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx""tmp <- foreach(time = timeVec, .final = rbindlist) %do% {
  VIEWSTATE <- GET(reservoirUrl) %>>% content %>>%
    xml_find_all(""//input[@name='__VIEWSTATE']"") %>>% xml_attr(""value"")

  postBody <- c(list(""所有水庫""),
                lapply(c(year, month, day), function(f) f(time)),
                list(VIEWSTATE)) %>>%
    `names<-`(c(paste0(""ctl00$cphMain$"",
                       c(""cboSearch"", paste0(""ucDate$cbo"",
                c(""Year"", ""Month"",""Day"")))),
                ""__VIEWSTATE""))
  outTbl <- POST(reservoirUrl, body = postBody) %>>% content %>>%
    xml_find_first(""//table[@id='ctl00_cphMain_gvList']"") %>>%
    html_table(fill = TRUE) %>>% setDT %>>%
    `[`(j = lapply(.SD, stri_conv, from = ""UTF-8"", to = ""Big5""))
  setnames(outTbl, stri_conv(names(outTbl), ""UTF-8"", ""Big5""))
  fwrite(outTbl, sprintf(""result/%s.csv"", as.character(time)))
  return(NULL)
}
Sys.setlocale(locale = backupLocale)
fwrite(rbindlist(lapply(list.files(""result"", ""\\.csv$""), fread)), ""merge.csv"")※ 引述《jack155861 (蕭)》之銘言：: 來分享一下我的程式碼: library(magrittr): library(httr): library(rvest): library(XML): library(dplyr): library(stringr): setwd(""J:/聖哲/資料運算/spider""): data<-read.csv(""test.csv"", header=T, sep="",""): #http://imgur.com/a/vpizi  我自己先用EXCEL創造出要載的年月日 這用R也可以做啦: #只是這個EXCEL之後還有其他功能: for (a in 1:length(data[,1])): {: url=""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx"": txt=GET(url): viewstate = txt %>% read_html() %>% html_nodes(., css=""#__VIEWSTATE"") %>%: html_attr(""value""): #讀取viewstate: cboSearch=""所有水庫"": cboYear=data[a,2]: cboMonth=data[a,3]: cboDay=data[a,4]: #我的參數: dados <- list(  'ctl00$cphMain$cboSearch'=cboSearch,:                 'ctl00$cphMain$ucDate$cboYear'=cboYear,:                 'ctl00$cphMain$ucDate$cboMonth'=cboMonth,:                 'ctl00$cphMain$ucDate$cboDay'=cboDay,:                 '__VIEWSTATE'=viewstate): #此網頁有很多$ list裡面不能直接打$ 要有單引號就沒這問題: r <- POST(url, body=dados, cookies=unlist(txt$cookies),encode = ""form""): res_text <- content(r, ""text"", encoding = ""UTF-8"") %>%:   `Encoding<-`(""UTF-8"")  # Windows encodind issue: res_text: #看看資料有無出來: htmlParse(res_text,encoding = ""utf8""): tables <- readHTMLTable(htmlParse(res_text,encoding =: ""utf8""),stringsAsFactors=FALSE): View(tables[[1]]): #看看TABLE出來的資料有無正確  其實有些有跳欄位問題 但資料都有: name=tables[[1]][-1,1]: water_day=tables[[1]][-1,2]: time_day=paste(cboYear,""-"",cboMonth,""-"",cboDay,sep = """"): rain=tables[[1]][-1,4]: input=tables[[1]][-1,5]: output=tables[[1]][-1,6]: difference=tables[[1]][-1,7]: time_now=tables[[1]][-1,8]: height_now=tables[[1]][-1,9]: water_now=tables[[1]][-1,10]: water_percent_now=tables[[1]][-1,11]: result=cbind(name,water_day,time_day,rain,input,output,difference,time_now,height_now,water_now,water_percent_now): colnames(result) <- c(""水庫名稱"",""水庫基本數據_有效容量"",:                 ""每日蓄水統計_統計時間"",""每日蓄水統計_集水區降雨量"",:                 ""每日蓄水統計_進水量"",""每日蓄水統計_出水量"",:                 ""每日蓄水統計_與昨日水位差"",""即時水情資料_水情時間"",:                 ""即時水情資料_水位"",""即時水情資料_有效蓄水量"",:                 ""即時水情資料_蓄水量百分比""): #從table存取我要的資訊: write.csv(result, paste(""./result/"",time_day,"".CSV"",sep = """")): #每一天一個CSV檔案 之後可能需要 故先不做合併: }: a = list.files(""result""): dir = paste(""./result/"",a,sep=""""): n = length(dir): merge.data = read.csv(file = dir[1],header=T,sep="","")[-54,-1]: for (i in 2:n){:    new.data = read.csv(file = dir[i], header=T, sep="","")[-54,-1]:    merge.data = rbind(merge.data,new.data):  }: write.csv(merge.data,file = ""./merge.csv"",row.names=F): #所有CSV合併成為一個檔案: ※ 引述《jack155861 (蕭)》之銘言：: : 各位好: : 謝謝C大的說明  然後我又在網路上看到一個教學 他這個教學跟我網站的形式有點類似: : 網址如下：http://leoluyi.logdown.com/posts/406397-crawler-mops-2: : 我把我要爬蟲的網站  看了他的程式碼 他是屬於form data 如下圖: : http://imgur.com/a/Vy7mw: : 依照上面教學網址是要把form data的資料都放到R的函數理頭: : res <- POST(: :   ""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx"",: :   body = ""XXXXX"",: : encode = ""form""): : 但是怎樣跑都跑不出來  跑的都是最新(2017/6/4)的資料: : 若我body只放以下這些有影響的參數也是如此: :   ctl00$cphMain$cboSearch:防汛重點水庫: :   ctl00$cphMain$ucDate$cboYear:2017: :   ctl00$cphMain$ucDate$cboMonth:6: :   ctl00$cphMain$ucDate$cboDay:2: : 請問各位大大  有哪裡用錯了嗎?--","R_Language"
"753","M.1496825540.A.A4E","jklkj","問題","view()無法看到全部欄位",2017-06-07 16:52:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我在用view看資料的時候發現因為我的欄位過多(超過150)，所以無法全部欄位都看到
即便用str()也會被截掉，但是str我可以用str(df, list.len = ncol(df))
我也有用過edit()，但是有時會有下列的錯誤
can only handle vector and factor elements
想請問一下，view()有什麼辦法可以看到全部的欄位呢？或是有其他的語法可用
感謝

[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:truncated--","R_Language"
"754","M.1496821706.A.F27","hotlin0709","問題","同時擷取多個資料",2017-06-07 15:48:23,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
想請問要怎麼同時擷取多個條件內容

例如我要擷取data裡的time這欄中time==01或time==08或time==15

把所有符合條件的資料存到data1<-

謝謝大家

--","R_Language"
"755","M.1496821029.A.562","BUQ","問題","ggplot2 有關scale_fill_或Legends",2017-06-07 15:37:04,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:我想改  圖的Legends的文字內容  用google找到這教學http://www.cookbook-r.com/Graphs/Legends_(ggplot2)/其中的一段 http://ideone.com/g0dEeNhttp://i.imgur.com/tWPaACT.jpg  我想改標示上的文字也就是legend.texthttp://i.imgur.com/jyAuJmW.jpgQ1 為何範例 有時用scale_fill_manual 有時用scale_fill_discrete差別在哪？Q2 我的程式碼 http://ideone.com/JB8Vjw 我需要畫的是 geom_density有很多行被註解是因為在網路上找了很多解法 試都沒有用沒註解的  就是我現階段妥協的畫法http://i.imgur.com/J3NWTRi.jpg[環境敘述]:R version 3.3.3 (2017-03-06)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:Legends ggplot2--","R_Language"
"756","M.1496814281.A.64F","tses89214","問題","Re: 網路爬蟲相關問題",2017-06-07 13:44:38,NA,NA,"※ 引述《tses89214 (幻想天空)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位好，我想要抓取旅遊網站上面的金額的資訊，就是橘色的NT$的部分: https://goo.gl/rTUzDp (網址過長所以縮了一下): 但因為沒有處理過動態的網站而卡關，: 目前進度是使用read_html以及readLines這兩個function試過，: 發現抓到東西的與看到的網頁原始碼不一樣。: 從開發者工具雖然有看到幾個.js的項目，: 卻不太知道該用GET或是POST什麼東西給他們，: 所以想問：該用什麼方法才能得到想要的資料呢?: 謝謝!: PS.只要能拿到網頁的原始碼就行了，後面的文字處理我可以自己來。: [關鍵字]::: 網路爬蟲:

抱歉又有新的問題了QQ，

目前進度是想要爬在各種行程裡面，不同票種(成人，小孩，老人等)的票價，

從開發者工具看到它是在選定套餐與時間之後，對一串網址傳送訊息得到資料，

以同一個行程當例子(https://goo.gl/rTUzDp)，範例網址如下：https://www.klook.com/xos_api/rest/arrangements_api/3547822.json?gateway=web&_=1496809592949但我搞不懂的是，他的""...api/3547822.json""這段，

那串數字是怎麼得到的? 不同的套餐、時間，那串數字就會不一樣，

想說如果能知道規律就能得到回傳的資訊了，

抑或者有其他的方法可以得到不同行程中的不同票種的票價嗎?


--","R_Language"
"757","M.1496799136.A.80A","peterwu76","問題","Re: Json to R and Data talbe/matrix arrange",2017-06-07 09:32:12,NA,NA,"感謝 celestialgod 前輩的幫忙
附上最後的code for download historical data，這樣也可以讓前輩了解我想做什麼。

好讀版https://hackmd.io/KwU2CMDMENQWmAZgEwGM4BZrmXcB2AThDmn2GQBNxKAGDVYYIA==?both備註說明:
原本也想考慮抓Realtime數據，結果發現抓出來的資料時間跟歷史資料最新的data時間
是一樣的，抓取資料的時間點跟最新能抓到的資料的時間點相隔8小時左右。

舉例來說，我09:00使用此code抓資料，抓出的資料最後(最新的)一筆資料的時間大概
是01:00。

所以最後放棄所謂Realtime抓資料的想法，不如抓歷史historical資料。

MY Final codes for historical data

# Get data from Json link
library(jsonlite)
url <- ""https://data.lass-net.org/data/history.php?device_id=74DA38C7D1D2""x <- fromJSON(url)

# Arrange data into table matrix
library(data.table)
library(lubridate)
outDT <- rbindlist(x$feeds$AirBox)

# Claim  the  timestamp into correct time format by lubridate package
outDT[ , `:=`(source = x$source, version = ymd_hms(x$version),
             device_id = x$device_id, timestamp = ymd_hms(timestamp))]

sortD <- outDT

# Capture data by column names

headers<-c(""timestamp"",""s_d0"",""s_t0"",""s_h0"",""date"",""time"",""device_id"",""gps_lon"",""gps_lat"",""version"")

sortD <- subset(outDT,select=headers)
# rename column names
colnames(sortD)[which(names(sortD) == ""s_d0"")] <- ""PM2.5""
colnames(sortD)[which(names(sortD) == ""s_t0"")] <- ""Temperature""
colnames(sortD)[which(names(sortD) == ""s_h0"")] <- ""Humidity""

# Sort data
sortD$timestamp <- as.POSIXct(sortD$timestamp, tz='UTC')
class(sortD$timestamp)
Final_data<-sortD[order(sortD$timestamp)]
View(Final_data)

# Output data
date <- sprintf(""AirBox_74DA38C7D1D2_%s.csv"", format(Sys.time(),""%Y%m%d%H%M""))
outfile = paste(""D:\\AirBoxTest\\"", date, sep = """")
write.csv(Final_data, file = outfile)


#################################
# Hourly average and output
#################################
Final_data_hourly<- aggregate(list(PM2.5 = Final_data$PM2.5,
                             Humidity = Final_data$Humidity,
                             Temperature = Final_data$Temperature),
                        list(hourofday = cut(Final_data$timestamp, ""1 hour"")),
                        mean)

# Output data
date <- sprintf(""AirBox_74DA38C7D1D2_Hourly_%s.csv"",
format(Sys.time(),""%Y%m%d%H%M""))
outfile = paste(""D:\\AirBoxTest\\"", date, sep = """")
write.csv(Final_data_hourly, file = outfile)

--","R_Language"
"758","M.1496796579.A.2FB","jack155861","問題","Re: 相關爬蟲問題",2017-06-07 08:49:36,NA,NA,"來分享一下我的程式碼

library(magrittr)
library(httr)
library(rvest)
library(XML)
library(dplyr)
library(stringr)

setwd(""J:/聖哲/資料運算/spider"")
data<-read.csv(""test.csv"", header=T, sep="","")
#http://imgur.com/a/vpizi我自己先用EXCEL創造出要載的年月日 這用R也可以做啦
#只是這個EXCEL之後還有其他功能

for (a in 1:length(data[,1]))
{
url=""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx""txt=GET(url)

viewstate = txt %>% read_html() %>% html_nodes(., css=""#__VIEWSTATE"") %>%
html_attr(""value"")
#讀取viewstate

cboSearch=""所有水庫""
cboYear=data[a,2]
cboMonth=data[a,3]
cboDay=data[a,4]
#我的參數

dados <- list(  'ctl00$cphMain$cboSearch'=cboSearch,
                'ctl00$cphMain$ucDate$cboYear'=cboYear,
                'ctl00$cphMain$ucDate$cboMonth'=cboMonth,
                'ctl00$cphMain$ucDate$cboDay'=cboDay,
                '__VIEWSTATE'=viewstate)
#此網頁有很多$ list裡面不能直接打$ 要有單引號就沒這問題

r <- POST(url, body=dados, cookies=unlist(txt$cookies),encode = ""form"")
res_text <- content(r, ""text"", encoding = ""UTF-8"") %>%
  `Encoding<-`(""UTF-8"")  # Windows encodind issue
res_text
#看看資料有無出來

htmlParse(res_text,encoding = ""utf8"")
tables <- readHTMLTable(htmlParse(res_text,encoding =
""utf8""),stringsAsFactors=FALSE)
View(tables[[1]])
#看看TABLE出來的資料有無正確  其實有些有跳欄位問題 但資料都有

name=tables[[1]][-1,1]
water_day=tables[[1]][-1,2]
time_day=paste(cboYear,""-"",cboMonth,""-"",cboDay,sep = """")
rain=tables[[1]][-1,4]
input=tables[[1]][-1,5]
output=tables[[1]][-1,6]
difference=tables[[1]][-1,7]
time_now=tables[[1]][-1,8]
height_now=tables[[1]][-1,9]
water_now=tables[[1]][-1,10]
water_percent_now=tables[[1]][-1,11]
result=cbind(name,water_day,time_day,rain,input,output,difference,time_now,height_now,water_now,water_percent_now)
colnames(result) <- c(""水庫名稱"",""水庫基本數據_有效容量"",
                ""每日蓄水統計_統計時間"",""每日蓄水統計_集水區降雨量"",
                ""每日蓄水統計_進水量"",""每日蓄水統計_出水量"",
                ""每日蓄水統計_與昨日水位差"",""即時水情資料_水情時間"",
                ""即時水情資料_水位"",""即時水情資料_有效蓄水量"",
                ""即時水情資料_蓄水量百分比"")
#從table存取我要的資訊

write.csv(result, paste(""./result/"",time_day,"".CSV"",sep = """"))
#每一天一個CSV檔案 之後可能需要 故先不做合併
}

a = list.files(""result"")
dir = paste(""./result/"",a,sep="""")
n = length(dir)
merge.data = read.csv(file = dir[1],header=T,sep="","")[-54,-1]
for (i in 2:n){
   new.data = read.csv(file = dir[i], header=T, sep="","")[-54,-1]
   merge.data = rbind(merge.data,new.data)
 }
write.csv(merge.data,file = ""./merge.csv"",row.names=F)
#所有CSV合併成為一個檔案※ 引述《jack155861 (蕭)》之銘言：: ※ 引述《jack155861 (蕭)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 之前爬蟲都是用html網頁型態，最近遇到一個是需要先點選選單才能查詢資料的ASP網頁，: : 如下: : http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx: : 假設我要載：水庫>2017/6/4  像這樣的資料時，他的網址並不會跟著變動: : 要使用怎樣的語法會比較恰當: : 請各位指點一下~""~: 各位好: 謝謝C大的說明  然後我又在網路上看到一個教學 他這個教學跟我網站的形式有點類似: 網址如下：http://leoluyi.logdown.com/posts/406397-crawler-mops-2: 我把我要爬蟲的網站  看了他的程式碼 他是屬於form data 如下圖: http://imgur.com/a/Vy7mw: 依照上面教學網址是要把form data的資料都放到R的函數理頭: res <- POST(:   ""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx"",:   body = ""XXXXX"",: encode = ""form""): 但是怎樣跑都跑不出來  跑的都是最新(2017/6/4)的資料: 若我body只放以下這些有影響的參數也是如此:   ctl00$cphMain$cboSearch:防汛重點水庫:   ctl00$cphMain$ucDate$cboYear:2017:   ctl00$cphMain$ucDate$cboMonth:6:   ctl00$cphMain$ucDate$cboDay:2: 請問各位大大  有哪裡用錯了嗎?--","R_Language"
"759","M.1496768328.A.D8F","swilly0906","問題","使用read.csv一直出現錯誤訊息",2017-06-07 00:58:45,NA,NA,"[問題類型]:


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:

針對政府開放資料裡面的這個csv檔:紫外線監測datahttp://data.gov.tw/node/6076我第一步驟就失敗了QQ

我的指令如下:
uv <- read.csv(""UV_20170606233938.csv"",sep = "","",encoding = ""UTF-8"")

結果跑出錯誤訊息如下:
Error in type.convert(data[[i]], as.is = as.is[i], dec = dec, numerals =
numerals,:invalid multibyte string at '<e8><8a><b1>?<ae>'


不是很懂這個錯誤訊息..

拿去餵狗之後,stackoverflow也有差不多的問題,可是我照著做

好像還是失敗了....

[環境敘述]:
R version 3.3.1 (2016-06-21)
Running under: Windows 7 x64 (build 7600)
[關鍵字]:選擇性，也許未來有用--","R_Language"
"760","M.1496763553.A.9C0","tses89214","問題","網路爬蟲相關問題",2017-06-06 23:39:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位好，我想要抓取旅遊網站上面的金額的資訊，就是橘色的NT$的部分https://goo.gl/rTUzDp(網址過長所以縮了一下)

但因為沒有處理過動態的網站而卡關，

目前進度是使用read_html以及readLines這兩個function試過，

發現抓到東西的與看到的網頁原始碼不一樣。

從開發者工具雖然有看到幾個.js的項目，

卻不太知道該用GET或是POST什麼東西給他們，

所以想問：該用什麼方法才能得到想要的資料呢?

謝謝!

PS.只要能拿到網頁的原始碼就行了，後面的文字處理我可以自己來。

[關鍵字]:網路爬蟲--","R_Language"
"761","M.1496750867.A.503","celestialgod","問題","Re: 依特定條件補足日期",2017-06-06 20:07:44,NA,NA,"carl大已經回答的滿完美的

不過有一個函數，我推薦你試試看

full_seq + unnest的應用：

library(dplyr)
library(tidyr)
DF <- data.frame(Group = c(""A"", ""A"", ""B"", ""B"", ""C"", ""C""),
                 Status = rep(c(""Start"", ""End""), times = 3),
                 Date = as.Date(c(""2016/01/01"", ""2016/01/15"",
                                  ""2016/01/09"", ""2016/02/01"",
                                  ""2016/01/02"", ""2016/01/07"")))

DF %>% group_by(Group) %>%
  summarise(Date2 = list(full_seq(Date, 1))) %>%
  unnest※ 引述《menghsuanliu (庫庫少)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想依group,把日期補足(參考附圖): http://i.imgur.com/ef6uHfT.jpg: http://i.imgur.com/UasIAhm.jpg: [程式範例]:: [環境敘述]:: [關鍵字]::

--","R_Language"
"762","M.1496746493.A.BDB","carl090105","問題","Re: 依特定條件補足日期",2017-06-06 18:54:51,NA,NA,"以下提供兩種方式

library(data.table)
library(dplyr)
library(lubridate)

data <- data.frame(Group = c(""A"", ""A"", ""B"", ""B"", ""C"", ""C""),
                   Status = rep(c(""Start"", ""End""), times = 3),
                   Date = c(""2016/01/01"", ""2016/01/15"",
                            ""2016/01/09"", ""2016/02/01"",
                            ""2016/01/02"", ""2016/01/07""))
# data.table
data %>%
    setDT %>%
    .[,
      .(Date = seq(ymd(.SD[Status == ""Start"", Date]),
                   ymd(.SD[Status == ""End"", Date]),
                   by = ""days"")),
      by = Group]

# dplyr
data %>%
    group_by(Group) %>%
    do({
        subDf <- .
        Date <- seq(ymd(filter(subDf, Status == ""Start"")$Date),
                    ymd(filter(subDf, Status == ""End"")$Date),
                    by = ""days"")
        str(Date)
        return(data.frame(Date = Date))
    }) %>%
    ungroup※ 引述《menghsuanliu (庫庫少)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想依group,把日期補足(參考附圖): http://i.imgur.com/ef6uHfT.jpg: http://i.imgur.com/UasIAhm.jpg: [程式範例]:: [環境敘述]:: [關鍵字]::

--","R_Language"
"763","M.1496740715.A.A0E","menghsuanliu","問題","依特定條件補足日期",2017-06-06 17:18:33,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我想依group,把日期補足(參考附圖)http://i.imgur.com/ef6uHfT.jpghttp://i.imgur.com/UasIAhm.jpg[程式範例]:



[環境敘述]:



[關鍵字]:


--","R_Language"
"764","M.1496627319.A.360","ariainaqua","問題","R 語言讀取序列資料",2017-06-05 09:48:36,NA,NA,"[問題類型]:
R 語言讀取長短不一的序列資料問題

[軟體熟悉度]:
入門(對 R 語法不太熟悉)

[問題敘述]:

目前想讀取 22 萬筆序列資料(input.csv)如下格式:

a,b,c,a,gcc,aka,c,t
a,b,c,g,gcc,a,nv,qc,c,ntt,ntt1,ntt2,g,ncc,nv
a,sgt,c,a,org,com,ggc,bbc,qc,c,b,ncc,gov,gov,gov,ntt1,ntt2,fb,app,la,d,e,fb,fe
t,
a,b,c,a,gcc,d,sgt,c,fet,1394,1394,1394,fet,fet,org
a,sgt,c,org
...

每一筆資料長短不同，最長為 10,143 個項目；最短 2 個項目。
如果直接用 read.csv 或 read.table 讀取的話無法將全部的數列儲存為 data.frame，
最大只有 71 行，另外就是原本同一行的資料會被拆成 2 行。> dim(input)[1] 210220     71
# 只能讀 71 行，且資料少 48,333 筆> view(input)57  a   b   a   c   c   c   1394   c   c   c   org   c   c   c   c   1394   ..
.
58  skt skt skt skt
# 57, 58 在原始資料為同一筆(列)

想請問有沒有更好的資料讀取方式？

後續想接 seqHMM 建立隱馬可夫模型， seqHMM 會呼叫 seqdef {TraMineR} 將 data.fra
me 轉換成模型的輸入格式

謝謝各位前輩的幫忙。感謝 =)


--
Sent from my Windows

--","R_Language"
"765","M.1496584622.A.D2C","jack155861","問題","Re: 相關爬蟲問題",2017-06-04 21:56:59,NA,NA,"※ 引述《jack155861 (蕭)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 使用者(已經有用R 做過不少作品):: [問題敘述]::: 之前爬蟲都是用html網頁型態，最近遇到一個是需要先點選選單才能查詢資料的ASP網頁，: 如下: http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx: 假設我要載：水庫>2017/6/4  像這樣的資料時，他的網址並不會跟著變動: 要使用怎樣的語法會比較恰當: 請各位指點一下~""~:
各位好


謝謝C大的說明  然後我又在網路上看到一個教學 他這個教學跟我網站的形式有點類似
網址如下：http://leoluyi.logdown.com/posts/406397-crawler-mops-2我把我要爬蟲的網站  看了他的程式碼 他是屬於form data 如下圖http://imgur.com/a/Vy7mw依照上面教學網址是要把form data的資料都放到R的函數理頭

res <- POST(
  ""http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx"",body = ""XXXXX"",
encode = ""form"")

但是怎樣跑都跑不出來  跑的都是最新(2017/6/4)的資料
若我body只放以下這些有影響的參數也是如此
  ctl00$cphMain$cboSearch:防汛重點水庫
  ctl00$cphMain$ucDate$cboYear:2017
  ctl00$cphMain$ucDate$cboMonth:6
  ctl00$cphMain$ucDate$cboDay:2

請問各位大大  有哪裡用錯了嗎?


--","R_Language"
"766","M.1496580852.A.A69","LIAR","問題","R-studio的help背景色可以調整嗎？",2017-06-04 20:54:05,NA,NA,"不管直接用R或是R-studio，我都習慣調成像PCMAN開BBS的黑底白字，不過右邊視窗的
像是參數列表或是右下的說明和圖表等等，都還是白底，長期盯螢幕不太舒服，
請問這部分有辦法像左邊的console或程式碼那樣自行調整嗎？嗎？

--
起初，他們追殺共產主義者，我沒有說話，因為我不是共產主義者；
接著，他們追殺猶太人，我沒有說話，因為我不是猶太人；
後來，他們追殺工會成員，我沒有說話，因為我不是工會成員；
此後，他們追殺天主教徒，我沒有說話，因為我是新教教徒；
最後，他們奔我而來，卻再也沒有人站起來為我說話了。
《First They Came（他們首次來時）》，Martin Niemoller牧師（1892-1984）

--","R_Language"
"767","M.1496579812.A.7E8","celestialgod","問題","Re: Json to R and Data talbe/matrix arrange",2017-06-04 20:36:49,NA,NA,"看了幾次你的問題，有點搞不清楚你再問什麼

不過我盡可能抓你問題的大意來回答你

有任何問題再推文問※ 引述《peterwu76 (金岡)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 初學者 有寫過其他程式的初淺經驗: [問題敘述]:: 1. 想從3個json來源的其中一個source抓資料下來，:    最後我只要其中一個device (ID: 74DA38C7D1D2 )的資訊:    (1) 有全部的device資訊，real time:        https://data.lass-net.org/data/last-all-airbox.json:    (2) 一個是by specific ID，real time:        https://data.lass-net.org/data/last.php?device_id=74DA38C7D1D2:    (3) 一個是historical by ID:        https://data.lass-net.org/data/history.php?device_id=74DA38C7D1D2: 2. Data處理: 抓下來的資料依照時間排序，如果是:    (1)的作法: 打算寫個抓下來需要再依照ID去做擷取並output的script，:               再用工作排程器做定時抓資料，但排程器還沒掌握到如何:               可以每天每小時/5分鐘去啟動script；:    (2)的做法: 就是寫好再用工作排程器作定時抓資料。:    (3)的作法: 抓下來後，想辦法排序。: 3. Problems::    (1)的做法與(2)的做法::       用自己try出來的寫法，但排程器還沒掌握到如何可以每天每小時或:       5分鐘去啟動script；或是本身用R做到這件事。用as.data.frame不是不行，只是這樣去破壞原有的list架構

會讓整個使用上變得怪，建議這樣用：

url <- ""https://data.lass-net.org/data/last-all-airbox.json""x <- fromJSON(url)
final_data_id <- subset(x$feeds, SiteName == ""74DA38C7D1D2"")

排成部分可以用taskscheduleR，可以參考這篇：https://goo.gl/4DtZTb:    (3)的做法::       不確定怎麼克服 1 row by 多重columns 至 只要些specific columns in rows by:       different times完全沒看懂你在寫什麼，反正整成table，你應該就能直接使用了

library(jsonlite)
url <- ""https://data.lass-net.org/data/history.php?device_id=74DA38C7D1D2""x <- fromJSON(url)

library(data.table)
library(lubridate)
outDT <- rbindlist(x$feeds$AirBox)
outDT[ , `:=`(source = x$source, version = ymd_hms(x$version),
              device_id = x$device_id, timestamp = ymd_hms(timestamp))]

看不懂data.table的話，試著用用看base做法

而lubridate的ymd_hms是比較簡單把字串轉時間的方式，不喜歡可以用as.POSIXct

結果：http://imgur.com/a/4llizhttp://imgur.com/a/EoHGf: 4. 希望眾前輩可以提供些function/package 的 keyword 含 concept。 非常感謝大家!--","R_Language"
"768","M.1496566976.A.8F4","peterwu76","問題","",2017-06-04 17:02:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
初學者 有寫過其他程式的初淺經驗

[問題敘述]:

1. 想從3個json來源的其中一個source抓資料下來，
   最後我只要其中一個device (ID: 74DA38C7D1D2 )的資訊
   (1) 有全部的device資訊，real timehttps://data.lass-net.org/data/last-all-airbox.json(2) 一個是by specific ID，real timehttps://data.lass-net.org/data/last.php?device_id=74DA38C7D1D2(3) 一個是historical by IDhttps://data.lass-net.org/data/history.php?device_id=74DA38C7D1D22. Data處理: 抓下來的資料依照時間排序，如果是
   (1)的作法: 打算寫個抓下來需要再依照ID去做擷取並output的script，
              再用工作排程器做定時抓資料，但排程器還沒掌握到如何
              可以每天每小時/5分鐘去啟動script；
   (2)的做法: 就是寫好再用工作排程器作定時抓資料。
   (3)的作法: 抓下來後，想辦法排序。

3. Problems:
   (1)的做法與(2)的做法:
      用自己try出來的寫法，但排程器還沒掌握到如何可以每天每小時或
      5分鐘去啟動script；或是本身用R做到這件事。

   (3)的做法:
      不確定怎麼克服 1 row by 多重columns 至 只要些specific columns in rows by
      different times

4. 希望眾前輩可以提供些function/package 的 keyword 含 concept。 非常感謝大家!

[程式範例]:

看起來好閱讀?https://hackmd.io/KwU2CMDMENQWmAZgEwGM4BZrmXcB2AThDmn2GQBNxKAGDVYYIA==# Scenario 1: for real time

library(“rjson”)
library(“RCurl”)
library(“jsonlite”)

#Set data source
url <- “https://data.lass-net.org/data/last-all-airbox.json”

#Get data from Json file
x <- fromJSON(url)

#Convert json file into tables
y <- as.data.frame(x)

#Capture Device ID= ""74DA38C7D1D2""
final_data_id <- subset(y, feeds.SiteName %in% c(“74DA38C7D1D2”))

#Write into csv file
final_data_id$Content <- NULL
date <- sprintf(""AIRBOX_%s.csv"", format(Sys.time(),""%Y%m%d%H""))
outfile = paste(""D:/"", date, sep="""")
write.table(final_data_id, file = outfile, quote = F, sep="","" , row.names = F)


# Scenario 2: for real time

library(“rjson”)
library(“RCurl”)
library(“jsonlite”)

#Set data source
url <- “https://data.lass-net.org/data/last.php?device_id=74DA38C7D1D2”

#Get data from Json file
x <- fromJSON(url)

#Convert json file into tables
y <- as.data.frame(x)

#Write into csv file
final_data_id$Content <- NULL
date <- sprintf(""AIRBOX_%s.csv"", format(Sys.time(),""%Y%m%d%H""))
outfile = paste(""D:/"", date, sep="""")
write.table(y, file = outfile, quote = F, sep="","" , row.names = F)

# Scenario 3: Posterior

library(“rjson”)
library(“RCurl”)
library(“jsonlite”)

#Set data source
url <- “https://data.lass-net.org/data/history.php?device_id=74DA38C7D1D2”

#Get data from Json file
x <- fromJSON(url)

#Convert json file into tables
y <- as.data.frame(x)

#It looks like it has thausands of columns by different times

#I don’t know how to arrange the columns by specific columes in rows by
different time

#Write into csv file
write.csv(y, “D:\final_data.csv”)


[環境敘述]:R studio[關鍵字]:選擇性，也許未來有用, Json to R, Url to R, 資料介接, Data frame, Arrange","R_Language"
"769","M.1496566538.A.B96","hotlin0709","問題","時間擷取問題",2017-06-04 16:55:36,NA,NA,"[問題類型]:
Ｒ語言的時間分類擷取


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
目前想要擷取一個12萬多筆的資料

全是同年同月份不同日的資料

有日期以及時間ex:2017-01-01 01:04:32 or 2017-01-03 15:24:44

有沒有方法可以直接擷取這一個月所有每小時的筆數

ex:00:00:00~00:59:59這區間有幾筆資料

謝謝各位不好意思

--","R_Language"
"770","M.1496556192.A.9E1","tony1331","問題","迴圈用法請教",2017-06-04 14:03:09,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

K <- data.frame(matrix(NA,20,4000))
K[,] <- data.frame(sort(table(UU[UU$cust_no2 == c,][,15]),decreasing=T))[1:20,]

我有一組向量c，是不規則的，有2000個值，一次一個帶進去會是一個20*2的資料，
所以我先把弄出20*4000的K，K[,1:2]是第一個值的結果，K[,3:4]是第二個值的結果，
感覺是要寫2個迴圈，但我試不出來，請問大家該怎麼寫?
謝謝~



--","R_Language"
"771","M.1496543149.A.515","jack155861","問題","相關爬蟲問題",2017-06-04 10:25:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:之前爬蟲都是用html網頁型態，最近遇到一個是需要先點選選單才能查詢資料的ASP網頁，如下http://fhy.wra.gov.tw/ReservoirPage_2011/StorageCapacity.aspx假設我要載：水庫>2017/6/4  像這樣的資料時，他的網址並不會跟著變動要使用怎樣的語法會比較恰當請各位指點一下~""~--","R_Language"
"772","M.1496509900.A.05F","bluecadence","問題","Re: 色碼排序成彩虹順序",2017-06-04 01:11:36,NA,NA,"大概是像這樣吧http://imgur.com/o4jLKXf接上你的資料 colorname,

rgb_color = col2rgb(colorname)
hsv_color = rgb2hsv(rgb_color)

df_hsv = data.frame()
for (n in 1:40){
    df_hsv = rbind(df_hsv, c(hsv_color[1,n],hsv_color[2,n],hsv_color[3,n]))
}
colnames(df_hsv)[1] = 'h'
colnames(df_hsv)[2] = 's'
colnames(df_hsv)[3] = 'v'

df_hsv_sort = df_hsv[with(df_hsv, order(h,s,v)), ]
rgb_sort = hsv(df_hsv_sort$h,df_hsv_sort$s,df_hsv_sort$v)

n <- as.matrix(1:40)
image(n, col = rgb_sort)※ 引述《pp61022 (fight)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: (代PO): 我有一組色碼，總共100個顏色，想要照彩虹的顏色順序排序，我一開始使用sort排序，: 但色碼命名好像並非照彩虹顏色順序命名，所以一直沒辦法排序成彩虹的順序，: 有google過但可能關鍵字下的不對, 一直沒找到類似的指引。: 不知道有沒有版友知道或處理過這樣的問題，想請教大家謝謝。: 程式碼如下，我只擷取其中40個色碼: colorname <- c(""#8CC600"", ""#FF2900"", ""#66A600"",:                ""#FF9400"", ""#002EA9"", ""#005096"",:                ""#FF2900"", ""#005893"", ""#FFFF00"",:                ""#FFD100"", ""#FFFF00"", ""#F40000"",:                ""#C90000"", ""#1F823E"", ""#E00000"",:                ""#FF4700"", ""#005494"", ""#910000"",:                ""#005893"", ""#000FBF"", ""#DBF600"",:                ""#910000"", ""#B5E700"", ""#FF9C00"",:                ""#FFBD00"", ""#FFF000"", ""#338C2D"",:                ""#DBF600"", ""#0017BB"", ""#FF8C00"",:                ""#FFB300"", ""#B50000"", ""#BF0000"",:                ""#FFE800"", ""#FFE000"", ""#529C12"",:                ""#F0FB00"", ""#D1F400"", ""#BAE900"",:                ""#E40000""): colorsort <- sort(colorname): n <- as.matrix(1:40): image(n, col = colorsort): [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): locale:: [1] C: attached base packages:: [1] tcltk     stats     graphics: [4] grDevices utils     datasets: [7] methods   base: [關鍵字]:: color: 選擇性，也許未來有用--","R_Language"
"773","M.1496505765.A.6A1","kkagt","問題","參數組合問題",2017-06-04 00:02:42,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
最近跑程式要挑參數，不過想挑的level有點多
想問如何把各個參數的level寫下來後讓R自動幫我把組合做完

例如，我的想要的參數是
trials <- c(1, 10, 40, 70, 100)
bands <- c(2, 50 , 200, 1000)
winnow <- c('T', 'F')
這樣總共40個組合, 要如何讓R幫我把這40個組合寫下

並作成一個 parameter.list，裡面是這40個組合
例如
parameter.list=list(p1.v=c(1,2,T),
                    p2.v=c(10.2,T),
                    p3.v=c(40.2,T),
                    ....... )
(或是做成data.frame比較方便?)

感謝大家....QQ


--","R_Language"
"774","M.1496495817.A.CB8","pp61022","問題","色碼排序成彩虹順序",2017-06-03 21:16:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
(代PO)

我有一組色碼，總共100個顏色，想要照彩虹的顏色順序排序，我一開始使用sort排序，
但色碼命名好像並非照彩虹顏色順序命名，所以一直沒辦法排序成彩虹的順序，
有google過但可能關鍵字下的不對, 一直沒找到類似的指引。
不知道有沒有版友知道或處理過這樣的問題，想請教大家謝謝。


程式碼如下，我只擷取其中40個色碼
colorname <- c(""#8CC600"", ""#FF2900"", ""#66A600"",
               ""#FF9400"", ""#002EA9"", ""#005096"",
               ""#FF2900"", ""#005893"", ""#FFFF00"",
               ""#FFD100"", ""#FFFF00"", ""#F40000"",
               ""#C90000"", ""#1F823E"", ""#E00000"",
               ""#FF4700"", ""#005494"", ""#910000"",
               ""#005893"", ""#000FBF"", ""#DBF600"",
               ""#910000"", ""#B5E700"", ""#FF9C00"",
               ""#FFBD00"", ""#FFF000"", ""#338C2D"",
               ""#DBF600"", ""#0017BB"", ""#FF8C00"",
               ""#FFB300"", ""#B50000"", ""#BF0000"",
               ""#FFE800"", ""#FFE000"", ""#529C12"",
               ""#F0FB00"", ""#D1F400"", ""#BAE900"",
               ""#E40000"")
colorsort <- sort(colorname)
n <- as.matrix(1:40)
image(n, col = colorsort)


[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)locale:[1] Cattached base packages:[1] tcltk     stats     graphics[4] grDevices utils     datasets[7] methods   base[關鍵字]:
color選擇性，也許未來有用--","R_Language"
"775","M.1496479462.A.0F9","ruokcnn","問題","非線性迴歸問題",2017-06-03 16:44:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手三個月(沒寫過程式，R 是我的第一次)

統計也是完全新手, 還有待高人指點

[問題敘述]:

我有一組資料, 非線性關係長這個樣子http://imgur.com/a/PCOqp估狗之後 嘗試用暴力解找出Rank^(-0.67) = 新變數Tri 跑出來R^2有0.8左右http://imgur.com/a/EQSkn但還是感覺有個什麼


把腦筋動到Sales上面


Est..Sales^(0.33) = 新變數Saless

Rank^(-0.01) = 新變數Trihttp://imgur.com/a/0CiYg跑出來平滑許多, R^2也有0.96


然後問了前輩發現原來有nls這個套建

但我嘗試把變數設進去後跑不出東西來


nls(Est..Sales ~ Rank^-a ,start = list(a=0.1) , data = JSall, trace = T)


Error in numericDeriv(form[[3L]], names(ind), env) :
  Missing value or an infinity produced when evaluating the model


想問在設parameter的時候有什麼需要注意的基本觀念或禁忌嗎?(統計觀念不足)

或是可以用其他什麼方式擬合圖一的非線性關係呢?


[環境敘述]:


R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950




關鍵字:

nls 非線性迴歸

--作者seacore07 (海角7號)看板Gossiping標題[問卦] 異性戀的男生跟女生 真的有純友誼嗎？時間Thu Dec  8 10:55:50 2016→ VVizZ: 有阿 我跟我老婆--","R_Language"
"776","M.1496375811.A.FEA","tony1331","問題","刪除資料特定一欄多個數值",2017-06-02 11:56:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

    假設從X1刪掉有 1,2,3的列,有查
    一些資料,但都是講刪掉某一列,
    請問這種該怎麼做?  謝謝~

X1 X2
   1   1
   2   3
   5   5
   2   3
   3   9
   7   5
   6   8
   3   8
   1   10

--","R_Language"
"777","M.1496327911.A.CF3","tony1331","問題","從dataframe某一欄篩選多個特定數值",2017-06-01 22:38:28,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
想從dataframe某一欄位挑選多個特定數值，挑一個我會，但挑多個試不出來，原本想說
把多個數值弄成向量，但結果是不對的，請教大家有什麼方法，謝謝~

假設
  V1  V2         假設要從V1 挑出1，2，3
   1   1
   1   2
   2   3
   2   6
   1   5
   3   8
   7   2
   7   2
   8   5
   3   3

--","R_Language"
"778","M.1496311079.A.2E3","tony1331","問題","找 2個向量重複的數字",2017-06-01 17:57:56,NA,NA,"[問題類型]:
(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
沒寫過程式，R 是我的第一次)


[問題敘述]:
我想要找2個長度不一樣的向量有重複的數字，應該滿簡單的，但試了很久好像有問題，請教大家該怎麼?



-----
Sent from JPTT on my Asus ASUS_Z012DA.

--","R_Language"
"779","M.1496215497.A.759","phil5566","問題","設限資料作圖問題?",2017-05-31 15:24:54,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我想畫一張有五位病人的圖,每位病人有一條線代表

像是這樣http://imgur.com/a/Jido6但我只會用plot把點點上

但不會用線起來

我希望病人1和2用實線連起來,實線代表uncensored的資料

病人3,4和5用虛線連起來,虛線代表有censored的資料

並且注記實線是uncensored,虛線是censored,10月是研究結束日

要怎麼把點連起來和注記,求高手教學,謝謝

[程式範例]:https://pastebin.com/xxkfw14x[環境敘述]:
R x64 3.3.1,win7

[關鍵字]:

作圖


--","R_Language"
"780","M.1496162550.A.AD2","blesslyj","問題","shiny dashboard字體",2017-05-31 00:42:28,NA,NA,"想請教各位大大shiny dashboard的sidebar，裡面的字要怎麼換顏色？
不想要是白色的><

--","R_Language"
"781","M.1496140451.A.600","ms0344303","問題","以性別比預測或觀察點餐內容",2017-05-30 18:34:08,NA,NA,"[問題類型]:程式諮詢意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:入門請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)使用者(已經有用R 做過不少作品)開發者(有撰寫R 的套件經驗)[問題敘述]:http://i.imgur.com/0KNI5Cx.jpg如這張照片所圈示 這是一份KTV點餐紀錄
本來有些餐點價格是開箱低消0元優惠的刪除了
一份單子會有很多不同食物  這資料是以食物種類建檔 每種食物就是一筆
不同的人去消費原則上是以BILLCODE去做區分

我本來是想分析性別比(男生/總人數)的差異對於點餐組成有沒有影響
後來發現性別比居然也有290幾種數值
不能以簡單長條圖或圓餅圖了
想問大家有沒有好用的套件或一些做法可以達到我的目的請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:
library(dplyr)
library(tidyr)
library(ggplot2)
library(data.table)
#讀黨 建立性別比
ticketdata1 <- fread( ""customerBehavior3.csv"", stringsAsFactors = FALSE,
header = TRUE, sep = "","",encoding=""UTF-8"" )
ticketdata1$Genderratio <- ticketdata1$MaleNumber / ticketdata1$CustomerNumber
#刪除優惠0元點單(子集合)
MealSpending.sub <-  subset(ticketdata1,MealSpending > 0, select =
StoreCode:Genderratio )

unique(MealSpending.sub$Genderratio)

grouped <- group_by(MealSpending.sub, Genderratio , MealType)
#啤酒類出現最多次
table(grouped$MealType)
目前是這樣而已  因為下一步不確定怎麼分析比較有效率張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"782","M.1496130642.A.5C4","REIDO","問題","迴圈中的指令不會直接輸出資訊？",2017-05-30 15:50:38,NA,NA,"我用for迴圈想要執行sum等指令，
for(i in 1:length(unique(size))){
  sum(size==sort(unique(size))[i])
}
這樣的結果是空白的，但直接執行
sum(size==sort(unique(size))[1])
這樣確實會有資料
後來想到先把它存到變數裡面再print
for(i in 1:length(unique(size))){
  z=sum(size==sort(unique(size))[i])
  print(z)
}
這樣就會照順序印出來了。我好奇的是for裡面無法直接顯示資料到console嗎？

[環境敘述]:
R version 3.3.2 (2016-10-31)
Rstudio 1.0.136

--
最近你的吸引力將大幅上漲，周遭的異性將慢慢的被你迷惑，慢慢的開始愛上你......。唯一美中不足的是───────那群異性中有一半以上是齧齒目，其餘的則是爬蟲類。或是你也可以換個樂觀的角度───愛上你的只有不到一半是爬蟲類，其餘都是齧齒目。--","R_Language"
"783","M.1496125328.A.93C","sonic43","問題","591爬蟲問題請教",2017-05-30 14:22:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
大家好，我想要爬591這個租屋物件實際的地理位置https://rent.591.com.tw/rent-detail-5218521.html也就是 ""25.0529842,121.4891891"" 這兩個數字
其他像是價格、坪數等等都爬得出來，唯讀這個爬不出來
請板上大家解答，謝謝

[程式範例]:
library(xml2)

url <- ""https://rent.591.com.tw/rent-detail-5218521.html""doc <- read_html(url)
xpath <- ""//div[@class='propMapBarMap']/iframe""
address <- xml_attrs(xml_find_all(doc, xpath), ""src"")

#後來研究一下，貌似這個是用iframe(javascript?)生成出來的
#所以這樣爬不出來，因此用了phantomjs這招，但還是不成功
#爬出來都沒有內容#phantomjs參考https://goo.gl/mf3kd4#請板上大家幫忙解答了，謝謝

library(rvest)

lines <- readLines(""hello.js"")
lines[1] <- paste0(""var url ='"", url ,""';"")
writeLines(lines, ""hello.js"")
system(""phantomjs hello.js"")

pg <- read_html(""1.html"")
cid <- pg %>% html_nodes(""iframe"") %>% html_attr(""src"")



[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.1

--","R_Language"
"784","M.1496065793.A.F6F","tcssh611503","問題","用R跑卡方檢定，並計算phi值",2017-05-29 21:49:50,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想利用R跑卡方檢定，並算出phi值，使用vcd library中的assocstats()計算
但跑任何卡方，跑出來Phi-Coefficient值都是NA，
但在SPSS可以跑出來是，例如下面這個可以算出是0.206


[程式範例]:

#all$newage與all$part2D_6為兩個類別變項

assocstats(table(all$newage,all$part2D_6))

執行結果:
                    X^2 df   P(> X^2)
Likelihood Ratio 20.709  4 0.00036158
Pearson          20.667  4 0.00036861Phi-Coefficient   : NAContingency Coeff.: 0.202
Cramer's V        : 0.206




[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[1] vcd_1.4-3[關鍵字]:卡方檢定vcdassocstats()--","R_Language"
"785","M.1495966256.A.D20","memorygirl","問題","被替換的項目不是替換值長度的倍數",2017-05-28 18:10:53,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要把21(列)*35(行)的array轉成735*1的矩陣

[程式範例]:data_group_1 = data_group[c(-1,-2,-3,-4),1,]data_group_2 = matrix(0, nrow=35*21, ncol=1)temp=0for(i in 1:35){temp=i-1for(j in 1:21){data_group_2[j+temp*21,1] = data_group_1[j,i]}}[環境敘述]:Error in data_group_2[j + temp * 21, 1] = data_group_1[j, i] :被替換的項目不是替換值長度的倍數*[m再麻煩高手們解答了，看不出來是哪兒有問題呀 囧rz--歡迎來到溫馨的∼怎麼走？'  '′‵>  <' '^ ^☉☉－－""@ @生活娛樂館   生活, 娛樂, 心情▽▽▽∪_▽εεLife_Plan    人生/Ｖ\ /Ｏ\ VＬ\ /Ｕ\ \Ｎ/ <Ｔ> /ＥＥ\ VＲVΣ人生規劃局→人生/理財/考試/╰  /╰  /╰  /╰  /╰  /╰   /╰   /╰Volunteer   一起來做好事！--","R_Language"
"786","M.1495902954.A.663","judyfu","問題","是缺少JRE嗎?要如何安裝?",2017-05-28 00:35:52,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)


最近才學r語言，回家嘗試做分析一開始就遇到問題了http://imgur.com/ON90ofg想說老師好像也有提到jre
就去找了一下電腦狀態http://imgur.com/Cdz4zk6在這只有看到flash
沒有看到java

就去下載，卻出現錯誤代碼1603http://imgur.com/T1ApEac看了官網的解決方法，把舊的砍掉，再重裝一次
還是一樣的情形
所以現在變成什麼java都沒有了

可是c槽有一個java資料夾一直刪不掉
但明明控制台那邊都找不到java
官網測試也找不到已安裝
不知道到底是怎麼一回事??

另外，我確定我電腦是64x
但是為什麼flash匯是32x呢?

請各位高手相救了...謝謝!



--","R_Language"
"787","M.1495876437.A.755","keeochange","問題","購物籃的物品轉換",2017-05-27 17:13:54,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

    不好意思又來拜託各位大神，昨天問了如何把購物籃轉格式後成功的跑了初次分析，
但現在又有了新的問題，由於購物籃中同一件物品的名稱不一定相同，所以跑出來
的結果非常不準確，打算再從資料上下手。

    目前的構想是利用grep把關鍵字抓出，然後重新賦值給這些資料，再回傳到原本的
資料中，

例如：

Names=grep(""台灣啤酒"",Data)   #搜尋台灣啤酒關鍵字

DataT=Data[Names,]            #取出子集

DataT$品名=1000               #將""台灣啤酒""改成代號1000


     然後我寫到這邊就卡住了，不知道該用甚麼函數將改好的資料放回原先的資料中，
這是我粗淺的想法，如果神人們有更好的作法，還煩請不吝賜教。

     謝謝大家


--","R_Language"
"788","M.1495811447.A.DC2","gary88955","問題","R 抓取Fb資料缺少",2017-05-26 23:10:45,NA,NA,"大家好 先前我嘗試用Rfacebook套件
與graph api的方法抓取某粉專資料

一開始覺得相當方便 可是細看資料 發現
每天 都會消失固定某一時段的資料
重複確認後發現該粉專明明有文章
在我爬下來的資料中卻沒有
(我也在其他粉專用相同方法嘗試過了
時間異常的規律 同樣的時間不符合)

想請問一下各位  是graph api 權限問題嗎
還是小弟我應該加什麼指令去協助呢

--","R_Language"
"789","M.1495788640.A.CDB","keeochange","問題","購物籃分析的資料整理",2017-05-26 16:50:38,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)



[程式程度]
新手(沒寫過程式，R 是我的第一次)



[問題敘述]:

各位高手大家好，現在小弟有一筆購物籃的資料

格式是這樣的

001 A
001 B
001 C
002 A
002 D
003 C
004 B
005 D

我想把這些資料轉換成以下這樣的格式

001 A,B,C
002 A,D
003 C
004 B
005 D

我不太知道要用什麼樣的函數完成這樣的格式
想麻煩各位可以提點一下用甚麼樣的函數，
不用太詳盡沒關係，剩下的我可以自己摸索，

謝謝大家，感激不盡

--","R_Language"
"790","M.1495707269.A.72A","lovedmagic","問題","用rvest抓取youtube資料",2017-05-25 18:14:27,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:小弟我最近想要抓YOUTUBE的人數與影片長短等等結構化資料來分析，無奈用rvest只能夠抓前30筆資料，我目的是想抓取所有的影片資料有試著用RCurl來抓，但是編碼的問題讓我非常困擾，請求大大指點迷津[程式範例]:pew.ytb <- read_html('https://www.youtube.com/user/PewDiePie/videos')  #讀取pewdiepie的影片ytb.nodes <-html_nodes(pew.ytb,""div.yt-lockup.clearfix.yt-lockup-video.yt-lockup-grid"") #截取影片觀看人數與發佈時間[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] XML_3.98-1.5   rvest_0.3.2    xml2_1.0.0     RCurl_1.95-4.8[5] bitops_1.0-6loaded via a namespace (and not attached):[1] httr_1.2.1    selectr_0.3-0 magrittr_1.5  R6_2.2.0      tools_3.3.2[6] curl_2.2      Rcpp_0.12.7   stringi_1.1.2 stringr_1.1.0[關鍵字]:網路爬蟲、youtube--","R_Language"
"791","M.1495700479.A.002","jackhzt","問題","利用 R 讀 mat 檔",2017-05-25 16:21:17,NA,NA,"最近要用 R 去讀 matlab 的 mat 檔，matlab 檔的內容為： n 個 cell ,每個cell 都存
一個中文字串，發現利用 R.matlab 中的 readMat 去讀取，會有以下警告訊息：在強制
變更成純量時，任何溢位值當作0來處理。
這讀取的結果會無法顯示任何中文訊息。
請問各位大大有什麼好辦法嗎？

範例:MATLAB:
test{1,1}='貓'
test{2,1}='狗'
test{3,1}='犀牛'
test{4,1}='非洲大草原'
save test.mat

R:
library(R.matlab)
 path = system.file(""mat-files"", package=""R.matlab"")
 pathname = file.path('C:\\Users\\JACK\\\Desktop','test.mat' )
 data1 = readMat(pathname)

Warning:
1: In convertUTF8(ary) : 在強制變更成純量值時，任何溢位值當作 0 來處理

output:
 """"
輸出是空的list





--","R_Language"
"792","M.1495679162.A.259","HumuHumu","問題","shiny server架好無法從外部電腦連上APP",2017-05-25 10:26:00,NA,NA,"我現在已經用VM架好一個shiny server的環境，這台VM也已經有一個實體IP

假設是140.114.1.2好了

我直接打開這台VM的瀏覽器 輸入http://140.114.1.2:8888/sample-apps/myapp/是可以正常連線到我的App

但我從其他台電腦要連線到同樣的網址時卻顯示找不到網頁

有試過關掉VM server上的防火牆，但還是沒辦法連線

求解 <(_ _)>

--","R_Language"
"793","M.1495541962.A.256","celestialgod","心得","Re: bootstrap long format",2017-05-23 20:19:18,NA,NA,"※ 引述《memphis (讓你喜歡這世界~)》之銘言：: 假設資料長這樣: ID  V1  V2: 1   10  11: 1   11  12: 1   12  13: 2   13  14: 2   14  15: 2   15  16: 3   16  17: 3   17  18: 4   18  19: 4   19  20: 先bootstrap ID: s <- sample(unique(data$ID), replace=T): 再抓資料: data2 <- data[data$ID %in% s]        #這樣就錯了:                                      #s裡是有重複的ID沒錯:                                      #可是 %in% 不會抓重複的值: 網路上查尋的的結果,是用grr:::matches: s_idx <- as.numeric(unlist(matches(s, data$ID, list=T))): data2 <- data[s_idx]: 看起來還算簡約, 只是為了一個小功能又要裝一個pkg..有點煩躁DF <- read.table(textConnection(""
ID  V1  V2
1   10  11
1   11  12
1   12  13
2   13  14
2   14  15
2   15  16
3   16  17
3   17  18
4   18  19
4   19  20""), header = TRUE)

# 簡單的方式，只是可能unique ID多一點會久一些些
lenID <- length(unique(DF$ID))
s <- sample(unique(DF$ID), replace = TRUE)
s_idx <- which(sweep(matrix(rep(DF$ID, lenID), lenID, byrow = TRUE),
                     1, t(s), `==`), arr.ind = TRUE)
DF[s_idx[ , 2], ]

# plyr 只是簡單的抓出來要的
library(plyr)
ldply(s, function(i) DF[DF$ID == i, ])

# dplyr 有點複雜Orz
library(dplyr)
library(tidyr)
DF %>% group_by(ID) %>% mutate(t = sum(s == ID[1])) %>%
  summarise_each(funs(list(rep(., times = t))), -t) %>%
  unnest

# data.table 用key加速抓取速度
library(data.table)
DT <- data.table(DF)
setkey(DT, ID)
rbindlist(lapply(s, function(i) DT[ID == i]))

# Rcpp 自幹一個matches
library(Rcpp)
sourceCpp(code = ""
#include <RcppArmadillo.h>
// [[Rcpp::depends(RcppArmadillo)]]

// [[Rcpp::export]]
SEXP bootstrapId(arma::Col<int> ID, arma::Col<int> idx) {
  arma::uvec out = find(ID == idx[0]);
  if (idx.n_elem > 1) {
    for (arma::uword i = 1; i < idx.n_elem; ++i)
      out.insert_rows(out.n_rows, find(ID == idx[i]));
  }
  if (out.n_elem == 0)
    return R_NilValue;
  return Rcpp::wrap(out);
}"")

DF[bootstrapId(DF[[""ID""]], s), ]

bootstrapId(DF[[""ID""]], c(5,5,6,6)) # NULL
--","R_Language"
"794","M.1495523074.A.34C","memphis","心得","bootstrap long format",2017-05-23 15:04:31,NA,NA,"假設資料長這樣

ID  V1  V2
1   10  11
1   11  12
1   12  13
2   13  14
2   14  15
2   15  16
3   16  17
3   17  18
4   18  19
4   19  20

先bootstrap ID
s <- sample(unique(data$ID), replace=T)

再抓資料
data2 <- data[data$ID %in% s]        #這樣就錯了
                                     #s裡是有重複的ID沒錯
                                     #可是 %in% 不會抓重複的值

網路上查尋的的結果,是用grr:::matches
s_idx <- as.numeric(unlist(matches(s, data$ID, list=T)))
data2 <- data[s_idx]


看起來還算簡約, 只是為了一個小功能又要裝一個pkg..有點煩躁



--","R_Language"
"795","M.1495442814.A.4B2","eco100","問題","清單裡面加總問題？",2017-05-22 16:46:52,NA,NA,"假設我一個list格式的資料長這樣：

[[1]]
      A C D
 [1,] 0 1 0
 [2,] 1 0 0
 [3,] 0 2 1

[[2]]
      A C D
 [1,] 0 1 1
 [2,] 1 0 0
 [3,] 1 0 1

[[3]]
      A C D
 [1,] 0 1 0
 [2,] 0 0 0
 [3,] 0 0 1

我要的很簡單，就是把清單裡面，相同index的值加總起來，結果會如下：
      A C D
 [1,] 0 3 1
 [2,] 2 0 0
 [3,] 1 2 3

我做法也很簡單，直接用for迴圈

result <- matrix(data = 0, nrow = 3, ncol = 3)
for(i in 1:3){
  result <- result + data_list[[i]]
}

我想問的是，這個除了用迴圈，還有其他函數可以用嗎？或許也需要搭配apply？
因為清單裡面可能會有上百萬或上千萬筆的資料
不知道有比較效率的方式？謝謝！

--","R_Language"
"796","M.1495270944.A.08A","qazwsx879345","問題","choose.dir()",2017-05-20 17:02:21,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

大大們安安 小弟新手

想要讀取資料夾的路徑

我想用一個action button去讀取資料夾

然後取得其路徑

原本想用eventreactive 去存路徑 但這樣會不能讀取

用observeEvent可以選路徑 但不能存值

不知道有沒有可以解決的辦法

版上只有找到一個 用downloadbutton的 但好像跟我這個又不太一樣@@

[程式範例]:

目前是用observeEvent 去用

ui.R

就在一個panel下
actionButton(""folder"", ""select folder""),

server.R

observeEvent(input$folder,
                  {
                        address<-choose.dir()
                  })

[環境敘述]:

object 'address' not found

--","R_Language"
"797","M.1495262716.A.40C","kostella","問題","新手的類別加總問題",2017-05-20 14:45:13,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]

假設資料如下
invoice country rev
1　　　　 uk 　　20
1　　　　 uk　　 15
2 　　　　hk　　 13
2　　　　 hk 　　12
3　　　　 tw　 　 9
4　　　　 uk 　　30
4 　　　　uk 　　50

每一筆資料代表一項商品的售出
而相同invoice代表位於同一訂單中
我要算出的是
「各個國家訂單的rev平均為何」

我欲先將同invoice的rev加總
再依country進行計算
爬文看到了版上高手g大提供的
tapply(as.numeric(x[,""數值""]),x[,""類別""],sum)

能將同invoice的rev加總
但卻會忽略了contury的資料
無法繼續運算下去QQ
請問有甚麼方法可以解決嗎?

謝謝版上各位高手!

--","R_Language"
"798","M.1495067621.A.B1B","hardy1127","問題","gtrendsR 不能找中文關鍵字",2017-05-18 08:33:38,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的使用gtrendsR版本1.9.9.0可以在google trends搜索英文或數字的趨勢，
但是中文就沒辦法（跑出來沒有數據結果）
[程式範例]:library(gtrendsR)library(devtools)devtools::install_github(""PMassicotte/gtrendsR"")res = gtrends(""鴻海"", geo = ""TW"",category = 07, time = ""now 1-d"") $interest_over_time[環境敘述]:作業系統MAC、Rstudio 1.0.143、R3.4.0.、gtrendsR1.9.9.0跑完gtrends之後，View(res)顯示 no data avaliable in table把鴻海改成2317就不會有這個問題。[關鍵字]:gtrensR、google trends--","R_Language"
"799","M.1494938891.A.84B","gen351199","問題","quantstrat套件 解讀orderbook疑問",2017-05-16 20:48:08,NA,NA,"[問題類型]:
程式諮詢(詢問orderbook要如何解讀)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
請教關於quantstrat套件中，
orderbook有一欄Order.Status的幾種型態各是什麼意思?
這幾種型態應是源自交易策略中rulesignal的不同參數設置
1. closed
2. replaced
3. canceled
4. rejected
(不知道還有沒有其他的，但我目前就遇過這四種)



[關鍵字]:
quantstrat
orderbook
Order.Status

--","R_Language"
"800","M.1494915856.A.90E","dorminia","問題","Rstudio Packaging wt Rcpp",2017-05-16 14:24:14,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
我用RStudio建立有Rcpp的package
但出現以下error：
collect2.exe: error: ld returned 1 exit status
查了網路上的說明解法眾說紛紜但沒一個work的
所以想來請益一下有沒有人碰過類似狀況

[程式範例]:
我試了幾組不同的程式碼狀況都一樣
所以應該不是程式碼本身的問題而是系統設定的問題？

[環境敘述]:
RStudio 1.0.143
R 3.4.0
然後我在win7和win10上都跑過了，狀況相同
( 因為網路上有找到一說是win7的問題... )

--","R_Language"
"801","M.1494675915.A.2F1","qazwsx879345","問題","button讀取資料夾",2017-05-13 19:45:12,NA,NA,"各位大大好

小弟是程式新手

只寫過簡單的C

最近因為專題需要再學習R的SHINY

現在有個問題是想要用一個ACTIONBUTTON去讀取不同的資料夾

資料夾裡面會有很多個TXT檔 要進行數據分析

因為做完分析後還會產生新的檔 所以希望能按一個BUTTON

就有RESET 重新讀那個資料夾的概念

研究一下應該是能用ACTIONBUTTON 跟ISOLATE的概念去寫

但是原本在測試的時候 都是已經寫好direction了

現在要把原本的direction刪掉

另外搭配button讀路徑要怎麼讀


--","R_Language"
"802","M.1494523058.A.AD5","f496328mm","問題","xgboost 在 python 與 r 上的差異",2017-05-12 01:17:36,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先到http://tinyurl.com/mnerchs搜尋本板舊文。

[問題類型]:
意見調查(我對R 有個很棒的想法，想問問大家的意見)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近發現 xgboost 在 R 與 python 上好像不太一樣，python的好像比較好?

所以拿 iris data 進行測試

pythonhttp://imgur.com/Z9qB7B3Rhttp://imgur.com/bu5RN3D參數都設一樣，

發現 python 的表現比較好，1 次 vs 7 次

而且 python 做出的 model 比較好，

在 best_iteration 上也有差異，

所以 python 的 xgboost 比較快也比較強?

------------------------------------------------------

單純在 iris data 上就有差異，實際做分析時，差異只會更大，

想問問各位，是我code有錯，還是真的有差異??

ps: seed 可能不同，但是不應該影響這麼多

[程式範例]:

程式碼可貼於以下網站：

[環境敘述]:
XGB 在 R 與 PYTHON 上版本都是 0.6

[關鍵字]:

--","R_Language"
"803","M.1494510281.A.472","li70534","問題","用R抓取網路資料",2017-05-11 21:44:39,NA,NA,"我想要抓取http://www.twse.com.tw/ch/trading/fund/T86/T86.php中的表格
經檢視碼確認編碼為UTF-8，但其程式碼跑出來卻是亂碼


[軟體熟悉度]:
新手(使用R3個月，有將Wush Wu的翻轉教室上過一次，知道概念)

[程式範例]:

page.html<-read.html(""http://www.twse.com.tw/ch/trading/fund/T86/T86.php"",encoding= ""UTF-8"")
version.block<-html_node(page.html,""table border='1' align='center'
style='width:1400px;' id='tbl-sortable-header"")
html_text(version.block)


【輸出成果】:> html_text(version.block)[1] ""\n\t\n    \xe5<U+960B>\xe7<U+54D0>霅<U+6867><U+9A7C>鈭斗\x98<U+731F>\x89\u0080\n\n    \n
ENGLISH\xc2i\xa0 \n       \xe6<U+9792>\xe6<U+73FB>隤<U+93DB>i\xa0\n      Twitter\n
 Facebook\n      Plurk\n    \n\n    \n      \n        蝺<U+6836>\xb8簧<U+74F1>\xe6<U+9E41>\n
     蝬脩\xab<U+24A0><U+7414>\xe5\x9c\x96\n        蝬脩\xab<U+24A1>\xb1<U+5F21><U+9614>\n        霅<U+6867><U+9A7C>蝺函
Ⅳ\n        霅<U+6867><U+9A7C>閰<U+9736>\xbd\x99\n      \n      \n        \xe7<U+705C>\xe9\x97潿x9c菝
\x8b<U+24A0>像\xe5<U+960B>\n        \xe5<U+996C>\xe9\x96<U+9E51>\xb3<U+6BB4>\xa8<U+7BD1>\xa7\u0080皜祉\xab\x99\n
       \xe5<U+8156>\xe6<U+73FB>撣<U+5F34>\xb3<U+7674><U+0113>撠\x8e\n        蝬脰楝鞈<U+6BB4>\xa8<U+7BAB>\x95<U+759F>
\xba\x97\n        \xe6\x8a<U+53A0>\xb3<U+4E50>犖\xe7<U+7F37>霅<U+54B9>雯\n        敶梢<U+802F>\xe5<U+5618>\xe6<U+8EFD>蝬
\xb2\n        蝚砌\xb8<U+6809>硅\xe8\x88<U+6867><U+0113>銝剖\xbf<U+9635>像\xe5<U+960B>\n        鞎∪\x8b<U+24A1>
\xaf<U+9BD2>\xbc<U+4FA0>暺<U+9787>\u0080\x9a\n      \n\t\t\t\n    \n\n\t\n""



--","R_Language"
"804","M.1494424518.A.35D","s3714443","問題dataframe中","data frame中 與＄的差別",2017-05-10 21:55:13,NA,NA,"各位前輩們好
小弟在這裡一問
如果有一data.frame，取名data好了，第二欄叫col2

那如果我data[,2] 跟data$col2 的差別是 前者是data.frame，後者是向量嗎？
想問前輩們這種差別是不是都要靠自己去發掘
感恩

--","R_Language"
"805","M.1494417036.A.7D9","bluecadence","問題","Re: 用R抓取八卦版",2017-05-10 19:50:31,NA,NA,"因為你沒處理 over18 的 cookie

library(RCurl)
curl <- getCurlHandle()
curlSetOpt(cookie=""over18=1"", followlocation = TRUE, curl=curl)
url <- 'https://www.ptt.cc/bbs/Gossiping/index20865.html'html <- getURL(url, curl=curl)

這樣應該就沒問題了※ 引述《iwfmf (i @#$%@#$^$%^ f)》之銘言：: : 再用R爬蟲抓取八卦版，但在getURL 時，抓取的資料為空: [程式範例]::: > url: [1] ""https://www.ptt.cc/bbs/Gossiping/index20865.html"": > html = getURL(url,ssl.verifypeer = FALSE,encoding=""UTF-8""): > html: [1] """"--","R_Language"
"806","M.1494404921.A.7DD","iwfmf","問題","用R抓取八卦版",2017-05-10 16:28:36,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的再用R爬蟲抓取八卦版，但在getURL 時，抓取的資料為空
[程式範例]:> url[1] ""https://www.ptt.cc/bbs/Gossiping/index20865.html""> html = getURL(url,ssl.verifypeer = FALSE,encoding=""UTF-8"")> html[1] """"[環境敘述]:R version 3.2.1 (2015-06-18)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] httr_1.2.1     RCurl_1.95-4.8 bitops_1.0-6   XML_3.98-1.6loaded via a namespace (and not attached):[1] R6_2.2.0    tools_3.2.1 curl_2.3[關鍵字]:選擇性，也許未來有用--","R_Language"
"807","M.1494315767.A.998","jackylikebmw","問題","r可以下載搜尋後的結果嗎?",2017-05-09 15:42:45,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
因為工作上的需求，小弟現在需要把7-11跟全家的店號搜尋下載下來

像是https://emap.pcsc.com.tw/http://www.famiport.com.tw/shop.asp然而我怎麼用都沒辦法一次鍵入多個店號，而店號檔案數量又很多(幾千筆)

像是在7-11店號裡面打975630，

我需要可以自動回傳地址:台北市大安區通化街26之8號

不知道各位大神有沒有辦法幫助我


--","R_Language"
"808","M.1494170077.A.968","LIAR","問題","mfrow或layout失去功能",2017-05-07 23:14:32,NA,NA,"我目前在UCI的資料作練習，想把多變數之間的scatter plot做出來，由於是類別資料，
很多點會重疊在一起，不曉得每個點的sample量是多是少。
所以我透過hexbin顯示成intensity視覺化看有多少sample。

library(hexbin)
par(mfrow = c(4,4))
for(i in 7:10){
  for(j in 7:10){
    plot(hexbin(d1[,i],d1[,j]))
  }
}

我要把資料中第7到第10的4個變數相互比較，但是這樣輸出的圖卻是16張單一圖，
如果把hexbin拿掉就會正常，但我就是需要hexbin，請問這要如何解決？
或是如果不用hexbin，有類似


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[環境敘述]:
R version 3.3.2 (2016-10-31) -- ""Sincere Pumpkin Patch""
Rstudio 1.0.136

--
起初，他們追殺共產主義者，我沒有說話，因為我不是共產主義者；
接著，他們追殺猶太人，我沒有說話，因為我不是猶太人；
後來，他們追殺工會成員，我沒有說話，因為我不是工會成員；
此後，他們追殺天主教徒，我沒有說話，因為我是新教教徒；
最後，他們奔我而來，卻再也沒有人站起來為我說話了。
《First They Came（他們首次來時）》，Martin Niemoller牧師（1892-1984）

--","R_Language"
"809","M.1494113321.A.8FF","sacidoO","問題","list中包含list",2017-05-07 07:28:39,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想要對多個變數進行list nested list變數的type

[程式範例]

ex.
coltype<-list (var1=list(type =""factor""),
               var2=list(type =""factor""),
               var3=list(type =""factor""),
               var4=list(type =""factor""),
               ...,
               varn=list(type =""factor""))

#但是變數一多 程式會變很長

網路上找個paste的方法 但是只是把變數儲存一個文字檔而已...

#嘗試的代碼
#m is a vector where [1]var1 [2]var2 [3]var3...
temp<-m[1:length(m)-1) #this is to paste first 1-n factor
final<-m[length(m)] #paste the final factor

#only have list if using paste function
factor_list<-list(paste(paste(temp, collapse="" = list(type= 'factor'),""),
                   paste(final,collapse="" list(type= 'factor')"")))




[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"810","M.1494074936.A.DAD","owem0410","問題","rjava的安裝問題",2017-05-06 20:48:54,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我目前想要用xlsx去讀一些檔案，所以安裝rjava但是現在卻只能在 sudo root下面才能跑。但我記得我在上一台電腦時不用想問一下是我哪裡設定有問題補上錯誤訊息(如果用sudo 開啟rstudio則不會有此錯誤)library(""rJava"", lib.loc=""/usr/lib/R/site-library"")Error : .onLoad failed in loadNamespace() for 'rJava', details:call: dyn.load(file, DLLpath = DLLpath, ...)error: 無法載入共享物件 '/usr/lib/R/site-library/rJava/libs/rJava.so' ：libjvm.so: 無法開啟共用目的檔: 沒有此一檔案或目錄錯誤: package or namespace load failed for ‘rJava’$ java -versionjava version ""1.7.0_80""Java(TM) SE Runtime Environment (build 1.7.0_80-b15)Java HotSpot(TM) 64-Bit Server VM (build 24.80-b11, mixed mode)$ sudo R CMD javareconfJava interpreter : /usr/lib/jvm/java-7-oracle/jre/bin/javaJava version     : 1.7.0_80Java home path   : /usr/lib/jvm/java-7-oracleJava compiler    : /usr/lib/jvm/java-7-oracle/bin/javacJava headers gen.: /usr/lib/jvm/java-7-oracle/bin/javahJava archive tool: /usr/lib/jvm/java-7-oracle/bin/jartrying to compile and link a JNI programdetected JNI cpp flags    : -I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/linuxdetected JNI linker flags : -L$(JAVA_HOME)/jre/lib/amd64/server -ljvmgcc -std=gnu99 -I/usr/share/R/include -DNDEBUG -I/usr/lib/jvm/java-7-oracle/include -I/usr/lib/jvm/java-7-oracle/include/linux     -fpic  -g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wdate-time -D_FORTIFY_SOURCE=2 -g  -c conftest.c -o conftest.ogcc -std=gnu99 -shared -L/usr/lib/R/lib -Wl,-Bsymbolic-functions -Wl,-z,relro -o conftest.so conftest.o -L/usr/lib/jvm/java-7-oracle/jre/lib/amd64/server -ljvm -L/usr/lib/R/lib -lRJAVA_HOME        : /usr/lib/jvm/java-7-oracleJava library path: $(JAVA_HOME)/jre/lib/amd64/serverJNI cpp flags    : -I$(JAVA_HOME)/include -I$(JAVA_HOME)/include/linuxJNI linker flags : -L$(JAVA_HOME)/jre/lib/amd64/server -ljvmUpdating Java configuration in /usr/lib/RDone.[環境敘述]:R version 3.2.3 (2015-12-10)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.2 LTS[關鍵字]:rJava安裝--","R_Language"
"811","M.1493970652.A.FAD","clansoda","問題","沒有tag的爬蟲",2017-05-05 15:50:46,NA,NA,"Hi,各位好 我之前的爬蟲都是用xpath來定位我的資料

現在我想抓這個網站https://goo.gl/a2cXFR我想抓的東西是一個藏在app.value值下頭的JSON格式裡的create_at

這個值, 只用xpath來看的話他是在script type = ""text/javascript""

這個tag下面,但這個tag下面不只一個app.value所以想請問遇到這樣的

格式該如何抓取app.value裡面的json檔案?

--","R_Language"
"812","M.1493798917.A.E42","jklkj","問題","shiny+數字辨識",2017-05-03 16:08:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我目前在嘗試手寫數字辨識，在網路上找到一個蠻有趣的比賽https://www.kaggle.com/c/digit-recognizer目前用test資料測試大概都有9成以上正確(不是很好，但我可以接受)，現在想進階在shiny上試試，我的想法是在shiny上開個手畫框格，然後把當下的手寫資料跟資料庫裡的做判斷，這是目前的想法，想實現這個想法大概需要1.在shiny開個28*28的手寫框2.將手寫框的資料轉成每格的灰階值3.用這個值去比對train資料[程式範例]:目前不知道shiny有沒有可以做手寫框的功能，如果沒有，是否有替代方案可以推薦感謝[環境敘述]:R version 3.3.3 (2017-03-06)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RPostgreSQL_0.4-1 DBI_0.6loaded via a namespace (and not attached):[1] drat_0.1.2  tools_3.3.3[關鍵字]:手寫、cnn、辨識--","R_Language"
"813","M.1493794193.A.5EA","strp","問題","可靠度分析求 tp 值",2017-05-03 14:49:50,NA,NA,"[問題類型]:

程式諮詢(我想用 R 做某件事情，程式已經寫完了！但有一小部分覺得很奇怪)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

我的目的是利用 for 迴圈，找出符合設定式子的 tp 值
p 可以是 0.01, 0.05, 0.1, 0.5，所以會有 t0.01, t0.05, t0.1, t0.5 四個結果
因為只有 t0.5 的部分會出問題，所以以下僅針對 t0.5 來做書寫



式子如下：
(其中 q, a, b 均為 MLE，且為已知)


tp0.5 <- NULL

for (tp in 1:1400000) {
   if ( abs( pgamma(q, a*(tp*0.0000001)^b, rate = 1) -0.5 ) <= 0.000001 ) {
      tp0.5 <- tp*0.0000001
   }
}



tp 會設計成這樣，主要是把區間割的細一點，讓 pgamma 的值逐漸變大
大到與 0.5 的誤差小於等於 0.000001 時，輸出該 tp*0.0000001 值
就可以算出 t0.5 了！



以上單獨的求法是不會有問題的，可以算出 t0.5
但我真正想求的，是透過 1000 次 Bootstrap，來得到 t0.5 的信賴區間



每一次 Bootstrap 的步驟如下

Step1：用真實資料的 MLE 去生成一筆資料 (其中 MLE 已知)
Step2：再利用 Step1 生成的資料，透過我的模型，去估計 MLE*
Step3：利用 Step2 的 MLE* 去算 t0.5 (然後蓋到迴圈外的 NULL 向量去)

所以當 Bootstrap 跑完後，會得到 1000 個 t0.5
使用的程式與以上範例相同，僅修改迴圈內的名稱而已


但是！！！
最後發現...這 1000 個 t0.5 裡面，有些值是 NA (大約有 62 個)
也就是，那幾次迴圈內，並沒有求出 t0.5



我有將這些產生 NA 的 MLE* 抓出來看，都沒有問題，都有值
然後再利用這些 MLE* 重新在用上面提供的程式去計算 t0.5，發現還是求不出來


但奇怪的是，如果我不用迴圈條件去逼近 t0.5，而是單純直接給定 tp
卻都算得出來，因為我們想要的 t0.5 會在 0.11~0.13 之間
這區間內大大小小的值我都給過了，都滿 ok 的

但是在 Bootstrap 迴圈下就是求不出來！這讓我匪夷所思



[程式範例]:

如同以上例子提供，只是該程式會放在 Bootstrap 迴圈內


[環境敘述]:

與此問題無關


[關鍵字]:

tp, t0.5, Bootstrap, MLE




再麻煩各位版友抽空解惑，萬分感謝。

--","R_Language"
"814","M.1493738339.A.951","celestialgod","問題","Re: 繪製事件圖",2017-05-02 23:18:56,NA,NA,"※ 引述《Neisseria (Neisseria)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::: 現在有一個亂數程式，每次會從 1 至 48 中任意挑選不重覆的六個數字: 我們假設我們選了 100 次，程式如下：: mx <- NULL: for (i in 1:100) { mx <- rbind(mx, sample(1:48, 6, replace = FALSE))}: df <- NULL: for (i in 1:dim(mx)[1]) {:   col <- NULL:   for (j in 1:48) {:     if (any(mx[i, ] %in% j)) {:       col <- cbind(col, j):     } else {:       col <- cbind(col, NA):     }:   }:   df <- rbind(df, col): }: 我現在想畫以下的圖：: 48 |: 47 |         ---       ------: 46 |: ...:  5 |    --------:  4 |:  3 |:  2 | -----:  1 |       ---:     ---------------... -------:      1 2 3 4 5 6 7      99 100: 簡單地說，若該數字出現，則畫水平線，若未出現，則不畫線: 如果各位覺得這整個事件很像某個生活中發生的事，那純屬巧合 XD:: [程式範例]::: 本來想用 ggplot 畫，但現在已經不要求了，有圖就好: 如果有一些比較基本的繪圖函式，可以自行組合也不錯: 因為 R 的函數包得太好了，要自已畫一些其他類型的圖反而不知怎麼畫:: [環境敘述]::: 對本題無明顯幫助:: [關鍵字]::

程式兩行，先看圖吧：http://imgur.com/a/GlBVXcode:

m <- replicate(100, sample(48, 6))
matplot(1:100, t(m), pch = ""_"", col = 1)

ggplot:

圖：http://imgur.com/a/GXvxIlibrary(ggplot2)
DF <- data.frame(x = rep(1:100, each = 6), y = as.vector(m))
ggplot(DF, aes(x, y)) + geom_point(pch = ""_"")

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"815","M.1493738014.A.1F4","Neisseria","問題","繪製事件圖",2017-05-02 23:13:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:現在有一個亂數程式，每次會從 1 至 48 中任意挑選不重覆的六個數字我們假設我們選了 100 次，程式如下：mx <- NULLfor (i in 1:100) { mx <- rbind(mx, sample(1:48, 6, replace = FALSE))}df <- NULLfor (i in 1:dim(mx)[1]) {col <- NULLfor (j in 1:48) {if (any(mx[i, ] %in% j)) {col <- cbind(col, j)} else {col <- cbind(col, NA)}}df <- rbind(df, col)}我現在想畫以下的圖：48 |47 |         ---       ------46 |...5 |    --------4 |3 |2 | -----1 |       ------------------... -------1 2 3 4 5 6 7      99 100簡單地說，若該數字出現，則畫水平線，若未出現，則不畫線如果各位覺得這整個事件很像某個生活中發生的事，那純屬巧合 XD[程式範例]:本來想用 ggplot 畫，但現在已經不要求了，有圖就好如果有一些比較基本的繪圖函式，可以自行組合也不錯因為 R 的函數包得太好了，要自已畫一些其他類型的圖反而不知怎麼畫[環境敘述]:對本題無明顯幫助[關鍵字]:



--","R_Language"
"816","M.1493737909.A.C01","celestialgod","問題","Re: 下載網頁連結檔案",2017-05-02 23:11:45,NA,NA,"※ 引述《l111011 (Mr.Pickles)》之銘言：: 我原本是要從  https://itouch.cycu.edu.tw/active_system/CourseQuerySystem/: 取表格 , 但是 R 的讀XML的函式貌似沒辦法讀這種動態網頁: http://i.imgur.com/cmIYmjh.png: 所以我改去嘗試下載上圖的連結: 看了一下F12 , 要下載這個連結似乎要用HTTR中的POST: 參考了  http://leoluyi.logdown.com/posts/406397-crawler-mops-2: 的方法: 但是: http://i.imgur.com/sBuTzm9.png: 這個連結直接把上一頁資料塞在From data 給他轉成xls: 看起來要用httr下載此連結應該不行(要傳上一頁資料): 請問有什麼方法library(httr)
library(pipeR)

url <-
 ""https://itouch.cycu.edu.tw/active_system/CourseQuerySystem/GetCourses.jsp""courseInfo <- POST(url, query = list(yearTerm = 1052)) %>>% content(""text"")
x <- strsplit(strsplit(courseInfo, ""@@"")[[1]], split = ""|"", fixed = TRUE)
do.call(rbind, x[-1])

結果圖：http://imgur.com/a/jZvHNurl是從開發者工具找到的，找到這個連結就可以全部抓下來了

(http://imgur.com/a/XyiMf)

然後給不同yearTerm就可得到不同學年的資料

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"817","M.1493734420.A.45E","l111011","問題","Re: 下載網頁連結檔案",2017-05-02 22:13:36,NA,NA,"我原本是要從https://itouch.cycu.edu.tw/active_system/CourseQuerySystem/取表格 , 但是 R 的讀XML的函式貌似沒辦法讀這種動態網頁http://i.imgur.com/cmIYmjh.png所以我改去嘗試下載上圖的連結

看了一下F12 , 要下載這個連結似乎要用HTTR中的POST

參考了http://leoluyi.logdown.com/posts/406397-crawler-mops-2的方法

但是http://i.imgur.com/sBuTzm9.png這個連結直接把上一頁資料塞在From data 給他轉成xls

看起來要用httr下載此連結應該不行(要傳上一頁資料)

請問有什麼方法

--","R_Language"
"818","M.1493710846.A.3D1","a199253","問題","Error 指令的應用",2017-05-02 15:40:43,NA,NA,"-問題:Error指令在混合隨機模型和巢狀隨機模型的應用或是有相關的書籍可以推薦[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

利用因子設計做aov有些F值是錯誤，所以想用Error指令來做出正確的分析表

網路上找不太到相關的東西












--","R_Language"
"819","M.1493665625.A.74F","boomhush","問題","類神經網路誤差收斂圖與相對重要變數",2017-05-02 03:07:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我已使用過neuralnet與RSNNS跑出網路，
請問誤差收斂圖,相對重要權重,confusion matrix該怎麼做呢？
P.s 不好意思，我是新手如有表達不好的地方請見諒，謝謝


資料：20個輸入神經元(類別型資料),2個輸出神經元(連續型資料)

誤差收斂圖
neuralnet-->爬不到文
RSNNS-->有跑出來，但是輸出層資料需將連續轉類別，而我的類別分成四種，
跑模型時會被分出四個輸出神經元，期望可用原本型態分析，若neuralnet
或是nnet真的無法滿足需求才使用RSNNS

相對重要權重
NeuralnetTool--> garson只能對一個輸出神經元的模型才可以分析

confusion matrix
neuralnet-->國內外網站都找，但爬不到文
RSNNS-->一開始可以，但分析幾次後突然出現錯誤，爬了文但依舊無法解決

[程式範例]:

neuralnet-->https://goo.gl/8eUDEdRSNNS-->https://goo.gl/Xn3Xiz[環境敘述]:
macOS Sierraa 10.12.4/R 3.3.2

[關鍵字]:
類神經網路

--","R_Language"
"820","M.1493643136.A.8EA","lichungtsai","問題","擷取資料的問題",2017-05-01 20:52:13,NA,NA,"請問一下

假設我有一個data.frame

其中一個column是各種app的名字

我想要找出整個column到底有哪些app

也就是說把這個column所有的字串

只取不同的各一個

我要使用哪個函式？

--
Sent from my Windows

--","R_Language"
"821","M.1493620229.A.B6A","pig98520","問題","R中文出現 Warning Message",2017-05-01 14:30:25,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位前輩大家好，最近剛接觸R語言，在我的Win10上安裝，只要有寫到中文，
就會出現以下的錯誤訊息:
In strsplit(code, ""\n"", fixed = TRUE) :
  input string 1 is invalid in this locale
找過網路上的解法，更改encodeing也沒有用，似乎很多班上同學也都是相同問題。
請問有人有相同經驗可以解答嗎?

[程式範例]:
只要涉及到中文都或有類似問題

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] readr_1.1.0

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.9     digest_0.6.12   rprojroot_1.2   assertthat_0.1  R6_2.2.0

 [6] backports_1.0.5 magrittr_1.5    evaluate_0.10   stringi_1.1.2
rmarkdown_1.3
[11] tools_3.3.2     stringr_1.2.0   hms_0.3         rsconnect_0.7
yaml_2.1.14
[16] htmltools_0.3.5 knitr_1.15.1    tibble_1.2

--","R_Language"
"822","M.1493569413.A.D0F","l111011","問題","下載網頁連結檔案",2017-05-01 00:23:30,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
  下載連結為.JSP , download.file沒辦法用 ,想請問有其他方法能下載嗎?


[關鍵字]:選擇性，也許未來有用--","R_Language"
"823","M.1493469201.A.557","celestialgod","問題","Re: 資料處理速率緩慢",2017-04-29 20:33:17,NA,NA,"※ 引述《tan800630 (天ㄦ)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]::: 使用者(已經有用R 做過不少作品): [問題敘述]::: 各位版上的前輩好，最近自己在玩臉書粉絲專頁的資料，目前想要統計: 某段時間的Po文中總共有哪些人按讚，每人的按讚次數，以及Po文時間，: 目前已經先將粉絲專頁(柯文哲 哈)某一段時間的po文都抓下來並存成RData檔案，: #直接抓getPost()的資料存進去: 目前希望將檔案整理成 ""ID"",""最早按讚文章日期"",""最後按讚文章日期"",""總共按讚次數"": 的格式，目前使用的方式仍然是用迴圈逐次讀取每一個檔案並且記錄按讚者的: 相關內容(我知道迴圈效率很低O_Q   自己嘗試使用apply系列但失敗): 然而由於按讚者眾多，目前照著我預設的方式會跑非常久，因此想請教各位有沒有: 甚麼建議可以讓整個程式的處理效率更快速: 再麻煩各位前輩指教~~~~~:: [程式範例]::: 程式碼: https://pastebin.com/e9WY2AjD: 範例檔案下載處(放了三篇文章的檔案，請參考): http://doora.qiniudn.com/lH2Z7.rar:: [環境敘述]::: R version 3.3.2 (2016-10-31): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 8.1 x64 (build 9600): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] Rfacebook_0.6.12 httpuv_1.3.3     rjson_0.2.15     httr_1.2.1: loaded via a namespace (and not attached):: [1] R6_2.2.0    tools_3.3.2 Rcpp_0.12.9:: [關鍵字]::: 迴圈後面有R code，不過我先說，我建議這種資料直接存到資料庫

一個表存POST，一個表存Like，一個表存Comment

每一個POST都存一個POST ID，Like跟Comment表再存的時候也要記得給一個post id

然後用SQL就可以輕鬆串出你要的結果了：

select b.from_id user_id, min(a.post_time) first_like,
  max(a.post_time) last_like, count(a.post_time) count_like
  from post_table a, like_table b
where 1=1
  and a.post_id = b.post_id
group by b.from_id

但是要用R做的話大概是這樣：

library(pipeR)
library(data.table)
library(lubridate)

postDT <- lapply(list.files(""lH2Z7"", full.names = TRUE), function(fn){
  load(fn)
  data.table(post_time = parse_date_time(substring(post$post$created_time,
                                         1, 19), ""ymd HMS""), post$likes)
}) %>>% rbindlist


outDT <- list(
  dcast(postDT, from_id + from_name ~ 1, min, value.var = ""post_time"") %>>%
    setnames(""."", ""first""),
  dcast(postDT, from_id + from_name ~ 1, max, value.var = ""post_time"") %>>%
    setnames(""."", ""last""),
  dcast(postDT, from_id + from_name ~ 1, length, value.var = ""post_time"") %>>%
    setnames(""."", ""count"")
) %>>%
  Reduce(f = function(x, y) merge(x, y, by = c(""from_id"", ""from_name"")))

# 結果：
#             from_id  from_name               first                last count
# 1: 1000352350101347     王相現 2017-04-11 12:06:46 2017-04-13 14:31:01     3
# 2: 1000365193433309 Erica Wang 2017-04-13 14:31:01 2017-04-13 14:31:01     1
# 3: 1000465496719965     陳健男 2017-04-12 11:00:15 2017-04-12 11:00:15     1
# 4: 1001166286680917 Jolie Liaw 2017-04-12 11:00:15 2017-04-12 11:00:15     1
# 5: 1001188363348018     翁茂翔 2017-04-12 11:00:15 2017-04-13 14:31:01     2

dcast一定要吃到global environment宣告的函數(攤手

所以我就乖乖寫了，沒有用lapply配合assign宣告到.GlobalEnv

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"824","M.1493362082.A.F80","tan800630","問題","資料處理速率緩慢",2017-04-28 14:47:58,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:各位版上的前輩好，最近自己在玩臉書粉絲專頁的資料，目前想要統計某段時間的Po文中總共有哪些人按讚，每人的按讚次數，以及Po文時間，目前已經先將粉絲專頁(柯文哲 哈)某一段時間的po文都抓下來並存成RData檔案，#直接抓getPost()的資料存進去目前希望將檔案整理成 ""ID"",""最早按讚文章日期"",""最後按讚文章日期"",""總共按讚次數""的格式，目前使用的方式仍然是用迴圈逐次讀取每一個檔案並且記錄按讚者的相關內容(我知道迴圈效率很低O_Q   自己嘗試使用apply系列但失敗)然而由於按讚者眾多，目前照著我預設的方式會跑非常久，因此想請教各位有沒有甚麼建議可以讓整個程式的處理效率更快速再麻煩各位前輩指教~~~~~[程式範例]:程式碼https://pastebin.com/e9WY2AjD範例檔案下載處(放了三篇文章的檔案，請參考)http://doora.qiniudn.com/lH2Z7.rar[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 8.1 x64 (build 9600)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] Rfacebook_0.6.12 httpuv_1.3.3     rjson_0.2.15     httr_1.2.1loaded via a namespace (and not attached):[1] R6_2.2.0    tools_3.3.2 Rcpp_0.12.9[關鍵字]:迴圈--","R_Language"
"825","M.1493212736.A.452","lichungtsai","問題","R匯入xlsx中文問題",2017-04-26 21:18:54,NA,NA,"各位大家好

想請教一個R匯入xlsx但媕Y有中文的問題
=====================================================
其中有幾個限制：

1.原始的raw data在單一.xlsx中有許多個sheet，所以希望能使用一些能直接讀取xlsx的packages來讀取，盡量不要手動轉csv檔

2.原始的raw data參雜簡體中文、繁體中文，所以那個packages希望有可以做encoding = UTF-8或Big5之類的函式
=====================================================
那麼我目前試過了三種方法：

第一個：
dtn <- 'launcher_data_2017-01-10-2017-01-17.xlsx'
library(readxl)
launcher_data_2017_01_10_2017_01_17 <- read_xlsx(dtn, sheet = 2)

不過因為這個package他沒辦法使用encoding = 'UTF-8'之類的函式，所以資料呈現亂碼狀態
=====================================================
第二個：
dtn <- 'launcher_data_2017-01-10-2017-01-17.xlsx'
library(openxlsx)
app_1 <- read.xlsx(dtn, sheet = 1)

不過因為這個package他也沒辦法使用encoding = 'UTF-8'之類的函式，所以資料也呈現亂碼狀態
=====================================================
第三個：
options(java.parameters = ""-Xmx8000m"")
dtn <- 'launcher_data_2017-01-10-2017-01-17.xlsx'
library(xlsx)
app_1 <- read.xlsx(dtn, sheetIndex = 1, encoding = 'UTF-8')

我已經用第一行增加記憶體
但依然出現了
Error in .jcall(""RJavaTools"", ""Ljava/lang/Object;"", ""invokeMethod"", cl,  :
  java.lang.OutOfMemoryError: GC overhead limit exceeded

似乎是記憶體不足的問題
=====================================================
第四個：（我最不希望的手動轉csv）
app_1 <- read.csv('launcher_data_2017-01-10-2017-01-17.csv', encoding = 'UTF-8')

出現了
Error in type.convert(data[[i]], as.is = as.is[i], dec = dec, numerals = numerals,  :
  invalid multibyte string at '<e6><9c><ac>?啣<ba>'

我到現在還不懂這代表什麼
總之就是似乎就算手動轉csv檔，再用encoding = 'UTF-8'也是不可行
=====================================================
不曉得這要怎麼解決？


--
Sent from my Windows

--","R_Language"
"826","M.1493193465.A.B77","goodwebb","問題","日期計算問題",2017-04-26 15:57:42,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請問大家知道怎麼算出某日期是這個月的第幾周嗎EX:2017-04-26是4月第五周[程式範例]:知道有一個套件timeDate裡面沒有看到--","R_Language"
"827","M.1493139483.A.5BF","pk790127","問題","glm跑logistic",2017-04-26 00:58:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:當我使用glm套件中邏輯式迴歸(y為二元變數""binomial"")時
modle <-glm(model1, family = ""binomial"" ,data = train )

跑出警告訊息
Warning messages:
1: glm.fit: algorithm did not converge
2: glm.fit: fitted probabilities numerically 0 or 1 occurred

上網搜尋了一下解法... 得出https://goo.gl/aNHEtU1.用 bayesglm 在arm這個套件
modle <-bayesglm(model1, family = ""binomial"" ,data = train )

2.用 glmnet套件
modle1 <-glmnet(x=as.matrix(train[,-c(1,26)]) ,y=train[,1] ,family =
""binomial"" )

兩個作法都可以跑,也可以預測,但是想知道原先glm的錯誤原因是什麼
train跟test資料應該都沒問題 y是二元的數值型態 x有連續也有二元都是數值型態

另外在glmnet預測中 s這個值不填的話欄位很奇怪,看解釋是指懲罰參數,但我原先的
logistic沒有lamba參數阿..

glm_result <-predict(modle1, s=0.01, as.matrix(test[, -c(1,26)]),
type=""response"")

這些問題可能是我方法論不熟悉,但請有使用過這些套件的前輩們提點一下
謝謝~



--","R_Language"
"828","M.1493129627.A.C25","psinqoo","問題","Re: Rwordseg自定義詞庫",2017-04-25 22:13:43,NA,NA,"借標題一下

新的中文 文字採礦 packagehttps://github.com/taiyun/chinese.misc可以研究看看※ 引述《dustnight (一起做個有溫度的人)》之銘言：: [問題類型]:程式諮詢: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 最近在做text mining的練習，由於斷詞的過程需要考量一些專有名詞，: 因此採用Rwordseg進行斷詞，斷詞的過程當中，會遇到安裝詞典/或是使用自定義詞典: 的狀況，產生了一些問題想來請問前輩們。: 1. 在使用installDict時，想安裝NTUSD的資料辭典，使用以下指令：: installDict(file.choose(),""positive"",dicttype=""text""): 但是安裝後卻出現: 1 words were loaded! ... New dictionary 'positive' was installed!: There were 50 or more warnings (use warnings() to see the first 50): Warning messages:: 1: In readLines(dictpath, encoding = dic.enc) ::   line 1 appears to contain an embedded nul: 等問題，看起來是有安裝成功但是點進去dic檔案裡面看卻發現只有一個詞彙(原本txt檔案: 想來請問各位前輩們是否有遇到過類似問題，又該怎麼解決？: 2.: 在自定義詞庫時，我用insertwords(""畢業證書"",save=T)來增加畢業證書這個詞彙: 但是在segmentCN(""自己的畢業證書自己撿"")做測試時，卻仍然會有: [1] ""自己"" ""的""   ""畢業"" ""證書"" ""自己"" ""撿"": 的狀況,（反而結巴還會斷出畢業證書...): 是我沒有增加詞庫成功嗎？: 3.: 目前不使用結巴的原因在於不確定結巴是否可以自行增加詞庫: [環境敘述]:: R version 3.3.3 (2017-03-06): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X El Capitan 10.11.6: locale:: [1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages::  [1] igraph_1.0.1       wordcloud_2.5      RColorBrewer_1.1-2 Rwordseg_0.2-1:  [5] jiebaR_0.9.1       jiebaRD_0.1        rJava_0.9-8        tm_0.7-1:  [9] NLP_0.1-9          tmcn_0.1-4: loaded via a namespace (and not attached):: [1] magrittr_1.5   parallel_3.3.3 tools_3.3.3    Rcpp_0.12.7    slam_0.1-38: [關鍵字]:: text mining, Rwordseg--







--","R_Language"
"829","M.1493122806.A.843","celestialgod","問題","Re: 關於資料處理",2017-04-25 20:20:02,NA,NA,"※ 引述《AaronHicks ( )》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有一筆屬性是data table的資料: 裡面記錄顧客的消費明細: 格式是這樣:       購買物品   數量: 客人A     蔬菜      1: 客人A     雞肉      2: 客人B     水果      2: 客人B     牛肉      1: 我想把他換成下面這個形式:           蔬菜   水果   雞肉   牛肉: 客人A        1      0      2      0: 客人B        0      2      0      1: 有嘗試用tidyr裡面的spread來轉置: 但會變成:           蔬菜   水果   雞肉   牛肉: 客人A        1      0      0      0: 客人A        0      0      2      0: 請問有什麼方法可以讓客人不重複?library(dplyr)
library(tidyr)

DF <- read.table(textConnection(""
客人 購買物品 數量
客人A 蔬菜 1
客人A 雞肉 2
客人B 水果 2
客人B 牛肉 1  ""), header = TRUE)

spread(DF, 購買物品, 數量, fill = 0)
#    客人 水果 牛肉 蔬菜 雞肉
# 1 客人A    0    0    1    2
# 2 客人B    2    1    0    0


客人當成一個column就可以了~~~

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"830","M.1493115109.A.2E3","AaronHicks","問題","關於資料處理",2017-04-25 18:11:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我有一筆屬性是data table的資料裡面記錄顧客的消費明細格式是這樣購買物品   數量客人A     蔬菜      1客人A     雞肉      2客人B     水果      2客人B     牛肉      1我想把他換成下面這個形式蔬菜   水果   雞肉   牛肉客人A        1      0      2      0客人B        0      2      0      1有嘗試用tidyr裡面的spread來轉置但會變成蔬菜   水果   雞肉   牛肉客人A        1      0      0      0客人A        0      0      2      0請問有什麼方法可以讓客人不重複?--","R_Language"
"831","M.1493090106.A.561","eco100","問題","%>%可以配合if判斷邏輯使用嗎",2017-04-25 11:15:03,NA,NA,"舉個例子 我有兩個字串

x <- c(""ABACE"", ""CATEBA"")

目的想統計出每個字母出現的次數

count <- do.call(""paste"",list(x, collapse=""""))
       %>% strsplit(split="""") %>% table()

在%>%的過程中，我想把T這個字母忽略不計，可以用if來做判斷嗎？
還是有其他方式？

謝謝

--","R_Language"
"832","M.1493048017.A.1F3","martin12345m","問題","更改資料中的日期",2017-04-24 23:33:34,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

收集了一份統計資料，需要做生存統計時才發現""最後追蹤日期""沒有壓在固定的底限，

所以想利用R直接幫我改，讓超過特定日期(我想選2016/8/31)之後的日期都直接改成這個

特定日期。目前想到的是搭配ifelse和lubridate裡的函數來寫，但是一直寫不出來。



[程式範例]:https://pastebin.com/Zc7C9aZh很嫩的寫法，完全是生手，請多包涵


[環境敘述]:
R studio Version 1.0.136

[關鍵字]:

Date，duration，lubridate

--","R_Language"
"833","M.1493035482.A.99A","cchdanny","問題","資料utc 時間轉換及每三筆資料取一筆",2017-04-24 20:04:39,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我手上有個資料庫，資料<U+5185>容是 1303132929 224.19 1303132930 225.57
1303132931 222.74 ...（UTC及數據）
我使用
M <-read.table(file = ""channel.dat"", header = F, col.names = c(time,value))

在view M,是可以看到 1561660 obs. of 2 variables

我想用 newM <- as.matrix(seq(1, nrow(M), by =3))來進行每三筆資料取一筆資料。

可是，出來是large matrix (520554 element, 4 Mb),我想要的table不見了，請問我的
coding有什<U+9EBD>問題？

第二， 我想要把資料庫堶悸摻TC轉換成%y%m%d %h:%m, 請教一下，如何使用as.POSIXlt
來轉換，還是有更好的coding?


[環境敘述]:
Win 10, R 3.3.3 RStudio 1.0.136

--","R_Language"
"834","M.1493029770.A.C70","HumuHumu","問題","plot 的mfrow參數 起始點位置",2017-04-24 18:29:27,NA,NA,"我想請問一下 在開始繪圖前使用par(mfrow=c(3,1))或是使用

layout()參數來畫圖時

有沒有辦法指定開始畫圖的起始點，譬如說我用

layout(matrix(1:4,2,2))

plot(1)

plot(2)

plot(3)

plot(4)

他會從我的矩陣左上角開始畫圖

順序如下

1 3

2 4

但我想要從右下角開始畫

2 4

3 1

有辦法做到這樣嗎?

--","R_Language"
"835","M.1493025447.A.C0B","blue1232","問題","R非常態轉換常態",2017-04-24 17:17:24,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
大大好，小弟有一筆成績的資料，常態檢定後發現不是常態，屬於左偏的資料，因此，問
過別人說要用log轉換資料，再做檢定，但是轉完之後，用常態檢定就出現錯誤。感謝大
大

[程式範例]:

ad.test(goals). #有44328筆

錯誤訊息：Error in if (AA <0.2) {：missing value where TRUE/FALSE needed

[關鍵字]:選擇性，也許未來有用--","R_Language"
"836","M.1492942591.A.C0A","gen351199","問題","R locale問題",2017-04-23 18:16:29,NA,NA,"[問題類型]:
效能諮詢(R locale設定)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
請問該如何設定R的語系?(已爬文 但仍無法解決)
以下列出幾個我目前遇到文題的狀況:

1. 每次開啟R都會出現
Warning message:
In Sys.setlocale(category = ""LC_ALL"", locale = ""zh_TW.UTF-8"") :
  OS reports request to set locale to ""zh_TW.UTF-8"" cannot be honored
Error: 4:26: unexpected symbol
4: Sys.setlocale(""locale = ""zh_TW.UTF
                             ^

2. 常常打沒幾個code就會跳出一個警告視窗，內容全是亂碼
所以常常就是 打code>跳出警告視窗>關掉>打code>跳出......

3. 無法匯出Rnotebook(無論內容有無中文)

4.檔名路徑有中文就會顯示亂碼
----------------------------------------
我記得在R3.3.2以前 中文都能正常運行，
頂多有時候要去案一下 file>Reopen with Encoding
但是自從安裝R3.3.3後就出現這些狀況。


[環境敘述]:
>sessionInfo()
R version 3.4.0 (2017-04-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] htmltab_0.7.1   installr_0.19.0 stringr_1.2.0

loaded via a namespace (and not attached):
[1] httr_1.2.1     compiler_3.3.3 R6_2.2.0       magrittr_1.5   tools_3.3.3
 curl_2.5       stringi_1.1.5  XML_3.98-1.6

--","R_Language"
"837","M.1492938702.A.203","Wush978","心得","Regular Expression",2017-04-23 17:11:36,NA,NA,"[關鍵字]: 字串處理、正則表示式

[重點摘要]:

以下是我發在R語言翻轉教室中介紹「正則表示式」的原始Rmd檔案。

好讀板歡迎到網站上觀看:http://datascienceandr.org/articles/RegularExpression.html另外我想強調：裡面只簡單介紹我常用、熟悉的功能，不是全部的正則表示式的功能。

---

# 前言

正則表示式（Regular Expression）是我們在處理純文字資料時，幾乎可以解決所有問題
的技術。
R 語言有內建許多與正則表示式相關的函數，不需要安裝套件即可使用。
這篇文章想要跟各位同學介紹我自己很常使用的一些正則表示式的函數。


## 什麼是正則表示式？

正則表示式是一種描述文字模式的語言。
它不是單純依照應用歸納出來的工具，背後具有相當的數學基礎。
正則表示式的誕生，來自於美國數學家Stephen Cole Kleene在超過半個世紀之前的研究
成果：@Kleene56。
目前各種程式語言中，幾乎都內建正則表示式，但是他們的語法主要分成兩個派系：

- 一種語法出自於電機電子工程師學會(IEEE)制定的標準
- 一種語法，則來自於另一個程式語言：Perl

正則表示是可以讓我們撰寫程式來自文字中比對、取代甚至是抽取各種資訊。以下我們將
從簡單的應用開始介紹。

# R 語言中的正則表示式

這篇文章中，我不會介紹全部與正則表示式相關的函數與功能。
以下我介紹的這些函數，目前已經足夠我解決了許多工作上的問題了。
學習技術的目的應該還是聚焦在解決問題上，所以只要能學會一個汎用的功能，比學會每
個功能都介紹。
因此我沒介紹的功能，就再請同學們有興趣再去自行補足。

## 比對

我們回到翻轉教室中02-RDataEngineer-05-Data-Manipulation的一個問題：我們想要檢
查飛機的尾翼號碼上有AA的資料，是不是剛好都是美國航空（carrier資料也會是AA）的
問題。
那時候我們請同學使用的函數：`grepl`就是R 之中使用正則表示式做比對的函數。

```{r, echo = FALSE}
args(grepl)
```

在大部分的狀況，我們把要搜尋的文字規則放到`grepl`的第一個參數，也就是`pattern`
參數之中。
在這裡的例子，就是`""AA""`。
接著把被搜尋的文字放到`grepl`的第二個參數，也就是`x`參數。
在這裡的例子，是`flights$tailnum`
接著，`grepl`就會告訴我們，每一個`flights$tailnum`的字串是不是有包含`""AA""`。
舉例來說，`flights$tailnum`的前六個元素的結果依序是：`r head(grepl(""AA"",
flights$tailnum))`
我們可以看一下資料中的`tailnum`：

```{r}
head(flights$tailnum)
```

確實，只有第三個元素`r inline.print.string(flights$tailnum[3])`有包含`""AA""`。
更廣泛的來說，這裡的`pattern`參數，就是一個正則表示式的語言。
R 會先把`""AA""`解析乘要比對的內容，並且一一比對參數`x`的元素。
如果比對成功，對應的答案就會是`TRUE`。
反之，則會是`FALSE`。

剛好在這個例子，`""AA""`對正則表示式來說，就是簡單的比對這個字串中有沒有連續兩個
`""A""`。
這樣子的功能，同學在Word中也能透過CTRL+F等搜尋功能達成。
但是正則表示式只有這麼簡單嘛？

## 開頭或結尾

在正則表示式中，我們可以指定模式出現的位置是不是在文字的開頭或結尾。
這裡我們拿一個與`grepl`的行為非常接近的函數：`grep`來做範例。
`grep`與`grepl`的參數有八成像，具體來說，多了`value`與`invert`這兩個參數。
這篇文章中限於篇幅，我們不會仔細的講解所有的參數。
所以有興趣的同學麻煩再自行研究。

`grep`與`grepl`最大的差異，在於它回傳的是「符合`pattern`」的「位置」或「文字」
，而不是一個布林向量。
因此結果的向量長度，會短很多。

在正則表示式中，我們可以在`pattern`的第一個字元放上`""^""`，代表接下來的模式一定
要從字串的開頭開始。
舉例來說：

```{r}
grep(""^AA"", flights$tailnum)
```

以上的程式碼告訴我們，有哪些位置的tailnum資料是由`""AA""`開頭的，結果是R沒有找到
。
同學可以用`substring`做驗證：

```{r}
sum(substring(flights$tailnum, 1, 2) == ""AA"", na.rm = TRUE)
```

結果會與剛剛的`grep`的結果符合。

又如果我們在`pattern`的最後一個字元放上`$`，則代表接下來之前的模式一定要是字串
的最後。
舉例來說：

```{r}
head(grep(""AA$"", flights$tailnum))
```

我們可以加上參數`value = TRUE`來看比對成功的文字：

```{r}
head(grep(""AA$"", flights$tailnum, value = TRUE))
```

這裡，我們還是可以用`substring`來驗證我們的結果：

```{r}
ans.substring <- substring(flights$tailnum, nchar(flights$tailnum) - 1,
nchar(flights$tailnum)) == ""AA""
ans.grepl <- grepl(""AA$"", flights$tailnum)
all(ans.substring == ans.grepl, na.rm = TRUE)
```

以上的指令中，`nchar`代表這個字串中有多少個字元。
組合`substring`與`nchar`，我們就可以切割出字串最後兩個字元。
而`all`這個函數，必須要參數中的布林向量全部都是`TRUE`的時候，才會回傳`TRUE`。

## 不定長度：同時比對`""AA""`、`""AAA""`或`""AAAA""`等等

在正則表示式中，我們能寫出一種模式，告訴R 我們的目標的長度是不確定的。

舉例來說：`""AA""`在正則表示式中等價於`""A{2}""`，也就是把字元`""A""`重複兩次的模式
。
大括號裡的數字，就代表重複的次數。
而重複的字元，限定是大括號前面的一個字元。
R 要剛好找到，才判斷字串符合我們提供的模式。

```{r}
all(grep(""AA"", flights$tailnum) == grep(""A{2}"", flights$tailnum), na.rm =
TRUE)
```

同理可證，我們可以找連續三個A：

```{r}
head(grep(""A{3}"", flights$tailnum, value = TRUE))
```

因此我們可以告訴R，我們需要的A可以有連續2、3或4個。


```{r}
grep(""A{2,4}"", c(""A"", ""AA"", ""AAA"", ""AAAA"", ""AAAAA""), value = TRUE)
```

同學有沒有注意到，連續五個A也被算是比對成功呢？因為五個A也算是符合連續2~4個A的
模式。

甚至是我們可以告訴R，只要有連續的A（但是至少要一個）就行了。
這裡的`""A+""`的模式代表，至少要有一個A。

```{r}
grep(""A+"", c("""", ""A"", ""AA"", ""AAA"", ""AAAA"", ""AAAAA""), value = TRUE)
```

同學請注意到，空字串`""""`比對失敗。

與`+`類似的，還有`*`與`?`的符號。
`?`代表0個或1個。
`*`代表連續0個、1個、2個...

總而言之，透過大括號，以及`+`、`*`與`?`，我們可以透過正則表示式表達各種可能的
長度的模式。
最後提醒同學，大括號、`+`、`*`與`?`都是針對他們之前的一個字元而已。

## 不定字元

那除了長度可以有不確定之外，模式中的字元也可以是不確定的。

舉例來說，如果我們要找的不再是如`""A""`、`""AA""`與`""AAA""`等連續的相同字元，而是兩
個A中間夾雜任意字元的模式。
我們可以利用：`""A.A""`來表示這樣的模式。
這裡的`.`代表一個任意字元：

```{r}
head(grep(""A.A"", flights$tailnum, value = TRUE))
```

同學可以看到，R 找到符合`""A.A""`模式的字元的前六個之中，你們是不是能找到兩個A中
間夾著任意字元的模式呢？

## 否定字元

上一個模式中，包含`""AAA""`這樣的模式。
如果我們希望兩個A中間夾著的字元是數字呢？
我們可以利用`""A[0-9]A""`來表示：
這裡的中括號，代表一個字元。而這個字元必須要符合中括號之間的字元，才算有效。
而`0-9`在這裡就代表0, 1, 2, ..., 9 等十個字元的集合。

```{r}
grep(""A[0-9]A"", flights$tailnum, value = TRUE)
```

結果在tailnum中，是找不到符合這種模式的航班。
理由是因為，航班的tailnum資料需要註冊，並且符合一定的規則的。
通常第一個字元一定是`N`，後接若干個數字，最後會是英文字母。
因此，`A[0-9]A`的模式就不存在了。
有興趣的同學可以參考[Aircraft
registration](https://en.wikipedia.org/wiki/Aircraft_registration)上的資料。

中括號除了代表「符合」的模式，之外，也可以代表「不符合」。
兩者的差別在於「符合」的模式，是`[]`，而「不符合」的模式，是`[^]`。
舉例來說：

```{r}
head(grep(""N[13]"", flights$tailnum, value = TRUE))
```

找出來的模式，N的後面必須是1或3。

```{r}
head(grep(""N[^13]"", flights$tailnum, value = TRUE))
```

找出來的模式，N的後面**不能**是1或3。

這類不定字元的模式，也可以與前面介紹的不定長度的技巧一起使用。
舉例來說：

```{r}
head(grep(""N[13]{3}"", flights$tailnum, value = TRUE))
```

這裡找出來的模式，N後面一定有連續三個1或3。
大家有沒有開始慢慢感受到正則表示式的威力了呢？

## 子模式

以上的內容我很早就自己學會了。
但是在實務上，還是常常遇到沒辦法解決的問題。
直到我學會子模式之後，是我才開始覺得正則表示式能夠解決大部份我的問題。

這裡先跟同學複習一下，剛剛我們介紹的正則表示式語法中，如大括號、`+`、`*`與`?`
都是針對他們之前的一個字元而已。
那如果我們不只是針對一個字元呢？

舉例來說，如果我想要找的是像1212這樣，12重複兩次的模式呢？
答案就是用小括號建立子模式。
舉例來說，`""(12){2}""就是連續12這兩個數字的模式，連續出現兩次的模式：

```{r}
head(grep(""(12){2}"", flights$tailnum, value = TRUE))
```

這樣找出來的模式，都一定會有1212。

這樣的手法，可以跟上面教過的語法整合。
舉例來說，我們可能想要的是：

```{r}
head(grep(""(1[23]){2}"", flights$tailnum, value = TRUE))
```

這裡的小括號中的子模式，就是前面教的：`""1[23]""`，也就是1後面可以接2或3。
而這樣的模式，再重複兩次。
因此同學會看到上面的指令找出來的結果，都會有1312, 1212, 1213... 等模式出現。

## 抽取資訊

在R之中，我們不只可以尋找子模式，我們還可以請R 把子模式的資訊抽取出來。
我們回到RDataEngineer-01-Parsing的最後一個測驗。
這個問題中，我們需要從海盜的資料抽取資訊。我們先從github中下載這份課程中的資料
：

```{r pirate_info, cache = TRUE}
pirate_path <- tempfile(fileext = "".txt"")

download.file(""https://raw.githubusercontent.com/wush978/DataScienceAndR/course/02-RDataEngineer-01-Parsing/pirate-info-2015-09.txt"",destfile = pirate_path)
pirate_info <- readLines(file(pirate_path, encoding = ""BIG5""))
head(pirate_info)
```

透過翻轉教室中的教學，我們知道可以使用`strsplit`或`substring`來從文字中萃取資
料。
但是如果利用正則表示式的子模式來抽取時間的資訊，我們可以這樣寫：

```{r, dependson=""pirate_info""}
head(
  regmatches(
    pirate_info,
    regexec(""日期：([0-9]{4})年([0-9]{1,2})月([0-9]{1,2})日"", pirate_info)
  ))
```

這裡我們使用的是`regexec`的函數，並且與`regmatches`函數搭配。
`regexec`也是R裡面的正則表示式的函數之一。
`regmatches`可以從比對出來的結果，抽取資訊。
這樣的組合在抽取子模式的內容時，是很方便的。
舉例來說，同學可以看到上面的輸出，是一個list物件。
那些pirate_info的字串元素，如果不符合我們寫的模式，為應的list物件中的元素，就
會是`character(0)`。
如果有比對成功，R不只會回傳字串的內容，還會幫我們把子模式的內容也抽出來放在後
面。
所以同學會看到第六筆資料：`""1. 日期：2015年9月6日""`在抽出子模式之後，我們知道
：

- 第一個子模式（年）的內容是`""2015""`
- 第二個子模式（月）的內容是`""9""`
- 第三個子模式（日）的內容是`""6""`

這樣的功能，在實務上非常的好用。

## 跳脫字元

運用上述的技巧，我們就可以去抽取，例如文字中的成對括號之間的文字。
舉例來說，如果我們有一個文字資料：

```{r}
x <- ""123(45)657""
```

我們希望能夠抓取兩個小括號之間的數字。

我第一次遇到類似問題時，就根據上面我學到的技巧，寫出這樣的正則表示式：

```{r}
pattern <- ""((.*))""
```

那時我心裡這樣想：外圈的括號代表文字中的括號。內圈的括號代表子模式。
R 應該可以懂我吧？
當然不懂！
**小括號就是代表子模式，這是絕對的！**

```{r}
regmatches(x, regexec(pattern, x))
```

所以R 並沒有找到兩個括號之間的數字：`""45""`。

那我們怎麼半呢？答案是要透過「跳脫字元」。
正則表示式的跳脫字元，是`""\""`，剛好與R 的字串的跳脫字元一樣。
因此雖然我心裡想要輸入的是：
`\((.*)\)`
但是跑到R 的雙引號中間之後，每一個`""\""`都要重複兩遍：

```{r}
pattern <- ""\\((.*)\\)""
```

我們可以透過`cat`函數來看R 看到的雙引號之間的文字，是什麼：

```{r}
cat(pattern)
```

雖然我們輸入的時候，`""\""`需要兩個，可是透過`cat`，我們可以確定R 並沒有搞混。

```{r}
regmatches(x, regexec(pattern, x))
```

結果R 也真的能找到45。

因此這裡要提醒同學，所有之前講過得特殊符號，例如大括號、中括號、小括號、
`+`... 在比對的時候，如果這些剛好是你要比對的文字，那就要加上跳脫字元`""\""`，程
式才能正確的詮釋我們想表達的意思。

又剛好跳脫字元`""\""`也是R 的字串的跳脫字元，所以我們在輸入時，一個`""\""`就要輸入
兩次。
因此，如果剛好要比對的符號是`\`，那在R裡面的輸入就要是`""\\\\""`了...

# 總結

以上介紹了我個人常用的正則表示式的功能，希望對同學有幫助。
之後我會釋出一個小關卡，讓讀過這篇文章的同學可以練習正則表示式。
看不懂的同學，也都很歡迎到聊天室，或是下面的留言板討論。
如果對內容有建議的網友，也歡迎在或是到
<https://github.com/wush978/DataScienceAndR/issues>發issue給我。


--","R_Language"
"838","M.1492884052.A.EB3","smallpigpi","問題","無法重新命名(？)",2017-04-23 02:00:50,NA,NA,"我也不知道標題取這樣對不對http://i.imgur.com/BVfcyJI.jpg為何不能把成功 print(dirty_iris$Petal.Length, digits = 1)鎖進P.L ，
是print有什麼特性嗎？



已經被R搞的昏頭的新手_(:3 」∠)_


--","R_Language"
"839","M.1492873599.A.0AD","celestialgod","問題","Re: 挑出某些條件的數值做整理",2017-04-22 23:06:35,NA,NA,"※ 引述《smallpigpi (一勺子)》之銘言：: [問題類型]:: 程式詢問(我想用R 做某件事情，但我不知道怎麼用R寫出來): [軟體熟悉度]:: 超級新手(沒寫過程式，R 是我的第一次): [問題敘述]:: S.L      S.W      P.L          P.W      Species: 49.0    30.0     14.000    2.0      setosa: 5.6       2.9       3.600     1.3   versicolor: 6.8       3.2       5.900     2.3     virginica: 我想請問: 如何挑出大於10的數值把它除於10: 以及如何把每個數值統一顯示小數點後一位: 謝謝各位大大: (手機排版，不知道會不會亂掉)# data.table做法：
library(data.table)
irisDT <- data.table(iris)
irisDT[ , lapply(.SD, function(x){
  if (is.numeric(x)) {
    ifelse(x > 10, x / 10, x)
} else return(x)})]

# dplyr做法：
library(dplyr)
irisDT %>% mutate_if(is.numeric, funs(ifelse(. > 10, . / 10, .)))

# base函數解法：
evalExpr <- lapply(names(irisDT)[sapply(irisDT, is.numeric)],
  function(x) bquote(ifelse(.(as.symbol(x)) > 10, .(as.symbol(x)) / 10,
                            .(as.symbol(x)))))
do.call(function(...) transform(irisDT, ...), evalExpr)


看一下這篇：https://www.ptt.cc/bbs/R_Language/M.1492181442.A.5B4.html統一顯示小數點後一位的話：

print(iris, digits = 2)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"840","M.1492870608.A.4CF","smallpigpi","問題"," 挑出某些條件的數值做整理",2017-04-22 22:16:45,NA,NA,"[問題類型]:
程式詢問(我想用R 做某件事情，但我不知道怎麼用R寫出來)

[軟體熟悉度]:
超級新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
S.L      S.W      P.L          P.W      Species

49.0    30.0     14.000    2.0      setosa
5.6       2.9       3.600     1.3   versicolor
6.8       3.2       5.900     2.3     virginica

我想請問

如何挑出大於10的數值把它除於10

以及如何把每個數值統一顯示小數點後一位


謝謝各位大大
(手機排版，不知道會不會亂掉)

--","R_Language"
"841","M.1492849707.A.F30","dustnight","問題","Rwordseg自定義詞庫",2017-04-22 16:28:23,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
最近在做text mining的練習，由於斷詞的過程需要考量一些專有名詞，
因此採用Rwordseg進行斷詞，斷詞的過程當中，會遇到安裝詞典/或是使用自定義詞典
的狀況，產生了一些問題想來請問前輩們。
1. 在使用installDict時，想安裝NTUSD的資料辭典，使用以下指令：
installDict(file.choose(),""positive"",dicttype=""text"")
但是安裝後卻出現
1 words were loaded! ... New dictionary 'positive' was installed!
There were 50 or more warnings (use warnings() to see the first 50)
Warning messages:
1: In readLines(dictpath, encoding = dic.enc) :
  line 1 appears to contain an embedded nul
等問題，看起來是有安裝成功但是點進去dic檔案裡面看卻發現只有一個詞彙(原本txt檔案
想來請問各位前輩們是否有遇到過類似問題，又該怎麼解決？
2.
在自定義詞庫時，我用insertwords(""畢業證書"",save=T)來增加畢業證書這個詞彙
但是在segmentCN(""自己的畢業證書自己撿"")做測試時，卻仍然會有
[1] ""自己"" ""的""   ""畢業"" ""證書"" ""自己"" ""撿""
的狀況,（反而結巴還會斷出畢業證書...)
是我沒有增加詞庫成功嗎？
3.
目前不使用結巴的原因在於不確定結巴是否可以自行增加詞庫


[環境敘述]:
R version 3.3.3 (2017-03-06)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X El Capitan 10.11.6

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] igraph_1.0.1       wordcloud_2.5      RColorBrewer_1.1-2 Rwordseg_0.2-1
 [5] jiebaR_0.9.1       jiebaRD_0.1        rJava_0.9-8        tm_0.7-1
 [9] NLP_0.1-9          tmcn_0.1-4

loaded via a namespace (and not attached):
[1] magrittr_1.5   parallel_3.3.3 tools_3.3.3    Rcpp_0.12.7    slam_0.1-38

[關鍵字]:
text mining, Rwordseg

--","R_Language"
"842","M.1492840049.A.A97","wheado","問題","矩陣相乘與平行運算的問題",2017-04-22 13:47:26,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

兩個矩陣相乘如果

使用apply 或

將一個矩陣拆成許多的list使用lapply

會不會比較快?

如果有一群大矩陣以及一群向量需要進行矩陣相乘，

想辦法建立成矩陣相乘是否是最快的?

[程式範例]:http://ideone.com/OVgQOx我試的結果好像是矩陣相乘是最快的

但是我的記憶體不夠大，不能嘗試更大的矩陣> a <- matrix(rnorm(10000000),ncol = 1000);> dim(a)[1] 10000  1000> b <- matrix(rnorm(200000), nrow = 1000);> dim(b)[1] 1000  200
>> start <- proc.time();> d1 <- a%*%b;> end   <- proc.time();> end - start;user  system elapsed
   1.85    0.00    1.84
>> start <- proc.time();> d2 <- apply(a,1,function(x) x%*%b)> end   <- proc.time();> end - start;user  system elapsed
  10.73    0.07   10.83
>> start <- proc.time();> a1 <- apply(a,1,function(x) list((x)));> d3 <- lapply(a1, function(x) x[[1]]%*%b)> end   <- proc.time();> end - start;user  system elapsed
   9.49    0.06    9.58

[環境敘述]:

R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)



--","R_Language"
"843","M.1492806073.A.227","celestialgod","分享","introduce to foreach + iterators",2017-04-22 04:21:09,NA,NA,"[關鍵字]: foreach, iterators, parallel, apply, sapply, lapply, mapply, tapply

[出處]:https://goo.gl/nyrYXy[重點摘要]:

我一直沒時間寫*apply系列函數的介紹

不過最近用了foreach跟iterators

發現其實這兩個套件就可以完全取代*apply系列函數

而且對新手來說寫起來也不容易搞錯

我這篇會先簡介一下*apply系列函數

然後介紹foreach怎麼取代sapply, lapply跟mapply

再介紹怎麼搭配iterators取代apply跟tapply

最後講一下怎麼用parallel backend，讓foreach能夠平行跑

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"844","M.1492793360.A.55D","ms0344303","問題","以Mass中的lda分類資料",2017-04-22 00:49:18,NA,NA,"[問題類型]:語法與可行性


[軟體熟悉度]:入門

[問題敘述]:
有一筆演唱會訂票的資料
想要用lda作模型
以年齡跟性別來預測此人去哪場演唱會

可是演唱會有421種
網路上範例中lda函數需要輸入預測機率prior
其中c(1,1,1)/3是iris的三種類
可是我有421種
請問該如何輸入先測值呢 假設就每個都1/421好了
謝謝各位




--","R_Language"
"845","M.1492792902.A.0B5","ataiwu","問題","merge datasets",2017-04-22 00:41:39,NA,NA,"[問題類型]:我想要merge兩個datasets[軟體熟悉度]:請把以下不需要的部份刪除新手[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要merge兩個datasets，已經有爬過文了，前面似乎也有人遇到這個問題
但似乎沒有解決。
OK，問題是這樣的，我merge 兩個datasets，然後all = FALSE
理論上只會merge row上沒有na值的
但是，為什麼merge完之後，卻出現大量的NA值
但在原資料上是有值的
我已經把上一個人問過這個問題下面討論的方法都試過了
還是不行....

ps: sales and units 兩筆資料內的變數名稱完全相同
故，沒有用by 在coding碼裡面

[程式範例]:data <- merge(sales_2012, units_2012, all = FALSE)[環境敘述]:作業系統win 10R studion 版本0.99.903[關鍵字]:
merge


--","R_Language"
"846","M.1492746599.A.628","giock18","問題","Roracle安裝問題",2017-04-21 11:49:55,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
依據版大的建議想要使用Roracle的套件，但安裝失敗，環境變數都已經設定了
還是有錯誤訊息，想請叫大家該怎麼修改？

首先說明一下我相關的環境變數
PATH=
C:\oracle\product\12.1.0\client_1\bin;
c:\Rtools\bin;
c:\Rtools\mingw_32\bin;
C:\ProgramData\Oracle\Java\javapath;
C:\Program Files\R\R-3.3.3\bin

OCI_LIB64=C:\oracle\product\12.1.0\client_1\bin
OCI_INC=C:\oracle\product\12.1.0\client_1\sdk\include (oci.h在這目錄下)


[程式範例]:
install.packages(""ROracle"",type = ""source"")

錯誤訊息如下：
trying URL 'https://cran.rstudio.com/src/contrib/ROracle_1.3-1.tar.gz'Content type 'application/x-gzip' length 308252 bytes (301 KB)
downloaded 301 KB

* installing *source* package 'ROracle' ...
** package 'ROracle' successfully unpacked and MD5 sums checked
ERROR: cannot find Oracle Client.
       Please set OCI_LIB64 to specify its location.
Warning: 執行中命令 'sh ./configure.win' 已有狀態 1
ERROR: configuration failed for package 'ROracle'
* removing 'C:/Program Files/R/R-3.3.3/library/ROracle'
Warning in install.packages :
  running command '""C:/PROGRA~1/R/R-3.3.3/bin/x64/R"" CMD INSTALL -l
""C:\Program Files\R\R-3.3.3\library""
C:\Users\myID\AppData\Local\Temp\RtmpCYB3hn/downloaded_packages/ROracle_1.3-1.tar.gz'
had status 1
Warning in install.packages :
  installation of package ‘ROracle’ had non-zero exit status

The downloaded source packages are in
        ‘C:\Users\myID\AppData\Local\Temp\RtmpCYB3hn\downloaded_packages’



[環境敘述]:
R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.3


[關鍵字]:
Roracle、windows7


麻煩高人解惑∼不知道是哪個環節問題

--","R_Language"
"847","M.1492697460.A.8C2","mvp24213","問題","如何在地圖上加上標籤",2017-04-20 22:10:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我已經畫出地圖，但若只想標示出特定城市，該如何設定?[程式範例]:library(maptools)library(ggmap)library(ggplot2)tw.map <- readShapeSpatial(""D:\\Master
Degree\\Thesis\\R_code\\Map\\COUNTY_MOI_1051214.shp"")

ggplot(tw.map,aes(x=long,y=lat,group=group)) +
  geom_polygon(fill=""white"",colour=""grey"") +
  coord_map(""polyconic"")

這邊是畫好的地圖https://imgur.com/a/XMEB3c1 = gCentroid(countytaiwan,byid=TRUE)
points(c1)
text([email<U+00A0>protected], levels([email<U+00A0>protected]$COUNTYENG))

用這個方法上標籤上不上去，且這個CODE會標示全部城市，請問若我只要
台北市、台中市、高雄市的畫要怎麼篩選出來呢?

有找到geom_text()但一直試不出來


[環境敘述]:3.3.3[關鍵字]: ggplot2、地圖

--","R_Language"
"848","M.1492630526.A.A7D","locka","問題","Re: 二維的資料如何轉換回一維",2017-04-20 03:35:24,NA,NA,"我不知道怎麼直接產生wide form的測試資料
(主要是rank1,2,3抽出不放回不知道怎麼寫)
所以我先用成long table再轉成wide table... :P

library(dplyr)
library(tidyr)

# 產生測試資料:
set.seed(10)
name1 <- c(""jane"", ""zack"", ""andy"", ""albee"", ""may"")
name2 <- c(""jona"", ""candy"", ""clair"", ""ben"", ""bobby"")

# long table
dat <- data.frame(Time=rep(seq(Sys.Date(), length.out=5, by=""1 day""),each=6),
                  Class=rep(rep(c(""xxxx"",""yyyy""),each=3),5),
                  Rank=rep(sapply(1:3,function(x)paste0(""rank"",x)),10),
                  Student=c(sample(namel,size=3,replace=F),
                         sample(name2,size=3,replace=F),
                         sample(name1,size=3,replace=F),
                         sample(name2,size=3,replace=F),
                         sample(name1,size=3,replace=F),
                         sample(name2,size=3,replace=F),
                         sample(name1,size=3,replace=F),
                         sample(name2,size=3,replace=F),
                         sample(name1,size=3,replace=F),
                         sample(name2,size=3,replace=F)))
# 轉成wide table
dat <- dat %>% spread(Rank,Student)


#####> datTime Class rank1 rank2 rank3
1  2017-04-20  xxxx  andy  zack albee
2  2017-04-20  yyyy   ben  jona bobby
3  2017-04-21  xxxx  zack   may albee
4  2017-04-21  yyyy clair bobby candy
5  2017-04-22  xxxx  jane  andy  zack
6  2017-04-22  yyyy clair  jona   ben
7  2017-04-23  xxxx  zack albee  andy
8  2017-04-23  yyyy   ben bobby candy
9  2017-04-24  xxxx  andy   may albee
10 2017-04-24  yyyy candy   ben bobby
#####


(OK,終於可以開始回答問題了XD)



1. wide table 轉成long table

long <- dat %>% gather(Rank,Student,-c(Time,Class))
  %>% arrange(Time,Class) %>% mutate(Rank=substr(Rank,5,5))

主要是gather(),後面arrange()跟mutate只是整理起來好看而已

#####> longTime Class Rank Student
1  2017-04-20  xxxx    1    andy
2  2017-04-20  xxxx    2    zack
3  2017-04-20  xxxx    3   albee
4  2017-04-20  yyyy    1     ben
5  2017-04-20  yyyy    2    jona
6  2017-04-20  yyyy    3   bobby
7  2017-04-21  xxxx    1    zack
8  2017-04-21  xxxx    2     may
9  2017-04-21  xxxx    3   albee
10 2017-04-21  yyyy    1   clair
...
#####


2. long table 轉成 wide table (spread by Time)

res2 <- long %>% spread(Time,Rank,fill="""")

#####> res2Class Student 2017-04-20 2017-04-21 2017-04-22 2017-04-23 2017-04-24
1   xxxx   albee          3          3                     2          3
2   xxxx    andy          1                     2          3          1
3   xxxx    jane                                1
4   xxxx     may                     2                                2
5   xxxx    zack          2          1          3          1
.....
#####


個人覺得只要從long table出發，要怎麼轉都不難。
(沒記錯的話tidy data的原則大概就是整成類似long table的樣子)※ 引述《chy0253350 (chy)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [問題敘述]:: 我有一筆資料大致上是這樣的格式：: Time         Class    rank1  rank2   rank3: 2017/4/6     XXXX        A1     B1      D1: 2017/4/7     YYYY        A2     C2      B2: 2017/4/7     XXXX        A1     C1      E1: 2017/4/7     YYYY        B2     A2      C2: A1, B1, C1, A2, C2....都是人名，分別為XXXX和YYYY班的學生。: 所以第一筆資料就是4/6號，XXXX班的學生，第一名是A1、第二名是B1，最後是D1。: 但是這樣的資料無法製作折線圖觀察學生們在這兩天的排名進退步狀況，: 實際資料的時間會橫跨兩周，班級、人名和排名也都較多。: 所以，會希望資料能轉換成：: Time           Class   student   rank: 2017/4/6        XXXX        A1      1: 2017/4/6        XXXX        B1      2: 2017/4/6        XXXX        D1      3: 2017/4/6        YYYY        A2      1: 2017/4/6        YYYY        B2      3: 2017/4/6        YYYY        C2      2: 2017/4/7        XXXX        A1      1: 2017/4/7        XXXX        C1      2: 2017/4/7        XXXX        E1      3: 2017/4/7        YYYY        A2      2: 2017/4/7        YYYY        B2      1: 2017/4/7        YYYY        C2      3: 如此資料才可以繪製摺線圖吧？: 過去有用過dplyr進行篩選或比對等功能，: 不過現在這種格式就不知道該怎麼用了...: ==============================================================: 透過reshape2的melt順利轉換成長表格了，: 那麼我能否再轉換成：:    student      2017/4/6        2017/4/7:         A1            1               1:         B1            2:         C1                            2:         D1            3:         E1                            3:         A2            1               2:         B2            3               1:         C2            2               3: 我記得應該很容易阿，可是怎麼覺得自己變好笨..--","R_Language"
"849","M.1492619860.A.5F3","chy0253350","問題","二維的資料如何轉換回一維",2017-04-20 00:37:38,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[問題敘述]:

我有一筆資料大致上是這樣的格式：
Time         Class    rank1  rank2   rank3
2017/4/6     XXXX        A1     B1      D1
2017/4/7     YYYY        A2     C2      B2
2017/4/7     XXXX        A1     C1      E1
2017/4/7     YYYY        B2     A2      C2

A1, B1, C1, A2, C2....都是人名，分別為XXXX和YYYY班的學生。
所以第一筆資料就是4/6號，XXXX班的學生，第一名是A1、第二名是B1，最後是D1。
但是這樣的資料無法製作折線圖觀察學生們在這兩天的排名進退步狀況，
實際資料的時間會橫跨兩周，班級、人名和排名也都較多。
所以，會希望資料能轉換成：
Time           Class   student   rank
2017/4/6        XXXX        A1      1
2017/4/6        XXXX        B1      2
2017/4/6        XXXX        D1      3
2017/4/6        YYYY        A2      1
2017/4/6        YYYY        B2      3
2017/4/6        YYYY        C2      2
2017/4/7        XXXX        A1      1
2017/4/7        XXXX        C1      2
2017/4/7        XXXX        E1      3
2017/4/7        YYYY        A2      2
2017/4/7        YYYY        B2      1
2017/4/7        YYYY        C2      3

如此資料才可以繪製摺線圖吧？

過去有用過dplyr進行篩選或比對等功能，
不過現在這種格式就不知道該怎麼用了...
==============================================================

透過reshape2的melt順利轉換成長表格了，
那麼我能否再轉換成：
   student      2017/4/6        2017/4/7
        A1            1               1
        B1            2
        C1                            2
        D1            3
        E1                            3
        A2            1               2
        B2            3               1
        C2            2               3
我記得應該很容易阿，可是怎麼覺得自己變好笨..



--","R_Language"
"850","M.1492604363.A.DAB","celestialgod","問題","Re: 以r整理大量資料，效能問題",2017-04-19 20:19:16,NA,NA,"※ 引述《kial (夏澄)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別。:         建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。:: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我有一個約千萬筆的產品交易紀錄: 格式長得像下面這樣子: #testdata: customerid：AAAAAAAAAA: payment：BBBBBBBB: ReadTime：CCCCCC: 20170419020204PruductNumber：DDDDDD：NT00183.1415Number：40: 20170419020205PruductNumber：EEEEEE：NT00184.1415Number：42: 20170419020206PruductNumber：FFFFFF：NT00185.1415Number：44: 客戶：GGGGGGGGGGG: 付款方式：III: 讀取時間：JJJJJJ: 20170419020204PruductNumber：KKKKKK：NT00040.1610Number：40: 20170419020205PruductNumber：EEEEEE：NT00041.1610Number：42: 20170419020206PruductNumber：FFFFFF：NT00042.1610Number：44: 20170419020207PruductNumber：HHHHHH：NT00043.1610Number：46: 我想要整理成: 客戶          付款方式  讀取時間 交易時間      產品序號 金額          數量: AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020204  DDDDDD  00183.1415      40: AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020205  EEEEEE  00184.1415      42: AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020206  FFFFFF  00185.1415      44: GGGGGGGGGGG     III     JJJJJJ  20170419020204  KKKKKK  00040.1610      40: GGGGGGGGGGG     III     JJJJJJ  20170419020205  EEEEEE  00041.1610      42: GGGGGGGGGGG     III     JJJJJJ  20170419020206  FFFFFF  00042.1610      44: GGGGGGGGGGG     III     JJJJJJ  20170419020207  HHHHHH  00043.1610      46: 目前程式的雛型是讀入data後用for迴圈跟if和substr判定關鍵字，: 再用substr寫入各變數後，利用rbind結合變數輸出。: 但是碰到的問題是利用測試資料試跑時(約10000筆)就碰上了效能不佳的問題，: 真實資料約1000萬筆，請問有無處理此類資料的套件或是效能較佳的解法呢？: 感謝。程式：https://pastebin.com/idYqA03T說明如下：

我不知道你的data source如何

我先假設你的資料是單一檔案

如果你記憶體不能全部吃下，就分段執行

只是要記得可能會斷在中間，這部分要額外再處理，但這裡就不談


data generation的部分，我就略過

其實你的資料滿好parse的，所以只要抓對區塊

然後再分成基本資訊跟消費物品就處理完了


因為我沒亂排基本資訊的三個欄位

所以我只是很單純去抓customerid這個欄位的位置

然後做個cumsum當作split的vector即可


parsing部分，基本資訊就用regexp: (customerid|payment|ReadTime): (.*)

配合stringr::str_match，把基本資訊抓出來

然後再用match調到對的地方 (我data生成，沒有打亂順序，所以其實不用這個步驟)

再來明細部分就用這個regexp:

(\\d{14})PruductNumber: ([a-zA-Z0-9]+): NT(\\d{5}\\.\\d{4})Number: (\\d+)

第一個小括號抓出日期，第二個抓PruductNumber，第三個抓價錢，第四個抓數量

抓下來之後，str_match取最後四行就是我們要的四個欄位了

最後整併成data.table就完工了


這樣做下來，我電腦CPU是i7-3770K，八個執行緒，我用七個跑

只需要16.86秒就處理完一萬筆record了

一千萬的話，可能大概要16860秒，也就是4.68小時...

除非你有更強的電腦，擁有更多的thread

或是使用多台電腦(用makeCluster可以多台多個thread跑)

不然你想要在短時間內用R處理完可能還滿難的....


系統資訊：作業系統是windows 10, Microsoft R Open 3.3.3


Note: 要注意matrix取出一行或是一列時，R會把dimension drop掉，變成vector

所以記得補上一個drop = TRUE讓他永遠是matrix，這樣輸入data.table/data.frame

才會是數個column



--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"851","M.1492592155.A.847","vincentshaw","問題","用R自行製作價量圖",2017-04-19 16:55:52,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門(寫過其他程式，但仍屬新手)[問題敘述]:

想用R寫出類似產品價格以及銷量的圖表，想法很類似quantmod所呈現的股票價量圖，但q
uantmod都是去抓外部資料，但我需要把csv讀進去，所以卡住不知道該怎麼繼續下去...
再請高手指點一下，非常感恩

[程式範例]:

無。

[環境敘述]:

windows,R studios

[關鍵字]:

quantmod，價量關係，k線

--","R_Language"
"852","M.1492585376.A.957","kial","問題","以r整理大量資料，效能問題",2017-04-19 15:02:54,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。建議先到 http://tinyurl.com/mnerchs 搜尋本板舊文。[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一個約千萬筆的產品交易紀錄

格式長得像下面這樣子#testdatacustomerid：AAAAAAAAAA
payment：BBBBBBBB
ReadTime：CCCCCC
20170419020204PruductNumber：DDDDDD：NT00183.1415Number：40
20170419020205PruductNumber：EEEEEE：NT00184.1415Number：42
20170419020206PruductNumber：FFFFFF：NT00185.1415Number：44
客戶：GGGGGGGGGGG
付款方式：III
讀取時間：JJJJJJ
20170419020204PruductNumber：KKKKKK：NT00040.1610Number：40
20170419020205PruductNumber：EEEEEE：NT00041.1610Number：42
20170419020206PruductNumber：FFFFFF：NT00042.1610Number：44
20170419020207PruductNumber：HHHHHH：NT00043.1610Number：46


我想要整理成

客戶          付款方式  讀取時間 交易時間      產品序號 金額          數量
AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020204  DDDDDD  00183.1415      40
AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020205  EEEEEE  00184.1415      42
AAAAAAAAAAA     BBBBBB  CCCCCC  20170419020206  FFFFFF  00185.1415      44
GGGGGGGGGGG     III     JJJJJJ  20170419020204  KKKKKK  00040.1610      40
GGGGGGGGGGG     III     JJJJJJ  20170419020205  EEEEEE  00041.1610      42
GGGGGGGGGGG     III     JJJJJJ  20170419020206  FFFFFF  00042.1610      44
GGGGGGGGGGG     III     JJJJJJ  20170419020207  HHHHHH  00043.1610      46

目前程式的雛型是讀入data後用for迴圈跟if和substr判定關鍵字，

再用substr寫入各變數後，利用rbind結合變數輸出。

但是碰到的問題是利用測試資料試跑時(約10000筆)就碰上了效能不佳的問題，

真實資料約1000萬筆，請問有無處理此類資料的套件或是效能較佳的解法呢？

感謝。



--","R_Language"
"853","M.1492574796.A.0D3","locka","問題","Re: 轉換資料",2017-04-19 12:06:34,NA,NA,"a possible solution using dplyr and tidyr
不知道原po後續要做甚麼處理 結果不漂亮請見諒...

# set random seed
set.seed(1)

# 產生測試資料
library(dplyr)
dat <- data.frame( name=sample(c(""jane"",""zack"",""andy""),size=10,replace=T),
   food=sample(c(""apple"",""butter"",""crab"",""duck"",""egg""),size=10,replace=T)) %>%
   unique()

dat
#   name   food
# 1 jane butter
# 2 zack  apple
# 3 zack   duck
# ...以下略

# transform dataframe
library(tidyr)
spread(dat, food, food)

### output ###
#   name apple butter crab duck  egg
# 1 andy  <NA> butter crab duck <NA>
# 2 jane  <NA> butter <NA> duck <NA>
# 3 zack apple butter <NA> duck  egg
##############※ 引述《oliversu1211 (oliversu)》之銘言：: 我想請問有沒有什麼快速的方法可以轉換資料: 我目前的資料是長這樣:: 王小明  牛奶: 王小明  奶油: 王小明  蕃茄: 我想要轉換成:: 王小明 牛奶 奶油 蕃茄: 因為資料有好幾萬筆，所以請教大家有沒有什麼快速的辦法: 拜託救救我--","R_Language"
"854","M.1492574085.A.DE6","rleaner","問題","shiny對renderDataTable的增刪",2017-04-19 11:54:43,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想在renderDataTable所呈現的表格中能直接 增加 或 刪除 單筆or多筆資料
肯請各位大大指教了
QAQ

[程式範例]:

我想以shiny gallery提供的範例為基礎做修改:https://shiny.rstudio.com/gallery/datatables-demo.html拜託大家了>""<


--","R_Language"
"855","M.1492571058.A.9D8","peter0726","問題","用 R 做卡方檢測",2017-04-19 11:04:15,NA,NA,"[問題類型]: 程式諮詢

[軟體熟悉度]: 入門

主要用 perl 處理資料，偶爾用R作分析

[問題敘述]:

我現在有兩筆資料要比較其組成比例有沒有差異

問過其他人後知道要用卡方

資料大致上長這樣

要比較 A、T、C、G 的組成在 A 跟 B 之間是否有差異

             A     T     C     G
SampleA   1937   373 14788   238
sampleB   2590   395 17686   274

想請問一下要怎麼在R上面做到卡方檢定？


目前 google 查到的方法是這樣

 a <- c(1937,373,14788,238)
 b <- c(2590,395,17686,274)
 chisq.test(rbind(a,b))

在上面列出來case時結果跟我在網路上找到的計算器結果相同
(http://www.socscistatistics.com/tests/chisquare2/Default2.aspx)可是到了另一個 case

                A     T     C     G
SampleA   1595826   308   450    76
sampleB   1576617   362   428    59

上面的寫法跑出來的p-value是 0.06327
可是計算器上給的結果是 The p-value is < 0.00001

想請問一下正確的做法是怎麼樣

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: CentOS release 6.7 (Final)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

--","R_Language"
"856","M.1492527475.A.22F","oliversu1211","問題","轉換資料",2017-04-18 22:57:52,NA,NA,"我想請問有沒有什麼快速的方法可以轉換資料

我目前的資料是長這樣:
王小明  牛奶
王小明  奶油
王小明  蕃茄

我想要轉換成:
王小明 牛奶 奶油 蕃茄

因為資料有好幾萬筆，所以請教大家有沒有什麼快速的辦法

拜託救救我

--","R_Language"
"857","M.1492526596.A.023","empireisme","問題","用R模擬猜拳賭博",2017-04-18 22:43:12,NA,NA,"R的初學者

想用R來模擬一個賭博方式

規則如下

本金1000000元

跟對方玩剪刀時頭布

如果贏對方的話

可以得到100元

如果輸或跟對方平手的話給對方100元後

下次變成賭300元

之後再跟對方玩一次剪刀石頭布

如果贏就不玩了

如果輸或平手

就再賭900元

總之就是如果輸了 就賭上次賭額的3倍


想要R模擬破產的機率是多少

wealth=1000000

a=sample(1:3,1)


if(a==1)

{
c=wealth+100

print(c)
}

if(a!=1)

{
print(wealth-100)

}

這是我想的程式碼

目前以為要用for 或是while來用

但是沒有頭緒

懇請版友幫忙


--","R_Language"
"858","M.1492452422.A.4D7","micky924924","問題","如何儲存外部package的function產生的值",2017-04-18 02:06:58,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:各位先進大家好，因為畢業專題要用到R，所以這幾天正在練習跑資料過程中有一個環節需要用到別人寫好的方程式(PMD)，我想知道要如何將顯示於螢幕上面的那組數值存成向量，我上網也找了這個function的原始碼可是我還是不知道該如何提取我要的數值＠＠我想要獲得的向量如下面範例的結果 [1] 20 20 20 20 20其他都不要，就是需要存成向量，然後因為資料很多筆，也無法用複製貼上的方式附上這個function原本的code還有我覺得可能用得到的code @@https://github.com/cran/FRAPO/blob/master/R/PMD.Rhttps://github.com/cran/FRAPO/blob/master/R/methods-PortSol.R希望可以得到各位前輩的提點或是救援，謝謝各位[程式範例]:library(FRAPO)R<-matrix(1:100, nrow = 20, ncol = 5)PMD(R)[環境敘述]:> library(FRAPO)> R<-matrix(1:100, nrow = 20, ncol = 5)> R[,1] [,2] [,3] [,4] [,5][1,]    1   21   41   61   81[2,]    2   22   42   62   82[3,]    3   23   43   63   83[4,]    4   24   44   64   84[5,]    5   25   45   65   85[6,]    6   26   46   66   86[7,]    7   27   47   67   87[8,]    8   28   48   68   88[9,]    9   29   49   69   89[10,]   10   30   50   70   90[11,]   11   31   51   71   91[12,]   12   32   52   72   92[13,]   13   33   53   73   93[14,]   14   34   54   74   94[15,]   15   35   55   75   95[16,]   16   36   56   76   96[17,]   17   37   57   77   97[18,]   18   38   58   78   98[19,]   19   39   59   79   99[20,]   20   40   60   80  100...#######中間省略...Optimal solution found.Optimal weights for porfolio of type:Most Diversifified[1] 20 20 20 20 20  ###我只需要這一行[關鍵字]:選擇性，也許未來有用--","R_Language"
"859","M.1492445728.A.44D","peterwu76","問題","import/read csv/xls file large data file",2017-04-18 00:15:21,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

問題很多不好意思麻煩大家了，自己有稍微google過，但總理不出頭緒[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我想要import/read csv or xlsx file，但我不清楚R的概念。

1. 如我的資料在 D:\destop\datatest.csv，我的R Script也需要放在 D:/destop/ 嘛?

2. 有什麼方式可以讓我只要設定一次路徑，將資料擺在同個資料夾方便import?

3. 為什麼常常看到 library(readxl)，如果我要使用 read_excel 的 code

如
library(readxl)
C1_data <- read_excel(""D:\\destop\\datatest.xlsx"")

4. 什麼狀況下 路徑的slide要 \\ 或 / ?5. 假設我要import/read的資料檔案大小非常大，如下方 1.48 GB 的CSV(最主要的問題)https://aqsdr1.epa.gov/aqsweb/aqstmp/airdata/hourly_44201_2016.zip如連結https://aqsdr1.epa.gov/aqsweb/aqstmp/airdata/annual_all_2016.zip<- 檔案較小供作測試

有沒有什麼方法可以讓我只抓它特定的row and column (包含數字與字串)
如 我想要 import 所有的 data，但在county.name的column裡面只要有""cook"",""DuPage"",
""Kane"",""Kenosha"",""Lake"",""McHenry"",""Porter"",""Will""的rows就好。

6. header的字串原本有空白間距，import之後空白變成.我之後在處理的時候要 打.還是空白?

[程式範例]:

#----- Source:https://aqsdr1.epa.gov/aqsweb/aqstmp/airdata/hourly_44201_2016.zip# The followings are supposed to be the header of the data set

# 'State Code'  'County Code' 'Site Num' 'Parameter Code'  'POC'
# 'Latitude'  'Longitude'   'Datum' 'Parameter Name'  'Date Local'
# 'Time Local'    'Date GMT'      'Time GMT'      'Sample Measurement' 'Units of Measure'
# 'MDL'   'Uncertainty'   'Qualifier'     'Method Type'   'Method Code'
# 'Method Name'   'State Name'    'County Name'   'Date of Last Change'


 Ozone <- read.csv(""D:\\destop\\datatest.csv"")
# import the data
# county.name contain ""cook"",""DuPage"",""Kane"",""Kenosha"",""Lake"",""McHenry"",
# ""Porter"",""Will""Ozone <- subset(Ozone, County.Name %in%c(""cook"",""DuPage"",""Kane"",""Kenosha"",""Lake"",""McHenry"",""Porter"",""Will""))# 如何在import的時候就只讀入這些:S[環境敘述]:R-studio[關鍵字]:read.csvread_exel

--","R_Language"
"860","M.1492431823.A.E34","gen351199","問題","quantstrat寫法_判斷已有部位則不再買入",2017-04-17 20:23:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

請教有在使用quantstrat套件的朋友，在執行完第一次add.rule()做買進後，
該如何讓程式不要再買進第二次?
(就是 我只要一買一賣，不要多買一賣)。


先假設交易策略如下：
買進訊號：收盤價 > 20MA
賣出訊號：沒有賣出訊號，只做停損
停損訊號：移動停損2% (stoptrailing)


請問該如何避免程式重複交易?
( 自己的猜測：應該是要在add.rule()加註，而不是在add.signal() )



[關鍵字]:
quantstrat
add.rule()
rulesignal()

--","R_Language"
"861","M.1492274557.A.348","celestialgod","分享","MxNet CSVIter",2017-04-16 00:42:31,NA,NA,"[關鍵字]: MxNet, deep learning, large dataset, mx.io.CSVIter

[出處]:http://chingchuan-chen.github.io/posts/2017/04/16/mxnet-io-csviter[重點摘要]:

本篇的重點在於下面這段R，用MxNet提供的mx.io.CSVIter去batch的訓練Net模型

而這裡的`train-64x64-data.csv`，每一行都是經過resized的30`張圖片

所以`data.shape`是`64 x 64 x 30`

而label則每一行是長度600的binary vector，其`shape`設定成`600`

然後給好`batch.size`，MxNet就可以批次的從csv抓資料出來train模型了

不用一股腦地把資料全部匯入到R/gpu裡面跑，不然再多的記憶體也用不完Orz

``` R
data_train <- mx.io.CSVIter(
  data.csv = ""train-64x64-data.csv"", data.shape = c(64, 64, 30),
  label.csv = ""train-systole.csv"", label.shape = 600,
  batch.size = batch_size
)
```

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"862","M.1492262738.A.A0A","zcyee","問題","請問 contour 如何使用",2017-04-15 21:25:36,NA,NA,"[問題類型]:
程式諮詢(單純想了解contour如何使用> <)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
contour是繪製等高線圖的function
我看範例 需要 x,y,z 座標

所以輸入> contour(10,20,200)但是出現
Error in contour.default(10, 20, 200) : no proper 'z' matrix specified


那如果我用> a<-matrix(1,10,10)>a[4,6]<-0> contour(a)則可以跑出下面圖片http://imgur.com/X5tUgP7問題來了

1.matrix(1,10,10)  不是 10*10 裡面都1的矩陣嗎   那麼它的z在哪裡?

2.contour(10,20,200) 出現錯誤訊息  是錯在哪裡

3.若我直接 contour(matrix(1,10,10))  則會出現 整張白的... 為什麼咧~?



*我沒有學過等高線圖 之類的  如果有理解錯誤  請大大鞭小力一點  謝謝

[環境敘述]:
R version 3.3.3 (2017-03-06)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 8.1 x64 (build 9600)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.3

--","R_Language"
"863","M.1492249001.A.66C","jas9441314","問題","把資料和LIST合併",2017-04-15 17:36:38,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

入門

[問題敘述]:
各位高手大家好 小弟不才有程式方面請假

我有個資料共有四個變數 而我用其中的兩個變數丟進function中產生了一個參數的list
然後我想要把那個參數的list對應回去原本資料中的其他變數

例如

a 變數3 變數4
13.6 1000 2000

我目前只有a一個list 想把他擴展成類似這樣的一個list
我有嘗試過用merge 但是function跑出來的參數和原本資料沒有一樣的變數
所以merge後就會變以下這樣

a 變數3 變數4
13.6 1000 2000
15.8 1000 2000
14.7 1000 2000

請各位高手幫幫小弟解解惑...謝謝大家

[程式範例]:

[環境敘述]:

[關鍵字]:選擇性，也許未來有用--","R_Language"
"864","M.1492199000.A.65D","jobs","問題","dataframe 轉 多維array",2017-04-15 03:43:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我想把一個dataframe轉換成一個多維array

假設我們有下面資料
df = iris
df$Species = as.numeric(as.factor(df$Species))
df$Group = 1:5

請問如何才能得到一個4維array: [3, 5, 10, 4], 其中
3代表3種Species
5代表每個Species下面有5個Group
10代表每個Species-Group組合下有10 rows
4代表4 columns

--","R_Language"
"865","M.1492181442.A.5B4","celestialgod","問題","Re: 要如何將$之後字串用迴圈寫",2017-04-14 22:50:38,NA,NA,"※ 引述《jklkj (誠實可靠小郎君)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::: 我目前用RPostgreSQL把資料庫的資料抓下來，但是只要是中文的欄位都變成亂碼: 我想用比較簡單的方法把UTF8轉成big5:: [程式範例]::: df$addr <- iconv(df$addr, ""UTF8"", ""big5""): 如上述，我目前是用iconv一個一個轉，想請問一下我要怎麼把迴圈寫進$之後: 或是可以告訴我關鍵字或概念: 或是有沒有更簡便的方法:提醒：下面程式沒有判斷factor，如有factor請自行加入判斷式# data.table做法：library(data.table)
DT[ , lapply(.SD, function(x)iconv(x,""UTF8"", ""BIG5""))]

# 如果有numeric或是integer column的話：
DT[ , lapply(.SD, function(x){
  if (is.character(x))
    iconv(x,""UTF8"", ""BIG5"")
  } else return(x)})]# dplyr做法：library(dplyr)
DF %>% mutate_each(funs(iconv(., ""UTF8"", ""BIG5"")))

# 如果有numeric或是integer column的話：
DF %>% mutate_if(is.character, funs(iconv(., ""UTF8"", ""BIG5"")))# base函數解法：evalExpr <- lapply(names(DF), function(x){
   bquote(iconv(.(as.symbol(x)), ""UTF8"",  ""BIG5""))
})
do.call(function(...) transform(DF, ...), evalExpr)

# 如果有numeric或是integer column的話：
evalExpr <- lapply(names(DF)[sapply(DF, is.character)],
               function(x) bquote(iconv(.(as.symbol(x)), ""UTF8"",  ""BIG5"")))
do.call(function(...) transform(DF, ...), evalExpr)


base函數解法應該是最難的XDD

base當然還可以用其他大大提到的方式直接做：

lapply(names(DF), function(x){
   iconv(DF[[x]], ""UTF8"",  ""BIG5"")
})

或是

lapply(names(DF)[sapply(DF, is.character)], function(x){
   iconv(DF[[x]], ""UTF8"",  ""BIG5"")
})

只是除了要多轉一次data.frame之外，第二個還要把numeric, integer column併回去

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"866","M.1492178863.A.5D8","celestialgod","問題","Re: RODBC做sqlQuery時，時間條件的設定",2017-04-14 22:07:39,NA,NA,"※ 引述《giock18 (小武)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想使用R的RODBC跟ORACLE資料庫相聯，並且撈回上個月月份的資料。: 在我的資料表表單中，有一欄ACTDATE記錄時間，R讀取時是POSIXct格式: 假設我想抓上個月份的資料，我該怎麼做？: [程式範例]:: 程式不長我直接貼: Sys.setenv(TZ = ""UTC"") #設定時間: dataframe <- sqlQuery(conn,  ""SELECT ACTDATE,SECTOR,STD,STA:                               FROM TABLE:                               where months(ACTDATE) = months(Sys.Date())-1:                               Order by ACTDATE  "")同時比較年跟月的話可以用 trunc 代替

如果用ROracle可以這樣寫：

library(ROracle)
Sys.setenv(TZ = ""Asia/Taipei"", ORA_SDTZ = ""Asia/Taipei"")

df <- dbGetQuery(conn, ""SELECT ACTDATE,SECTOR,STD,STA FROM TABLE
                      where trunc(ACTDATE, 'MM') = trunc(:SYS_DATE, 'MM')-1
                      order by ACTDATE"", data.frmae(SYS_DATE = Sys.Date()))


但是其實Oracle SQL改成下面這樣就可以跑了：

SELECT ACTDATE,SECTOR,STD,STA FROM TABLE
  where trunc(ACTDATE, 'MM') = trunc(SYSDATE, 'MM') - 1
  order by ACTDATE

ROracle其他好處像是：

1. 不需要像是ODBC要去config系統參數，直接使用TNSNAME就可以連線

2. 更多方便的API可以使用

3. 效能比RODBC好

其他參考這篇：https://blogs.oracle.com/R/entry/r_to_oracle_database_connectivity我寫過一篇相關的blogger，可以參考一下：https://goo.gl/2avjU2但是是在linux上編譯

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"867","M.1492162948.A.C39","giock18","問題","RODBC做sqlQuery時，時間條件的設定",2017-04-14 17:42:26,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想使用R的RODBC跟ORACLE資料庫相聯，並且撈回上個月月份的資料。

在我的資料表表單中，有一欄ACTDATE記錄時間，R讀取時是POSIXct格式

假設我想抓上個月份的資料，我該怎麼做？

[程式範例]:

程式不長我直接貼

Sys.setenv(TZ = ""UTC"") #設定時間
dataframe <- sqlQuery(conn,  ""SELECT ACTDATE,SECTOR,STD,STA
                              FROM TABLE
                              where months(ACTDATE) = months(Sys.Date())-1
                              Order by ACTDATE  "")

感覺一定是怪怪的，但也不知該如何改

[環境敘述]:sessionInfo()R version 3.3.3 (2017-03-06)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] mail_1.0       xlsx_0.5.7     xlsxjars_0.6.1 rJava_0.9-8    RODBC_1.3-14loaded via a namespace (and not attached):[1] tools_3.3.3[關鍵字]:RODBC--","R_Language"
"868","M.1492160213.A.C7C","locka","問題","Re: 反向地理編碼(用座標查行政區)",2017-04-14 16:56:50,NA,NA,"剛好有做過同樣的事情
可以使用sp package 的 SpatialPointsDataFrame()跟over()

(誠如cywhale大大提到的，先匯入台灣行政區shape file檔案)


df為所求經緯度的data frame
twn_shp為匯入的shape file (class為SpatialPolygonsDataFrame)


spdf <- SpatialPointsDataFrame(coords=(df$lng,df$lat), data=df,
              proj4string = CRS(""+proj=longlat +ellps=GRS80 +no_defs""))

result <- over(spdf, twn_shp)

over會回傳一個新的SpatialPointsDataFrame

其中
result$Substitute為村里
result$T_Name為行政區
result$C_Name為都市...


之前研究這個的時候才發現sp的over很強大
(help over會看到一整份pdf檔...有很多有趣的用法)

這應該是更快更直接的方法，分享給大家~

ps.
是說有人知道可以幫忙解釋proj4string那段嗎 哈哈
那堿O我上網看別人的範例這樣下參數，
應該跟指定座標系統有關 不過不清楚其含義※ 引述《BUQ (固執又暴燥)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 一個月新手(沒寫過程式，R 是我的第一次): [問題敘述]::: 小弟有41*86=3526筆資料: 每個資料都是 WGS84座標系統: 要如何知道每個座標所在的行政區...例如：新北市 土城區: 各方高手有什麼解法比較快的....: 小弟現在是一個解法都沒有: 或者   相關的套件   關鍵字  也行: 座標格式如下  一行經度  一行緯度: [1] 121.998: [1] 21.52036:: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: R version 3.3.3 (2017-03-06): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200):: [關鍵字]: 反向地理編碼--","R_Language"
"869","M.1492143808.A.CC7","BUQ","問題","反向地理編碼(用座標查行政區)",2017-04-14 12:23:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除一個月新手(沒寫過程式，R 是我的第一次)[問題敘述]:小弟有41*86=3526筆資料每個資料都是 WGS84座標系統要如何知道每個座標所在的行政區...例如：新北市 土城區各方高手有什麼解法比較快的....小弟現在是一個解法都沒有或者   相關的套件   關鍵字  也行座標格式如下  一行經度  一行緯度[1] 121.998[1] 21.52036[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，R version 3.3.3 (2017-03-06)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]: 反向地理編碼


--","R_Language"
"870","M.1492142292.A.C75","jklkj","問題","要如何將$之後字串用迴圈寫",2017-04-14 11:58:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我目前用RPostgreSQL把資料庫的資料抓下來，但是只要是中文的欄位都變成亂碼我想用比較簡單的方法把UTF8轉成big5[程式範例]:df$addr <- iconv(df$addr, ""UTF8"", ""big5"")如上述，我目前是用iconv一個一個轉，想請問一下我要怎麼把迴圈寫進$之後或是可以告訴我關鍵字或概念或是有沒有更簡便的方法[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"871","M.1492134306.A.319","andrew43","情報","RStudio Mac 1.0.136 版中文輸入 bug",2017-04-14 09:45:03,NA,NA,"MAC 版 RStuidio 目前的穩定版 1.0.136 存在
中文（或其它非英文字符）輸入的 bug，
請 macOS 10.12.4 使用者注意一下。

以我輸入中文為例，
拚字過程會直接將拚字送出而非組字後再送出，
非常痛苦。
在項 bug 在 preview 版 v1.0.143 已經解決，
可以先到https://www.rstudio.com/products/rstudio/download/preview/下載 preview 版來繞過這個 bug。

--","R_Language"
"872","M.1492090990.A.045","YangPeiHung","問題","Re: 表格轉換生成新標籤與區間對照",2017-04-13 21:43:07,NA,NA,"後來我的長這樣

sets<-function(start, end, group, overlap=length(unique(group))) {
  dd<-rbind(data.frame(pos=start, event=1), data.frame(pos=end, event=-1))
  dd<-aggregate(event~pos, dd, sum)
  dd<-dd[order(dd$pos),]
  dd$open <- cumsum(dd$event)
  r<-rle(dd$open>=overlap)
  ex<-cumsum(r$lengths-1 + rep(1, length(r$lengths)))
  sx<-ex-r$lengths+1
  cbind(dd$pos[sx[r$values]],dd$pos[ex[r$values]+1])
}

#維持原本我intersect的部分

library(foreach)
library(iterators)
library(data.table)
library(pipeR)

out= NULL
#準備給for loop吃
for(i in 1:10){
  examTable1<-as.data.table(subset(examTable, examTable$examID == i)[,-2])
  #把examID拿掉
  with(examTable1, sets(Start, End, studentID,
                        length(unique(examTable1$studentID)))) ->intersect
  colnames(intersect)<-c(""Start"", ""End"")
  as.data.table(intersect)->intersect
  setkey(intersect, Start, End)

  finalDT <- foreach(it = isplit(examTable1, examTable1$studentID),
             .final = rbindlist) %do%
  {
    foverlaps(it$value, intersect, type = ""any"", nomatch = 0) %>>%
      `[`(j = average := average) %>>%
      #這邊因為已經平均過了所以不用再做一次除法，那是平均一秒內的分數
      `[`(j = .(Start, End, studentID, average))
  }
  #開始不一樣，我把你後面dcast跟填入colnames的地方改成下面這樣
  tmp <- as.data.frame.matrix(xtabs(average ~ Start + studentID, finalDT))
  row.names(tmp)<-paste0(i,""_"",intersect$Start,""_"",intersect$End)
  out=rbind(out,tmp)
}


如果從修改的地方換你的code 就會出現我上一篇推文說的錯誤
Error in inherits(object, ""formula"") ：傳遞了2個引數給'length'
但它需要1個

所以怎麼會傳兩個出去就是目前看不出來的地方，但是用xtabs就不會這樣

--","R_Language"
"873","M.1492002777.A.1A7","celestialgod","問題","Re: 表格轉換生成新標籤與區間對照",2017-04-12 21:12:52,NA,NA,"※ 引述《YangPeiHung (楊培宏)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前有4個學生與不同科目的試題共10份，由電腦隨機控制他們可以作答的時間間隔，: 想要觀察的是他們在同時作答的時候的考試表現，資料格式如下: Examtable: StudentID   examID   start(sec)   end(sec)   average(score/sec): 001             1            A          D                 0.05: 001             1            G          K                 0.63: ...以此類推: 因為要轉換成一個自創的標籤為：(examID)-(start)-(end): 要觀察他們的同時作答秒數區間，就要把每個人在同一份試卷的作答秒數區間取交集: 例如：紅色為有作答的秒數: start|ABCD|EF|GHIJK|LMNO|PQRS|TUVW|XYZ12345|end   學生1: start|ABCDE|FGH|IJKLMN|OPQ|RSTUVWXYZ|12|345|end   學生2: start|ABCD|EFGH|IJK|LMNOPQ|RS|TUVW|XYZ|12|345|end   取交集: 新的標籤就是1-A-D  1-I-K  1-R-S  1-X-Z  1-3-5 ，以此類推，: 並且做出一個新的table: rownames就是新標籤，colnames是studentID 中間要填入的就是average(score/sec): （這裡假設在作答秒數內分數分配為uniform，: 並且每份試卷的最開始與最後結束考試時間等長）:                  StudentID_1    StudentID_2   ......: 1-(A)-(D)               0.05      score/sec   ......: 1-(I)-(K)               0.63      score/sec   ......: ....以此類推: [程式範例]:: 取intersect的程式碼運行上沒有問題: 但是不知道如何回測並且生成新標籤與填入平均分數: for (i in 1:10){: ExamTemp<- Examtable[,c(1:4)]: ExamTemp1<-subset(ExamTemp, ExamTemp$examID ==""i"")[,-2]: intersect<-function(start, end, id, overlap=length(unique(id))) {:   dd<-rbind(data.frame(pos=start, event=1), data.frame(pos=end, event=-1)):   dd<-aggregate(event~pos, dd, sum):   dd<-dd[order(dd$pos),]:   dd$open <- cumsum(dd$event):   r<-rle(dd$open>=overlap):   ex<-cumsum(r$lengths-1 + rep(1, length(r$lengths))):   sx<-ex-r$lengths+1:   cbind(dd$pos[sx[r$values]],dd$pos[ex[r$values]+1]): }: with(ExamTemp1, intersect(Start,End,StudentID,length(unique(StudentID)))) ->df: 如何利用df這個intersect的矩陣回測原本的資料並且填入新標籤與平均: }: [環境敘述]:: R-3.3.2這問題，我覺得解起來好難XD

而且我看不懂你的intersect的思維Orz，只好自己幹一個XD

好讀版：https://pastebin.com/8R1iXjczlibrary(foreach)
library(iterators)
library(data.table)
library(pipeR)

# data generation
set.seed(10)
k <- 1
outList <- foreach(v = iter(matrix(sample(3:29, 6000, TRUE), 1000),
                            by = ""row"")) %:% when(k <= 4) %do%
  {
    if (all(diff(sort(v)) > 2)) {
      k <- k + 1
      return(data.table(studentID = k, matrix(c(1, sort(v), 31), 4, 2, TRUE,
                                              list(NULL, c(""Start"", ""End"")))))
    } else return(NULL)
  }
outDT <- rbindlist(outList) %>>%
  `[`(j = `:=`(studentID = match(studentID, sort(unique(studentID))),
               avgScore = abs(rnorm(nrow(.)))))
#     studentID Start End  avgScore
#  1:         1     1   3 0.4605151
#  2:         1     6  10 0.2350253
#  3:         1    19  22 0.6432573
#  4:         1    25  31 0.9131981
#  5:         2     1   4 0.9882860
#  6:         2     7  11 0.1127413
#  7:         2    16  20 1.4900499
#  8:         2    26  31 0.4432356
#  9:         3     1   5 1.3623441
# 10:         3    10  14 1.0452357
# 11:         3    21  25 0.2339315
# 12:         3    28  31 2.5524180
# 13:         4     1   4 1.7687187
# 14:         4     7  10 0.6595706
# 15:         4    19  23 0.3707332
# 16:         4    26  31 0.5928033

# find overlap
iter <- isplit(outDT, outDT$studentID)
resDT <- copy(iter$nextElem()$value) %>>% `[`(j = `:=`(studentID = NULL))
setkey(resDT, Start, End)
while (TRUE) {
  v <- tryCatch(iter$nextElem(), error = function(e) e)
  if (any(class(v) == ""error""))
    break
  resDT <- foverlaps(v$value, resDT, type = ""any"", nomatch = 0) %>>%
    `[`(j = `:=`(Start = pmax(Start, i.Start), End = pmin(End, i.End))) %>>%
    `[`(j = .(Start, End))
  setkey(resDT, Start, End)
}
#    Start End
# 1:     1   3
# 2:    10  10
# 3:    28  31

# 得到最後的答案
finalResDT <- foreach(it = isplit(outDT, outDT$studentID), .final =
rbindlist) %do%
  {
    foverlaps(it$value, resDT, type = ""any"", nomatch = 0) %>>%
      `[`(j = avgScore := (i.End-End+1)/(Start-i.Start+1) * avgScore) %>>%
      `[`(j = .(Start, End, studentID, avgScore))
  } %>>% dcast(Start + End ~ studentID, val.var = ""avgScore"") %>>%
  setnames(as.character(1:(ncol(.)-2)), paste0(""studentID-"", 1:(ncol(.)-2)))
#    Start End studentID-1 studentID-2 studentID-3 studentID-4
# 1:     1   3  0.46051506  1.97657201    4.087032   3.5374375
# 2:    10  10  0.04700506  0.05637067    5.226179   0.1648927
# 3:    28  31  0.22829953  0.14774520    2.552418   0.1976011


有十個考試就把後面兩段code包成函數，一次丟一個考試的outDT進來計算

最後合併再記得多加一個examID回來就好

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"874","M.1491966566.A.D1A","YangPeiHung","問題","表格轉換生成新標籤與區間對照",2017-04-12 11:09:24,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

目前有4個學生與不同科目的試題共10份，由電腦隨機控制他們可以作答的時間間隔，
想要觀察的是他們在同時作答的時候的考試表現，資料格式如下

Examtable

StudentID   examID   start(sec)   end(sec)   average(score/sec)
001             1            A          D                 0.05
001             1            G          K                 0.63

...以此類推

因為要轉換成一個自創的標籤為：(examID)-(start)-(end)
要觀察他們的同時作答秒數區間，就要把每個人在同一份試卷的作答秒數區間取交集

例如：紅色為有作答的秒數

start|ABCD|EF|GHIJK|LMNO|PQRS|TUVW|XYZ12345|end   學生1
start|ABCDE|FGH|IJKLMN|OPQ|RSTUVWXYZ|12|345|end   學生2
start|ABCD|EFGH|IJK|LMNOPQ|RS|TUVW|XYZ|12|345|end   取交集

新的標籤就是1-A-D  1-I-K  1-R-S  1-X-Z  1-3-5 ，以此類推，
並且做出一個新的table

rownames就是新標籤，colnames是studentID 中間要填入的就是average(score/sec)
（這裡假設在作答秒數內分數分配為uniform，
並且每份試卷的最開始與最後結束考試時間等長）
                 StudentID_1    StudentID_2   ......
1-(A)-(D)               0.05      score/sec   ......
1-(I)-(K)               0.63      score/sec   ......

....以此類推

[程式範例]:

取intersect的程式碼運行上沒有問題
但是不知道如何回測並且生成新標籤與填入平均分數

for (i in 1:10){

ExamTemp<- Examtable[,c(1:4)]
ExamTemp1<-subset(ExamTemp, ExamTemp$examID ==""i"")[,-2]

intersect<-function(start, end, id, overlap=length(unique(id))) {
  dd<-rbind(data.frame(pos=start, event=1), data.frame(pos=end, event=-1))
  dd<-aggregate(event~pos, dd, sum)
  dd<-dd[order(dd$pos),]
  dd$open <- cumsum(dd$event)
  r<-rle(dd$open>=overlap)
  ex<-cumsum(r$lengths-1 + rep(1, length(r$lengths)))
  sx<-ex-r$lengths+1
  cbind(dd$pos[sx[r$values]],dd$pos[ex[r$values]+1])

}
with(ExamTemp1, intersect(Start,End,StudentID,length(unique(StudentID)))) ->df如何利用df這個intersect的矩陣回測原本的資料並且填入新標籤與平均}


[環境敘述]:

R-3.3.2

--","R_Language"
"875","M.1491902076.A.779","joetsai","分享","(已送出) Analyzing Baseball Data With R",2017-04-11 17:14:34,NA,NA,"書名: Analyzing Baseball Data With R

參考網址:http://www.books.com.tw/products/F013021273贈書原因: 因為用不到  希望能幫助到有緣人

聯絡方式: 站內信


--","R_Language"
"876","M.1491810414.A.CD1","clansoda","問題","正則表示式",2017-04-10 15:46:50,NA,NA,"各位好, 我現在有一個字串 例如是恐龍/暴龍 3/7

我想用一個正則表示式抓後面這個東西 3/7 而不要前面的恐龍/暴龍

我用的是str_extract_all(""\\d*\\/\\d*"")

我覺得應該是用括號把其中某個部份括起來 但我一直做不出來

目前這樣跑出來會變成一個list (1)/ (2) 3/7

後面是我要的 但是前面我不要 想請問正則表示式該怎麼寫會比較好

--","R_Language"
"877","M.1491794531.A.2B4","celestialgod","分享","Grid Search in data.table",2017-04-10 11:22:06,NA,NA,"[關鍵字]: grid seach, data.table

[出處]:http://chingchuan-chen.github.io/posts/2017/04/10/grid-search-in-data.table[重點摘要]:

前不久有人傳了一篇grid search in tidyverse給我看~~https://www.r-bloggers.com/grid-search-in-the-tidyverse/我就仿照著也寫了一篇用data.table + mapply /

data.table + foreach + iterators去做

有興趣的人可以參考看看

--","R_Language"
"878","M.1491748333.A.219","kkagt","問題","stack overflow訊息",2017-04-09 22:32:11,NA,NA,"[軟體熟悉度]:
新手

[問題敘述]:
手邊資料想跑randomForest時出現的錯誤訊息
Error: protect(): protection stack overflow
查過如何設定stack容量，好像是 --max-ppsize，不過不知道應該在哪輸入

另一個問題就是，即使增加stack容量之後還是有可能出現錯誤
因為目前只是用1/25的變數(約20000個)測試就overflow了...
不知道有沒有什麼比較好的解決方法...


[環境敘述]:
R的版本為3.3.3, x64
作業系統 win7、win10
ram:8g
package:randomForest


--","R_Language"
"879","M.1491708167.A.6DF","locka","問題","計算pdf曲線下面積並作圖",2017-04-09 11:22:44,NA,NA,"各位好，

有時候用ggplot可以快速畫出圖形，不過卻不太清楚要怎麼做一些進階的操作，想請教大家有沒有辦法畫出pdf後標出曲線下面積90%的位置？

例如：以下程式可以畫出三個種類的pdf
有辦法找到各自quantile=90的位置並標記或是填滿顏色嗎？
(或是只找出90%的值也可以)
ggplot(iris, aes(Petal.Length, color= Species)) + geom_density()

有試過用geom_quantile()不過他需要x跟y
而圖中的y(也就是density)是由ggplot產生的，所以不知道怎麼寫…

先謝謝大家了∼

--","R_Language"
"880","M.1491621735.A.9B7","bluecadence","問題","Re: 網頁爬蟲xpath設定問題",2017-04-08 11:22:10,NA,NA,"用第一頁當例子:

url <- ""https://www.zalora.com.tw/_c/rpc?&req=%7B%22method%22%3A%22Costa.ListCatalogProducts%22%2C%22params%22%3A%5B%7B%22category_id%22%3A%5B%224%
       22%5D%2C%22limit%22%3A99%2C%22offset%22%3A0%2C%22segment%22%3A%22women%
       22%2C%22dir%22%3A%22desc%22%2C%22sort%22%3A%22popularity%22%2C%22catalo
       g_type%22%3A%22%22%2C%22url_key%22%3A%22%2Fwomen%2Fshoes%22%7D%5D%7D&
       lang=zh""
library(jsonlite)
x <- fromJSON(url,flatten=T)

東西都在 x 裡，就自己清理一下囉※ 引述《hslmax (越前)》之銘言：: 程式諮詢:我想用Ｒ來網頁爬蟲，將購物網站的商品和價格給下載下來。: 但是，以下這個網站的結構對新手的我來說怎麼try都失敗，想請教各位∼: 謝謝！: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 指定xpath收集商品的名稱及價格，但是筆者的能力無法正確指定xpath的路徑: [程式範例]:: #Target webpage: base_url <- ""https://www.zalora.com.tw"": url <- ""https://www.zalora.com.tw/women/shoes/?category_id=4&Page="": ix <- seq(1,5,1): df.product.info <- data.frame(): for (i in ix) {:   t_url <- paste0(url, i):   doc   <- read_html(t_url, encoding = ""UTF-8""):   xpath <- '//div[@class=""b-catalogList__itm js-catalogList__itm hasOverlay:  unit size1of3""]':   product.brand <- xml_text(xml_find_all(doc, xpath)): ......}: 測試結果：0 obs of 1 variable.: [環境敘述]:: 請提供 sessionInfo() 的輸出結果，: macOS 10.12.4、R3.3.2: [關鍵字]:xpath--","R_Language"
"881","M.1491618984.A.B3F","BUQ","問題","不使用迴圈的方法",2017-04-08 10:36:21,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除一個月新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想要不使用for 以向量來改寫[程式範例]:背景library(ncdf4)input_nc <- nc_open(""C:/buq/sechiba_history_sample.nc"")#data是一個list,內含的list又包了小list,包很多層result<- list()  #做一個空的listfor (i in 1:input_nc$ndims ) {result[[input_nc$dim[[i]]$name]] <- input_nc$dim[[i]]$vals#  同時建立內部的子list的名字和值  <- input_nc$dim$y$vals}以上是別人的成功寫法================================================以下 我想要不使用for 以向量來改寫i<- (1:input_nc$ndims)result[[input_nc$dim[[i]]$name]] <- input_nc$dim[[i]]$vals錯誤碼如下Error in input_nc$dim[[i]] : recursive indexing failed at level 3[環境敘述]:R version 3.3.3 (2017-03-06)[關鍵字]:批次 賦值 for--","R_Language"
"882","M.1491591771.A.C81","hslmax","問題","網頁爬蟲xpath設定問題",2017-04-08 03:02:48,NA,NA,"程式諮詢:我想用Ｒ來網頁爬蟲，將購物網站的商品和價格給下載下來。
但是，以下這個網站的結構對新手的我來說怎麼try都失敗，想請教各位∼
謝謝！

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
指定xpath收集商品的名稱及價格，但是筆者的能力無法正確指定xpath的路徑

[程式範例]:
#Target webpage
base_url <- ""https://www.zalora.com.tw""url <- ""https://www.zalora.com.tw/women/shoes/?category_id=4&Page=""ix <- seq(1,5,1)

df.product.info <- data.frame()

for (i in ix) {
  t_url <- paste0(url, i)
  doc   <- read_html(t_url, encoding = ""UTF-8"")

  xpath <- '//div[@class=""b-catalogList__itm js-catalogList__itm hasOverlay
 unit size1of3""]'
  product.brand <- xml_text(xml_find_all(doc, xpath))

......}

測試結果：0 obs of 1 variable.

[環境敘述]:
請提供 sessionInfo() 的輸出結果，
macOS 10.12.4、R3.3.2

[關鍵字]:xpath


--","R_Language"
"883","M.1491586600.A.B4C","celestialgod","問題","Re: 重複的計算寫入迴圈",2017-04-08 01:36:36,NA,NA,"※ 引述《hkopee123 (..)》之銘言：: [問題敘述]:: 我有二個數據要放在一起做分析: 可是第一部份的計算要放在一起跑模型: 第二部分則要個別分開做計算後: 再合併一起跑另外一個模型: 然後得到結果: 但我不知道該如何寫一個迴圈: 多次失敗之後   目前只會寫死的方法: 就是如果我有二筆數據就寫二個: 三筆就延長到三個   五筆就寫五次: [程式範例]:: 1. 一開始二個數據要放在一起做分析: 指定名字: http://imgur.com/a/TbVOq: 2. 第一部份的計算要放在一起共同計算: 這是計算之後分別拆開的樣子 bsol_1 和 bsol_2: 抓出來只是為了給第三步做個別計算(簡單的加減法): http://imgur.com/a/gg5cQ: 3. 第二步分別拆開數據後: 個別要做計算: 基本上迴圈內容一樣: 只是我很笨不知道怎麼寫在一起: http://imgur.com/a/lYneN: 4. 第四步也是回去第二步把需要的東西抓出來: gsol_1 與 gsol_2分別抓出來給名字: 如果有迴圈就不用寫二次: http://imgur.com/a/peXTe: 5.然後把東西再次合併一起做其他計算: http://imgur.com/a/2YGtT: 6. 新增等一下要計算的二欄: 用來收計算的結果: http://imgur.com/Al7lRia: 7. 然後再次進入迴圈做其他計算: 我一樣是寫死: 不知道要怎麼在這個迴圈裡加入我需要的回圈做計算: http://imgur.com/a/rSuFo: 8. 這步也還在上面第七步那迴圈裡面: 先把算好的merge起來 (如果三個就不能簡單的用merge): 然後把算好的gs_1 gs_2分配給第六步設定好的欄: http://imgur.com/27CpYB0: 結束。: 有人可以幫忙嗎?: 我願意提供報酬當作占用高手們時間的回饋。: 因為如果有10筆數據   重複寫死10次實在很ooxxx......: 這邊是完整的code和Rout輸出: 我也可以開teamviewer用講得  比較快: 基本上程式中只要名字是XXX_1 XXX_2的都是寫死的部分: https://goo.gl/59oiDC: 謝謝我只看得懂一小部分

我的理解是你不擅長用list這個資料架構導致你沒法用比較簡單的方式去做

例如：

我會這樣寫：

# 虛擬資料
sol <- data.frame(V1 = sample(1:2, 30, TRUE), V2 = sample(1:5, 30, TRUE),
                  V3 = rnorm(30), V4 = rnorm(30), V5 = rnorm(30))

# 每一個拆分的條件，像你bsol_1, bsol_2取的那些subset...
# 我只要更動這個list就可以設定我要跑幾組subset了
dataCond <- list(expression(V1 == 2 & V2 == 1),
                 expression(V1 == 2 & V2 == 2),
                 expression(V1 == 2 & V2 == 3),
                 expression(V1 == 2 & V2 == 4),
                 expression(V1 == 2 & V2 == 5))

# 迴圈去把每一個subset取出來
trainDataList <- lapply(dataCond, function(expr){
  sol_subset <- sol[eval(expr, sol, parent.frame()), 3L:5L]
  # then do whatever you want to
})

# 再把資料合併在一起
trainData <- do.call(rbind, trainDataList)

# 之後再跑你合併之後要跑的


上面是大概概念，我覺得你應該先去學list怎麼用才是正道...

至於怎麼學，請看置底，有很多教學


另外，迴圈那哩，其實用一個function就可以處理

資料當成input，帶進去function得到回傳資料就好

所以你可能連function的概念都沒有？！

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"884","M.1491576300.A.A30","hkopee123","問題","重複的計算寫入迴圈",2017-04-07 22:44:54,NA,NA,"[問題敘述]:
已解決","R_Language"
"885","M.1491392032.A.756","celestialgod","問題","Re: 時間做分類",2017-04-05 19:33:47,NA,NA,"※ 引述《CAPPON (JI3)》之銘言：: 我有一個data.frame: 要將時間欄位做分類 , 以早上7點為卡點: 用天來做分類: 因為有 好幾萬筆的資料,如果用迴圈來判斷會比較麻煩: 這可以怎麼做呢???: 謝謝: 2017-03-31 07:44:50.257375  -->  2017-03-31: 2017-03-31 15:27:13.210377 --> 2017-03-31: 2017-04-01 03:29:17.611750  --> 2017-03-31: 2017-04-01 15:29:17.611750  --> 2017-04-01: 2017-04-02  06:29:17.611750  --> 2017-04-01library(lubridate)
timeStr <- c(""2017-03-31 07:44:50.257375"", ""2017-03-31 15:27:13.210377"",
             ""2017-04-01 03:29:17.611750"", ""2017-04-01 15:29:17.611750"",
             ""2017-04-02 06:29:17.611750"")
as_date(parse_date_time(timeStr, ""YmdHMOS"") - as.difftime(7, units = ""hours""))
# [1] ""2017-03-31"" ""2017-03-31"" ""2017-03-31"" ""2017-04-01"" ""2017-04-01""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"886","M.1491360311.A.693","CAPPON","問題","時間做分類",2017-04-05 10:45:08,NA,NA,"我有一個data.frame
要將時間欄位做分類 , 以早上7點為卡點
用天來做分類
因為有 好幾萬筆的資料,如果用迴圈來判斷會比較麻煩
這可以怎麼做呢???
謝謝

2017-03-31 07:44:50.257375  -->  2017-03-31
2017-03-31 15:27:13.210377 --> 2017-03-31
2017-04-01 03:29:17.611750  --> 2017-03-31
2017-04-01 15:29:17.611750  --> 2017-04-01
2017-04-02  06:29:17.611750  --> 2017-04-01

--","R_Language"
"887","M.1491327979.A.06C","lilian0330","問題","Re: while loop 不知道怎麼寫",2017-04-05 01:46:17,NA,NA,"一部分原始資料

## Distance matrix #實際上有十幾個站位
      COM01  AR01  PA01  PA02
COM01 0      8     112   110
AR01  8      0     118   116
PA01  112    118   0     4
PA02  110    116   4     0

## spp matrix #實際上有十萬多個物種
      COM01  AR01  PA01  PA02
OTU1  7774   4     310   12
OTU2  5      0     81    9
OTU3  0      0     71    1
OTU4  1      0     0     0

把error的資訊跟traceback留在下面：


 Error in dist.mat[pair[1], pair[2]] : subscript out of bounds
19.
FUN(newX[, i], ...)
18.
apply(., 2, function(pair) {
    dist.mat[pair[1], pair[2]]
})
17.
function_list[[i]](value)
16.
freduce(value, `_function_list`)
15.
`_fseq`(`_lhs`)
14.
eval(expr, envir, enclos)
13.
eval(quote(`_fseq`(`_lhs`)), env, env)
12.
withVisible(eval(quote(`_fseq`(`_lhs`)), env, env))
11.
y[y != 0] %>% names(.) %>% combn(., 2) %>% apply(., 2, function(pair) {
    dist.mat[pair[1], pair[2]]
}) %>% max(.)
10.
FUN(newX[, i], ...)
9.
apply(., 1, function(y) {
    if (sum(y >= 2)) {
        y[y != 0] %>% names(.) %>% combn(., 2) %>% apply(., 2,
            function(pair) { ...
8.
function_list[[k]](value)
7.
withVisible(function_list[[k]](value))
6.
freduce(value, `_function_list`)
5.
`_fseq`(`_lhs`)
4.
eval(expr, envir, enclos)
3.
eval(quote(`_fseq`(`_lhs`)), env, env)
2.
withVisible(eval(quote(`_fseq`(`_lhs`)), env, env))
1.
OTU_location[, c(""COM01"", ""AR01"", ""PA01"", ""PA02"", ""GJ01"", ""QK01"",
    ""AK03"", ""SH01"", ""SI02"", ""TA01"", ""GG01"", ""DSZ01"", ""SM22"",
    ""LGH03"")] %>% as.matrix %>% apply(., 1, function(y) {
    if (sum(y >= 2)) { ...※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: 大致上這樣做。: ## site 座標: location <-:   data.frame(:     site.name = c(""site1"", ""site2"", ""site3""),:     x = c(3,1,16),:     row.names = 1:   ): ## site 距離矩陣: dist.mat <-:   dist(as.matrix(location)) %>%:   as.matrix: dist.mat: ## 各site物種出現豐度: spp.dt <-:   data.frame(:     spp = c(""A"", ""B""),:     site1 = c(5,4),:     site2 = c(0,7),:     site3 = c(20,2):   ): library(magrittr): spp.dt[, c(""site1"", ""site2"", ""site3"")] %>%:   as.matrix %>%:   apply(., 1, function(y) {:     y[y != 0] %>%:       names(.) %>%:       combn(., 2) %>%:       apply(., 2, function(pair) {:         dist.mat[pair[1], pair[2]]:       }) %>%:       max(.):   }): ※ 引述《lilian0330 (俐俐)》之銘言：: : 大家好，剛開始統計軟體入門，寫過Matlab跟R: : 但最近在處理資料常常不知道怎麼解決error...: : [問題]: : 要做物種出現的「最大距離」，例如有三個地點，在三個點之間有三個不相等的距離。: : 而物種A出現在site1跟site3，所以距離就是distance(1-3): : 物種B出現在site1,2,3，但因為2跟3比較遠，最大距離是distance(2-3): : 我目前已經做出來兩兩site之間的distance matrix: : 但是我不知道用while迴圈怎麼讓R自動判斷這個物種的「最大距離」: : 資料形式: : Species｜ site1 ｜ site2 ｜ site3 ｜ max_distance: : -------------------------------------------------------: : A      ｜   5   ｜   0   ｜  20   ｜ distance(1-3): : B      ｜   4   ｜   7   ｜  2    ｜ distance(2-3): : 我目前想到的邏輯是: : table[1,2]-table[1,3]!=table[1,2]｜table[1,3]: : 依序做成這個物種的「所有距離」，最後再用max()選擇「最大距離」: : 想問問大家如果寫成while loop怎麼寫比較好呢?: : [環境敘述]:: : R version 3.3.2 (2016-10-31): : Platform: x86_64-w64-mingw32/x64 (64-bit): : Running under: Windows >= 8 x64 (build 9200): : locale:: : [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: : (Traditional)_Taiwan.950: : [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: : [5] LC_TIME=Chinese (Traditional)_Taiwan.950: : attached base packages:: : [1] stats     graphics  grDevices utils     datasets  methods   base: : other attached packages:: : [1] sp_1.2-4             phyloseq_1.19.1      BiocInstaller_1.24.0: : readxl_0.1.1         ggplot2_2.2.1: : [6] vegan3d_1.0-1        vegan_2.4-2          lattice_0.20-34: :  permute_0.9-4: : loaded via a namespace (and not attached):: : Error in x[[""Version""]] : subscript out of bounds: : In addition: Warning messages:: : 1: In FUN(X[[i]], ...) :: :   DESCRIPTION file of package 'Rcpp' is missing or broken: : 2: In FUN(X[[i]], ...) :: :   DESCRIPTION file of package 'jsonlite' is missing or broken--","R_Language"
"888","M.1491318856.A.265","wei781117","問題","生成隨機變數 後的 驗證",2017-04-04 23:14:14,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)




想請問

自行寫function
生成出隨機變數後

有沒有方法  可以驗證生出來的準不準嗎？？
(有內建指令   純粹練習寫模擬)


想過的方法：

1. 卡方適合度檢定 => 連續型 r.v. 無法做

2. 取平均.變異數比較實際值   =>  有些不存在   取出來太飄


--","R_Language"
"889","M.1491299743.A.AAF","andrew43","問題","Re: while loop 不知道怎麼寫",2017-04-04 17:55:40,NA,NA,"大致上這樣做。

## site 座標
location <-
  data.frame(
    site.name = c(""site1"", ""site2"", ""site3""),
    x = c(3,1,16),
    row.names = 1
  )

## site 距離矩陣
dist.mat <-
  dist(as.matrix(location)) %>%
  as.matrix
dist.mat

## 各site物種出現豐度
spp.dt <-
  data.frame(
    spp = c(""A"", ""B""),
    site1 = c(5,4),
    site2 = c(0,7),
    site3 = c(20,2)
  )

library(magrittr)
spp.dt[, c(""site1"", ""site2"", ""site3"")] %>%
  as.matrix %>%
  apply(., 1, function(y) {
    y[y != 0] %>%
      names(.) %>%
      combn(., 2) %>%
      apply(., 2, function(pair) {
        dist.mat[pair[1], pair[2]]
      }) %>%
      max(.)
  })※ 引述《lilian0330 (俐俐)》之銘言：: 大家好，剛開始統計軟體入門，寫過Matlab跟R: 但最近在處理資料常常不知道怎麼解決error...: [問題]: 要做物種出現的「最大距離」，例如有三個地點，在三個點之間有三個不相等的距離。: 而物種A出現在site1跟site3，所以距離就是distance(1-3): 物種B出現在site1,2,3，但因為2跟3比較遠，最大距離是distance(2-3): 我目前已經做出來兩兩site之間的distance matrix: 但是我不知道用while迴圈怎麼讓R自動判斷這個物種的「最大距離」: 資料形式: Species｜ site1 ｜ site2 ｜ site3 ｜ max_distance: -------------------------------------------------------: A      ｜   5   ｜   0   ｜  20   ｜ distance(1-3): B      ｜   4   ｜   7   ｜  2    ｜ distance(2-3): 我目前想到的邏輯是: table[1,2]-table[1,3]!=table[1,2]｜table[1,3]: 依序做成這個物種的「所有距離」，最後再用max()選擇「最大距離」: 想問問大家如果寫成while loop怎麼寫比較好呢?: [環境敘述]:: R version 3.3.2 (2016-10-31): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] sp_1.2-4             phyloseq_1.19.1      BiocInstaller_1.24.0: readxl_0.1.1         ggplot2_2.2.1: [6] vegan3d_1.0-1        vegan_2.4-2          lattice_0.20-34:  permute_0.9-4: loaded via a namespace (and not attached):: Error in x[[""Version""]] : subscript out of bounds: In addition: Warning messages:: 1: In FUN(X[[i]], ...) ::   DESCRIPTION file of package 'Rcpp' is missing or broken: 2: In FUN(X[[i]], ...) ::   DESCRIPTION file of package 'jsonlite' is missing or broken--","R_Language"
"890","M.1491297343.A.DC0","bedroom0204","問題","group_by後能否篩選前n筆資料運算",2017-04-04 17:15:40,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個資料格式test為：
        name     type    score   reviews download
1       G1       game    3       1000    5
2       G2       game    4       2000    1000
3       G3       game    4       1000    40
4       M1       music   5       500     60
5       M2       music   2       200     30
6       M3       music   3       300     40
7       M4       music   4       400     50
8       G4       game    4       500     2000
9       G5       game    2       887     700
10      M5       music   1       600     300

依照下載數排序後，我想要取各分類的前3項進行敘述統計分析，
也就是取出編號8.2.9的game，與10.5.7的music。
目前的寫法是利用dplyr的group_by，但是在取各分類的前3項遇到困難...

test %>% arrange(-download) %>% group_by(type) %>% summarise(Mean_score =
mean(score), Mean_reviews = mean(reviews), Mean_download = mean(download) %>%
arrange(-Mean_download)

這樣子就只能取全部分類各變數的平均數而已，
如果我想要加入head(3)，該怎麼加入呢？
還是只能笨笨的先將各群拆成各自的資料檔...

然後我也想要藉此取出各分類的前3名，
之前若不分類的話，很好取出前3名的名單：
test %>% arrange(-download) %>% head(3) %>% select(name) %>% .$name
但如果要取出各族群各自的前3名，我又卡住了。

[關鍵字]:
dplyr, 分類

--

--","R_Language"
"891","M.1491296042.A.C1E","fred1541","問題","請問R程式語言合適的筆電",2017-04-04 16:54:00,NA,NA,"目前為R程式語言的新手

從頭開始學，這陣子因為未來會用資料庫的關係


想請問大家 都是用高階筆電來跑R程式語言嗎?


我目前看到 比較適合帶著跑的

Microsoft Surface Pro 4

但是看了一下規格 加到8G RAM不知道足不足夠應付R這一塊

怕買了跑不動就糟了

想詢問大家都用一般筆電或高階?



--","R_Language"
"892","M.1491294986.A.742","lilian0330","問題","while loop 不知道怎麼寫",2017-04-04 16:36:24,NA,NA,"大家好，剛開始統計軟體入門，寫過Matlab跟R
但最近在處理資料常常不知道怎麼解決error...

[問題]
要做物種出現的「最大距離」，例如有三個地點，在三個點之間有三個不相等的距離。
而物種A出現在site1跟site3，所以距離就是distance(1-3)
物種B出現在site1,2,3，但因為2跟3比較遠，最大距離是distance(2-3)

我目前已經做出來兩兩site之間的distance matrix
但是我不知道用while迴圈怎麼讓R自動判斷這個物種的「最大距離」


資料形式
Species｜ site1 ｜ site2 ｜ site3 ｜ max_distance
-------------------------------------------------------
A      ｜   5   ｜   0   ｜  20   ｜ distance(1-3)
B      ｜   4   ｜   7   ｜  2    ｜ distance(2-3)

我目前想到的邏輯是
table[1,2]-table[1,3]!=table[1,2]｜table[1,3]
依序做成這個物種的「所有距離」，最後再用max()選擇「最大距離」

想問問大家如果寫成while loop怎麼寫比較好呢?


[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] sp_1.2-4             phyloseq_1.19.1      BiocInstaller_1.24.0
readxl_0.1.1         ggplot2_2.2.1
[6] vegan3d_1.0-1        vegan_2.4-2          lattice_0.20-34
 permute_0.9-4

loaded via a namespace (and not attached):
Error in x[[""Version""]] : subscript out of bounds
In addition: Warning messages:
1: In FUN(X[[i]], ...) :
  DESCRIPTION file of package 'Rcpp' is missing or broken
2: In FUN(X[[i]], ...) :
  DESCRIPTION file of package 'jsonlite' is missing or broken



--","R_Language"
"893","M.1491239480.A.4F5","x9060000456","問題","關於類似choose挑選變數",2017-04-04 01:11:17,NA,NA,"請簡略描述你所要做的事情，或是這個程式的目的各位前輩大大大家好,
小弟寫R資歷尚淺,
最近在研究關於股市分析的quantstrat這個套件,
以下為問題求解, 假如加入指標策略如下,

add.signal(strategy.st, name = ""sigComparison"",
           arguments = list(columns = c(""K"", ""D""), relationship = ""gt""),
           label = ""KD1"")

add.signal(strategy.st, name = ""sigComparison"",
           arguments = list(columns = c(""rsi"", ""thr20""), relationship = ""gt""),
           label = ""KD2"")

add.signal(strategy.st, name = ""sigComparison"",
           arguments = list(columns = c(""sma20"", ""sma5""), relationship = ""gt""),
           label = ""KD3"")
.
.
.
.
.
add.signal(strategy.st, name = ""sigComparison"",
           arguments = list(columns = c(""D"", ""K""), relationship = ""lt""),
           label = ""KD20"")

假設小弟現有20個下判斷的決策, 名稱為KD1到KD20,
因此接下來是希望以上這20個指標判斷""某些""同時成立的情況下才enter,
如下:
add.signal(strategy.st, name = ""sigAND"",
           arguments = list(columns = c(""atrX"", ""KD1"", ""KD2""),
cross = TRUE), label = ""Entry1"")

因此想請問在上面這個code中的下面這行
arguments = list(columns = c(""atrX"", ""KD1"", ""KD2""),

我該如何做到所有排列組合都做到, 如下
arguments = list(columns = c(""atrX"", ""KD1""),
和
arguments = list(columns = c(""atrX"", ""KD2""),
.
.
.
arguments = list(columns = c(""atrX"", ""KD20""),
共有choose(20, 1)種可能,

arguments = list(columns = c(""atrX"", ""KD1"", ""KD2""),
arguments = list(columns = c(""atrX"", ""KD1"", ""KD3""),
.
.
.
arguments = list(columns = c(""atrX"", ""KD19"", ""KD20""),
共有choose(20, 2)種可能

依此類推, 一值做到choose(20, 19)種排列組合,
亦即想把所有納入一到二十個指標的所有排列組合都想得到結果,
目前沒有想到比較聰明的寫法, 希望各位大大能提供一寫想法~
如表達不清, 請見諒, 謝謝大家!


題外話:記得年前看到報導, 國內某<U+52B5>商砸重金提升硬體設備,
       據說開發R的下單系統, 希望能像國外IBrokers進行交易~_~""


--","R_Language"
"894","M.1491219403.A.5A1","anyonred","問題","%>%",2017-04-03 19:36:40,NA,NA,"[問題類型]:
沒看過

[軟體熟悉度]:
新手


[問題敘述]:
如題，我用?'%>%'去查也查不到，我這是在R語言翻轉教室Data-Manipulation的解答看到的，但不懂他的意思跟用途
希望有人知道願意回答
謝謝

--","R_Language"
"895","M.1491198899.A.A60","kevin123453","問題","",2017-04-03 13:54:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
大家好我想用shiny套件做成像網頁的樣子http://i.imgur.com/lMbWEbB.jpghttp://i.imgur.com/Yuaf7gc.jpg像是類似這樣，透過點擊左邊的連結可以跑出各種shiny的應用程式，像是股票的圖表查
詢之類的，不知道有什麼方法可用，我在連結直接打網頁的網址可以成功，那直接放shin
y app的檔案就不行，不知道有什麼別的方法可以實現呢，我有試過用shinyapp.io把app
部署到伺服器上可是一直失敗qq

目前是想做一個網頁的樣子，然後有很多功能可以選擇,希望高手們稍微指點一下方向，
小弟剛接觸r語言，謝謝了∼

--","R_Language"
"896","M.1491190457.A.2EF","Chris7462","問題","字串比對、取代",2017-04-03 11:34:14,NA,NA,"[問題類型]:

我有兩個不同年份的問卷調查公司檔案 file1.txt 跟 file2.txt 分別如下：

file1.txt               file2.txt
ABCNews                 ABC News/Washington Post
AbtSRBI                 American Research Group
Angus                   American Strategies
ARG                     Angus Reid Global
ArizonaStateU           Anzalone Liszt Grove Research
AtlantaJournal          Arizona State University
BrownU                  Associated Industries of Florida
CallFire                Baldwin Wallace University
CapitalSurvey           Ball State University
CastletonStateColl      Baruch College
ChilenskiStrategies     Basswood Research
ChristopherNewportU     Bellwether Research & Consulting
CiruliAssoc             Bendixen & Amandi International
ColumbusDispatch        Castleton University
CriticalInsights        CBS News/New York Times
                        Cherry Communications
                        Christopher Newport University
                        Clarity Campaign Labs
                        Cole Hargrave Snodgrass & Associates
                        Columbus Dispatch

我希望把 file2.txt 底下的公司名稱根據 file1.txt 的名稱做取代如下

ABC News/Washington Post        => ABC News
Angus Reid Global               => Angus
Arizona State University        => ArizonaStateU
Christopher Newport University  => ChristopherNewportU
Columbus Dispatch               => ColumbusDispatch

如果沒有對應到的公司名稱就維持不變。

我想請問除了用 gsub 的方式之外，還有沒有什麼比較簡單的方法可以做這件事情？

--","R_Language"
"897","M.1491117989.A.24F","rleaner","問題","sparkR.init問題 ",2017-04-02 15:26:26,NA,NA,"[sparkR.init問題]
我sparkR初始化上一直出問題，
想請教一下前輩們
[目的]=========================================
用spakR進行平行化計算
[系統環境]=======================================
我在vm上模擬一台master和一台node
沒有裝hadoop直接就裝spark，
版本：
R version 3.2.3 (2015-12-10)
ubuntu:16.04
spark:2.1.0
sparkR:1.4.1

[sparkR安裝]====================================
如下是我的安裝過程（以下只安裝在master)

[Part1.下載套件rJava和devtools]
Step1.設訂R CMD javareconf
sudo JAVA_HOME=/usr/lib/jvm/jdk/ R CMD javareconf
Step2.更新ubuntu函式庫，以下載devtools]
sudo apt-get -y install libcurl4-gnutls-dev libcurl4-openssl-dev libssl-dev
Step3.於R-shell下載rJava和devtools套件
sudo R
install.packages(""rJava"")
install.packages(""devtools"")
[Part2.於R-shell用devtools下載sparkR套件、啟動]
devtools::install_github('apache/[email<U+00A0>protected]', subdir='R/pkg')

簡單來說，我就只是安裝rJava套件和devtools

[初始化code]====================================
我是在Rstudio server上啟動sparkR的

Sys.setenv(SPARK_HOME='/home/hduser/spark/')
.libPaths(c(file.path(Sys.getenv('SPARK_HOME'), 'R', 'lib'), .libPaths()))
Sys.setenv('SPARKR_SUBMIT_ARGS'='""--packages""
""com.databricks:spark-csv_2.10:1.0.3"" ""sparkr-shell""')
library(SparkR, lib.loc = ""/home/hduser/spark/R/lib/"")
library(devtools)
#初始化sparkr為sc
sc <- sparkR.init(master = ""local"", sparkHome = ""/home/hduser/spark"")
sqlContext <- sparkRSQL.init(sc)

[錯誤訊息]=======================================
在sc <- sparkR.init(master = ""local"", sparkHome = ""/home/hduser/spark"")
這行會出現訊息
17/03/31 02:30:17 ERROR RBackendHandler: createSparkContext on
org.apache.spark.api.r.RRDD failed
java.lang.IllegalArgumentException: Invalid type
.......
Error: returnStatus == 0 is not TRUE

附圖：https://www.facebook.com/photo.php?fbid=1490142967725208&set=p.1490142967725208&type=3&theaterhttps://www.facebook.com/photo.php?fbid=1490143787725126&set=p.1490143787725126&type=3&theater不知道怎麼了！！！QAQ
希望有貴人指點，感謝




--","R_Language"
"898","M.1491051693.A.5D2","anyonred","問題","::1",2017-04-01 21:01:30,NA,NA,"[問題類型]:
沒學過
[問題敘述
我看R語言翻轉教室的解答，他用到了dplyr::filter(flights, is.na(dep_time))
想問::在R語言是甚麼意思?以及要怎樣查到這種關於符號的解說?
謝謝

--","R_Language"
"899","M.1491047460.A.3F7","likqujack","問題","關於RShiny Server",2017-04-01 19:50:57,NA,NA,"小弟R新手，

目前的狀況是公司皆為Windows系統，想用R開發一個互動式平臺。在使用Rshiny上面有問
題想請教，

1、RShiny server在Windows上運行是否有替代或是解決方案，又或者只能考慮Linux了...
...（公司系統不支援...）

2、是否有其他類似Shinyapp官網提供的Server可使用。還是說能夠自行用其他語言架設?

以上感謝解惑！

--","R_Language"
"900","M.1491031157.A.877","anyonred","問題","安裝dplyr套件",2017-04-01 15:19:15,NA,NA,"如題，我在做R語言翻轉教室02-RDataEngineer-05-Data-Manipulation這關時，要我裝dplyr，然後我打library(dplyr)，他顯示Error in library(dplyr) : there is no package called ‘dplyr’那該怎麼裝才能成功?

--","R_Language"
"901","M.1491023327.A.366","saladang","問題","建立TDM做文檔矩陣時出現亂碼",2017-04-01 13:08:41,NA,NA,"[問題類型]: 建立TermDocumentMatrix作文檔矩陣時出現亂碼
 程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

R 3.3.3 (32-bit)
我正在做ptt網路爬蟲的文本探勘, 參考  陳嘉葳用R進行中文 text Mining，前面
都很順利直到在建立 TermDocumentMatrix作文檔矩陣時，就出現錯誤了，

inspect(tdm[1:10, 1:2])
#############Error in nchar(Terms(x), type = ""chars"") :invalid multibyte string, element 1##############

於是檢查了一下文檔，執行查看停用字head(myStopWords,20)出現是正確的文字(非
亂碼)，所以應該不是編碼問題，在findFreqTerms看關鍵字時文字就變亂碼了。麻
煩各位幫我解惑一下怎麼排解文檔矩陣出現亂碼的問題。

Environmenthttps://goo.gl/zlJTQb指令https://goo.gl/zKDl5j[環境敘述]:
R 3.3.3 (32-bit)

--","R_Language"
"902","M.1490863180.A.0E5","neiro","問題","ggmap_long&lat_boundaries",2017-03-30 16:39:38,NA,NA,"[問題敘述]:
目的: 使用ggmap這個package, 依照設定的邊界畫出北太平洋的地圖
問題: 我可以設定任何經緯度的邊界, 畫出想要的地圖, 但不知道為什麼
      只要經過換日線的圖就畫不出來Orz


[程式範例]:

範例一:library(ggmap)
       library(mapproj)
       map <- get_map(location = c(180,23),
               zoom = 2,
               maptype = ""terrain"",
               source = ""google"",
               color=""bw"")
       ggmap(map)

結論一: 可畫出北太平洋的地圖, 但不能指定想要的經緯度範圍
--------------------------------------------------
範例二:library(ggmap)
       library(mapproj)
       map <- mymap = c(left = 110, bottom = -60, right = -70, top = 55)
       get_map(location = ""mymap"",
               maptype = ""terrain"",
               source = ""google"",
               color=""bw"",
               zoom = 3)
ggmap(map)

結論二: 沒辦法跑出想要的結果


[環境敘述]:
R 3.3.3

[關鍵字]:

R packages, ggmap, ggplot2, mapproj

--","R_Language"
"903","M.1490792066.A.6F2","memphis",NA,"parallel IO save/load data",2017-03-29 20:54:19,NA,NA,"一個33GB的物件, 目標是最快速的塞到硬碟裡, 跟讀回來

1. 之前提過的方案
   save/load
   saveRDS/readRDS
   fwrite/fread (data.table)
   write_feather/read_feather (feather)

不過還沒有討論到用multithreads的方式, 多核心壓縮/解壓縮檔案


2. 要看的文件

2.1 官方文件有提到可以用pipe, 直接引用外部程式輸出入https://stat.ethz.ch/R-manual/R-devel/library/base/html/save.html2.2 網友說可以做一個漂亮的打包http://stackoverflow.com/questions/28927750/2.3 我個人試了幾個壓縮引擎, 覺得這個網頁數字比較接近我的經驗http://vbtechsupport.com/1614/3. 數據與結論

先說結論, pigz, 8線 大概是最好的結果

# 方案1 save/load, 171.9MB
save 748s
load 207s

# 方案2 saveRDS/readRDS, 171.9MB
saveRDS 750s
readRDS 207s

# 方案3 mySaveRDS/myReadRDS(pigz, 8c), 182.6MB
mySaveRDS 86s     #8核寫入沒錯
myReadRDS 207s    #演算法的關係只會用4核,
                  #http://serverfault.com/questions/270814/# 方案4 mySaveRDS/myReadRDS(pbzip2, 8c), 106.7MB
mySaveRDS 518s    #8核寫入沒錯..可是就是很慢
myReadRDS 136s    #演算法可以8核分開解壓..但是就是很慢
                  #可以參考2.3的連結, 感覺大概就是那樣


4. 附註
CentOS6 沒有平行xz, xz版本只有到4.99
xz, pxz都一樣沒有平行選項

--","R_Language"
"904","M.1490691484.A.1AD","joe120519","問題","開機自動載入packages",2017-03-28 16:58:01,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門

[問題敘述]:
請問如何可以在打開R的時候就自動載入packages

看網路上很多人說可以編輯.Rprofile檔

但還是不太清楚要如何編輯


[環境敘述]:
R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 14393)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] githubinstall_0.2.1

loaded via a namespace (and not attached):
 [1] httr_1.2.1        R6_2.2.0          tools_3.3.3       withr_1.0.2
 [5] curl_2.4          memoise_1.0.0     data.table_1.10.4 jsonlite_1.3
 [9] digest_0.6.12     devtools_1.12.0

[關鍵字]:

Load Packages Automatically

--","R_Language"
"905","M.1490606778.A.536","ciaozikom","問題","確認字元在list中出現與否",2017-03-27 17:26:16,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有好幾行的charcter如下

  [1] ""10063,13866,10111""

  [2] ""10063""

  [3] ""10057,10063,10006,13800,10111""

  [4] ""10063,13042,10083,10006,10031,10110""

  [5] ""13800,10024,10063,10093,10006,10110""

我想要找出10063在哪幾行裡面有出現，但現在打出來的只能顯示
第二行的結果是1，但我希望1,3,4,5行也都要出現1，
想請問要如何改善呢？

[程式範例]:

rtb1_train$user_tags是我那串資料

我試過
x=as.numeric(rtb1_train$user_tags%in%10063)
如果有包含的話x=1若沒有則x=0

我有試過把%in%改成= 還有把資料以逗號分割，都無法跑出我想要的結果



--","R_Language"
"906","M.1490576022.A.A3A","TOOYA","問題","R做影像處理的套件",2017-03-27 08:53:40,NA,NA,"[問題類型]:
影像處理

[軟體熟悉度]:
熟悉


[問題敘述]:
Google了很多文章，一開始是想學R call imageJ，

不過RImageJ這個套件2009年後就沒有再更新了，好像也沒辦法用。

後來找到幾個文章裡使用的套件:
EMImage,biOps不知道為什麼也通通都被移除了？

不知道有沒有有用R在做影像處理的前輩，
可以指點好用的套件。

未來我們可能一個case會有幾萬張照片要處理，
不太可能一張一張用imageJ去按，
希望可以用R寫個迴圈，批次處理。

--","R_Language"
"907","M.1490537294.A.32F","lichungtsai","問題","請問PDF轉成ECDF",2017-03-26 22:08:11,NA,NA,"大家好

我是最近剛踏入R語言的學生

想請教一個我一直查不到如何解決的問題

目前常常有資料需要製作成機率密度函數(PDF)

後來查到可以使用density()這個函數解決

但現在我還需要轉成累進機率密度函數(ECDF)

卻一直找不到如何解決

網路上似乎還是有方法

只是都要不斷轉換資料形式的樣子

對於剛接觸的我來說有些混亂

所以想請教有沒有最簡潔的方法可以完成呢？

--
Sent from my Windows

--","R_Language"
"908","M.1490504081.A.5DB","wheado","問題","物件print在console上的問題",2017-03-26 12:54:38,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)s

[軟體熟悉度]:
s
入門(寫過其他程式，只是對語法不熟悉)s

[問題敘述]:
s
以下列程式範例說明，lm指令輸出的物件，

透過str指令我看到的是一個有點長的list，

存放在lm.D9裡面，當我在console中輸入lm.D9並執行，

看到的並不是全部list的呈現，而是一個很精簡的形式，

我想問的是，如何去改變一個物件在console上顯示的結果

應該用哪些關鍵字或方向去搜尋相關知識

[程式範例]:

ctl <- c(4.17,5.58,5.18,6.11,4.50,4.61,5.17,4.53,5.33,5.14)
trt <- c(4.81,4.17,4.41,3.59,5.87,3.83,6.03,4.89,4.32,4.69)
group <- gl(2, 10, 20, labels = c(""Ctl"",""Trt""))
weight <- c(ctl, trt)
lm.D9 <- lm(weight ~ group)

lm.D9;
str(lm.D9);

[環境敘述]:

windows10 R3.3.10

-----
Sent from JPTT on my iPhone

--","R_Language"
"909","M.1490436082.A.C8C","tnzikom","問題","計算list裡面各元素出現的次數",2017-03-25 18:01:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
想要用R把下列這個list中的各元素計算分別出現幾次

[程式範例]:
[[1]]
[1] ""10063"" ""13866"" ""10111""

[[2]]
[1] ""10063""

[[3]]
[1] ""10057"" ""10063"" ""10006"" ""13800"" ""10111""

[[4]]
[1] ""10063"" ""13042"" ""10083"" ""10006"" ""10031"" ""10110""

[[5]]
[1] ""13800"" ""10024"" ""10063"" ""10093"" ""10006"" ""10110""

[[6]]
[1] ""10031"" ""10052"" ""10057"" ""10006"" ""13403"" ""10110""

[[7]]
[1] ""10024"" ""10006"" ""10083"" ""10063"" ""10059"" ""10077"" ""10075"" ""10111""

我把這個list命名為aa，且用table(aa)跑過
但有 all arguments must have the same length的錯誤
不知道要怎樣才可以讓他算出裡面各元素出現幾次的情況？


--","R_Language"
"910","M.1490426085.A.6E7","Caecilius","問題","如何用R撈股票資料做篩選？",2017-03-25 15:14:43,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:
入門
[問題敘述]:

大家好 我想要能夠做出類似下面這個網頁的篩選功能http://justdata.yuanta.com.tw/z/zk/zk00-f.asp撈收盤後股票的資料去做篩選 然後我只需要股價 量 跟一些技術分析當作篩選指標就好

不知道有沒有可用的packages
或是該怎麼撈資料做篩選

謝謝大家了

[環境敘述]:

tools_3.3.3

[關鍵字]:

股票

--","R_Language"
"911","M.1490378177.A.200","celestialgod","問題","Re: R 記憶體用量",2017-03-25 01:56:13,NA,NA,"※ 引述《f496328mm (123)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別。:         建議先利用 google 爬文，如輸入:         「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: http://imgur.com/4UN3EJk: 如圖: 我跑的物件總共也才不到6gb: 可是看系統監控   卻已經有17.6gb在背景了: 到底是為什麼阿？？   而且我也執行過gc()了: 我原本打算轉換所有的data , 目前因為ram的關係: 只能轉1/4部份  有點麻煩  有什麼辦法可以解決？: 另外: 如果我改到 python 去做轉換  會比較省ram嗎？: 謝謝: ps: 我是把圖片轉換成 pixel: 這是function: https://gist.github.com/f496328mm/a342cb39e8ae3b84f01be29a46bb81da: 這是main: https://gist.github.com/f496328mm/44116adf79356f01e761cfe72627d213有些地方沒看懂你要幹嘛，不過稍微改一下應該就好

我的話應該這樣寫就差不多轉完：

library(jpeg)
library(pipeR)
library(data.table)

trainJpgFiles <- list.files(""train"", ""\\.jpg"", full.names = TRUE)
testJpgFiles <- list.files(""test"", ""\\.jpg"", full.names = TRUE)


outputSize <- c(224L, 224L, 3)
inputSize <- dim(readJPEG(trainJpgFiles[1]))
idxDT <- mapply(function(i, j) sort(sample.int(i, j)),
                inputSize[1L:2L], outputSize[1L:2L], SIMPLIFY = FALSE) %>>%
  (CJ(x = .[[1]], y = .[[2]], z = 1L:3L)) %>>%
  `[`(j = idx := x + (y-1L) * inputSize[1L] +
                  (z-1L) * prod(inputSize[1L:2L])) %>>%
  setorder(z, y, x)

readJpgFunc <- function(jpgList, i){
  tmp <- lapply(jpgList, function(jpg) readJPEG(jpg)[idxDT$idx]) %>>%
    do.call(what = cbind) %>>% data.table %>>% `[`(j = names(idxDT) := idxDT)
  fwrite(tmp, file = sprintf(""fold_jpg_%s.csv"", i))
  return(NULL)
}

batchSize <- 5000L
trainJpgFiles %>>%
  split(rep(1L:ceiling(length(.) / batchSize), length = length(.))) %>>%
  (mapply(readJpgFunc, ., seq_along(.)))
testJpgFiles %>>%
  split(rep(1L:ceiling(length(.) / batchSize), length = length(.))) %>>%
  (mapply(readJpgFunc, ., seq_along(.)))


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"912","M.1490366877.A.D7F","f496328mm","問題","R 記憶體用量",2017-03-24 22:47:54,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:http://imgur.com/4UN3EJk如圖

我跑的物件總共也才不到6gb

可是看系統監控   卻已經有17.6gb在背景了

到底是為什麼阿？？   而且我也執行過gc()了

我原本打算轉換所有的data , 目前因為ram的關係

只能轉1/4部份  有點麻煩  有什麼辦法可以解決？

另外

如果我改到 python 去做轉換  會比較省ram嗎？

謝謝

ps: 我是把圖片轉換成 pixel



--","R_Language"
"913","M.1490276801.A.BA0","CAPPON","問題","Re: 多個檔案匯出用sheet表示",2017-03-23 21:46:39,NA,NA,"我有兩個不同format的表格
用以下的方法產生我要的格式以及檔案
但是  我想要這兩個檔案是產生在同一個檔名,是用sheet分開呈現
例如 :檔名為 test.xls ,sheet1就為file內容,sheet2為file2的內容

第一個.
file=paste(""D:\\report.xls"",sep="""")
cat (""<table border=1 ALIGN=center  >"" , file=file2,  fill=F, labels=NULL, app
end=F)

cat (""<tr>"" , file=file , append = T)

cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>應用別</font></th>"",
 file = file , append = T)
cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>出貨type</font></th>
"", file = file , append = T)
以下省略

第二個.
file2=paste(""D:\\report2.xls"",sep="""")
cat (""<table border=1 ALIGN=center  >"" , file=file2,  fill=F, labels=NULL, app
end=F)

以下省略※ 引述《CAPPON (JI3)》之銘言：: 假設產生了2個整理好的檔案: 怎麼讓這兩個檔案是在同一個檔名,用sheet分開呈現: 因這兩個檔案不是直接產生的data.frame: 有做過格式的整理後才產生的: 無法用write.xlsx的方式來產生: 怎麼讓這兩個檔案是在同一個檔名,用sheet分開呈現: file=paste(""D:\\report.xls"",sep=""""): file2=paste(""D:\\report2.xls"",sep="""")--","R_Language"
"914","M.1490191254.A.EA7","celestialgod","問題","Re: 用兩個data frame的index來join ?",2017-03-22 22:00:50,NA,NA,"※ 引述《Su22 (裝配匠)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 假設我撈了0050的股票資料存到data frame: 這樣data frame最前面是日期(但不是data frame的欄位): 但該日期欄並不是data frame的欄位: 如果我又撈了0056的股票資料存到另一個data frame: data frame最前面也是日期(但不是data frame的欄位): 那要如何用日期來join兩個data frame ?: [程式範例]::: #install.packages(""quantmod""): library(quantmod): STK0050=get(getSymbols(""0050.tw"")): View(STK0050): STK0050DF=data.frame(STK0050): str(STK0050DF)#查出來日期並非data frame的欄位: STK0056=get(getSymbols(""0056.tw"")): View(STK0056): STK0056DF=data.frame(STK0056): str(STK0056DF)#查出來日期並非data frame的欄位: #若我要用index:日期來join STK0050與STK0056: 該怎麼做?:

善用R的資料ETL工具就可以做到很方便的資料整理

EX:

library(quantmod)
library(data.table)
library(pipeR)
library(stringr)

stocks <- c(""0050.tw"", ""0056.tw"", ""0061.tw"")
lapply(stocks, function(s){
  melt(data.table(get(getSymbols(s)), keep.rownames = TRUE), 1,
       value.name = ""price"") %>>%
  `[`(j = `:=`(c(""stock"", ""cate""),
            data.table(str_match(variable, ""(\\d{4}.TW)\\.(.*)"")[,2:3]))) %>>%
    `[`(j = variable := NULL)
}) %>>% rbindlist %>>% dcast(index + stock ~ cate, value.var = ""price"")

#            index   stock Adjusted Close  High   Low  Open  Volume
#    1: 2007-12-31 0050.TW    52.20 61.45 61.70 61.05 61.45 2870000
#    2: 2007-12-31 0056.TW    19.89 26.04 26.05 25.70 26.04 3440000
#    3: 2008-01-02 0050.TW    51.05 60.10 61.30 60.00 60.10 4975000
#    4: 2008-01-02 0056.TW    19.66 25.75 26.15 25.70 25.75 3806000
#    5: 2008-01-03 0050.TW    50.20 59.10 59.35 58.60 59.10 7413000
#   ---
# 6201: 2017-03-20 0056.TW    24.92 24.92 24.95 24.81 24.81 2447000
# 6202: 2017-03-20 0061.TW    15.65 15.65 15.71 15.64 15.71 2313000
# 6203: 2017-03-21 0050.TW    74.90 74.90 74.90 74.30 74.30 8501000
# 6204: 2017-03-21 0056.TW    25.03 25.03 25.15 24.95 24.95 8274000
# 6205: 2017-03-21 0061.TW    15.66 15.66 15.68 15.63 15.65 1231000

這樣不論輸入幾個stocks都可以很漂亮地把資料整理出來

FYI

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"915","M.1490190644.A.D16","ert5612p","問題","Rmpi套件與TMPDIR environmental的問題",2017-03-22 21:50:40,NA,NA,"[問題] 下載Rmpi套件，時遇到終端機上「TMPDIR environmental」的問題
[問題類型]
 終端機指令上的問題
[軟體熟悉度]
使用者(有些Ｒ的作品)，但對終端機指令不了解

[問題敘述]
各位Ｒ專家們好，我是一個目前正在Mac上弄平行運算(讓R可以多核心運行)，卻在過程中
遇到許多麻煩的人∼
我是參考http://www.stats.uwo.ca/faculty/yu/Rmpi/mac_os_x.htm文章一步一步下載
檔案
最後在R studio 中 install.packages(“Rmpi”)時出現了這樣一段話 ：

PMIx has detected a temporary directory name that results
in a path that is too long for the Unix domain socket:

    Temp dir: /var/folders/k5/qksw8vtj3yv2z1vzx2jlwy280000gn/T/openmpi-session[email<U+00A0>protected]_0/871

Try setting your TMPDIR environmental variable to point to
something shorter in length

聽我學長說，是指他說你環境變數太長，要下載到短一點了路徑（不知道對不對
但我不會打終端機的指令，想請問各位大大，我該打什麼在我的終端機才可以解決這問題
呢，希望可以手把手指引，謝謝各位><


####################################
###  安裝時電腦給我的所有文字
####################################

PMIx has detected a temporary directory name that results
in a path that is too long for the Unix domain socket:

    Temp dir: /var/folders/k5/qksw8vtj3yv2z1vzx2jlwy280000gn/T/openmpi-session[email<U+00A0>protected]_0/871

Try setting your TMPDIR environmental variable to point to
something shorter in length
[xiaopingguode-MacBook-Air.local:97413] [[INVALID],INVALID] ORTE_ERROR_LOG: Un
able to start a daemon on the local node in file ess_singleton_module.c at lin
e 582
[xiaopingguode-MacBook-Air.local:97413] [[INVALID],INVALID] ORTE_ERROR_LOG: Un
able to start a daemon on the local node in file ess_singleton_module.c at lin
e 166
--------------------------------------------------------------------------
It looks like orte_init failed for some reason; your parallel process is
likely to abort.  There are many reasons that a parallel process can
fail during orte_init; some of which are due to configuration or
environment problems.  This failure appears to be an internal failure;
here's some additional information (which may only be relevant to an
Open MPI developer):

  orte_ess_init failed
  --> Returned value Unable to start a daemon on the local node (-127) instead
 of ORTE_SUCCESS
--------------------------------------------------------------------------
--------------------------------------------------------------------------
It looks like MPI_INIT failed for some reason; your parallel process is
likely to abort.  There are many reasons that a parallel process can
fail during MPI_INIT; some of which are due to configuration or environment
problems.  This failure appears to be an internal failure; here's some
additional information (which may only be relevant to an Open MPI
developer):

  ompi_mpi_init: ompi_rte_init failed
  --> Returned ""Unable to start a daemon on the local node"" (-127) instead of
""Success"" (0)
--------------------------------------------------------------------------
*** An error occurred in MPI_Init
*** on a NULL communicator
*** MPI_ERRORS_ARE_FATAL (processes in this communicator will now abort,
***    and potentially your MPI job)
[xiaopingguode-MacBook-Air.local:97413] Local abort before MPI_INIT completed
completed successfully, but am not able to aggregate error messages, and not a
ble to guarantee that all other processes were killed!
ERROR: loading failed
* removing ‘/Library/Frameworks/R.framework/Versions/3.3/Resources/library/Rm
pi’
Warning in install.packages :
  installation of package ‘Rmpi’ had non-zero exit status

The downloaded source packages are in
        ‘/private/var/folders/k5/qksw8vtj3yv2z1vzx2jlwy280000gn/T/RtmpIH6qpW/downloa
ded_packages’

--","R_Language"
"916","M.1490185338.A.2D7","celestialgod","問題","Re: 字串元素個數計算跟加總？",2017-03-22 20:22:14,NA,NA,"※ 引述《eco100 (   )》之銘言：: 不好意思，我又有另一個問題: 例如我有一個字串 ""ABCABACBA"": 我要計算前後相鄰二個字元出現的次數: 例如一開始 AB 再來 BC CA AB....: 可以得到以下結果  AB BC CA BA AC CB:                   2  1  1  2  1  1: 我想到也是只能用迴圈往後一個字元一個字元移動: 請問有更快的方式嗎？ 感謝！x <- c(""ABACABCB"", ""CBACABCBACBAB"")

cal_func <- function(x, cal_length = 2L){
  # 把字串切割成一個個character，丟進function
  lapply(strsplit(x, """"), function(ss){
    # 計算組數
    l <- ceiling(length(ss) / cal_length)
    # split的vec
    tableVec <- rep(1L:l, each = cal_length, length = length(ss))
    out <- do.call(c, lapply(1L:cal_length, function(i){
      # 用split的vec切割，然後黏貼在一起
      # 每做一次就在前面補一個NA =>
      # 第一次分組是 11223344
      # 第二次分組是 N1122334 (4沒有成兩組所以不計，N是NA)
      # 這段邏輯可以要細想一下~~~
      tmp <- split(ss, c(rep(NA_integer_, i - 1L),
                         head(tableVec, length(tableVec) - i + 1L)))
      sapply(tmp[sapply(tmp, length) == cal_length], paste, collapse = """")
    }))
    return(table(as.vector(out)))
  })
}

cal_func(x, 2L)
# [[1]]
#
# AB AC BA BC CA CB
#  2  1  1  1  1  1
#
# [[2]]
#
# AB AC BA BC CA CB
#  2  2  3  1  1  3
cal_func(x, 3L)
# [[1]]
#
# ABA ABC ACA BAC BCB CAB
#   1   1   1   1   1   1
#
# [[2]]
#
# ABC ACA ACB BAB BAC BCB CAB CBA
#   1   1   1   1   2   1   1   3


3以上，你自己驗證看看吧~~

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"917","M.1490177036.A.065","eco100","問題","Re: 字串元素個數計算跟加總？",2017-03-22 18:03:54,NA,NA,"不好意思，我又有另一個問題

例如我有一個字串 ""ABCABACBA""

我要計算前後相鄰二個字元出現的次數

例如一開始 AB 再來 BC CA AB....

可以得到以下結果  AB BC CA BA AC CB
                  2  1  1  2  1  1

我想到也是只能用迴圈往後一個字元一個字元移動

請問有更快的方式嗎？ 感謝！

--","R_Language"
"918","M.1490110256.A.AE7","andrew43","問題","Re: for迴圈不會寫",2017-03-21 23:30:52,NA,NA,"這用 tapply 就可以直接解，像這樣：
tapply(iris$Petal.Length, iris$Species, mean)

不過如果是要練習 for loop，
以下給一個初學者容易理解的解法。

# 初始化一個 list，並給名字。
ans <- vector(""list"", length(levels(iris$Species)))
names(ans) <- levels(iris$Species)
# 利用 names(ans) 來當 for loop 裡的變數
for(i in names(ans)){
  which.row <- which(iris$Species == i)
  ans[[i]] <- mean(iris$Petal.Length[which.row])
}
# 結果如下
print(ans)※ 引述《anyonred (任意紅)》之銘言：: 題目是: # 請計算Petal.Length在三種Species的平均值: # 請將三種結果分別存到一個named list之中: # list elements 的名稱對應到類別，包含的值則代表對應的Species在Petal.Length的: 平均值: # 可以參考後面`stopifnot`的提示: answer2 <- local({:   for name in names(iris$Species){iris$Species(name)<-mean(Petal.length(name)): }): (上面這段是我自己寫的，但我不清楚我錯在哪裡，希望有人可以跟我說下): stopifnot(is.list(answer2)): stopifnot(length(answer2) == 3): stopifnot(names(answer2) == c(""setosa"", ""versicolor"", ""virginica"")): local({:   for(name in unique(iris$Species)) {:     stopifnot(is.numeric(answer2[[name]])):     stopifnot(length(answer2[[name]]) == 1):   }: }): 其實stopifnot我看沒有懂，我初學dataframe一段時間 ，希望有人可以教我寫這題: 謝謝--","R_Language"
"919","M.1490100404.A.2E1","anyonred","問題","for迴圈不會寫",2017-03-21 20:46:41,NA,NA,"題目是
# 請計算Petal.Length在三種Species的平均值
# 請將三種結果分別存到一個named list之中
# list elements 的名稱對應到類別，包含的值則代表對應的Species在Petal.Length的
平均值
# 可以參考後面`stopifnot`的提示
answer2 <- local({
  for name in names(iris$Species){iris$Species(name)<-mean(Petal.length(name))
})
(上面這段是我自己寫的，但我不清楚我錯在哪裡，希望有人可以跟我說下)
stopifnot(is.list(answer2))
stopifnot(length(answer2) == 3)
stopifnot(names(answer2) == c(""setosa"", ""versicolor"", ""virginica""))
local({
  for(name in unique(iris$Species)) {
    stopifnot(is.numeric(answer2[[name]]))
    stopifnot(length(answer2[[name]]) == 1)
  }
})
其實stopifnot我看沒有懂，我初學dataframe一段時間 ，希望有人可以教我寫這題
謝謝





--","R_Language"
"920","M.1490069293.A.21A","Irene8837","問題","匯入CSV檔，無法開啟問題",2017-03-21 12:08:10,NA,NA,"[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
大家好，我是超級新手
偶然發現這個程式感覺很厲害，想應用在金融市場，可是我完全沒有概念，在網路搜過一
些部落格，一些高手寫的文章，我多數也是有看沒有懂，我目前會用getSymbols抓美股、
台股、跟fred的資料，還有用chartSeries跟plot畫圖。
Q1:想自己匯excel資料，網路上看到的寫法我試了都說無法開啟連結，我的csv檔是存在
桌面,錯誤畫面如附圖
Q2:我的r安裝完使用的是32bit，正確嗎？
Q3:有沒有推薦外行人入門的書籍？因為我沒有資科背景，有的東西我看過去還是看不懂

謝謝

[程式範例]:http://i.imgur.com/wEnlGr0.jpg[環境敘述]:http://i.imgur.com/LXP5sM5.jpg--","R_Language"
"921","M.1490021589.A.DA1","Su22","問題","data frame的index",2017-03-20 22:53:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的假設我撈了0050的股票資料存到data frame
這樣data frame最前面是日期(但不是data frame的欄位)
但該日期欄並不是data frame的欄位
如果我又撈了0056的股票資料存到另一個data frame
data frame最前面也是日期(但不是data frame的欄位)
那要如何用日期來join兩個data frame ?

[程式範例]:#install.packages(""quantmod"")library(quantmod)STK0050=get(getSymbols(""0050.tw""))View(STK0050)STK0050DF=data.frame(STK0050)str(STK0050DF)#查出來日期並非data frame的欄位STK0056=get(getSymbols(""0056.tw""))View(STK0056)STK0056DF=data.frame(STK0056)str(STK0056DF)#查出來日期並非data frame的欄位#若我要用index:日期來join STK0050與STK0056該怎麼做?[環境敘述]:> library(quantmod)Loading required package: xts
Loading required package: zoo

Attaching package: ‘zoo’

The following objects are masked from ‘package:base’:

    as.Date, as.Date.numeric

Loading required package: TTR
Version 0.4-0 included new data defaults. See ?getSymbols.
Warning messages:
1: package ‘quantmod’ was built under R version 3.3.3
2: package ‘xts’ was built under R version 3.3.3
3: package ‘zoo’ was built under R version 3.3.3
4: package ‘TTR’ was built under R version 3.3.3> STK0050=get(getSymbols(""0050.tw""))As of 0.4-0, ‘getSymbols’ uses env=parent.frame() and
 auto.assign=TRUE by default.

 This  behavior  will be  phased out in 0.5-0  when the call  will
 default to use auto.assign=FALSE. getOption(""getSymbols.env"") and
 getOptions(""getSymbols.auto.assign"") are now checked for alternate defaults

 This message is shown once per session and may be disabled by setting
 options(""getSymbols.warning4.0""=FALSE). See ?getSymbols for more details.> View(STK0050)> STK0050DF=data.frame(STK0050)> str(STK0050DF)#查出來日期並非data frame的欄位'data.frame':   2235 obs. of  6 variables:
 $ X0050.TW.Open    : num  61.5 60.1 59.1 59.1 56.4 ...
 $ X0050.TW.High    : num  61.7 61.3 59.4 59.4 57.6 ...
 $ X0050.TW.Low     : num  61 60 58.6 58 56.3 ...
 $ X0050.TW.Close   : num  61.5 60.1 59.1 59.1 56.4 ...
 $ X0050.TW.Volume  : num  2870000 4975000 7413000 7686000 20041000 ...
 $ X0050.TW.Adjusted: num  52.2 51 50.2 50.2 47.9 ...
>> STK0056=get(getSymbols(""0056.tw""))> View(STK0056)> STK0056DF=data.frame(STK0056)> str(STK0056DF)#查出來日期並非data frame的欄位'data.frame':   2235 obs. of  6 variables:
 $ X0056.TW.Open    : num  26 25.8 25.4 25.4 25.1 ...
 $ X0056.TW.High    : num  26.1 26.1 25.4 25.4 25.4 ...
 $ X0056.TW.Low     : num  25.7 25.7 25.2 25.1 25 ...
 $ X0056.TW.Close   : num  26 25.8 25.4 25.4 25.1 ...
 $ X0056.TW.Volume  : num  3440000 3806000 3145000 1543000 5381000 ...
 $ X0056.TW.Adjusted: num  19.9 19.7 19.4 19.4 19.1 ...

[關鍵字]:
#data frame
#index

--","R_Language"
"922","M.1490006204.A.368","eco100","問題","迴圈參數如何帶入到變數裡去？",2017-03-20 18:36:42,NA,NA,"舉個例子

我有一個list(A, B, C, D)

現在我要把ABCD用迴圈i來代入

變成lis$i

請問R要如何寫？謝謝

--","R_Language"
"923","M.1489995192.A.C51","il0306","問題","crossprod 效率",2017-03-20 15:33:10,NA,NA,"[問題類型]: 效能諮詢

[軟體熟悉度]:使用者

[問題敘述]:
小弟最近在使用crossprod這函數，但目前的資料量較大，導致計算速度很慢
想請問大家有沒有別的方法或是建議可以引導小弟的
目前矩陣大小約 100000 x 10000

[程式範例]:
dim(X) = 100000, 10000
crossprod(X) #很久

[環境敘述]:R version 3.3.2[關鍵字]:crossprod 效率--","R_Language"
"924","M.1489924123.A.2D4","gbd37","問題","請教hclust與agnes不同處",2017-03-19 19:48:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

資料檔:http://0rz.tw/LNjGE如code中第二部分如果有取scale則算出來的AC值相同，

但第一部分沒取scale卻出現不同的AC值，

這裡的結果就跟我原本所想的不同。

因為""?hclust""的內容有提到:""Note that agnes(*, method=""ward"")

corresponds to hclust(*, ""ward.D2"").

本來我對這兩個函數認知只有上述的差異，其他算法相同。

但這次我遇到朋友給的資料，算出來的Agglomerative Coefficient不同

我有試過用R內建的資料iris[,-5]與mtcars來測試，不管有沒有scale資料，

兩個函數的AC值算出來會相同。

有上網google了一下也找不到有提到這兩個函數的差異...

所以上來發問，希望各位同好幫我解惑> < 謝謝


[程式範例]:http://ideone.com/gctN10[環境敘述]:

R 3.3.2

[關鍵字]:hclust agnes


--","R_Language"
"925","M.1489892734.A.C86","celestialgod","問題","Re: 整理資料",2017-03-19 11:05:30,NA,NA,"※ 引述《allen1985 (我要低調 拯救形象)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 整理資料 不使用for loop: [程式範例]:: 資料如下:: data <- matrix(c(""S11"",""R1"",""O11"",:                  ""S11"",""R2"",""O12"",:                  ""O11"",""R3"",""O12"",:                  ""S21"",""R1"",""O21"",:                  ""S21"",""R2"",""O22"",:                  ""O21"",""R3"",""O22"",:                  ""S11"",""R1"",""O11"",:                  ""S11"",""R2"",""O12"",:                  ""O11"",""R3"",""O12""), ncol = 3, byrow = T): 我想要把資料整理成: r.data <- matrix(c(""S11"",""O11"",""O12"", ""2"",:                    ""S21"",""O21"",""O22"", ""1""), ncol = 4, byrow = T): 其中第四個Column 放的是 這組資料出現幾次: 簡單講就是 原本的資料是三個rows為一組 我想把資料: 每一個unique組別 抓出來 並算出他出現幾次: 我先用了很笨的兩個for loops搞定 但想問問看有沒有好的方法: 基本上第一個for loop 先把資料整理成: r.data <- matrix(c(""S11"",""O11"",""O12"",:                    ""S21"",""O21"",""O22""), ncol = 3, byrow = T): 也就是先把unique的算出來: 第二個for loop再去算每組unique的 出現幾次 變成想要的data.frame: 謝謝: 簡單講三個rows 是一組提供四種解法：

dataMat <- matrix(c(""S11"",""R1"",""O11"",
                    ""S11"",""R2"",""O12"",
                    ""O11"",""R3"",""O12"",
                    ""S21"",""R1"",""O21"",
                    ""S21"",""R2"",""O22"",
                    ""O21"",""R3"",""O22"",
                    ""S11"",""R1"",""O11"",
                    ""S11"",""R2"",""O12"",
                    ""O11"",""R3"",""O12""), ncol = 3, byrow = T)# aggregatecolSplit <- split(dataMat, rep(1L:ncol(dataMat), each = nrow(dataMat)))
aggregate(rep(1, nrow(dataMat)), colSplit, sum)# paste0rowCollapse <- do.call(function(...) paste(..., sep = ""_""),
                split(dataMat, rep(1L:ncol(dataMat), each = nrow(dataMat))))
countRows <- table(rowCollapse)
cbind(data.frame(do.call(rbind,strsplit(names(countRows), ""_"")),
                 stringsAsFactors = FALSE), Freq = countRows)# data.tablelibrary(data.table)
DT <- data.table(dataMat)
DT[ , .N, by = .(V1, V2, V3)]

## note, column數眾多下面這樣也行
# DT[ , .N, by = eval(paste0(""V"", 1:ncol(DT)))]
## 或是by裡面放你要算的column name的character vector也行
## ex:
# colsCoun <- c(""V1"", ""V2"", ""V3"")
# DT[ , .N, by = colsCoun]# dplyrlibrary(dplyr)
DF <- as.data.frame(dataMat, stringsAsFactors = FALSE)
DF %>% group_by(V1, V2, V3) %>% summarise(count = n())

## note, column數眾多下面這樣也行
# DF %>% group_by_(.dots = paste0(""V"", 1:ncol(DF))) %>%
#   summarise(count = n())
## or
# colsCoun <- c(""V1"", ""V2"", ""V3"")
# DF %>% group_by_(.dots = colsCoun) %>%
#   summarise(count = n())

效率應該是：data.table > dplyr > aggregate > paste0

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"926","M.1489881873.A.00F","allen1985","問題","整理資料",2017-03-19 08:04:29,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
整理資料 不使用for loop

[程式範例]:

資料如下:

data <- matrix(c(""S11"",""R1"",""O11"",
                 ""S11"",""R2"",""O12"",
                 ""O11"",""R3"",""O12"",
                 ""S21"",""R1"",""O21"",
                 ""S21"",""R2"",""O22"",
                 ""O21"",""R3"",""O22"",
                 ""S11"",""R1"",""O11"",
                 ""S11"",""R2"",""O12"",
                 ""O11"",""R3"",""O12""), ncol = 3, byrow = T)

我想要把資料整理成
r.data <- matrix(c(""S11"",""O11"",""O12"", ""2"",
                   ""S21"",""O21"",""O22"", ""1""), ncol = 4, byrow = T)
其中第四個Column 放的是 這組資料出現幾次

簡單講就是 原本的資料是三個rows為一組 我想把資料
每一個unique組別 抓出來 並算出他出現幾次

我先用了很笨的兩個for loops搞定 但想問問看有沒有好的方法

基本上第一個for loop 先把資料整理成
r.data <- matrix(c(""S11"",""O11"",""O12"",
                   ""S21"",""O21"",""O22""), ncol = 3, byrow = T)
也就是先把unique的算出來

第二個for loop再去算每組unique的 出現幾次 變成想要的data.frame

謝謝




簡單講三個rows 是一組

--","R_Language"
"927","M.1489858711.A.903","celestialgod","問題","Re: 爬蟲抓取資料問題",2017-03-19 01:38:27,NA,NA,"※ 引述《ya32347844 (虛虛樂)》之銘言：:
:: [問題類型]:網路爬蟲:
:: [軟體熟悉度]:入門:: [問題敘述]:: 我想要抓這個網頁的資料 但不知道是不是Ｘpath寫錯了 我到後來抓到的資料是ＮＵＬＬ: 懇請各位大神給予指教 如果有需要補充的資訊也請不吝指出: 已經google過相關訊息 用不同的package但結果相同 所以才會覺得是不是一層一層的Tag: 寫錯了: Update Code:: myheader <- c(:   ""User-Agent""=""Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0_1 like Mac OS X; ja-jp) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A306 Safari/6531.22.7"",:   ""Accept""=""text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"",:   ""Accept-Language""=""en-us"",:   ""Connection""=""keep-alive"",:   ""Accept-Charset""=""GB2312,utf-8;q=0.7,*;q=0.7"": ): #加上myheader: d <- debugGatherer(): get_url <- getURL(url, httpheader = myheader, debugfunction = d$update, verbose = T): get_url_parse = htmlTreeParse(get_url, encoding = ""UTF-8"", error=function(...){}, useInternalNodes = TRUE,trim=TRUE): cat(d$value()[3]): node<-getNodeSet(get_url_parse, ""//div[@class='page-content-wrapper']""): info<-sapply(node,xmlValue): info:: [程式範例]::: library(XML):   library(RCurl):   url=""https://www.eex.com/en/market-data/environmental-markets/spot-market/european-emission-allowances#!/2017/01/04"":   get_url = getURL(url,encoding = ""UTF-8""):   #將url解析:   get_url_parse = htmlParse(get_url, encoding = ""UTF-8""):   tablehead <- xpathSApply(get_url_parse, ""//div[@id='content']/section[@class='clearfix']/article[@id='market_data']/div[@id='content']/div/div/div/div"",xmlValue):: [環境敘述]::: mac10.12.2:: [關鍵字]::
:

先用瀏覽器的開發者工具看一下網頁回傳的資料

會發現它資料是用JSON回傳，也就是說

我們只要抓到那個JSON就可以拿到資料了 => 就不用去parsing HTML了http://imgur.com/a/ThtWHcode:http://pastebin.com/Zt5j8yue至於你的code應該是少了cookie的setup

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"928","M.1489771149.A.E5C","michaelli02","問題","新手問「R & RStudio」設定中文版介面",2017-03-18 01:19:07,NA,NA,"[問題] 新手問「R & RStudio」設定中文版介面的問題


〔問題類型〕：程式諮詢　//R 軟體的使用

〔軟體熟悉度〕：新手(沒寫過程式，R 是我的第一次)　　//（３天前開始查資料自學）

〔問題敘述〕：開發環境的軟體介面中文版的問題

0.
　　查了版規，沒有看到版規有寫「發文必備格式」。但是前面的人發文有格式的樣子，
我就依樣畫葫蘆。

　　首次發文請多指教，發言如有不妥請多包涵。

1.
　　我本週日（3月19日）要去上個 R語言上機練習課，很初階的。

　　然後，我也安裝上課所需要的「開發環境」， R 以及 RStudio。

　　我用的作業系統有兩個，筆電用 MAC，桌機用 Win7，所以以下的問題都是同時必須
包含兩個作業系統。

1.1.
　　我現在遇到的問題是，開發環境的軟體介面中文版的問題。

　　Win7 我裝了 R ，它會自動安裝成繁體中文版，這沒問題。

　　但是 MAC 卻不會，前天我花了一晚時間研究試著調整語系，卻是無功而返。

　　請問、要怎麼調整成功呢？

1.2.
　　RStudio 我也是先在 Win7 安裝，然後又去 MAC 安裝。

　　RStudio 我（Google）找到文章，有介紹調整語系（UTF-8），可是調整完也沒有變
成「中文版介面」。

　　問了熟悉 R 的朋友，他跟我說「有中文版頁面」。（不過他在準備講義，我也沒纏
者他問到底，而且他英文好不需要中文介面。）

　　所以、到底要怎麼才能調整成功呢？

2.
　　不知道文字這樣打資訊量夠不夠？

　　要是不夠的話我還可以側錄螢幕畫面，讓版中的前輩們容易判斷我的問題。


〔環境敘述〕：

－－－－
Win7 之下

R v.3.3.3

RStudio v.1.0.136
－－－－
－－－－
MAC 之下

R v.3.3.3

RStudio v.1.0.136
－－－－


〔關鍵字〕：
＃入門的第一步　＃安裝軟體的介紹　＃設定中文語系


以上

----

--","R_Language"
"929","M.1489753927.A.193","blue1232","問題","",2017-03-17 20:32:04,NA,NA,"[問題類型]:

輸出結果的儲存方式


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
小弟想要儲存跑出來的結果，上網查了有很多函數，但都是儲存一個向量的值。小弟想要
把整個包括變數還有跑出來的結果一起存起來，有用過save但有錯，無法順利存。

[程式範例]:
x <-csv檔，是身高體重等的4行150列表格

mean(x$Height)

會跑出平均值，小弟想要知道如何才可以存整個結果。有用過sink但只有結果，沒有原本
的資料，感謝

[環境敘述]:

3.3.3版
x86_64-w64


--","R_Language"
"930","M.1489732720.A.401","Steven87","問題","使用sapply填入Dummy",2017-03-17 14:38:38,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我的Data是電影的評比資料，有兩千萬筆，
其中電影的類別(genres)是屬於多重標籤，
為了分析各種類別的電影評分狀況，
我打算將所有電影建立Dummy Variable，
每一筆評比資料會根據他電影的標籤，在每個類別底下有 T/F boolean值。

資料像是這樣

movieId title              genres                            Adventure Romance
""1""     ""Toy Story (1995)"" ""Adventure|Animation|Children|... ""Truth""   ""False""

.................... Rating
.................... 4.5


目前我已經成功將所有類別全切出來，用的code如下

Genres <- unique(unlist(as.character(movies[,3]) %>% strsplit(split='[|]')))

接著我創造出空的Dummy

for(i in c(1:20)){
  y=i+3
  merge <- insertCol(as.matrix(merge),y,v=NA,cName=Genres[i])
}

接著我試著用lapply或sapply，想將boolean值根據merge[,3]比對填入，
使用的code如下:

for(i in c(1:20)){
  y=i+3
  merge[,y] <- sapply(merge[,3],grepl(Genres[i],merge[,3]))
}

但問題來了，他一直跟我說grepl並不是function，
嘗試過各種apply家族或是自定義的函數一樣有問題，
不曉得是哪裡出了問題?

另外我知道這方法本身很土法，好像有更好的產生Dummy的方式，
不過我還看不懂XD，所以想說先用這種直觀的方式練習一些packages，
再麻煩各位幫我解惑一下感謝。


[環境敘述]:

R version 3.3.3 (2017-03-06)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

[關鍵字]:

lapply sapply dummy

--","R_Language"
"931","M.1489722679.A.487","eco100","問題","字串元素個數計算跟加總？",2017-03-17 11:51:17,NA,NA,"不好意思，新手又來問問題了

假設我有如下的資料

no1  ABAEDHD

no2  ABCCREA

no3  GCDEHIRE

我想得到 A  B  C  D  E  G  H  I
         4  3  3  3  4  1  2  1

這樣的結果

就是把第二欄位 不管哪一行的字串 的字元計數加總

我自己的作法是用迴圈 先算出每一行的計數最後再加總

想請問有沒有更快更有效率的方式？

感謝

--","R_Language"
"932","M.1489680159.A.038","ya32347844","問題","爬蟲抓取資料問題",2017-03-17 00:02:34,NA,NA,"[問題類型]:網路爬蟲[軟體熟悉度]:入門


[問題敘述]:我想要抓這個網頁的資料 但不知道是不是Ｘpath寫錯了 我到後來抓到的資料是ＮＵＬＬ懇請各位大神給予指教 如果有需要補充的資訊也請不吝指出已經google過相關訊息 用不同的package但結果相同 所以才會覺得是不是一層一層的Tag寫錯了Update Code:myheader <- c(""User-Agent""=""Mozilla/5.0 (iPhone; U; CPU iPhone OS 4_0_1 like Mac OS X; ja-jp) AppleWebKit/532.9 (KHTML, like Gecko) Version/4.0.5 Mobile/8A306 Safari/6531.22.7"",""Accept""=""text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"",""Accept-Language""=""en-us"",""Connection""=""keep-alive"",""Accept-Charset""=""GB2312,utf-8;q=0.7,*;q=0.7"")#加上myheaderd <- debugGatherer()get_url <- getURL(url, httpheader = myheader, debugfunction = d$update, verbose = T)get_url_parse = htmlTreeParse(get_url, encoding = ""UTF-8"", error=function(...){}, useInternalNodes = TRUE,trim=TRUE)cat(d$value()[3])node<-getNodeSet(get_url_parse, ""//div[@class='page-content-wrapper']"")info<-sapply(node,xmlValue)info[程式範例]:library(XML)library(RCurl)url=""https://www.eex.com/en/market-data/environmental-markets/spot-market/european-emission-allowances#!/2017/01/04""get_url = getURL(url,encoding = ""UTF-8"")#將url解析get_url_parse = htmlParse(get_url, encoding = ""UTF-8"")tablehead <- xpathSApply(get_url_parse, ""//div[@id='content']/section[@class='clearfix']/article[@id='market_data']/div[@id='content']/div/div/div/div"",xmlValue)[環境敘述]:mac10.12.2[關鍵字]:--","R_Language"
"933","M.1489673944.A.37D","celestialgod","問題","Re: 用R數據條件判斷分類",2017-03-16 22:19:01,NA,NA,"※ 引述《hizerg (路過的人)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 多組數值(甲、乙): 甲介於1~3間，且乙= M1得到K1: 甲介於4~6間，且乙= M2得到K2: 甲介於7~9間，且乙= M3得到K3: 1.產生資料: A <- c(1, 3, ""M1"", ""K1""): B <- c(4, 6, ""M2"", ""K2""): C <- c(7, 9, ""M3"", ""K3""): X1 <- c(3, ""M1""): X2 <- c(4, ""M1""): X3 <- c(8, ""M3""): 當X1資料丟進去判斷，得到K1: 當X2資料丟進去判斷，得到null: 當X3資料丟進去判斷，得到K3: 這個用迴圈寫會比較好?(完全沒頭緒): 謝謝各位前輩:: [環境敘述]::: R version 3.3.3 (2017-03-06): Windows 7 x64 Service Pack 1:: [關鍵字]::: R語言多重數據判斷分類:

雖然你是新手QQ

如果你連data.frame都不會用，請先去補強R的基本知識...

data.frame是R裡面處理字串、數字混合型最方便的型別

而data.table提供記憶體面的相同操作，比data.frame更快

嘗試先把你的資料用data.table表示

然後直接套用data.table的non-equi join，瞬間就可以得到答案了：

library(data.table)

judgeDT <- data.table(x_lb = c(1, 4, 7), x_ub = c(3, 6, 9),
                      y_cate = paste0(""M"", 1:3), output = paste0(""K"", 1:3))
judgeDT
#    x_lb x_ub y_cate output
# 1:    1    3     M1     K1
# 2:    4    6     M2     K2
# 3:    7    9     M3     K3

inputDT <- unique(data.table(X = sample(1:10, 100, TRUE),
                             Y = sample(paste0(""M"", 1:3), 100, TRUE)))
head(inputDT)
#     X  Y
# 1:  3 M2
# 2: 10 M3
# 3:  4 M3
# 4:  3 M1
# 5:  6 M3
# 6:  6 M2

judgeDT[inputDT, .(X, Y, output), on = .(x_lb <= X, x_ub >= X, y_cate == Y)]
#     X  Y output
# 1:  3 M2     NA
# 2: 10 M3     NA
# 3:  4 M3     NA
# 4:  3 M1     K1
# 5:  6 M3     NA
# 6:  6 M2     K2

如果沒辦法接受就直接迴圈吧：

judgeDF <- data.frame(x_lb = c(1, 4, 7), x_ub = c(3, 6, 9),
                      y_cate = paste0(""M"", 1:3), output = paste0(""K"", 1:3),
                      stringsAsFactors = FALSE)
inputDF <- unique(data.frame(X = sample(1:10, 100, TRUE),
                             Y = sample(paste0(""M"", 1:3), 100, TRUE),
                             stringsAsFactors = FALSE))
inputDF$output <- rep(NA_character_, nrow(input))
for (i in 1L:nrow(inputDF)) {
  loc <- which(inputDF[i, 1] >= judgeDF[, 1] & inputDF[i, 1] <= judgeDF[, 2] &
                 inputDF[i, 2] == judgeDF[, 3])
  if (length(loc) > 0L) {
    inputDF$output[i] <- judgeDF[loc, 4]
  } else {
    inputDF$output[i] <- NA
  }
}


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"934","M.1489669988.A.D66","clsmbstu","問題","Re: 用R數據條件判斷分類",2017-03-16 21:13:06,NA,NA,"我的想法是用簡單的條件式去判斷就好，不用寫迴圈。
下面只是把你的目的寫成條件式，再加一個保險，避免丟進去的物件不是兩個元素：

####

multiple_judges <- function(x) {
  if (length(x) != 2) {stop(""The input should have 2 elements."")}# 如果丟進去的東西不是兩個值，程式會警告並停止執行else {
    if (x[1] >= 1 & x[1] <= 3 & x[2] == ""M1"") {return(""K1"")}# 甲介於1~3間，且乙= M1得到K1else if (x[1] >= 4 & x[1] <= 6 & x[2] == ""M2"") {return(""K2"")}# 甲介於4~6間，且乙= M2得到K2else if (x[1] >= 7 & x[1] <= 9 & x[2] == ""M3"") {return(""K3"")}# 甲介於7~9間，且乙= M3得到K3else {return(NULL)}
  }
}

multiple_judges(X1)
multiple_judges(X2)
multiple_judges(X3)

####

應該可以得到你想要的結果∼※ 引述《hizerg (路過的人)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 多組數值(甲、乙): 甲介於1~3間，且乙= M1得到K1: 甲介於4~6間，且乙= M2得到K2: 甲介於7~9間，且乙= M3得到K3: 1.產生資料: A <- c(1, 3, ""M1"", ""K1""): B <- c(4, 6, ""M2"", ""K2""): C <- c(7, 9, ""M3"", ""K3""): X1 <- c(5, ""M1""): X2 <- c(4, ""M2""): X3 <- c(8, ""M3""): 當X1資料丟進去判斷，得到K1: 當X2資料丟進去判斷，得到null: 當X3資料丟進去判斷，得到K3: 這個用迴圈寫會比較好?(完全沒頭緒): 謝謝各位前輩:: [環境敘述]::: R version 3.3.3 (2017-03-06): Windows 7 x64 Service Pack 1:: [關鍵字]::: R語言多重數據判斷分類--","R_Language"
"935","M.1489666077.A.53B","hizerg","問題","用R數據條件判斷分類",2017-03-16 20:07:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的多組數值(甲、乙)
甲介於1~3間，且乙= M1得到K1
甲介於4~6間，且乙= M2得到K2
甲介於7~9間，且乙= M3得到K3

1.產生資料
A <- c(1, 3, ""M1"", ""K1"")
B <- c(4, 6, ""M2"", ""K2"")
C <- c(7, 9, ""M3"", ""K3"")
D
E....約有50組的條件須配對

X1 <- c(3, ""M1"")
X2 <- c(4, ""M1"")
X3 <- c(8, ""M3"")
X4
X5...約有5000筆資料要運算


當X1資料丟進去判斷，得到K1
當X2資料丟進去判斷，得到null
當X3資料丟進去判斷，得到K3
...以此類推

這個用迴圈寫會比較好?(完全沒頭緒)

謝謝各位前輩



[環境敘述]:R version 3.3.3 (2017-03-06)Windows 7 x64 Service Pack 1[關鍵字]:R語言多重數據判斷分類--","R_Language"
"936","M.1489573799.A.253","giock18","問題","mailR連不上gmail",2017-03-15 18:29:56,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想用mailR這個套件，用我的gmail信箱寄信

[程式範例]:
send.mail(from, to, subject, body,
          smtp = list(host.name = ""smtp.gmail.com"", port = 465,
                      user.name=""[email<U+00A0>protected]"", passwd=""xxxx"",
ssl=TRUE),
          authenticate = TRUE,
          send = TRUE)

結果出現錯誤訊息：

org.apache.commons.mail.EmailException: Sending the email to the following
server failed : smtp.gmail.com:465
        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1410)
        at org.apache.commons.mail.Email.send(Email.java:1437)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
        at java.lang.reflect.Method.invoke(Unknown Source)
        at RJavaTools.invokeMethod(RJavaTools.java:386)
Caused by: com.sun.mail.util.MailConnectException: Couldn't connect to host,
port: smtp.gmail.com, 465; timeout 60000;
  nested exception is:
        java.net.ConnectException: Connection timed out: connect
        at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2053)
        at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:697)
        at javax.mail.Service.connect(Service.java:386)
        at javax.mail.Service.connect(Service.java:245)
        at javax.mail.Service.connect(Service.java:194)
        at javax.mail.Transport.send0(Transport.java:253)
        at javax.mail.Transport.send(Transport.java:124)
        at org.apache.commons.mail.Email.sendMimeMessage(Email.java:1400)
        ... 6 more
Caused by: java.net.ConnectException: Connection timed out: connect
        at java.net.DualStackPlainSocketImpl.waitForConnect(Native Method)
        at java.net.DualStackPlainSocketImpl.socketConnect(Unknown Source)
        at java.net.AbstractPlainSocketImpl.doConnect(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connectToAddress(Unknown Source)
        at java.net.AbstractPlainSocketImpl.connect(Unknown Source)
        at java.net.PlainSocketImpl.connect(Unknown Source)
        at java.net.SocksSocketImpl.connect(Unknown Source)
        at java.net.Socket.connect(Unknown Source)
        at sun.security.ssl.SSLSocketImpl.connect(Unknown Source)
        at com.sun.mail.util.SocketFetcher.createSocket(SocketFetcher.java:310)
        at com.sun.mail.util.SocketFetcher.getSocket(SocketFetcher.java:215)
        at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:2019)
        ... 13 more
NULL
Error: EmailException (Java): Sending the email to the following server
failed : smtp.gmail.com:465

我上網查了之後發現情況類似：http://stackoverflow.com/questions/37343074/error-in-sending-email-through-gmail-by-using-mailr不過我已經把google mail的兩階段驗證 取消，也啟用了安全性較低的應用程式存取權

不過錯誤訊息還是一樣，請教版上大大，感謝


[關鍵字]:
mailR
send.mail


--","R_Language"
"937","M.1489512085.A.641","joson4921","問題","找出一個係數,讓整體結果最小化",2017-03-15 01:21:16,NA,NA,"- 問題:[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:先附上資料檔 BK.csv 連結如右：https://goo.gl/134FUa如連結內資料所示, Bus_No 皆為 29, Goback 皆為 1(故此二欄位可忽略)因為我正在做的是依據 ( Stop_No., Weekend) 兩欄位對這些資料作分群,目前已完成分群得到: 1.分群結果 grp = 1 or 22.各分群對應的中心點 TravelTime_center3.各分群之資料點數 num_grp1 和 num_grp2現在希望再進一步找出一個 乘積(設其為X),讓這個 X 乘上 num_grp1 或 num_grp2 其中資料點較多者的 TravelTime_centerX 和 TravelTime_center 相乘之後的值 -> TravelTime_refer最終讓同一組 (Stop_No., Weekend) 的 TravelTime_refer 和 TravelTime 相減後之值 ArrivalDiff 乘上另一組係數 B 之後最小化========================================================================即：min( ArrivalDiff * B ), 其中若 ArrivalDiff < -120       則  B = -10ArrivalDiff 介於-120~300 則  B =   0ArrivalDiff > 300        則  B =   2========================================================================多虧板上前輩們的指點, 已經能用 group_by pipe 作出 BK.csv 這份資料現在碰到的問題是所求的 X 非定值,而是要讓後面 (給定的 B 乘上 ArrivalDiff 的結果) 最小化弄了好幾天還是弄不出想要的結果,只好上來求救,請前輩指點![程式範例]:# 給定的(懲罰)值 B, 以下列function表示####################################################################B <- function( TravelTime_refer) {ifelse( TravelTime_refer < -120, -10 , {ifelse( TravelTime_refer >= -120 & TravelTime_refer =< 300, 0, 2)})}# 目標是新增兩個欄位：TravelTime_refer(參考值), Total_Penalty(懲罰值加總)# 大概的結構如下,但這邊卡住了,因為不知道怎麼寫才能讓系統自動找出一個 X好讓 Total_Penalty 的值最小化####################################################################result <- BK %>%group_by( Goback, Bus_No ) %>%mutate( TravelTime_refer = X * TravelTime_center[num_grp1或num_grp2較大者] ) %>%summarise( Total_Penalty = sum( {TravelTime - TravelTime_refer}*B ) )========================================================================主要問題敘述如上,不好意思要再勞煩板上前輩們指點了,在這邊先謝謝大家!!!*[m[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"938","M.1489496669.A.F4E","celestialgod","問題","Re: 排列組合的問題？",2017-03-14 21:04:25,NA,NA,"※ 引述《eco100 (   )》之銘言：: 我問題是這樣的: 設有一個樣本空間 {A, B, C}: 若我想要列出 可重覆抽取，抽出二個樣本的所有可能組合: 有哪個fuction可以用嗎？: 意思是 我要得到 {AA, AB, AC, BA, BB, BC, CA, CB, CC} 9種組合: 如果是抽三個的話 就會有 3^3=27種組合: 我知道combn 但這個是C3取2？ 不是我想要的結果: 謝謝用do.call + expand.grid就可以了

allCombn <- function(x, k){
  do.call(expand.grid, replicate(k, x, simplify = FALSE))
}

allCombn(LETTERS[1L:3L], 2)
#   Var1 Var2
# 1    A    A
# 2    B    A
# 3    C    A
# 4    A    B
# 5    B    B
# 6    C    B
# 7    A    C
# 8    B    C
# 9    C    C

allCombn(LETTERS[1L:4L], 3)
#    Var1 Var2 Var3
# 1     A    A    A
# 2     B    A    A
# 3     C    A    A
....



--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"939","M.1489424924.A.8B4","eco100","問題","排列組合的問題？",2017-03-14 01:08:42,NA,NA,"我問題是這樣的

設有一個樣本空間 {A, B, C}

若我想要列出 可重覆抽取，抽出二個樣本的所有可能組合

有哪個fuction可以用嗎？

意思是 我要得到 {AA, AB, AC, BA, BB, BC, CA, CB, CC} 9種組合

如果是抽三個的話 就會有 3^3=27種組合

我知道combn 但這個是C3取2？ 不是我想要的結果

謝謝

--","R_Language"
"940","M.1489337883.A.A64","f496328mm","問題","R mxnet deeplearning net調整",2017-03-13 00:58:01,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想要用 R 中的 deep learning 套件 mxnet 做圖片mininghttps://goo.gl/PUyF0K使用上面別人寫好的net   InceptionResnetStem

他要求是 Input Shape is 299*299*3

要怎麼改成別種大小？？   我圖片可能640*480等等

雖然可以利用一些方法降維到299*299*3

不過直接改net應該比較好

*3的意思是  應該是RGB三維  299*299就是正方形圖片



另外  它裡面還有寫好多種 net    最後的 get_symbol

是上面的 net 合併嗎？

因為我看它裡面包了所有的函數

一層一層就像是 deep learning   所以才包了這些

可是 get_symbol <- function(num_classes=1000, scale=TRUE)

並沒有輸入data的地方



它包了很多層   也就是說   我只要用get_symbol就好了？？

-----------------------------------------------------------

謝謝

最近在玩  GPU  有跑成功一些例子    GPU真是超快

不過面臨到要調整別人的網路了

[程式範例]:

[環境敘述]:

linux mint18.1    GTX-1070

[關鍵字]:

mxnet

--","R_Language"
"941","M.1489218694.A.6F4","sandychan","問題","時間格式轉換",2017-03-11 15:51:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

資料內的日期原本形式是19990912

想要轉換成1999-09-12的格式



[關鍵字]:

date

--","R_Language"
"942","M.1489216618.A.727","Wush978","情報","Windows 使用者名稱含中文的調整",2017-03-11 15:16:54,NA,NA,"[關鍵字]: R, Windows, 中文

[出處]:https://goo.gl/upvDcJ上述連結是有設定過程的好讀版

重點在調整以下兩個環境變數到不包含中文的路徑

1. TMP
2. R_LIBS_USER

--","R_Language"
"943","M.1489136959.A.CD4","Wush978","心得","itertools簡介",2017-03-10 17:09:16,NA,NA,"[關鍵字]: R, loop

網誌版:http://wush.ghost.io/itertools-intro/---

# itertools 簡介
Wush Wu
March 10, 2017



最近在ptt R_Language版上看到許多跟迴圈有關的文章，所以一時興起想跟大家分享寫迴
圈或apply等函數好用的套件:itertools


```r
library(itertools)
```

```
## Loading required package: iterators
```

講itertools之前，要先介紹iterator的概念：這是把迴圈的功能更精鍊出來的概念。
我們先看一個迴圈的範例：


```r
for(i in 1:3) {
  print(i)
}
```

```
## [1] 1
## [1] 2
## [1] 3
```

這段迴圈的靈魂，在於變數`i`。透過`i in 1:3`，R 就知道`i`的值有以下規則:

- 從`1`開始
- 每次遞增1
- 到`3`結束

更一般來說，R 的迴圈是透過一個Vector物件，告訴R要如何執行迴圈。舉例來說，`i
in x`即代表:

- 從`x[1]`開始
- `x[i]`結束之後執行`x[i+1]`
- 到`x[length(x)]`結束

但是我們可以再更精鍊這樣的概念。而許多工具中，就會設計`iterator`這樣的物件，並
且讓他具備以下兩種功能

- 有沒有下一個值
- 取出下一個值，並且往前推進

有這兩個概念即可建立一個迴圈。

舉例來說，以下兩個迴圈是等價的:


```r
for(i in 1:3) {
  print(i)
}
```

```
## [1] 1
## [1] 2
## [1] 3
```

```r
i <- 0
while(i < 3) {
  i <- i + 1
  print(i)
}
```

```
## [1] 1
## [1] 2
## [1] 3
```

這裡的`i < 4`代表`有沒有下一個值`的邏輯判斷，而`i <- i + 1`則代表`取出下一個值
，並且往前推進`。

itertools套件會建立符合上述概念的物件，並稱之為`iterator`。

透過iterator之間的運算，我們可以輕鬆寫出複雜的迴圈結構

## 範例一：雙層迴圈

有時候當我們需要走遍整個矩陣時，我們可能會寫出類似以下程式碼的迴圈結構:


```r
for(i in 1:3) {
  for(j in 1:3) {
    print(paste(i, j))
  }
}
```

```
## [1] ""1 1""
## [1] ""1 2""
## [1] ""1 3""
## [1] ""2 1""
## [1] ""2 2""
## [1] ""2 3""
## [1] ""3 1""
## [1] ""3 2""
## [1] ""3 3""
```


運用itertools時，我們可以透過`product`來產生相同的效果:


```r
it <- ihasNext(product(i = 1:3, j = 1:3))
while(hasNext(it)) {
  x <- nextElem(it)
  print(paste(x$i, x$j))
}
```

```
## [1] ""1 1""
## [1] ""1 2""
## [1] ""1 3""
## [1] ""2 1""
## [1] ""2 2""
## [1] ""2 3""
## [1] ""3 1""
## [1] ""3 2""
## [1] ""3 3""
```

itertools產生的iterator不能直接在for之中使用，必須要搭配`ihasNext`、`hasNext`
與`nextElem`來做出上述概念的程式碼。

但是我們可以直接拿iterator與`lapply`搭配:


```r
result <- lapply(product(i = 1:3, j = 1:3), function(x) {
  print(paste(x$i, x$j))
})
```

```
## [1] ""1 1""
## [1] ""1 2""
## [1] ""1 3""
## [1] ""2 1""
## [1] ""2 2""
## [1] ""2 3""
## [1] ""3 1""
## [1] ""3 2""
## [1] ""3 3""
```

## 範例二: 合併迴圈

有時候我們有兩個vector要一起做迴圈，這時候只能透過對座標做迴圈來達成。舉例來
說:


```r
x <- 1:3
y <- 4:6
for(i in seq_along(x)) {
  print(paste(x[i], y[i]))
}
```

```
## [1] ""1 4""
## [1] ""2 5""
## [1] ""3 6""
```

但是這種程式碼在x, y 長度不同時不一定會出錯。

運用itertools時，我們可以透過`izip`來產生相同的效果:


```r
it <- ihasNext(izip(x = 1:3, y = 4:6))
while(hasNext(it)) {
  x <- nextElem(it)
  print(paste(x$x, x$y))
}
```

```
## [1] ""1 4""
## [1] ""2 5""
## [1] ""3 6""
```

## 範例三: data.frame

在使用data.frame時，我們常常想要把data.frame的row走一遍:


```r
df <- iris[1:3,]
for(i in seq_len(nrow(df))) {
  x <- df[i,]
  print(paste(x$Sepal.Length, x$Sepal.Width, x$Petal.Length, x$Petal.Width,
x$Species))
}
```

```
## [1] ""5.1 3.5 1.4 0.2 setosa""
## [1] ""4.9 3 1.4 0.2 setosa""
## [1] ""4.7 3.2 1.3 0.2 setosa""
```

而itertools可以直接指定走的方向:


```r
it <- ihasNext(iter(iris[1:3,], by = ""row""))
while(hasNext(it)) {
  x <- nextElem(it)
  print(paste(x$Sepal.Length, x$Sepal.Width, x$Petal.Length, x$Petal.Width,
x$Species))
}
```

```
## [1] ""5.1 3.5 1.4 0.2 setosa""
## [1] ""4.9 3 1.4 0.2 setosa""
## [1] ""4.7 3.2 1.3 0.2 setosa""
```

## 範例四: 批次迴圈

itertools也可以建立批次處理的迴圈:


```r
it <- ihasNext(ichunk(1:10, 3))
while (hasNext(it)) {
  print(unlist(nextElem(it)))
}
```

```
## [1] 1 2 3
## [1] 4 5 6
## [1] 7 8 9
## [1] 10
```

## 範例四: 截斷迴圈

itertools也可以控制讓迴圈提早中止:


```r
mkfinished <- function(time) {
  starttime <- proc.time()[3]
  function() proc.time()[3] > starttime + time
}
f <- mkfinished(1) # 這是個函數，當時間比這個瞬間晚1秒時，f就會回傳FALSE, 迴圈
會中止
# 看看1秒內，迴圈可以跑多少
length(lapply(ibreak(iter(1:1000000), f), function(x) {
  # do something
}))
```

```
## [1] 25499
```

為了更簡單的使用時間限制的功能，itertools提供了`timeout`


```r
it <- ihasNext(timeout(iter(1:1000000), 1))
count <- 0
while(hasNext(it)) {
  x <- nextElem(it)
  count <- count + 1
}
count
```

```
## [1] 17932
```

也可以給定長度，截斷迴圈


```r
length(lapply(ilimit(iter(1:1000000), 100), function(x) {
  # do something
}))
```

```
## [1] 100
```

## 範例五: 重複迴圈

我們也可以重複一個iterator若干次，甚至是無限次


```r
it <- ihasNext(recycle(iter(1:3), 2))
while(hasNext(it)) {
  x <- nextElem(it)
  print(x)
}
```

```
## [1] 1
## [1] 2
## [1] 3
## [1] 1
## [1] 2
## [1] 3
```

## 總結

以上我們展示了一些itertools提供的部份功能。它還有其他有趣的功能可以探索。

總之，當R友們在寫迴圈時，如果遇到比較複雜的迴圈情境，建議可以看看itertools這個
套件有沒有提供幫助。




--","R_Language"
"944","M.1489134938.A.64B","Blackdawn",NA,"Rstudio無法繪圖,求解",2017-03-10 16:35:35,NA,NA,"各位好~

我最近在電腦裡安裝了Rstudio，

以前只有用過R而已

R可以順利的畫出圖

不過Rstudio卻不能...

舉個例子:
當我輸入> vesselsSunk<-c(4,5,1)> barplot(vesselsSunk)結果顯示
Error in gzfile(file, ""wb"") : cannot open the connection

In addition: Warning message:

In gzfile(file, ""wb"") :

  cannot open compressed file 'C:/Users/???{??/AppData/Local/Temp/Rtmp4sX6Ju/rs-graphics-30be399a-fc1c-49e4-b7e0-af0ccef7b0dc/cfe7af97-8055-46eb-bae8-4f1036ccdc67.snapshot', probable reason 'Invalid argument'

Graphics error: Plot rendering error

但在R可以順利畫出

請問各位可以幫小弟看看哪裡出問題嗎？

感激不盡~

-----
Sent from JPTT on my Asus ASUS_Z00UD.

--","R_Language"
"945","M.1489125941.A.B1D","CAPPON","問題","執行檔出現錯誤訊息",2017-03-10 14:05:39,NA,NA,"在R studio 上執行程式沒問題
但是用執行檔跑 就會出現這錯誤訊息
Error: invalid multibyte character in parser at line1
是在SQL語法上有什麼問題嗎??
謝謝



SELECT * FROM  A
                   WHERE A.YYYYMM BETWEEN ('2017M02W6')  AND ('2017M02W9')

Warning message:
closing unused RODBC handle 2
Error: invalid multibyte character in parser at line 1
Execution halted
Warning messages:
1: closing unused RODBC handle 3

--","R_Language"
"946","M.1489115961.A.DA5","allen1985","問題","Re: foreach 與 Parallel 回傳多個matrix?",2017-03-10 11:19:18,NA,NA,"我之前的做法是 回傳list

comb <- function(...){
        mapply('rbind',..., SIMPLIFY = FALSE)
}

tmp <- foreach(i = 1:n, .combine = comb, multicombine = TRUE,
        .init = list(list(),list())) %dopar% {

        return(list(list.1, list.2))
}※ 引述《celestialgod (天)》之銘言：: ※ 引述《girl5566 (5566520)》之銘言：: : 文章分類提示:: : - 問題: 當你想要問問題時，請使用這個類別。: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]:: : 原本程式會有兩個global變數，去承接for loop內的數值，但由於效能的關係: : 目前想把for loop改為 Parallel的方式，但僅查詢到回傳一個的方式，: : 是有解法可以處理這種狀況呢?: : 原始情境:: : df <- NULL: : df1 <- NULL: : for(i in 1:10000){: :    # 經運算後得到temp與temp1: :    temp  <- c(1,2,3,4): :    temp1 <- c(1,2,3,4): :    df <- rbind(df,temp): :    df1 <- rbind(df1, temp1): : }: 我對foreach不熟，不過foreach如果接doParallel底層是用parLapplyLB: 我這裡直接用parallel的parLapplyLB直接示範怎麼做~~~: library(parallel): cl <- makeCluster(detectCores()-1L): valueList <- parLapplyLB(cl, 1:150000, function(x){:   temp  <- rnorm(4):   temp1 <- rnorm(3):   return(list(temp, temp1)): }): df <- do.call(rbind, lapply(valueList , `[[`, 1)): df1 <- do.call(rbind, lapply(valueList , `[[`, 2)): stopCluster(cl)--","R_Language"
"947","M.1489103156.A.837","JamesChen","問題","Foreach 中用到自訂 function 找不到",2017-03-10 07:45:53,NA,NA,"大家好 我算是 R 新手 Matlab 用比較久
要是問題太基礎還請見諒 我爬版 google 都找不到答案
--

我遇到的問題是我有兩個自訂 function
一個叫 f 一個叫 g 好了

我在一個 script 中 call f 來處理一些事情
f 中 g 會被 called 而且是在一個 foreach 的 loop 中

我在 script 最前面把 f g 都 source 了
Rstudio 旁邊的 global enviroment 也顯示 他們都在那了

但是程式會報錯  說找不到 g
我確定不是 code 寫錯 因為如果我不用 f
直接在 script 中把 f 的內容複製貼上是可以跑的

--

我已經遇到這個問題兩次了  實驗室另外兩個 R 老手也不知道怎回事

我嘗試在不同的地方 比如 f 中再 source 一次 g 一樣沒用

求幫助  感謝

--","R_Language"
"948","M.1489058786.A.745","celestialgod","問題","Re: 請問該怎麼寫讓函式更有彈性?",2017-03-09 19:26:17,NA,NA,"※ 引述《locka (locka)》之銘言：: [問題敘述]:: 版上前輩大家晚安~: 假設我的原始資料欄位有year,month,weekday,y等欄位: 我想要對他重複做一樣的事情: (根據不同的欄位grouping,計算每組的數量,組內y的平均然後畫圖): 因為差別只在於grouping的欄位不同,所以在想說可不可以用函數包起來: ex:: df_group_fn(df,""year"",""month"") >>> 回傳以year,month欄位grouping後計算的結果: df_group_fn(df,""month"",""weekday"") >>> 回傳以month,weekday分組後計算的結果: 也就是只要輸入該data frame跟要grouping的欄位: 就可以直接回傳整理好的結果: 原本想要用dplyr做,大概像下面這樣:: df_group_fn <- function(df,col_1,col_2){:         df %>% group_by(col_1,col_2) %>% summarise(count=n(),avg=mean(y)) %>%:                 ggplot(aes(mean,n)+geom_point(): }: 不過會卡在指定欄位參數因為是字串的關係, 在group_by那邊會有問題: 所以試著改用data.table的寫法:: df_group_fn <- function(df,col_1,col_2){:         df <- as.data.table(df):         df[,`:=`(count=.N, avg=mean(y)),by=c(col_1,col_2)]:         ...: }: 可是data.table不會像dplyr一樣: 產生只留下grouping跟summarise欄位的dataframe: 他是在原始的data裡面新增欄位,這樣我就不知道怎麼畫圖了...: 總結我的問題：: 1. 希望有高手可以指點用dplyr跟data.table把function寫得更有彈性的方法: 2. 如果我今天不想把grouping的欄位數量寫死,: (例如我輸入""year""它就只根據year欄位分組,: 輸入""year"",""month"",""weekday""就根據那三個欄位分組,該怎麼做呢?: 3. 最後想問大家實務上會這麼做嗎? 很希望可以聽到版上大家分享!!: 先謝謝各位版上先進了 m(_ _)m: [關鍵字]::: function, data.table, grouping:

好讀版：http://pastebin.com/Yxres7jy我會建議用wrapr去做這件事情

下面先把一般寫法列出給原PO參考

library(dplyr)
library(pipeR)
library(ggplot2)
library(data.table)

data(""diamonds"", package = ""ggplot2"")

# 一般寫法 (dplyr)
df_group_fn <- function(df, meanCol, col_1, col_2){
  df %>>% group_by_(.dots = c(col_1, col_2)) %>>%
    summarise_(.dots = c(n = ""n()"",
                         mean = paste0(""mean("", meanCol, "")""))) %>>%
    {ggplot(., aes(mean,n)) + geom_point()}
}
df_group_fn(diamonds, ""price"", ""cut"", ""color"")

# 一般寫法 (data.table)
dt_group_fn <- function(dt, meanCol, col_1, col_2){
  dt[ , .(n = .N, mean = eval(parse(text = paste0(""mean("", meanCol, "")"")))),
     by = c(col_1, col_2)] %>>%
  {ggplot(., aes(mean,n)) + geom_point()}
}
dt_group_fn(data.table(diamonds), ""price"", ""cut"", ""color"")

# wrapr + dplyr
library(wrapr)
df_group_fn2 <- function(df, meanCol, col_1, col_2){
  let(list(y = meanCol, c1 = col_1, c2 = col_2), {
    df %>>% group_by(c1, c2) %>>% summarise(n = n(), mean = mean(y))
  }) %>>% {ggplot(., aes(mean,n)) + geom_point()}
}
df_group_fn2(diamonds, ""price"", ""cut"", ""color"")

# wrapr + data.table
dt_group_fn2 <- function(dt, meanCol, col_1, col_2){
  let(list(y = meanCol, c1 = col_1, c2 = col_2), {
    dt[ , .(n = .N, mean = mean(y)), by = .(c1, c2)]
  }) %>>% {ggplot(., aes(mean,n)) + geom_point()}
}
dt_group_fn2(data.table(diamonds), ""price"", ""cut"", ""color"")

# 進階，不把欄位給死的方法：
# dplyr
df_group_fn3 <- function(df, meanCol, groupByCols){
  let(list(y = meanCol), {
    df %>>% group_by_(.dots = groupByCols) %>>%
      summarise(n = n(), mean = mean(y))
  }) %>>%
  {ggplot(., aes(mean,n)) + geom_point()}
}
df_group_fn3(diamonds, ""price"", c(""cut"", ""color""))

# data.table
dt_group_fn3 <- function(dt, meanCol, groupByCols){
  let(list(y = meanCol), {
    dt[ , .(n = .N, mean = mean(y)), by = groupByCols]
  }) %>>% {ggplot(., aes(mean,n)) + geom_point()}
}
dt_group_fn3(data.table(diamonds), ""price"", c(""cut"", ""color""))


實務上，我自己是做比較接近data engineer的工作

基本上user就會有類似需要，這時候彈性的函數就顯得很重要

所以怎麼去利用eval, parse以及...就變得很重要 (沒看錯就是三個.)

除非全部都是處理data.frame，就可用dplyr透過lazyeval去做


不用wrapr，寫起來最漂亮的應該是下面這樣： (更正，應該是user用起來最爽XD)

# data.table + ... + substitute
dt_group_fn3 <- function(dt, meanCol, ...){
  groupByCols <- as.character(as.list(substitute(list(...)))[-1L])
  y <- substitute(meanCol)
  dt[ , .(n = .N, mean = mean(y)), by = groupByCols] %>>%
    {ggplot(., aes(mean,n)) + geom_point()}
}
dt_group_fn3(data.table(diamonds), price, cut, color)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"949","M.1488994480.A.FF7","locka","問題","怎麼寫可以讓函式比較有彈性",2017-03-09 01:34:38,NA,NA,"[問題敘述]:

版上前輩大家晚安~

假設我的原始資料欄位有year,month,weekday,y等欄位
我想要對他重複做一樣的事情
(根據不同的欄位grouping,計算每組的數量,組內y的平均然後畫圖)
因為差別只在於grouping的欄位不同,所以在想說可不可以用函數包起來

ex:
df_group_fn(df,""year"",""month"") >>> 回傳以year,month欄位grouping後計算的結果
df_group_fn(df,""month"",""weekday"") >>> 回傳以month,weekday分組後計算的結果

也就是只要輸入該data frame跟要grouping的欄位
就可以直接回傳整理好的結果

原本想要用dplyr做,大概像下面這樣:
df_group_fn <- function(df,col_1,col_2){
        df %>% group_by(col_1,col_2) %>% summarise(count=n(),avg=mean(y)) %>%
                ggplot(aes(mean,n)+geom_point()

}
不過會卡在指定欄位參數因為是字串的關係, 在group_by那邊會有問題


所以試著改用data.table的寫法:

df_group_fn <- function(df,col_1,col_2){
        df <- as.data.table(df)
        df[,`:=`(count=.N, avg=mean(y)),by=c(col_1,col_2)]
        ...
}

可是data.table不會像dplyr一樣
產生只留下grouping跟summarise欄位的dataframe
他是在原始的data裡面新增欄位,這樣我就不知道怎麼畫圖了...


總結我的問題：
1. 希望有高手可以指點用dplyr跟data.table把function寫得更有彈性的方法
2. 如果我今天不想把grouping的欄位數量寫死,
(例如我輸入""year""它就只根據year欄位分組,
輸入""year"",""month"",""weekday""就根據那三個欄位分組,該怎麼做呢?
3. 最後想問大家實務上會這麼做嗎? 很希望可以聽到版上大家分享!!


先謝謝各位版上先進了 m(_ _)m




[關鍵字]:function, data.table, grouping--","R_Language"
"950","M.1488987055.A.28F","celestialgod","問題","Re: foreach 與 Parallel 回傳多個matrix?",2017-03-08 23:30:51,NA,NA,"※ 引述《girl5566 (5566520)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別。: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 原本程式會有兩個global變數，去承接for loop內的數值，但由於效能的關係: 目前想把for loop改為 Parallel的方式，但僅查詢到回傳一個的方式，: 是有解法可以處理這種狀況呢?: 原始情境:: df <- NULL: df1 <- NULL: for(i in 1:10000){:    # 經運算後得到temp與temp1:    temp  <- c(1,2,3,4):    temp1 <- c(1,2,3,4):    df <- rbind(df,temp):    df1 <- rbind(df1, temp1): }我對foreach不熟，不過foreach如果接doParallel底層是用parLapplyLB

我這裡直接用parallel的parLapplyLB直接示範怎麼做~~~

library(parallel)
cl <- makeCluster(detectCores()-1L)

valueList <- parLapplyLB(cl, 1:150000, function(x){
  temp  <- rnorm(4)
  temp1 <- rnorm(3)
  return(list(temp, temp1))
})

df <- do.call(rbind, lapply(valueList , `[[`, 1))
df1 <- do.call(rbind, lapply(valueList , `[[`, 2))
stopCluster(cl)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"951","M.1488986361.A.F22","girl5566","問題","foreach 與 Parallel 回傳多個matrix?",2017-03-08 23:19:18,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

原本程式會有兩個global變數，去承接for loop內的數值，但由於效能的關係

目前想把for loop改為 Parallel的方式，但僅查詢到回傳一個的方式，

是有解法可以處理這種狀況呢?

原始情境:

df <- NULL
df1 <- NULL

for(i in 1:10000){
   # 經運算後得到temp與temp1
   temp  <- c(1,2,3,4)
   temp1 <- c(1,2,3,4)

   df <- rbind(df,temp)
   df1 <- rbind(df1, temp1)
}

[程式範例]:

library(foreach)
library(doParallel)

#setup parallel backend to use many processors
cores=detectCores()
cl <- makeCluster(cores[1]-1) #not to overload your computer
registerDoParallel(cl)

finalMatrix <- foreach(i=1:150000, .combine=cbind) %dopar% {
   tempMatrix = functionThatDoesSomething() #calling a function
   #do other things if you want

   tempMatrix#Equivalentto finalMatrix = cbind(finalMatrix, tempMatrix)
}
#stop cluster
stopCluster(cl)

Ref:http://tinyurl.com/hdmlpsh[環境敘述]:

Win7 64bit, R 3.3.1

[關鍵字]:

Parallel

--","R_Language"
"952","M.1488981019.A.A3E","maydayya","問題","韓文字顯示為方框",2017-03-08 21:50:13,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我需要使用R去分析韓文字，但是當在R上輸入韓文時，每個字都會變成方框http://imgur.com/a/2k2n5[程式範例]:library(KoNLP)Checking user defined dictionary!This R shell doesn't contain any Hangul encoding.For fully use, any of 'UTF-8', 'CP949', 'EUC-KR' needs to be used for R shellencoding.[環境敘述]:sessionInfo()R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] plyr_1.8.4         wordcloud_2.5      RColorBrewer_1.1-2 KoNLP_0.80.1loaded via a namespace (and not attached):[1] Rcpp_0.12.9     digest_0.6.12   withr_1.0.2     slam_0.1-40DBI_0.5-1       magrittr_1.5    RSQLite_1.1-2[8] stringi_1.1.2   hash_2.2.6      tau_0.0-19      devtools_1.12.0tools_3.3.2     stringr_1.2.0   rJava_0.9-8[15] memoise_1.0.0   Sejong_0.01[關鍵字]:韓文hangul encoding--","R_Language"
"953","M.1488965063.A.6A9","x9060000456","問題","讀csv時，時間問題",2017-03-08 17:24:21,NA,NA,"[問題敘述]:想請問各問前輩大大們,最近想讀入時間的資料(.csv), 假如長成以下這樣,<DATE>,<TIME>,20041015,090100,20041015,090200,20041015,090300,20041015,090400,20041015,090500,20041015,090600,我想將<TIME>轉成時間的format,但是使用read.csv時, 變成以下這樣,90100 90200 90300 90400 90500 90600,前面的'0'不見惹, 所以使用strptime這個function時,就跑出NA.所以想請問是否可以從read.csv裡面的參數進行調整,或是針對strptime進行調整, 謝謝大家![程式範例]:strptime(c(""90100"", ""90200"", ""90300"", ""90400"", ""90500"", ""90600""), ""%H%M%S"")## NA NA NA NA NA NA--","R_Language"
"954","M.1488736610.A.8CA","ic7535","問題","出現non-finite finite-difference value",2017-03-06 01:56:48,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除google了好多個網頁但還是找不到問題並且無法解決，故此來這求助，麻煩大家了，
謝謝。

[問題類型]:經驗諮詢[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想使用optim求極值，因想要的為極大值，所以放入的函數是""-sum(log(likelihood))""
，但不知為何程式跑一跑後會跳出""Error in optim(matrix(0, 1, (6 * nques)), method = ""BFGS"", get_like_Do,  :
  non-finite finite-difference value [60]""這樣的警告，而後就會跳出因此沒結果。
想請教各位是否知道為何並且該如何去解決這個問題呢?

備註:
要估計60個值，optim細部設定如下，
初始值皆為0，method=""BFGS""，maxit=1000，hessian=FALSE，
我方法就是要用BFGS，符合我的需求也真的估的比較好，之前嘗試過Nelder-Mead，內容
和結果不是我要的，雖然他不會跳出上面提到的Error...

第一次發問程式問題的文章，不知這樣敘述好不好，所以就先這樣了，麻煩各位前輩了，
謝謝。

--","R_Language"
"955","M.1488727704.A.05E","celestialgod","問題","Re: 依特定欄位的內容對data.table資料作分群",2017-03-05 23:28:20,NA,NA,"※ 引述《joson4921 (特務)》之銘言：:: - 問題::: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]::: 手邊有一份資料 dt1 ,裡面有幾個欄位,以下節錄部分內容：:        Stop.No                 TravelTime                      Weekend: 1         1 　　↘: 2         1 　  → 當Stop.No==1, TravelTime介於[0,120],Weekend可能為True/False: 3         1　　 ↗: ...: 666       2  　 ↘: 667       2　　 → 當Stop.No==2, TravelTime介於[60,180],Weekend可能為True/False: 668       2     ↗: ...: 1315      3  　 ↘: 1316      3   　→ 當Stop.No==3,TravelTime介於[120,240],Weekend可能為True/False: 1317      3   　↗: ...: 2017: =========================================================================: ※1　共2017筆資料: ※2  Stop.No的資料為隨機1~3, 上面表列僅為示意用:      並非正好[ 第1~665筆的Stop.No==1, 第666~1314筆==2, 第1315~2017筆==3]: =========================================================================: 我想做的事情是依照 Stop.No/Weekend 欄位進行分群,: 例：: 這2017筆資料中有322筆資料 Stop.No==1 且 Weekend=T ,: 則將這322筆視為同一群,其餘依此類推,故應可得到6群: 這邊參照之前板上前輩教導的方法將相同的 Stop.No 和 Weekend 取出作 group_by: 程式碼架構如下(by dplyr)：: dt1 %>%:   group_by( Stop.No, Weekend ) %>%:   summarise( 對 group_by 出來的6群,作集群分析,詳如下述 ): =========================================================================: summarise() 的內容：: 想把「上面 group_by 出來的結果(6群),每一群都再分成兩群(gr1/gr2)並找出中心」,: 因此上網查了分群的方法,根據google,假設上述六群中的某群叫作 gr8,: 則可透過以下程式碼將 gr8 分成兩群,並求出 gr8 的群集中心: kmeans.result = kmeans( gr8, 2): gr8_result <- gr8[, centers := kmeans.result$centers[kmeans.result$cluster]  ]: =========================================================================: 我想做的事情:: 以本資料 dt1 為例, group_by 出來的 6群 應可透過kmeans求出 12個集群中心: ( gr8 裡面的 centers欄位 ): 最後將 gr8 的 centers 欄位內容加回 dt1 對應的2017筆資料列後面: 以上敘述滿複雜的,若有敘述不清的地方歡迎提問,小弟將盡速補充: 請求各位前輩們協助,先謝謝各位大大了:: [程式範例]::: [環境敘述]::
:: [關鍵字]::
:

上一篇發現做錯，先刪掉了

好讀版：http://pastebin.com/MguuwYAi建議直接看好讀版

簡單simulation一組資料，有五個變數，兩個變數是group by的變數

另外三個是拿來分群的變數

最終的結果是把原始資料併上每個資料的cluster以及對應的center

計算時間的話，dplyr + tidyr 或是 data.table

都可以在0.1秒以內可以算完 20000個觀察值

library(dplyr)
library(tidyr)
library(pipeR)

# dplyr + tidyr
ngrp <- 2L
numSamples <- 200L
DF <- data.frame(V1 = sample(1L:3L, numSamples, TRUE), V2 = sample(1L:2L,
numSamples, TRUE),
                 V3 = rnorm(numSamples), V4 = rnorm(numSamples), V5 =
rnorm(numSamples))
DF %>>% group_by(V1, V2) %>>%
  summarise(
    oriData = list(data.frame(V3 = V3, V4 = V4, V5 = V5)),
    kmeansRes = list(kmeans(data.frame(V3_center = V3, V4_center = V4,
V5_center = V5), ngrp))) %>%
  rowwise %>>%
  do(V1 = .$V1, V2 = .$V2, oriData = .$oriData, grps = .$kmeansRes$cluster,
     centers = as.data.frame(.$kmeansRes$centers[.$kmeansRes$cluster, ])) %>>%
  mutate(V1 = unlist(V1), V2 = unlist(V2)) %>>%
  unnest(grps, oriData, centers)
# # A tibble: 200 × 9
#       V1    V2  grps          V3          V4         V5   V3_center
V4_center  V5_center
#    <int> <int> <int>       <dbl>       <dbl>      <dbl>       <dbl>
<dbl>      <dbl>
# 1      1     1     1  1.11016253  0.02722608  0.3027893 -0.35019463
0.1903187  0.9848824
# 2      1     1     1  0.70820726 -2.19334026  0.3242983 -0.35019463
0.1903187  0.9848824
# 3      1     1     2 -0.33493165 -0.07425543 -0.6383053 -0.02633612
0.3241840 -1.0112687
# 4      1     1     2 -2.03926090  0.24728959  0.1302806 -0.02633612
0.3241840 -1.0112687
# 5      1     1     2 -0.04744358  0.20338375 -1.3591982 -0.02633612
0.3241840 -1.0112687
# 6      1     1     2  0.12768265  1.34077790 -1.4590170 -0.02633612
0.3241840 -1.0112687
# 7      1     1     2  1.08012650  1.95067610  1.3336783 -0.02633612
0.3241840 -1.0112687
# 8      1     1     2  0.85677265  0.46973309 -0.6577587 -0.02633612
0.3241840 -1.0112687
# 9      1     1     1  0.90455630  2.44301533 -1.0511750 -0.35019463
0.1903187  0.9848824
# 10     1     1     2  1.07202152 -0.05310248 -1.4048170 -0.02633612
0.3241840 -1.0112687
# # ... with 190 more rows

# data.table
library(data.table)
ngrp <- 2L
numSamples <- 200L
DT <- data.table(V1 = sample(1L:3L, numSamples, TRUE), V2 = sample(1L:2L,
numSamples, TRUE),
                 V3 = rnorm(numSamples), V4 = rnorm(numSamples), V5 =
rnorm(numSamples))


DT_kmeans <- DT[ , .(
  oriData = list(data.table(V3, V4, V5)),
  kmeansRes = list(kmeans(data.table(V3, V4, V5) %>>%
                    setnames(paste0(names(.), ""_center"")), ngrp) %>>%
                    {data.table(grp = .$cluster, .$centers[.$cluster, ])})),
                 by = .(V1, V2)]
cbind(DT_kmeans[ , .(V1, V2)][rep(1L:nrow(DT_kmeans),
                                sapply(DT_kmeans$oriData, nrow)), ],
      rbindlist(DT_kmeans$oriData),
      rbindlist(DT_kmeans$kmeansRes))
#      V1 V2         V3         V4         V5 grp  V3_center  V4_center
V5_center
#   1:  1  1 -1.5910524  2.1274208 -1.3464532   1  0.1155321  0.9482175
0.290026606
#   2:  1  1  0.3280774 -0.1150860 -1.2363502   2 -0.1138527 -1.1174780
-0.603929772
#   3:  1  1 -0.2026653 -0.9188654  0.4275579   2 -0.1138527 -1.1174780
-0.603929772
#   4:  1  1 -0.3258952  0.3159080  1.3667256   1  0.1155321  0.9482175
0.290026606
#   5:  1  1 -0.2819986 -1.2371227  0.6597289   2 -0.1138527 -1.1174780
-0.603929772
#
---
# 196:  2  2  0.6875229 -1.4182973 -0.1774791   1  0.5244143 -0.4805122
0.084895890
# 197:  2  2  1.1732799 -0.7428654 -0.1777401   1  0.5244143 -0.4805122
0.084895890
# 198:  2  2 -1.1992074 -0.6165810  0.0421549   2 -0.8536335  0.6373769
-0.007181771
# 199:  2  2 -0.4136762  1.1002398  0.4306150   2 -0.8536335  0.6373769
-0.007181771
# 200:  2  2 -0.1929361 -0.7346460 -0.4713694   1  0.5244143 -0.4805122
0.084895890



--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"956","M.1488723097.A.21F","joson4921","問題","依特定欄位的內容對data.table資料作分群",2017-03-05 22:11:31,NA,NA,"- 問題:[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:手邊有一份資料 dt1 ,裡面有幾個欄位,以下節錄部分內容：Stop.No                 TravelTime                      Weekend1         1 　　↘2         1 　  → 當Stop.No==1, TravelTime介於[0,120],Weekend可能為True/False3         1　　 ↗...666       2  　 ↘667       2　　 → 當Stop.No==2, TravelTime介於[60,180],Weekend可能為True/False668       2     ↗...1315      3  　 ↘1316      3   　→ 當Stop.No==3,TravelTime介於[120,240],Weekend可能為True/False1317      3   　↗...2017=========================================================================※1　共2017筆資料※2  Stop.No的資料為隨機1~3, 上面表列僅為示意用並非正好[ 第1~665筆的Stop.No==1, 第666~1314筆==2, 第1315~2017筆==3]=========================================================================我想做的事情是依照 Stop.No/Weekend 欄位進行分群,例：這2017筆資料中有322筆資料 Stop.No==1 且 Weekend=T ,則將這322筆視為同一群,其餘依此類推,故應可得到6群這邊參照之前板上前輩教導的方法將相同的 Stop.No 和 Weekend 取出作 group_by程式碼架構如下(by dplyr)：dt1 %>%group_by( Stop.No, Weekend ) %>%summarise( 對 group_by 出來的6群,作集群分析,詳如下述 )=========================================================================summarise() 的內容：想把「上面 group_by 出來的結果(6群),每一群都再分成兩群(gr1/gr2)並找出中心」,因此上網查了分群的方法,根據google,假設上述六群中的某群叫作 gr8,則可透過以下程式碼將 gr8 分成兩群,並求出 gr8 的群集中心kmeans.result = kmeans( gr8, 2)gr8_result <- gr8[, centers := kmeans.result$centers[kmeans.result$cluster]  ]=========================================================================我想做的事情:以本資料 dt1 為例, group_by 出來的 6群 應可透過kmeans求出 12個集群中心( gr8 裡面的 centers欄位 )最後將 gr8 的 centers 欄位內容加回 dt1 對應的2017筆資料列後面以上敘述滿複雜的,若有敘述不清的地方歡迎提問,小弟將盡速補充請求各位前輩們協助,先謝謝各位大大了[程式範例]:


[環境敘述]:[關鍵字]:--","R_Language"
"957","M.1488713633.A.9D2","celestialgod","問題","Re: paste字串處理",2017-03-05 19:33:50,NA,NA,"※ 引述《CAPPON (JI3)》之銘言：: 因要到SQL抓資料: 需要先做資料的轉換, 但是要如何從RM_NO 轉換成要的格式: 每個字串都要有上引號: 謝謝:   data <- data:   column.name <- ""RM_NO"":   cat(""column.name = "", column.name, ""\n"", sep=""""):   data$bb <- paste(""\'"", as.character(data[,paste(column.name, sep="""")]), ""\'"": , sep=""""): RM_NO                                                   bb: AB7003K,A6B7004M,A6B7003X                'AB7003K,A6B7004M,A6B7003X': B6C80077,B6C8007U,B6C8007S                'B6C80077,B6C8007U,B6C8007S': A6CQ0007,A6CQ0003,A6CQ0008         'A6CQ0007,A6CQ0003,A6CQ0008': 需要的格式: 'AB7003K','A6B7004M','A6B7003X': 'B6C80077','B6C8007U','B6C8007S': 'A6CQ0007',A6CQ0003','A6CQ0008'dat <- read.table(textConnection(""
RM_NO
AB7003K,A6B7004M,A6B7003X
B6C80077,B6C8007U,B6C8007S
A6CQ0007,A6CQ0003,A6CQ0008
""), header = TRUE)

column.name <- ""RM_NO""
dat$bb <- gsub(""([A-Z0-9]+)(,?)"", ""'\\1'\\2"", dat[[column.name]])
dat

#                        RM_NO                               bb
# 1  AB7003K,A6B7004M,A6B7003X  'AB7003K','A6B7004M','A6B7003X'
# 2 B6C80077,B6C8007U,B6C8007S 'B6C80077','B6C8007U','B6C8007S'
# 3 A6CQ0007,A6CQ0003,A6CQ0008 'A6CQ0007','A6CQ0003','A6CQ0008'


--","R_Language"
"958","M.1488712936.A.864","celestialgod","問題","Re: 空格格數跟變數有關，應怎麼寫？",2017-03-05 19:22:13,NA,NA,"※ 引述《eco100 (   )》之銘言：: 問題是這樣的: 例如我想輸出下列結果：:     1:    222:   33333:  4444444: 555555555: 我自己用簡單的迴圈可以輸出下列結果了：: 1: 222: 33333: 4444444: 555555555: 但就是不知道要怎麼把每行前面的空格數，用迴圈的變數控制: 應該如何寫？ 感謝各位！k <- 5
i <- 1
while (i <= k) {
  cat(paste0(rep("" "", k-i), collapse = """"),    # 空格數
      paste0(rep(i, i*2 - 1), collapse = """"),  # 數字
      ""\n"",                                    # 下一行
      sep = """")                                # 字串之間的間隔
  i <- i + 1
}

#     1
#    222
#   33333
#  4444444
# 555555555

--

--","R_Language"
"959","M.1488518479.A.B3B","CAPPON","問題","匯出excel中文出現亂碼",2017-03-03 13:21:16,NA,NA,"匯出的excel
中文部分會呈現亂碼
這需需在加入什麼code  才可以順利呈現出來呢?
謝謝


file2=paste(""Y:\\"",tday,""\\report.xls"",sep="""")
cat (""<table border=1 ALIGN=center  >"" , file=file2,  fill=F, labels=NULL, app
end=F)

cat (""<tr>"" , file=file2 , append = T)

cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>應用別</font></th>"",
 file = file2 , append = T)
cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>出貨type</font></th>
"", file = file2 , append = T)
cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>客戶</font></th>"", f
ile = file2 , append = T)
cat(""<th bgcolor='#EEE685'   rowspan=2><font face='Arial'>客端保良</font></th>
"", file = file2 , append = T)






--","R_Language"
"960","M.1488506460.A.C02","HumuHumu","問題","shiny siderbar 的問題",2017-03-03 10:00:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想請問一下，在shiny UI的siderbar

我設了很多條numeric input，可是每一條都會佔一個row，這樣整個網頁會拉太長

我想要把numeric input弄成窄一點，然後一個row可以放兩個numeric input

要怎麼做呢?

已經用width=""50%""讓寬度剩一半了，再來只需要把兩個numeric input塞到同一列就好

--","R_Language"
"961","M.1488447073.A.B51","CAPPON","問題","paste字串處理",2017-03-02 17:31:10,NA,NA,"因要到SQL抓資料
需要先做資料的轉換, 但是要如何從RM_NO 轉換成要的格式　
每個字串都要有上引號
謝謝


  data <- data
  column.name <- ""RM_NO""
  cat(""column.name = "", column.name, ""\n"", sep="""")
  data$bb <- paste(""\'"", as.character(data[,paste(column.name, sep="""")]), ""\'""
, sep="""")

RM_NO                                                   bb
AB7003K,A6B7004M,A6B7003X                'AB7003K,A6B7004M,A6B7003X'
B6C80077,B6C8007U,B6C8007S                'B6C80077,B6C8007U,B6C8007S'
A6CQ0007,A6CQ0003,A6CQ0008         'A6CQ0007,A6CQ0003,A6CQ0008'

需要的格式
'AB7003K','A6B7004M','A6B7003X'
'B6C80077','B6C8007U','B6C8007S'
'A6CQ0007',A6CQ0003','A6CQ0008'




--","R_Language"
"962","M.1488439994.A.6C7","eco100","問題","空格格數跟變數有關，應怎麼寫？",2017-03-02 15:33:11,NA,NA,"問題是這樣的

例如我想輸出下列結果：

    1
   222
  33333
 4444444
555555555

我自己用簡單的迴圈可以輸出下列結果了：

1
222
33333
4444444
555555555

但就是不知道要怎麼把每行前面的空格數，用迴圈的變數控制
應該如何寫？ 感謝各位！

--","R_Language"
"963","M.1488358163.A.DCC","tytony","問題","leafletProxy在網頁端執行問題",2017-03-01 16:49:17,NA,NA,"[問題類型]:

程式除錯

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)


[問題敘述]:

這個程式是使用Leaflet套件繪製地圖

並用leafletProxy方式配合addMarkers加上資料點位

程式在本機跟伺服器的R Studio都可以正常繪出資料點

但如果從網頁端連至該網頁，可以正常顯示地圖，但leafletProxy內的指令卻沒有讀到

導致資料點位無法顯示出來

瀏覽器的console訊息表示找不到地圖ID (Couldn't find map with id mainmap)

但我確定leafletProxy指定的地圖ID是正確，不知是哪邊出了問題

麻煩先進們指點，謝謝！


[程式範例]:

#### ui.r ####
library(shiny)
library(shinydashboard)
library(leaflet)

sidebar = div(
        sidebarMenu(
                menuItem(""主頁"", tabName = ""Main"",
                        icon = icon(""desktop""))  ))
body = div(
        tabItems(
                tabItem(tabName = ""Main"",
                        fluidRow(column(width = 12,
                        leafletOutput(""mainmap"", height = ""900px"")
           )))))
header = dashboardHeader(title = ""TEST"")

body = dashboardPage(header, dashboardSidebar(sidebar),  dashboardBody(body))


#### server.r ####

shinyServer(function(input, output) {
        output$mainmap = renderLeaflet({
                map = leaflet() %>%  setView(121, 23.5, 7) %>% addTiles()
        return(map)
        })

        observe({
                leafletProxy(""mainmap"") %>%
                addMarkers(lng = 120, lat = 25)
        })
})

## 實際程序是讀入一個dataframe畫圖，但測試發現連單純點位都無法顯示


[環境敘述]:

(伺服器R-studio)
R version 3.2.2 (2015-08-14)
Platform: x86_64-redhat-linux-gnu (64-bit)
Running under: Amazon Linux AMI 2016.03

[關鍵字]:

shiny-server, leaflet

--","R_Language"
"964","M.1488351291.A.EBB","pete3",NA,"R有bible嗎",2017-03-01 14:54:48,NA,NA,"請問有類似K&R這種聖經本可以推薦嗎
中英文都可
謝謝各位先進

--","R_Language"
"965","M.1488348291.A.D65","CAPPON","問題","dplyr 排序問題",2017-03-01 14:04:49,NA,NA,"ratio欄位做完排序後,可以取出前兩大的DEF_TYPE
group by PROJECT, CUSTOMER 直接顯示出來的就是ratio較高的兩個DEF_TYPE嗎 ?


def <- da %>%
  group_by(PRODUCT_TYPE,SHIP_TYPE,PROJECT_ID,CUSTOMER,DEF_TYPE) %>%
  summarise(ratio=sum(DEF_RATIO)) %>%
  arrange(PRODUCT_TYPE,SHIP_TYPE,PROJECT_ID,CUSTOMER, desc(ratio))



PRODUCT_TYPE        SHIP_TYPE        PROJECT_ID        CUSTOMER        DEF_TYP
E        ratio
A        B        C1        D1        E1        0.041085839
A        B        C1        D1        E2        0.0377843
A        B        C1        D1        E3        0.014306677
A        B        C1        D1        E4        0.010454879
A        B        C1        D1        E5        0.007153338
A        B        C1        D1        E6        0.000366838
A        B        C1        D1        E7        0.000183419
A        B        C2        D2        E1        0.073694289
A        B        C2        D2        E2        0.02597523
A        B        C2        D2        E3        0.013250147
A        B        C2        D2        E4        0.001575192

變成

PRODUCT_TYPE        SHIP_TYPE        PROJECT_ID        CUSTOMER        DEF_TYP
E        ratio
A        B        C1        D1        E1        0.041085839
A        B        C1        D1        E2        0.0377843
A        B        C2        D2        E1        0.073694289
A        B        C2        D2        E2        0.02597523






[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"966","M.1488335608.A.3FF","samex4x4","問題","Emoji亂碼清除",2017-03-01 10:33:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我手邊有大概2000筆的FB文章爬文資料小編會在文章內加上Emoji導致部分亂碼出現目前檢查了大概會有兩種一種是  \U3e64653c\U3e30613c\U3e63623c\U3e64653c\U3e63623c\U3e66393c33另一種是 <U+653C><U+3E64><U+613C><U+3E30><U+623C><U+3E64><U+653C><U+3E64>就和中文交雜在一起(汗)因為想要再用結巴分詞做一次文字探勘，想詢問怎麼去除，謝謝[程式範例]:View的結果http://imgur.com/a/RxuA2直接看http://imgur.com/a/rR8xm字串如下：[1] ""《日本淺草隱藏版甜點店》太強\U3e64653c\U3e30613c\U3e64623c\U3e64653c\U3e31623c\U3e66383c竟然能征服比利時皇室的胃不用跑歐洲∼日本就能吃到啦！(超級私人的口袋名單XD割愛給大家)內容合作：Matcha與在地人同趣的日本旅遊指南#旅行#東京#淺草#隱藏版甜點店""[2] ""【<U+653C><U+3E64><U+613C><U+3E30><U+623C><U+3E63><U+653C><U+3E64><U+623C><U+3E37><U+623C><U+3E30><U+653C><U+3E64><U+613C><U+3E30><U+623C><U+3E63><U+653C><U+3E64><U+623C><U+3E37><U+623C><U+3E37>韓國我來了！！】[環境敘述]:> sessionInfo()R version 3.3.2 (2016-10-31)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 14.04.5 LTSlocale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8[5] LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8LC_PAPER=zh_TW.UTF-8       LC_NAME=C[9] LC_ADDRESS=C               LC_TELEPHONE=CLC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] dplyr_0.5.0  jiebaR_0.9.1 jiebaRD_0.1loaded via a namespace (and not attached):[1] lazyeval_0.2.0 magrittr_1.5   R6_2.2.0       assertthat_0.1 DBI_0.5-1[關鍵字]:Emoji, facebook, 亂碼--","R_Language"
"967","M.1488287489.A.F82","nyc0125","問題","R 的日期篩選斷點不是零點零分？",2017-02-28 21:11:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

想請問：當用 date 去篩選 datetime 的欄位時
R 是怎麼判斷 date 的時刻切分/比對的呢？

有些語言你丟 Date 去篩選，他會當成零點零零分來處理
什麼意思呢，像是

篩選條件 A > 20170201，<= 20170208
篩選條件 B > 20170201，< 20170209
會不一樣，

因為前者 20170201 0:00 ~ 20170208 0:00（包含）
而後者是 20170201 0:00 ~ 20170209 0:00（不含）

但我目前在 R 裡面做出來的結果，似乎兩者會是一樣的。
所以想確認的是 R 的日期比對，
如果只給到 day，就會包含進 0:01~23:59 的結果是嗎？


[程式範例]:

startDate = as.Date('2017-02-01')
endDate   = startDate + 7

attach(csv)
filter2 <- published_at >= startDate & published_at < endDate + 1
csv2 <- csv[filter2, ]
View(csv2)
filter3 <- published_at >= startDate & published_at <= endDate
csv3 <- csv[filter3, ]
View(csv3)

csv2 == csv3
#=> TRUE

[環境敘述]:

R version 3.3.2 (2016-10-31)

[關鍵字]:

Date, Filter

--","R_Language"
"968","M.1488251426.A.AFF","yuanz","問題","RStudio存檔問題",2017-02-28 11:10:23,NA,NA,"版友好
請問我在R Studio的workspace輸入程式碼到一半存檔
存檔選項有""save"" ""save as"" ""save with encoding"" ""save all""
應該選哪一個?
之後要載入是要""open file""還是""load workspace""
另外畫面右方environment的部分要另外儲存成一個檔案嗎？
實在搞混了。。謝謝

--","R_Language"
"969","M.1487962634.A.F55","celestialgod","問題","Re: 利用文字向量做索引選取群組產生列表",2017-02-25 02:57:11,NA,NA,"※ 引述《Nonen (1800g)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我正在作一個能夠回傳有修高級車品牌的修車廠名字的程式，目前我已經有了372家修車: 場的資料並整理出了兩個向量。: 向量一：只有修車廠名字: 例如 c(甲,乙,丙,...): 向量二：車廠名字和有修的車子品牌 例如 c(甲,a,b,c,乙,b,f,g,丙,c,h,i,..): 然後假設高級車品牌有c(a,b,..)，我想要找出任何有修高級車品牌的車廠: 目前我卡在如何將向量二分成372家車廠的資料，因為每家會修的品牌數不一樣無法使用: 一定的間隔做切割: 目前理想是可以做出一張list裡面包含372個sublist且用店家名命名，每個sublist裡有: 該店家有修的車子品牌，再去看有哪些店家(回傳sublist name)裡有包含任一甚至更多高: 級車品牌名單。還沒有想到很好的解法，先謝謝大家了！: [程式範例]:: 車廠名單示意圖(向量一): http://imgur.com/a/Awtuj: 維修資訊示意圖(向量二): http://imgur.com/a/zLqOi: [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.11.3 (El Capitan): [關鍵字]:: 選擇性，也許未來有用圖二看不到，我先根據你意思先生成資料

好讀版：http://pastebin.com/kgtr0RHX# 生成資料的函數就比較複雜一點，需要一點時間研究# 用到的就paste0, sprintf, replicate, sample, unlist, mapply這幾個而已# ?查一下應該不用太久時間就可以知道他們在幹嘛了# 至於要會用就要慢慢經驗累積 try and error了firms <- paste0(""Firm"", sprintf(""%03i"", 1L:500L))
brands <- paste0(""Brand"", sprintf(""%03i"", 1L:100L))
brandsList <- replicate(length(firms), sample(brands, sample(1L:20L, 1L)))
brandsFirms <- unlist(mapply(function(x, y) c(x, y), firms, brandsList,
                             USE.NAMES = FALSE))
head(brandsFirms, 24L)#  [1] ""Firm001""  ""Brand046"" ""Brand024"" ""Brand021"" ""Brand050"" ""Brand011""#  [7] ""Brand078"" ""Brand003"" ""Brand061"" ""Brand016"" ""Brand085"" ""Brand057""#  [13] ""Firm002""  ""Brand006"" ""Brand072"" ""Brand024"" ""Brand057"" ""Brand083""#  [18] ""Brand082"" ""Brand044"" ""Brand099"" ""Brand075"" ""Firm003""  ""Brand058""# 所以firms1是你的vector 1，brandsFirms是你的vector 2# 下面使用的function都是base裡面的，隨便找本基本R書都有教# match, findInterval, split等，沒教那本書就可以丟了# seq_along, head應該都不用特別教吧，自己把玩一下就會了~~~loc <- match(firms, brandsFirms)
idx <- findInterval(seq_along(brandsFirms), loc)
idx_firms <- firms[idx]
idx_firms[loc] <- ""firms""
output <- split(brandsFirms, idx_firms)
output$firms <- NULL
head(output, 3L)# $Firm001# [1] ""Brand046"" ""Brand024"" ""Brand021"" ""Brand050"" ""Brand011"" ""Brand078""# [7] ""Brand003"" ""Brand061"" ""Brand016"" ""Brand085"" ""Brand057""## $Firm002# [1] ""Brand006"" ""Brand072"" ""Brand024"" ""Brand057"" ""Brand083"" ""Brand082""# [7] ""Brand044"" ""Brand099"" ""Brand075""## $Firm003# [1] ""Brand058"" ""Brand069"" ""Brand047""測試看看吧，有問題再上來問

比較閒就上個顏色，資料preview用綠色，註解用黃色~~


一個小建議是以後資料可以直接貼上來

這樣我可以直接手抓下來...

不然我就會生成虛擬資料，你實際case的資料就要自己再測試

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"970","M.1487949577.A.EA4","Nonen","問題","利用文字向量做索引選取群組產生列表",2017-02-24 23:19:34,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我正在作一個能夠回傳有修高級車品牌的修車廠名字的程式，目前我已經有了372家修車
場的資料並整理出了兩個向量。

向量一：只有修車廠名字
例如 c(甲,乙,丙,...)
向量二：車廠名字和有修的車子品牌 例如 c(甲,a,b,c,乙,b,f,g,丙,c,h,i,..)

然後假設高級車品牌有c(a,b,..)，我想要找出任何有修高級車品牌的車廠

目前我卡在如何將向量二分成372家車廠的資料，因為每家會修的品牌數不一樣無法使用
一定的間隔做切割

目前理想是可以做出一張list裡面包含372個sublist且用店家名命名，每個sublist裡有
該店家有修的車子品牌，再去看有哪些店家(回傳sublist name)裡有包含任一甚至更多高
級車品牌名單。還沒有想到很好的解法，先謝謝大家了！


[程式範例]:車廠名單示意圖(向量一)http://imgur.com/a/Awtuj維修資訊示意圖(向量二)http://imgur.com/a/zLqOi[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.3 (El Capitan)





[關鍵字]:選擇性，也許未來有用--","R_Language"
"971","M.1487935237.A.C32","rleaner","問題","geom_point讀值出錯",2017-02-24 19:20:34,NA,NA,"[目的]================================================
已把各點的座標資料轉為如下矩陣:
pm2.5_anime:

      [,1]               [,2]               [,3]
 [1,] ""74DA3895C4C8""     ""74DA3895C2A6""     ""74DA3895C374""
 [2,] ""24.215748""        ""24.198088""        ""24.196424""
 [3,] ""120.526291""       ""120.523407""       ""120.547585""
 [4,] ""49.3""             ""57.3""             ""57.2""
 [5,] ""49.7""             ""56.3636363636364"" ""58.4""
 [6,] ""50.3""             ""58.7""             ""57.8""

pm2.5_anime[1,] -> 是各座標sensor的id
pm2.5_anime[2,]、pm2.5_anime[3,] ->經緯度
pm2.5_anime[4~6,] 是該座標上不同時段的pm2.5的值
希望能把pm2.5的值以geom_point顯示在
ggmap上,並用圖層疊加的方法做出動態地圖的效

但geom_point讀值時出錯QAQ

[程式]================================================
library(ggplot2)
library(ggmap)
library(mapproj)
point_f <- data.frame(lng=pm2.5_anime[3,], lat=pm2.5_anime[2,] ,
siz=pm2.5_anime[4,] )
map <- get_map(location = c(lng=120.601,lat=24.179),
               zoom = 10, language = ""zh-TW"", maptype = ""roadmap"" ,scale = 1)
ggmap(map)+
  geom_point(data= point_f , aes( x =lng , y=lat),size= 10)

[問題!!!]================================================
在geom_point(data= point_f , aes( x =lng , y=lat),size= 10)
這行出問題
錯誤息訊是:
Error: Discrete value supplied to continuous scale

google方法還是沒用,
求大大們幫幫忙
QAQ
還有那段錯誤倒底是什麼意思
>""<

[環境]================================================
R version 3.3.2 (2016-10-31
win7

--","R_Language"
"972","M.1487926864.A.DE6","Neisseria","問題","有一行 R 程式碼看不懂...",2017-02-24 17:01:01,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:以下程式碼在做 quantile normalization但 temp <- temp$ix 這行看不懂而且我覺得怪怪的，怎麼沒有除 median 的動作，是不是我誤會了什麼 @@[程式範例]:# Perform quantile normalization# expression.data is a matrixrunning.sort <- NULLfor (i in 1:dim(expression.data)[2]) {temp <- sort(expression.data[,i])running.sort <- cbind(running.sort,temp)lines(sort(expression.data[,i]),col=col.2.use[i])}running.median <- apply(running.sort,1,median)running.normalized <- NULLfor (i in 1:dim(expression.data)[2]) {temp <- expression.data[,i]temp <- sort(temp,index.return = TRUE)temp <- temp$ixnames(temp) <- as.numeric(unlist(running.median))temp <- sort(temp)temp <- as.numeric(unlist(names(temp)))running.normalized <- cbind(running.normalized,temp)rm(temp)}這程式碼節錄自一段分析數據的腳本，我試過，本身應該沒錯如果有錯，大概是我貼錯了[環境敘述]:
N/A

[關鍵字]:quantile normalization--","R_Language"
"973","M.1487734649.A.019","hotyigirl","問題","讀取xlm檔案",2017-02-22 11:37:25,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:讀取xml檔 R出現error[程式範例]:> url <-""http://www.w3schools.com/xml/simple.xml""> doc <-xmlTreeParse(url,useInternal=TRUE)Unknown IO errorfailed to load external entity""http://www.w3schools.com/xml/simple.xml""錯誤: 1: Unknown IO error2: failed to load external entity""http://www.w3schools.com/xml/simple.xml""[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1小妹是R的初學者，對於R一直碰壁請各位大大 幫忙了感謝!!!▁--","R_Language"
"974","M.1487722475.A.974","locka","問題","data frame分群問題",2017-02-22 08:14:33,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
大家好：
我有一個data table，其中有一個欄位叫做round，記錄每次實驗的數據
大概長這個樣子：

       round        y
1:         1     19.7
2:         1     7.86
3:         2     8.95
4:         2    10.07
5:         2    15.20
---
10419:  3000    11.81
10420:  3000     8.46
10421:  3000     9.17


想要每 30 round分為一組，計算y的平均
也就是 round 1:30為一組，31:60為第二組...總共有100組

想像中用dplyr的做法應該是

mydt %>% group_by(...) %>% summarise(mean_y=mean(y))

或是新增一個叫做group的欄位

mydt %>% mutate(group=[每30round為一組的寫法]) %>%
     group_by(group) %>% summarise(mean_y=mean(y))


可是就是卡在不知道group_by或是mutate裡面不知道怎麼寫比較恰當
感覺沒有很難但實在不知道該從何做起，所以上來請教大家的想法

先謝謝大家了!


[關鍵字]:group_by, data frame, 分組--","R_Language"
"975","M.1487681289.A.8C9","hotyigirl","問題","輸出xlsx問題",2017-02-21 20:48:06,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
[問題敘述]:
想輸出xlsx檔案，但R顯示錯誤，不知道是哪裡錯誤?
[程式範例]:> library(xlsx)> camerasData <-read.xlsx(""cameras.xlsx"",sheetIndex=1,header=T)Error in .jcall(""RJavaTools"", ""Ljava/lang/Object;"", ""invokeMethod"", cl,  :
  java.lang.IllegalArgumentException: Your InputStream was neither an OLE2
stream, nor an OOXML stream


程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 14393)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xlsx_0.5.7     xlsxjars_0.6.1 rJava_0.9-8

loaded via a namespace (and not attached):
[1] tools_3.3.2


[關鍵字]:--","R_Language"
"976","M.1487658174.A.8C2","augustana","問題","RODBC匯入SQL Server中文亂碼問題",2017-02-21 14:22:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我利用公司電腦(英文版作業系統)爬中文網站
利用Sys.setlocale(locale='cht')已經可以在R上面看到中文
也能正確匯入匯出繁體中文的csv (感溫感溫)

我現在要跑排程將資料直接送入我的SQL Server
不過發現原先在R上面的中文
這次送進SQL Server後又變亂碼啦

這次是長這樣的亂碼 (#無檔案時使用: 他會自己建立varchar的table)
aE?°|P‾f?U?|ao?O?I
或是這樣的亂碼 (#更新檔案時使用: 先建好nvarchar的table)
Nao<U+00B6>W°a<U+00B6>¥1 qAv

再麻煩大家了 謝謝!!

[程式範例]:
下方的無檔案時使用跟更新檔案時使用會擇一使用
library(RODBC)

odbcconnect <- odbcConnect(""MY_DB"",""trusted_connection=true"")

values <- paste0( "" article[  , c('"", paste(colnames(article),collapse=""','"")
,""')] "", collapse="""" )

sqlSave(odbcconnect, article, tablename = ""subjectinfo_temp"",
rownames = F) #無檔案時使用

sqlSave(odbcconnect, article, tablename = ""subjectinfo_temp"",
rownames = F, append = T) #更新檔案時使用

odbcClose(odbcconnect)

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows Server >= 2012 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C                                 LC_TIME=Chinese
(Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RODBC_1.3-14 xml2_1.1.1

loaded via a namespace (and not attached):
[1] tools_3.3.2 Rcpp_0.12.9


[關鍵字]:
RODBC, SQL Server, 亂碼

--","R_Language"
"977","M.1487483671.A.D82","augustana","問題","英文作業系統的中文亂碼問題",2017-02-19 13:54:28,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想用R爬文 在我自己的電腦跑程式都OK
但是我想用另一台公司的電腦跑
那台是windows server 2012 英文版作業系統 我不能改
結果不管是
1.讀取csv
2.爬出來的文章
都是長這樣子
<U+60F3><U+6BBA><U+53BB><U+53F0><U+4E2D><U+8FA6><U+722C><U+6587><U+8981>

我有嘗試過將csv的編碼改成utf8
在公司電腦打開時是正常繁體中文 但用R讀就還是上面這樣
想請大家幫忙看看 感恩感恩

[程式範例]:

讀取csv: article_list <- read.csv(""article_list.csv"")
爬文: xml2

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows Server >= 2012 x64 (build 9200)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252    LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                           LC_TIME=English_United States.1252


attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.2


[關鍵字]:

英文, 作業系統, 亂碼

--","R_Language"
"978","M.1487443941.A.A93","celestialgod","問題","Re: 讀取JSON 整理表格後輸出成CSV",2017-02-19 02:52:19,NA,NA,"※ 引述《ginseng21 (SweetCow)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想要從建管Open Data平台上撈出新北市板橋區的使用執照: 然後依照每個地址展開表格，希望得到每個地址後面有對應的基本資料: 之後再將表格輸出為CSV檔案: 平台提供的介接服務一次只能傳回100筆資料，而每一筆資料會有1~多筆地址: 我只有想到兩個for迴圈的寫法，不曉得是否能用lapply寫來提升效能???: 而嘗試過後發現這樣表格會太大張: 因此我改成將每筆地址與對應的ID輸出一份CSV檔案:             每個基本資料與對應的ID再輸出成另一份CSV檔案: 我在嘗試的過程中，有一段使用rbind.data.frame會錯，但使用rbind.pages卻成功: 也想要請教rbind.data.frame錯誤的原因???: 介接服務網址:: http://building-apply.publicwork.ntpc.gov.tw/opendata/: OpenDataSearchUrl.do?d=OPENDATA&c=BUILDLIC: &%E9%96%80%E7%89%8C.%E8%A1%8C%E6%94%BF%E5%8D%80=%E6%9D%BF%E6%A9%8B%E5%8D%80: &Start=1: 介接說明:http://mcgbm.taichung.gov.tw/opendata/docs/a1.html: [程式範例]:: url <-'http://building-apply.publicwork.ntpc.gov.tw/opendata/: OpenDataSearchUrl.do?d=OPENDATA&c=BUILDLIC: &%E9%96%80%E7%89%8C.%E8%A1%8C%E6%94%BF%E5%8D%80=%E6%9D%BF%E6%A9%8B%E5%8D%80: &Start=': urltmp <- list(): datatmp <- list(): addreall <- list(): info <- list(): st1 = Sys.time();: for( i in 1:10) #假設資料是1000筆以內: {:   st = Sys.time();:   urltmp [i] <- paste(url,(i-1)*100+1,sep=""""):   # 將每個介接網址用LIST儲存:   # 介接網址的Start=可以控制從第幾筆資料開始提供100筆:   datatmp <- as.data.frame(fromJSON(urltmp[[i]])):   addre <- datatmp$data.門牌:   ID <- datatmp$data._id:   for (t in 1:100):   {addre[[t]]$ID <-ID[t,]}:   #將每一筆的門牌串上ID:   addreall[[i]] <- do.call(rbind.data.frame, addre):   info[[i]] <- as.data.frame(datatmp[,1:27]):   # 1:27列是基本資料:   # 將每筆資料的門牌合併後用LIST儲存:   # 將每筆資料的基本資料用LIST儲存:   ed = Sys.time();:   print(ed-st):   print(i): }: all <- do.call(rbind.data.frame, addreall): infotmp <- rbind.pages(info): # 將迴圈內的儲存的LIST合併，準備輸出: # info這一段我用rbind.data.frame都會跳出錯誤 錯誤訊息如下: infoall <- cbind(infotmp[,1],infotmp[,2:27]): # 這一段不用cbind處理的話，輸出的ID那列會出問題。不曉得ID那列的格式是否不同: write.csv(all,""address.csv"",row.names=F,quote=F): write.csv(infoall,""info.csv"",row.names=F,quote=F): # 輸出CSV檔案: ed1 = Sys.time();: print(ed1-st1): ----------------------------------: rbind.data.frame的錯誤訊息: Error in `row.names<-.data.frame`(`*tmp*`, value = value) ::   duplicate 'row.names' are not allowed: In addition: Warning message:: non-unique values when setting 'row.names': ......: [環境敘述]:: R version 3.3.0 (2016-05-03): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Hong Kong SAR.950: [2] LC_CTYPE=Chinese (Traditional)_Hong Kong SAR.950: [3] LC_MONETARY=Chinese (Traditional)_Hong Kong SAR.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Hong Kong SAR.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: loaded via a namespace (and not attached):: [1] tools_3.3.0: [關鍵字]:: rbind, rbind.data.frame, data.table, do.call, lapply好讀版：http://pastebin.com/x01dmuPT我只幫你解決了performance的問題，用parallel這個套件做平行

rbind.pages的問題就看誰有空再回你了~~


library(httr)
library(parallel)

queryUrl <-
""http://building-apply.publicwork.ntpc.gov.tw/opendata/OpenDataSearchUrl.do""query <- list(d = ""OPENDATA"", c= ""BUILDLIC"", ""門牌.行政區"" = ""板橋區"")

# luancher several Rscript
cl <- makeCluster(detectCores())
# export variables to Rscript
clusterExport(cl, c(""query"", ""queryUrl""))
# import library in each Rscript
invisible(clusterEvalQ(cl, library(httr)))
invisible(clusterEvalQ(cl, library(jsonlite)))
st <- proc.time()
# GET JSON file parallely
dataList <- parLapplyLB(cl, seq(1, by = 100, length.out = 100), function(i){
  # 取得 JSON
  jsonFile <- content(GET(queryUrl, user_agent(""R""),
                      query = c(query, Start = i)), ""text"")
  # parse JSON
  tmp <- fromJSON(jsonFile)$data
  # 取得id
  id <- tmp[[""_id""]][[""$oid""]]
  # 取得address這個data.frame並加上id
  address <- do.call(rbind, mapply(function(x, y) cbind(id = x, y), id,
                     tmp[[""門牌""]], SIMPLIFY = FALSE))
  # 取得其他欄位資訊，並取得id
  info <- cbind(id = id, tmp[ , 2:26])
  return(list(address, info))
})
proc.time() - st
stopCluster(cl)
# user  system elapsed
# 0.06    0.00   94.97

# method 1: 直接用lapply + do.call + rbind去處理
st <- proc.time()
addressAll <- do.call(rbind, lapply(dataList, `[[`, 1))
infoAll <- do.call(rbind, lapply(dataList, `[[`, 2))
write.csv(addressAll, ""address.csv"", row.names = FALSE, quote = FALSE)
write.csv(infoAll, ""info.csv"", row.names = FALSE, quote = FALSE)
proc.time() - st
# user  system elapsed
# 0.52    0.03    0.54

# method 2: 使用purrr的transpose，不過purrr的dep超多，安裝起來滿麻煩的
library(purrr)
st <- proc.time()
datas <- lapply(transpose(dataList), function(x) do.call(rbind, x))
write.csv(datas[[1]], ""address.csv"", row.names = F, quote = FALSE)
write.csv(datas[[2]], ""info.csv"", row.names = F, quote = FALSE)
proc.time() - st
# user  system elapsed
# 0.50    0.01    0.51

--","R_Language"
"979","M.1487438576.A.054","ginseng21","問題","讀取JSON 整理表格後輸出成CSV",2017-02-19 01:22:52,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想要從建管Open Data平台上撈出新北市板橋區的使用執照
然後依照每個地址展開表格，希望得到每個地址後面有對應的基本資料
之後再將表格輸出為CSV檔案

平台提供的介接服務一次只能傳回100筆資料，而每一筆資料會有1~多筆地址
我只有想到兩個for迴圈的寫法，不曉得是否能用lapply寫來提升效能???

而嘗試過後發現這樣表格會太大張
因此我改成將每筆地址與對應的ID輸出一份CSV檔案
            每個基本資料與對應的ID再輸出成另一份CSV檔案

我在嘗試的過程中，有一段使用rbind.data.frame會錯，但使用rbind.pages卻成功

也想要請教rbind.data.frame錯誤的原因???

介接服務網址:http://building-apply.publicwork.ntpc.gov.tw/opendata/OpenDataSearchUrl.do?d=OPENDATA&c=BUILDLIC
&%E9%96%80%E7%89%8C.%E8%A1%8C%E6%94%BF%E5%8D%80=%E6%9D%BF%E6%A9%8B%E5%8D%80
&Start=1

介接說明:http://mcgbm.taichung.gov.tw/opendata/docs/a1.html[程式範例]:

url <-'http://building-apply.publicwork.ntpc.gov.tw/opendata/OpenDataSearchUrl.do?d=OPENDATA&c=BUILDLIC
&%E9%96%80%E7%89%8C.%E8%A1%8C%E6%94%BF%E5%8D%80=%E6%9D%BF%E6%A9%8B%E5%8D%80
&Start='

urltmp <- list()
datatmp <- list()
addreall <- list()
info <- list()
st1 = Sys.time();
for( i in 1:10) #假設資料是1000筆以內
{
  st = Sys.time();
  urltmp [i] <- paste(url,(i-1)*100+1,sep="""")
  # 將每個介接網址用LIST儲存
  # 介接網址的Start=可以控制從第幾筆資料開始提供100筆

  datatmp <- as.data.frame(fromJSON(urltmp[[i]]))
  addre <- datatmp$data.門牌
  ID <- datatmp$data._id

  for (t in 1:100)
  {addre[[t]]$ID <-ID[t,]}
  #將每一筆的門牌串上ID

  addreall[[i]] <- do.call(rbind.data.frame, addre)
  info[[i]] <- as.data.frame(datatmp[,1:27])
  # 1:27列是基本資料
  # 將每筆資料的門牌合併後用LIST儲存
  # 將每筆資料的基本資料用LIST儲存

  ed = Sys.time();
  print(ed-st)
  print(i)
}

all <- do.call(rbind.data.frame, addreall)
infotmp <- rbind.pages(info)
# 將迴圈內的儲存的LIST合併，準備輸出
# info這一段我用rbind.data.frame都會跳出錯誤 錯誤訊息如下

infoall <- cbind(infotmp[,1],infotmp[,2:27])
# 這一段不用cbind處理的話，輸出的ID那列會出問題。不曉得ID那列的格式是否不同

write.csv(all,""address.csv"",row.names=F,quote=F)
write.csv(infoall,""info.csv"",row.names=F,quote=F)
# 輸出CSV檔案

ed1 = Sys.time();
print(ed1-st1)

----------------------------------
rbind.data.frame的錯誤訊息

Error in `row.names<-.data.frame`(`*tmp*`, value = value) :
  duplicate 'row.names' are not allowed
In addition: Warning message:
non-unique values when setting 'row.names': ......



[環境敘述]:
R version 3.3.0 (2016-05-03)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Hong Kong SAR.950
[2] LC_CTYPE=Chinese (Traditional)_Hong Kong SAR.950
[3] LC_MONETARY=Chinese (Traditional)_Hong Kong SAR.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Hong Kong SAR.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.0

[關鍵字]:

rbind, rbind.data.frame, data.table, do.call, lapply

--","R_Language"
"980","M.1487413342.A.7DD","clsmbstu","問題","Shiny app中對input使用which函數",2017-02-18 18:22:18,NA,NA,"[問題類型]:
程式諮詢（我想用R做某件事情，但是我不知道要怎麼用R寫出來）


[軟體熟悉度]:
使用者（已經有用R做過不少作品）
PS: 但是第一次接觸Shiny


[問題敘述]:
我正在用R內建的airquality，練習做Shiny App。
我想達到的目標是，使用者可自行選擇：
1. 想看的月份（從五月到九月任一）
2. 關心的變數（溫度、輻射強度等任一）

我想說做精美一點，月份不要用阿拉伯數字讓使用者選，
而是真的可以從""May""、""June""、""July""...之中選一個，
我再依據使用者的選擇subset data frame，
但會出現錯誤訊息：Error in ==: comparison (1) is possible only for atomic and list types如果我直接讓使用者從阿拉伯數字擇一就沒有問題。


[程式範例]:https://gist.github.com/anonymous/62410421333fd6fbca794ba64c6dbd65裡面包含：
server.R（我認為問題可能出在第6行）
ui.R（請留意第12行的設計）


[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ggplot2_2.2.1 shiny_1.0.0

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.9       assertthat_0.1    digest_0.6.12     mime_0.5
 [5] grid_3.3.2        R6_2.2.0          plyr_1.8.4        xtable_1.8-2
 [9] jsonlite_1.2      gtable_0.2.0      scales_0.4.1      lazyeval_0.2.0
[13] labeling_0.3      tools_3.3.2       munsell_0.4.3     httpuv_1.3.3
[17] colorspace_1.3-2  htmltools_0.3.5   sourcetools_0.1.5 tibble_1.2


[關鍵字]:
Shiny, which, comparison

--","R_Language"
"981","M.1487383851.A.45A","samex4x4","問題","幾個指令詢問",2017-02-18 10:10:48,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

1. 在使用read.table的時候，fileEncoding 和 encoding 的差異在什麼地方啊?
   有時候讀檔案的時候前面會error，但後面的會過；有時候則是倒過來
   想詢問一下這兩個指令明確的差異在什麼地方...

2. file系列函數可以幹嘛啊?
   看解釋是Functions to create, open and close connections，
   但不太懂什麼叫create connections。

謝謝各位了m(_ _)m


[程式範例]:

[環境敘述]:

[關鍵字]:file, encoding--","R_Language"
"982","M.1487152788.A.A89","lichungtsai","問題","跑迴圈時如何略過不存在資料繼續跑",2017-02-15 17:59:45,NA,NA,"問題類型：程式諮詢

學齡：這個寒假開始(約一個月)

code：

### Step 0 ###

#0.0 remove all previous data
rm(list = ls())


#0.1 set home directory
setwd(""path"")


#0.2 check home directory
getwd()


#0.3 load packages


### Step 1 ###


#1.0 set empty matrix
results <- matrix(NA, 69, 31)


#1.1 name rows
rownames(results) <- c(paste(""subj"",rep(0:22, times = 1, each = 3),""_secc"",rep(1:3,23),sep = """"))


#1.2 name columes
colnames(results) <- c(paste(""ResProbI1"", 1:8, sep = """"),paste(""ACC"", 1:4, sep = """"),""ACC1&8"",""ACC2&7"",""ACC3&6"",""ACC4&5"",paste(""RT"", 1:8,sep = """"),""RT1&8"",""RT2&7"",""RT3&6"",""RT4&5"",""RTall"",""slope"",""threshold"")


### Step 2 ###


#2.0 loop for subject number
for(sn in 0:22) for(s in 1) #sn for ""subject number"", s for ""seccsion""
  {
    #2.1 import csv data


      #2.1.1 name csv ""dn""
      dn <- paste(""result_"", sn,""-sess"",s,"".csv"",sep = """")


      #2.1.2 load the csv to a list
      dt <- sapply(dn, read.csv)


      #2.1.3 convert list to a data frame
      dt <- data.frame(Reduce(cbind, dt))


      #2.1.4cut unnecessary c
      dt <- dt[,1:14]


      #2.1.5 name rows


      #2.1.6 name colnames
      colnames(dt) <- c(""subj"", ""Session"", ""Run"", ""Trial"", ""Respond"", ""Respond.time"", ""Confidence.rating"", ""Is.correct"", ""Fixation.time"", ""Interval1.contrast"", ""Interval2.contrast"", ""Target.interval"", ""Target.contrast"", ""Target.position"")


    #2.2 response probability of I1 (situation 1 to 4) -> col 1 to 4
    for(i in 1:4)
    {
    results[3*sn+s,5-i] <- 1-mean(dt[dt$Target.interval == 2 & dt$Target.contrast == i,]$Is.correct)


    #2.3 response probability of I1 (situation 5 to 8) -> col 5 to 8
    results[3*sn+s,4+i] <- mean(dt[dt$Target.interval == 1 & dt$Target.contrast == i,]$Is.correct)


    #2.4 ACC of situation 1 to 4 -> col 9 to 12
    results[3*sn+s,8+i] <- mean(dt[dt$Target.interval == 2 & dt$Target.contrast == i,]$Is.correct)


    #2.5 ACC of situation 1&8, 2&7, 3&6, 4&5 -> col 13 to 16
    results[3*sn+s,17-i] <- mean(dt[dt$Target.contrast == i,]$Is.correct)


    #2.6 RT (situation 1 to 4) -> col 17 to 20
    results[3*sn+s,21-i] <- mean(dt[dt$Target.interval == 2 & dt$Target.contrast == i & dt$Is.correct == 1,]$Respond.time)


    #2.7 RT (situation 5 to 8) -> col 21 to 24
    results[3*sn+s,20+i] <- mean(dt[dt$Target.interval == 1 & dt$Target.contrast == i & dt$Is.correct == 1,]$Respond.time)


    #2.8 RT (situation 1&8, 2&7, 3&6, 4&5) -> col 25 to 28
    results[3*sn+s,29-i] <- mean(dt[dt$Target.contrast == i & dt$Is.correct == 1,]$Respond.time)


    #2.9 RT (all) -> col 29
    results[3*sn+s, 29] <- mean(dt[dt$Is.correct == 1,]$Respond.time)
    }
}

===

這是我寫的簡單code

就是實驗室的23個受試者(sn 0:22)，理論上應該各做了三次實驗(s 1:3)

每次實驗都有產生一個csv檔

所以我想產生一個表格列出他們的描述統計

不過不是每個人都有做滿3次

所以在跑迴圈的時候

他說因為讀取不到後續的就不繼續跑了

上網稍微查一下好像可以使用if函數

不過研究不太出來所以想求救一下該怎麼做？

--
Sent from my Windows

--","R_Language"
"983","M.1487089405.A.105","f496328mm","問題","linux 安裝 OpenImageR 套件",2017-02-15 00:23:23,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

install.packages(""OpenImageR"")

又失敗拉 >.<

error如下

另外想問問大大    你們怎麼看error?    要如何知道解決方法

感覺一直上來問不太好QQ    我看了一下  跟tiff有關

可是我一樣沒辦法

install.packages(""tiff"")

也不可能把整段error丟到google上找方法

謝謝


* installing *source* package ‘tiff’ ...
** package ‘tiff’ successfully unpacked and MD5 sums checked
** libs
gcc -std=gnu99 -I/usr/share/R/include -DNDEBUG      -fpic  -g -O2
-fstack-protector-strong -Wformat -Werror=format-security -Wdate-time
-D_FORTIFY_SOURCE=2 -g  -c common.c -o common.o
In file included from common.c:1:0:
common.h:5:18: fatal error: tiff.h: 沒有此一檔案或目錄
compilation terminated.
/usr/lib/R/etc/Makeconf:134: recipe for target 'common.o' failed
make: *** [common.o] Error 1
ERROR: compilation failed for package ‘tiff’
* removing ‘/home/linsam/R/x86_64-pc-linux-gnu-library/3.2/tiff’
Warning in install.packages :
  installation of package ‘tiff’ had non-zero exit status
ERROR: dependency ‘tiff’ is not available for package ‘OpenImageR’
* removing ‘/home/linsam/R/x86_64-pc-linux-gnu-library/3.2/OpenImageR’
Warning in install.packages :
  installation of package ‘OpenImageR’ had non-zero exit status

The downloaded source packages are in
        ‘/tmp/RtmpKQefNv/downloaded_packages’




[環境敘述]:

linux mint 18.1

[關鍵字]:

選擇性，也許未來有用

--","R_Language"
"984","M.1487084417.A.53B","bcs","問題","在母檔裡尋找與子檔銷售最接近的公司",2017-02-14 23:00:13,NA,NA,"請問我有二筆資料，母檔和子檔。

我想以子檔為索引，在母檔中找尋sale成績與最近的對手，

最接近的對手定義= min abs(psale-ssale)但不能為本身。

不知有什麼比較簡便的函數[能用matrix>loop]可以達成？但子檔中的

索引不為唯一，所以對映過來可能會是不唯一。

感覺好像要在子檔寫loop，以子檔的條件下，

找尋銷售額差異最小，並返回

對應的公司…XD

感謝大家。

想像資料連結：https://goo.gl/0xEo29--","R_Language"
"985","M.1487063088.A.8B6","f496328mm","問題","linux 安裝 RcppCNPy 套件",2017-02-14 17:04:46,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。
[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我沒辦法安裝 RcppCNPy 這個套件

這個套件可以 把 r 中的 matrix 轉換到 python 的 numpy array

然後輸出

這樣我就可以用 R 做資料整理 再用 python 做 deep learning

（ 因為比較熟悉 R , R 在資料整理方面很強大 ）

另外想問  轉換後  輸出是什麼樣的檔案？  應該不是 csv 吧？

第一次用這個  希望有幫助


error 如下

install.packages('RcppCNPy')
Installing package into ‘/home/linsam/R/x86_64-pc-linux-gnu-library/3.3’
(as ‘lib’ is unspecified)
  % Total    % Received % Xferd  Average Speed   Time    Time     Time
Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--
0  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--
0  0     0    0     0    0     0      0      0 --:--:--  0:00:01 --:--:--
0100  132k  100  132k    0     0  80535      0  0:00:01  0:00:01 --:--:--
80537
* installing *source* package ‘RcppCNPy’ ...
** package ‘RcppCNPy’ successfully unpacked and MD5 sums checked
** libs
I/usr/lib64/microsoft-r/3.3/lib64/R/include -DNDEBUG
-DU_STATIC_IMPLEMENTATION
-I""/home/linsam/R/x86_64-pc-linux-gnu-library/3.3/Rcpp/include""      -c
cnpy.cpp -o cnpy.o
sh: I/usr/lib64/microsoft-r/3.3/lib64/R/include: 沒有此一檔案或目錄
/usr/lib64/microsoft-r/3.3/lib64/R/etc/Makeconf:141: recipe for target
'cnpy.o' failed
make: [cnpy.o] Error 127 (ignored)
I/usr/lib64/microsoft-r/3.3/lib64/R/include -DNDEBUG
-DU_STATIC_IMPLEMENTATION
-I""/home/linsam/R/x86_64-pc-linux-gnu-library/3.3/Rcpp/include""      -c
cnpyMod.cpp -o cnpyMod.o
sh: I/usr/lib64/microsoft-r/3.3/lib64/R/include: 沒有此一檔案或目錄
/usr/lib64/microsoft-r/3.3/lib64/R/etc/Makeconf:141: recipe for target
'cnpyMod.o' failed
make: [cnpyMod.o] Error 127 (ignored)
-shared -L/usr/lib64/microsoft-r/3.3/lib64/R/lib -o RcppCNPy.so cnpy.o
cnpyMod.o -lz -L/usr/lib64/microsoft-r/3.3/lib64/R/lib -lR
sh: line 2: -shared：命令找不到
/usr/lib64/microsoft-r/3.3/lib64/R/share/make/shlib.mk:6: recipe for target
'RcppCNPy.so' failed
make: *** [RcppCNPy.so] Error 127
ERROR: compilation failed for package ‘RcppCNPy’
* removing ‘/home/linsam/R/x86_64-pc-linux-gnu-library/3.3/RcppCNPy’
Warning in install.packages :
  installation of package ‘RcppCNPy’ had non-zero exit status

The downloaded source packages are in
        ‘/tmp/RtmpVrDA7l/downloaded_packages’







之後我用
install_github(""eddelbuettel/rcppcnpy"")
直接去抓  也失敗

error如下

install_github(""eddelbuettel/rcppcnpy"")
Error in curl::curl_fetch_disk(url, x$path, handle = handle) :
  Problem with the SSL CA cert (path? access rights?)


[環境敘述]:

linux mint 18.1


謝謝


--","R_Language"
"986","M.1486973612.A.A9D","locka","問題","list dataframe的處理",2017-02-13 16:13:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

版上前輩午安，
我有一個list,每個element都是不同實驗方案得到的結果(存成data frame)

[[1]]
  n count    avg
1 1    16   9.17
2 2    77  10.21
3 3   159   9.12
...
[[2]]
  n count   avg
1 1    16  8.85
2 2    93  9.07
...
[[3]]
n count avg
...

為了要比較每種方案的avg 並用ggplot2做圖

我想要把這個list 合併成一個像下面這樣的data frame

n count   avg approach
1    16  9.17        A
2    77 10.21        A
3   159  9.12        A
...
1    16  8.85        B
2    93  9.07        B
...

所以基本上我想做的事情是把5個data frame合起來並新增一個欄位來辨別不同的方案
不過我對用apply function操作list還不是很熟悉
請教各位前輩了!


範例資料貼在這邊http://ideone.com/5QfenH[關鍵字]:data frame, list, apply funtion--","R_Language"
"987","M.1486967191.A.112","CAPPON","問題","barplot遇到NA ",2017-02-13 14:26:28,NA,NA,"x=matrix(c(12300,NA,NA,50000,20000,10000),2,3)
barplot(x,col=c(11,13),log=""y"")

遇到第一行有NA時,這個bar就無法呈現出來
以這例子來看,500這筆資料要如何修改barplot才可以畫出來呢?
無法將NA用0取代,這樣在畫圖取log時會出現問題
謝謝

--","R_Language"
"988","M.1486914338.A.015","celestialgod","問題","Re: Logistic Regression",2017-02-12 23:45:34,NA,NA,"※ 引述《markbaseball (Mark)》之銘言：:
:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::  各位版上的大大們，我參照網路的寫法嘗試跑羅吉斯迴歸，:  model.3<-glm(Overpayment~rs+ni+asset+fcf+ocf,family=binomial(logit), data: =mydata):  但是卻出現錯誤訊息: Warning message:: glm.fit: fitted probabilities numerically 0 or 1 occurred:  依照我的理解，程式是跟我說我的Overpayment一定要是0或1才可以。: 可是，我很確定我的overpayment變數只有0和1兩種結果而已啊!!:  請問各位大大是否可以跟我說我錯在哪裡嗎? 感激:: 選擇性，也許未來有用:

舉個例子

set.seed(53)
N <- 100
p <- 3
x <- matrix(rnorm(N * p), N)
beta <- rnorm(p + 1)
logit <- function(x) 1 / (1 + exp(-x))
y <- logit(cbind(1, x) %*% beta) > 0.5
# y這種生成方法保證用現在的x可完美切開0, 1
# 意思是y=1算出來的機率一定是1，y=0算出來的機率一定是0
# 不懂再往下看

glmFit <- glm(y ~ x, family = binomial(logit),
              control = glm.control(maxit = 100))
# Warning message:
# glm.fit: fitted probabilities numerically 0 or 1 occurred

table(round(fitted(glmFit), 6))  # fitted這個函數會得到fitted機率
#  0  1
# 94  6

可以看到機率不是0就是1

正常情況下應該是下面這樣：

y2 <- rbinom(N, 1, logit(cbind(1, x) %*% beta))
glmFit2 <- glm(y2 ~ x, family = binomial(logit),
               control = glm.control(maxit = 100))

table(cut(fitted(glmFit2), seq(0, 1, by = 0.1)))
# (0,0.1] (0.1,0.2] (0.2,0.3] (0.3,0.4] (0.4,0.5] (0.5,0.6] (0.6,0.7]
#      21        30        19        15         6         4         4
# (0.7,0.8] (0.8,0.9]   (0.9,1]
# 1         0         0

也就是不會直接切開0,1

不過這個只是警告，告知user說

你的資料可能有問題，才會這樣直接切開

(通常是output(response)跟input(covariates)高度相關)

Note: 要增加iteration是因為 default maxit = 25，會導致不收斂

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"989","M.1486904646.A.0F8","markbaseball","問題","Logistic Regression",2017-02-12 21:04:03,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:各位版上的大大們，我參照網路的寫法嘗試跑羅吉斯迴歸，model.3<-glm(Overpayment~rs+ni+asset+fcf+ocf,family=binomial(logit), data=mydata)但是卻出現錯誤訊息Warning message:glm.fit: fitted probabilities numerically 0 or 1 occurred依照我的理解，程式是跟我說我的Overpayment一定要是0或1才可以。可是，我很確定我的overpayment變數只有0和1兩種結果而已啊!!請問各位大大是否可以跟我說我錯在哪裡嗎? 感激選擇性，也許未來有用--","R_Language"
"990","M.1486801589.A.95D","celestialgod","問題","Re: 在迴圈中對矩陣特定區間賦值",2017-02-11 16:26:25,NA,NA,"※ 引述《clsmbstu ()》之銘言：: [問題類型]:: 程式諮詢（我想用R做某件事情，但是我不知道要怎麼用R寫出來）: [軟體熟悉度]:: 使用者（已經有用R做過不少作品）: [問題敘述]:: 我想在迴圈中對多個矩陣的某些部分（同樣的行列位置）做取代，: 但是我不知道怎麼寫出一般化的code。: 我原本想的是在這些矩陣的[1:161, 1]、[162:322, 2]、...、[806:966, 6]放進數列，: 但紅色那句顯然行不通，想請教大家有沒有其它的辦法？謝謝！: [程式範例]:: evaluate <- function(...) {eval(parse(text = paste(..., sep = ""."")))}: for (k in 1:7) {:     assign(paste(LETTERS[k], ""newdata"", sep = "".""),:            matrix(NA, nrow = 966, ncol = 6)):     # Generate ""A.newdata"", ""B.newdata"", ... ,and ""G.newdata"":     j <- 1:     while (j <= ncol(evaluate(LETTERS[k], ""newdata""))) {:         evaluate(emotions[k], ""newdata"")[1:161+(j-1)*161, j] <- seq(0, 8, 0.05):         # length(seq(0, 8, 0.05)) = 161:         j <- j + 1:     }:     # The rest of NAs will be substituted with ...:     # other various values later in this for loop: }:: [環境敘述]:: R version 3.3.2 (2016-10-31): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] reshape2_1.4.2 ggplot2_2.2.1  nnet_7.3-12: loaded via a namespace (and not attached)::  [1] colorspace_1.3-2 scales_0.4.1     magrittr_1.5     assertthat_0.1:  [5] lazyeval_0.2.0   plyr_1.8.4       tools_3.3.2      gtable_0.2.0:  [9] tibble_1.2       Rcpp_0.12.9      stringi_1.1.2    grid_3.3.2: [13] stringr_1.1.0    munsell_0.4.3: [關鍵字]:: 矩陣  取代  迴圈既然 軟體熟悉度 寫 使用者（已經有用R做過不少作品）

那我就不寫for，直接用lapply, sapply, replicate做了

還沒學過也趁現在學一學吧，不然R for很慢...

numRows <- 966L
numCols <- 6L
by <- 161L
getMatrix <- function(x, by, numRows, numCols){
  sapply(1L:numCols, function(y){
    c(rep(0, by * (y-1)) , x, rep(0, numRows - by * y))
  })
}

newdata_list <- replicate(7L, getMatrix(seq(0, 8, 0.05),
                                        by, numRows,numCols), FALSE)

str(newdata_list)
# List of 7
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...
#  $ : num [1:966, 1:6] 0 0.05 0.1 0.15 0.2 0.25 0.3 0.35 0.4 0.45 ...

--","R_Language"
"991","M.1486792488.A.690","clsmbstu","問題","在迴圈中對矩陣特定區間賦值",2017-02-11 13:54:46,NA,NA,"[問題類型]:
程式諮詢（我想用R做某件事情，但是我不知道要怎麼用R寫出來）

[軟體熟悉度]:
使用者（已經有用R做過不少作品）

[問題敘述]:
我想在迴圈中對多個矩陣的某些部分（同樣的行列位置）做取代，
但是我不知道怎麼寫出一般化的code。
我原本想的是在這些矩陣的[1:161, 1]、[162:322, 2]、...、[806:966, 6]放進數列，
但紅色那句顯然行不通，想請教大家有沒有其它的辦法？謝謝！

[程式範例]:
evaluate <- function(...) {eval(parse(text = paste(..., sep = ""."")))}

for (k in 1:7) {
    assign(paste(LETTERS[k], ""newdata"", sep = "".""),
           matrix(NA, nrow = 966, ncol = 6))# Generate ""A.newdata"", ""B.newdata"", ... ,and ""G.newdata""j <- 1
    while (j <= ncol(evaluate(LETTERS[k], ""newdata""))) {evaluate(emotions[k], ""newdata"")[1:161+(j-1)*161, j] <- seq(0, 8, 0.05)# length(seq(0, 8, 0.05)) = 161j <- j + 1
    }# The rest of NAs will be substituted with ...# other various values later in this for loop}

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] reshape2_1.4.2 ggplot2_2.2.1  nnet_7.3-12

loaded via a namespace (and not attached):
 [1] colorspace_1.3-2 scales_0.4.1     magrittr_1.5     assertthat_0.1
 [5] lazyeval_0.2.0   plyr_1.8.4       tools_3.3.2      gtable_0.2.0
 [9] tibble_1.2       Rcpp_0.12.9      stringi_1.1.2    grid_3.3.2
[13] stringr_1.1.0    munsell_0.4.3

[關鍵字]:
矩陣  取代  迴圈

--","R_Language"
"992","M.1486783468.A.4A5","banana08","問題","SMOTE增生運作",2017-02-11 11:24:26,NA,NA,"各位版上高手大家好
最近在研究不平衡資料的SMOTE方法

發現運用DMwR之包裹有SMOTE的運作
目前了解SMOTE的運作是
從點x尋找鄰近k點並且運算其歐式距離
再生成0∼1之隨機變數加入原始點x

這邊想詢問有哪位高手知道那在不連續型變數（A,B...)
SMOTE是如何運作的嗎？

拜託各位高手指導∼∼∼∼
-----
Sent from JPTT on my iPhone

--","R_Language"
"993","M.1486741648.A.8A6","HumuHumu","問題","Shiny ActionButton問題",2017-02-10 23:47:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我已經在ui.R創好一個Actionbutton叫做SaveButton

我現在想要只要使用者一點選Save，就可以把已經有的某些資料write.csv到

使用者自訂的路徑去(會搭配choose.dir使用)

現在希望看到的結果是:

點Save→跳出choose.dir的畫面選擇存檔位置→選擇完存檔位置後，write.csv到該位置

但我現在server裡面這樣寫，點SaveButton一直沒有反應

savefile<-eventReactive(input$SaveButton, {
    DIR<-choose.dir()
    write.csv(Data,paste(DIR,""Data.csv"",sep=""""),row.names = FALSE)
  })

--","R_Language"
"994","M.1486717185.A.9D6","CAPPON","問題","mailR 的疑問",2017-02-10 16:59:42,NA,NA,"使用mailR package時
有3個疑問
1.用下面的指令出現了錯誤訊息 ?? 這是哪邊出錯呢?
Warning message:
In readChar(body, file.info(body)$size) :
 can only read in bytes in a non-UTF-8 MBCS locale
2.在mail內容的html 可以限制他的長寬嗎?
3.可以在內容是附上表格或是圖檔嗎

謝謝



send.mail(from = ""[email<U+00A0>protected]"",  # 寄件者
          #收件者
          to = c(""[email<U+00A0>protected]""),
          #標題
          subject = paste(tday,""_報表"",sep=""""),
          #內
          body = paste(""D:\\"",tday,""\\code.htm"",sep=""""),
          html =T,
          inline = F,
          encoding = ""utf-8"",  # 編碼
smtp = list(host.name = ""172.20.1.36"",
                      port = 25),
          send = TRUE)





--","R_Language"
"995","M.1486659291.A.337","phil5566","問題","多變數函數中如何固定某些變數做圖/畫線?",2017-02-10 00:54:48,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手

[問題敘述]:

小弟現在有20筆data,假設叫T,和自己定義的函數surlikelihood(x,t),

其中x包含變數(x1,x2,x3),t是輸入的data,

把這20筆data代入surlikelihood(x,t),即surlikelihood(x,T)

整理成有3個變數的函數,即surlikelihood=f(x1,x2,x3),0<x1<1,0<x2,0<x3,

想對這個函數作圖,要在四度空間才辦的到,所以我想固定x3=5之下,

去畫surlikelihood=f(x1,x2,5)的三維度立體圖,該怎麼做?

固定x2=5,x3=5之下,去畫surlikelihood=f(x1,5,5)的二維度曲線,又該怎麼做?

範例附上20筆data和surlikelihood函數,還請版上高手和先進們給小弟指教,

謝謝~



[程式範例]:http://pastebin.com/EEgXsWHA[環境敘述]:

R x64 3.3.1

[關鍵字]:

高維度

--","R_Language"
"996","M.1486644250.A.E39","lichungtsai","問題","新手問匯入資料的問題",2017-02-09 20:44:08,NA,NA,"目前我有一些excel資料

剛好名字有部分是序列組成

我匯入的名字也要與序列有關

想請問如果匯入是最快的方式該怎麼做

例如我有100個excel檔

分別是 a1.csv、a2.csv、a3.csv到a100.csv

我想要a1.csv匯進去叫做b1

a2.csv會進去叫做b2

...

a100.csv會進去叫做b100

請問該怎麼做最快呢

如果用

b1 <- read.csv(...)

b2 <- read.csv(...0

要進行100次覺得太慢了

但摸不出如果要用迴圈的話該怎麼做

還是有其他好用的方式呢？

--
Sent from my Windows

--","R_Language"
"997","M.1486641897.A.7A2","celestialgod","問題","Re: 以時間間隔為條件，抽取資料",2017-02-09 20:04:53,NA,NA,"※ 引述《Edster (Edster)》之銘言：: 想了一陣子，覺得還是C版的 abs(difftime)>6 這個最漂亮。: 我沒做什麼動作，就改成一個老人看得懂的版本: library(magrittr): CriInterval = function(x, criteria){:   i=1:   names(x) = 1:length(x):   while(i <= length(x)){:     x = x[x[length(x)>i]-x[i]>criteria]:     i=i+1:   }:   return(as.integer(names(x))): }: TS = seq(ISOdatetime(2005,02,08,18,20,00),:          ISOdatetime(2017,02,08,18,20,00), ""min""): system.time(:   ci <- lapply(1:500, function(i) CriInterval(TS %>% sample(1e4):                                   %>% sort, criteria=6*60*60))): ## speed test:  user  system elapsed:   29.77    0.19   30.11: TS_sampled = TS[ci[[1]]]: 其實也沒有比較慢，我放了 500 * 10000 筆資料library(magrittr)
TS <- seq(ISOdatetime(2005,02,08,18,20,00),
          ISOdatetime(2017,02,08,18,20,00), ""min"")
(x <- sort(sample(TS, 1e1, TRUE)))
#  [1] ""2007-01-19 13:35:00 CST"" ""2008-09-03 01:13:00 CST""
#  [3] ""2009-02-28 01:16:00 CST"" ""2010-07-28 11:02:00 CST""
#  [5] ""2011-03-23 05:31:00 CST"" ""2011-12-03 10:35:00 CST""
#  [7] ""2013-03-17 12:21:00 CST"" ""2013-11-09 19:40:00 CST""
#  [9] ""2015-03-31 16:01:00 CST"" ""2015-04-11 14:39:00 CST""

如果條件是間隔6小時，照理來說應該要全部都留下，也就是E大的函數回傳的是1:10

CriInterval(x, 6*60*60)
# integer(0)

但是回傳是空向量，我細看了一下函數

x = x[x[length(x)>i]-x[i]>criteria]

這行讓我覺得滿疑惑的

length(x) > i 這樣應該全部都會留下，這是第一個問題

這樣就會發生自己減自己 = 0的情況出現，然後第一筆就被刪掉了

照理來說，第一筆一定會留下...

如果改成1:length(x)或seq_along(x)，則會出現

邏輯值判斷只有N-i的情況出現，這樣也是有問題的

這裡可能要再細想一下怎麼改才對


第二個問題是時間減法，單位不會一定是秒

Ex:

ISOdatetime(2005,02,08,18,20,00) - ISOdatetime(2005,02,07,11,20,00)
# Time difference of 1.291667 days

ISOdatetime(2005,02,08,18,20,00) - ISOdatetime(2005,02,08,11,20,00)
# Time difference of 7 hours

ISOdatetime(2005,02,08,18,20,00) - ISOdatetime(2005,02,08,18,19,00)
# Time difference of 1 mins

ISOdatetime(2005,02,08,18,20,00) - ISOdatetime(2005,02,08,18,19,55)
# Time difference of 5 secs

這裡真的要很小心處理時間減法，務必要使用difftime + units參數控制

Ex:

difftime(ISOdatetime(2005,02,08,18,20,00),
         ISOdatetime(2005,02,08,18,19,00), units = ""secs"")
# Time difference of 60 secs: ※ 引述《celestialgod (天)》之銘言：: : 我用while + data.table做，若用data.frame會複製很多次，效率會不彰: : library(data.table): : # 產生資料: : numObs <- 50: : numInd <- 5: : DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),: :            time = strptime(""2012/12/11"", ""%Y/%m/%d"") +: :                     sample(86400, numObs, TRUE),: :            obs = rnorm(numObs)): : # 排序: : setorder(DT, ind, time, obs): : # 移除掉時間差小於六小時的: : k <- 1: : while ( TRUE ) {: :   # 計算時間差，以小時表示: :   DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]: :   # 留下自己那一組: :   set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6): :   # 留下時間差超過六小時的: :   DT <- DT[abs(diffTime) > 6, ]: :   # 下一組: :   k <- k + 1: :   # 如果k大於某組的觀測值數目就跳離迴圈: :   if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup)): :     break: : }: : DT[ , diffTime := NULL]: : 五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值): : 五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值): : 我覺得這個速度應該可以接受: : 不過我的區間只有24小時，所以可能都很快就篩選完了: : 有人可以試試看更長時間的表現: : 有問題或任何人有更好解法，歡迎提供，感謝: : Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒--","R_Language"
"998","M.1486553955.A.05A","celestialgod","問題","Re: 以時間間隔為條件，抽取資料",2017-02-08 19:39:12,NA,NA,"※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: 遇到一個可能是很新手的問題: 跳出迴圈指令跑完後: +     break: + }: Error in as.POSIXct.default(time1) ::   do not know how to convert 'time1' to class “POSIXct”這問題是你的time1不是時間格式，是character造成的: > sambar[ , diffTime := NULL]: Warning message:: In `[.data.table`(sambar, , `:=`(diffTime, NULL)) ::   Adding new column 'diffTime' then assigning NULL (deleting it).這個也同理: 我猜是因為difftime預設的處理資料格式是 hh:mm，沒有把日期考慮進去這個猜測不對，difftime吃的是POSIXct 或是 POSIXlt class的東西

你在用read.csv讀入資料的時候，你那個時間格式不會被正確解讀成那兩個class

所以只會被當成字串處理，因此我下面給你一段程式去把你的時間格式轉成POSIXct: 但我試了半天都沒改成功: 也不太確定我的資料檔日期格式是否正確: 目前格式長這樣  2012/11/1 6:04，不知道1號是不是該改成01，6點該改成06 ?: 再麻煩大大們幫忙了，感謝資料讀入後，請用

library(data.table)
sambar <- read.csv(...)
setDT(sambar)
sambar[ , time1 := as.POSIXct(time1, format = ""%Y/%m/%d %H:%M"")]
# time1是你的時間變數: ※ 引述《celestialgod (天)》之銘言：: : 我用while + data.table做，若用data.frame會複製很多次，效率會不彰: : library(data.table): : # 產生資料: : numObs <- 50: : numInd <- 5: : DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),: :            time = strptime(""2012/12/11"", ""%Y/%m/%d"") +: :                     sample(86400, numObs, TRUE),: :            obs = rnorm(numObs)): : # 排序: : setorder(DT, ind, time, obs): : # 移除掉時間差小於六小時的: : k <- 1: : while ( TRUE ) {: :   # 計算時間差，以小時表示: :   DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]: :   # 留下自己那一組: :   set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6): :   # 留下時間差超過六小時的: :   DT <- DT[abs(diffTime) > 6, ]: :   # 下一組: :   k <- k + 1: :   # 如果k大於某組的觀測值數目就跳離迴圈: :   if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup)): :     break: : }: : DT[ , diffTime := NULL]: : 五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值): : 五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值): : 我覺得這個速度應該可以接受: : 不過我的區間只有24小時，所以可能都很快就篩選完了: : 有人可以試試看更長時間的表現: : 有問題或任何人有更好解法，歡迎提供，感謝: : Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒--","R_Language"
"999","M.1486551342.A.2DB","Edster","問題","Re: 以時間間隔為條件，抽取資料",2017-02-08 18:55:39,NA,NA,"想了一陣子，覺得還是C版的 abs(difftime)>6 這個最漂亮。
我沒做什麼動作，就改成一個老人看得懂的版本
library(magrittr)

CriInterval = function(x, criteria){
  names(x) = 1:length(x)
  i=1
  while(i<length(x)){
    j=1
    while(x[i+j] - x[i] < criteria & i+j <= length(x)){
      x[i+j]<-NA
      j=j+1
    }
     i=i+j
  }
  return(names(na.omit(x)))
}

CriInterval2 = function(x, criteria){
  i=1
  j=1
  while(!is.na(i[j]) & i[j]<length(x)){
    i = c(i, match(FALSE,x[i[j]:length(x)]-x[i[j]] < criteria) + i[j]-1)
    j=j+1
  }
  return(i)
}


TS = seq(ISOdatetime(2016,02,08,18,20,00),
         ISOdatetime(2017,02,08,18,20,00), ""min"")
X=TS %>% sample(1e4) %>% sort %>% as.numeric()

system.time(ci <- CriInterval(X,6*60*60))
system.time(ci <- CriInterval2(X,6*60*60))
match(FALSE,X-X[1]<6*60*60) %in% ci

system.time(ci <- lapply(1:500,
       function(i) CriInterval(TS %>% sample(1e4) %>% sort %>% as.numeric(),
       criteria=6*60*60)))
str(ci)

   user  system elapsed
  26.25    0.05   26.29

其實也沒有比較慢，我放了 500 * 10000 筆資料

ps: 其實一開始想的是match, 後來執行太慢，就放棄繼續，直到看到C版的寫法
又覺得abs這動作有點多餘，然後沒有檢查，-.-。

感謝幫忙抓錯※ 引述《celestialgod (天)》之銘言：: ※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手，只會套用package: : [問題敘述]:: : 我有一批動物研究的資料: : 資料大致長這個樣子，共有12隻個體一萬多筆: : 個體A  2012/10/11  20:00   實驗資料OOXX: : 個體A  2012/10/11  23:00   實驗資料OOXX: : 個體A  2012/10/12  03:00   實驗資料OOXX: : 個體B  2012/12/11  05:00   實驗資料OOXX: : 個體B  2012/12/11  11:05   實驗資料OOXX: : 個體B  2012/12/11  13:00   實驗資料OOXX: : 個體B  2012/12/11  18:00   實驗資料OOXX: : 個體B  2012/12/11  20:00   實驗資料OOXX: : 由於時間間隔過短的話，資料之間可能有相關性: : 因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留: : 以上面資料為例: : A個體保留第一、第三筆資料: : B個體保留第一、第二、第四筆資料: : 我的程度是新手，偶爾會拿一些package來套用: : 請教是否有相關套件或現成code可以用在這個案例: : 非常感謝~~: 我用while + data.table做，若用data.frame會複製很多次，效率會不彰: library(data.table): # 產生資料: numObs <- 50: numInd <- 5: DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),:            time = strptime(""2012/12/11"", ""%Y/%m/%d"") +:                     sample(86400, numObs, TRUE),:            obs = rnorm(numObs)): # 排序: setorder(DT, ind, time, obs): # 移除掉時間差小於六小時的: k <- 1: while ( TRUE ) {:   # 計算時間差，以小時表示:   DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]:   # 留下自己那一組:   set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6):   # 留下時間差超過六小時的:   DT <- DT[abs(diffTime) > 6, ]:   # 下一組:   k <- k + 1:   # 如果k大於某組的觀測值數目就跳離迴圈:   if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup)):     break: }: DT[ , diffTime := NULL]: 五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值): 五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值): 我覺得這個速度應該可以接受: 不過我的區間只有24小時，所以可能都很快就篩選完了: 有人可以試試看更長時間的表現: 有問題或任何人有更好解法，歡迎提供，感謝: Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒--","R_Language"
"1000","M.1486530426.A.8B6","anakinyen","問題","Re: 以時間間隔為條件，抽取資料",2017-02-08 13:07:04,NA,NA,"遇到一個可能是很新手的問題

跳出迴圈指令跑完後
+     break
+ }
Error in as.POSIXct.default(time1) :
  do not know how to convert 'time1' to class “POSIXct”> sambar[ , diffTime := NULL]Warning message:
In `[.data.table`(sambar, , `:=`(diffTime, NULL)) :
  Adding new column 'diffTime' then assigning NULL (deleting it).


我猜是因為difftime預設的處理資料格式是 hh:mm，沒有把日期考慮進去
但我試了半天都沒改成功

也不太確定我的資料檔日期格式是否正確
目前格式長這樣  2012/11/1 6:04，不知道1號是不是該改成01，6點該改成06 ?


再麻煩大大們幫忙了，感謝※ 引述《celestialgod (天)》之銘言：: ※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手，只會套用package: : [問題敘述]:: : 我有一批動物研究的資料: : 資料大致長這個樣子，共有12隻個體一萬多筆: : 個體A  2012/10/11  20:00   實驗資料OOXX: : 個體A  2012/10/11  23:00   實驗資料OOXX: : 個體A  2012/10/12  03:00   實驗資料OOXX: : 個體B  2012/12/11  05:00   實驗資料OOXX: : 個體B  2012/12/11  11:05   實驗資料OOXX: : 個體B  2012/12/11  13:00   實驗資料OOXX: : 個體B  2012/12/11  18:00   實驗資料OOXX: : 個體B  2012/12/11  20:00   實驗資料OOXX: : 由於時間間隔過短的話，資料之間可能有相關性: : 因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留: : 以上面資料為例: : A個體保留第一、第三筆資料: : B個體保留第一、第二、第四筆資料: : 我的程度是新手，偶爾會拿一些package來套用: : 請教是否有相關套件或現成code可以用在這個案例: : 非常感謝~~: 我用while + data.table做，若用data.frame會複製很多次，效率會不彰: library(data.table): # 產生資料: numObs <- 50: numInd <- 5: DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),:            time = strptime(""2012/12/11"", ""%Y/%m/%d"") +:                     sample(86400, numObs, TRUE),:            obs = rnorm(numObs)): # 排序: setorder(DT, ind, time, obs): # 移除掉時間差小於六小時的: k <- 1: while ( TRUE ) {:   # 計算時間差，以小時表示:   DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]:   # 留下自己那一組:   set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6):   # 留下時間差超過六小時的:   DT <- DT[abs(diffTime) > 6, ]:   # 下一組:   k <- k + 1:   # 如果k大於某組的觀測值數目就跳離迴圈:   if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup)):     break: }: DT[ , diffTime := NULL]: 五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值): 五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值): 我覺得這個速度應該可以接受: 不過我的區間只有24小時，所以可能都很快就篩選完了: 有人可以試試看更長時間的表現: 有問題或任何人有更好解法，歡迎提供，感謝: Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒--","R_Language"
"1001","M.1486399622.A.7DD","f496328mm","問題","Re: 以時間間隔為條件，抽取資料",2017-02-07 00:47:00,NA,NA,"※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手，只會套用package: [問題敘述]:: 我有一批動物研究的資料: 資料大致長這個樣子，共有12隻個體一萬多筆: 個體A  2012/10/11  20:00   實驗資料OOXX: 個體A  2012/10/11  23:00   實驗資料OOXX: 個體A  2012/10/12  03:00   實驗資料OOXX: 個體B  2012/12/11  05:00   實驗資料OOXX: 個體B  2012/12/11  11:05   實驗資料OOXX: 個體B  2012/12/11  13:00   實驗資料OOXX: 個體B  2012/12/11  18:00   實驗資料OOXX: 個體B  2012/12/11  20:00   實驗資料OOXX: 由於時間間隔過短的話，資料之間可能有相關性: 因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留: 以上面資料為例: A個體保留第一、第三筆資料: B個體保留第一、第二、第四筆資料: 我的程度是新手，偶爾會拿一些package來套用: 請教是否有相關套件或現成code可以用在這個案例: 非常感謝~~借用 celestialgod 大大的函數去生data

我的想法是  新生成一個變數 interval , 當作時間間隔 , 再去篩選 >6 的

        library(data.table)
        library(dplyr)

        #生data  3天
        numObs <- 10
        numInd <- 3
        data1 <- data.table(ind = ( sample(numInd, numObs, TRUE)),
           time = strptime(""2012/12/10"", ""%Y/%m/%d"") +
                    sample(86400, numObs, TRUE),
           obs = rnorm(numObs))
        data2 <- data.table(ind = ( sample(numInd, numObs, TRUE)),
           time = strptime(""2012/12/11"", ""%Y/%m/%d"") +
                    sample(86400, numObs, TRUE),
           obs = rnorm(numObs))
        data3 <- data.table(ind = ( sample(numInd, numObs, TRUE)),
           time = strptime(""2012/12/12"", ""%Y/%m/%d"") +
                    sample(86400, numObs, TRUE),
           obs = rnorm(numObs))

        #合併 & 排序
        data = rbind(data1,data2,data3) %>% arrange(ind,time)

        #計算時間差
        data$interval = c( 0 ,
        difftime(data$time[ 2:length(data$time) ] ,
                 data$time[ 1:( length(data$time)-1 ) ] , units=""hours"" )
        )

        #篩選時間差 >6 的
        x = data %>% filter( . , interval>6 )#------------------------------------------------------

        我並沒有處理 ind: 1跳到2時   必須重新計算時間間隔

        由於我按照 ind & time 排序

        2的第一個interval會是負的

        並不影響我們篩選 interval>6#------------------------------------------------------

        150萬筆
        user  system elapsed
        0.27    0.07    0.33

        150萬筆我是用 min>6 去篩選

        因為用hour會抓不到東西

        畢竟24小時間隔內    生太多data

        會無法出現間隔 >6 hour的情況#------------------------------------------------

        如果有bug歡迎討論




--","R_Language"
"1002","M.1486388879.A.9C1","celestialgod","問題","Re: 以時間間隔為條件，抽取資料",2017-02-06 21:47:56,NA,NA,"※ 引述《anakinyen (我在台北 天氣晴)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手，只會套用package: [問題敘述]:: 我有一批動物研究的資料: 資料大致長這個樣子，共有12隻個體一萬多筆: 個體A  2012/10/11  20:00   實驗資料OOXX: 個體A  2012/10/11  23:00   實驗資料OOXX: 個體A  2012/10/12  03:00   實驗資料OOXX: 個體B  2012/12/11  05:00   實驗資料OOXX: 個體B  2012/12/11  11:05   實驗資料OOXX: 個體B  2012/12/11  13:00   實驗資料OOXX: 個體B  2012/12/11  18:00   實驗資料OOXX: 個體B  2012/12/11  20:00   實驗資料OOXX: 由於時間間隔過短的話，資料之間可能有相關性: 因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留: 以上面資料為例: A個體保留第一、第三筆資料: B個體保留第一、第二、第四筆資料: 我的程度是新手，偶爾會拿一些package來套用: 請教是否有相關套件或現成code可以用在這個案例: 非常感謝~~我用while + data.table做，若用data.frame會複製很多次，效率會不彰

library(data.table)
# 產生資料
numObs <- 50
numInd <- 5
DT <- data.table(ind = paste0(""A"", sample(numInd, numObs, TRUE)),
           time = strptime(""2012/12/11"", ""%Y/%m/%d"") +
                    sample(86400, numObs, TRUE),
           obs = rnorm(numObs))
# 排序
setorder(DT, ind, time, obs)
# 移除掉時間差小於六小時的
k <- 1
while ( TRUE ) {
  # 計算時間差，以小時表示
  DT[ , diffTime := difftime(time, time[min(k, .N)], units=""hours""), by = ind]
  # 留下自己那一組
  set(DT, which(DT$diffTime == 0), which(names(DT) == ""diffTime""), 1e6)
  # 留下時間差超過六小時的
  DT <- DT[abs(diffTime) > 6, ]
  # 下一組
  k <- k + 1
  # 如果k大於全部組的最大觀測值數目就跳離迴圈
  if (k > max(DT[ , .(numObsGroup = .N),  by = ind]$numObsGroup))
    break
}
# 移除diffTime這個變數
DT[ , diffTime := NULL]

五萬筆觀測值，一千個個體，耗時0.23秒 (平均一個個體50個觀測值)

五十萬筆觀測值，一千個個體，耗時0.39秒 (平均一個個體500個觀測值)

我覺得這個速度應該可以接受

不過我的區間只有24小時，所以可能都很快就篩選完了

有人可以試試看更長時間的表現

有問題或任何人有更好解法，歡迎提供，感謝

Note: 間隔一百天，五十萬筆觀測值，一千個個體，耗時18.33秒

--","R_Language"
"1003","M.1486373791.A.069","anakinyen","問題","以時間間隔為條件，抽取資料",2017-02-06 17:36:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手，只會套用package

[問題敘述]:

我有一批動物研究的資料
資料大致長這個樣子，共有12隻個體一萬多筆

個體A  2012/10/11  20:00   實驗資料OOXX
個體A  2012/10/11  23:00   實驗資料OOXX
個體A  2012/10/12  03:00   實驗資料OOXX
個體B  2012/12/11  05:00   實驗資料OOXX
個體B  2012/12/11  11:05   實驗資料OOXX
個體B  2012/12/11  13:00   實驗資料OOXX
個體B  2012/12/11  18:00   實驗資料OOXX
個體B  2012/12/11  20:00   實驗資料OOXX

由於時間間隔過短的話，資料之間可能有相關性
因此我現在想要設定6小時的閥值，間隔超過6小時的資料才會保留
以上面資料為例
A個體保留第一、第三筆資料
B個體保留第一、第二、第四筆資料

我的程度是新手，偶爾會拿一些package來套用
請教是否有相關套件或現成code可以用在這個案例
非常感謝~~




--","R_Language"
"1004","M.1486357842.A.32D","celestialgod","問題","Re: 新手 error問題",2017-02-06 13:10:37,NA,NA,"※ 引述《jade811213 (Sylvia)》之銘言：: 執行後出現如圖的error: http://i.imgur.com/Lju83jF.jpg: 但不太知道他的意思及解決方法: 請高手解答謝謝><loglik.new <- NA
loglik.old <- 1
convergence <- 1e-6

err <- tryCatch({
  if (abs(loglik.new - loglik.old) / (1 + abs(loglik.old)) > convergence)
    print(1)
}, error = function(e) e)
print(err$message)
# [1] ""missing value where TRUE/FALSE needed""

這意思就是你前面計算的

  abs(loglik.new - loglik.old) / (1 + abs(loglik.old))

是NA，所以會出現這個錯誤


至於你推文連結的錯誤則是找不到loglik.new這個變數造成的：

rm(loglik.new)
err <- tryCatch({
  if (abs(loglik.new - loglik.old) / (1 + abs(loglik.old)) > convergence)
    print(1)
}, error = function(e) e)
print(err$message)
# [1] ""object 'loglik.new' not found""


不知道這樣有沒有比較清楚？

比較漂亮/好的寫法 (避免被global variable影響)：http://pastebin.com/8AvXg0cc--","R_Language"
"1005","M.1486310197.A.F9F","jade811213","問題","新手 error問題",2017-02-05 23:56:34,NA,NA,"執行後出現如圖的errorhttp://i.imgur.com/Lju83jF.jpg但不太知道他的意思及解決方法
請高手解答謝謝><

--","R_Language"
"1006","M.1486207270.A.8F8","k5171","問題","Error in UseMethod(""xml_find_all"")",2017-02-04 19:21:07,NA,NA,"各位版大好，
首次使用Ｒ爬蟲，
嘗試其他網頁的爬蟲都有成功，
唯獨此篇的網頁一直爬不下來，
嘗試多日真的快想破頭，
懇請版上大大能幫忙！

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
library(httr)
library(rvest)

etf_url <- ""http://etfdb.com/etfdb-category/high-yield-bonds/""首先想爬這個表格就嘗試了幾個方法：

# Definitive List Of High Yield Bonds ETFs
(I)
hyetf <- read_html(etf_url) %>%
        html_nodes(xpath = '//*[@id=""etfs""]') %>%
        html_table()==> hyetf 顯示為 list()(II)
etf <- content(GET(etf_url), as = ""text"", encoding = ""UTF-8"")
hyetf <- etf %>%
        html_nodes(xpath = '//*[@id=""etfs""]') %>%
        html_table()
hyetf==> Error in UseMethod(""xml_find_all"") :沒有適用的方法可將 'xml_find_all' 套用到 ""character"" 類別的物件;
    hyetf 同樣顯示為 list()

(III)
想說試試看用爬 <table> tag 的方式，結果卻發現找不到 <table> tag 的 list:
hyetftable <- read_html(etf_url) %>%
hyetftable <- read_html(etf_url) %>%
             html_nodes(""table"")==>  {xml_nodeset (0)}於是不死心決定爬個入門版的最上方大標題試試，結果還是失敗了

# 網頁頂層大標 High Yield Bond ETFs
(I)
hyetf <- etf %>%
        html_nodes("".mm-heading-no-top-margin"") %>%
        html_nodes(""h1"") %>%
        html_text()==> Error in UseMethod(""xml_find_all"") :沒有適用的方法可將 'xml_find_all' 套用到 ""character"" 類別的物件;
    hyetf 顯示為 character(0)

(II)
hyetf <- read_html(etf_url) %>%
        html_nodes("".mm-heading-no-top-margin"") %>%
        html_nodes(""h1"") %>%
        html_text()==> hyetf 仍顯示為 character(0)嘗試了好幾週，真的不確定是哪裡缺少什麼，懇請版上大大賜教，感激！

[環境敘述]:> sessionInfo()R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.6 (El Capitan)

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets
[6] methods   base

other attached packages:
 [1] httr_1.2.1     Rwordseg_0.2-1 ggplot2_2.2.0
 [4] jiebaR_0.9.1   jiebaRD_0.1    tmcn_0.1-4
 [7] tm_0.6-2       NLP_0.1-9      rJava_0.9-8
[10] rvest_0.3.2    xml2_1.0.0

loaded via a namespace (and not attached):
loaded via a namespace (and not attached):
 [1] Rcpp_0.12.7      magrittr_1.5
 [3] munsell_0.4.3    colorspace_1.2-6
 [5] R6_2.1.3         stringr_1.1.0
 [7] plyr_1.8.4       tools_3.3.1
 [9] parallel_3.3.1   grid_3.3.1
[11] gtable_0.2.0     selectr_0.3-0
[13] lazyeval_0.2.0   assertthat_0.1
[15] tibble_1.2       curl_2.1
[17] rsconnect_0.4.3  slam_0.1-40
[19] stringi_1.1.1    scales_0.4.1
[21] XML_3.98-1.5

--","R_Language"
"1007","M.1486206067.A.ACC","wengbei","問題","ggplot兩軸指定問題",2017-02-04 19:01:04,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我想要用ggplot2裡面的繪圖功能將特定點標記出來。
例如：
1. q-q plot for chi square
2. 許多變數合併比較的boxplot

我想知道outliers是哪些屬性
查了許多資料後發現ggplot的aes必須指定兩軸對應參數
但是上述兩個圖形都是multivariate構成
我不知道要怎麼設定兩軸參數

[程式範例]:http://ideone.com/x7Cm9m#[環境敘述]:

R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
Kingdom.1252    LC_MONETARY=English_United Kingdom.1252
[4] LC_NUMERIC=C                            LC_TIME=English_United
Kingdom.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] MVN_4.0.2

loaded via a namespace (and not attached):
 [1] mlbench_2.1-1           zoo_1.7-14              modeltools_0.2-21
nortest_1.0-4           kernlab_0.9-25
 [6] splines_3.3.2           VIM_4.6.0               lattice_0.20-34
pcaPP_1.9-61            colorspace_1.3-2
[11] stats4_3.3.2            mgcv_1.8-15             e1071_1.6-7
nloptr_1.0.4            foreign_0.8-67
[16] prabclus_2.2-6          sp_1.2-4                RColorBrewer_1.1-2
 fpc_2.1-10              sgeostat_1.0-27
[21] plyr_1.8.4              robustbase_0.92-7       MatrixModels_0.4-1
 stream_1.2-3            munsell_0.4.3
[26] robCompositions_2.0.3   pls_2.6-0               gtable_0.2.0
 moments_0.14            mvtnorm_1.0-5
[31] psych_1.6.12            codetools_0.2-15        laeken_0.4.6
 GGally_1.3.0            SparseM_1.74
[36] lmtest_0.9-34           quantreg_5.29           pbkrtest_0.4-6
 flexmix_2.3-13          parallel_3.3.2
[41] class_7.3-14            sROC_0.1-2              vcd_1.4-3
DEoptimR_1.0-8          trimcluster_0.1-2
[46] Rcpp_0.12.9             scales_0.4.1            diptest_0.75-7
 clusterGeneration_1.3.4 dbscan_0.9-8
[51] lme4_1.1-12             mnormt_1.5-5            ggplot2_2.2.1
grid_3.3.2              clue_0.3-53
[56] tools_3.3.2             lazyeval_0.2.0          proxy_0.4-16
 tibble_1.2              cluster_2.0.5
[61] cvTools_0.3.2           car_2.1-4               rrcov_1.4-3
MASS_7.3-45             Matrix_1.2-7.1
[66] data.table_1.10.0       mvoutlier_2.0.8         assertthat_0.1
 minqa_1.2.4             reshape_0.8.6
[71] boot_1.3-18             mclust_5.2.2            nnet_7.3-12
nlme_3.1-128


[關鍵字]:

ggplot2
q-q plot for chi square distribution
boxplot
multivariate

------
第一次在貴版po文，還請各位R高手多多指教！
非常感謝！

--","R_Language"
"1008","M.1486202506.A.4DF","joson4921","問題","兩資料集merge,求解為何出現NA和解決之道",2017-02-04 18:01:42,NA,NA,"- 問題:[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:BaseLine.csv：https://goo.gl/Zdq00KTmpCalcuBusNo._V0.csv：https://goo.gl/SWmaUh如題,手邊有兩個經過整理的資料集「BaseLine.csv」「TmpCalcuBusNo._V0.csv」兩資料集內分別有4個相同的欄位名稱： Gobackx, From, Toward, Bus_No我想把「BaseLine.csv」的「Tmp_TravelTime」欄位資料merge過去TmpCal那個csv然後另存成新資料集「TimeCalcu_temp」,所使用的程式碼如下:TimeCalcu_temp <- merge( TmpCalcu_BusNo._V0, BaseLine,by = c(""Gobackx"",""Toward"",""From"",""Bus_No"") ,all.x = TRUE)檔案是有照我想要的方式merge起來了,如新資料集第一筆所示：Gobackx       Toward         From        Bus_No    =>   Tmp_TravelTime0       五權學士路口    莒光新城        12      =>         27回頭去找「BaseLine.csv」確認,根據上述 Gobackx, Toward, From, Bus_No找到對應資料：BaseLine.csv第854筆該筆資料之 Tmp_TravelTime = 27 無誤但是可以發現另存成的新資料集 TimeCalcu_temp 的 Tmp_TravelTime 出現大量NA值我想知道是否 merge 函數使用有誤,致無法得出我想要的結果呢?還請板上大大協助run一下資料集看看問題出在哪裡,先謝謝大家了!!!![程式範例]:

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:
merge選擇性，也許未來有用--","R_Language"
"1009","M.1486093571.A.8CE","Grotesque41J","問題","IBM DSWB的RStudio可以完全取代桌機版嗎",2017-02-03 11:46:07,NA,NA,"各位大大安安 開工愉快

因為電腦老舊 之前就在想 有沒有可能有線上版的R

到處翻了一下發現IBM開的大數據大學裡面有個Data Scientist Workbench(DSWB)

其中附了RSstudio （http://tinyurl.com/zftoars）

試了一下 連老舊的Android平板都能開 (打字很不方便就是了http://i.imgur.com/O2pQXVs.png而且資料可以直接存在上面 好像蠻方便的 (不知道支援多大空間就是)

不知道這個功能齊不齊全

有可能取代桌機版嗎？

謝謝

--","R_Language"
"1010","M.1486051370.A.CDD","cywhale","問題","Re: 取值:落在時間範圍 並 符合其他條件",2017-02-03 00:02:48,NA,NA,"dt <- fread('Goback   Bus_No.   DepartureTime
0        1         5:50
0        2         6:10
0        3         6:30
0        4         6:50
0        5         7:10
1        1         6:00
1        2         6:20
1        3         6:40
1        4         7:00
1        5         7:20')

dt2 <- fread('   Departure Time   Goback             Bus_No.
2015-12-25 05:51:20     0                   1
2015-12-26 06:53:30     0                   4
2015-12-27 06:22:58     1                   2
2015-12-28 05:58:32     1                   1
2015-12-29 07:09:24     0                   5')

setnames(dt2,3,""gobackx"")
setnames(dt,2,""Bus_No"")
search_near_time <- function(x, ref_dt,
                             tname=""DepartureTime"", val.name=""Bus_No"") {
  require(data.table)
  dift <- as.ITime(x) - as.ITime(unlist(ref_dt[,tname,with=F]))
  return(unlist(ref_dt[which.min(abs(as.numeric(dift))),val.name,with=F],
                use.names = F))
}

dt2[,near:=search_near_time(Time,
                            subset(dt, Goback==gobackx,
                                   select=c(""DepartureTime"",""Bus_No""))),
    by=.(Time)]※ 引述《joson4921 (特務)》之銘言：:: 文章分類提示:問題:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 板上各位大大好: 我想請問如果 data2 跟 data1有以下2個/3個變數,例如長得像以下那樣::           data1: Goback   Bus_No.   DepartureTime:    0        1         5:50:    0        2         6:10:    0        3         6:30:    0        4         6:50:    0        5         7:10:    1        1         6:00:    1        2         6:20:    1        3         6:40:    1        4         7:00:    1        5         7:20:        data2                      預期結果""Bus_No.""新增於data2內如下::    DepartureTime      Goback             Bus_No.: 2015-12-25 05:51:20     0                   1: 2015-12-26 06:53:30     0                   4: 2015-12-27 06:22:58     1                   2: 2015-12-28 05:58:32     1                   1: 2015-12-29 07:09:24     0                   5: 我想做的事情是根據data2裡的 ""DepartureTime"" 和 ""Goback"" 這兩個變數數,: 去找data1裡面對應的""Bus_No.""傳回data2,並新增一個欄位""Bus_number""儲存結果: 例: data2資料集內第四筆: 2015-12-28 05:58:32 Goback=1: 則查找data1資料集內,: 符合 Goback為1 且 與 DepartureTime 最接近 05:58:32者為: Goback   Bus_No.   DepartureTime: 1        1         6:00: 故 2015-12-28 05:58:32 且 Goback=1,預期結果Bus_No.應為""1"": 我用上次板上大大教的foverlaps函數去試著改寫,: 但弄了幾天一直沒辦法把Goback的判斷式加入,想請教大大我判斷應該怎麼寫才對: data2[, foverlaps( Tmp_calculation, BusScedule_51_difftime )]  %>%:  .[, Bus_No. := data1$Bus_No. ] %>%:  ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿:  ↓: Goback的判斷條件應該是加再這邊,但我用中括號取值弄不出我想要的結果: 以上,若有其他方法可用也請不吝分享: 再麻煩請板上大大協助指點,感謝>""<: [關鍵字]:: foverlaps: match 或者 %in% (?)--","R_Language"
"1011","M.1486048267.A.89C","girl5566","問題","Win10 Rstudio 中文亂碼",2017-02-02 23:11:05,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

剛升級成為Win10  在Rstudio中使用中文皆會變成unicode

想問這個有解決的辦法嗎?http://imgur.com/8WTsZzJ[環境敘述]:

R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C

[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.2

[關鍵字]:

Win 10, 亂碼

--","R_Language"
"1012","M.1486042611.A.44D","joson4921","問題","取值:落於時間範圍內 且 符合其他條件",2017-02-02 21:36:45,NA,NA,"文章分類提示:問題[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的板上各位大大好
我想請問如果 data2 跟 data1有以下2個/3個變數,例如長得像以下那樣:

          data1
Goback   Bus_No.   DepartureTime
   0        1         5:50
   0        2         6:10
   0        3         6:30
   0        4         6:50
   0        5         7:10
   1        1         6:00
   1        2         6:20
   1        3         6:40
   1        4         7:00
   1        5         7:20

       data2                      預期結果""Bus_No.""新增於data2內如下:

   DepartureTime      Goback             Bus_No.
2015-12-25 05:51:20     0                   1
2015-12-26 06:53:30     0                   4
2015-12-27 06:22:58     1                   2
2015-12-28 05:58:32     1                   1
2015-12-29 07:09:24     0                   5

我想做的事情是根據data2裡的 ""DepartureTime"" 和 ""Goback"" 這兩個變數數,
去找data1裡面對應的""Bus_No.""傳回data2,並新增一個欄位""Bus_number""儲存結果

例: data2資料集內第四筆: 2015-12-28 05:58:32 Goback=1

則查找data1資料集內,
符合 Goback為1 且 與 DepartureTime 最接近 05:58:32者為

Goback   Bus_No.   DepartureTime
1        1         6:00

故 2015-12-28 05:58:32 且 Goback=1,預期結果Bus_No.應為""1""
我用上次板上大大教的foverlaps函數去試著改寫,
但弄了幾天一直沒辦法把Goback的判斷式加入,想請教大大我判斷應該怎麼寫才對


data2[, foverlaps( Tmp_calculation, BusScedule_51_difftime )]  %>%
 .[, Bus_No. := data1$Bus_No. ] %>%
 ＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿＿
 ↓
Goback的判斷條件應該是加再這邊,但我用中括號取值弄不出我想要的結果


以上,若有其他方法可用也請不吝分享
再麻煩請板上大大協助指點,感謝>""<




[關鍵字]:
foverlaps
match 或者 %in% (?)

--","R_Language"
"1013","M.1486024869.A.638","CAPPON","問題","Re: 產生excel 合併儲存格",2017-02-02 16:41:07,NA,NA,"試了ㄧ下
dataframe 名稱為 ""NWratio""
用mergecells 出現這錯誤訊息
疑問是 現在呈現為dataframe , 但這邊的sheet是可以不寫的嗎? 把他略過不寫也是沒辦
法work
請教前輩這要怎麼解呢?
謝謝> mergeCells(NWratio, sheet=""Sheet1"",reference = ""A2:A5"")Error in (function (classes, fdef, mtable)  :
 unable to find an inherited method for function ‘mergeCells’ for signature
‘""data.frame"", ""character""’※ 引述《CAPPON (JI3)》之銘言：: https://www.sendspace.com/file/46ggcv: 例子如檔案裡頭: 想要A1相同欄位匯出時候是可以變成合併儲存格: 這是可以做到的嗎?: 謝謝前輩: ※ 引述《CAPPON (JI3)》之銘言：: : 在R 產生的data frame要匯出excel: : 有辦法將某個欄位產生合併儲存格嗎？: : 還是需要透過什麼語法做轉換呢？: : 謝謝∼--","R_Language"
"1014","M.1485855748.A.626","celestialgod","問題","Re: 如何更有效率的整理data的問題?",2017-01-31 17:42:25,NA,NA,"※ 引述《phil5566 (5566)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 小弟自己產生一組data叫做""T""的矩陣,: 想把其中""T""的第5行(T[,5])和第6行(T[,6])的數據,: 挑出來整理成一個120X3的矩陣,假設叫""G"",: T[,5]的數值有10,16,22,28,34,40,6個可能,: T[,6]的數值有0.5,1.5,2.5,.........,19.5和inf的可能,: 整理方法:: G的第一行(G[,1]):放0.5,1.5,....,19.5(20個數,6個循環,共120個): G的第二行(G[,2]):放的東西比較麻煩,即: T[,5]=10的情況下,對應到T[,6]那些0.5,1.5,.....,19.5,inf的數值: 計算他們的累積比率,假設T[,5]=10,有100筆data,: T[,5]=10且T[,6]<=0.5(或者T[,6]<=1)有22筆,: 則它算出的累積比率為22/100=0.22,依此類推...,: 算到T[,5]=10且T[,6]<=19.5(或者T[,6]<=20)的累積比率: 共20個數字放到G[1:20,2],重複以上模式處理T[,5]=16,22,28,34,40的情形: 分別放到G[21:40,2],G[61:80,2],.....,G[101:120,2]: G的第三行(G[,3]):G[1:20,3]放10,G[21:40,3]放16,......G[101:120,3]放40: ________________________________________________________________________: 小弟之前是用table函數處理,: 直接table(T[,5],T[,6])得到分類結果: 再分別計算累積比率,沒用到<U+5EFB>圈,: 但考慮到""假設T[,6]可能沒有出現5.5的情況"",: table函數分類後就不會有5.5的這個分類,: 所以小弟又重新寫,用兩個<U+5EFB>圈來整理data,: 第一個<U+5EFB>圈是在處理G[,1]和G[,3],第二個<U+5EFB>圈在處理G[,2]: 以下附上code範例,: 想請教版上各位高手,大大有沒有更漂亮,快速的處理方法,: 指教了,謝謝~: [程式範例]:: http://pastebin.com/bw0C2YNJ: [環境敘述]:: R x64 3.3.1: [關鍵字]:: data整理# generage T[,5]跟T[,6]
targetMat <- cbind(sample(c(10,16,22,28,34,40), 2e4, TRUE),
                   sample(c(seq(0.5,19.5,by = 1), Inf), 2e4, TRUE))

# 取unique的T[,5]
g1 <- unique(targetMat[ , 1])
# 取T[,6] min ~ max(除去Inf)，間隔1的序列，共20個
g2 <- seq(min(targetMat[ , 2]), max(targetMat[is.finite(targetMat[,2]), 2]),
          by = 1)

# 展開g1跟g2，並加一行轉成矩陣
outputDF <- expand.grid(g1, g2)
outputMat <- as.matrix(cbind(outputDF[order(outputDF$Var1, outputDF$Var2), ],
                             0))

# 用tapply計算每一個g1, g2對應的次數，第一個input隨意放即可，沒用到，我這裡放1
resMat <- tapply(rep(1, nrow(targetMat)),
                 list(targetMat[,1], targetMat[, 2]), length)

# 用cumsum算出累積次數，再用sweep算累積比率
# 最後再把矩陣拉直，變成outputMat的第三行
outputMat[ , 3] <- as.vector(sweep(apply(resMat[ , 1:20], 1, cumsum), 2,
                                   rowSums(resMat), `/`))

最後一行可能要花時間消化一下，先從

apply(resMat[ , 1:20], 1, cumsum) 看起

然後去看sweep用法

看一下 rowSums(resMat) 代表的意義

組合起來就是你要的累積比率


另外要注意我有先對outputMat排序，才能直接放進去

再寫的時候要注意順序錯了，塞進去的結果就會不對了
--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1015","M.1485849827.A.953","fred1541","問題","一個rnorm的問題",2017-01-31 16:03:45,NA,NA,"[軟體熟悉度]:
新手入門


[問題敘述]:
最近才開始接觸R語言買本書來慢慢看..

其中有個疑惑

在利用常態分配取樣本時

若用 rnorm(50)

則表示我們要50個樣本，且這些樣本加總mean=0, sd=1

這樣的50個樣本

如果真的把這些50個樣本加總 平均數不會是0, 但接近零如果四捨五入之類的

當然樣本標準差別不會是1如果四捨五入會

所以
產生的數字內建數字 要自己四捨五入後，才會得到真正的條件嗎?



--","R_Language"
"1016","M.1485823980.A.406","clansoda","問題","Re: 如何更有效率的整理data的問題?",2017-01-31 08:52:54,NA,NA,"Hi, 我盡量理解你的意思了 下面是我用data.table寫的一種方法

其實也是土法煉鋼 我不太清楚有沒有更好的function可以一步到位

我自己用2000個值來看 沒啥速度問題 可能要200000或更大的值來看看吧

只是給你參考的一種做法http://pastebin.com/zYjTra0i--","R_Language"
"1017","M.1485807341.A.A33","phil5566","問題","如何更有效率的整理data的問題?",2017-01-31 04:15:38,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

小弟自己產生一組data叫做""T""的矩陣,

想把其中""T""的第5行(T[,5])和第6行(T[,6])的數據,

挑出來整理成一個120X3的矩陣,假設叫""G"",

T[,5]的數值有10,16,22,28,34,40,6個可能,

T[,6]的數值有0.5,1.5,2.5,.........,19.5和inf的可能,

整理方法:

G的第一行(G[,1]):放0.5,1.5,....,19.5(20個數,6個循環,共120個)

G的第二行(G[,2]):放的東西比較麻煩,即

T[,5]=10的情況下,對應到T[,6]那些0.5,1.5,.....,19.5,inf的數值

計算他們的累積比率,假設T[,5]=10,有100筆data,

T[,5]=10且T[,6]<=0.5(或者T[,6]<=1)有22筆,

則它算出的累積比率為22/100=0.22,依此類推...,

算到T[,5]=10且T[,6]<=19.5(或者T[,6]<=20)的累積比率

共20個數字放到G[1:20,2],重複以上模式處理T[,5]=16,22,28,34,40的情形

分別放到G[21:40,2],G[61:80,2],.....,G[101:120,2]

G的第三行(G[,3]):G[1:20,3]放10,G[21:40,3]放16,......G[101:120,3]放40

________________________________________________________________________


小弟之前是用table函數處理,

直接table(T[,5],T[,6])得到分類結果

再分別計算累積比率,沒用到<U+5EFB>圈,

但考慮到""假設T[,6]可能沒有出現5.5的情況"",

table函數分類後就不會有5.5的這個分類,

所以小弟又重新寫,用兩個<U+5EFB>圈來整理data,

第一個<U+5EFB>圈是在處理G[,1]和G[,3],第二個<U+5EFB>圈在處理G[,2]

以下附上code範例,

想請教版上各位高手,大大有沒有更漂亮,快速的處理方法,

指教了,謝謝~








[程式範例]:http://pastebin.com/bw0C2YNJ[環境敘述]:

R x64 3.3.1

[關鍵字]:

data整理


--","R_Language"
"1018","M.1485720358.A.71B","joson4921","問題","時間欄位有小數點,strptime取值顯示NA",2017-01-30 04:05:54,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:如題,解壓縮出來之後時間欄位竟然有小數點...
快被搞死了,試過用記事本把"".000""刪掉,但是行不通所以只能上來求救了
資料大概長得像以下那副鬼德性:
         ( Time, Leave, UniqueBusID 為原始資料欄位)    (rid與qid為新增欄位)
         Time            Leave        UniqueBusID          rid    qid

2015-01-01 13:36:50.000  False 屯區藝文中心->莒光新城163    1      2
2015-01-01 13:36:56.000  True  屯區藝文中心->莒光新城163    2      2
2015-01-01 13:37:28.000  False 屯區藝文中心->莒光新城163    3      2
2015-01-01 13:37:38.000  False 屯區藝文中心->莒光新城163    4      2
2015-01-01 13:38:43.000  False 屯區藝文中心->莒光新城163    5      2
2015-01-01 13:37:53.000  True  莒光新城->屯區藝文中心164    1      1
2015-01-01 13:38:19.000  False 莒光新城->屯區藝文中心164    2      1
2015-01-01 13:38:38.000  False 莒光新城->屯區藝文中心164    3      1
2015-01-01 13:38:58.000  False 莒光新城->屯區藝文中心164    4      1
2015-01-01 13:39:10.000  False 莒光新城->屯區藝文中心164    5      1


我要做的事情是跟之前一樣,依據UniqueBusID分類
並選取同樣UniqueBusID的第一筆Leave==True資料,新增rid和qid進行編碼
rid為同樣UniqueBusID的資料(照時間排序)
qid為同樣UniqueBusID的第一筆Leave==True資料
之前問過類似的問題,附上程式碼如下


UniqueBusID_Select <- BusData %>%  # 輸入並鎖定路線往返程起點
 .[grep(""莒光新城->\\d*|屯區藝文中心->\\d*"", .$UniqueBusID)] %>%
 .[,c(""rid"",""qid""):=list(.I, .I[which(Leave==TRUE)][1L]), by=.(UniqueBusID)]


到這邊都沒問題,時間有正確讀入UniqueBusID_Select(包括小數點)
新增的欄位rid和qid亦遵循我定下的規則完成編碼的動作
接著就是鬼開始鬼打牆了:


UniqueBusID_Select[,Time:= as.POSIXct(strptime(Time,
                                               ""%Y/%m/%d %H:%M:%S.000"")) )]


如上式,我要把年月日時分秒讀入,透過strptime和as.POSIXct處理之後
存成新的欄位Time,但這個步驟不管怎麼試都行不通
跑出來的UniqueBusID_Select通通顯示NA
換了好幾個方法通通都不管用,請求各位大大協助突破..感謝!




[程式範例]:[環境敘述]:[關鍵字]:as.POSIXctstrptime--","R_Language"
"1019","M.1485708215.A.0EF","rodion","分享","SHY「夏普-殖利率」投資策略",2017-01-30 00:43:30,NA,NA,"學習Ｒ半年來，一直不斷地驚豔於它處理及瀏覽各式資料的便利性，譬如：

讀取csv？
        呼叫read.csv便是
資料視覺化？
        呼叫plot或ggplot便是
將Ｒ程式以WEB介面呈現？
        無需學習Javascript，Shiny能夠幫助你以極少程式碼實現高品質網站

因為這些優點，以及Ｒ對於金融財務領域的諸多支援，
在下便考慮用Ｒ來實現一個投資靈感：SHY「夏普-殖利率」策略

實作主要採用以下套件：
    金融財務分析：PerformanceAnalytics, quantmod
    繪圖：ggplot2
    網頁呈現：Shiny, ShinyDashboard

而關於SHY，其概念『超 級 簡 單』：就是追求「高、並且穩定的殖利率」。從2005年至
今的回測結果顯示，SHY很有機會打敗「台灣五十」- 一個最廣為人知、也頗受推崇的台
灣股市長期投資標的。詳見以下網址：https://rkan.shinyapps.io/SHY2/（因shinyapps.io伺服器允許程序數有限，若長時間網頁無回應，請稍候再連）

SHY核心原始碼也公開於GitHub：https://github.com/r-kan/Quant-in-R--","R_Language"
"1020","M.1485685734.A.E44","Tampa","問題","Fw: R的時間序列疑問",2017-01-29 18:28:53,NA,NA,"※ [本文轉錄自 Statistics 看板 #1OZPoBxg ]作者: Tampa (光芒) 看板: Statistics
標題: [問題] SPSS與R，分析除了時間，還有其他變數的時間序列
時間: Sun Jan 29 15:40:56 2017


如標題所述

今天我想要預測 單一公車路線的搭乘乘客數量

除了時間為變數外(每月分析)

再來就是站牌數量(可能1月只停5站，二月停10站)

兩年後的一月，搭乘乘客數量大約為多少

目前查了，arima模型好像可以

但大部分都只有單一 隨時間變化的預測

有大大可以推薦 教學網站嗎?

關於多變數預測模型




--","R_Language"
"1021","M.1485602823.A.422","qw151300","問題","RStudio 安裝路徑 Error",2017-01-28 19:27:01,NA,NA,"大家好 我是R語言新手

在RStudio安裝完後 我遇到兩項問題 推測可能是路徑設定不正確
但不確定如何更改路徑設定

環境: WIN 10/ RStudio 1.0.136

(1) 在安裝完之後 Console中 Type 'q()' to quit R. 這行下方出現以下狀況:

Error in file(file, ifelse(append, ""a"", ""w"")):
    cannot open the connection
In adition: Warning message:
In file(file, ifelse(append, ""a"", ""w"")):
    cannot open file 'C:\Users\使用者名稱\AppData\Local\Temp\RtmpEB7idq\
file20c42d1a4d0e':No such file or directory

(2) 有試圖更改過路徑 但當我輸入 setwd()後 會跳出一個框 顯示:
R code execution error
因此想請教各位該如何解決這個狀況

謝謝!

--","R_Language"
"1022","M.1485421525.A.6AD","CAPPON",NA,"產生excel 合併儲存格",2017-01-26 17:05:22,NA,NA,"在R 產生的data frame要匯出excel
有辦法將某個欄位產生合併儲存格嗎？
還是需要透過什麼語法做轉換呢？
謝謝∼

--","R_Language"
"1023","M.1485419986.A.658","HumuHumu","問題","Rstudio註解快速鍵突然失效",2017-01-26 16:39:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我是windows使用者，平常要註解都很習慣按下Ctrl+Shift+C可以把整行快速註解掉

可是剛剛發現這個快速鍵突然不能用了，其他快速鍵都好好的，不知道如何解

--","R_Language"
"1024","M.1485252573.A.3F4","athow","問題","尋求ggplot2劃線問題",2017-01-24 18:09:30,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:start_station_id  sta_lat  sta_long end_station_id  end_lat  end_long64 37.78226 -122.3927             64 37.78226 -122.3927我有大約50000筆起訖站資料，然後我想要把每筆起訖站資料連成一線，想看看是否有集中目的地的狀況，麻煩各位了。本人為初學者，請各位不吝指導。--","R_Language"
"1025","M.1485198457.A.730","phil5566","問題","重新打code卻反而變慢,不知哪裡有問題?",2017-01-24 03:07:29,NA,NA,"[問題類型]:

效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

小弟之前把自己要做的統計方法,試著打成code,一開始寫的很亂,

但可以跑出結果,而且執行速度也還差強人意,之後整理一下打code的邏輯,

又重打一遍,但速度慢超級多,小弟也不知道原因出在哪?

小弟有降低樣本數和boot的次數,確定新版的code也可以跑出結果,

而非進入無窮回圈.....,小弟找不出變慢的原因?

麻煩版上高手和先進幫忙看一下code,又或者直接幫忙改code,

讓程式執行速度變快也行,附上舊版和新版的code,感激不盡....






[程式範例]:

舊版:http://pastie.org/10992033新版:http://pastie.org/10992037[環境敘述]:

R x64 3.3.1,



[關鍵字]:

boot


--","R_Language"
"1026","M.1485153498.A.80D","bee256","問題","爬蟲新手問題請教",2017-01-23 14:38:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)
但第一次接觸爬蟲

[問題敘述]:

我想爬取 PTT 八卦版的文章，但在用 xpathSApply 函數的時候就會出錯(如下)

Error in UseMethod(""xpathApply"") :
  no applicable method for 'xpathApply' applied to an object of class
""c('xml_document', 'xml_node')""

版上爬完沒有看到類似問題，而google後發現似乎是 httr 套件在 v1.1.0 更新後，

將 XML 改為用 xml2，所以會產生此問題，我試圖降版本但一直安裝失敗，想請問

有沒有別的解法，很抱歉問了這個蠢問題，懇請版上大神幫忙，非常感謝。

[程式範例]:

D <- list()

for( i in 15000:15010){
  tmp <- paste(i, '.html', sep='')
  url <- paste('www.ptt.cc/bbs/Gossiping/index', tmp, sep='')
  html <- content(GET(url,config=set_cookies(""over18""=""1"")))
  url.list <- xpathSApply(html, ""//div[@class='title']/a[@href]"", xmlAttrs)
  D <- rbind(D, as.matrix(paste('www.ptt.cc', url.list, sep='')))
}

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] magrittr_1.5   rvest_0.3.2    xml2_1.1.0     XML_3.98-1.5
RCurl_1.95-4.8 bitops_1.0-6   httr_1.2.1

[關鍵字]:
選擇性，也許未來有用

--","R_Language"
"1027","M.1485048959.A.66A","clansoda","問題","Re: 指定dataframe某個欄位的變數型別？",2017-01-22 09:35:55,NA,NA,"※ 引述《CYBASTER (復讎<U+306E>業火)》之銘言：: 各位先進大家好，小弟是個R語言的新手，: 由於之前的功底是C#，已經很習慣變數型別要先指定的操作方式，: 最近小弟寫了一段程式碼如下（僅列出關鍵部份），碰上一個問題想請各位大大幫忙：: setwd(""D://R//""): #設定R語言的執行路徑，相關的檔案都要放在這個資料夾下: CYLDFP.tr=read.csv(""CYLDFP_TRAIN_100.csv"", header=TRUE, row.names = 1): #開啟CYLDFP_TRAIN_100.csv這個檔案: library(rpart) #要用到rpart函式庫: set.seed(1111): cart=rpart(Species~.,CYLDFP.tr,control=rpart.control(cp=0)) #建立cart決策樹: cart_prune=prune(cart, cp=0.03) #設定決策樹之複雜係數，cp值愈小愈複雜Hi，我回答你的方式是拐另外一種彎，用的是我之前分享過的package

library(mlr)

tsk <- makeClassifTask(data = CYLDFP.tr, target = ""Species"")

lrn <- makeLearner(""classif.rpart"", par.vals = list(cp = 0.3)

mod <- train(learner = lrn, task = tsk)

result <- predict(mod, newdata = yourtestdataset)

finalresult <- result$data

這樣應該可以，mlr內建的功能會將你的feature改成作者指定的類型

像是xg.boost也只支援numeric input但是你丟一大堆文字形的factor進去

他一樣能跑出你想要的結果

使用getParamSet(""classif.rpart"")可以看到妳能調整的參數

其他的我就不多提了，我在之前分享的mlr文章內附有完整的manual

--","R_Language"
"1028","M.1485022460.A.801","phil5566","問題","在R上使用R2OpenBUGS如何使程式跑得更快?",2017-01-22 02:14:13,NA,NA,"[問題類型]:效能諮詢


[軟體熟悉度]:新手(沒寫過程式)


[問題敘述]:

我想在R上使用R2OpenBUGS這個package,使得在R上操作openbugs進行模擬,

之前測試過跑完一次要5~6天,但這個耗時好像太久,小弟剩的時間不多

想請教版上高手和先進們,要如何讓程式運作的更快?

在下面附上的code裡,主要定義了兩個函數分別是boot.CI(用來計算信賴區間)

和mcmc.fun(用來操作openbugs),其中mcmc.fun裡

1.POW(a,b)的意思就是a的b次方,打a^b的話,openbugs會無法辨別

2.dat[dat==1/0]=0,就是把data裡inf換成0,否則inf,openbugs會無法辨別

大概是這樣,謝謝




[程式範例]:http://pastie.org/10991607[環境敘述]:

R x64 3.3.1,

""R2OpenBUGS""package



[關鍵字]:

R2OpenBUGS



--","R_Language"
"1029","M.1484978206.A.975","CYBASTER","問題","指定dataframe某個欄位的變數型別？",2017-01-21 13:56:40,NA,NA,"各位先進大家好，小弟是個R語言的新手，
由於之前的功底是C#，已經很習慣變數型別要先指定的操作方式，
最近小弟寫了一段程式碼如下（僅列出關鍵部份），碰上一個問題想請各位大大幫忙：

setwd(""D://R//"")
#設定R語言的執行路徑，相關的檔案都要放在這個資料夾下
CYLDFP.tr=read.csv(""CYLDFP_TRAIN_100.csv"", header=TRUE, row.names = 1)
#開啟CYLDFP_TRAIN_100.csv這個檔案

library(rpart) #要用到rpart函式庫

set.seed(1111)
cart=rpart(Species~.,CYLDFP.tr,control=rpart.control(cp=0)) #建立cart決策樹
cart_prune=prune(cart, cp=0.03) #設定決策樹之複雜係數，cp值愈小愈複雜
summary(cart_prune) #顯示出決策樹之各項參數摘要

我想用決策樹來預測某個欄位的資料標籤，
這個程式從一個CSV檔裡頭讀進一個dataframe，命名為CYLDFP.tr，
而CYLDFP.tr裡頭有一個稱作Species的欄位，是我想要讓決策樹來預測的變數。
現在問題在於，原始的資料提供者在這個欄位裡頭只放0或1，
R語言的強項就在於它會自動辨識變數欄位是屬於numeric, logical或是factor，
但反而是這種自動的機制造成了判斷錯誤，
因為在小弟這個例子中，只有1或0的欄位應該要被判定為是logical，
但決策樹跑出來的結果，它竟然被當成了numeric來處理，
因為預測值出現了0與1以外的實數。
小弟應該要怎麼「強制指定」Species這整個欄位是屬於logical類別呢？

不好意思可能問了很基本的問題，但是爬文沒有爬到答案，
或者說我有看到as.numeric()這樣的函式，但找得到的範例都是套用在單一的變數上，
而不是套用在dataframe裡的一整個欄位（column）上頭，
懇請各位大大相助解惑了，感激不盡！


--
   子曰：『槍管不清，則禮樂不興。』
                                   ∼掄語

--","R_Language"
"1030","M.1484930714.A.DB7","f496328mm","問題","windows 可以跑 linux 有error",2017-01-21 00:45:11,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。
[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我目前在試linux

目前 code 在 windows , 可以 run

但是 linux 卻不行  ,  有error

問題主要是  在windows時  ,  data.table 型態會繼承下去

但是在 linux   ,  會變成 data.frame

例如使用 filter

windows 得到的會是data.table + data.frame

但是 linux 只得到 data.frame

導致有些在 data.table 可以 run 的指令發生error

雖然只要重新給 data.table 型態就好

這是告訴我們寫 code 要小心的意思？？



其他指令是不是也會有問題？

謝謝

[環境敘述]:

linux

[關鍵字]:


--","R_Language"
"1031","M.1484837527.A.DB3","f496328mm","問題","mxnet 如何開到多cpu",2017-01-19 22:52:04,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:http://imgur.com/PsunC6e我跑deep learning都只有單核心在運作

cpu只有13%  照理說cpu全開會跑到100%  我跑xgboost都有到100%

所以我是不是有些地方沒調整??


另外 linux 版本的 mxnet  可以使用GPU

所以想請問  顯卡需要買到幾GB?  直衝8gb? 好貴QQ

( 我在做 圖片 mining )

因為未來也會繼續用GPU  想說以後也用 deep learning 做問題看看

另外  有推薦的廠牌或型號嗎? 謝謝



[程式範例]:

我是參考這篇http://cos.name/2016/04/mxnet-r/去實作 mxnet 的deep learning

model <- mx.model.FeedForward.create(lenet, X=train.array, y=train.y,
                ctx=mx.cpu(), num.round=100, array.batch.size=100,
                learning.rate=0.05, momentum=0.9, wd=0.00001,
                eval.metric=mx.metric.accuracy,
                epoch.end.callback=mx.callback.log.train.metric(100))


--","R_Language"
"1032","M.1484791590.A.94F","clansoda","問題","Readxl on shinyappsio",2017-01-19 10:06:17,NA,NA,"各位好, 我現在想做一個可以上傳excel檔案到shinyappsio的功能

目前我在本地端試驗已經可以使用了, 但是傳到shinyappsio會出現錯誤

我google以後沒有發現類似的錯誤, 大多都是討論readxl不能直接在shiny

上頭使用, 需要做一些變形 想請問是不是因為linux跟我的mac環境不同關係

這是我的server程式碼http://pastebin.com/Nfq3Eb6G這是我的errorhttp://imgur.com/a/dm4w4--","R_Language"
"1033","M.1484748448.A.9FB","menghsuanliu","問題","資料的分組分群操作方式求助",2017-01-18 22:07:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想把一個有時間序列的資料予以分組分群,
想利用SAX(Symbolic Aggregate approXimation)的方法,搭配hierarchical clustering來進行分群...

[程式範例]:

Dataframe
  User      M1  M2  M3  M4  M5  M6  M7  M8  M9  M10  M11  M12
  A          5   7   2   6   7   9   4   4   3    1    5    2
  B          4   3   1   5   5   7   4   5   5    2    4    1
  C          2   3   6   4   8   9   8   1   5    5    7    6
        ....


[環境敘述]:

[關鍵字]:


--","R_Language"
"1034","M.1484721209.A.4B8","Caecilius","問題","For迴圈整理存入新的矩陣",2017-01-18 14:33:27,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
範例如下，我是在網路上抓到海龜的策略，然後因為yahoo資料每天晚上只有隔天的資料
所以希望能每天早上能更新今天的各值，令其存入新的矩陣Sign。
如      ""1513.TW""       ""2014.TW""        ""2344.TW""
x$Min20    ...             ...             ...
x$Max20    ...
x$Min10    ...
x$Max10
x$Min55
x$Max55
N
結果只知道怎麼存一維的資料，要塞其他東西都卡住，麻煩各位大大了。
[程式範例]:
library(quantmod)
library(PerformanceAnalytics)
#.TW/.TWO

symbols <- c(""1513.TW"",""2014.TW"",""2344.TW"")

initDate=""2016-01-01""
getSymbols(symbols, from = initDate)

Sign <- NULL

for(symbol in symbols){
  x=get(symbol)

  x$Min20 <- runMin(x[,grep('Low',colnames(x))], 20)
  x$Max20 <- runMax(x[,grep('High',colnames(x))],20)

  x$Min10 <- runMin(x[,grep('Low',colnames(x))], 10)
  x$Max10 <- runMax(x[,grep('High',colnames(x))],10)

  x$Min55 <- runMin(x[,grep('Low',colnames(x))], 55)
  x$Max55 <- runMax(x[,grep('High',colnames(x))],55)

  x$N <- ATR(x[,c(2,3,4)], n=20, maType=EMA, wilder=TRUE)[,'atr']
  assign(symbol,x)

  #for (i in symbols){
  #  Sign[i] <- tail(x$Min20,1)
  #}    這也只有跑出第一筆的Min20....
}

[環境敘述]:

R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

[關鍵字]:

for 迴圈

--","R_Language"
"1035","M.1484707915.A.A97","memphis","問題","dplyr 根據條件選取不同col的值",2017-01-18 10:51:53,NA,NA,"問題很單純..可是不知道怎麼用dplyr寫

cond1  col1  col2
A      1     5
A      2     6
B      3     7
B      4     8

要的是, cond1=A,res的值=col1, cond1=B,res的值=col2
cond1  col1  col2   res
A      1     5      1
A      2     6      2
B      3     7      7
B      4     8      8


====
試過
mutate(res=replace(res, cond1=='A', col1))
這種寫法是要把NA換成0的時候可以用,
可是今天要換的不是一個單值
所以會出現, number of items to replace is not a multiple of replacement length

so...請教各位大神有沒有什麼寫法
另外, 這個問題我覺得之前應該有人問過
只是不知道這問題的關鍵字是什麼..

--","R_Language"
"1036","M.1484636289.A.690","Neisseria","問題","用 R 呼叫 .dll 或 .so",2017-01-17 14:58:07,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:最近在練習用 Rust 寫 library，輸出給其他高階語言用。目前已經成功從 Python、Ruby 及 PHP 呼叫該 lib，也想試著輸出到 R 看看。有試著讀過 R extension 手冊和 Rcpp 的書，但看不太懂有比較友善的 FFI (foreign function interface) 嗎？如果真的不行，就再回頭啃 R extension 手冊  Orz[程式範例]:無[環境敘述]:主要在 Debian Linux 和 Mac 上撰寫程式，Windows 較少使用[關鍵字]:R extension, Rcpp--","R_Language"
"1037","M.1484411630.A.8D8","f496328mm","問題","R 連接 Python",2017-01-15 00:33:47,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想要用Python裡的套件，R中沒有，跟deep learning有關的

所以我應該完全都使用python做，還是用 R 連 python ?

因為比較不熟python，當然也可以藉這個機會去摸摸看

----------------------------------------------------------

我目前使用，PythonInR，這個packages，已經連上python

可以在 R 中寫一些 python 的指令，所以我資料處理部分，都可以交給R做，

之後建 model ，再 call python 做 deep learning

---------------------------------------------------------

想問問各位這樣如何，或是有其他，連python比較推薦的packages

比較擔心這樣使用python，會被 R 拖累速度，

因為 R 速度差python蠻多的，又是單核心運算

我要做 deep learning ，很需要 python 的速度

----------------------------------------------------------

我有找到wush978大的，Rython，https://github.com/wush978/Rython只是我裝不了，

install_github(""wush978/Rython"") 有 error，

謝謝

ps : 我是 windows


[關鍵字]:

PythonInR


--","R_Language"
"1038","M.1484217423.A.5B8","celestialgod","問題","Re: list問題",2017-01-12 18:36:57,NA,NA,"※ 引述《aa955260 (aa955260)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好，我的資料集內有多個人(sub.list)，每個人下面有3種不同狀態(stat.list): ，每種狀態下有3種不同的狀況(level.list)，目前我是用for-loop來分別讀取2維的: data.frame(A, B, C)，我想做的是用Scal.list將3種不同level.list的資料與名稱包起: 來，再用All.list把3種不同stat.list的資料與名稱包起來，做成1個大的All.list。以: 下為錯誤範例，請問我該怎麼修改會比較好呢？或是有沒有其他更好的寫法呢？: 感謝: [程式範例]:: sub.list <- list(""001"", ""002"", ""003""): stat.list <- list(""High"", ""Low"", ""None""): level.list <- list(""Light"", ""Moderate"", ""Vigorous""): Scal.list <- list(): All.list <- list(): for(i in 1:length(sub.list)){:         for(j in 1:length(stat.list)){:                 A_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]:                                  ,""\\"", level.list[1], "".csv""):                 A <- fread(A_path, header = T):                 B_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]:                                  , ""\\"", level.list[2], "".csv""):                 B <- fread(B_path , header = T):                 C_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]:                                  , ""\\"", level.list[3], "".csv""):                 C <- fread(C_path, header = T):                 t.list <- list():                 t.list <- list(A, B, C):                 names(t.list)[1] <- level.list[1]:                 names(t.list)[2] <- level.list[2]:                 names(t.list)[3] <- level.list[3]:                 Scal.list[[length(Scal.list)+1]] <- t.list:         }:         All.list[[length(All.list)+1]] <- Scal.list: }: [環境敘述]:: R version 3.3.2 (2016-10-31): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: loaded via a namespace (and not attached):: [1] tools_3.3.2: [關鍵字]::: 多層list、多層迴圈讀檔:

library(data.table)
subVec <- c(""001"", ""002"", ""003"")
statVec <- c(""High"", ""Low"", ""None"")
levelVec <- c(""Light"", ""Moderate"", ""Vigorous"")

# data.frame做法
DF <- expand.grid(sub = subVec, stat = statVec, level = levelVec)
DF <- transform(DF, path = paste0(dataPath, ""/"", sub, ""/"", stat,
                                  ""/"", level, "".csv""))
# data.table做法
DT <- CJ(sub = subVec, stat = statVec, level = levelVec)
DT[ , path := paste0(dataPath, ""/"", sub, ""/"", stat, ""/"", level, "".csv"")]

# 讀檔
sapply(DT$path, fread, header = TRUE)


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1039","M.1484154188.A.632","aa955260","問題","list問題",2017-01-12 01:03:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大好，我的資料集內有多個人(sub.list)，每個人下面有3種不同狀態(stat.list)
，每種狀態下有3種不同的狀況(level.list)，目前我是用for-loop來分別讀取2維的
data.frame(A, B, C)，我想做的是用Scal.list將3種不同level.list的資料與名稱包起
來，再用All.list把3種不同stat.list的資料與名稱包起來，做成1個大的All.list。以
下為錯誤範例，請問我該怎麼修改會比較好呢？或是有沒有其他更好的寫法呢？

感謝


[程式範例]:

sub.list <- list(""001"", ""002"", ""003"")
stat.list <- list(""High"", ""Low"", ""None"")
level.list <- list(""Light"", ""Moderate"", ""Vigorous"")

Scal.list <- list()
All.list <- list()

for(i in 1:length(sub.list)){
        for(j in 1:length(stat.list)){
                A_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]
                                 ,""\\"", level.list[1], "".csv"")
                A <- fread(A_path, header = T)

                B_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]
                                 , ""\\"", level.list[2], "".csv"")
                B <- fread(B_path , header = T)

                C_path <- paste0(data.path, sub.list[i], ""\\"", stat.list[j]
                                 , ""\\"", level.list[3], "".csv"")
                C <- fread(C_path, header = T)

                t.list <- list()
                t.list <- list(A, B, C)
                names(t.list)[1] <- level.list[1]
                names(t.list)[2] <- level.list[2]
                names(t.list)[3] <- level.list[3]

                Scal.list[[length(Scal.list)+1]] <- t.list
        }
        All.list[[length(All.list)+1]] <- Scal.list
}

[環境敘述]:

R version 3.3.2 (2016-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.2


[關鍵字]:多層list、多層迴圈讀檔--","R_Language"
"1040","M.1484131319.A.BFD","rlearner","問題","R+hadoop安裝問題(附影片)",2017-01-11 18:41:54,NA,NA,"[目的]=================================================================
在ubuntu16上安裝R和hadoop環境
並用rhdfs和rmr2執行簡單範例

[問題]=================================================================
(問題1):在library(rmr2)時會出現錯誤訊息:
Please review your hadoop settings. See help(hadoop.settings)

(問題2):library(rhdfs)後
init.hdfs()出現錯誤訊息:
17/01/11 17:20:17 WARN util.NativeCodeLoader:
Unable to load native-hadoop
library for your platform...

using builtin-java classes where applicable

猜或許是hadoop streaming設置錯了??
[安裝過程]=================================================================
啟動hadoop
cd ~/hadoop && sbin/start-all.sh
-----------------------------------------------------------------------------
裝r在master就好
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install r-base
java 設訂-----------------------------------------------------------
echo $JAVA_HOME
sudo JAVA_HOME=/usr/lib/jvm/jdk/ R CMD javareconf
in the R-------------------------------------------------------------
進入R
sudo R

install.packages(c(""codetools"",""R"",""Rcpp"",""RJSONIO"",""bitops"",""digest"",""functional"",""stringr"",""plyr"",""reshape2"",""rJava"",""caTools""))
下載rmr(用於mapreduce 和 rhabse)
wget --no-check-certificatehttps://raw.github.com/RevolutionAnalytics/rmr2/3.3.0/build/rmr2_3.3.0.tar.gzwget --no-check-certificatehttps://raw.github.com/RevolutionAnalytics/rhdfs/master/build/rhdfs_1.0.8.tar.gz在R中
---------------------------------------------------------------------------------------
$sudo R
install.packages(""/home/hduser/rhdfs_1.0.8.tar.gz"", repos=NULL, type=""source"")
install.packages(""/home/hduser/rmr2_3.3.0.tar.gz"", repos = NULL,
type=""source"")
安裝影片如下:https://www.youtube.com/watch?v=w70h_u8qoHM&t=680s[路徑設置/網路資料
]=================================================================
參考一些網路資料
都無法決解這問題
發現很多討論都跟HADOOP_STREAMING路徑設置有關@@

@資料一http://stackoverflow.com/questions/29682432/r-mapreduce-library-rmr2-shows-a-warning-message-when-loaded這篇提到要在R中重設Sys.setenv的路徑跟我完全不一樣
感覺也不是我的問題
@資料二https://github.com/RevolutionAnalytics/RHadoop/issues/122這篇還沒開始看,英文好吃力
@資料三https://github.com/RevolutionAnalytics/rmr2/issues/155這篇跟我的問題非常像,但我還是看不太懂,而他設的路徑也跟我不一樣@@
>small.ints = to.dfs(1:10)
>mapr = mapreduce(input = small.ints,
                 map = function(k,v) cbind(v,v^2))
會有
Streaming Command Failed!
Error in ...
hadoop streaming failed with error code 5
不知是什麼意思>""<
以下是我設的路徑:
Sys.setenv(HADOOP_HOME=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_PREFIX=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_CMD=""/home/hduser/hadoop/bin/hadoop"")

Sys.setenv(HADOOP_STREAMING=""/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar"")

不知是哪錯的...
在hadoop/logs也看不太懂錯誤是什麼QAQ
希望大大們幫看一下我HADOOP_STREAMING設置是否有錯?或怎麼看錯誤
或是哪出錯了>""<





--","R_Language"
"1041","M.1484120657.A.C55","rlearner","問題","Re: plot出date-time資料整理",2017-01-11 15:44:15,NA,NA,"※ 引述《rlearner (rlearner)》之銘言：: [目的]--------------------------------------------: 在ubuntu 環境上取用Mysql資料: 並使用shiny server 去plot呈現折線圖: (之所以會用plot是因為shiny server無法library(ggplot2)): [問題]--------------------------------------------: 我從mysql取得的資料: 如下url:: http://140.128.197.58:3838/sample-apps/rmysql2/: 的下面的表格: plot-xy圖中: x軸是time: y軸是PM2.5: 該資料有兩個欄位都是時間: 不知可否吧: Date和time 合拼: 或不用合拼,只要讓x是照時間順序plot出pm2.5就行: [code]--------------------------------------------: 以下是在server.R的code,用shiny 執行: library(DBI): library(RMySQL): conn <- dbConnect(MySQL(), host=""localhost"", dbname=""Airbox"",: username = ""root"", password = ""[password]""): #成功連上數據庫: ES = dbGetQuery(conn, ""select * from data_school where site='ES'""): plot(ES$time, ES$PM2.5, type=""l""): [錯訊訊息]--------------------------------------------: (chrom訊息): Error:An error has occurred. Check your logs or contact the app: suthor for clarification.: (按F12 Console): Wed Jan 04 2017 01:31:16 GMT+0800 (台北標準時間): [DBG]: 3 message(s) discarded from buffer: 希望大神,有什麼方法可整理資料??: @@自己發現可以用paste先合拼,
再用strptime轉成tmd格式
方法如下:
#step1:從資料庫中讀取
library(DBI)
library(RMySQL)
conn <- dbConnect(MySQL(), host=""localhost"", dbname=""Airbox"", username =
""root"", password = ""air123"")
data = dbGetQuery(conn, ""select * from data_school"")
head(data)
資料格式如下:
Site       Date     Time  PM2.5   PM10
1   ES 2016-03-26 13:59:00 13.940 20.094
2   ES 2016-03-26 14:04:00 13.833 19.061
3   ES 2016-03-26 14:09:00 15.548 19.548
4   ES 2016-03-27 14:14:00 17.410 20.199
5   ES 2016-03-27 14:19:00 19.566 21.706
6   ES 2016-03-27 14:24:00 19.909 20.104
------------------------------------------------------
#step2:用paste strptime合拼、轉換成tm格式
date_time <- paste(data$Date,data$Time)
d_t <- strptime(date_time , ""%Y-%m-%d %H:%M:%S"")#strptime中:%Y西元年,%m(數字)月份,%d日期,%H(24小時制)小時,%M分,$S秒
#另外""-""和"":""以合拼資料格式為主

#step3:plot出來
plot(d_t , data$PM2.5,type='l')

跟大家分享


--","R_Language"
"1042","M.1484106227.A.28D","clsmbstu","問題","在SVM取得分類界線（decision boundary）",2017-01-11 11:43:45,NA,NA,"[問題類型]:
程式諮詢(我想用R做某件事情，但是我不知道要怎麼用R寫出來)

[軟體熟悉度]:
使用者(已經有用R做過不少作品)

[問題敘述]:
我有一個類別變數，有四個levels，
表達該列的受試者為年輕或老年、男性或女性。（YM、YF、OM、OF）
另有六個從0到8的測驗九點量表分數（可以想成是同一個測驗裡的不同題）。

我想達到的目的是讓SVM學習如何分辨這四個群體的表現，
進而告訴我這四個群體的差別（decision boundary）在哪。
更精確地說，我希望有個東西可以量化這四個群組的表現，
例如老年男性在這六題較其它三組給出較高的分數，
老年女性只在第一題稍高但其他都偏低，等等。

原本MANOVA再做事後分析應該就能解決這個問題，
但是六題每一題的分數在受試者間給出的都不是常態分佈，
所以目前嘗試用SVM解決...
或是大家有更好的辦法嗎？

gamma和cost的選擇已經調整過，選擇表現最佳者，
cross-validation也有做，
機器學習的結果已經確認是有效的，但我即使用str去看做出來的模型，
還是不知道decision boundary放在哪裡。

[程式範例]:
svm.model <- svm(Subject_AgeSex ~ X1 + X2 + X3 + X4 + X5 + X6,
                 data = train.data,
                 scale = FALSE, cost = 64, gamma = 0.05, cross = 10)

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X El Capitan 10.11.6

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ggplot2_2.2.0 e1071_1.6-7

loaded via a namespace (and not attached):
 [1] colorspace_1.3-2 scales_0.4.1     assertthat_0.1   lazyeval_0.2.0
 [5] plyr_1.8.4       class_7.3-14     tools_3.3.2      gtable_0.2.0
 [9] tibble_1.2       Rcpp_0.12.8      grid_3.3.2       munsell_0.4.3

[關鍵字]:
SVM

--","R_Language"
"1043","M.1484035666.A.0DC","f496328mm","問題","Re: boot函數和optim函數搭配使用的問題",2017-01-10 16:07:43,NA,NA,"※ 引述《phil5566 (5566)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手: [問題敘述]:: 就是關於在R上用bootstrap這個統計方法時,: 我會用boot這個function,而這個boot(),: 括弧裡我只要給: 1.T(假設T是data所形成的矩陣資料形式),: 2.statistic(是自己定義的一個函數,用來計算原始dataT,bootstrapp後的資料,所要計算: 出統計量的數學式子): 3.R (要bootstrap的次數): 假設上述的第2點statistic的部分: 我是自己定義一個函數叫""theta.boot"",: 這個函數運算過程會使用到optim()這個function,: 但optim()運算出的結果會有""$par""和""$convergence""的這兩部分: 我希望convergence=0的情形時,此時$par的解才是我想要的: 簡單說就是我希望算出的解""要收斂"": ...................問題來了........................,: 每bootstrap一次,當下那一次bootstrap過後的data是固定的,代入theta.boot運算,: 由於給optim()設的初始值也是固定的,所以算出最後的解也是固定的,: 然而這個解可能是收斂也可能不收斂,又我設定bootstrap1000次,: 勢必這1000個解中有收斂也有沒收斂的,我希望要有1000個收斂解,要怎麼做到?: 在程式範例中附上code: 求各位大大 高手 先進 解答~感激不盡~: [程式範例]:: http://codepad.org/ongXCSxq: [環境敘述]:: win7,: R x64 3.3.1,: ""boot""package: [關鍵字]:: boot,optim你試試看這個  optimx

optimx(par, fn, gr=NULL, hess=NULL, lower=-Inf, upper=Inf,
            method=c(""Nelder-Mead"",""BFGS""), itnmax=NULL, hessian=FALSE,
            control=list(),
             ...)

optim(par, fn, gr = NULL, ...,
      method = c(""Nelder-Mead"", ""BFGS"", ""CG"", ""L-BFGS-B"", ""SANN"",
                 ""Brent""),
      lower = -Inf, upper = Inf,
      control = list(), hessian = FALSE)


看起來是一樣的

不過 optimx 有itnmax，你可以調最大迭代次數，調到你能收斂為止，

給他500 or 5000看看，

如果還是不行收斂，可能就要調整抽樣比例，或是你的data or model有問題


如果不收斂的情況下，結果差異不大，那其實就不太需要conv了

---------------------------------------------------------------

最簡單的方法就是，你做2000次，取1000次有收斂的結果，

不過這有沒有問題，就不清楚了，這樣做其實並不算單純的抽樣，

這樣做，等於是把不好的抽樣結果捨棄，如果是寫文章，要稍微提一下


--","R_Language"
"1044","M.1483978448.A.5A4","phil5566","問題","boot函數和optim函數搭配使用的問題",2017-01-10 00:14:04,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手

[問題敘述]:

就是關於在R上用bootstrap這個統計方法時,

我會用boot這個function,而這個boot(),

括弧裡我只要給

1.T(假設T是data所形成的矩陣資料形式),

2.statistic(是自己定義的一個函數,用來計算原始dataT,bootstrapp後的資料,所要計算
出統計量的數學式子)

3.R (要bootstrap的次數)



假設上述的第2點statistic的部分

我是自己定義一個函數叫""theta.boot"",

這個函數運算過程會使用到optim()這個function,

但optim()運算出的結果會有""$par""和""$convergence""的這兩部分

我希望convergence=0的情形時,此時$par的解才是我想要的

簡單說就是我希望算出的解""要收斂""

...................問題來了........................,

每bootstrap一次,當下那一次bootstrap過後的data是固定的,代入theta.boot運算,

由於給optim()設的初始值也是固定的,所以算出最後的解也是固定的,

然而這個解可能是收斂也可能不收斂,又我設定bootstrap1000次,

勢必這1000個解中有收斂也有沒收斂的,我希望要有1000個收斂解,要怎麼做到?

在程式範例中附上code

求各位大大 高手 先進 解答~感激不盡~


[程式範例]:http://codepad.org/ongXCSxq[環境敘述]:

win7,

R x64 3.3.1,

""boot""package

[關鍵字]:

boot,optim





--","R_Language"
"1045","M.1483962738.A.506","hirdaramani","問題","爬蟲請教",2017-01-09 19:52:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手[問題敘述]:想爬網頁上的淨值部分[程式範例]:主要是我透過SelectorGadget 去讀網頁裡面的html但是無法成功，想請教各位先進是哪裡要調整。library(rvest)library(dplyr)fburl <- ""https://goo.gl/P6bNVs""out <- read_html(fburl) %>% html_nodes("".FsitScriptTableTd:nth-child(4)"") %>%
html_text()http://imgur.com/a/ETYKQ另外一個網址是透過證交所網頁，但是也是一樣的問題

tseurl <- ""http://mis.twse.com.tw/stock/etf_nav.jsp?ex=tse""out <- read_html(fburl) %>%html_nodes(""td:nth-child(5)"") %>% html_text()
outhttp://imgur.com/a/YWImj雖然很粗淺但是我還是有些疑問~
用這套去爬一些簡單的網頁都還過得去

雖然目前遇到中文仍有亂碼問題，但是爬數字的話中文可以先暫且拋棄~
若先進願意教學編碼問題也非常感謝

不好意思麻煩大家


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤> sessionInfo()R version 3.3.1 (2016-06-21)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 7 (build 7601) Service Pack 1
[關鍵字]:
rvest 爬蟲選擇性，也許未來有用--","R_Language"
"1046","M.1483909428.A.B77","greatjus","問題","不斷將矩陣擴充的辦法",2017-01-09 05:03:46,NA,NA,"又來麻煩這個版的高手了，深感抱歉

目前的問題：

我有一個矩陣，始終都只會有12列
一開始只有第一行的值作為起始值，爾後
我每次會將前一行的值經過一個apply的方程式
再度生成新的12個值。

想請問：

有沒有能夠避免使用rbind，卻又能夠不停的把新的12個值放入矩陣的下一行方法。

請問高手們有什麼推薦的方程式嗎?

(不使用rbind，是因為同樣的事情
我可能會重複做20萬次甚至到80萬次以上，使用bind 筆電好像會爆炸)


PS：這個步驟其實就是在做 MCMC：metropolis

--","R_Language"
"1047","M.1483769153.A.062","f496328mm","問題","Re: 迴圈中的變數名稱",2017-01-07 14:05:51,NA,NA,"※ 引述《tim800108 (小政)》之銘言：: 小弟現在遇到的問題是: 我希望寫一個迴圈 能讀取多個檔案: 目前想到的方法是使用FOR迴圈如下: for (i in seq(1, 10, 1)):   {:     all_name=sub(""&"",replacement=j,use_name):     A=read.table(file=all_name, fill = TRUE , header = FALSE ):   }: 再存入檔案的名稱的部分我可以用一個字串變數all_name的方式來處理: 但是我要送到的變數A 我卻一直想不到方法可以使它隨著i變動: 這樣會變成後面的匯入data會蓋掉前面的: 請問版上的各位高手可有解決的辦法 感激不盡: P.S. 我有想過把A變成一個存資料的矩陣然後每一個位置都存一組data: 但我也查不到類似的語法: [軟體熟悉度]: 新手(有一點其他程式的基礎 但對R的語法不熟)read.data.fun = function(i){
            #是 i 還是 j ?  我看你 for 用 i , 但是下面是 j
            all_name=sub(""&"",replacement=j,use_name)
            A=read.table(file=all_name, fill = TRUE , header = FALSE )

                return( list( A ) )
        }

        data = sapply( c(1:10) , function(x) read.data.fun(x) )


試試看，應該是沒問題

--","R_Language"
"1048","M.1483734512.A.4C4","tim800108","問題","迴圈中的變數名稱",2017-01-07 04:28:30,NA,NA,"小弟現在遇到的問題是

我希望寫一個迴圈 能讀取多個檔案

目前想到的方法是使用FOR迴圈如下

for (i in seq(1, 10, 1))
  {

    all_name=sub(""&"",replacement=j,use_name)
    A=read.table(file=all_name, fill = TRUE , header = FALSE )
  }

再存入檔案的名稱的部分我可以用一個字串變數all_name的方式來處理

但是我要送到的變數A 我卻一直想不到方法可以使它隨著i變動

這樣會變成後面的匯入data會蓋掉前面的

請問版上的各位高手可有解決的辦法 感激不盡

P.S. 我有想過把A變成一個存資料的矩陣然後每一個位置都存一組data

但我也查不到類似的語法

[軟體熟悉度]

新手(有一點其他程式的基礎 但對R的語法不熟)


--","R_Language"
"1049","M.1483686942.A.D86","celestialgod","問題","Re: 想用R篩選出每一欄都有值的筆數",2017-01-06 15:15:40,NA,NA,"※ 引述《menghsuanliu (庫庫少)》之銘言：: [問題類型]: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有一個data frame 有160筆資料，有100個欄位，有些有值，有些值是0(這些值都是數: 字型熊): 我想找出那些100個欄位都有值(>0)的筆數，我想對這些都有值的筆數進行其他的分析: 請問有什么方式可以快速挑出符合我需求的資料？: [程式範例]:: [環境敘述]:: [關鍵字]:data.table的作法滿tricky的，看你要不要學

我是覺得apply效率沒差太多之下，兩個隨便用都可以

library(data.table)
library(pipeR)

# data generation
numRows <- 1e5L
DT <- data.table(
  matrix(rnorm(numRows * 100), numRows),
  matrix(sample(LETTERS, numRows * 10, TRUE), numRows)
) %>>% setnames(paste0(""V"", 1L:110L))

for (i in 1L:100L) {
  locNA <- sample(nrow(DT), 100L)
  set(DT, locNA, i, NA)
  locZero <- sample(which(!is.na(DT[[i]])), 100L)
  set(DT, locZero, i, NA)
}

# check
DT[ , lapply(.SD, function(x) sum(is.na(x) | x == 0)), .SDcols = V1:V100]
#    V1 V2 V3 V4 V5 V6 V7 V8 V9 V10 V11 V12 V13 V14 V15 V16 V17 V18  ...
# 1: 40 40 40 40 40 40 40 40 40  40  40  40  40  40  40  40  40  40  ...

# method 1
system.time({
  numericColNames <- colnames(DT)[which(sapply(DT, is.numeric))]
  expr <- paste0(paste0(paste0(""is.na("", numericColNames, "")""),
                               collapse = ""|""), ""|"",
                 paste0(paste0(numericColNames, ""==0""), collapse = ""|""))
  DT2 <- DT[ , removeCol := eval(parse(text = expr))] %>>%
    `[`(removeCol == FALSE) %>>% `[`(j = removeCol := NULL)
})
#   user  system elapsed
#   0.12    0.03    0.15

# method 2
system.time({
  numericColNames <- colnames(DT)[which(sapply(DT, is.numeric))]
  expr <- paste0(paste0(paste0(numericColNames, ""==0""), collapse = ""|""))
  DT2 <- DT[ , removeCol := eval(parse(text = expr))] %>>% na.omit %>>%
    `[`(removeCol == FALSE) %>>% `[`(j = removeCol := NULL)
})
#   user  system elapsed
#   0.16    0.09    0.14

# method 3
DT[ , removeCol := NULL]
system.time({
  removeIdx <- DT[ , numericColNames, with = FALSE] %>>% as.matrix %>>%
    apply(1, function(x) !is.na(all(x | x != 0)))
  DT3 <- DT[removeIdx, ]
})
#   user  system elapsed
#   0.67    0.03    0.70

all.equal(DT2, DT3) # TRUE

--","R_Language"
"1050","M.1483625035.A.B0E","menghsuanliu","問題","想用R篩選出每一欄都有值的筆數",2017-01-05 22:03:53,NA,NA,"[問題類型]程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R)


[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我有一個data frame 有160筆資料，有100個欄位，有些有值，有些值是0(這些值都是數
字型熊)
我想找出那些100個欄位都有值(>0)的筆數，我想對這些都有值的筆數進行其他的分析
請問有什么方式可以快速挑出符合我需求的資料？

[程式範例]:


[環境敘述]:


[關鍵字]:

--","R_Language"
"1051","M.1483614805.A.444","tpujp159357","問題","histogram如何更改座標軸",2017-01-05 19:13:23,NA,NA,"[問題類型]:
如下圖，我想利用這筆資料做月份跟路殺數量的關係，請問畫出來的histogram如何更改座標軸？http://i.imgur.com/rPgvlh9.jpg[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
s
[問題敘述]:
如下圖，我想把座標軸上的數字移至每條長方形的中間，並改成月份的英文縮寫，試過axis但是不行http://i.imgur.com/uey7CrH.jpg[程式範例]:
library(mosaic)
setwd(""位址省略"")
data=read.csv(""Load Kill Data"")
attach(data)
histogram(~月份,type=""count"",breaks=seq(1,12,by=1)

[環境敘述]:

打sessionlnfo()他說沒有這個函數QQ
R x64. 3.3.2 lnk
作業系統是Windows7
s

[關鍵字]:
histogram 座標軸

拜託大家幫忙了QQ 謝謝

-----
Sent from JPTT on my Asus ASUS_Z00AD.

--","R_Language"
"1052","M.1483546115.A.455","f496328mm","問題","HOG 轉換後的繪圖",2017-01-05 00:08:33,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想要分析圖片，因為X變數太多，所以想利用HOG降維，

我想要看到我降維後的圖片，

想問R可以做到這種程度的繪圖嗎? RPG 三種變量 去繪圖

我目前圖片是 480*640*3  480*640是圖片大小  3是RGB

或是我該用 PYTHON ?http://web.mit.edu/vondrick/ihog/就像上面連結的圖片，不過他是用 matlab 做的，想知道R做不做得到

謝謝

[程式範例]:

        # 讀檔
        x =     readJPEG(name.jpg)
        # HOG 轉換
        x2 = ( t( HOG( x, cells = 10, orientations = 10 ) ) )


[關鍵字]:

HOG


--","R_Language"
"1053","M.1483464878.A.63F","rlearner","問題","plot出date-time資料整理",2017-01-04 01:34:35,NA,NA,"[目的]--------------------------------------------
在ubuntu 環境上取用Mysql資料
並使用shiny server 去plot呈現折線圖
(之所以會用plot是因為shiny server無法library(ggplot2))

[問題]--------------------------------------------
我從mysql取得的資料
如下url:http://140.128.197.58:3838/sample-apps/rmysql2/的下面的表格

plot-xy圖中
x軸是time
y軸是PM2.5

該資料有兩個欄位都是時間

不知可否吧
Date和time 合拼
或不用合拼,只要讓x是照時間順序plot出pm2.5就行

[code]--------------------------------------------
以下是在server.R的code,用shiny 執行
library(DBI)
library(RMySQL)
conn <- dbConnect(MySQL(), host=""localhost"", dbname=""Airbox"",
username = ""root"", password = ""[password]"")
#成功連上數據庫

ES = dbGetQuery(conn, ""select * from data_school where site='ES'"")
plot(ES$time, ES$PM2.5, type=""l"")

[錯訊訊息]--------------------------------------------
(chrom訊息)
Error:An error has occurred. Check your logs or contact the app
suthor for clarification.
(按F12 Console)
Wed Jan 04 2017 01:31:16 GMT+0800 (台北標準時間)
[DBG]: 3 message(s) discarded from buffer


希望大神,有什麼方法可整理資料??
@@

--","R_Language"
"1054","M.1483450731.A.BE5","Grotesque41J","情報","Re: DataCamp: Learn R & Become a Data Anal",2017-01-03 21:38:48,NA,NA,":         ""Learn by Doing"" 為主的互動式學習網站.:         https://www.datacamp.com/Learn Data Science in 2017 GET 70% OFF FOR A LIMITED TIME

SPECIAL PRICE 90/year

用過免費的部份覺得很值得推薦

目前正在大特價rrrrrrrrrrrrrrrrr (300→90鎂/年)

好想買XDhttps://www.datacamp.com/promo/new-year--","R_Language"
"1055","M.1483356867.A.8B2","criky","問題","Re: 調整／新增變數數量",2017-01-02 19:34:24,NA,NA,"※ 引述《bedroom0204 (khkh)》之銘言：:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我希望可以將1~10人的數據合成呈現，: 每個人都會有sta, dur數據，再計算出r: 我本來是寫死的，也就是：:     r1=trunc(r*(dur01/org)+sta01):     r2=trunc(r*(dur02/org)+sta02):     r3=trunc(r*(dur03/org)+sta03): 但如果我要將1~10人(subjects)作為一個變數，: 能否用for迴圈產生這些句子呢？還是要用其他手法？: 也就是當subjects=1，r1=trunc(r*(dur01/org)+sta01):         subjects=5，r1=trunc(r*(dur01/org)+sta01):                     r2=trunc(r*(dur02/org)+sta02):                     r3=trunc(r*(dur03/org)+sta03):                     r4=trunc(r*(dur04/org)+sta04):                     r5=trunc(r*(dur05/org)+sta05)練習寫一下，很初階的寫法，不知道是不是你要的~

library(data.table)
dt_r<-data.table(dur=1:10,sta=11:20)
r<-1
org<-1
k<-0
rn<-data.table(subject=1:55,n=1:55,rn=1:55)
for(i in 1:10){
  for(j in 1:i){
    k=k+1
    rn$subject[k]=i
    rn$n[k]=j
    rn$rn[k]=with(dt_r,trunc(r*(dur[j]/org+sta[j])))
  }
}

rn
    subject  n rn
 1:       1  1 12
 2:       2  1 12
 3:       2  2 14
 4:       3  1 12
 5:       3  2 14
 6:       3  3 16
 7:       4  1 12
 8:       4  2 14
 9:       4  3 16
10:       4  4 18
11:       5  1 12
12:       5  2 14
13:       5  3 16
14:       5  4 18
15:       5  5 20
16:       6  1 12
17:       6  2 14
18:       6  3 16
19:       6  4 18
20:       6  5 20
21:       6  6 22
22:       7  1 12
23:       7  2 14
24:       7  3 16
25:       7  4 18
26:       7  5 20
27:       7  6 22
28:       7  7 24
29:       8  1 12
30:       8  2 14
31:       8  3 16
32:       8  4 18
33:       8  5 20
34:       8  6 22
35:       8  7 24
36:       8  8 26
37:       9  1 12
38:       9  2 14
39:       9  3 16
40:       9  4 18
41:       9  5 20
42:       9  6 22
43:       9  7 24
44:       9  8 26
45:       9  9 28
46:      10  1 12
47:      10  2 14
48:      10  3 16
49:      10  4 18
50:      10  5 20
51:      10  6 22
52:      10  7 24
53:      10  8 26
54:      10  9 28
55:      10 10 30
    subject  n rn

改用matrix寫
dt_r.m<-matrix(1:20,10,2)
r<-1
org<-1
rn1<-rep(1:10,1:10)
tmp = rle(rn1)
rn2<-do.call(c, sapply(tmp$lengths, function(x) 1:x))
rn.m<-matrix(cbind(rn1,rn2),55,2)
rn.m1<-cbind(rn.m,trunc(r*(dt_r.m[rn.m[,2],1]/org+dt_r.m[rn.m[,2],2])))

rn.m1
      [,1] [,2] [,3]
 [1,]    1    1   12
 [2,]    2    1   12
 [3,]    2    2   14
 [4,]    3    1   12
 [5,]    3    2   14
 [6,]    3    3   16
 [7,]    4    1   12
 [8,]    4    2   14
 [9,]    4    3   16
[10,]    4    4   18
[11,]    5    1   12
[12,]    5    2   14
[13,]    5    3   16
[14,]    5    4   18
[15,]    5    5   20
[16,]    6    1   12
[17,]    6    2   14
[18,]    6    3   16
[19,]    6    4   18
[20,]    6    5   20
[21,]    6    6   22
[22,]    7    1   12
[23,]    7    2   14
[24,]    7    3   16
[25,]    7    4   18
[26,]    7    5   20
[27,]    7    6   22
[28,]    7    7   24
[29,]    8    1   12
[30,]    8    2   14
[31,]    8    3   16
[32,]    8    4   18
[33,]    8    5   20
[34,]    8    6   22
[35,]    8    7   24
[36,]    8    8   26
[37,]    9    1   12
[38,]    9    2   14
[39,]    9    3   16
[40,]    9    4   18
[41,]    9    5   20
[42,]    9    6   22
[43,]    9    7   24
[44,]    9    8   26
[45,]    9    9   28
[46,]   10    1   12
[47,]   10    2   14
[48,]   10    3   16
[49,]   10    4   18
[50,]   10    5   20
[51,]   10    6   22
[52,]   10    7   24
[53,]   10    8   26
[54,]   10    9   28
[55,]   10   10   30

data.table的set我還是不太會用 orz","R_Language"
"1056","M.1483353328.A.4D4","bedroom0204","問題","調整／新增變數數量",2017-01-02 18:35:23,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我希望可以將1~10人的數據合成呈現，每個人都會有sta, dur數據，再計算出r我本來是寫死的，也就是：r1=trunc(r*(dur01/org)+sta01)r2=trunc(r*(dur02/org)+sta02)r3=trunc(r*(dur03/org)+sta03)但如果我要將1~10人(subjects)作為一個變數，能否用for迴圈產生這些句子呢？還是要用其他手法？也就是當subjects=1，r1=trunc(r*(dur01/org)+sta01)subjects=5，r1=trunc(r*(dur01/org)+sta01)r2=trunc(r*(dur02/org)+sta02)r3=trunc(r*(dur03/org)+sta03)r4=trunc(r*(dur04/org)+sta04)r5=trunc(r*(dur05/org)+sta05)--","R_Language"
"1057","M.1483264582.A.019","f496328mm","問題","linux R有沒有gui介面? 不習慣studio",2017-01-01 17:56:19,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。

[問題類型]:
linux

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在玩 linux ，R studio也裝好了，因為找不到GUI介面QQ，

以前在windows都是用Rgui，script視窗大小都可以自己控制，

在gui，我習慣一次看2~3個script，因為大小拉拉調調就好，

甚至雙視窗，一次可以看到 4 個 script，大小也還可以閱讀，

但是studio，console 和 script，幾乎都綁死，

開多個script，就會擠在上面，

就算雙視窗，一次還是只有一個 script，

console變大也沒什麼用，我只想要適中的大小（我自己調整），


另外，gui字體放大縮小只要　ctrl+滾輪就好 ，



所以想問，有沒有其他的Ｒ編輯器，或是一定要用studio ?

謝謝


--","R_Language"
"1058","M.1483226505.A.DDD","joson4921","問題","列與列計算時間差,結果與預期不同",2017-01-01 07:21:35,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的如標題,我想做的是列與列的時間計算(以本例來說就是找不同車次發車時間間隔)

手邊有一份端點站的發車時間表如下所示
表定6:00~8:00「每隔10~20分不等」(去/返程)對開出一班車
我想要的結果是根據每個車次的發車時間找出一個range,用來判斷實際發車時間應屬哪一
車次
先假設這個range的預期結果是前後車次發車時間的中間值(5/5分配,之後可能會用2/8分)
:


(去/返程)   (表定發車時間)  (車次編號)             　　　(預期結果↓)
Goback   Schedule_DepartTime Bus_No. rid1  qid1   start1     end1  difference
0               06:00             1    1      0    06:00    08:00       -
0               06:20             2    2      1    06:20    06:00     20min
0               06:35             3    3      2    06:35    06:20     15min
0               06:50             4    4      3    06:50    06:35     15min
0               07:00             5    5      4    07:00    06:50     10min
0               07:10             6    6      5    07:10    07:00     10min
0               07:25             7    7      6    07:25    07:10     15min
0               07:40             8    8      7    07:40    07:25     15min
0               08:00             9    9      8    08:00    07:40     20min
1               06:00             1    10     0    ---
1               06:20             2    11     1    ---
1               06:35             3    12     2    ---
1               06:50             4    13     3    --- 因兩端點發車時間相同故
1               07:00             5    14     4    --- Goback=1時之預期結果應
1               07:10             6    15     5    --- 與Goback=0之預期結果相
同
1               07:25             7    16     6    ---
1               07:40             8    17     7    ---
1               08:00             9    18     8    ---


###先新增column ""rid1"" 和 ""qid1"",時間相減時要用


式1　BusScedule_51[, Schedule_DepartTime :=
　　　　　as.POSIXct(strptime(strptime( Schedule_DepartTime, ""%H:%M""))] %>%

式2　Schedule_DepartTime, ""%H:%M""))] %>%
  　　.[ , c(""rid1"",""qid1"") := list( .I, {.I - .I[1L]}), by = .(Goback)]


###用上面2式新增的 ""rid1"" 和 ""qid1"" column跑以下式子,
###但出來的答案跟預期的答案不一樣


式3　BusScedule_51[ , start1 := Schedule_DepartTime[Bus_No.] ]
式4　BusScedule_51[ , end1 := Schedule_DepartTime[-qid1] ]
式5　BusScedule_51[ , difference := start1 - end1 ]


問題：
我知道式4裡面寫 [-qid1] 會抓讓過來的時間資料通通下移,
我想利用這個特性來作時間加減,但 qid1=0 的情況要怎麼處理difference我還沒想到..
總之是拿之前寫的code改,但是出來的結果卻變成下面那樣：
(請注意""---""右邊end1那一排):


(去/返程)   (表定發車時間)  (車次編號)             (預期結果↓)
Goback   Schedule_DepartTime  Bus_No. rid1  qid1   start1     end1  difference
0               06:00             1    1      0     06:00    08:00       -
0               06:20             2    2      1     06:20    06:00     20min
0               06:35             3    3      2     06:35    06:20     15min
0               06:50             4    4      3     06:50    06:35     15min
0               07:00             5    5      4     07:00    06:50     10min
0               07:10             6    6      5     07:10    07:00     10min
0               07:25             7    7      6     07:25    07:10     15min
0               07:40             8    8      7     07:40    07:25     15min
0               08:00             9    9      8     08:00    07:40     20min
1               06:00             1    10     0     ---      08:00
1               06:20             2    11     1     ---      08:00
1               06:35             3    12     2     ---      06:00
1               06:50             4    13     3     ---      06:20
1               07:00             5    14     4     ---      06:35
1               07:10             6    15     5     ---      06:50
1               07:25             7    16     6     ---      07:00
1               07:40             8    17     7     ---      07:10
1               08:00             9    18     8     ---      07:20


如上所示,「資料出現在不該出現的位置」,搞了快2天還是搞不懂到底是哪裡寫錯了
請求板上大大們伸出援手...先謝謝大家orz




[程式範例]:



[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1059","M.1483070344.A.B64","gawyfish","問題","用Ｒ解微分方程係數",2016-12-30 11:59:00,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
中手(寫過程式)


[問題敘述]:http://goo.gl/dqotDI如網頁ＳＡＳ code中 解出ku ke微分方程參數的值
看過deslove包，不過好像不太一樣


--","R_Language"
"1060","M.1483054339.A.CB6","cywhale","問題","Re: sql 指令階層資料整理",2016-12-30 07:32:16,NA,NA,"因為邏輯逆反(前面的值必須仰賴後面的row才知道)，而且特例很多，
似乎很難向量化處理，就是必須做苦工，一行一行去掃

但你的例子中，有些邏輯很怪，我想，有些特例就留給你處理，
我提供一個有點醜，但可以解決大部分情況的例子

程式不會難，可能有其他漂亮的解決方式，但如果你還有更多特例
在你實際的案例中的話，那其實也是沒轍....

所以最重要的是，還是你最熟悉自己案例的人得下去跟這些if..else.. cases磨。
才能建立好這一整套parse流程。

library(data.table)
library(magrittr)
fcon <- file(""D:/R/example/ptt_try_sql.txt"", ""r"")
ftxt <- readLines(fcon)
close(fcon)

## directly copy from your question in ptt web, as input
print(ftxt)

## parse your input
trimx <- function(x) gsub('^\\s+|\\){0,}\\s{0,}\\""{0,}\\s+$','', x)
txt1 <- trimx(ftxt)

sqlcmd <- c(""select"",""insert"",""join"",""delete"",""create"")
sqlio <- c(""from"",""into"",""table"")

rstart <- c(""insert"",""delete"")
rstop  <- c(""select"",""create"")
rinter <- c(""join"")

s1 <- regexpr(paste(sqlcmd,collapse = ""|""), txt1, ignore.case = TRUE)
t1 <- regexpr(paste(sqlio,collapse = ""|""), txt1, ignore.case = TRUE)

## First step, get a command - destination table

sqlt <- data.table(cmd=trimx(substr(x=txt1, start=s1,
stop=s1+attributes(s1)$match.length-1)),
                   tbl=trimx(substr(x=txt1,
start=t1+attributes(t1)$match.length, stop=ifelse(t1==-1,-1,nchar(txt1)))))

## Second step, one-by-one line to scan and handle if..else cases

gcnt <- 0L
ccnt <- 0L
clv  <- 0L
tmpo <- data.table(lv=0L, obj=NA_character_, dep=NA_character_, grp=0L,
idcnt=0L)
out  <- data.table(lv=integer(), obj=character(), dep=character(),
grp=integer(), idcnt=integer())
flag <- 0L
pend <- 0L
for (i in 1:nrow(sqlt)) {
  if (sqlt$cmd[i] %in% rstart) {
    if (flag==0L) {
      flag <- 1L
      ccnt <- ccnt+1L
    } else {
      ccnt <- 1L
      clv <- 0L
    }
    gcnt <- gcnt+1L
    cobj <- sqlt$tbl[i]
    tmpo[1,`:=`(lv=clv,obj=cobj,dep=NA_character_,grp=gcnt,idcnt=ccnt)]
    out <- rbind(out,tmpo)
    clv <- clv+1L
    pend<- 0L
    next
  } else if (sqlt$cmd[i] %in% rinter) {
    if (flag==0L) {
      flag <- 1L
      ccnt <- out[nrow(out)]$idcnt
      gcnt <- out[nrow(out)]$grp
      clv  <- out[nrow(out)]$lv + pend
      cobj <- out[nrow(out)]$obj
    } else {
      ccnt <- ccnt+1L
    }
    if (pend==0L) {
      tmpo[1,`:=`(lv=clv,obj=cobj,dep=NA_character_,grp=gcnt,idcnt=ccnt)]
      out <- rbind(out,tmpo)
    }
    pend<- 0L
    next
  } else if (sqlt$cmd[i] %in% rstop) {
    if (!is.na(sqlt$tbl[i]) & sqlt$tbl[i]!="""") {
      ccnt <- ccnt+1L
      cobj <- sqlt$tbl[i]
      if (gcnt==0 | flag==0L) {gcnt<- gcnt+1}
      tmpo[1,`:=`(lv=clv,obj=cobj,dep=NA_character_,grp=gcnt,idcnt=ccnt)]
      out <- rbind(out,tmpo)
      ccnt <- 0L
      clv  <-0L
      cobj <-NA_character_
      flag <-0L
    } else {
      pend <- 1L
    }
    next
  } else {
    if (!is.na(sqlt$tbl[i]) & sqlt$tbl[i]!="""") {
      cobj <- sqlt$tbl[i]
      if (pend==1L) {
        tmpo[1,`:=`(lv=clv,obj=cobj,dep=NA_character_,grp=gcnt,idcnt=ccnt+1)]
        out <- rbind(out,tmpo)
        ccnt <- 0L
        clv  <- 0L
        cobj <- NA_character_
        flag <- 0L
      }
    } else {
      if (is.na(sqlt$cmd[i]) | sqlt$cmd[i]=="""") {
        ccnt <- ccnt+1L
        tmpo[1,`:=`(lv=clv,obj=cobj,dep=NA_character_,grp=gcnt,idcnt=ccnt)]
        out <- rbind(out,tmpo)
        ccnt <- 0L
        clv <-0L
        cobj<-NA_character_
        flag<-0L
      }
    }
    next
  }
}

## 3rd step: Addtional step to handle LV, DEP...

out[,lv:=max(lv)-lv, by=.(grp)] %>%
  .[,dep:=ifelse(lv==0,NA_character_,shift(obj,type=""lead"")),by=.(grp)]

    lv  obj  dep grp idcnt
 1:  0   t1   NA   1     1
 2:  1   t2   t1   2     1
 3:  0   t1   NA   2     2
 4:  2   t5   t4   3     1
 5:  1   t4   t3   3     2
 6:  0   t3   NA   3     3
 7:  2   t9 t8_1   4     1
 8:  1 t8_1 t8_2   4     2
 9:  0 t8_2   NA   4     3
10:  0  t11   NA   5     1
11:  1  t13  t12   6     1
12:  0  t12   NA   6     2
13:  0 new1   NA   7     1
14:  0  new   NA   8     1
15:  0 new2   NA   9     1

t8_1, t8_2那一段和前面那一段結果不一致，或許需要額外的flag
來處理join前後有兩個不同的table 塞到前面兩個不同的row去

這是很奇怪的特例，但還是可以額外處理...我這邊，就不再改版了
...只能花這麼多時間處理到目前了，抱歉※ 引述《criky (立業成家)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: data如下：:                                                             (to) (from): sql_command            from_t insert_t table_t  想整理成  lv obj  dep: select ... form t1     t1                                 0  t1: -----------------------------------------------: insert into t2                t2                          1  t2  t1: from t1                t1: -----------------------------------------------: insert into t5                t5                          2  t5  t4: select *                                                  1  t4  t3: from t4                t4                                 0  t3: join: (select ... from t3)   t3: -----------------------------------------------: insert into t9                t9                          1  t9  t8_1: select * from                                             1  t9  t8_2: (select ... from t8_1) t8_1                               0  t8_1: join                                                      0  t8_2: (select ... from t8_2) t8_2: ------------------------------------------------: delete from t11        t11                                0  t11: ------------------------------------------------: delete from t13        t13                                1  t13 t12: (select ... from t12)  t12                                0  t12: ------------------------------------------------: create table new1                      new1               1  new1 new: select ... from new    new                                0  new: ------------------------------------------------: create table new2                      new2               0  new2: 想整理成以下資料: obj  dep  lv: t1        0: t1   t2   1: t5   t4   2: t4   t3   1: t3        0: t9   t8_1 1: t9   t8_2 1: t8_1      0: t8_2      0: t11       0: t13  t12  1: t12       0: new1 new  1: new       0: new2      0: 上面範例資料實際是沒有 --------: 是為了閱讀方便所以將資料分組並加上 -------: 有(select..)的話lv會+1: join上下的(select..) table lv 是相同的: 先把問題po上來，: 回家也會再想想怎麼做~: 若有大大願意協助非常感謝!: 回報一下，: 目前還是用EXCEL先做，: 整個流程大致如下：: 1、將sql語法貼到excel A1，用許多欄位取出: select,insert into,delete...關鍵字是否存在: 2、檔案中語法段落間有空行，可編碼成不同group: 3、抓出table名稱，以table數量+考慮join是否存在判斷level: 大致上是這樣做，但事實上仍有許多狀況，: 例如join的上下table是同一個，但篩選的資料不同，: 總之目前還是手工在做整理 QQ: 這種半結構式的data整理起來還真痛苦 QQ: [關鍵字]:: level sql: 選擇性，也許未來有用--","R_Language"
"1061","M.1483015705.A.CF4","jade811213","問題","readSeries()問題",2016-12-29 20:48:23,NA,NA,"csv檔資料如下http://i.imgur.com/c6kZs5c.jpg但使用readSeries出來的日期卻都是一樣的(顯示今天的日期)QQ
readSeries(""D:/data.csv"",header=T,sep="","")http://i.imgur.com/HXk9qgK.jpg請問是我使用錯誤還是少打什麼資訊?
麻煩了謝謝><

--","R_Language"
"1062","M.1483005722.A.930","rlearner","問題","Re: r+hadoop中rmr/rhdfs問題",2016-12-29 18:02:00,NA,NA,"不確定是否正確,但可以library(rmr2)和library(rhdfs)了@@
但卻有新的問題>""<
我重新安裝一次,並且不修改
brashrc、/etc/profile和/etc/envirment三個檔案,
如下:※ 引述《rlearner (rlearner)》之銘言：: [目的]: 在VM上建立三台虛擬機: 並建立rhadoop: 執行簡單的rmr範例: [問題簡敘]=============================================================: 在VM虛擬器上建立hadoop環境建三台機子，: master,node1,node2: 裝好了hadoop(hadoop可以運作）: 但是裝R時遇到了無法library：rmr和rhdfs的問題: 且無法install.packages：rJava套作: 上敘的環境我裝了兩次: 第一次(環境一)不知怎麼的就成功install.packges:: rJava的套,但第二次重裝(環境二)卻怎麼樣也無法成功下載: rJava,若rJava無法，rmr跟rhdfs也用不了了！！: [環境一]((提外話~之前莫明成功???)))=====================================: 怎麼裝有點忘了,但跟第二次差不多: 感覺還是有點問題...(下有影片連結): https://www.youtube.com/watch?v=ByAisA_dQxI&feature=youtu.be: [環境二](!!!!!主要問題!!!!!!現在安裝失敗)))=============================: [安裝步驟]: 以下是我安裝的方法:(文長)(含安裝步驟影片): https://www.youtube.com/watch?v=QTHfV_xYr8A&t=145s: 沒剪輯7:04-14:30可跳過~下載很久@@: 啟動hadoop: cd ~/hadoop && sbin/start-all.sh: ------------------------------------------------以下步驟省略,到""重啟三個檔案""的地方都不用去做: sudo vim .bashrc: sudo vim /etc/environment: sudo vim /etc/profile: 在以上三個檔中新增路徑: export JAVA_HOME=/usr/lib/jvm/jdk/: export HADOOP_CMD=/home/hduser/hadoop/bin/hadoop: export HADOOP_HOME=/home/hduser/hadoop: export: HADOOP_STREAMING=/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar: 重啟三個檔案: . /etc/environment: . /etc/profile: source .bashrc: -----------------------------------------------------------------------------到這裡為止的步驟都省略
以下都一樣: 三個機子都要安裝R(ps R真的只要裝在master就好了~^^): sudo apt-get update: sudo apt-get upgrade: sudo apt-get install r-base: sudo apt-get install r-base r-base-dev: java 設訂------------------: echo $JAVA_HOME: sudo JAVA_HOME=/usr/lib/jvm/jdk/ R CMD javareconf: in the R--------------------: 進入R: sudo R: 這裡有錯誤,無法下載rJava(!!!!!問題所在)(註1): install.packages(c(""codetools"",""R"",""Rcpp"",""RJSONIO"",""bitops"",""digest"",""functional"",""stringr"",""plyr"",""reshape2"",""rJava"",""caTools"")): 下載rmr 和 rhdfs: wget --no-check-certificate: https://raw.github.com/RevolutionAnalytics/rmr2/3.3.0/build/rmr2_3.3.0.tar.gz: wget --no-check-certificate:  https://raw.github.com/RevolutionAnalytics/rhdfs/master/build/rhdfs_1.0.8.tar.gz: 在R中----------------------: 第二次安裝出錯 (註2): install.packages(""/home/hduser/rhdfs_1.0.8.tar.gz"", repos=NULL, type=""source""): install.packages(""/home/hduser/rmr2_2.2.2.tar.gz"", repos = NULL,: type=""source""): Sys.setenv(HADOOP_HOME=""/home/hduser/hadoop""): Sys.setenv(HADOOP_PREFIX=""/home/hduser/hadoop""): Sys.setenv(HADOOP_CMD=""/home/hduser/hadoop/bin/hadoop""): Sys.setenv(HADOOP_STREAMING=""/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar""): Sys.getenv(""HADOOP_CMD""): 後面就不用看了...因為全不行@@: ------------------------------------: 無法下載rJava後,後面步驟都出錯了QQ: [錯誤息訊]=============================================================: (安裝環境二): https://www.youtube.com/watch?v=QTHfV_xYr8A&t=145s: 7:04-14:30可跳過~下載很久@@: (註1)14:30: 在install.packages(c(""codetools"",""R"",""Rcpp"",""rJava""...後失敗,錯誤訊息:: ...waring messages:: 1: package 'R' is not available (for R version 3.2.3): 2: Ln install.packages(c(......)  'rJava' had non-zero exit status: (註2)16:38: install.packages(""/home/hduser/rhdfs_1.0.8.tar.gz"", repos=NULL, type=""source""): install.packages(""/home/hduser/rmr2_2.2.2.tar.gz"", repos = NULL,: type=""source""): 兩個都出現:: would you like to use a personal library instead?: 我只能選y: 懷疑這裡也出了問題: 因為RDM網站有提到library要設定給所有用戶(其實不太懂意思[email<U+00A0>protected]@): http://www.rdatamining.com/big-data/r-hadoop-setup-guide: 在7.1 Install relevant R packages的地方: 原文:: RHadoop packages are dependent on above packages,: which should be installed for all users, instead of in personal library.: ....文長以下略: 但我不知到在install.packages那些套件前: 要怎麼給所有使用者用(這裡的意思應該是三台機子吧@@: [版本]=============================================================: (三台機子都是): ubuntu 16.04.1: hadoop-2.7.3: R 3.2.3: rmr2 3.3.0: rhdfs 1.0.8[重新安裝]
以下為重裝一次,只省略那三個檔案
brashrc、/etc/profile、/etc/envirment
不新增路徑,如下影片https://www.youtube.com/watch?v=w70h_u8qoHM&t=895s[library rmr rhdfs]
新問題
先進入R:
$sudo R
#再輸入路徑
Sys.setenv(HADOOP_HOME=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_PREFIX=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_CMD=""/home/hduser/hadoop/bin/hadoop"")

Sys.setenv(HADOOP_STREAMING=""/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar"")

library(rJava)#沒問題
library(rhdfs)#沒關題
#但在hdfs.init()時出現錯誤訊息

hdfs.init()
#出現unable to load native-hadoop library for your plamform...
using builtin-java classes where applicable

library(rmr2)
#出現要我 review your hadoop setting

#但是以下程式沒問題:
rmr.options(backend = 'local')
small.ints = to.dfs(1:100)
mapr = mapreduce(input = small.ints,
                 map = function(k,v) cbind(v,v^2))
result = from.dfs(mapr)
result
#可是神奇的是關掉另外兩個node一樣能執行
#是不是我的程式並沒有連到另兩台node???
@@
[問題總結]
1.rhdfs啟動hdfs.init()為何無法連><
2.範例程式為什麼關掉node也能執行!!??感覺沒有成功rhadoop

求解QAQ

--","R_Language"
"1063","M.1482913108.A.F96","criky","問題","sql 指令階層資料整理",2016-12-28 16:18:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
data如下：
                                                            (to) (from)
sql_command            from_t insert_t table_t  想整理成  lv obj  dep
select ... form t1     t1                                 0  t1
-----------------------------------------------
insert into t2                t2                          1  t2  t1
select ...
from t1                t1                                 0  t1
-----------------------------------------------
insert into t5                t5                          2  t5  t4
select *                                                  1  t4  t3
from t4                t4                                 0  t3
join
(select ... from t3)   t3
-----------------------------------------------
insert into t9                t9                          1  t9  t8_1
select * from                                             1  t9  t8_2
(select ... from t8_1) t8_1                               0  t8_1
join                                                      0  t8_2
(select ... from t8_2) t8_2
------------------------------------------------
delete from t11        t11                                0  t11
------------------------------------------------
delete from t13        t13                                1  t13 t12
where in
(select ... from t12)  t12                                0  t12
------------------------------------------------
create table new1 as                   new1               1  new1 new
(select ... from new)    new                              0  new
------------------------------------------------
create table new2                      new2               0  new2

想整理成以下資料
obj  dep  lv
t1        0
t1   t2   1
t5   t4   2
t4   t3   1
t3        0
t9   t8_1 1
t9   t8_2 1
t8_1      0
t8_2      0
t11       0
t13  t12  1
t12       0
new1 new  1
new       0
new2      0

上面範例資料實際是沒有 --------
是為了閱讀方便所以將資料分組並加上 -------
有(select..)的話lv會+1
join上下的(select..) table lv 是相同的
先把問題po上來，
回家也會再想想怎麼做~
若有大大願意協助非常感謝!

回報一下，
目前還是用EXCEL先做，
整個流程大致如下：
1、將sql語法貼到excel A1，用許多欄位取出
select,insert into,delete...關鍵字是否存在
2、檔案中語法段落間有空行，可編碼成不同group
3、抓出table名稱，以table數量+考慮join是否存在判斷level

大致上是這樣做，但事實上仍有許多狀況，
例如join的上下table是同一個，但篩選的資料不同，
總之目前還是手工在做整理 QQ
這種半結構式的data整理起來還真痛苦 QQ
[關鍵字]:
level sql

選擇性，也許未來有用

--","R_Language"
"1064","M.1482860093.A.93E","howard40116","問題","RestApi Get失敗",2016-12-28 01:34:50,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接TM1，請問大家的經驗)

[軟體熟悉度]:
使用者

[問題描述]:

使用瀏覽器Get時，有出現所需Json格式資料http://imgur.com/uFwIIqM在R上，Get時有得到Response，但資料為<Empty Body>http://imgur.com/7jqeNUj使用的APIhttp://goo.gl/iq4KD7想麻煩前輩們，提供上述狀況可處理的方向，謝謝

[程式]
library(httr)
library(jsonlite)
library(dplyr)
GET('://localhost:8000/api/v1/Cubes('BUD_COM_Sale_EX')/Dimensions"")
    ↑http


[關鍵字]:RestApi


--","R_Language"
"1065","M.1482849895.A.A0C","rlearner","問題","r+hadoop中rmr/rhdfs問題",2016-12-27 22:44:49,NA,NA,"[目的]
在VM上建立三台虛擬機
並建立rhadoop

執行簡單的rmr範例

[問題簡敘]=============================================================

在VM虛擬器上建立hadoop環境建三台機子，
master,node1,node2
裝好了hadoop(hadoop可以運作）
但是裝R時遇到了無法library：rmr和rhdfs的問題
且無法install.packages：rJava套作

上敘的環境我裝了兩次
第一次(環境一)不知怎麼的就成功install.packges:
rJava的套,但第二次重裝(環境二)卻怎麼樣也無法成功下載
rJava,若rJava無法，rmr跟rhdfs也用不了了！！

[環境一]((提外話~之前莫明成功???)))=====================================
怎麼裝有點忘了,但跟第二次差不多
感覺還是有點問題...(下有影片連結)https://www.youtube.com/watch?v=ByAisA_dQxI&feature=youtu.be[環境二](!!!!!主要問題!!!!!!現在安裝失敗)))=============================
[安裝步驟]
以下是我安裝的方法:(文長)(含安裝步驟影片)https://www.youtube.com/watch?v=QTHfV_xYr8A&t=145s沒剪輯7:04-14:30可跳過~下載很久@@

啟動hadoop
cd ~/hadoop && sbin/start-all.sh
------------------------------------------------
sudo vim .bashrc
sudo vim /etc/environment
sudo vim /etc/profile

在以上三個檔中新增路徑
export JAVA_HOME=/usr/lib/jvm/jdk/
export HADOOP_CMD=/home/hduser/hadoop/bin/hadoop
export HADOOP_HOME=/home/hduser/hadoop
export
HADOOP_STREAMING=/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar

重啟三個檔案
. /etc/environment
. /etc/profile
source .bashrc
-----------------------------------------------------------------------------

三個機子都要安裝R
sudo apt-get update
sudo apt-get upgrade
sudo apt-get install r-base
sudo apt-get install r-base r-base-dev

java 設訂------------------
echo $JAVA_HOME
sudo JAVA_HOME=/usr/lib/jvm/jdk/ R CMD javareconf

in the R--------------------
進入R
sudo R
這裡有錯誤,無法下載rJava(!!!!!問題所在)(註1)

install.packages(c(""codetools"",""R"",""Rcpp"",""RJSONIO"",""bitops"",""digest"",""functional"",""stringr"",""plyr"",""reshape2"",""rJava"",""caTools""))


下載rmr 和 rhdfs
wget --no-check-certificatehttps://raw.github.com/RevolutionAnalytics/rmr2/3.3.0/build/rmr2_3.3.0.tar.gzwget --no-check-certificatehttps://raw.github.com/RevolutionAnalytics/rhdfs/master/build/rhdfs_1.0.8.tar.gz在R中----------------------
第二次安裝出錯 (註2)
install.packages(""/home/hduser/rhdfs_1.0.8.tar.gz"", repos=NULL, type=""source"")
install.packages(""/home/hduser/rmr2_2.2.2.tar.gz"", repos = NULL,
type=""source"")

Sys.setenv(HADOOP_HOME=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_PREFIX=""/home/hduser/hadoop"")
Sys.setenv(HADOOP_CMD=""/home/hduser/hadoop/bin/hadoop"")

Sys.setenv(HADOOP_STREAMING=""/home/hduser/hadoop/share/hadoop/tools/lib/hadoop-streaming-2.7.3.jar"")
Sys.getenv(""HADOOP_CMD"")

後面就不用看了...因為全不行@@
------------------------------------
無法下載rJava後,後面步驟都出錯了QQ


[錯誤息訊]=============================================================
(安裝環境二)https://www.youtube.com/watch?v=QTHfV_xYr8A&t=145s7:04-14:30可跳過~下載很久@@

(註1)14:30
在install.packages(c(""codetools"",""R"",""Rcpp"",""rJava""...後失敗,錯誤訊息:
...waring messages:
1: package 'R' is not available (for R version 3.2.3)
2: Ln install.packages(c(......)  'rJava' had non-zero exit status


(註2)16:38
install.packages(""/home/hduser/rhdfs_1.0.8.tar.gz"", repos=NULL, type=""source"")
install.packages(""/home/hduser/rmr2_2.2.2.tar.gz"", repos = NULL,
type=""source"")
兩個都出現:
would you like to use a personal library instead?
我只能選y

懷疑這裡也出了問題
因為RDM網站有提到library要設定給所有用戶(其實不太懂意思[email<U+00A0>protected]@)http://www.rdatamining.com/big-data/r-hadoop-setup-guide在7.1 Install relevant R packages的地方
原文:
RHadoop packages are dependent on above packages,
which should be installed for all users, instead of in personal library.
....文長以下略

但我不知到在install.packages那些套件前
要怎麼給所有使用者用(這裡的意思應該是三台機子吧@@

[版本]=============================================================
(三台機子都是)
ubuntu 16.04.1
hadoop-2.7.3
R 3.2.3
rmr2 3.3.0
rhdfs 1.0.8

--","R_Language"
"1066","M.1482834566.A.09D","celestialgod","問題","Re: 創造dummy variable",2016-12-27 18:29:22,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 我自己來回我自己的問題 我採用的解法是andrew大的解法: C版的解法看起來應該是最快的 但是小弟無法理解在幹嘛: 所以選擇了一個看起來比我的快很多又能理解的方法: kk <- Sys.time():  klist <- lapply(1 : NROW(target), function(k){:       target[k,] %>% as.numeric %>% .[!is.na(.)]:  }):  test <- lapply(klist, function(k) {:     m <- logical(20):     m[k] <- TRUE:     return(m): }) %>% do.call(rbind, .):   Sys.time() - kk: Time difference of 53.88025 secs: 我稍微修正過andrew大在提取每個row裡的值成為list的這一段碼: 這樣可以將速度從180幾秒提到50秒左右: 以我目前這個50萬row的資料等級來說這個速度我個人可以接受了: 等到C大提點他的程式碼的邏輯以後可能會再修改我的寫法: 目前先到這樣 感謝各位先進的提供的作法 受益良多結果應該是一樣的，程式：

library(data.table)
target <- fread('
a b c
2 5 NA
1 NA NA
1 2 3
3 NA NA
2 4 NA
1 4 5
')

mat <- as.matrix(target)

library(magrittr)
system.time({
  klist <- lapply(1 : NROW(target), function(k){
    target[k,] %>% as.numeric %>% .[!is.na(.)]
  })

  test <- lapply(klist, function(k) {
    m <- logical(5)
    m[k] <- TRUE
    return(m)
  }) %>% do.call(rbind, .)
})

system.time({
  idx <- nrow(mat) * (mat - 1L)
  idx <- idx[which(!is.na(idx))] + which(!is.na(mat), arr.ind = TRUE)[, 1]
  out <- matrix(FALSE, nrow(mat), 5L)
  out[idx] <- TRUE
  dim(out) <- c(nrow(mat), 5L)
})

all.equal(test, out) # TRUE


我程式有點偷懶，是因為假設level數跟input的coloumn數會一樣

我這裡解釋一下我的程式邏輯：

我們先看一下輸出的結果

      [,1]  [,2]  [,3]  [,4]  [,5]
[1,] FALSE  TRUE FALSE FALSE  TRUE
[2,]  TRUE FALSE FALSE FALSE FALSE
[3,]  TRUE  TRUE  TRUE FALSE FALSE
[4,] FALSE FALSE  TRUE FALSE FALSE
[5,] FALSE  TRUE FALSE  TRUE FALSE
[6,]  TRUE FALSE FALSE  TRUE  TRUE

第一列是2, 5要為TRUE，對應到input的第一列 2, 5, NA

第二列是1是TRUE，對應到input的第一列 1, NA, NA

所以我只要有(1, 2), (1, 5), (2, 1), ... 的位置向量

就可以把TRUE位置都描述出來

而且(1, 2), (1, 5), ...這些位置也可以用一個index表示

(這裡計算是根據coloumn-major的矩陣，row-major則會有一點不同)

矩陣中 (1, 2)位置其實可以用  1 + nrow(matrix) * (2 - 1) = 7 (這列有6個row)

       (1, 5)位置可以用 1 + nrow(matrix) * (5 - 1) = 25

       (2, 1)位置可以用 2 + nrow(matrix) * (1 - 1) = 2 ...

來表示

所以我們可以得到一個通式：(i, j) => i + nrow(matrix) * (j - 1)換到我的程式上來看

這行 idx <- nrow(mat) * (mat - 1L)  是把後面那個部分算出來

可是因為mat裡面充滿了NA，所以要滿NA先移除掉就有了下一行的前半段：

            idx[which(!is.na(idx))]

那i要怎麼辦，就利用which + !is.na去把對應的列位置取出

於是我們就得到了TRUE位置的index：

  idx <- idx[which(!is.na(idx))] + which(!is.na(mat), arr.ind = TRUE)[, 1]

那最後我只要把output的矩陣弄出來：

    out <- matrix(FALSE, nrow(mat), 5L)
    # 這裡的5是指target中最大的數字，可以用max(mat[!is.na(mat)])取得

然後再把TRUE位置補上，改一下dim：

     out[idx] <- TRUE
     dim(out) <- c(nrow(mat), 5L)  # 這個5同前面的5意思

如此一來就可以得到正確答案了


這個方法比較tricky一點，但是向量化的精神就在這裡

向量化的程式需要一點的數學 跟 邏輯推演，不是那麼直覺就寫得出來

但是它的performance會真的很好~~~~

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1067","M.1482822911.A.673","clansoda","問題","Re: 創造dummy variable",2016-12-27 15:15:06,NA,NA,"我自己來回我自己的問題 我採用的解法是andrew大的解法

C版的解法看起來應該是最快的 但是小弟無法理解在幹嘛

所以選擇了一個看起來比我的快很多又能理解的方法

kk <- Sys.time()

 klist <- lapply(1 : NROW(target), function(k){

      target[k,] %>% as.numeric %>% .[!is.na(.)]

 })

 test <- lapply(klist, function(k) {

    m <- logical(20)
    m[k] <- TRUE
    return(m)

}) %>% do.call(rbind, .)

  Sys.time() - kk

Time difference of 53.88025 secs

我稍微修正過andrew大在提取每個row裡的值成為list的這一段碼

這樣可以將速度從180幾秒提到50秒左右

以我目前這個50萬row的資料等級來說這個速度我個人可以接受了

等到C大提點他的程式碼的邏輯以後可能會再修改我的寫法

目前先到這樣 感謝各位先進的提供的作法 受益良多

--","R_Language"
"1068","M.1482816209.A.FDA","cywhale","請益","Fw: 值得花十萬到巨匠 學大數據軟體嗎？",2016-12-27 13:23:27,NA,NA,"※ [本文轉錄自 Soft_Job 看板 #1ONrR3BY ]作者: Wush978 (拒看低質媒體) 看板: Soft_Job
標題: Re: [請益] 值得花十萬到巨匠 學大數據軟體嗎？
時間: Sun Dec 25 13:18:56 2016※ 引述《s00771book (320)》之銘言：: 想問問前輩們: 目前小妹的工作只是個: 用BI cognos 拉資料做數據分析的助理: 再用Excel樞紐分析 寫寫函數: 做報告給主管看的工作: 薪水少之又少 也不算是一技之長: 根本不足以與大數據相提並論: 目前嚮往大數據工作的方向: (也是很有未來的工作 大陸已經很成熟了): 查看了104人力銀行: 大數據分析工作需要的條件:: MS SQL 資料探勘 R語言 Hedoop: 所以我去巨匠諮詢了一下: 課程規劃師說要學 MCSA MCSE: 再考微軟證照70-461.462.463.464.465: 才算是完全學會這套軟體: 和證明給面試官看: 但是學費竟然快要十萬: 想請問有在做這方面工作的朋友們: 真的值得花這筆錢嗎？: P.S.我只是個國立科大 企管+金融的學士而已: 沒有漂亮的學歷 只能學一技之長補足自己: 也不是資工 資管的科系的: 希望前輩們能給我建議 謝謝你們>////<如果要走數據分析（抱歉，我不太喜歡用大數據這個詞）的話，

從學R 入門也是一個方法。

資料科學有三個要素：programming, statistics, domain knowledge

我自己在台灣的職涯差不多是：

有programming --> 薪資為 n

有programming + statistics ( 差不多是 machine learning ) --> 2n

有programming + statistics + domain knowledge --> 4n

你目前已經在工作了，只要花心思就可以開始累積domain knowledge：

你們領域中在意的問題是什麼？哪些方向？各種問題的價值？... etc



Programming的話坊間已經有很多自學教材了。

我這邊推薦我與社群做的： R語言翻轉教室http://datascienceandr.org你可以自由的使用它做自學R 語言，大概會花你12-18小時。

教材中我自認寫的最滿意的是Data Engineer的那段，

感謝社群朋友的捐獻，拿一個利用Open Data計算房地產泡沫化指數的小專案當成作業

因為原始資料完全沒有清理，所以這個作業差不多是一個期末報告的難度

但是它非常的貼近實際做資料科學與Open Data相關工作的情境。

這個教材對沒有程式基礎的同學比較挑戰，

有問題，網頁的右下角有聊天室可以問我，

或是你也可以考慮先使用其他教材。

台灣的R社群中還有：

- ptt R_Language版的板主：andrew 的「R 演習室」http://apansharing.blogspot.tw/p/r.html- Tony Yao-Jen Kuo 與 Data Camp合作的教材：https://goo.gl/KxjhIq這套與R語言翻轉教室很類似，差異在：

        - 是不用搞安裝環境，想嘗試可以更快開始嘗試

        - 課程內容差不多是R語言翻轉教室RBasic的範疇，但是難度應該對新手更友善

         （我最近正計畫要降低R語言翻轉教室的難度 ...）

R還有非常多其他的線上自學資源，族繁不及備載

其實你也不一定要學R, python 也是和R 一樣好的分析工具，網路上也可以找到很多

自學資源



我覺得你「能不能運用自學資源自學工具」其實是衡量自己Programming能力的指標。

如果不能的話，就先好好學一套工具，基本上就具備這個能力了。




最後分析的能力，我覺得這是自學比較難補充的部份。

如果數學夠好，就去啃書本吧。

另一種作法，是去分析的單位做Data Engineer，或是做研究助理，然後一邊工作一邊學

但是最好還是去補個與你想投入領域相關的碩士學位。

因為分析這種事情，很看個人的信譽、聲望，而且也離不開domain knowledge。

好的人做的分析報告，大家直接跳到結論。不好的人，就算你該做的都做了也沒人信。



要走這條路，一輩子也都要學習，共勉之。

--","R_Language"
"1069","M.1482775866.A.559","phil5566","問題","table()函數問題",2016-12-27 02:11:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手

[問題敘述]:



假設資料是T,A<-table(T),b<-cumsum(A)/sum(A),希望把A用來分類的factor取出來,

當成一個向量a,把a和b組成2*10的矩陣,因為後續計算會用的到,求高手指教



[程式範例]:

例如:T<-c(1:10)

希望達成

    [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10]
[1,]    1    2    3    4    5    6    7    8    9    10
[2,]  0.1  0.2  0.3  0.4  0.5  0.6  0.7  0.8  0.9   1.0

以上的效果


[環境敘述]:
win 7/R3.3.1

[關鍵字]:

table(),cumsum(),sum()



--","R_Language"
"1070","M.1482765468.A.177","celestialgod","問題","Re: 創造dummy variable",2016-12-26 23:17:45,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 各位好 單一變數創造dummy variable網路已經有很多答案了: 我現在遇到的是要比對多個變數來創造dummy variable: 假設我的data長下面這樣: rowname a b c: 1 2 5 NA: 2 1 NA NA: 3 1 2 3: 4 3 NA NA: 5 2 4 NA: 6 1 4 5: 希望能得到:    is.1  is.2  is.3 is.4 is.5: 1:    FALSE TRUE FALSE FALSE FALSE: 2:    TRUE FALSE FALSE FALSE FALSE: 3:   TRUE TRUE TRUE FALSE FALSE: 4:   FALSE TRUE FALSE TRUE FALSE: 5:    FALSE TRUE FALSE TRUE FALSE: 6 TRUE FALSE FALSE TRUE TRUE: 6: 這個例子是個簡單化的範本: 一個row有可能分屬好幾個category 以第一個row舉例: 他就屬於第二類跟第五類 第二個row則只屬於第一類: 我現在的寫法是: for (i in 1 : 5) {:    dat[, paste0(""is.category"", ""i"") := .SD[, 2 : 4] %in% ""i"" %>% any,:        by = 1 : nrow(dat)]: }: 目前我只會這樣寫 但是這個方法超慢 以我50萬個rows為例就要跑20分鐘: 我相信有更好的寫法 只是我不知道如何寫  因此想請教各位用矩陣運算的話，3秒內就可以得到結果了

N <- 500000L
numLvls <- 100L
mat <- matrix(NA, N, numLvls)

# data genertion
system.time({
  for (i in 1L:N) {
    j <- sort(sample(1L:numLvls, sample(1L:numLvls, 1L)))
    mat[i, 1:length(j)] <- j
  }
})
#  user  system elapsed
# 21.13    0.02   21.19

system.time({
  idx <- N * (mat - 1L)
  idx <- idx[which(!is.na(idx))] + which(!is.na(mat), arr.ind = TRUE)[, 1]
  out <- matrix(FALSE, nrow(mat), ncol(mat))
  out[idx] <- TRUE
  dim(out) <- dim(mat)
})
#  user  system elapsed
#  2.33    0.39    2.72

library(pipeR)
mat[1, ] %>>% (.[which(!is.na(.))])
# [1]  1  4  6  7 10 12 13 16 18 20 23 24 27 29 31 32 34 38 39 42 43 45 47 49
50 52 54 56 57
#     61 62 66 67 68 69 70 72 74 75 78 80 81 82 86 87 91 97 98 99
which(out[1, ])
# [1]  1  4  6  7 10 12 13 16 18 20 23 24 27 29 31 32 34 38 39 42 43 45 47 49
50 52 54 56 57
#     61 62 66 67 68 69 70 72 74 75 78 80 81 82 86 87 91 97 98 99

for (i in 1L:N)
  stopifnot(all.equal(mat[i, ] %>>% (.[which(!is.na(.))]), which(out[i, ])))
# no stop~~~~~

產生資料的時間都已經可以跑七八次了Orz

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1071","M.1482764565.A.A9A","Wush978","問題","Re: 創造dummy variable",2016-12-26 23:02:42,NA,NA,"我猜測你的 data.frame 的值可能是從這樣的資料來的：

```
data <- data.frame(abc = c(""2,5"", ""1"", ""1,2,3"", ""3"", ""2,4"", ""1,4,5"")
```

如果是的話，也許你可以試試看

```
library(FeatureHashing)
hashed.model.matrix( ~ split(abc, "",""), data )
```

不過這樣拿到的column有hashed過※ 引述《clansoda (小笨)》之銘言：: 各位好 單一變數創造dummy variable網路已經有很多答案了: 我現在遇到的是要比對多個變數來創造dummy variable: 假設我的data長下面這樣: rowname a b c: 1 2 5 NA: 2 1 NA NA: 3 1 2 3: 4 3 NA NA: 5 2 4 NA: 6 1 4 5: 希望能得到:    is.1  is.2  is.3 is.4 is.5: 1:    FALSE TRUE FALSE FALSE FALSE: 2:    TRUE FALSE FALSE FALSE FALSE: 3:   TRUE TRUE TRUE FALSE FALSE: 4:   FALSE TRUE FALSE TRUE FALSE: 5:    FALSE TRUE FALSE TRUE FALSE: 6 TRUE FALSE FALSE TRUE TRUE: 6: 這個例子是個簡單化的範本: 一個row有可能分屬好幾個category 以第一個row舉例: 他就屬於第二類跟第五類 第二個row則只屬於第一類: 我現在的寫法是: for (i in 1 : 5) {:    dat[, paste0(""is.category"", ""i"") := .SD[, 2 : 4] %in% ""i"" %>% any,:        by = 1 : nrow(dat)]: }: 目前我只會這樣寫 但是這個方法超慢 以我50萬個rows為例就要跑20分鐘: 我相信有更好的寫法 只是我不知道如何寫  因此想請教各位--","R_Language"
"1072","M.1482763382.A.36F","andrew43","問題","Re: 創造dummy variable",2016-12-26 22:42:59,NA,NA,"我不是很善長效率這件事，
但提供一個比你有效率的解決方案。
這個方案要改寫成平行處理也相對容易（但我沒做）。

library(magrittr)
# 創造 500000 * 100 的假資料
# 元素是 1:100 且有一半的機率是 NA
Nrow <- 500000
Nlevels <- 100
dt <-
  c(1:Nlevels, rep(NA, Nlevels)) %>%
  sample(., size = Nrow * Nlevels, replace = T) %>%
  matrix(., Nrow, Nlevels)

max.val <- max(dt, na.rm = T)
t0 <- Sys.time()
res <- vector(""list"", nrow(dt))
for (i in 1:length(res)) {
  res[[i]] <-
    dt[i, ] %>% as.matrix %>%
    table %>% attr(""dimnames"") %>% .[[1]] %>%
    as.numeric
}
out <-
  lapply(res, function(x) {
    re <- logical(max.val)
    re[x] <- T
    return(re)
  }) %>%
  do.call(""rbind"", .)
Sys.time() - t0
# Time difference of 5.748979 mins
# out 為所求※ 引述《clansoda (小笨)》之銘言：: 各位好 單一變數創造dummy variable網路已經有很多答案了: 我現在遇到的是要比對多個變數來創造dummy variable: 假設我的data長下面這樣: rowname a b c: 1 2 5 NA: 2 1 NA NA: 3 1 2 3: 4 3 NA NA: 5 2 4 NA: 6 1 4 5: 希望能得到:    is.1  is.2  is.3 is.4 is.5: 1:    FALSE TRUE FALSE FALSE FALSE: 2:    TRUE FALSE FALSE FALSE FALSE: 3:   TRUE TRUE TRUE FALSE FALSE: 4:   FALSE TRUE FALSE TRUE FALSE: 5:    FALSE TRUE FALSE TRUE FALSE: 6 TRUE FALSE FALSE TRUE TRUE: 6: 這個例子是個簡單化的範本: 一個row有可能分屬好幾個category 以第一個row舉例: 他就屬於第二類跟第五類 第二個row則只屬於第一類: 我現在的寫法是: for (i in 1 : 5) {:    dat[, paste0(""is.category"", ""i"") := .SD[, 2 : 4] %in% ""i"" %>% any,:        by = 1 : nrow(dat)]: }: 目前我只會這樣寫 但是這個方法超慢 以我50萬個rows為例就要跑20分鐘: 我相信有更好的寫法 只是我不知道如何寫  因此想請教各位--","R_Language"
"1073","M.1482739029.A.247","clansoda","問題","創造dummy variable",2016-12-26 15:57:04,NA,NA,"各位好 單一變數創造dummy variable網路已經有很多答案了

我現在遇到的是要比對多個變數來創造dummy variable

假設我的data長下面這樣

rowname a b c

1 2 5 NA

2 1 NA NA

3 1 2 3

4 3 NA NA

5 2 4 NA

6 1 4 5


希望能得到

   is.1  is.2  is.3 is.4 is.5
1
   FALSE TRUE FALSE FALSE FALSE
2
   TRUE FALSE FALSE FALSE FALSE
3
  TRUE TRUE TRUE FALSE FALSE
4
  FALSE TRUE FALSE TRUE FALSE
5
   FALSE TRUE FALSE TRUE FALSE

6 TRUE FALSE FALSE TRUE TRUE
6

這個例子是個簡單化的範本

一個row有可能分屬好幾個category 以第一個row舉例

他就屬於第二類跟第五類 第二個row則只屬於第一類

我現在的寫法是

for (i in 1 : 5) {

   dat[, paste0(""is.category"", ""i"") := .SD[, 2 : 4] %in% ""i"" %>% any,

       by = 1 : nrow(dat)]

}

目前我只會這樣寫 但是這個方法超慢 以我50萬個rows為例就要跑20分鐘

我相信有更好的寫法 只是我不知道如何寫  因此想請教各位

--","R_Language"
"1074","M.1482730117.A.528","f496328mm","問題","Re: 多個變數的迴圈如何處理?",2016-12-26 13:28:34,NA,NA,": 可能是因為我表達得不夠清楚導致討論的方向不夠明確我在這裡說聲抱歉，: 以下是我頭腦清醒後想出來的data的處理方式:            X A1  A2 A3: 1   member A 34  10  4: 2   member B 18  90 64: 3   member C 16 155  0: 4   member D  9 202  1: 5   member E  4  84  6: 6   member F  0  50  4: 7   member G  0 153 30: 8   member H  0   0 30: 9   member I  0   0 40: 10  member J  0   0 14: 11  member K  0   0 91: 12  member L  0   0  0: 13  member M  0   0  0: 14  member N  0   0  0: 15  member O  0   0  0: 16  member P  0   0  0: 17  member Q  0   0  0: 18  member R  0   0  0: 19  member S  0   0  0: 20  member T  0   0  0: 21  member U  0   0  0: 22  member V  0   0  0: 23  member W  0   0  0: 24  member X  0   0  0: 25  member Y  0   0  0: 26  member Z  0   0  0: 27 member AA  0   0  0: 我主要是想求在我變數下最大的數對應到左邊的名稱: 例如A1是member A 然後值是34接著A2是member D然後值是202: 以下是我真正想要的解，個人寫的步驟有點詭異還會跑出warnings: 但總歸是跑了理想的長相出來所以跟大家分享一下: A <- cbind(): B <- cbind(): for (i in 2:271){:   colnames <- as.vector(X[data[,i] == max(data[,i])]):   A[i-1] <- colnames:   B[i-1] <- max(data[,i]): }: AB <- cbind(A,B): AB:        A          B:   [1,] ""member A"" ""34"":   [2,] ""member D"" ""202"":   [3,] ""member K"" ""91""你給的data只有到這

所以我也做到這:   [4,] ""member J"" ""56"":   [5,] ""member E"" ""298"":   [6,] ""member B"" ""318"": 以上謝謝之前各位大大們的回答max.id=function(x2,name){
                value = as.character( name[ max(x2) == x2 ] )
                return(list(value,max(x2)))
        }

        #如果有data，可以省去以下這些部分，這只是在生你的 data#------------------------------------------
        name = substring(""ABCDEFGHIJKLMNOPQRSTUVWXYZ"",1:26,1:26)
        x = paste(""numeric"",c(name,""AA""),sep="" "")
        a1= c(34,18,16,9,4,rep(0,22))
        a2= c(10,90,155,202,84,50,153,rep(0,20))
        a3=c(4,64,0,1,6,4,30,30,40,14,91,rep(0,16))

        data = data.frame(x,a1,a2,a3)#------------------------------------------

        temp = sapply( c(2:4),function(y) max.id(data[,y],data$x) )

        t(temp)

        #結果跟你的一樣
        #我只跑3個次


--","R_Language"
"1075","M.1482725997.A.669","lovedmagic","問題","Re: 多個變數的迴圈如何處理?",2016-12-26 12:19:55,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《lovedmagic (EricZou)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]:: : 目前我遇到的困難是我有A1~A270個變數，我每個變數都有大概五個數值，: : 每個數值左側代表一個名稱，例如我A1這個變數裡面有 34 18 16 9 4五個值: : 然後每個數值對應到左側的名稱有A B C D E ，我想做的就是取出A1變數中: : 最大的那個值，然後再取出左側的ID，主要是要求出左側的ID，我要如何: : 讓迴圈把每個變數都跑過一次呢???: : 以下有錯誤範例: : [程式範例]:: : fxck = data.frame(): : for (i in 1:270){: : number[data$Ai==max(data$Ai)]: : fxck <- rbind(number[Ai==max(Ai)],Ai): : print(fxck): : }: : [關鍵字]:: : 多個變數、迴圈: library(data.table): DT <- data.table(name = LETTERS[1L:5L], matrix(rnorm(270L * 5L), 5L)): setnames(DT, paste0(""V"", 1L:270L), paste0(""A"", 1L:270L)): # direct:: data.table(:   variable = paste0(""A"", 1L:270L),:   ID = as.character(DT[ , lapply(.SD, function(x) name[which.max(x)]),:                           .SDcols = A1:A270]):   value = as.numeric(DT[ , lapply(.SD, max), .SDcols = A1:A270]): ): #      variable ID     value: #   1:       A1  B 0.5974676: #   2:       A2  A 1.6205859: #   3:       A3  E 0.9247647: #   4:       A4  A 1.7180776: #   5:       A5  D 1.2060909: #  ---: # 266:     A266  C 0.4813518: # 267:     A267  B 1.3096330: # 268:     A268  B 0.4504671: # 269:     A269  C 0.7401682: # 270:     A270  D 2.9256539: # melt:: library(pipeR): out <- melt.data.table(DT, 1) %>>%:   `[`( , .(ID = name[which.max(value)], value = max(value)) ,:                      by =.(variable)): #      variable ID     value: #   1:       A1  B 0.5974676: #   2:       A2  A 1.6205859: #   3:       A3  E 0.9247647: #   4:       A4  A 1.7180776: #   5:       A5  D 1.2060909: #  ---: # 266:     A266  C 0.4813518: # 267:     A267  B 1.3096330: # 268:     A268  B 0.4504671: # 269:     A269  C 0.7401682: # 270:     A270  D 2.9256539: # melt 2:: out <- melt.data.table(DT, 1) %>>%:   `[`( , `:=`(maxRow = rank(value) == length(value)), by = .(variable)) %>>%:   `[`(maxRow == TRUE) %>>% `[`( , maxRow := NULL): # tidyr + dplyr: library(tidyr): library(dplyr): library(pipeR): gather(DT, variable, value, -name) %>>% group_by(variable) %>>%:   filter(rank(value) == length(value))可能是因為我表達得不夠清楚導致討論的方向不夠明確我在這裡說聲抱歉，
以下是我頭腦清醒後想出來的data的處理方式

           X A1  A2 A3
1   member A 34  10  4
2   member B 18  90 64
3   member C 16 155  0
4   member D  9 202  1
5   member E  4  84  6
6   member F  0  50  4
7   member G  0 153 30
8   member H  0   0 30
9   member I  0   0 40
10  member J  0   0 14
11  member K  0   0 91
12  member L  0   0  0
13  member M  0   0  0
14  member N  0   0  0
15  member O  0   0  0
16  member P  0   0  0
17  member Q  0   0  0
18  member R  0   0  0
19  member S  0   0  0
20  member T  0   0  0
21  member U  0   0  0
22  member V  0   0  0
23  member W  0   0  0
24  member X  0   0  0
25  member Y  0   0  0
26  member Z  0   0  0
27 member AA  0   0  0

我主要是想求在我變數下最大的數對應到左邊的名稱
例如A1是member A 然後值是34接著A2是member D然後值是202
以下是我真正想要的解，個人寫的步驟有點詭異還會跑出warnings
但總歸是跑了理想的長相出來所以跟大家分享一下


A <- cbind()
B <- cbind()
for (i in 2:271){
  colnames <- as.vector(X[data[,i] == max(data[,i])])
  A[i-1] <- colnames
  B[i-1] <- max(data[,i])
}
AB <- cbind(A,B)
AB

       A          B
  [1,] ""member A"" ""34""
  [2,] ""member D"" ""202""
  [3,] ""member K"" ""91""
  [4,] ""member J"" ""56""
  [5,] ""member E"" ""298""
  [6,] ""member B"" ""318""

以上謝謝之前各位大大們的回答

--","R_Language"
"1076","M.1482719915.A.EE7","salutyz","問題","用lsmeans做ANOVA post hoc分析",2016-12-26 10:38:32,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的有A,B,C三個factors的repeated anova (type III)，已經跑出anova的結果，想要繼續做post hoc
要用lsmean和constrast的方式（這是依據同領域朋友的建議，不過他是用SAS裡proc glm 去跑底下 lsmeans ( for simple main effect) 和contrast(for differences)

查了很多資料用下面的程式跑之後
在ref.grid()和lsmeans()都出現Error message
Warning message:
In lsm.basis.aovlist(object, trms, xlev, grid, ...) :
  Some predictors are correlated with the intercept - results are biased.
May help to re-fit with different contrasts, e.g. 'contr.sum'

不確定要怎樣修改才對..... orz

[程式範例]:fit.1 <- aov(value~A*B*C+Error(Subject/(A*B*C)),data=work.1)
(late.rg1 <- ref.grid(fit.1))
lsmeans(fit.1, ""A"")

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R version 3.1.3 (2015-03-09)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.5 (Yosemite)

locale:
[1] C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] lsmeans_2.20-23    estimability_1.1-1 car_2.0-25         nlme_3.1-126


[關鍵字]:選擇性，也許未來有用因為是超新手
所以折騰了好幾個禮拜
跪求各位高手幫忙
感激不盡（跪）

--","R_Language"
"1077","M.1482662080.A.3B8","celestialgod","問題","Re: 不同資料集欄位比對,再輸出比對結果",2016-12-25 18:34:37,NA,NA,"※ 引述《joson4921 (特務)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]::: 手邊有兩個資料集,分別是 data1 (預計發車時間), data2 (實際發車時間): 我想做的事情是根據起站發車班表 data1 ,寫個判斷式進行時間比對: 先上兩個資料集的格式與內容示意:         data1                          data2            預期結果: Bus_No.   DepartureTime            DepartureTime          Bus_No.:    1         5:50               2015-12-25 06:51:20          4:    2         6:10               2015-12-26 06:53:30          4:    3         6:30               2015-12-27 06:29:58          3:    4         6:50               2015-12-28 05:52:32          1:    5         7:10               2015-12-29 07:09:24          5: 判斷式的判斷條件:: data1是預計發車時間,data2是實際發車時間,: 比對方式:找實際發車時間與預計發車時間差距最小者(發車前後5分鐘都認定為該Bus_No.): Bus_No.的判定結果目前是打算用dpylr加在data2的Departure欄位後面,: 最後結果輸出為data3(內含 DepartureTime 和 Bus_No. 兩個欄位): 碰到的問題:: 1.卡在不同資料集的欄位資料比對: 2.data1的Departure欄位 和 data2的Departure欄位 時間格式不一樣,不知怎麼寫判斷式兩個格式都轉成POSIXct就好，data1的年月日可以隨便給一個，下面給1990/01/01

在mapping條件的時候，再把data2的年月日align data1的就好了: 以上問題還要再麻煩各位大大解惑了@@:: [程式範例]::: data3 <- data2[.(這邊應該是寫時間判斷的東西,但我想不出怎麼寫), ] %>%:                 .[.(DepartureTime, Bus_No.)]:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: dplyr:

寫得很醜，不過用data.table的foverlap或是non-equi joins應該會是比較簡單的做法

dplyr作法就等別人補充吧~~~

好讀版：http://pastebin.com/4jZLUSLFlibrary(data.table)
# data generation
numBus <- 20L
departTimeSpan <- ""20 mins""
data1 <- data.table(busNo = 1L:numBus,
                  departTime = seq.POSIXt(as.POSIXct(""1990-01-01 05:50:00""),
                                    by = departTimeSpan, length.out = numBus))
## data1
#     busNo          departTime
#  1:     1 1990-01-01 05:50:00
#  2:     2 1990-01-01 06:10:00
#  3:     3 1990-01-01 06:30:00
#  4:     4 1990-01-01 06:50:00
#  5:     5 1990-01-01 07:10:00
#  6:     6 1990-01-01 07:30:00
#  7:     7 1990-01-01 07:50:00
#  8:     8 1990-01-01 08:10:00
#  9:     9 1990-01-01 08:30:00
# 10:    10 1990-01-01 08:50:00
# 11:    11 1990-01-01 09:10:00
# 12:    12 1990-01-01 09:30:00
# 13:    13 1990-01-01 09:50:00
# 14:    14 1990-01-01 10:10:00
# 15:    15 1990-01-01 10:30:00
# 16:    16 1990-01-01 10:50:00
# 17:    17 1990-01-01 11:10:00
# 18:    18 1990-01-01 11:30:00
# 19:    19 1990-01-01 11:50:00
# 20:    20 1990-01-01 12:10:00

# 產生2015/10/01~2015/12/31中前後五分鐘的班次
dataCnt <- 5L
data2 <- data.table(departTime = sample(data1$departTime, dataCnt, TRUE) +
              as.difftime(sample(9404:9495, dataCnt, TRUE), units = ""days"") +
              as.difftime(sample(-300:300, dataCnt, TRUE), units = ""secs""))
#             departTime
# 1: 2015-11-25 08:49:53
# 2: 2015-10-27 09:47:25
# 3: 2015-11-02 10:27:39
# 4: 2015-10-18 08:11:40
# 5: 2015-12-02 09:11:13

## method 1
# find the departure time range
diffTime5mins <- as.difftime(5, units = ""mins"")
data1[ , start := departTime - diffTime5mins]
data1[ , end := departTime + diffTime5mins]
setkey(data1, start, end)

# align time to 1990/01/01
data2[ , start := departTime - floor(departTime -
                      as.POSIXct(""1990-01-01 00:00:00""))]
data2[ , end := start]

# use foverlaps to find the busNo
foverlaps(data2, data1)[ , .(i.departTime, busNo)]
#           i.departTime busNo
# 1: 2015-11-25 08:49:53    10
# 2: 2015-10-27 09:47:25    13
# 3: 2015-11-02 10:27:39    15
# 4: 2015-10-18 08:11:40     8
# 5: 2015-12-02 09:11:13    11

## method 2
# find the departure time range
diffTime5mins <- as.difftime(5, units = ""mins"")
data1[ , start := departTime - diffTime5mins]
data1[ , end := departTime + diffTime5mins]
setkey(data1, start, end)
# align time to 1990/01/01
data2[ , departTimeAlign := departTime - floor(departTime -
                               as.POSIXct(""1990-01-01 00:00:00""))]
# use Non-equi joins
data2[data1, on = .(departTimeAlign >= start, departTimeAlign <= end),
             nomatch = 0][ , .(departTime, busNo)]
#             departTime busNo
# 1: 2015-10-18 08:11:40     8
# 2: 2015-11-25 08:49:53    10
# 3: 2015-12-02 09:11:13    11
# 4: 2015-10-27 09:47:25    13
# 5: 2015-11-02 10:27:39    15

還有任何問題再推文吧~~~

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1078","M.1482659170.A.47F","joson4921","問題","不同資料集欄位比對,再輸出比對結果",2016-12-25 17:46:05,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:手邊有兩個資料集,分別是 data1 (預計發車時間), data2 (實際發車時間)我想做的事情是根據起站發車班表 data1 ,寫個判斷式進行時間比對先上兩個資料集的格式與內容示意data1                          data2            預期結果Bus_No.   DepartureTime            DepartureTime          Bus_No.1         5:50               2015-12-25 06:51:20          42         6:10               2015-12-26 06:53:30          43         6:30               2015-12-27 06:29:58          34         6:50               2015-12-28 05:52:32          15         7:10               2015-12-29 07:09:24          5判斷式的判斷條件:data1是預計發車時間,data2是實際發車時間,比對方式:找實際發車時間與預計發車時間差距最小者(發車前後5分鐘都認定為該Bus_No.)Bus_No.的判定結果目前是打算用dpylr加在data2的Departure欄位後面,最後結果輸出為data3(內含 DepartureTime 和 Bus_No. 兩個欄位)碰到的問題:1.卡在不同資料集的欄位資料比對2.data1的Departure欄位 和 data2的Departure欄位 時間格式不一樣,不知怎麼寫判斷式以上問題還要再麻煩各位大大解惑了@@[程式範例]:data3 <- data2[.(這邊應該是寫時間判斷的東西,但我想不出怎麼寫), ] %>%.[.(DepartureTime, Bus_No.)][環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:dplyr--","R_Language"
"1079","M.1482578063.A.CAB","HumuHumu","問題","更改array內多個矩陣的col和row names",2016-12-24 19:14:20,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我現在有11個3X3的矩陣 想把這些矩陣存到一個dim=c(3,3,11)的array裡

可是每個矩陣的colname和rownames都不一樣，我試著用

colnames(MyArray[ , ,1])<-c(""年"",""月"",""日"")

colnames(MyArray[ , ,2])<-c(""時"",""分"",""秒"")

但是我不管是直接叫出MyArrry，或是叫出個別的矩陣(如MyArray[,,1])

矩陣的colnames都還是沒變，如下> MyArrary, , 1

     [,1] [,2] [,3]
[1,] 2015  01   21
[2,] 2016  02   22
[3,] 2017  03   23

, , 2   (以下略)

Arrary中每個矩陣的colnames都還是顯示 [,1] [,2] [,3] 這種

有辦法可以改嗎?

--","R_Language"
"1080","M.1482544491.A.66E","celestialgod","問題","Re: 多個變數的迴圈如何處理?",2016-12-24 09:54:47,NA,NA,"※ 引述《lovedmagic (EricZou)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 目前我遇到的困難是我有A1~A270個變數，我每個變數都有大概五個數值，: 每個數值左側代表一個名稱，例如我A1這個變數裡面有 34 18 16 9 4五個值: 然後每個數值對應到左側的名稱有A B C D E ，我想做的就是取出A1變數中: 最大的那個值，然後再取出左側的ID，主要是要求出左側的ID，我要如何: 讓迴圈把每個變數都跑過一次呢???: 以下有錯誤範例: [程式範例]:: fxck = data.frame(): for (i in 1:270){: number[data$Ai==max(data$Ai)]: fxck <- rbind(number[Ai==max(Ai)],Ai): print(fxck): }: [關鍵字]:: 多個變數、迴圈library(data.table)
DT <- data.table(name = LETTERS[1L:5L], matrix(rnorm(270L * 5L), 5L))
setnames(DT, paste0(""V"", 1L:270L), paste0(""A"", 1L:270L))

# direct:
data.table(
  variable = paste0(""A"", 1L:270L),
  ID = as.character(DT[ , lapply(.SD, function(x) name[which.max(x)]),
                          .SDcols = A1:A270])
  value = as.numeric(DT[ , lapply(.SD, max), .SDcols = A1:A270])
)
#      variable ID     value
#   1:       A1  B 0.5974676
#   2:       A2  A 1.6205859
#   3:       A3  E 0.9247647
#   4:       A4  A 1.7180776
#   5:       A5  D 1.2060909
#  ---
# 266:     A266  C 0.4813518
# 267:     A267  B 1.3096330
# 268:     A268  B 0.4504671
# 269:     A269  C 0.7401682
# 270:     A270  D 2.9256539

# melt:
library(pipeR)
out <- melt.data.table(DT, 1) %>>%
  `[`( , .(ID = name[which.max(value)], value = max(value)) ,
                     by =.(variable))
#      variable ID     value
#   1:       A1  B 0.5974676
#   2:       A2  A 1.6205859
#   3:       A3  E 0.9247647
#   4:       A4  A 1.7180776
#   5:       A5  D 1.2060909
#  ---
# 266:     A266  C 0.4813518
# 267:     A267  B 1.3096330
# 268:     A268  B 0.4504671
# 269:     A269  C 0.7401682
# 270:     A270  D 2.9256539

# melt 2:
out <- melt.data.table(DT, 1) %>>%
  `[`( , `:=`(maxRow = rank(value) == length(value)), by = .(variable)) %>>%
  `[`(maxRow == TRUE) %>>% `[`( , maxRow := NULL)

# tidyr + dplyr
library(tidyr)
library(dplyr)
library(pipeR)
gather(DT, variable, value, -name) %>>% group_by(variable) %>>%
  filter(rank(value) == length(value))
--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1081","M.1482528500.A.138","abc2090614","問題","Re: 多個變數的迴圈如何處理?",2016-12-24 05:28:17,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：:         max.id=function(x2,name){:                 value = name[ max(x2) == x2 ]:                 return(value):         }:         x=matrix(rnorm(20),ncol=4):         name=c(""A"",""B"",""C"",""D"",""E""):         rownames(x)=name:         x:         tem = apply(x,2,function(x) max.id(x,name)):         tem: 應該還有更好的方法: 我先提供一個: 主要就是利用apply進行col運算我來試一個 dplyr + reshape2 的解法

test.frame <- data.frame(
  name = c(""A"",""B"",""C"",""D"",""E""),
  var1 = c(12,9,10,-5,2),
  var2 = c(9,29,30,29,1)
)

library(reshape2)
library(dplyr)
test.frame %>% melt %>% group_by(variable) %>% filter(value == max(value))

得到的output如下

    name variable value
  <fctr>   <fctr> <dbl>
1      A     var1    12
2      C     var2    30

--","R_Language"
"1082","M.1482521357.A.E5B","f496328mm","問題","Re: 多個變數的迴圈如何處理?",2016-12-24 03:29:14,NA,NA,"※ 引述《lovedmagic (EricZou)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 目前我遇到的困難是我有A1~A270個變數，我每個變數都有大概五個數值，: 每個數值左側代表一個名稱，例如我A1這個變數裡面有 34 18 16 9 4五個值: 然後每個數值對應到左側的名稱有A B C D E ，我想做的就是取出A1變數中: 最大的那個值，然後再取出左側的ID，主要是要求出左側的ID，我要如何: 讓迴圈把每個變數都跑過一次呢???: 以下有錯誤範例: [程式範例]:: fxck = data.frame(): for (i in 1:270){: number[data$Ai==max(data$Ai)]: fxck <- rbind(number[Ai==max(Ai)],Ai): print(fxck): }: [關鍵字]:: 多個變數、迴圈max.id=function(x2,name){
                value = name[ max(x2) == x2 ]
                return(value)
        }

        x=matrix(rnorm(20),ncol=4)

        name=c(""A"",""B"",""C"",""D"",""E"")
        rownames(x)=name
        x
        tem = apply(x,2,function(x) max.id(x,name))
        tem


應該還有更好的方法

我先提供一個

主要就是利用apply進行col運算


--","R_Language"
"1083","M.1482516235.A.4BA","lovedmagic","問題","多個變數的迴圈如何處理?",2016-12-24 02:03:52,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
目前我遇到的困難是我有A1~A270個變數，我每個變數都有大概五個數值，
每個數值左側代表一個名稱，例如我A1這個變數裡面有 34 18 16 9 4五個值
然後每個數值對應到左側的名稱有A B C D E ，我想做的就是取出A1變數中
最大的那個值，然後再取出左側的ID，主要是要求出左側的ID，我要如何
讓迴圈把每個變數都跑過一次呢???
以下有錯誤範例



[程式範例]:

fxck = data.frame()
for (i in 1:270){
number[data$Ai==max(data$Ai)]
fxck <- rbind(number[Ai==max(Ai)],Ai)
print(fxck)
}



[關鍵字]:
多個變數、迴圈

--","R_Language"
"1084","M.1482508641.A.C9A","criky","問題","階層資料整理",2016-12-23 23:57:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我的階層資料如下，大概會有幾種情形：
以4層為例，從第4層obj=D1開始看：

lv obj dep
4  D1C1#Y
4  D1C2#Y
3  D1  B1
3  D1  B2
2  D1  A1
1  D1  A2
3C1B1#Y
3C2B2#Y
3C2B3#Y
2  C1  B1
2  C2  B2
2  C2  A3
1  C1  B1
1  C2  B2
1  C2  A1
2B1A1#Y
2B1A2#Y
2B2A1#Y
2B3A2#Y
1  B1  A1
1  B1  A2
1  B2  A1
1  B3  A1
1A1#Y
1A2#Y

以D1為例，就去看LV MAX=4 的dep= C1, C2  ,LV=3,2,1 的data不管
C1, C2 的LV MAX=3 的dep=B1, B2, B3  ,LV=2,1 的data不管
B1,B2,B3 的LV MAX=2 的dep=A1, A2 , LV=1 的data不管
最後是 底層 LV=1 的A1, A2

我的想法是先group by obj, summaries LV MAX,
用迴圈方式作，先謝謝各位了~

我想要的是同樣的資料欄位，取 #Y的列即可，其它列不需要

早上試了一下，做了一種方式呈現階層，雖然不是我本來想要的，
不過還是貼上來看一下

dt1<-select(dt,lv1=lv,dep=obj,dep1=dep)
dt2<-select(dt,lv2=lv,dep1=obj,dep2=dep)

dt_maxlv<-dt %>%
  group_by(obj) %>%
  summarise(maxlv=max(lv))

dt_dep4<-left_join(dt_maxlv,dt,by=c(""obj""=""obj"",""maxlv""=""lv"")) %>%
  left_join(dt1) %>%
  group_by(obj,dep,dep1) %>% summarise(max(lv1)) %>%
  left_join(dt2) %>%
  group_by(obj,dep,dep1,dep2) %>% summarise(maxlv=max(lv2)) %>%
  filter(maxlv==2)

dt_dep4
    obj   dep  dep1  dep2 maxlv
  <chr> <chr> <chr> <chr> <int>
1    D1    C1    B1    A1     2
2    D1    C1    B1    A2     2
3    D1    C2    B2    A1     2
4    D1    C2    B3    A2     2

以上四筆是正確的階層關係
下午終於試出來了，再full join回去，不過好像繞了一大圈 XD

dt.df<-data.frame(dt_dep4) %>%
  full_join(.[,c(2,3)],by=c(""obj""=""dep"",""dep""=""dep1"")) %>%
  full_join(.[,c(3,4)],by=c(""obj""=""dep1"",""dep""=""dep2"")) %>%
  select(1,2) %>% na.exclude %>% distinct

dt.df
  obj dep
1  D1  C1
2  D1  C2
3  C1  B1
4  C2  B2
5  C2  B3
6  B1  A1
7  B1  A2
8  B2  A1
9  B3  A2

[關鍵字]:

level

--","R_Language"
"1085","M.1482496741.A.030","april6310","問題","ggplot個別圖型合併後存檔問題",2016-12-23 20:38:59,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大，小弟想請教如果用ggplot畫幾張圖

然後我想用ggplot2.mutiplot把圖合併起來

再用ggsave將ggplot2.multiplot的圖存成JPEG檔

那麼要怎麼用ggsave的語法存到我想要的路徑呢?



[程式範例]:

如網站範例http://goo.gl/mG8Jla如小弟我先前打過的ggsave範例
ggsave(sprintf(""/User/userr/Desktop/classworking/figure/%s_%s.jpeg"",
names(X)[y],names(Z)[h]))

%s_%s的部分是記住後面names(X)[y],names(Z)[h]的名稱

>""/User/userr/Desktop/classworking/figure/MV_Inv.jpeg""



[關鍵字]:
ggplot,ggsave,ggplot2.multiplot

--","R_Language"
"1086","M.1482477492.A.B13","v303ofsky","問題","Re: Ordered Probit for panel data",2016-12-23 15:18:09,NA,NA,"問題已解決，應該是對的吧...自己來回覆一下
    後來是參考何宗武老師『追蹤資料分析_原理與R程式實務』書裡面的
附錄一，採用pglm套件裡的pglm函數對panel data跑Ordered Probit model，
原本用rms套件的lrm函數是錯的(未考慮資料為panel的形式)，下面是我使用
的方式。

pglm(Y ~ X, mydata,
            family = ordinal(""probit""),
            R = 5,
            print.level = 3,
            method = 'bfgs',
            index = 'country',
            model = ""random"")

其中，
Y是被解釋變數，依照原資料切成五個百分位數來分成5個rank，也就是說
1 < 2 < 3 < 4 < 5

X就是我的解釋變數，mydata就是放我的資料，index = 'country'是因為
我的觀察值是各個國家2007-2015年的資料，國家那一欄名稱即""country""

比較特別的是R = 5，據我所知是跟數值計算需要給個初始值有關，查了
help文件預設是20，但會run不出來，用5是因為文件裡的範例是用5，這
部分我不懂數值計算，只能等待有識之士來詳解了

print.level則是拿掉也能跑，純粹照抄文件範例

第一次在本版po文 & 不太會用ptt，若排版不好閱讀還請見諒，謝謝大家！※ 引述《v303ofsky (阿速)》之銘言：:     我碩士論文的資料是Panel data，然後需要跑Ordered Probit model，: 我原本是用rms套件的lrm，但是這樣似乎沒有考慮到panel的問題，請問: 是否有合適的套件呢？謝謝！--","R_Language"
"1087","M.1482415334.A.94F","v303ofsky","問題","Ordered Probit for panel data",2016-12-22 22:02:11,NA,NA,"我碩士論文的資料是Panel data，然後需要跑Ordered Probit model，
我原本是用rms套件的lrm，但是這樣似乎沒有考慮到panel的問題，請問
是否有合適的套件呢？謝謝！


--","R_Language"
"1088","M.1482410615.A.990","k5171","問題","[shiny〕navbarMenu() 下拉箭跳至文字下一行",2016-12-22 20:43:32,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題[問題類型]:程式諮詢[軟體熟悉度]:
[軟體熟悉度]:入門[問題敘述]:


用 navbarMenu 做下拉選單，跑出來是下拉箭跳到下一行：
          More
            ▽

請問是否有方法讓下拉與文字在同一行? (如附所示）

          More ▽


[程式範例]:

原本以為可以調整 style 來達到目的，但是好像沒有作用

ui.R

tabPanel(tags$a(h4(""Section 3""),
href = ""#section3"")
),
navbarMenu(icon = NULL,
h4(""More"",
style = ""padding: 0px 0px 0px 0px;""),
tabPanel(
tabPanel(
tags$a(h4(""Download the data""),
href = ""the url"",
target = ""_blank""
)
),


另外請問一個類似問題， style 能否調小 navbarPage 的高度呢？預設的高度有點寬，會擋住部分頁面。曾經上 Stackflow 搜尋與試過加

tags$div(tags$style(""{height:45vh !important;}"")

navbarPage (skip)

)

但其效果會讓 navbar 縮窄許多，讓原本在 navbarPage 上的字都顯示不出來，而且也無法隨 height 調大使文字恢復顯示

[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-Apple-darwin13.4.0 64-bitRunning under: OS X 10.11.6 (El Capitan)不好意思手機排版請見諒，感激不盡！

--","R_Language"
"1089","M.1482396910.A.04D","wingring182","問題","R Studio 改錯R version 路徑，打不開",2016-12-22 16:55:07,NA,NA,"最近不小心修改了Rstudio 的version路徑

結果重啟就掛掉，連畫面都跑不出來

只好重灌R studio，結果重灌後，還是一樣掛掉

甚至我把R 都重灌了，還是不行。

使用 Rstudio 裡面的Run Diagnostics，結果如下

Attempting to launch R session...
  R_HOME=C:\Users\my\ANACON~1\R

應該是R_HOME的路徑錯誤了，但我不知道如何找到這個設定檔

請版上大大幫幫忙。

--","R_Language"
"1090","M.1482381492.A.3F0","cywhale","問題","Re: 階層資料列轉欄",2016-12-22 12:38:09,NA,NA,"library(data.table)
library(magrittr)

dt <- fread('LV      Obj     Dep
0       A1      """"
1       A1      A1
2       B1      A1
1       A1      A1
2       B2      A1
3       C1      B2
1       A1      A1
2       B2      A1
3       C2      B2
4       D1      C2')

dt[,stx:=ifelse(LV<1,""Dep1"",paste0(""Dep"",LV)),by=.(LV)] %>%
  .[,nL:=as.integer(stx==""Dep1"")] %>%
  .[,ngp:=cumsum(nL)]

x1 <- dcast(dt, ngp ~ stx, value.var = ""Obj"")

#   ngp Dep1 Dep2 Dep3 Dep4
#1:   1   A1   NA   NA   NA
#2:   2   A1   B1   NA   NA
#3:   3   A1   B2   C1   NA
#4:   4   A1   B2   C2   D1※ 引述《criky (立業成家)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 資料如下：: id      LV      Obj     Dep: 1       0       A1: 2       1       A1      A1: 2       2       B1      A1: 3       1       A1      A1: 3       2       B2      A1: 3       3       C1      B2: 4       1       A1      A1: 4       2       B2      A1: 4       3       C2      B2: 4       4       D1      C2: 想將資料轉成以下方式：: id      Obj     Dep1    Dep2    Dep3    Dep4: 1       A1      A1: 2       A1      A1      B1: 3       A1      A1      B2      C1: 4       A1      A1      B2      C2      D1: 空格可以填NA或留空都可，: 階層數不一定，最小0，最大30: 同一個Obj可能有許多階層的關係~: 再請教大家了，謝謝: [關鍵字]:: level: 自己查版上文章看推文，將主要部分試出來了，: dt_list<-tapply(dt$Obj,dt$id,c): $`1`: [1] ""A1"": $`2`: [1] ""A1"" ""B1"": $`3`: [1] ""A1"" ""B2"" ""C1"": $`4`: [1] ""A1"" ""B2"" ""C2"" ""D1"": 本來想用 do.call(rbind,.) 但有空格處會以重覆值填補: 若用as.data.frame將list轉df，: 則是只有1個變數，還要再分割處理: 後來發現tapply只看obj及id，: 但真實data可能連id都要自己作出來，: 其實還是有點難度 @@--","R_Language"
"1091","M.1482314610.A.408","phil5566","問題","函數boot.ci的問題?",2016-12-21 18:03:27,NA,NA,"[問題類型]:

程式諮詢:boot這個package裡的boot.ci這個function如何一次

產生多個參數的confidence intervals

[軟體熟悉度]:

新手(沒寫過程式)

[問題敘述]:

由於程式碼太長,因此只附上關鍵部分的問題,

我先用boot()這個function把data T bootstrap 100次

並且把每bootstrap一次的結果執行

自定函數""theta.boot""這個運算

再用boot.ci()這個function對boot.obj(boot()這個function輸出的結果)

運算出""basic"", ""norm"", ""perc""三種類型的confidence intervals

程式碼如下:

boot.obj <- boot(T, statistic = theta.boot, R = 100)

boot.ci(boot.out = boot.obj, type = c(""basic"", ""norm"", ""perc""))

結果如下:

Bootstrap Statistics :
      original      bias    std. error
t1* -0.0972177 -0.03674216   0.1914715
t2*  1.3326862  0.02823161   0.7443144
t3*  4.8126388  0.11100370   0.3723238
t4*  1.0862814 -0.04447950   0.1474000
t5*  4.7145885  0.04016033   0.2725067


Intervals :
Level      Normal              Basic              Percentile
95%   (-0.4358,  0.3148 )   (-0.3816,  0.1833 )   (-0.3777,  0.1871 )



問題點就是:

算confidence intervals怎麼只輸出t1那一列的confidence intervals

t2,t3,t4,t5的confidence intervals到底要怎麼產生?

求高手解救,謝謝!



[程式範例]:http://codepad.org/aKtpe7FB[環境敘述]:
win7,

R x64 3.3.1,

""boot""package

[關鍵字]:

boot,boot.ci


--","R_Language"
"1092","M.1482202112.A.9BD","CAPPON","問題","barplot請教",2016-12-20 10:48:30,NA,NA,"dt <- data.frame(
  type=c(""A"",""B""),
  freq = c(1200,1650),
  earn = c(0.94,0.98))

bp <- barplot((dt[,2]),yaxt=""n"",col=""lightblue"")
box()
lines(bp, dt[,3]*500, col = 4)

X軸放type A&B
Y1軸是earn  用trend
Y2軸是freq 用直方圖呈現
因 2種資料差異很大
但畫出來的圖不美觀
另外  如何顯示雙Y軸的座標軸




--","R_Language"
"1093","M.1482200894.A.9E8","kobebryin","問題","詢問一個usingR書籍上的題目",2016-12-20 10:28:12,NA,NA,"Simulate 1,000 rolls of a pair of die. Which is more common, a roll of 7
or 8?

這題目是在讀R語言相關書時看到的練習題目，但是怎麼試都沒有想出答案，向上來詢問
各位前輩，謝謝！

--","R_Language"
"1094","M.1482192894.A.068","criky","問題","階層資料列轉欄",2016-12-20 08:14:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
資料如下：

id      LV      Obj     Dep
1       0       A1
2       1       A1      A1
2       2       B1      A1
3       1       A1      A1
3       2       B2      A1
3       3       C1      B2
4       1       A1      A1
4       2       B2      A1
4       3       C2      B2
4       4       D1      C2

想將資料轉成以下方式：

id      Obj     Dep1    Dep2    Dep3    Dep4
1       A1      A1
2       A1      A1      B1
3       A1      A1      B2      C1
4       A1      A1      B2      C2      D1

空格可以填NA或留空都可，
階層數不一定，最小0，最大30
同一個Obj可能有許多階層的關係~
再請教大家了，謝謝


[關鍵字]:
level

自己查版上文章看推文，將主要部分試出來了，
dt_list<-tapply(dt$Obj,dt$id,c)

$`1`
[1] ""A1""

$`2`
[1] ""A1"" ""B1""

$`3`
[1] ""A1"" ""B2"" ""C1""

$`4`
[1] ""A1"" ""B2"" ""C2"" ""D1""

本來想用 do.call(rbind,.) 但有空格處會以重覆值填補
若用as.data.frame將list轉df，
則是只有1個變數，還要再分割處理

後來發現tapply只看obj及id，
但真實data可能連id都要自己作出來，
其實還是有點難度 @@

感謝cy大提供解法如下：
library(data.table)
library(magrittr)

dt <- fread('LV      Obj     Dep
0       A1      """"
1       A1      A1
2       B1      A1
1       A1      A1
2       B2      A1
3       C1      B2
1       A1      A1
2       B2      A1
3       C2      B2
4       D1      C2')

dt[,stx:=ifelse(LV<1,""Dep1"",paste0(""Dep"",LV)),by=.(LV)] %>%
  .[,nL:=as.integer(stx==""Dep1"")] %>%
  .[,ngp:=cumsum(nL)]

x1 <- dcast(dt, ngp ~ stx, value.var = ""Obj"")

正是我要的結果！
不過我再回去看資料發現我舉例有誤 XD
我的資料及修改cy大的程式碼如下：

dt <- fread('LV      Obj     Dep
            0       A1      """"
            1       B1      A1
            0       A1      """"
            1       B2      A1
            2       C1      B2
            0       A1      """"
            1       B2      A1
            2       C2      B2
            3       D1      C2')
#0階是底層

dt[,stx:=ifelse(LV<1,""Dep0"",paste0(""Dep"",LV)),by=.(LV)] %>%
#加入stx欄，底層命名為Dep0，其它為Dep+LV
  .[,nL:=as.integer(stx==""Dep0"")]  %>%
#加入nL欄，stx==Dep0為1，其它為0
  .[,ngp:=cumsum(nL)]
#加入ngp欄==nL累積次數
x1 <- dcast(dt, ngp ~ stx, value.var = ""Obj"")

x1
   ngp Dep0 Dep1 Dep2 Dep3
1:   1   A1   B1   NA   NA
2:   2   A1   B2   C1   NA
3:   3   A1   B2   C2   D1","R_Language"
"1095","M.1482115218.A.E20","samex4x4","問題","補上最後的'總計'",2016-12-19 10:40:14,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:想詢問有沒有加上總計比較好的方法？並不是加在col，而是row的最後一行目前我的做法是再生成一個data.frame(商品 = ""總計"", 數量 =sum(A$數量), 佔比=...)再將兩者做rbind如果直接rbind(A, c(""總計"", ""數量""......)又會因為第一個總計是字串把整個data.frame都搞成字串....想詢問大家都是怎麼解決這個問題的，感謝[程式範例]:[關鍵字]:--","R_Language"
"1096","M.1482075415.A.879","gn01964187","問題","R函數中物件的問題",2016-12-18 23:36:52,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要跑一個模擬，但是因為計算時間很長所以想寫成一個函數來重複執行，
但發現執行之後都會出現函數找不到某個object的狀況(這些object也是寫在函數裡的)，
而我如果一行一行執行都能順利跑完，查了一些資訊覺得好像跟物件所在的環境有關，
但具體來說不知道要怎麼解決這個問題，想請教一下大家，謝謝。

--","R_Language"
"1097","M.1481992320.A.5B1","f496328mm","問題","補遺失值 mice 包  太慢",2016-12-18 00:31:58,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

請問有沒有其他的packages

補遺失值的方法，mice雖然可以，但是太慢了，

我的data，length (row*col) 有100萬個數字，

(4w 個 row,26 個 col)

missing value 有1.1萬筆，

要跑 3min

[程式範例]:

        library(mice)

        x=rnorm(100)
        x[sample(100,20)]=NA

        x=matrix(x,ncol=5)
        x
        complete( mice( x ) )


[關鍵字]:
mice , missing value

--","R_Language"
"1098","M.1481984054.A.B9D","criky","問題","R 與 SQL 對應的寫法/想法",2016-12-17 22:14:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
R與SQL在整理/查詢資料上有些類似的用法，
現在想要用R做SQL做的事，
中間卡住，來請教各位大大了~

[程式範例]:
SQL：

SELECT
 A.DBName
,A.TableName
,B.Count
,C.LADate
,C.LATime #最後要的5個欄位
FROM
Table_A A  #主要的表，join最後結果row n不變
LEFT JOIN
( #子查詢1 取 count
SELECT A.DBName,
A.TableName,
sum(A.Count) as Count
FROM Count A
LEFT JOIN
User B
ON A.UserName=B.UserName
GROUP BY A.DBName,A.TableName
WHERE B.User_Type IN ('A','B')
) B
ON A.DBName = B.DBName
AND A.TableName = B.TableName
LEFT JOIN
( #子查詢2 取 LADate,LAtime
select DBName,
TableName,
LADate,
LATime
from
LAQUALIFY ROW_NUMBER() OVER (PARTITION BY DBName,TableNameORDER BY LADate DESC, LATime DESC)=1#以LADate DESC,LaTime DESC排序後，取第一列
) C
ON B.DBName = C.DBName
AND B.TableName = C.TableName

R寫的想法也是和SQL類似，
先寫子查詢，最後再3個表left join，
只寫了2個子查詢，第2段卡住(紅字部分)
若用group_by取top1不太對，
應該要取LADate同一列的LATime

sub_q1<-left_join(x=count,y=user,by=""UserName"")　%>%　
    group_by(DBName,TableName) %>%
    summarise(sum(Count))

sub_q2<-select(LA,DBName,TableName,
               LADate,LATime) %>%
        order_by LADate desc,LATime desc %>%
        group_by(DBName,TableName) %>% ??

[環境敘述]:
R version 3.3.2 (2016-10-31)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows >= 8 (build 9200)

[關鍵字]:
SQL選擇性，也許未來有用--","R_Language"
"1099","M.1481903406.A.366","andrew43","問題","Re: grep判斷欄位是否含特定字串,取該筆資料",2016-12-16 23:50:04,NA,NA,"我舉一個很簡單的例子

library(dplyr)
data(CO2)
CO2 %>% .[grep(""^Qn[12]$"", .$Plant), ]

你希望用 filter() 來做，但它不適合吃 grep() 回傳資料。※ 引述《joson4921 (特務)》之銘言：:: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: Data含有資料如下所示：:      Time         UniqueBusID: 1　12:00:30　273-FC_o 大東紡織(振興路)->屯區藝文中心162: 2　14:45:54  273-FC_o 大東紡織(振興路)->屯區藝文中心162: 3  15:53:47  273-FC_o 屯區藝文中心->莒光新城163: 4  17:17:56  285-FC_o 下太平->莒光新城164: 5  15:46:12  285-FC_o 莒光新城->莒光新城163: 我想做的是將UniqueBusID內含有""屯區藝文中心->"",""莒光新城->""兩字串的資料列取出: 具體做法是先使用檢測用的函數檢測UniqueBusID是否含有該二字串,: 爬文之後選用grep來做檢測,檢測之後再用filter將通過grep檢測的資料列留下: 但我發現使用filter()不能直接在括號內放進grep那一串,改用mutate也一樣不行: 請問板上大大這中間是不是我想錯了什麼導致我無法取出我要的結果呢?: PS.結果應僅剩下第3和第5資料列: 先感謝板大撥冗解惑: [程式範例]::: filter(grep(""莒光新城->\\d*|屯區藝文中心->\\d*"",:          BusData_51$UniqueBusID, value = T)): filter): [環境敘述]::: [關鍵字]:: grep, filter, mutate:: 選擇性，也許未來有用:

--","R_Language"
"1100","M.1481900882.A.14D","f496328mm","分享","kaggle競賽2，156名，前8%",2016-12-16 23:07:59,NA,NA,"想要給，對資料分析有興趣的朋友，一個參考的方向，

我目前還在學習中，所以分享一些過程，有錯也請多多指教

----------------------------------------------------------

我 CODE 是用 R 寫的

( 注意，此 train data 3GB，我電腦ram有32g，幾乎會全部使用到，如果配備不足

可以參考我上一篇的kaggle競賽，data比較小 )https://github.com/f496328mm/kaggle_Grupo_Bimbo_Inventory_Demand類似麵包店的銷售資料，進貨量調整等等，要預測未來一周的進貨量，

因為國外地大，進貨是以周為單位，我的理解是這樣


我目前還在研究中，名次會持續進步


如果有問題歡迎討論



--","R_Language"
"1101","M.1481900619.A.CF9","f496328mm","分享","kaggle競賽，398名，前12%",2016-12-16 23:03:35,NA,NA,"想要給，對資料分析有興趣的朋友，一個參考的方向，

我目前還在學習中，所以分享一些過程，有錯也請多多指教

----------------------------------------------------------

我 CODE 是用 R 寫的https://github.com/f496328mm/kaggle_Rossmann_Store_Sales類似7-11的便利商店，每天銷售資料，要預測未來48天的銷售量

我目前還在研究中，名次會持續進步


如果有問題歡迎討論












--","R_Language"
"1102","M.1481882096.A.944","joson4921","問題","grep判斷欄位是否含特定字串,取該筆資料",2016-12-16 17:54:51,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的Data含有資料如下所示：

     Time         UniqueBusID
1　12:00:30　273-FC_o 大東紡織(振興路)->屯區藝文中心162
2　14:45:54  273-FC_o 大東紡織(振興路)->屯區藝文中心162
3  15:53:47  273-FC_o 屯區藝文中心->莒光新城163
4  17:17:56  285-FC_o 下太平->莒光新城164
5  15:46:12  285-FC_o 莒光新城->莒光新城163



我想做的是將UniqueBusID內含有""屯區藝文中心->"",""莒光新城->""兩字串的資料列取出

具體做法是先使用檢測用的函數檢測UniqueBusID是否含有該二字串,

爬文之後選用grep來做檢測,檢測之後再用filter將通過grep檢測的資料列留下

但我發現使用filter()不能直接在括號內放進grep那一串,改用mutate也一樣不行

請問板上大大這中間是不是我想錯了什麼導致我無法取出我要的結果呢?

PS.結果應僅剩下第3和第5資料列

先感謝板大撥冗解惑

[程式範例]:


filter(grep(""莒光新城->\\d*|屯區藝文中心->\\d*"",
         BusData_51$UniqueBusID, value = T))

filter)
[環境敘述]:


[關鍵字]:
grep, filter, mutate選擇性，也許未來有用--","R_Language"
"1103","M.1481870720.A.F18","clansoda","問題","記憶體計算",2016-12-16 14:45:15,NA,NA,"Hi 各位好 我目前想要擴增一個data.frame做machine learning

我想要弄進兩千個feature因此想要知道到底會吃多少記憶體

我知道object.size可以知道當前的物件吃多少記憶體

假如這個物件還沒弄出來 只在我腦裡面跑

有辦法透過row的數量跟col數量來推估記憶體使用量嗎

我怕寫一寫後來沒記憶體可以跑很尷尬

--","R_Language"
"1104","M.1481725563.A.924","CAPPON","問題","如何產生bat執行檔",2016-12-14 22:26:01,NA,NA,"[問題敘述]:
因每天要固定去跑資料
R可以產生執行檔,用schedule task設定時間去啟動嗎?
該如何產生執行檔呢?要設定那些環境才可以呢?
謝謝


R3.2.2

--","R_Language"
"1105","M.1481684706.A.3AD","rlearner","問題","web server上建立r-leaflet套件(趴吐)",2016-12-14 11:05:02,NA,NA,"小弟我實在找不出辦法,想再請大大們幫忙QQ
[環境架設/問題簡敘]
我在實體機上ubuntu上架設了shiny server
測試用的shiny範例程式所放路徑：
$cd /opt/shiny-server/samples/sample-apps
並放了幾個範例程式，如下http://140.128.197.58:3838/sample-apps/(問題所在!!!!)但在嘗試leaflet地圖套件時出錯：http://140.128.197.58:3838/sample-apps/leaflet1/ps.不過leaflet應用在js上就可以了@[email<U+00A0>protected]http://140.128.197.58:3838/sample-apps/html-samples/leaflet.html[程式碼]
以下是http://140.128.197.58:3838/sample-apps/leaflet1/的程式碼,直接放上rstudio跑是沒問題的

ui.R------------------------------------------

library(leaflet)
library(shiny)

fluidPage(
  h1(""hpc map test""),
  leafletOutput('map',width = ""100%"",height = 800)
)

server.R----------------------------------
library(shiny)
library(leaflet)

function(input,output){
  output$map <- renderLeaflet({
    leaflet() %>%
      addTiles() %>%
      setView(lng=120.601,lat=24.179,zoom=16)
  })
}

[錯誤訊息]
1.網頁訊息
點入剛剛講的http://140.128.197.58:3838/sample-apps/leaflet1/的網址會出現如下的錯誤訊息:
ERROR: An error has occurred. Check your logs or contact the app author for
clarification.

2.按F12選console,出現錯誤訊息
Failed to load resource: the server responded with a status of 500 (Internal
Server Error)

3.去伺服器進入cd /var/log/shiny-server
並無leaflet相關的錯訊息訊

[環境版本]
ubuntu 14.04.05
shiny-server 1.5.1
R 3.3.2
leaflet 1.0.1

不知道該如何處理,求解QQ!!



--","R_Language"
"1106","M.1481645600.A.B36","f496328mm","問題","快速傅立葉轉換 fft",2016-12-14 00:13:18,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別。
        建議先利用 google 爬文，如輸入
        「想查詢的關鍵字 site:www.ptt.cc/*/R_Language/」。

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我做時間序列問題，圖畫出來很像聲音訊號，所以想做傅立葉轉換，

找出重要變數http://imgur.com/5sVSOrp上圖是所有資料http://imgur.com/4pcXw6U上圖是兩年分重疊在一起，看的出來有關係，對預測應該有幫助


我使用fft這個函數，

由於我不太熟傅立葉轉換XD，不知道這個函數做的對不對，所以做幾個例子

主要想問，第一個數字轉換後，虛數都是0，而且值會變很大，

例如:

fft(c(0:5))
fft(c(1:5))

第一個值都是
15+0i

為什麼會這樣??

實際data做出來之後，取絕對值，再畫一張圖如下http://imgur.com/ALSxgqj第一個值也會非常高
================================================================
想請問做過傅立葉的大大，這樣是正常的嗎？


震幅要怎麼抓?直接取絕對值??

訊號除了頻率跟振福，還有其他變數影響嗎？



由於我的時間序列，間隔相同，所以頻率一樣，只有震幅不同

我的理解是這樣，不知道會不會影響

謝謝




--","R_Language"
"1107","M.1481641464.A.813","CAPPON","問題","R 自動產生目錄",2016-12-13 23:04:21,NA,NA,"[問題類型]:
請教各位前輩,因每天要固定產生資料
是否可以讓R自動產生每天日期的資料夾
讓產生出來的資料放置於資料夾裡
謝謝


[環境敘述]:

R.3.2.2

--","R_Language"
"1108","M.1481601066.A.D97","abc2090614","情報","寫輪眼 xaringan",2016-12-13 11:51:01,NA,NA,"[關鍵字]: xaringan, rmarkdown, remark.js

[出處]:http://slides.yihui.name/xaringan/zh-CN.html(說明)https://github.com/yihui/xaringan[重點摘要]:

謝益輝最新力作 - 寫輪眼

我看到他twitter上發這篇就笑了

不得不點進去看一下

簡單的說是用rmarkdown作投影片的套件


和其他ioslides之類不同的是可以在投影片內只放一張圖蓋滿整頁

等於是用rmarkdown去生成remark,js

然後可以自定CSS


--","R_Language"
"1109","M.1481549977.A.692","open272","問題","plotly套件畫圖-調整標記",2016-12-12 21:39:35,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:利用plotly套件畫bar plot時，要調整bar標註時發現找不到準確的Ｘ軸位置對應到相對應的bar中心，參考下圖http://imgur.com/y8sUzSM[程式範例]:library(plotly)Animals <- c(""giraffes"", ""orangutans"", ""monkeys"")SF_Zoo <- c(20, 14, 23)LA_Zoo <- c(12, 18, 29)data <- data.frame(Animals, SF_Zoo, LA_Zoo)y <- c(20,12,14,18,23,29)p <- plot_ly(data, x = Animals, y = SF_Zoo, type = 'bar', name = 'SF Zoo') %>%add_trace(y = LA_Zoo, name = 'LA Zoo') %>%layout(yaxis = list(title = 'Count'), barmode = 'group',annotations = list( x =data$Animals,y = y, text = y,xanchor = 'center', yanchor = 'bottom',showarrow = FALSE))[環境敘述]:

R version 3.2.5 Patched (2016-05-05 r70791)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.12.1 (unknown)

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] RJDBC_0.2-5        rJava_0.9-8        DBI_0.4-1          corrplot_0.77
 [6] RColorBrewer_1.1-2 googlesheets_0.2.0 gridExtra_2.2.1    plotly_4.5.2
[11] sp_1.2-3           ggplot2_2.1.0      DT_0.2             stringr_1.0.0
[16] tidyr_0.4.1        dplyr_0.4.3

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.6       cellranger_1.0.0  plyr_1.8.4        base64enc_0.1-3   t
oo
 [6] digest_0.6.10     evaluate_0.9      jsonlite_1.1      tibble_1.2        g
ta
[11] lattice_0.20-33   viridisLite_0.1.3 yaml_2.1.13       parallel_3.2.5    k
ni
[16] httr_1.1.0        htmlwidgets_0.7   gtools_3.5.0      grid_3.2.5        R
6_
[21] rmarkdown_1.0     foreign_0.8-66    purrr_0.2.1       magrittr_1.5      s
ca
[26] htmltools_0.3.5   assertthat_0.1    colorspace_1.2-6  stringi_1.1.1     l
az
[31] munsell_0.4.3


[關鍵字]:plotly , 視覺化--","R_Language"
"1110","M.1481519050.A.2A4","moutain5566","問題","時間序列的轉換函數",2016-12-12 13:04:07,NA,NA,"[問題類型]:
我想問關於時間序列轉換函數(TSA套件)中的參數要怎麼決定
arima(x,order, xtransf,transfer=list(c()))
小弟現在很困惑transfer的參數要怎麼決定
不知道有高手可以分享一下嗎？
謝謝

[軟體熟悉度]:
中等
[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:

[環境敘述]:
3.3.0

--","R_Language"
"1111","M.1481517526.A.5DE","brian80122","問題","Shiny output(搭配XLConnect)",2016-12-12 12:38:42,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前使用shiny server搭配XLConnect套件產生excel檔(xls或xlsx)讓使用者下載

當資料太大的時候沒辦法正常下載(ex.20萬rows)

已知原因：xls最多只能放置65536筆rows(參考:https://goo.gl/QOXHH)xlsx則out of memory（推測,點下載後45秒回傳頁面
                                ""server無回傳任何資料""）
目前想到的解法:1.分檔下載
               2.將檔案存在server作為temp 再傳輸給使用者
               3.直接使用csv格式,但要解決編碼問題
[程式範例]:若有需要再補上

[環境敘述]:
unbuntu 16G memary

sesionInfo():
R version 3.3.0 beta (2016-03-30 r70404)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.2 LTS

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
 [7] LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


[關鍵字]:shiny XLConnect

謝謝各位選擇性，也許未來有用--","R_Language"
"1112","M.1481440181.A.542","clansoda","問題","shiny 連結按鈕",2016-12-11 15:09:36,NA,NA,"各位好，我長話短說，我現在想要讓一個按鈕可以有一個連結

我現在是可以做到讓一些用tag$a塞進一個連結

但是我想做成按鈕的形式，想請問該如何做

--","R_Language"
"1113","M.1481217068.A.B1C","rutw","問題","wordcloud2 以及文字雲繪製 使用問題",2016-12-09 01:11:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我已經用 R Studio 抓了一筆300多行資訊的.csv 其格式如下

aaaa,10
bbbb,0
cccc,220
dddd,76

其中逗點前面的是「文字資訊」，後者是該文字「出現的頻率」
我現在想用wordcloud2套件來繪製文字雲

但是不知道是資料太大筆畫不出來還是怎樣
( 可是如果用 demoFreqC 這個範例檔是畫得出來的，
看起來這個檔案的字串量不比我的檔案少啊...)

如果資料超過約30筆，後面的都繪出不來，反之是畫得出來的

或者是如果有更好用的畫文字雲的方法，麻煩提供分享，謝謝大家了

csv 裡面的文字資訊是中文，分號等標點皆已用全形替代

[程式範例]:

>install.package(""wordcloud2"")

並把csv放到 working dictionary (第三行data確定有讀到csv)


library(wordcloud2)
data = read.csv(""testdata.csv"",sep="","",header = TRUE)
data
wordcloud2(data ,size = 2 ,color = ""random-dark"" ,backgroundColor = ""gray""
,fontFamily = ""文泉驛正黑"")

[環境敘述]:

R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] wordcloud2_0.2.0

loaded via a namespace (and not attached):
 [1] htmlwidgets_0.8 backports_1.0.4 magrittr_1.5    rprojroot_1.1
htmltools_0.3.5
 [6] tools_3.3.1     yaml_2.1.14     Rcpp_0.12.7     stringi_1.1.2
rmarkdown_1.2
[11] knitr_1.15.1    stringr_1.1.0   jsonlite_1.1    digest_0.6.10
evaluate_0.10

[關鍵字]:

繪製,文字雲,word_cloud,word cloud,wordcloud,wordcloud2,csv,csv檔,csv_file



--","R_Language"
"1114","M.1481190568.A.33F","qq9966pp","問題","新手讀取CSV排序問題",2016-12-08 17:49:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我用R讀取十個CSV，檔名是tr.1~tr.10
但是在R裡面呼叫的時候他們的順序是tr.1 tr.10 tr.2這樣子，
請問各位先進大大，該怎麼樣可以讓他們依照tr.1~tr.10順序讀取?

[關鍵字]:
排序

--","R_Language"
"1115","M.1481120220.A.185","owem0410","問題","無法安裝CHAID packages",2016-12-07 22:16:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:這次作業老師說要CHAID這個套件做但是好像現在在cran找不到google到可以用install.packages(""CHAID"", repos=""http://R-Forge.R-project.org"")這個下去安裝，但是裝不起來咕狗也找不到如何解決一直都出現Warning in install.packages :installation of package ‘CHAID’ had non-zero exit status[程式範例]:[環境敘述]:R version 3.2.3 (2015-12-10)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 16.04.1 LTSlocale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C               LC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C                  LC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] rsconnect_0.6 tools_3.2.3[關鍵字]:選擇性，也許未來有用--","R_Language"
"1116","M.1481106994.A.8CD","celestialgod","問題","Re: 資料整理的問題",2016-12-07 18:36:31,NA,NA,"※ 引述《ppp1987 (ppp)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 資料形式: ID　Day  X: 1   1    0.5: 1   3    0.1: 1   4    0.3: 1   7    0.5: 1   9    0.5: 1   11   0.2: 1   14   0.5: 2   1    0.1: 2   2    0.4: 2   5    0.8: 2   9    0.7: 2   11   0.1: 2   13   0.2: 現在我的資料每個ID(有100多個ID)每天有一筆觀測值（但不一定每天有）: 我現在想要算每個ID當天的前七天有觀測值的平均: 例如: (ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3: (ID=2,Day=11) Xhat=(0.7+0.8)/2: 現在已經用for迴圈跑出結果（但是很慢 2萬多筆約30分鐘）: 想請教各位大大有沒有比較快的方法: 謝謝我後來想到好像其實不用這樣轉換

直接算其實會是最快的，用rollapply反而很慢

library(data.table)
library(pipeR)

DT <- fread('ID Day X
            1   1    0.5
            1   3    0.1
            1   4    0.3
            1   7    0.5
            1   9    0.5
            1   11   0.2
            1   14   0.5
            2   1    0.1
            2   2    0.4
            2   5    0.8
            2   9    0.7
            2   11   0.1
            2   13   0.2')

mvAvg_f <- function(val, day, span = 7) {
  sapply(day, function(y){
    tmp <- day - y
    mean(val[which(tmp < 0 & tmp >= -span)])
  })
}
DT[ , x_mean := mvAvg_f(X, Day), by = .(ID)]

#     ID Day   X    x_mean
#  1:  1   1 0.5       NaN
#  2:  1   3 0.1 0.5000000
#  3:  1   4 0.3 0.3000000
#  4:  1   7 0.5 0.3000000
#  5:  1   9 0.5 0.3000000
#  6:  1  11 0.2 0.4333333
#  7:  1  14 0.5 0.4000000
#  8:  2   1 0.1       NaN
#  9:  2   2 0.4 0.1000000
# 10:  2   5 0.8 0.2500000
# 11:  2   9 0.7 0.6000000
# 12:  2  11 0.1 0.7500000
# 13:  2  13 0.2 0.4000000

benchmark:http://pastebin.com/Msib1dEhUnit: milliseconds
    expr       min        lq      mean   median        uq       max neval
 me_1    4630.6863 4675.9866 4760.6722 4724.280 4873.9444 4902.0621    10
 cywhale 3923.2040 3946.4697 3980.4697 3964.108 4030.4913 4063.7901    10
 me_2     301.1468  307.6433  313.9698  309.936  314.3256  349.7625    10

me_1是用melt.data.table + rollapply的程式

me_2是這個方法，只需要0.3秒就可以算完了

根本不需要去用CJ 或是 melt.data.table 再配上rollapply去處理

直接算是最簡單省事的，想複雜反而增加運算複雜度

QQ... 這也教了我一課


12/07 18:55補充：

可以直接簡化成下面這樣：

DT[ , x_mean := sapply(Day, function(s) mean(X[between(Day, s-7, s-1)])),
     by = .(ID)]

但是會比較慢，請看benchmark... 我也不懂why

12/07 19:07補充：

between效果不彰，如果換成下面這樣就會很快了

DT[ , x_mean := sapply(Day, function(s) mean(X[Day >= s-7 & Day < s])),
     by = .(ID)]

請看benchmark，三萬列只要0.15秒就搞定了

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1117","M.1481050517.A.581","HeroNoah","問題","Re: 資料整理的問題",2016-12-07 02:55:14,NA,NA,"別欺負中研院的學弟啦 XD

先看 ppp1987 提供的資料

ID　Day  X
1   1    0.5
1   3    0.1
1   4    0.3
1   7    0.5
1   9    0.5
1   11   0.2
1   14   0.5
2   1    0.1
2   2    0.4
2   5    0.8
2   9    0.7
2   11   0.1
2   13   0.2

根據 ppp1987 提供的說明如下:

我現在想要算每個ID當天的前七天有觀測值的平均

例如

(ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3

(ID=2,Day=11) Xhat=(0.7+0.8)/2

因此我們可以知道 Day = 9, 其實是算 Day 在 2 ~ 8 之間有資料的平均

所以 (ID=2,Day=9) = (0.4 + 0.8) / 2 = 0.6

來看 cywhale 的答案:

    ID Day        Mx
 1:  1   8 0.3500000
 2:  1   9 0.3000000
 3:  1  10 0.3500000
 4:  1  11 0.4333333
 5:  1  12 0.4000000
 6:  1  13 0.4000000
 7:  1  14 0.4000000
 8:  2   8 0.4333333
 9:  2   9 0.6000000
10:  2  10 0.7500000
11:  2  11 0.7500000
12:  2  12 0.5333333
13:  2  13 0.4000000
14:  2  14 0.3333333

cywhale 的 (ID=2, Day=9) 為 0.6 [正確]

來看 celestialgod 的答案:

#     ID Day   X x_mean
#  1:  1   1 0.5     NA
#  2:  1   3 0.1   0.50
#  3:  1   4 0.3   0.30
#  4:  1   7 0.5   0.30
#  5:  1   9 0.5   0.30
#  6:  1  11 0.2   0.50
#  7:  1  14 0.5   0.35
#  8:  2   1 0.1     NA
#  9:  2   2 0.4   0.10
# 10:  2   5 0.8   0.25
# 11:  2   9 0.7   0.80
# 12:  2  11 0.1   0.75
# 13:  2  13 0.2   0.40

celestialgod 的 (ID=2, Day=9) 為 0.8 [錯誤]

而且 0.8 這個數字, 不曾出現在 cywhale 的答案裡

相同的情況還有 (ID=1, Day=11)

cywhale 的 (ID=1, Day=11) 為 0.4333 [正確]

celestialgod 的 (ID=1, Day=11) 為 0.5 [錯誤]※ 引述《celestialgod (天)》之銘言：: 標題: Re: [問題] 資料整理的問題: 時間: Mon Dec  5 17:56:46 2016:: ※ 引述《ppp1987 (ppp)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 資料形式: : ID　Day  X: : 1   1    0.5: : 1   3    0.1: : 1   4    0.3: : 1   7    0.5: : 1   9    0.5: : 1   11   0.2: : 1   14   0.5: : 2   1    0.1: : 2   2    0.4: : 2   5    0.8: : 2   9    0.7: : 2   11   0.1: : 2   13   0.2: : 現在我的資料每個ID(有100多個ID)每天有一筆觀測值（但不一定每天有）: : 我現在想要算每個ID當天的前七天有觀測值的平均: : 例如: : (ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3: : (ID=2,Day=11) Xhat=(0.7+0.8)/2: : 現在已經用for迴圈跑出結果（但是很慢 2萬多筆約30分鐘）: : 想請教各位大大有沒有比較快的方法: : 謝謝:: cy大的方法應該比較快XD:: 不過我還是把我的方法寫出來...:: library(data.table): library(pipeR): library(zoo): library(plyr):: DT <- fread('ID Day X:             1   1    0.5:             1   3    0.1:             1   4    0.3:             1   7    0.5:             1   9    0.5:             1   11   0.2:             1   14   0.5:             2   1    0.1:             2   2    0.4:             2   5    0.8:             2   9    0.7:             2   11   0.1:             2   13   0.2'):: DT[ , Day := factor(Day, levels = seq(min(DT$Day), max(DT$Day)))]:: mean2 <- function(x) {:   if (length(x) == 1):     return(NA):   mean(head(x, length(x) - 1), na.rm = TRUE): }:: DT2 <- dcast.data.table(DT, ID ~ Day, sum, fill = NA, drop = FALSE,:                         value.var = ""X""): meanDT <- DT2[ , 2:ncol(DT2)] %>>% as.matrix %>>% t %>>%:   rollapply(8, mean2, partial = TRUE, align = ""right"") %>>% data.table %>>%:   melt.data.table(measure.var = 1:ncol(.), variable.name = ""ID"",:                   value.name = ""x_mean"", variable.factor = FALSE) %>>%:   `[`(j = Day := 1:(ncol(DT2)-1), by = .(ID)) %>>%:   `[`(j = ID := as.integer(mapvalues(ID, paste0(""V"", 1:nrow(DT2)), DT2$ID))): merge(DT, meanDT, by = c(""ID"", ""Day"")): #     ID Day   X x_mean: #  1:  1   1 0.5     NA: #  2:  1   3 0.1   0.50: #  3:  1   4 0.3   0.30: #  4:  1   7 0.5   0.30: #  5:  1   9 0.5   0.30: #  6:  1  11 0.2   0.50: #  7:  1  14 0.5   0.35: #  8:  2   1 0.1     NA: #  9:  2   2 0.4   0.10: # 10:  2   5 0.8   0.25: # 11:  2   9 0.7   0.80: # 12:  2  11 0.1   0.75: # 13:  2  13 0.2   0.40:: 稍微改一下cy大的code，讓他跟我的output一致:

celestialgod 的答案很明顯的跟 cywhale 的答案不一樣,

讓 cywhale 的答案跟 celestialgod 的答案一致

那不就是把正確的改錯誤的嗎 ?

幫 cywhale QQ: 做了一點benchmark，code: http://pastebin.com/Msib1dEh:: 我的作法會明顯慢一點，三萬列差大概一秒，cy大的做法比較好:: --: R資料整理套件系列文：: magrittr    #1LhSWhpH (R_Language) https://goo.gl/72l1m9: data.table  #1LhW7Tvj (R_Language) https://goo.gl/PZa6Ue: dplyr(上.下)   #1LhpJCfB,#1Lhw8b-s (R_Language) https://goo.gl/I5xX9b: tidyr       #1Liqls1R (R_Language) https://goo.gl/i7yzAz: pipeR       #1NXESRm5 (R_Language) https://goo.gl/zRUISx:: --","R_Language"
"1118","M.1481037620.A.1D5","cywhale","問題","利用opencpu API傳遞檔案與參數給Rpackage",2016-12-06 23:20:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)我寫了一個工作上用的小package，利用opencpu可以實現API傳遞參數叫用函數運算
(opencpu 可參考作者github:https://github.com/jeroenooms/opencpuSend requests through curl 大致像
curlhttp://myHost/ocpu/library/myPackage/R/myFunc/json-H ""Content-Type:
application/json"" -d '{""argument1"":""..."",""argument3"":""..."",..}' -o output.json

原本若要傳遞像vector這種data，就以json format一樣放在argument傳就好了，
但如果我允許user 把data 放在 file.csv中，我發現我沒辦法在同一個request中放進
curl -F[email<U+00A0>protected]-H .. -d '{""argument1"":...}'.. (不能同時-F, ... -d

所以問題1 是，我該如何同時pass file and other arguments 在curl中？

另外在server端，我叫用自己寫的package，也要相對應來做處理傳遞過來的檔案，
但我不太確定該怎麼寫這段，怎麼樣讀取一個由curl 傳過來的檔案？
找不太到網路上有類似這樣實作的例子，懷疑自己是不是根本想錯方向~
目前覺得可能是這樣做？ (如底下##

#======== in my Package in server, called by users through Opencpu

myFunc <- function (file, data=c(), argument2, argument3,...) {

  if (length(data)>0) { ##照舊方式 data放在argument傳遞，這部分沒問題

    DT <- data.table(matrix(data, ncol=2,byrow=byrow))

  } else {
#### data如果放在file，所以問題2是: Where (and How) I can fetch the file
#### I received if curl successfully send a file? like the following code?

    #filedt <- httr::POST(
     #  url = ""http://myHost/ocpu/library/myPackage/R/myFunc"",#  body = upload_file(
     #    path =  path.expand(file),
     #    type = 'text/csv'),
     # verbose()
    #)

    #DT <- fread(##filedt)
 }

 ## then handle DT with other arguments ###
 ...
 return(output)
}

想請問有沒有類似經驗可以建議我怎麼處理這樣的request
或者別種實現方法、範例皆可~~ 謝謝

[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[環境敘述]:請提供 sessionInfo() 的輸出結果，R version 3.3.2 (2016-10-31)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 14.04.5 LTSlocale:[1] LC_CTYPE=en_PH.UTF-8       LC_NUMERIC=C[3] LC_TIME=zh_TW.UTF-8        LC_COLLATE=en_PH.UTF-8[5] LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=en_PH.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C[9] LC_ADDRESS=C               LC_TELEPHONE=C[11] LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   base[關鍵字]:API, opencpu, curl--","R_Language"
"1119","M.1480939888.A.1D4","banana08","問題","boosting",2016-12-05 20:11:26,NA,NA,"各位版上的高手
最近對於bagging和boosting在研究
在網路上查詢boosting在R如何運用看到了一些package （Ex.gbm、mboost等）

想請問這些包裹的差別在哪裡呢？或者是我要如何運用R寫出boosting呢？

希望有版上高手可以幫我解惑
-----
Sent from JPTT on my iPhone

--","R_Language"
"1120","M.1480931811.A.FB5","celestialgod","問題","Re: 資料整理的問題",2016-12-05 17:56:46,NA,NA,"※ 引述《ppp1987 (ppp)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 資料形式: ID　Day  X: 1   1    0.5: 1   3    0.1: 1   4    0.3: 1   7    0.5: 1   9    0.5: 1   11   0.2: 1   14   0.5: 2   1    0.1: 2   2    0.4: 2   5    0.8: 2   9    0.7: 2   11   0.1: 2   13   0.2: 現在我的資料每個ID(有100多個ID)每天有一筆觀測值（但不一定每天有）: 我現在想要算每個ID當天的前七天有觀測值的平均: 例如: (ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3: (ID=2,Day=11) Xhat=(0.7+0.8)/2: 現在已經用for迴圈跑出結果（但是很慢 2萬多筆約30分鐘）: 想請教各位大大有沒有比較快的方法: 謝謝cy大的方法應該比較快XD

不過我還是把我的方法寫出來...

library(data.table)
library(pipeR)
library(zoo)
library(plyr)

DT <- fread('ID Day X
            1   1    0.5
            1   3    0.1
            1   4    0.3
            1   7    0.5
            1   9    0.5
            1   11   0.2
            1   14   0.5
            2   1    0.1
            2   2    0.4
            2   5    0.8
            2   9    0.7
            2   11   0.1
            2   13   0.2')

DT[ , Day := factor(Day, levels = seq(min(DT$Day), max(DT$Day)))]

mean2 <- function(x) {
  if (length(x) == 1)
    return(NA)
  mean(head(x, length(x) - 1), na.rm = TRUE)
}

DT2 <- dcast.data.table(DT, ID ~ Day, sum, fill = NA, drop = FALSE,
                        value.var = ""X"")
meanDT <- DT2[ , 2:ncol(DT2)] %>>% as.matrix %>>% t %>>%
  rollapply(8, mean2, partial = TRUE, align = ""right"") %>>% data.table %>>%
  melt.data.table(measure.var = 1:ncol(.), variable.name = ""ID"",
                  value.name = ""x_mean"", variable.factor = FALSE) %>>%
  `[`(j = Day := 1:(ncol(DT2)-1), by = .(ID)) %>>%
  `[`(j = ID := as.integer(mapvalues(ID, paste0(""V"", 1:nrow(DT2)), DT2$ID)))
merge(DT, meanDT, by = c(""ID"", ""Day""))

#     ID Day   X    x_mean
#  1:  1   1 0.5        NA
#  2:  1   3 0.1 0.5000000
#  3:  1   4 0.3 0.3000000
#  4:  1   7 0.5 0.3000000
#  5:  1   9 0.5 0.3000000
#  6:  1  11 0.2 0.4333333
#  7:  1  14 0.5 0.4000000
#  8:  2   1 0.1        NA
#  9:  2   2 0.4 0.1000000
# 10:  2   5 0.8 0.2500000
# 11:  2   9 0.7 0.6000000
# 12:  2  11 0.1 0.7500000
# 13:  2  13 0.2 0.4000000

稍微改一下cy大的code，讓他跟我的output一致

做了一點benchmark，code:http://pastebin.com/Msib1dEh我的作法會明顯慢一點，三萬列差大概一秒，cy大的做法比較好

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1121","M.1480931331.A.8C2","samex4x4","問題","取代table()函數的方法",2016-12-05 17:48:48,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:table()函數的確很好用，可以直接Freq我要的數值出來例如 a <- data.frame(table(dataframe$col))但是他會轉成factor這件事情很麻煩，我還要as.numeric(as.character())再做修正我目前是另外在data.frame加一欄都是1 再選取這兩欄 aggregate sum 感覺很蠢XDDD有沒有更好的做法啊?[程式範例]:[環境敘述]:[關鍵字]:table()--","R_Language"
"1122","M.1480930349.A.3A7","cywhale","問題","Re: 資料整理的問題",2016-12-05 17:32:27,NA,NA,"library(data.table)
library(magrittr)
library(zoo)

dt <- fread('ID Day X
  1   1    0.5
  1   3    0.1
  1   4    0.3
  1   7    0.5
  1   9    0.5
  1   11   0.2
  1   14   0.5
  2   1    0.1
  2   2    0.4
  2   5    0.8
  2   9    0.7
  2   11   0.1
  2   13   0.2', header=T) %>%
  setkey(ID, Day)

dt[CJ(unique(ID), seq(min(Day), max(Day)))][,{.(
  Day=rollapply(Day,8,max),
  Mx=rollapply(X, 8, function(x) mean(x[-length(x)],na.rm=T)))}, by = .(ID)]

    ID Day        Mx
 1:  1   8 0.3500000
 2:  1   9 0.3000000
 3:  1  10 0.3500000
 4:  1  11 0.4333333
 5:  1  12 0.4000000
 6:  1  13 0.4000000
 7:  1  14 0.4000000
 8:  2   8 0.4333333
 9:  2   9 0.6000000
10:  2  10 0.7500000
11:  2  11 0.7500000
12:  2  12 0.5333333
13:  2  13 0.4000000
14:  2  14 0.3333333※ 引述《ppp1987 (ppp)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 資料形式: ID　Day  X: 1   1    0.5: 1   3    0.1: 1   4    0.3: 1   7    0.5: 1   9    0.5: 1   11   0.2: 1   14   0.5: 2   1    0.1: 2   2    0.4: 2   5    0.8: 2   9    0.7: 2   11   0.1: 2   13   0.2: 現在我的資料每個ID(有100多個ID)每天有一筆觀測值（但不一定每天有）: 我現在想要算每個ID當天的前七天有觀測值的平均: 例如: (ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3: (ID=2,Day=11) Xhat=(0.7+0.8)/2: 現在已經用for迴圈跑出結果（但是很慢 2萬多筆約30分鐘）: 想請教各位大大有沒有比較快的方法: 謝謝--","R_Language"
"1123","M.1480927295.A.756","littledou","問題","SparkR 執行問題",2016-12-05 16:41:32,NA,NA,"- 問題:Error in invokeJava(isStatic = FALSE, objId$id, methodName, ...) :[問題類型]:程式諮詢[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:練習SparkR[程式範例]:http://ideone.com/klxa5M[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] SparkR_2.0.2loaded via a namespace (and not attached):[1] tools_3.3.1[關鍵字]:選擇性，也許未來有用--","R_Language"
"1124","M.1480925471.A.B34","lenofire","問題","Adabag package 問題",2016-12-05 16:11:07,NA,NA,"我想問一下Adabag package 能不能處理多分類資料，因為我在跑18613 筆資料，共分3類
。從上星期四開始跑，但到今天還沒跑完，是我的資料有問題？我是參考他的語法，mic_
train.adaboost<- boosting (Y ~. , data=mic_train[sub,],mfinal=5)

--","R_Language"
"1125","M.1480924567.A.9DC","NPLNT","問題","有年跟月的time series畫圖",2016-12-05 15:56:00,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
手上有一筆time series的資料
除了主要變數以外，
另有兩個variable年跟月

像是
year  month  x
2000   01    15
2000   02    17
2000   03    13
...    ...   ...
2000   12    18
2001   01    11
...    ...   ...

我想要畫出x的走勢圖，但時間最小單位只到月，沒有日期的資料
請問要怎樣在圖中標出正確的年跟月
謝謝


--","R_Language"
"1126","M.1480922765.A.008","ppp1987","問題","資料整理的問題",2016-12-05 15:26:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

資料形式
ID　Day  X
1   1    0.5
1   3    0.1
1   4    0.3
1   7    0.5
1   9    0.5
1   11   0.2
1   14   0.5
2   1    0.1
2   2    0.4
2   5    0.8
2   9    0.7
2   11   0.1
2   13   0.2

現在我的資料每個ID(有100多個ID)每天有一筆觀測值（但不一定每天有）
我現在想要算每個ID當天的前七天有觀測值的平均
例如
(ID=1,Day=9) Xhat=(0.5+0.3+0.1)/3
(ID=2,Day=11) Xhat=(0.7+0.8)/2


現在已經用for迴圈跑出結果（但是很慢 2萬多筆約30分鐘）
想請教各位大大有沒有比較快的方法
謝謝


--","R_Language"
"1127","M.1480919230.A.077","cano7127","問題","ggmap",2016-12-05 14:27:08,NA,NA,"[問題敘述]:

想要畫出地圖，出現問題不知如何解決



[程式範例]:


library(ggmap)
map <- get_map(location=""Taipei"", zoom=11,color=""bw"")
ggmap(map)

Error in as.vector(y) : attempt to apply non-function

謝謝

--","R_Language"
"1128","M.1480918992.A.EF4","CAPPON","問題","讀取excel sheet檔名",2016-12-05 14:23:10,NA,NA,"在R3.2.2

有什麼指令可以讀取sheet的檔名呢？
謝謝

--","R_Language"
"1129","M.1480916213.A.40F","celestialgod","問題","Re: ggplot2迴圈",2016-12-05 13:36:51,NA,NA,"※ 引述《CAPPON (JI3)》之銘言：: 舉個例子: aaa=matrix(c(""A"",""A"",""A"",""B"",""B"",""B"",""C"",""C"",""A1"",""A2"",""A3"",""A1"",""A2"",""A3"",""A1: "",""A2"",0.92,0.95,0.94,0.91,0.99,0.98,0.88,0.91,0.92,0.94,0.95,0.96,0.98,0.92,0: .94,0.92),8,4): dimnames(aaa)[[2]]=c(""Index"",""Item"",""M08"",""12/2""): 1.by index畫圖，相同的index畫在同一張，item為每一條線。所以會有3張圖...想要一頁: 呈現2張圖: 2.因欄位名稱有文字跟日期...該怎麼處理呢？日期部份讀入會變成x12.2: 遇到這2個問題，再麻煩前輩幫忙了: 謝謝: ※ 引述《CAPPON (JI3)》之銘言：: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [環境敘述]:: : R version 3.3.2: : 請教前輩: : 想用ggplot產生多張圖 , 一頁放6張圖: : 用迴圈去寫時,無法產生圖形: : 不曉得是哪裡出錯了: : 但如果用i=1 , i=2 一個一個跑卻是沒問題: : 另外 產生的pdf檔圖形的大小是否可以更改呢?: : 謝謝: : pdf(file=paste(""D:\\123123"", "".pdf"", sep="""")): :     for ( i in 1:2){: : ggplot(data_melt_TN[data_melt_TN[,3]==TN[(i-1)*6+1]|data_melt_TN[,3]==TN[(i-: 1): : aes(x = variable, y = value, group = id,: :                            colour = Item)) + geom_point(cex=2) + geom_line(): +: :   scale_color_manual(values=c(""red"",""orange"",""green""))+: :   facet_wrap(~Index,ncol=2)+: :   theme(axis.text.x = element_text(angle = 90, hjust = 1,size=12)): : }: : dev.off()我不知道你圖的x軸是什麼，我隨便抓一個來畫

再來是character, numeric混雜的資料請用data.frame

如果連R的基本物件data.frame都不熟

建議先去找本R書念熟，或是參考置底的R翻轉教室學習相關知識再繼續比較好

不然下面的程式對你來說，非  常  困  難我已經盡量用我想到最簡單的方法去寫了

但是do.call那段，我想不到更好的解法，只能用那個方法...

至於grid跟gridExtra，裡面有不少東西，要玩到通透要花一點時間 (我也不熟)

再來是關於你問的日期部分，要自己轉換

下面就是程式碼：

library(ggplot2)
library(grid)
library(gridExtra)
DF <- data.frame(Index = c(""A"",""A"",""A"",""B"",""B"",""B"",""C"",""C""),
                 Item = c(""A1"",""A2"",""A3"",""A1"",""A2"",""A3"",""A1"",""A2""),
                 M08 = c(0.92,0.95,0.94,0.91,0.99,0.98,0.88,0.91),
                 Dec02 = c(0.92,0.94,0.95,0.96,0.98,0.92,0.94,0.92),
                 stringsAsFactors = FALSE)


uniIndex <- unique(DF$Index)
graphs <- vector(""list"", length(uniIndex))
for (i in seq_along(uniIndex))
  graphs[[i]] <- ggplot(subset(DF, DF$Index == uniIndex[i]), aes(M08, Dec02))+
    geom_line()

pdf(""graphs.pdf"")
for (i in 1:ceiling(length(uniIndex) / 2)) {
  k <- (2*i-1):min(2*i, length(uniIndex))
  if (length(k) == 2) {
    print(do.call(grid.arrange, c(graphs[k], list(ncol = 2))))
  } else {
    print(do.call(grid.arrange, list(graphs[[k]], nullGrob(), ncol = 2)))
  }
}
dev.off()

grid.arrange其他參數可以在arrangeGrob找到

參數設定方式就是跟ncol放在同一個list就好


最後，我覺得如果你要用ggplot完成你想要的圖

真的需要花一點時間去找，然後刻出來

這裡也不只這種方法，還可以一次過濾兩種index

然後用facet_wrap(~Index)去處理，再把這圖print出來

這樣最後也能達到類似的效果，只是第三張圖會是全幅的

當然這方法會比我寫的簡單，這裡我就只敘述而已

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1130","M.1480907013.A.BFC","CAPPON","問題","Re: ggplot2迴圈",2016-12-05 11:03:30,NA,NA,"舉個例子

aaa=matrix(c(""A"",""A"",""A"",""B"",""B"",""B"",""C"",""C"",""A1"",""A2"",""A3"",""A1"",""A2"",""A3"",""A1
"",""A2"",0.92,0.95,0.94,0.91,0.99,0.98,0.88,0.91,0.92,0.94,0.95,0.96,0.98,0.92,0
.94,0.92),8,4)
dimnames(aaa)[[2]]=c(""Index"",""Item"",""M08"",""12/2"")

1.by index畫圖，相同的index畫在同一張，item為每一條線。所以會有3張圖...想要一頁
呈現2張圖
2.因欄位名稱有文字跟日期...該怎麼處理呢？日期部份讀入會變成x12.2

遇到這2個問題，再麻煩前輩幫忙了
謝謝※ 引述《CAPPON (JI3)》之銘言：: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [環境敘述]:: R version 3.3.2: 請教前輩: 想用ggplot產生多張圖 , 一頁放6張圖: 用迴圈去寫時,無法產生圖形: 不曉得是哪裡出錯了: 但如果用i=1 , i=2 一個一個跑卻是沒問題: 另外 產生的pdf檔圖形的大小是否可以更改呢?: 謝謝: pdf(file=paste(""D:\\123123"", "".pdf"", sep="""")):     for ( i in 1:2){: ggplot(data_melt_TN[data_melt_TN[,3]==TN[(i-1)*6+1]|data_melt_TN[,3]==TN[(i-1): aes(x = variable, y = value, group = id,:                            colour = Item)) + geom_point(cex=2) + geom_line()+:   scale_color_manual(values=c(""red"",""orange"",""green""))+:   facet_wrap(~Index,ncol=2)+:   theme(axis.text.x = element_text(angle = 90, hjust = 1,size=12)): }: dev.off()--","R_Language"
"1131","M.1480900955.A.532","jklkj","問題","關於length的定義",2016-12-05 09:22:33,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
之前在用nrow跟ncol的時候有找到說如果length用在檢查data frame回傳值會跟ncol一樣
可是我在用nrow跟ncol的時候沒有問題，用length檢查ncol也沒問題
但是如果我用length(t(test.data))數字就會是行列相乘
有誰知道這是為什麼嗎？

[程式範例]:

length(t(test.data))

[環境敘述]:

[關鍵字]:

選擇性，也許未來有用

--","R_Language"
"1132","M.1480856978.A.EBB","celestialgod","問題","Re: 如何將html_nodes的資料轉成CSV",2016-12-04 21:09:35,NA,NA,"※ 引述《lovedmagic (EricZou)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 參考了一下板上的資訊，對於用rvest轉CSV檔還是不瞭解: 請求指點迷津: [程式範例]:: if (!""installr"" %in% installed.packages()) install.packages(""installr""): library(installr): require2(rvest): require2(stringr): require2(pipeR): ateam1 <- read_html(""https://www.kickstarter.com/mexico?ref=hero""): asd = html_nodes(ateam1, ""ul.project-stats""): html_text(asd): [1] ""\n53% funded\n\n\nMX$ 24,235 pledged\n\n\nFunded\n\n\n\n\n\n: [2] ""\n4% funded\n\n\nMX$ 7,305 pledged\n\n\nFunded\n\n\n\n\n\n: [3] ""\n67% funded\n\n\nMX$ 54,050 pledged\n\n\nFunded\n\n\n\n\n\n: 如果我將資料匯出成CSV有什麼辦法呢?直接用write.csv會出現他是nodes: 所以不能用data.frame的方式輸出，而其實我只要53%- $24235 、4%: - $7305 這兩個資料，那我又有什麼其他的方法可以完成呢?: [環境敘述]:: Windows 7: R 3.2.2: [關鍵字]:: html、網路爬蟲使用html_structure去看html的架構再根據架構去剖析出你要的資訊即可

示範如下：

if (!""installr"" %in% installed.packages()) install.packages(""installr"")
library(installr)
require2(rvest)
require2(pipeR)
require2(plyr)

stats <- read_html(""https://www.kickstarter.com/mexico?ref=hero"")%>>%
  html_nodes(""ul.project-stats"")
# html_structure(stats[[1]]) # 用來查看node資料資訊

laply(stats, function(x){
  c(
    funded = html_node(x, ""div.project-stats-value"") %>>% html_text,
    pledged = html_node(x, ""span.money"") %>>% html_text
  )
})

可能剩下就是處理一些文字的，例如把%數跟$轉成數字

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1133","M.1480856539.A.695","lovedmagic","問題","如何將html_nodes的資料轉成CSV",2016-12-04 21:02:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
參考了一下板上的資訊，對於用rvest轉CSV檔還是不瞭解
請求指點迷津


[程式範例]:

if (!""installr"" %in% installed.packages()) install.packages(""installr"")
library(installr)
require2(rvest)
require2(stringr)
require2(pipeR)

ateam1 <- read_html(""https://www.kickstarter.com/mexico?ref=hero"")asd = html_nodes(ateam1, ""ul.project-stats"")
html_text(asd)

[1] ""\n53% funded\n\n\nMX$ 24,235 pledged\n\n\nFunded\n\n\n\n\n\n
[2] ""\n4% funded\n\n\nMX$ 7,305 pledged\n\n\nFunded\n\n\n\n\n\n
[3] ""\n67% funded\n\n\nMX$ 54,050 pledged\n\n\nFunded\n\n\n\n\n\n

如果我將資料匯出成CSV有什麼辦法呢?直接用write.csv會出現他是nodes
所以不能用data.frame的方式輸出，而其實我只要53%- $24235 、4%
- $7305 這兩個資料，那我又有什麼其他的方法可以完成呢?



[環境敘述]:
Windows 7
R 3.2.2


[關鍵字]:

html、網路爬蟲

--","R_Language"
"1134","M.1480788478.A.0F3","h920032","問題","ptt text mining 操作問題",2016-12-04 02:07:46,NA,NA,"[問題類型]:
因為要做報告 想要試著做ptt textmining 照著陳嘉葳大大的步驟做結果碰到了一對問題

[軟體熟悉度]:
新手(第一次寫R，因為要寫報告才接觸的XD)

[問題敘述]:
1.無法安裝tmcn套件
安裝後會出現
* installing *source* package 'tmcn' ...
** libs

*** arch - i386
Warning: 執行中命令 'make -f ""C:/PROGRA~1/R/R-32~1.5/etc/i386/Makeconf"" -f
""C:/PROGRA~1/R/R-32~1.5/share/make/winshlib.mk""
SHLIB_LDFLAGS='$(SHLIB_CXXLDFLAGS)' SHLIB_LD='$(SHLIB_CXXLD)'
SHLIB=""tmcn.dll"" OBJECTS=""tmcn_encoding_isbig5.o tmcn_encoding_isgb18030.o
tmcn_encoding_isgb2312.o tmcn_encoding_isgbk.o tmcn_encoding_isutf8.o""' 已有狀
態 127
ERROR: compilation failed for package 'tmcn'
* removing 'C:/Program Files/R/R-3.2.5/library/tmcn'

The downloaded source packages are in
        ‘C:\Users\家\AppData\Local\Temp\RtmpS8wKpT\downloaded_packages’
Warning messages:
1: 執行中命令 '""C:/PROGRA~1/R/R-32~1.5/bin/i386/R"" CMD INSTALL -l ""C:\Program
Files\R\R-3.2.5\library"" C:\Users\家
\AppData\Local\Temp\RtmpS8wKpT/downloaded_packages/tmcn_0.1-4.tar.gz' 已有狀態
 1
2: In install.packages(""tmcn"", repos = ""http://R-Forge.R-project.org"",:
  installation of package ‘tmcn’ had non-zero exit status

2.無法安裝Rwordseg
安裝會出現
* installing *source* package 'Rwordseg' ...
** R
** demo
** inst
** preparing package for lazy loading
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: fun(libname, pkgname)
  error: JAVA_HOME cannot be determined from the Registry
Error : package 'rJava' could not be loaded
ERROR: lazy loading failed for package 'Rwordseg'
* removing 'C:/Program Files/R/R-3.2.5/library/Rwordseg'

The downloaded source packages are in
        ‘C:\Users\家\AppData\Local\Temp\RtmpS8wKpT\downloaded_packages’
Warning messages:
1: 執行中命令 '""C:/PROGRA~1/R/R-32~1.5/bin/i386/R"" CMD INSTALL -l ""C:\Program
Files\R\R-3.2.5\library"" C:\Users\家
\AppData\Local\Temp\RtmpS8wKpT/downloaded_packages/Rwordseg_0.2-1.tar.gz' 已有
狀態 1
2: In install.packages(""Rwordseg"", repos = ""http://R-Forge.R-project.org""):
  installation of package ‘Rwordseg’ had non-zero exit status

3.執行程式碼出現Error in curl::curl_fetch_memory(url, handle = handle) :
  Couldn't resolve host name 程式碼如下

4.求一個可以跟《用R進行中文 text Mining》做到相同效果的程式碼

[程式範例]:
data <- data[data!=""www.ptt.cc""]
setwd(""C:\\Users\\家\\Desktop\\R Test\\新增資料夾"")
doc.size <- length(data)
doc.list<-c()
for( k in 1:length(data)){
  html <- content(GET(data[k],config=set_cookies(""over18""=""1"")),
encoding=""UTF-8"")
  doc <- xpathSApply(html, ""//div[@id='main-content']"", xmlValue)
  if(length(as.character(doc))==1){
    name <- strsplit(data[k], '/')[[1]][4]
    write(doc, gsub('html', 'txt', name))
  }
}

[環境敘述]:
R 3.2.5 x32

[關鍵字]:
ptt text mining

--","R_Language"
"1135","M.1480779289.A.1B9","CAPPON","問題","ggplot2迴圈",2016-12-03 23:34:47,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[環境敘述]:

R version 3.3.2


請教前輩
想用ggplot產生多張圖 , 一頁放6張圖
用迴圈去寫時,無法產生圖形
不曉得是哪裡出錯了
但如果用i=1 , i=2 一個一個跑卻是沒問題
另外 產生的pdf檔圖形的大小是否可以更改呢?
謝謝

pdf(file=paste(""D:\\123123"", "".pdf"", sep=""""))


    for ( i in 1:2){
ggplot(data_melt_TN[data_melt_TN[,3]==TN[(i-1)*6+1]|data_melt_TN[,3]==TN[(i-1)*6+2]|data_melt_TN[,3]==TN[(i-1)*6+3]|data_melt_TN[,3]==TN[(i-1)*6+4]|data_melt_TN[,3]==TN[(i-1)*6+5]|data_melt_TN[,3]==TN[i*6],],
aes(x = variable, y = value, group = id,
                           colour = Item)) + geom_point(cex=2) + geom_line()+
  scale_color_manual(values=c(""red"",""orange"",""green""))+
  facet_wrap(~Index,ncol=2)+
  theme(axis.text.x = element_text(angle = 90, hjust = 1,size=12))
}

dev.off()

--","R_Language"
"1136","M.1480754351.A.5E3","lovedmagic","問題","html網路爬蟲，網頁無法跑出資料",2016-12-03 16:39:07,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想將某個網頁的資料讀取後分析資料，但是一開始就卡關

[程式範例]:
library(XML)
library(RCurl)

ur1=getURL(""https://www.kickstarter.com/discover/advanced?woe_id=23424900&sort=magic&seed=2467921&page=2"")ur1.1 = readHTMLTable(ur1)
test_doc = htmlParse(ur1,encoding=""big5"")
test = readHTMLTable(test_doc)
View(test)

我一開始是直接使用ur1=""網址""，後來在板上發現有另外一個方法就是getURL(""網址"")
，之後用readHTMLTable(ur1)去做，但是我不瞭解htmlParse不知道有什麼作用，我在
板上也看到許多econding寫成""big5""和""UT-8""(←這是印象)，好像會發生編碼還是轉
碼上的問題導致之後R的操作中文部分都會變成亂碼，最後用View(test)去跑發生了
Error in View(test) : invalid 'x' argument 的問題

我想請問各位大大，關於kickstart我想取用裡面每一個project就是每一個分頁理面
的backers和pledge of MX$ goal還有days to go三項數字，但是我光是讀取頁面就已
經發生問題了，請問我在readHTMLTable這方面究竟出現什麼樣的問題呢？



[環境敘述]:
Windows 7
R 3.2.2

[關鍵字]:

網路爬蟲、html

--","R_Language"
"1137","M.1480695393.A.516","celestialgod","問題","Re: 特定條件下的列與列時間運算",2016-12-03 00:16:28,NA,NA,"※ 引述《joson4921 (特務)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 各位先進大家好,為了方便敘述問題,先節錄以下資料方便說明:: Goback  NameZh     Leave  Time               UniqueBusID: 0       大興一街   TRUE   2015/1/1 13:10:32  大興一街->屯區藝文中心162: 0       大興五街   FALSE  2015/1/1 13:10:39　大興一街->屯區藝文中心162: 0       大興五街　 TRUE　 2015/1/1 13:10:51  大興一街->屯區藝文中心162: 0     屯區藝文中心 FALSE  2015/1/1 13:11:20  大興一街->屯區藝文中心162: 0     屯區藝文中心 TRUE   2015/1/1 13:12:32  大興一街->屯區藝文中心162: 1     屯區藝文中心 FALSE  2015/1/1 13:36:50  屯區藝文中心->莒光新城163: 1     屯區藝文中心 TRUE   2015/1/1 13:36:56  屯區藝文中心->莒光新城163: 1       大興五街   FALSE  2015/1/1 13:37:28  屯區藝文中心->莒光新城163: 1       大興五街   TRUE   2015/1/1 13:37:38  屯區藝文中心->莒光新城163: 1       大興一街   FALSE  2015/1/1 13:37:43  屯區藝文中心->莒光新城163: 　 當 Leave = TRUE  代表車輛離站:    當 Leave = FALSE 代表車輛到站: 我想做資料處理問題如下所述:: 1、列與列之間的時間運算(同一班車計算站間旅行時間):    前一班車：    大興一街(TRUE,第1筆) -> 大興五街(FALSE,第2筆)     00:00:07:                  大興一街(TRUE,第1筆) -> 屯區藝文中心(FALSE,第4筆) 00:00:48: 　 後一班車：屯區藝文中心(TRUE,第7筆) -> 大興五街(FALSE,第8筆)     00:00:32: 　　　　　　 屯區藝文中心(TRUE,第7筆) -> 大興一街(FALSE,第10筆)    00:00:47:    之前曾經來板上問過,知道對UniqueBusID用groupby下去,:    就可以把不同班車的資料切分開來處理,以資料為例,前5筆和後5筆分別是不同班車:    而我想求的是站間旅行時間,因此必須計算列與列之間的時間差,:    但是這邊我希望程式可以自動判斷:    (1) 當上下兩列的UniqueBusID一樣的時候才計算站間旅行時間:    (2) 第5筆資料其實是無用的,因為終點站只需要到達時間(Leave=FALSE):        所以希望程式跳過不執行:    (3) 當上下兩列的UniqueBusID不同時,則計算時間的基準改為新的資料:        以前一班車為例,站間旅行時間計算基準是第1筆資料(Leave = TRUE,車輛離站):        但是第6筆資料開始UniqueBusID改變了(不同車班):        故後一班車的站間旅行時間計算基準改為第7筆資料(Leave = TRUE,車輛離站):    試了好幾天試不出來想要的結果,可能是我對R的函數不熟悉的關係:    有請板上各位先進指點迷津,非常感謝!!: [程式範例]::: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

# 概念是我直接算站間時間，然後把停留時間的部分在過濾掉而已
# data.table：

library(data.table)
library(fasttime)
library(pipeR)
DT <- fread('Goback,  NameZh,     Leave,  Time,  UniqueBusID
0,       大興一街,   TRUE,   2015/1/1 13:10:32,  大興一街->屯區藝文中心162
0,       大興五街,   FALSE,  2015/1/1 13:10:39,  大興一街->屯區藝文中心162
0,       大興五街,   TRUE,   2015/1/1 13:10:51,  大興一街->屯區藝文中心162
0,     屯區藝文中心, FALSE,  2015/1/1 13:11:20,  大興一街->屯區藝文中心162
0,     屯區藝文中心, TRUE,  2015/1/1 13:12:32,  大興一街->屯區藝文中心162
1,     屯區藝文中心, FALSE,  2015/1/1 13:36:50,  屯區藝文中心->莒光新城163
1,     屯區藝文中心, TRUE,  2015/1/1 13:36:56,  屯區藝文中心->莒光新城163
1,       大興五街,   FALSE,  2015/1/1 13:37:28,  屯區藝文中心->莒光新城163
1,       大興五街,   TRUE,   2015/1/1 13:37:38,  屯區藝文中心->莒光新城163
1,       大興一街,   FALSE,  2015/1/1 13:37:43,  屯區藝文中心->莒光新城163')

DT[ , Time := fastPOSIXct(Time)]

cumany <- function(x) cumsum(x) >= 1
DT[ , .(timeBetweenStops = tail(Time, length(Time)-1) -
                           head(Time, length(Time)-1),
       filter = cumany(head(Leave, length(Leave)-1)),
       NameZhLeave = head(NameZh, length(NameZh)-1),
       NameZhNext = tail(NameZh, length(NameZh)-1)), by = .(UniqueBusID)] %>>%
  `[`(i = which(filter)) %>>%
  `[`(j = cumTimeBetweenStops := cumsum(as.numeric(timeBetweenStops)),
      by = .(UniqueBusID)) %>>%
  `[`(NameZhLeave != NameZhNext)  %>>%
  `[`(j = .(UniqueBusID, timeBetweenStops, cumTimeBetweenStops))

#                  UniqueBusID timeBetweenStops cumTimeBetweenStops
# 1: 大興一街->屯區藝文中心162           7 secs                   7
# 2: 大興一街->屯區藝文中心162          29 secs                  48
# 3: 屯區藝文中心->莒光新城163          32 secs                  32
# 4: 屯區藝文中心->莒光新城163           5 secs                  47

# dplyr的部分，過幾天補，先寫完了data.table，就先PO了

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1138","M.1480669726.A.C59","samex4x4","問題","shiny sever 更新資料",2016-12-02 17:08:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近終於把ShinyServer架起來、App也終於可以跑了
感謝各位給我的各種幫助T_T

但是還是有一點兒小問題想詢問大家的意見

要如何每次或者一天一次重新load rdata檔?
我每天會在指定目錄更新一個Rdata檔，名字都是相同的，但是內容不完全一樣

但是我發現就算我更新了這個Rdata檔，ShinySever上的內容卻不會因此改變

檢查結果我猜測是

每次第一次run一個新的App時會產生一個暫存檔
之後除非程式碼改變，不然就直接讀取暫存檔內容
因為我是檔案改變而非程式碼改變 所以才會讀不到QQ

(我都已經把那個Rdata檔砍了 網頁居然還出得來....XD)

想詢問這樣是要排程reload shiny-server 嗎? <- 不是很確定這個指令是否這樣用
還是有其他方法可以每次/每天都重新讀取資料進來?

(更新)
咦好像又不是很對，因為過一會兒砍掉檔案的測試檔貌似又會掛掉???
還是定時會重新抓取???

(再更新)
原來更新完當下F5貌似不會馬上好???????
除非直接修改程式碼
那應該就是虛驚一場了哈哈哈哈
\太好啦/


[程式範例]:

[環境敘述]:Ubuntu 14.04 LTSR 3.3.2版[關鍵字]:shiny 資料更新--","R_Language"
"1139","M.1480663852.A.EC0","memphis","問題","Re: 一筆資料轉多筆",2016-12-02 15:30:49,NA,NA,"我只有普通版的

library(dplyr)

tmp <- data.frame(id=c(1,2,3), start_y=c(100,101,101), start_s=c(1,2,2),
                  end_y=c(102,103,101), end_s=c(2,1,2), stringsAsFactors=F)

myfun <- function(v){
    v <- as.vector(v)
    out <- data.frame(id=v[1], year=rep(seq(v[2], v[4]), each=2),
                      s=c(1,2), stringsAsFactors=F)
    if(v[3]==2) out <- out[-1,]
    if(v[5]==1) out <- out[-nrow(out),]
    return(out)
}

tmp2 <- apply(tmp,1,myfun)
#out <- do.call(""rbind"", tmp2)
out <- bind_rows(tmp2)
out※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 若我有資料欄位如下：:: id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     101    2: year:: 如何轉成下面的樣子：: id year s: 1  100  1: 1  100  2: 1  101  1: 1  101  2: 1  102  1: 1  102  2: 2  101  2: 2  102  1: 2  102  2: 2  103  1: 3  101  2 (只有一筆): 謝謝回答~: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"1140","M.1480644008.A.E80","joson4921","問題","特定條件下的列與列時間運算",2016-12-02 10:00:02,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位先進大家好,為了方便敘述問題,先節錄以下資料方便說明:



Goback  NameZh     Leave  Time               UniqueBusID
0       大興一街   TRUE   2015/1/1 13:10:32  大興一街->屯區藝文中心162
0       大興五街   FALSE  2015/1/1 13:10:39　大興一街->屯區藝文中心162
0       大興五街　 TRUE　 2015/1/1 13:10:51  大興一街->屯區藝文中心162
0     屯區藝文中心 FALSE  2015/1/1 13:11:20  大興一街->屯區藝文中心162
0     屯區藝文中心 TRUE   2015/1/1 13:12:32  大興一街->屯區藝文中心162
1     屯區藝文中心 FALSE  2015/1/1 13:36:50  屯區藝文中心->莒光新城163
1     屯區藝文中心 TRUE   2015/1/1 13:36:56  屯區藝文中心->莒光新城163
1       大興五街   FALSE  2015/1/1 13:37:28  屯區藝文中心->莒光新城163
1       大興五街   TRUE   2015/1/1 13:37:38  屯區藝文中心->莒光新城163
1       大興一街   FALSE  2015/1/1 13:37:43  屯區藝文中心->莒光新城163

　 當 Leave = TRUE  代表車輛離站
   當 Leave = FALSE 代表車輛到站


我想做資料處理問題如下所述:

1、列與列之間的時間運算(同一班車計算站間旅行時間)


   前一班車：    大興一街(TRUE,第1筆) -> 大興五街(FALSE,第2筆)     00:00:07
                 大興一街(TRUE,第1筆) -> 屯區藝文中心(FALSE,第4筆) 00:00:48
　 後一班車：屯區藝文中心(TRUE,第7筆) -> 大興五街(FALSE,第8筆)     00:00:32
　　　　　　 屯區藝文中心(TRUE,第7筆) -> 大興一街(FALSE,第10筆)    00:00:47


   之前曾經來板上問過,知道對UniqueBusID用groupby下去,
   就可以把不同班車的資料切分開來處理,以資料為例,前5筆和後5筆分別是不同班車
   而我想求的是站間旅行時間,因此必須計算列與列之間的時間差,
   但是這邊我希望程式可以自動判斷

   (1) 當上下兩列的UniqueBusID一樣的時候才計算站間旅行時間

   (2) 第5筆資料其實是無用的,因為終點站只需要到達時間(Leave=FALSE)
       所以希望程式跳過不執行

   (3) 當上下兩列的UniqueBusID不同時,則計算時間的基準改為新的資料
       以前一班車為例,站間旅行時間計算基準是第1筆資料(Leave = TRUE,車輛離站)
       但是第6筆資料開始UniqueBusID改變了(不同車班)
       故後一班車的站間旅行時間計算基準改為第7筆資料(Leave = TRUE,車輛離站)

   試了好幾天試不出來想要的結果,可能是我對R的函數不熟悉的關係
   有請板上各位先進指點迷津,非常感謝!!


[程式範例]:


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1141","M.1480607749.A.CA5","celestialgod","問題","Re: 一筆資料轉多筆",2016-12-01 23:55:46,NA,NA,"前面那篇弄錯了XD

我寫一次正確板出來QQ

library(data.table)
library(pipeR)
DT <- fread(""id start_y start_s end_y end_s
            1       100     1     102    2
            2       101     2     103    1
            3       101     2     101    2"")

DT[ , `:=`(start_ys = paste(start_y, start_s, sep = ""-""),
           end_ys = paste(end_y, end_s, sep = ""-""))]

lookup_dt <- expand.grid(min(DT$start_y):max(DT$end_y), 1:2) %>>%
  data.table %>>% `[`(j = y_s := paste(Var1, Var2, sep = ""-""))

# lookup_dt <- CJ(min(DT$start_y):max(DT$end_y), 1:2) %>>%
#   `[`(j = y_s := paste(V1, V2, sep = ""-""))  # 這樣做是一樣的

outDT <- DT[ , .(out_ys = lookup_dt$y_s[between(lookup_dt$y_s, start_ys,
                                                end_ys)]), by = .(id)] %>>%
  `[`(j = c(""year"", ""s"") := tstrsplit(out_ys, ""-"")) %>>%
  `[`(j = out_ys := NULL)
#     id year s
#  1:  1  100 1
#  2:  1  100 2
#  3:  1  101 1
#  4:  1  101 2
#  5:  1  102 1
#  6:  1  102 2
#  7:  2  101 2
#  8:  2  102 1
#  9:  2  102 2
# 10:  2  103 1
# 11:  3  101 2


# 改成下面這樣比較易懂：

all_ys <- expand.grid(min(DT$start_y):max(DT$end_y), 1:2) %>>%
  with(paste(Var1, Var2, sep = ""-""))

outDT <- DT[ , .(out_ys = all_ys[between(all_ys, start_ys,
                                         end_ys)]), by = .(id)] %>>%
  `[`(j = c(""year"", ""s"") := tstrsplit(out_ys, ""-"")) %>>%
  `[`(j = out_ys := NULL)

這方法只適用data.table，data.table的between才可以比字串XD

如果出現Error: not compatible with requested type

代表說你的between不是用data.table的，所以會出問題

這時候請用  detach(""package:dplyr"", unload=TRUE)

如果還是不行就要看你的between是用到哪一個package

或是 乾脆在between前面加上 data.table::即可※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 若我有資料欄位如下：:: id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     101    2: year:: 如何轉成下面的樣子：: id year s: 1  100  1: 1  100  2: 1  101  1: 1  101  2: 1  102  1: 1  102  2: 2  101  2: 2  102  1: 2  102  2: 2  103  1: 3  101  2 (只有一筆): 謝謝回答~: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1142","M.1480607402.A.8BD","cywhale","問題","Re: 一筆資料轉多筆",2016-12-01 23:49:59,NA,NA,"手癢也試了一下，就用data.table::foverlaps做
## data.table::foverlaps, reference:#1N_NLOIolibrary(data.table)
library(magrittr)
dt <- fread('id start_y start_s end_y end_s
1       100     1     102    2
2       101     2     103    1
3       101     2     101    2') %>%
  .[,{.(id=id,
        start=as.numeric(paste(start_y,start_s,sep=""."")),
        end = as.numeric(paste(end_y,end_s,sep=""."")))}] %>% setkey(start,end)

gt <- CJ(start_y=100:103, s=1:2) %>%
  .[,{.(start=as.numeric(paste(start_y,s,sep=""."")))}] %>% unique() %>%
  .[,end:=start]

gx <- foverlaps(gt, dt, type=""within"", which=TRUE) %>%
  .[which(!is.na(yid)),]

cbind(dt[gx$yid,.(id)], gt[gx$xid,.(start)]) %>% .[order(id),] %>%
  .[,{.(id=id,
        year=substr(start,1,nchar(start)-2),
        s=substr(start,nchar(start),nchar(start))
  )}]

#    id year s
# 1:  1  100 1
# 2:  1  100 2
# 3:  1  101 1
# 4:  1  101 2
# 5:  1  102 1
# 6:  1  102 2
# 7:  2  101 2
# 8:  2  102 1
# 9:  2  102 2
#10:  2  103 1
#11:  3  101 2※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 若我有資料欄位如下：:: id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     101    2: year:: 如何轉成下面的樣子：: id year s: 1  100  1: 1  100  2: 1  101  1: 1  101  2: 1  102  1: 1  102  2: 2  101  2: 2  102  1: 2  102  2: 2  103  1: 3  101  2 (只有一筆): 謝謝回答~: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"1143","M.1480605469.A.E29","HeroNoah","問題","Re: 一筆資料轉多筆",2016-12-01 23:17:47,NA,NA,"criky 版友想要的結果:

id year s
1  100  1
1  100  2
1  101  1
1  101  2
1  102  1
1  102  2
2  101  2
2  102  1
2  102  2
2  103  1
3  101  2

總共有 11 筆資料

celestialgod 版友的結果:

#    id year s
# 1:  1  100 1
# 2:  1  100 2
# 3:  1  102 1
# 4:  1  102 2
# 5:  2  101 1
# 6:  2  101 2
# 7:  2  103 1
# 8:  2  103 2
# 9:  3  101 2

總共有 9 筆資料

帳面上看起來少了2筆資料,

實際上是少了 4 筆

1  101  1
1  101  2
2  102  1
2  102  2

卻多了 2 筆

# 5:  2  101 1
# 8:  2  103 2

在這提供我的寫法:

library(""data.table"")

criky = data.table(
  id = c(1, 2, 3),
  start_y = c(100, 101, 101),
  start_s = c(1, 2, 2),
  end_y = c(102, 103, 101),
  end_s = c(2, 1, 2)
)

id_year_semester = function(
  id,
  from,
  to
){
  x = seq(from = from, to = to, by = 0.5)
  size_x = length(x)
  data.table(
    id = rep(id, size_x),
    year = x %/% 1,
    s = (x %% 1) * 2 + 1
  )
}

criky[
  ,
  list(
    id = id,
    from = start_y + (start_s - 1) * 0.5,
    to = end_y + (end_s - 1) * 0.5
  )
][
  ,
  id_year_semester(id, from, to),
  by = list(id, from, to)
][
  ,
  list(id, year, s)
]

執行結果:
    id year s
 1:  1  100 1
 2:  1  100 2
 3:  1  101 1
 4:  1  101 2
 5:  1  102 1
 6:  1  102 2
 7:  2  101 2
 8:  2  102 1
 9:  2  102 2
10:  2  103 1
11:  3  101 2※ 引述《celestialgod (天)》之銘言：: ※ 引述《criky (立業成家)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]:: : 若我有資料欄位如下：: : id start_y start_s end_y end_s: : 1       100     1     102    2: : 2       101     2     103    1: : 3       101     2     101    2: : year:: : 如何轉成下面的樣子：: : id year s: : 1  100  1: : 1  100  2: : 1  101  1: : 1  101  2: : 1  102  1: : 1  102  2: : 2  101  2: : 2  102  1: : 2  102  2: : 2  103  1: : 3  101  2 (只有一筆): : 謝謝回答~: : [程式範例]:: : [環境敘述]:: : 請提供 sessionInfo() 的輸出結果，: : 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: : 讓版友更容易找出錯誤: : [關鍵字]:: : 選擇性，也許未來有用: 做兩次melt就可以達到你要的了，我不確定是否可以一次，看是否有高手寫得出來~~: library(data.table): DT <- fread(""id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     101    2""): DT_melt <- melt.data.table(DT, id = c(1,2,4), value.name = ""s""): DT_melt2 <- melt.data.table(DT_melt, id = c(1,5), measure = 2:3,:                             value.name = ""year""): DT_melt2[ , variable := NULL]: setcolorder(DT_melt2, c(""id"", ""year"", ""s"")): setorderv(DT_melt2, names(DT_melt2)): unique(DT_melt2, by = names(DT_melt2)): #    id year s: # 1:  1  100 1: # 2:  1  100 2: # 3:  1  102 1: # 4:  1  102 2: # 5:  2  101 1: # 6:  2  101 2: # 7:  2  103 1: # 8:  2  103 2: # 9:  3  101 2: # with pipeR: library(pipeR): resDT <- melt.data.table(DT, id = c(1,2,4), value.name = ""s"") %>>%:   melt.data.table(id = c(1,5), measure = 2:3, value.name = ""year"") %>>%:   `[`(j = variable := NULL) %>>% setcolorder(c(""id"", ""year"", ""s"")) %>>%:   setorderv(names(.)) %>>% unique(by = names(.)): print(resDT): #    id year s: # 1:  1  100 1: # 2:  1  100 2: # 3:  1  102 1: # 4:  1  102 2: # 5:  2  101 1: # 6:  2  101 2: # 7:  2  103 1: # 8:  2  103 2: # 9:  3  101 2: # tidyr + dplyr解法 (data.table不需要，DT可以是data.frame): library(dplyr): library(tidyr): gather(DT, value, year, -id, -start_s, -end_s) %>>%:   gather(ss, s, -id, -value, -year) %>>% select(id, year, s) %>>%:   arrange(id, year, s) %>>% distinct(id, year, s): #   id year s: # 1  1  100 1: # 2  1  100 2: # 3  1  102 1: # 4  1  102 2: # 5  2  101 1: # 6  2  101 2: # 7  2  103 1: # 8  2  103 2: # 9  3  101 2--","R_Language"
"1144","M.1480592241.A.CFC","celestialgod","問題","Re: 一筆資料轉多筆",2016-12-01 19:37:17,NA,NA,"※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 若我有資料欄位如下：:: id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     101    2: year:: 如何轉成下面的樣子：: id year s: 1  100  1: 1  100  2: 1  101  1: 1  101  2: 1  102  1: 1  102  2: 2  101  2: 2  102  1: 2  102  2: 2  103  1: 3  101  2 (只有一筆): 謝謝回答~: [程式範例]::
:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: 選擇性，也許未來有用:

做兩次melt就可以達到你要的了，我不確定是否可以一次，看是否有高手寫得出來~~

library(data.table)
DT <- fread(""id start_y start_s end_y end_s
1       100     1     102    2
2       101     2     103    1
3       101     2     101    2"")

DT_melt <- melt.data.table(DT, id = c(1,2,4), value.name = ""s"")
DT_melt2 <- melt.data.table(DT_melt, id = c(1,5), measure = 2:3,
                            value.name = ""year"")
DT_melt2[ , variable := NULL]
setcolorder(DT_melt2, c(""id"", ""year"", ""s""))
setorderv(DT_melt2, names(DT_melt2))
unique(DT_melt2, by = names(DT_melt2))
#    id year s
# 1:  1  100 1
# 2:  1  100 2
# 3:  1  102 1
# 4:  1  102 2
# 5:  2  101 1
# 6:  2  101 2
# 7:  2  103 1
# 8:  2  103 2
# 9:  3  101 2

# with pipeR
library(pipeR)
resDT <- melt.data.table(DT, id = c(1,2,4), value.name = ""s"") %>>%
  melt.data.table(id = c(1,5), measure = 2:3, value.name = ""year"") %>>%
  `[`(j = variable := NULL) %>>% setcolorder(c(""id"", ""year"", ""s"")) %>>%
  setorderv(names(.)) %>>% unique(by = names(.))
print(resDT)
#    id year s
# 1:  1  100 1
# 2:  1  100 2
# 3:  1  102 1
# 4:  1  102 2
# 5:  2  101 1
# 6:  2  101 2
# 7:  2  103 1
# 8:  2  103 2
# 9:  3  101 2

# tidyr + dplyr解法 (data.table不需要，DT可以是data.frame)
library(dplyr)
library(tidyr)
gather(DT, value, year, -id, -start_s, -end_s) %>>%
  gather(ss, s, -id, -value, -year) %>>% select(id, year, s) %>>%
  arrange(id, year, s) %>>% distinct(id, year, s)
#   id year s
# 1  1  100 1
# 2  1  100 2
# 3  1  102 1
# 4  1  102 2
# 5  2  101 1
# 6  2  101 2
# 7  2  103 1
# 8  2  103 2
# 9  3  101 2

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1145","M.1480591296.A.106","celestialgod","問題","Re: which與if運用",2016-12-01 19:21:20,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 目前有個DATA 想要判斷在某個列是否被取代過如果沒有被取代過就換新的: 舉例: DATA: 欄位1: NA: NA: NA: NA: NA: NA: NA: NA: 好比說我前面有先跑程式發現我想取代1,3,5列: 那我就先判斷是否為NA若是NA則改寫成A: 改寫如下: A: NA: A: NA: A: NA: .: .: .: 接下來我會再判斷要被替換的列為1,4，改寫成B: 因為第一列被改寫則為但是第四列沒有則指會改寫第四列: A: NA: A: B: A: NA: .: .: .: 想問有沒有更快速的方法因為有時候資料量大的時候會跑比較久: [程式範例]:::    for(j in which(ind==1)):    {:     DT[j] <- ifelse(DT[j]==0, 要被取代的值,DT[i] ):    }:: [環境敘述]::
:: [關鍵字]:: which , for ,ifelse:: 選擇性，也許未來有用:

可以使用dplyr的操作去處理


# 生成資料 跟 生成要改值的位置以及對應的值
df <- data.frame(a = rep(NA_real_, 20L)) # NA_real_ 表示為numeric的NA
set.seed(10)
changeLocVal <- list(list(loc = sort(sample(1L:20L, 10L)), value = 5),
                     list(loc = sort(sample(1L:20L, 10L)), value = 3))
print(changeLocVal)
# [[1]]
# [[1]]$loc
#  [1]  2  4  5  6  8 11 12 14 15 18
#
# [[1]]$value
#  [1] 5
#
#
# [[2]]
# [[2]]$loc
#  [1]  1  3  4  5  6  7 10 11 14 19
#
# [[2]]$value
#  [1] 3

# 可以看到changeLocVal[[2]]$loc有五個點跟changeLocVal[[1]]$loc重複
# 所以我們等等要照著changeLocVal順序去改，如果被改5的
# 就不再更動為其他的值，因此，按照我們的邏輯，最後5會有10個，3會有5個

# 程式開始
library(dplyr)
df <- mutate(df, rn = 1L:20L) # 新增row number
for (i in seq_along(changeLocVal))
  df <- mutate(df, a = ifelse(is.na(a) & rn %in% changeLocVal[[i]]$loc,
               changeLocVal[[i]]$value, a))
# 確定是否為NA還有是否在修改位置中，然後修改

# print出結果看看
print(select(df, -rn))
#     a
# 1   3
# 2   5
# 3   3
# 4   5
# 5   5
# 6   5
# 7   3
# 8   5
# 9  NA
# 10  3
# 11  5
# 12  5
# 13 NA
# 14  5
# 15  5
# 16 NA
# 17 NA
# 18  5
# 19  3
# 20 NA

# 用table看看數量是否如同預期
table(df$a, useNA = ""ifany"")
#   3    5 <NA>
#   5   10    5



# 如果有速度上的問題，可以再試試看data.table
library(data.table)
DT <- data.table(a = rep(NA_real_, 20L))
DT[ , rn := .I]
for (i in seq_along(changeLocVal))
  set(DT, setdiff(changeLocVal[[i]]$loc, which(!is.na(DT$a))), 1,
changeLocVal[[i]]$value)
DT[ , rn := NULL]
print(DT)
#      a
#  1:  3
#  2:  5
#  3:  3
#  4:  5
#  5:  5
#  6:  5
#  7:  3
#  8:  5
#  9: NA
# 10:  3
# 11:  5
# 12:  5
# 13: NA
# 14:  5
# 15:  5
# 16: NA
# 17: NA
# 18:  5
# 19:  3
# 20: NA


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1146","M.1480579411.A.B69","huangsam","問題","which與if運用",2016-12-01 16:03:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的目前有個DATA 想要判斷在某個列是否被取代過如果沒有被取代過就換新的
舉例
DATA
欄位1
NA
NA
NA
NA
NA
NA
NA
NA
好比說我前面有先跑程式發現我想取代1,3,5列
那我就先判斷是否為NA若是NA則改寫成A
改寫如下
A
NA
A
NA
A
NA
.
.
.
接下來我會再判斷要被替換的列為1,4，改寫成B
因為第一列被改寫則為但是第四列沒有則指會改寫第四列
A
NA
A
B
A
NA
.
.
.
想問有沒有更快速的方法因為有時候資料量大的時候會跑比較久
[程式範例]:for(j in which(ind==1)){DT[j] <- ifelse(DT[j]==0, 要被取代的值,DT[i] )}[環境敘述]:[關鍵字]:
which , for ,ifelse選擇性，也許未來有用--","R_Language"
"1147","M.1480576189.A.2DF","HumuHumu","問題","Re: 一筆資料轉多筆",2016-12-01 15:09:47,NA,NA,"※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 若我有資料欄位如下：:: id start_y start_s end_y end_s: 1       100     1     102    2: 2       101     2     103    1: 3       101     2     102    2: year:: 如何轉成下面的樣子：: id year s: 1  100  1: 1  100  2: 1  101  1: 1  101  2: 1  102  1: 1  102  2: 2  101  2: 2  102  1: 2  102  2: 2  103  1: 3  101  2 (只有一筆): 謝謝回答~假定你今天原資料叫data
我設定新生成的資料叫newdata
且資料格式都跟你文章中的一樣http://imgur.com/a/CeE9z.R檔:http://pastebin.com/he0ySfex菜鳥的寫法大概就像我這樣啦，應該有其他更有效率的辦法等其他版友提供

--","R_Language"
"1148","M.1480571723.A.53D","criky","問題","一筆資料轉多筆",2016-12-01 13:55:20,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:若我有資料欄位如下：id start_y start_s end_y end_s
1       100     1     102    2
2       101     2     103    1
3       101     2     101    2

year:
如何轉成下面的樣子：
id year s
1  100  1
1  100  2
1  101  1
1  101  2
1  102  1
1  102  2
2  101  2
2  102  1
2  102  2
2  103  1
3  101  2 (只有一筆)

謝謝回答~
[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1149","M.1480510443.A.1AE","clansoda","問題","google token",2016-11-30 20:53:58,NA,NA,"各位好，我現在需要再shinyio上佈設一個需要跟google API串接的

應用，現在的問題是我在本地端使用的時候，只要gs_auth()

他就會在我的working directory裡面新增一個.httr-oauth的檔案

根據我在網路上找的文章，這個是用來自動更新跟google連接的token

現在的問題是只要應用部屬到shinyio上就會出現下面的error message

oauth_listener() needs an interactive environment

根據我在他們package的issue裡面找到類似的問題https://github.com/jennybc/googlesheets/issues/235他們的解法是在需要跟google連接應用的每個reactive媕Y都塞進

options(""httr_oauth_cache"" = ""gs_auth"")

gs_auth()

我試了這個方法，不過還是出現一樣的error message

有人比較了解這些API層面的問題嗎?或者有可以使用的解法

感謝各位~

--","R_Language"
"1150","M.1480445168.A.09E","spiderway","問題","影像處理或訊號處理的書籍詢問",2016-11-30 02:46:03,NA,NA,"小弟最近想找本書籍學習影像處理和訊號處理方面的技術
不知道版上的大大有沒有推薦的書籍，最好是能夠有R或py的範例
因為我看了一下博客來，好像大多都是配matlab
或沒的話有推薦的書籍適合新手的也可以分享一下給小弟~謝謝

--
Sent from my ibon.

--","R_Language"
"1151","M.1480434121.A.A0B","ason789369","問題","R SHINY 怪怪的",2016-11-29 23:41:55,NA,NA,"1;30;40m

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

使用者(已經有用R 做過不少作品)


[問題敘述]:
昨天不知要怎麼把R丟上SHINY.IO後 不知道設定到了什麼
今天執行RUNAPP()後 無法跑出SHINY頁面
出現了以下錯誤資訊
Error sourcing C:\Users\edison\AppData\Local\Temp\RtmpmE56vB\file165474723c0a
看不懂為什麼  求大大幫忙

[程式範例]:
/


[環境敘述]:R STUDIO1.0.44 R3.3.2[關鍵字]:選擇性，也許未來有用--

--","R_Language"
"1152","M.1480427024.A.769","Tampa","問題","shiny疑問",2016-11-29 21:43:41,NA,NA,"大家好 最近用shiny寫個小程式

上網找樣本然後自己來練習

想請問一下 shiny 是否有個類似開關的物件??

敘述如下http://i.imgur.com/GmCCY5p.jpg目前自己做的開關是用0/1來表示

現在想做的構想是，如果橫條選到0

則以下的清單都不可以動作

(畫面暗掉，不能動作，類似這樣的layout)

以下是我的程式碼

ui.r部分

library(shiny)

# Define UI for slider demo application
fluidPage(



  #  Application title
  titlePanel(""簡訊通知""),
  # Sidebar with sliders that demonstrate various available
  # options


  sidebarLayout(
    sidebarPanel(
      # Simple integer interval
      sliderInput(""開關"", ""開關:"",
                  min=0, max=1, value=1,step=1),

 # Decimal interval with step value
      sliderInput(""發送時間"", ""發送時間:"",
                  min = 8, max = 19, value = 1, step= 1,post="":00""),

      # Specification of range within an interval
      sliderInput(""逾時"", ""逾時:"",
                  min = 0, max = 23 , value = 1,step=1),

      # Provide a custom currency format for value display,
      # with basic animation


      # Animation with custom interval (in ms) to control speed,
      # plus looping

      sliderInput(""發訊時間"", ""發訊時間:"",8, 19, 8,
                  step = 1, animate=
                    animationOptions(interval=1000, loop=TRUE))
    ),

    # Show a table summarizing the values entered
    mainPanel(
      tableOutput(""values"")
    )
  )
)


sever.r部分

library(shiny)

# Define server logic for slider examples
function(input, output) {

  # Reactive expression to compose a data frame containing all of
  # the values
  sliderValues <- reactive({

    # Compose data frame
    data.frame(
      setting = c(""開關"",
                  ""發送時間"",
                  ""逾時"",

                  ""發訊時間""),
      Value = as.character(c(input$開關,
                             input$發送時間,
                             paste(input$逾時, collapse=' '),

                             input$發訊時間)),
      stringsAsFactors=FALSE)
  })

  # Show the values using an HTML table
  output$values <- renderTable({
    sliderValues()
  })
}


以上 感謝各位大大


--","R_Language"
"1153","M.1480422649.A.5CC","clansoda","問題","Re: 圖形標示問題",2016-11-29 20:30:46,NA,NA,"Hi，你的敘述有點簡單，我不知道你是用哪一種繪圖系統畫的

我用我常用的ggplot2畫一個，資料我用iris隨便抓一欄

dat <- data(""iris"")

dat$newdate <- seq(as.Date(""2016-11-01""),as.Date(""2016-11-30""),
                        by = ""days"")

ggplot(data = dat,aes(newdate,Sepal.Length)) + geom_bar(stat = ""identity"")
                  + scale_x_date(date_breaks = ""3 days"")

這是用手打的，有可能會有typo，如果跑不出來在跟我說一下，上面date_breaks

參數就可以調整你要的時間間距，如 weeks months之類的。

--","R_Language"
"1154","M.1480420504.A.0E6","vic0607","問題","圖形標示問題",2016-11-29 19:55:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
如何在X軸圖形上標示日期，以及日期間隔如何設定?


已在google上爬文過，但都找不到


再麻煩版上高手幫小弟指點迷津，謝謝



--","R_Language"
"1155","M.1480410830.A.8A2","samex4x4","問題","shiny server library 失敗",2016-11-29 17:13:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近公司試著在Ubuntu1404 server上架設shiny server跑程式

如果我沒讀錯文件，應該是將檔案掛在/srv/shiny-server/下的資料夾就可以了
但是卻一直error

檢查/var/log/shiny-server/ 後是從library(rAmCharts)就開始掛掉(如下)

Error in library(rAmCharts) : there is no package called ?<U+9F0D>AmCharts??

確定已經有裝這個package並且可以成功從R使用
猜測是權限問題導致library讀不到? 不是很確定囧

目前我的所有shinyApp檔案權限都是 -rw-rw-r--
                    資料夾權限是 drwxrwxr-x

全部比照 /srv/shiny-server/sample-apps/hello


另外還有就是Ubuntu中文亂碼問題 結果還是要處理編碼問題啊我暈...

想詢問以上問題該怎麼解決、或是我有什麼疏漏的地方 感謝 m(_ _)m

[程式範例]:[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 14.04.5 LTSlocale:[1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C[3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8[5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8[7] LC_PAPER=en_US.UTF-8       LC_NAME=C[9] LC_ADDRESS=C               LC_TELEPHONE=C[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C[關鍵字]:shiny server--","R_Language"
"1156","M.1480351997.A.714","HumuHumu","問題","安裝package時自動安裝其他需要的package",2016-11-29 00:53:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

但小弟不會寫C只會寫R
但小弟不會寫C只會寫R
但小弟不會寫C只會寫R

[問題敘述]:
*[1;30;40m請簡略描述你所要做的事情，或是這個程式的目的*[m
小弟目前正在嘗試寫一個Package，但初次嘗試，很多事情不太懂，除了標題的問題外

總共有以下兩個問題

1.如標題，假如我的package有用到其他package(如shiny和ggplot2)的function，我要
如何在別人install我的package時，自動在電腦上安裝shiny和ggplot2這兩個package呢?

譬如說我當初在安裝shiny時，他也自動幫我裝了一堆哩哩摳摳的package都沒經過我同意
我就是想要達到這種效果。


2.我要如何在Package裡面內建資料集? 譬如說像是shiny這個package就有內建資料叫做
faithful，只要我library(shiny)，我只要打faithful就可以看到這筆資料。


以上兩個問題請教版友，謝謝大家

--","R_Language"
"1157","M.1480337121.A.F47","f496328mm","分享","Re: mlr package",2016-11-28 20:45:18,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《f496328mm (為什麼會流淚)》之銘言：: : 我用install_github(""mlr-org/mlr"")去下載: : 出現以下error: : Downloading GitHub repo mlr-org/[email<U+00A0>protected]: : from URL https://api.github.com/repos/mlr-org/mlr/zipball/master: : Installing mlr: : ""D:/MRO/R-3.3.0/bin/x64/R"" --no-site-file --no-environ --no-save --no-restore: : --quiet CMD INSTALL  \: : ""C:/Users/Asus/AppData/Local/Temp/RtmpWul6Rh/devtools1ef451721bb/mlr-org-mlr-211d245"": : --library=""D:/MRO/R-3.3.0/library"" --install-tests: : * installing *source* package 'mlr' ...: : ** libs: : c:/Rtools/mingw_64/bin/gcc -m64 -I""D:/MRO/R-33~1.0/include"" -DNDEBUG: : -I""c:/applications/extsoft/include""     -O2 -Wall  -std=gnu99 -mtune=core2 -c: : smote.c -o smote.o: : c:/Rtools/mingw_64/bin/gcc -m64 -shared -s -static-libgcc -o mlr.dll tmp.def: : smote.o -Lc:/applications/extsoft/lib/x64 -Lc:/applications/extsoft/lib: : -LD:/MRO/R-33~1.0/bin/x64 -lR: : installing to D:/MRO/R-3.3.0/library/mlr/libs/x64: : ** R: : Warning: unable to re-encode 'plotViperCharts.R' line 33: : ** data: : *** moving datasets to lazyload DB: : ** inst: : ** tests: : ** byte-compile and prepare package for lazy loading: : Error : package 'ParamHelpers' 1.7 was found, but >= 1.8 is required by 'mlr': : ERROR: lazy loading failed for package 'mlr': : * removing 'D:/MRO/R-3.3.0/library/mlr': : 錯誤: Command failed (1): : 有人知道怎解嗎??: : 我也試著去這下載: : https://cran.r-project.org/web/packages/mlr/index.html: : 下載: : Windows binaries:     mlr_2.9.zip: : 然後解壓縮放到我的library資料夾中: : 還是error: : 顯示: : package ‘BBmisc’ 1.9 was found, but >= 1.10 is required by ‘mlr’: : 此外: Warning message:: : package ‘mlr’ was built under R version 3.3.2: : ps: 我目前是使用Microsoft R Open 3.3.0: : 謝謝: MRO再裝新版的套件常會有的問題: 我建議解法是這樣：: library(installr): require2(stringr): require2(pipeR): newRepos <- getOption(""repos"") %>>% str_replace(""\\d{4}-\\d{2}-\\d{2}"",:   format(Sys.Date(), ""%Y-%m-%d"")): options(repos = newRepos): install.packages(""mlr"", type = ""source""): # Using type='source' avoids the warning of different version of R先謝謝大大，我用你的解法後，還出現了一些問題，已經解決

首先全部執行完後，

再執行library(mlr)

會出現以下問題

BBmisc     ParamHelpers  版本過舊

所以就全部重新install.packages

之後執行library(mlr)只會出現版本過舊的警告，並沒有error出現

Warning messages:
1: package ‘mlr’ was built under R version 3.3.2
2: package ‘ParamHelpers’ was built under R version 3.3.1



看起來是可以用了

感謝

話說MRO多人用嗎?

還是大家都用linux的?


--","R_Language"
"1158","M.1480336430.A.266","celestialgod","分享","Re: mlr package",2016-11-28 20:33:46,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：: 我用install_github(""mlr-org/mlr"")去下載: 出現以下error: Downloading GitHub repo mlr-org/[email<U+00A0>protected]: from URL https://api.github.com/repos/mlr-org/mlr/zipball/master: Installing mlr: ""D:/MRO/R-3.3.0/bin/x64/R"" --no-site-file --no-environ --no-save --no-restore: --quiet CMD INSTALL  \: ""C:/Users/Asus/AppData/Local/Temp/RtmpWul6Rh/devtools1ef451721bb/mlr-org-mlr-211d245"": --library=""D:/MRO/R-3.3.0/library"" --install-tests: * installing *source* package 'mlr' ...: ** libs: c:/Rtools/mingw_64/bin/gcc -m64 -I""D:/MRO/R-33~1.0/include"" -DNDEBUG: -I""c:/applications/extsoft/include""     -O2 -Wall  -std=gnu99 -mtune=core2 -c: smote.c -o smote.o: c:/Rtools/mingw_64/bin/gcc -m64 -shared -s -static-libgcc -o mlr.dll tmp.def: smote.o -Lc:/applications/extsoft/lib/x64 -Lc:/applications/extsoft/lib: -LD:/MRO/R-33~1.0/bin/x64 -lR: installing to D:/MRO/R-3.3.0/library/mlr/libs/x64: ** R: Warning: unable to re-encode 'plotViperCharts.R' line 33: ** data: *** moving datasets to lazyload DB: ** inst: ** tests: ** byte-compile and prepare package for lazy loading: Error : package 'ParamHelpers' 1.7 was found, but >= 1.8 is required by 'mlr': ERROR: lazy loading failed for package 'mlr': * removing 'D:/MRO/R-3.3.0/library/mlr': 錯誤: Command failed (1): 有人知道怎解嗎??: 我也試著去這下載: https://cran.r-project.org/web/packages/mlr/index.html: 下載: Windows binaries:     mlr_2.9.zip: 然後解壓縮放到我的library資料夾中: 還是error: 顯示: package ‘BBmisc’ 1.9 was found, but >= 1.10 is required by ‘mlr’: 此外: Warning message:: package ‘mlr’ was built under R version 3.3.2: ps: 我目前是使用Microsoft R Open 3.3.0: 謝謝MRO再裝新版的套件常會有的問題

我建議解法是這樣：

library(installr)
require2(stringr)
require2(pipeR)
newRepos <- getOption(""repos"") %>>% str_replace(""\\d{4}-\\d{2}-\\d{2}"",
  format(Sys.Date(), ""%Y-%m-%d""))
options(repos = newRepos)
install.packages(""mlr"", type = ""source"")

# Using type='source' avoids the warning of different version of R


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/72l1m9data.table#1LhW7Tvj (R_Language)https://goo.gl/PZa6Uedplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/I5xX9btidyr#1Liqls1R (R_Language)https://goo.gl/i7yzAzpipeR#1NXESRm5 (R_Language)https://goo.gl/zRUISx--","R_Language"
"1159","M.1480318338.A.C68","lenofire","問題","資料xy分類",2016-11-28 15:32:15,NA,NA,"這是我從網上拿到的例子，他可以把X 跟Y分開展示http://i.imgur.com/3CMygvn.jpghttp://i.imgur.com/3ADtJAb.jpg想問怎樣令下方例子也一<U+69D8>展示http://i.imgur.com/hMv5m5u.jpg--","R_Language"
"1160","M.1480318294.A.1F3","f496328mm","分享","Re: mlr package",2016-11-28 15:31:22,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: [關鍵字]:mlr、machine learning: [出處]:https://mlr-org.github.io/mlr-tutorial/release/html/: [重點摘要]:e1071、randomForest、caret這些知名的package來回調用: 重要的machine learning function嗎? 相信一定會有覺得很煩，每個: function怎麼要求的都不同，有的input要matrix有的要全都是數字，都: 沒有一個整合的平台可以使用嗎? 我這不就來了嗎。: mlr package是一個整合R上泛用常見的machine learning package的平台: 可以讓你在一行之內的改變就可以access to大部分的機器學習演算法: [分享內容]:: ## 首先你要先告訴mlr你現在的training data是誰，還有你想predict的: ## column name，這篇文章我會以iris來作範例，假如是regression用regr代替: ## classification則用classif，在iris是classification所以是classif: tsk <- makeClassifTask(data = iris , target = ""Species""): ## 這邊有一個argument叫ID，再後來是有其他用途的，但這邊我不設的話: ## 他預設就是你的dataframe的名稱，Species是我們要預測的colname: ## 接著我們可以開始訓練我們要的model了: mod <- train(""classif.randomForest"",task = iris): ## 這邊是最簡易的做法，使用train function給予他你learner的名稱與: ## 上面我們賦予的task就能開始訓練，mlr接受直接使用""""包含你的learning: ## method，像是最簡單的線性回歸就叫做regr.lm，但是這種寫法你是使用: ## default的參數，你才可以這樣做，若是你想要改變參數的話: lrn <- makelearner(...): ## makelearner function後面還有許多參數可以調整，可以自行參酌manual: ## 最後到了predict的階段: output <- predict(mod,newdata = iris): final <- output$data: ## 這樣就可以得到最後的訓練結果了，在makelearner那部分可以修改predict type: ## 將他設成prob就能得到機率結果囉，這邊是最最簡單的使用方法，基本上machine: ## learning裡面不論是feature selection、missing value imputation、還有: ## parameter tuning等等等功能全部都包含在這一個package裡面，希望能幫助到: ## 想要使用R作為機器學習平台的使用者。需要更詳細的tutorial請參照來源，: ## 寫的跟rstudio裡面的文章一樣的仔細，一步一步帶你做。我用install_github(""mlr-org/mlr"")去下載

出現以下error


Downloading GitHub repo mlr-org/[email<U+00A0>protected]from URLhttps://api.github.com/repos/mlr-org/mlr/zipball/masterInstalling mlr
""D:/MRO/R-3.3.0/bin/x64/R"" --no-site-file --no-environ --no-save --no-restore
--quiet CMD INSTALL  \

""C:/Users/Asus/AppData/Local/Temp/RtmpWul6Rh/devtools1ef451721bb/mlr-org-mlr-211d245""
--library=""D:/MRO/R-3.3.0/library"" --install-tests

* installing *source* package 'mlr' ...
** libs
c:/Rtools/mingw_64/bin/gcc -m64 -I""D:/MRO/R-33~1.0/include"" -DNDEBUG
-I""c:/applications/extsoft/include""     -O2 -Wall  -std=gnu99 -mtune=core2 -c
smote.c -o smote.o
c:/Rtools/mingw_64/bin/gcc -m64 -shared -s -static-libgcc -o mlr.dll tmp.def
smote.o -Lc:/applications/extsoft/lib/x64 -Lc:/applications/extsoft/lib
-LD:/MRO/R-33~1.0/bin/x64 -lR
installing to D:/MRO/R-3.3.0/library/mlr/libs/x64
** R
Warning: unable to re-encode 'plotViperCharts.R' line 33
** data
*** moving datasets to lazyload DB
** inst
** tests
** byte-compile and prepare package for lazy loading
Error : package 'ParamHelpers' 1.7 was found, but >= 1.8 is required by 'mlr'
ERROR: lazy loading failed for package 'mlr'
* removing 'D:/MRO/R-3.3.0/library/mlr'
錯誤: Command failed (1)




有人知道怎解嗎??


我也試著去這下載https://cran.r-project.org/web/packages/mlr/index.html下載
Windows binaries:     mlr_2.9.zip

然後解壓縮放到我的library資料夾中

還是error

顯示

package ‘BBmisc’ 1.9 was found, but >= 1.10 is required by ‘mlr’
此外: Warning message:
package ‘mlr’ was built under R version 3.3.2



ps: 我目前是使用Microsoft R Open 3.3.0

謝謝





--","R_Language"
"1161","M.1480241438.A.D44","clansoda","分享","mlr package",2016-11-27 18:10:32,NA,NA,"[關鍵字]:mlr、machine learning

[出處]:https://mlr-org.github.io/mlr-tutorial/release/html/[重點摘要]:e1071、randomForest、caret這些知名的package來回調用

重要的machine learning function嗎? 相信一定會有覺得很煩，每個

function怎麼要求的都不同，有的input要matrix有的要全都是數字，都

沒有一個整合的平台可以使用嗎? 我這不就來了嗎。

mlr package是一個整合R上泛用常見的machine learning package的平台

可以讓你在一行之內的改變就可以access to大部分的機器學習演算法

[分享內容]:

## 首先你要先告訴mlr你現在的training data是誰，還有你想predict的

## column name，這篇文章我會以iris來作範例，假如是regression用regr代替

## classification則用classif，在iris是classification所以是classif

tsk <- makeClassifTask(data = iris , target = ""Species"")

## 這邊有一個argument叫ID，再後來是有其他用途的，但這邊我不設的話

## 他預設就是你的dataframe的名稱，Species是我們要預測的colname

## 接著我們可以開始訓練我們要的model了

mod <- train(""classif.randomForest"",task = iris)

## 這邊是最簡易的做法，使用train function給予他你learner的名稱與

## 上面我們賦予的task就能開始訓練，mlr接受直接使用""""包含你的learning

## method，像是最簡單的線性回歸就叫做regr.lm，但是這種寫法你是使用

## default的參數，你才可以這樣做，若是你想要改變參數的話

lrn <- makelearner(...)

## makelearner function後面還有許多參數可以調整，可以自行參酌manual

## 最後到了predict的階段

output <- predict(mod,newdata = iris)
final <- output$data

## 這樣就可以得到最後的訓練結果了，在makelearner那部分可以修改predict type

## 將他設成prob就能得到機率結果囉，這邊是最最簡單的使用方法，基本上machine

## learning裡面不論是feature selection、missing value imputation、還有

## parameter tuning等等等功能全部都包含在這一個package裡面，希望能幫助到

## 想要使用R作為機器學習平台的使用者。需要更詳細的tutorial請參照來源，

## 寫的跟rstudio裡面的文章一樣的仔細，一步一步帶你做。

--","R_Language"
"1162","M.1480145613.A.F57","celestialgod","分享","R的parallel套件 (snow, foreach)",2016-11-26 15:33:30,NA,NA,"[關鍵字]: foreach, snow, snowfall

[出處]:http://chingchuan-chen.github.io/posts/2016/11/26/R-parallel-pkgs[重點摘要]:

有些程式不能全部靠RcppParallel加速

所以想說只能靠R的一些平行套件來解決

但是平行套件其實不少，那哪一個又有比較好的performance?

有興趣可以到出處網址去看


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1163","M.1480086515.A.57C","jojojen","問題","Re: 爬蟲爬取聯合財經新聞",2016-11-25 23:08:33,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《jojojen (JJJ)》之銘言：: : [問題類型]:: : 程式諮詢: : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 各位大大好，小弟算是爬蟲初學者，最近在練習爬取聯合新聞的即時新聞列表，: : 在抓出版時間時碰到一點問題，雖然硬是寫了出來，: : 但還是想請教一下有沒有更好的寫法: : 麻煩各位了！！: : [程式範例]:: : # install pack: : list.of.packages <- c(""rvest"", ""RCurl"", ""stringi"", ""XML"", ""stringr""): : new.packages <- list.of.packages[!(list.of.packages %in%: : installed.packages()[,""Package""])]: : if(length(new.packages)) install.packages(new.packages): : # 撈取財經新聞: : surl = ""http://money.udn.com/money/breaknews"": : udn = read_html(surl,encoding=""UTF-8""): : ranking_table = udn %>% html_nodes('.area_body') %>% html_nodes(xpath =: : ""//table""): : title = ranking_table %>% html_nodes('a') %>% html_text %>% iconv(from =: : 'UTF-8', to = 'UTF-8'): : url = ranking_table %>% html_nodes('a') %>% html_attr('href'): : ## 抓取時間的時候，因為類別跟出版時間都被放在only_web class裡: : ## 我分不開只好都先抓下來，再砍掉不符合的欄位: : pattern = '^[0-9]{2}': : t = ranking_table %>% html_nodes('.only_web') %>% html_text %>% as.data.frame: : colnames(t) = c(""data""): : time = subset(t, grepl(pattern, t$data)): : [環境敘述]:: : R version 3.3.1 (2016-06-21): : Platform: x86_64-w64-mingw32/x64 (64-bit): : Running under: Windows 7 x64 (build 7600): : [關鍵字]:: : 網路爬蟲, RVEST: 下面是我的作法，windows用rvest會遇到encoding問題: 但是windows中文版也不能正常顯示UTF8字元，所以要經過一點轉換: # require pkgs and install it if it is not installed: if (!""installr"" %in% installed.packages()) install.packages(""installr""): library(installr): require2(rvest): require2(stringi): require2(data.table) # 轉不轉data.table無所謂: require2(pipeR): if (is.windows()) {:   original_locale <- Sys.getlocale(""LC_COLLATE""):   Sys.setlocale(""LC_ALL"", 'C'): }: surl <- ""http://money.udn.com/money/breaknews"": outTbl <- read_html(surl, encoding=""UTF-8"") %>>%:     html_node(""#ranking_table"") %>>% html_table: if (is.windows()) {:   outTblTrans <- lapply(outTbl, function(v){:     if (class(v) == ""character"") {:       return(stri_conv(v, to = ""big5""))  # 字串都轉成big5:     } else {:       return(v):     }:   }) %>>% `names<-`(NULL) %>>% as.data.table %>>%  # names一定要先清空不然會錯:     setnames(stri_conv(names(outTbl), to = ""big5"")):   Sys.setlocale(locale = original_locale): }: #                                       標題 類別    出版時間 瀏覽數 分享數: # 1:    共享單車成都投放1周 亂停放被城管沒收 即時 11/25 21:21      0     NA: # 2:     緬甸洛興雅遭迫害 翁山蘇姬成眾矢之的 即時 11/25 21:21      0     NA: # 3: 馬英九：我還沒上任 就被批評會帶來大災難 即時 11/25 21:02     11     NA: # 4:       控緬甸種族淨化洛興雅人 亞洲爆示威 即時 11/25 20:54      8     NA: 上面那段也可以換成下面這個做法，不過是data.table only (但是資料量大會快一點): if (is.windows()) {:   outTblTrans <- outTbl[ , lapply(.SD, stri_conv, to = ""big5"")] %>>%:     setnames(stri_conv(names(outTbl), to = ""big5"")):   Encoding(names(outTblTrans)) <- ""big5"":   Sys.setlocale(locale = original_locale): }以下是根據celestialgod大的教學完成的爬蟲，萬分感謝celestialgod大的協助!!!

# require pkgs and install it if it is not installed
if (!""installr"" %in% installed.packages()) install.packages(""installr"")
library(installr)
require2(rvest)   # to get web content
require2(stringr) # to collapse a list of characters into a single string
require2(pipeR)

# 載入爬取新聞本文func
getUdnNewsCont <- function(url) {
  udn = read_html(url,encoding=""UTF-8"")
  artic = udn %>% html_nodes('p') %>% html_text() %>% iconv(from = 'UTF-8',
to = 'UTF-8') %>% str_c(collapse='.')
  return(artic)
}

# 撈取財經新聞
pb_news <- txtProgressBar(1, 60, style=3) # 進度條
## get news list
if (is.windows()) {
  original_locale <- Sys.getlocale(""LC_COLLATE"")
  Sys.setlocale(""LC_ALL"", 'C')
}
surl <- ""http://money.udn.com/money/breaknews""outTbl <- read_html(surl, encoding=""UTF-8"") %>>% html_node(""#ranking_table"")
%>>% html_table
ranking_table = read_html(surl, encoding=""UTF-8"") %>>%
html_node(""#ranking_table"")
if (is.windows()) {
  outTblTrans <- lapply(outTbl, function(v){
    if (class(v) == ""character"") {
      return(stri_conv(v, to = ""big5""))  # 字串都轉成big5
    } else {
      return(v)
    }
  }) %>>% `names<-`(NULL) %>>% as.data.table %>>%  # names一定要先清空不然會錯
    setnames(stri_conv(names(outTbl), to = ""big5""))
  Sys.setlocale(locale = original_locale)
}
## get news content
domain = ""http://money.udn.com/""url = ranking_table %>% html_nodes('a') %>% html_attr('href') %>%
paste0(domain, .)
content <- character(60)
for (i in c(1:length(url))) {
  content[i] <- getUdnNewsCont(url[i])
  setTxtProgressBar(pb_news, i)
}
news <- data.frame(outTbl, url=url, content=content)
news <- data.frame(lapply(news, as.character), stringsAsFactors=FALSE)  ##
clean table

View(news)

--","R_Language"
"1164","M.1480080483.A.5F6","celestialgod","問題","Re: 爬蟲爬取聯合財經新聞",2016-11-25 21:27:57,NA,NA,"※ 引述《jojojen (JJJ)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好，小弟算是爬蟲初學者，最近在練習爬取聯合新聞的即時新聞列表，: 在抓出版時間時碰到一點問題，雖然硬是寫了出來，: 但還是想請教一下有沒有更好的寫法: 麻煩各位了！！: [程式範例]:: # install pack: list.of.packages <- c(""rvest"", ""RCurl"", ""stringi"", ""XML"", ""stringr""): new.packages <- list.of.packages[!(list.of.packages %in%: installed.packages()[,""Package""])]: if(length(new.packages)) install.packages(new.packages): # 撈取財經新聞: surl = ""http://money.udn.com/money/breaknews"": udn = read_html(surl,encoding=""UTF-8""): ranking_table = udn %>% html_nodes('.area_body') %>% html_nodes(xpath =: ""//table""): title = ranking_table %>% html_nodes('a') %>% html_text %>% iconv(from =: 'UTF-8', to = 'UTF-8'): url = ranking_table %>% html_nodes('a') %>% html_attr('href'): ## 抓取時間的時候，因為類別跟出版時間都被放在only_web class裡: ## 我分不開只好都先抓下來，再砍掉不符合的欄位: pattern = '^[0-9]{2}': t = ranking_table %>% html_nodes('.only_web') %>% html_text %>% as.data.frame: colnames(t) = c(""data""): time = subset(t, grepl(pattern, t$data)): [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7600): [關鍵字]:: 網路爬蟲, RVEST下面是我的作法，windows用rvest會遇到encoding問題

但是windows中文版也不能正常顯示UTF8字元，所以要經過一點轉換

# require pkgs and install it if it is not installed
if (!""installr"" %in% installed.packages()) install.packages(""installr"")
library(installr)
require2(rvest)
require2(stringi)
require2(data.table) # 轉不轉data.table無所謂
require2(pipeR)

if (is.windows()) {
  original_locale <- Sys.getlocale(""LC_COLLATE"")
  Sys.setlocale(""LC_ALL"", 'C')
}

surl <- ""http://money.udn.com/money/breaknews""outTbl <- read_html(surl, encoding=""UTF-8"") %>>%
    html_node(""#ranking_table"") %>>% html_table
if (is.windows()) {
  outTblTrans <- lapply(outTbl, function(v){
    if (class(v) == ""character"") {
      return(stri_conv(v, to = ""big5""))  # 字串都轉成big5
    } else {
      return(v)
    }
  }) %>>% `names<-`(NULL) %>>% as.data.table %>>%  # names一定要先清空不然會錯
    setnames(stri_conv(names(outTbl), to = ""big5""))
  Sys.setlocale(locale = original_locale)
}
#                                       標題 類別    出版時間 瀏覽數 分享數
# 1:    共享單車成都投放1周 亂停放被城管沒收 即時 11/25 21:21      0     NA
# 2:     緬甸洛興雅遭迫害 翁山蘇姬成眾矢之的 即時 11/25 21:21      0     NA
# 3: 馬英九：我還沒上任 就被批評會帶來大災難 即時 11/25 21:02     11     NA
# 4:       控緬甸種族淨化洛興雅人 亞洲爆示威 即時 11/25 20:54      8     NA

上面那段也可以換成下面這個做法，不過是data.table only (但是資料量大會快一點)

if (is.windows()) {
  outTblTrans <- outTbl[ , lapply(.SD, stri_conv, to = ""big5"")] %>>%
    setnames(stri_conv(names(outTbl), to = ""big5""))
  Encoding(names(outTblTrans)) <- ""big5""
  Sys.setlocale(locale = original_locale)
}

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1165","M.1480078713.A.0D0","jojojen","問題","爬蟲爬取聯合財經新聞",2016-11-25 20:58:31,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

各位大大好，小弟算是爬蟲初學者，最近在練習爬取聯合新聞的即時新聞列表，

在抓出版時間時碰到一點問題，雖然硬是寫了出來，

但還是想請教一下有沒有更好的寫法

麻煩各位了！！


[程式範例]:

# install pack
list.of.packages <- c(""rvest"", ""RCurl"", ""stringi"", ""XML"", ""stringr"")
new.packages <- list.of.packages[!(list.of.packages %in%
installed.packages()[,""Package""])]
if(length(new.packages)) install.packages(new.packages)

# 撈取財經新聞
surl = ""http://money.udn.com/money/breaknews""udn = read_html(surl,encoding=""UTF-8"")
ranking_table = udn %>% html_nodes('.area_body') %>% html_nodes(xpath =
""//table"")
title = ranking_table %>% html_nodes('a') %>% html_text %>% iconv(from =
'UTF-8', to = 'UTF-8')
url = ranking_table %>% html_nodes('a') %>% html_attr('href')

## 抓取時間的時候，因為類別跟出版時間都被放在only_web class裡
## 我分不開只好都先抓下來，再砍掉不符合的欄位
pattern = '^[0-9]{2}'
t = ranking_table %>% html_nodes('.only_web') %>% html_text %>% as.data.frame
colnames(t) = c(""data"")
time = subset(t, grepl(pattern, t$data))

[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7600)

[關鍵字]:
網路爬蟲, RVEST

--","R_Language"
"1166","M.1480077439.A.BA2","lovedmagic","問題","利用R做網路爬蟲",2016-11-25 20:37:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)



[問題敘述]:
各位大大好，假設今天我想要在這個網站https://www.kickstarter.com/利用網路爬蟲爬資料。點進去每個project都會有目標金額，舉例
$12,337
pledged of $3,000 goal 意思就是我目標是3000元但是我已經籌得12337元
目標即達成，我想要抓這個東西，然後我想再抓右下角有一個


Pledge $5 or more

You Will Receive:

- 1 ""In a Heartbeat"" Thank You e-card signed by us both!

ESTIMATED DELIVERY
Aug 2017
86 backers

這些文字資料我都想要，我目前是想要用GET來做，但是這樣我是不是
必須要一個一個網頁點進去爬，會不會顯得很麻煩，有沒有什麼推薦的
方法或是程式去達成呢??



[關鍵字]: 網路爬蟲


選擇性，也許未來有用

--","R_Language"
"1167","M.1480061698.A.D11","cywhale","問題","Re: 篩選問題",2016-11-25 16:14:56,NA,NA,"這樣寫好像符合你要的，好處是可以在你的selectbar可以複選
輸入也很彈性

library(data.table)
library(magrittr)

selx <- function(...,data,varname=c(""A"",""B"",""C"")) {

  x <- list(...)
  names(x) <- varname[1:length(x)]
  dt <- do.call(cbind, x) %>% data.table() %>%
    .[,which(unlist(lapply(., function(x)!all(is.na(x))))),with=F] %>%
    setkeyv(colnames(.))

  return(dt %>%
          .[data %>% setkeyv(colnames(dt)), nomatch=0L] %>%
          .[,colnames(data),with=F]
  )

}

data = fread('""食性""  ""生育方式"" ""生活地區""
""肉食""   ""胎生"" ""水生""
""草食"" ""胎生"" ""陸生""
""肉食""  ""卵生"" ""水生""
""雜食"" ""胎生"" ""兩棲""
""草食"" ""胎生"" ""兩棲""')

## you can use
## selx(input$sela, input$selb, input$selc,..., data=data, varname=c(...))

selx(c(NA_character_), c(NA_character_), c(""水生""), data=data,
varname=colnames(data))
#食性 生育方式 生活地區
#1: 肉食     卵生     水生
#2: 肉食     胎生     水生
selx(c(NA_character_), c(""胎生"",""卵生""), c(""水生""), data=data,
varname=colnames(data))
#食性 生育方式 生活地區
#1: 肉食     卵生     水生
#2: 肉食     胎生     水生

selx(c(""雜食"",""草食""), c(""卵生""), c(""水生""), data=data,
varname=colnames(data))
#Empty data.table (0 rows)

selx(c(""雜食"",""草食""), c(""胎生""), c(""兩棲""), data=data,
varname=colnames(data))
#食性 生育方式 生活地區
#1: 草食     胎生     兩棲
#2: 雜食     胎生     兩棲

selx(c(""肉食""), c(""胎生""), c(NA_character_), data=data,
varname=colnames(data))
#食性 生育方式 生活地區
#1: 肉食     胎生     水生※ 引述《clansoda (小笨)》之銘言：: 各位好，我不知道這個命題怎麼寫但是它是關於篩選的問題: 假如我有三個可篩選的向量: A 是 空白 老鼠 老虎: B 是 空白 小時候 長大: C 是 空白 卵生 胎生: 我要做的是 假如A是空白 B也是空白 那就只篩: dat[c == 使用者輸入的值] 這樣: 假如只有B是空白 那就變成: dat[A == 使用者輸入 & C == 使用者輸入]: 不知道我這樣解釋會不會不太清楚: 就跟一般網頁的用法一樣，空白的就忽略它: 但是我寫不出類似的感覺，只能用很多if來包裝: 我覺得這樣程式會很複雜，所以來請教: dat[A & B & C] 是我最想一次寫完的方式可是: B如果是空白的話，就會導致整個data都沒辦法出來: 想請問有什麼更好的方法可以寫這個篩選呢: 前提是一定要有空白這個，因為如果不加空白這個選項: 預設就會是老虎或老鼠其中一個，可是假如使用者不想篩的話: 會沒辦法使用，因為A一定會是老虎或老鼠其中一個而不是兩種都呈現: ------------------------------: C大我在解釋一下，假如我有以下這個dataframe:     食性  生育方式 生活地區: 1   肉食   胎生 水生: 2   草食 胎生 陸生: 3   肉食  卵生 水生: 4   雜食 胎生 兩棲: 5  草食 胎生 兩棲: 假如使用者讓 食性 生育方式 生活地區三者皆留白則呈現的就是上面這個表格: 如果使用者這時候去拉了第一個select bar讓食性 == 肉食: 那這時候只會剩下第一跟第三個row: 他又去動了第二個select bar 讓生育方式 == 胎生: 則只會留下第一個row: 我目前是已經想出來大概的做法，只剩下最後一步我還在google: 如果有大大能提示我怎麼做最理想不過了: 這是我目前的作法: 食性 <- ifelse(食性== """","""",""食性 == input$食性""): 生育方式 <-ifelse(生育方式 == """","""",""生育方式 == input$生育方式""): 生活地區 <-ifelse(生活地區 == """","""",""生活地區 == input$生活地區""): if (食性 == """" & 生育方式 == """" & 生活地區 == """") {:    return(dat) } else {:  picachu <- c(食性,生育方式,生活地區) %>% .[.! = """"] %>% paste(collapse = ""&""):   dat[picachu] %>% return: }:  上面的是我的作法，缺的這一步就是data.table不接受character在他的argument媕Y: 上面的就會變成dat[""食性 == 肉食 & 生育方式 == 胎生""]: 多了那兩個quote，請問有其他方法可以解決這整個問題或者是上面這個quote問題嗎?--","R_Language"
"1168","M.1480048497.A.812","clansoda","問題","篩選問題",2016-11-25 12:34:53,NA,NA,"各位好，我不知道這個命題怎麼寫但是它是關於篩選的問題

假如我有三個可篩選的向量

A 是 空白 老鼠 老虎

B 是 空白 小時候 長大

C 是 空白 卵生 胎生

我要做的是 假如A是空白 B也是空白 那就只篩

dat[c == 使用者輸入的值] 這樣

假如只有B是空白 那就變成

dat[A == 使用者輸入 & C == 使用者輸入]

不知道我這樣解釋會不會不太清楚

就跟一般網頁的用法一樣，空白的就忽略它

但是我寫不出類似的感覺，只能用很多if來包裝

我覺得這樣程式會很複雜，所以來請教

dat[A & B & C] 是我最想一次寫完的方式可是

B如果是空白的話，就會導致整個data都沒辦法出來

想請問有什麼更好的方法可以寫這個篩選呢

前提是一定要有空白這個，因為如果不加空白這個選項

預設就會是老虎或老鼠其中一個，可是假如使用者不想篩的話

會沒辦法使用，因為A一定會是老虎或老鼠其中一個而不是兩種都呈現

------------------------------

C大我在解釋一下，假如我有以下這個dataframe

    食性  生育方式 生活地區

1   肉食   胎生 水生

2   草食 胎生 陸生

3   肉食  卵生 水生

4   雜食 胎生 兩棲

5  草食 胎生 兩棲


假如使用者讓 食性 生育方式 生活地區三者皆留白則呈現的就是上面這個表格

如果使用者這時候去拉了第一個select bar讓食性 == 肉食

那這時候只會剩下第一跟第三個row

他又去動了第二個select bar 讓生育方式 == 胎生

則只會留下第一個row

我目前是已經想出來大概的做法，只剩下最後一步我還在google

如果有大大能提示我怎麼做最理想不過了

這是我目前的作法

食性 <- ifelse(食性== """","""",""食性 == input$食性"")
生育方式 <-ifelse(生育方式 == """","""",""生育方式 == input$生育方式"")
生活地區 <-ifelse(生活地區 == """","""",""生活地區 == input$生活地區"")
if (食性 == """" & 生育方式 == """" & 生活地區 == """") {
   return(dat) } else {
 picachu <- c(食性,生育方式,生活地區) %>% .[.! = """"] %>% paste(collapse = ""&"")
  dat[picachu] %>% return
}
 上面的是我的作法，缺的這一步就是data.table不接受character在他的argument媕Y

上面的就會變成dat[""食性 == 肉食 & 生育方式 == 胎生""]

多了那兩個quote，請問有其他方法可以解決這整個問題或者是上面這個quote問題嗎?

--","R_Language"
"1169","M.1480027332.A.E1A","andrew43","分享","MuMIn 套件分享：複迴歸變數挑選",2016-11-25 06:42:09,NA,NA,"1. 套件名稱：
MuMIn

2. 套件主要用途：

""Model selection and model averaging based on
information criteria (AICc and alike)""

此套件最主要的工作：
線性模型的變數選擇提供很暴力或彈性的解決方案。
預設的選擇指標是 AICc 值，但可以自行選用其它常見的指標。

3. 套件主要函數列表：

a. dredge(full_model)
   對 full_model 以特定的準則進行可能的 reduced model 之評量。
   例如，full_model 有 3 個自變數，
   則可以一次比較所有 7 個可能模型的 AICc 值，
   幫助你選出最佳模型，而不是按傳統的 step() 來進行。
b. get.models(dredge 的回傳物件)
   可以按特定的規則提取出經 dredge() 的較優良的模型。
   會回傳一個 list，之內每項為 model 同樣物件。
c. importance(dredge 的回傳物件)
   取得各自變數「綜合各模型」的重要性。
d. model.avg(dredge 或 get.models 的回傳物件)
   計算數個模型根據優良程度「加權平均」之係數，
   分成 full average 和 conditional average 二類，
   在 help(model.avg) 中有更多說明其不同之處。
   在你無法選出一個最佳模型的時候會有作用。

4. 分享內容：

library(MuMIn)
# 建立一個一般線性模型 y ~ x1 + x2 + x3 + x4 + x5
# x1 到 x3 對 y 的重要性越來越低，x4 和 x5 是冗餘的
N <- 100
set.seed(123)
dt <- data.frame(
  x1 = runif(N),
  x2 = runif(N),
  x3 = runif(N),
  x4 = runif(N),
  x5 = runif(N)
)
dt$y <-
  dt$x1 * rnorm(N, mean = 5, sd = 0.1) +
  dt$x2 * rnorm(N, mean = 20, sd = 5) +
  dt$x3 * rnorm(N, mean = 30, sd = 20) +
  rnorm(N)
full.model <- lm(
  y ~ x1 + x2 + x3 + x4 + x5,
  data = dt,
  na.action = ""na.fail"" # 在有缺失值時可避免不全相同資料
)

dd1 <- dredge(full.model)
dd1              # 暴力解所有可能模型
dd2 <- subset(dd1, delta < 4)
dd2              # 只看 AICc 與最小 AICc 模型的差 4 之內的模型
get.models(dd1, delta < 4) # 同上，但回傳的是 lm 物件
importance(dd2)  # 在 dd2 各模型中自變數「累積」的重要性
model.avg(dd2)   # 取得 dd2 之下的「平均模型」，
                 # 另見手冊中對「average」與「subset」之說明

5. 備註

我並不支持變數選擇僅靠單一的指標進行，
所以對我來說這只是個參考工具。

--","R_Language"
"1170","M.1480007487.A.C27","lovedmagic","問題","Rfacebook:length(url) == 1 is not TURE",2016-11-25 01:11:24,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

小弟在使用Rfacebook的packages的時候想要抓取每篇Post
的按讚人名，但是發現一篇一篇抓太慢了，於是直接用一個
id[1:5]去做，但是卻發生了上述的問題，求解！

[程式範例]:

Case1:只抓取一篇Post的情況> post_test = getPost(post = page$id[1], token = fb.oauth)$likes
     from_name          from_id
1       黃馨慧 1509633689052641
2   Ustart Moe 1324579444243056
3   Linda Chen 1810075945896579
4       李偉綾 1546840591999885
5    Vivian Wu 1365546490131919
6       呂羽晨 1265741546832028
7       林均憶 1502875853061901

Case2:嘗試一次抓取多篇Post的情況> post_test = getPost(post = page$id[1:5], token = fb.oauth)錯誤: length(url) == 1 is not TRUE

[環境敘述]:

Windows 7
Version : R 3.2.5

[關鍵字]:

facebook



--","R_Language"
"1171","M.1479999594.A.11A","pk790127","分享","Re: sparklyr",2016-11-24 22:59:51,NA,NA,"※ 引述《celestialgod (天)》之銘言：: [關鍵字]: sparklyr: [出處]: http://spark.rstudio.com/index.html: [重點摘要]:: 煩請移駕到我的部落格觀看：http://goo.gl/SSor3y: 最近花了點時間研究Spark: 終於研究到了一個段落: 回來研究一下自己最愛的R: 而且又看到rstudio釋出了sparklyr就手癢想說試試看了: 於是就有這篇心得了XD: 只是我還沒去測試machine learning相關的東西: 就留給其他人慢慢賞玩了感謝celestialgod大大 無私分享這個關於spark的套件
小弟目前著手研究這個套件,並搭配出處原文參考

但是在安裝的時候發現了一些問題
例如說是
Error:

To run Spark on Windows you need a copy of Hadoop winutils.exe:

1. Download Hadoop winutils.exe from:

2. Copy winutils.exe to
C:\Users\XXXXXX
這個問題網路上問的人蠻多的,只要將winutils放入指定路徑即可

但是衍生成別的問題 就找不到解法,想請教大大
問題如下:> library(sparklyr)> sc <- spark_connect(master = ""local"")Error in start_shell(master = master, spark_home = spark_home, spark_version
= version,  :
  Failed to launch Spark shell. Ports file does not exist.
    Path: C:\spark-2.0.0-bin-hadoop2.7\bin\spark-submit.cmd
    Parameters: --class, sparklyr.Backend, --packages,
""com.databricks:spark-csv_2.11:1.3.0"",""com.amazonaws:aws-java-sdk-pom:1.10.34"",
""C:\spark-2.0.0-bin-hadoop2.7\R\lib\sparklyr\java\sparklyr-2.0-2.11.jar"",
C:\Users\John\AppData\Local\Temp\RtmpKyXbqK\file16b076c13dc6.out

檔案名稱、目錄名稱或磁碟區標籤語法錯誤。


感覺是spark檔案中的一些資料放錯了位置,可是研究了好久還是找不到答案
還請各位大大相助










--","R_Language"
"1172","M.1479983938.A.82E","huangsam","問題","匯出.匯入EXCEL",2016-11-24 18:38:56,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請問大家在匯出XLXS時，要使用什麼套件比較合適(資料量大)
我知道如果轉成CSV會比較好，但是如果一定要匯出XLSX時，有什麼建議嗎
目前有使用的套件為xlsx:::write.xlsx2匯出
另外也有考慮使用xlconnect的套件
想請問1.write.xlsx2 and xlconnect差別
      2.是否有推薦較好的匯出XLSX的套件(一般電腦情況)


[環境敘述]:[關鍵字]:
write.xlsx2, xlconnect選擇性，也許未來有用--","R_Language"
"1173","M.1479937450.A.3B8","TZULIU","問題","@與$的定義與差別",2016-11-24 05:44:08,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

在使用""urca""的套件下的函數""ur.ers""時，找了一陣子後發現要call輸出項目的時候，

要先使用""@""。想請問各位高手什麼情況下需要使用""@""？另外一個問題就是，

若以專業的用語來說，""@""和""$""分別會提出什麼「數值」？

謝謝！


[程式範例]:

library(urca)

df.trend <- ur.ers(y,model=c(""trend""),lag.max=8)

##提出殘差值標準誤[email<U+00A0>protected]$sigma

--","R_Language"
"1174","M.1479916371.A.435","celestialgod","討論","關於自刪相關規範的制定",2016-11-23 23:52:47,NA,NA,"有一些板友的意見都有到我這裡來

我也跟另外兩位板主做了些討論

不過我也想知道板上其他人的意見

所以有了這一篇文章


我先統整目前的意見如下

現在有下面四個方案：

1. 禁止推文 => 全部回文，缺點是可能小問題都只能用回文的

而且不能保證回文的時候，回文者會把原PO內容都留下

2. 禁止刪文 => 全部寄信給板主刪文，缺點是板主可能會不堪其擾

   這部分還需要搭配禁止清空條例才能有效運作

3. 定相關罰則，懲處自刪的人 => 缺點是不在意的人還是不在意，換個帳號再來一次

4. 設立匿名帳號協助PO文 or 板主代PO

  這部分有正反意見，贊成的人是考量說有人不想被搜到

  也有人認為在R板問問題不需要用到那麼麻煩

  在板主看來，徒增板主困擾，而且這個板其實沒有很多使用者

5. 維持現狀

    就盡量宣導，板主在盡可能地去拯救刪掉的文章


希望板友可以給予相關意見提供板主們參考

謝謝大家

--","R_Language"
"1175","M.1479911568.A.F76","yashawnya","問題","關於雙重迴圈",2016-11-23 22:32:46,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題描述]:
抱歉，剛學習R語言一個月還很菜，第一次上來發問，如果排版和問題敘述不好請多包涵
。

目前我有兩個dataframe先稱為a和b 兩個dataframe的資料量不相同，但欄位都一樣有三
個
分別為經度、緯度、和一個計算的值
然後目標是用gdist(a$long,a$lat,b$long,b$lat,units = ""km"")
來計算a的所有點到b的所有點的分別距離
如果某個b點有距離某個a點大於10公里的就捨棄掉那個b點

現在我是使用雙層迴圈來進行處理
想法大概如下
while(x<=a資料量){
y<-1
while(y<=b資料量){
if(a第x列和b第y列距離<=10)
保留b

y<-y+1
}
x<-x+1
}

但是只要a或是b的資料量大一點，速度就會非常慢
想請問版上大大有沒有比較好的辦法處理這方面的問題


--","R_Language"
"1176","M.1479835999.A.338","cd12631","問題","Re: 折線圖+長條圖呈現",2016-11-23 01:33:12,NA,NA,"想看別種繪圖嗎?

plotly： 我這不是來了嗎?

借用celestialgod的data frame作範例

library(plotly)

dt <- data.frame(
  x = 1:8,
  freq = c(120,130,140,150,160,170,170,180),
  earn = c(3,3,5,4,6,7,3,5) * 0.1
)

dt_earn_plotly <- plot_ly(data = dt, x=dt$x, y=dt$earn, type = ""scatter"",
mode = ""liners"", name = ""earn"")

dt_freq_plotly <- plot_ly(data = dt, x=dt$x, y=dt$freq, type = ""bar"", name =
""freq"")

dt_plotly <- subplot(dt_earn_plotly, dt_freq_plotly,  nrows = 2, shareX =
TRUE)

dt_plotly



圖：http://yichunsung.github.io/plotly.png互動介面：http://yichunsung.github.io/plotlyCode可能在Github上你會看得比較清楚：https://github.com/yichunsung/R_Application/blob/master/plotly%20sample.R--","R_Language"
"1177","M.1479792666.A.B36","lovealbee","問題","如何在自己的伺服器上建立R-leaflet套件",2016-11-22 13:31:03,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

現況:目前已架立MYSQL的SERVER，也在這個SERVER中建立了R，但我們想說如何架一個
     動態地圖在SERVER中，我們用一般本機端的SHINYSERVER 是可以串聯，但是問題
     點如下:

問題: 在SERVER中，如何用R將leaflet給在網頁上做呈現?


[程式範例]:

從Rshiny的頁面出現以下訊息

ERROR: An error has occurred. Check your logs or contact the app author
       for clarification.

再從網頁原始碼出現的錯誤訊息如下:
Failed to load resource: the server responded with a status
of 500 (Internal Server Error)


[環境敘述]:

R 3.3.2
本機: WIN7
SERVER: UBUNTU




[關鍵字]:

R
Leaflet
server

--","R_Language"
"1178","M.1479700332.A.CE4","samex4x4","問題","shiny io 中文顯示問題",2016-11-21 11:52:02,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:大家好我又來了m(_ _)m最近在使用shiny為公司寫給行銷人員使用的報表之前就發現有中文顯示問題估狗後增加一個global.R內容為 options(shiny.usecairo = FALSE)但還是無法掛上shiny io錯誤訊息大概都是這樣Failed to lint file 'server.R'The linter failed with message:invalid multibyte string at '<e7><99><bc>?<U+6B27><U+3551>"") %>%'Failed to lint file 'ui.R'The linter failed with message:invalid multibyte string at '<e7><99><bc>?<87>','Failed to lint file 'server.R'The linter failed with message:查看warnings()Warning messages:1: In gregexpr(""../"", content, fixed = TRUE) :input string 112 is invalid in this locale2: In gregexpr(""../"", content, fixed = TRUE) :input string 138 is invalid in this locale.........都是我寫中文的行數想詢問大家要如何解決謝謝[程式範例]:[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   base[關鍵字]:
shiny io 中文顯示


--So we beat on, boats against the current,+.borne back ceaselessly into the past.                    .+•.-F. Scott Fitzgerald <The Great Gatsby>.於是我們繼續往前掙扎，像逆流中的扁舟，                                  ◢被浪頭不斷地向後推入過去。▁▂▁        ▁▂▂▂▂▁◥▇◤▆▅▅▄▄▅▆▇▇▇-F. 史考特•費滋傑羅 <大亨小傳>███▇▇▆▅▆▇▄▅▆▇█--","R_Language"
"1179","M.1479696722.A.679","ppp1987","問題","glmmPQL無法收斂問題",2016-11-21 10:52:00,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我現在使用MASS裡的glmmPQL來分析資料，模型長這樣

model.n7.8.gmm.4<- glmmPQL(Y~ factor(x1) + factor(x2) + factor(x3) +
                x4 + x5 + x6 + x7 + x8 +factor(x9) + factor(x10),
                random = ~ x5 + x6 +x7 + x8 | ID,
                family=binomial(link=""logit""),
                correlation=corLin(form=~DayOrder), data = data.m7)
iteration 1
iteration 2
Error in lme.formula(fixed = zz ~ factor(sport.7.15) + factor(sick.7) +  :
  nlminb problem, convergence error code = 1
  message = iteration limit reached without convergence (10)

但是出現無法收斂的訊息

就算我random改成 random = ~ x5 | ID也是出現同樣的訊息
如果我random改成只有常數項 random = ~ 1 | ID 就跑得出來

所以是模型太複雜了嗎?(資料約14000筆)

想請問有沒有解決的方式

謝謝

[關鍵字]:
glmmPQL

--","R_Language"
"1180","M.1479631449.A.61F","rlearner","問題","無法用shiny server執行leaflet套件",2016-11-20 16:44:06,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想在一台Ubuntu server的機子上執行shiny

(測試一)這是在那台機子上測試的shiny頁面:http://140.128.197.58:3838/sample-apps/shiny1/(測試二)也可以用javascrip 去執行 leaflet頁面http://140.128.197.58:3838/sample-apps/html-samples/leaflet.html問題在這↓↓
!!!!!!!!!(問題頁面)但在一台Ubuntu server的機子上執行shiny
中的leaflet互動地圖套件,卻無法呈現頁面http://140.128.197.58:3838/sample-apps/leaflet1/(頁面錯誤訊息)(請複製網頁用google chrom開啟)
ERROR: An error has occurred. Check your logs or contact the app author for
clarification.



[程式範例]:(leaflet測試碼)
程式是用shiny的方法測試的,會分成ui和server兩部份
不會太複雜,在rstudio上可成功運作
(請先在rstudio上下載shiny 和leaflet套件)

--[ui.R]--------------------------------------------------
library(leaflet)
library(shiny)

fluidPage(
  h1(""hpc map test""),
  leafletOutput('map',width = ""100%"",height = 400)
)

--[server.R]-----------------------------------------------
library(shiny)
library(leaflet)

function(input,output){
  output$map <- renderLeaflet({
    leaflet() %>%
      addTiles() %>%
      setView(lng=120.601,lat=24.179,zoom=16)
  })
}



[環境敘述]:
本機win7
伺服器:ubuntu server 14.04
shiny server

[關鍵字]:
shiny server ,ubuntu server
leaflet


--","R_Language"
"1181","M.1479625031.A.563","celestialgod","問題","(救回) loop in analysis",2016-11-20 14:57:07,NA,NA,"請問一下

今天我有一個資料夾 t

變項

   x1   y1 x2  y2
1  46 5452  9 885
2 546  321 87   8


我想要使用一個loop 去畫圖

  plot(t$x1, t$y1)
  plot(t$x2, t$y2)

for(i in 1:2){
  plot(t$x[i], t$y[i])
}

我使用以下的code，但他出現錯誤

我上網找了幾個網站 但沒有找到解答

想要請問板上的高手

是那出現錯誤

謝謝


--","R_Language"
"1182","M.1479624897.A.7F8","celestialgod","問題","(救回) loop 中 cell 內細格等於變項",2016-11-20 14:54:54,NA,NA,"相關作者訊息已經遮蔽想要請問一下

我現在想要進行

c[1]=a1 (已知變項)
.
.
.
c[8]=a8

以下是我寫得loop

a1=2
a2=3
a3=4
a4=5
a5=6
a6=7
a7=8
a8=9
c=1:8
t=data.frame(c)
attach(t)
for(i in 1:8)  c[i] <- (paste('a',i,sep=""""))

但沒想到c都變成文字的a1 而非變項內容


我想要的是如何把一些規律的變項 變成一個data.frame

這樣我才可以對這個data.frame進行觀看分佈狀況 就是常用的bootstrap 的最後的步驟

不知道要怎樣修改我原本的code

或是有更快或簡單的code 可以把a1-a8 變成一個data 呢？

謝謝

--","R_Language"
"1183","M.1479624795.A.932","celestialgod","問題","(救回) 如何讀入多個CSV檔",2016-11-20 14:53:09,NA,NA,"相關作者訊息已經遮蔽想要請問一下

我嘗試使用在單一資料夾內有又不同資料夾

如wd 底下又有x, y, z

x底下有 x1 x2

y有y1 y2

z有z1


我嘗試使用兩個list.files去讀取


setwd(""C:/SASMACRO/data"")
data.files1 = list.files()
data.files = list.files(path=data.files1,pattern=""*.csv"")


雖然data.files 可以得到所有個別的csv，分別為x1-z1

似乎都判斷為在x底下資料夾的路徑也就是

C:/SASMACRO/data/x/y1

這導致y1-z1無法在後續的merge的方式處理

要怎樣讓他可以判斷出對應csv的路徑為

C:/SASMACRO/data/x/x1
C:/SASMACRO/data/x/x2
C:/SASMACRO/data/y/y1
C:/SASMACRO/data/y/y2
C:/SASMACRO/data/z/z1

謝謝

另外以上file內檔案並非非常有邏輯，所以使用eval可能不是非常適合





--","R_Language"
"1184","M.1479624739.A.454","celestialgod","問題","(救回) find & substr 在r的應用",2016-11-20 14:52:15,NA,NA,"相關作者訊息已經遮蔽目前學習使用r 遇到想切特定符號後數字

例如

/x/1771416

想抓第二個slash後面的七個字

在以前excel 我大概用find,find,substr去抓就可以了

目前在book看到str_detect

但似乎只會傳輸T or F

另外有看到有人提到gregexpr

但似乎會回傳list

可以請問這樣的例子要怎樣處理嗎？

謝謝

--","R_Language"
"1185","M.1479623940.A.0B2","celestialgod",NA,"Re: 呼籲：有板友推文回應後請儘量不要刪除原文",2016-11-20 14:38:56,NA,NA,"諸位板友好

一個好的社群，就是會有人回應相關問題

而每個人的問題有人能解，這個社群就會繼續活絡下去

反之，這個社群就會漸漸變成一攤死水

而能讓人持續回答下去的原因

除了回答的人有心、有空之外

回答人也希望能夠透過回答問題得到一些其他啟發、思考

甚至是得到解決問題的成就感

但是如果很多人抱著只拿到答案就把文章刪除的自私心態

不僅是抹滅回答人用自己有空時間幫你解決問題的好意，讓人感到灰心

還會讓這個社群漸漸沒有人願意解決問題

統計板就有幾個大大因此已經不回答問題

我不希望R板走向統計板一樣，大大不願意再助人解決問題了

希望各位能夠取之社群，回饋社群，共勉之


我也相信慢慢累積下來的問題，也會慢慢成為大家的寶庫

可以從這裡挖掘到一些相關資訊去解決自己的問題

謝謝諸位※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: 諸位板友好。: 在此呼籲，當有其它板友以推文的方式回應文章後，: 請原作者儘量不要刪除原文。: 我這麼說的理由如下。: 1. 即使你問了一個很「笨」的問題，其它板友也可能有一樣的問題。:    留下這種文章與其它的人推文解答供後人查閱，也是功德一件。:    請不要抱持著:    「我拿到解答了所以文章沒意義了」或是:    「原來我的問題真蠢還是快刪了」之類的想法而刪文。: 2. 一句短短的推文可能可以大大地啟發原發文者或其它任何人。:    請尊重這些善心人士熱心的寶貴推文內容。:    刪文前請再想一想：「我真的有權就刪了別人的文字嗎？」:    也別忘了，這些推文的最大受益著正是自己，但自刪卻損害了熱心人的權利。: 雖然本看板目前不禁止自刪，板主也不主動回救刪文。: 但假如有推文者希望救回自己被刪的文字，歡迎和板主（們）聯絡。: 謝謝諸位。--

--","R_Language"
"1186","M.1479623329.A.430","celestialgod","問題","(救回) 多回圈loop 與paste",2016-11-20 14:28:46,NA,NA,"相關作者訊息已經遮蔽想要請問一下

我想要i j paste

在sas我比較熟悉會使用

data data;
do i= 1 to 5;
do j= 1 to 5;
output;
end;
end;
run;

然後cats連起來

我嘗試在r 使用paste0 (1:5,1:5) 卻失敗

另外嘗試先創一個空的dataset

然後放入i j 的loop 在paste

結果也是失敗

可以請問一下要怎樣處理嗎

謝謝

--","R_Language"
"1187","M.1479623219.A.36B","celestialgod","問題","mac write csv",2016-11-20 14:24:11,NA,NA,"相關作者訊息已經遮蔽最近因為windows 預設非採用unicode的問題

讓我轉換使用mac的電腦處理中文資料的讀取與處理

在使用mac後讀取的狀況的確比windows好不少

但我發現存檔的時候

存成csv 在使用excel開啟的時候仍會有亂碼跑掉

但確定在r的資料時沒有問題

我已經使用unicode編碼

csvout<-file('out.csv',encoding=""UTF-8"")
write.csv(df,file=csvout,row.names = FALSE)

但還是這樣

另外存成txt

直接點開的確ok

但使用excel 開啟又變的很怪

嘗試unicode 或一堆不同解碼器 在excel 仍無法辨識

真的快被中文字詞搞死了

想要請問一下 要怎樣才可以處理存檔的時候可以存成pure的檔案

雖然似乎可以用xlsx套件寫成excel 檔，問題似乎好很多

但這個太花資源 我希望直接存成csv or txt這樣

謝謝

--","R_Language"
"1188","M.1479623056.A.8D9","celestialgod","問題","Re: 用兩個檔案找相同的值",2016-11-20 14:24:11,NA,NA,"※ 引述《hirdaramani (Hirdaramani)》之銘言：:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手~~: [問題敘述]:: A檔案是name,B檔案有name和age: 想要知道當發現A某個name的時候 可以去B的data.frame找到他的age: [程式範例]:: name <- c(""Joe"", ""Bob"", ""Vicky""): age <- c(""28"", ""26"", ""34""): data <- data.frame(name, age): name_data <-c(""Joe"", ""Bob"", ""Vicky""): for (i in name_data){:   for(x in 1:length(data$name)):   {:     if(i ==data$name[x]):       age_x <- data$age[x]:   }: }: 以上是我自己想出來用兩個迴圈寫的 只是感覺有點蠢，應該有更聰明方便的方法: 本質上我就是想要類似excel的vlookup但是要可以在去叫出那個值。: 謝謝各位前輩的分享教學: 想要增進自己的能力避免自己只會當LOSER~~~~:

library(data.table)
library(dplyr)
DT <- data.table(name = c(""Joe"", ""Bob"", ""Vicky""),
                 age = c(28, 26, 34))

queryNames <- c(""Joe"", ""Bob"")

## dplyr
# length(queryNames) == 1
filter(DT, name == queryNames[1])

# length(queryNames) > 1
filter(DT, name %in% queryNames)

## data.table
# length(queryNames) == 1
DT[name == queryNames[1]]

# length(queryNames) > 1
DT[name %in% queryNames]


另外前一篇提到join

data.table::merge 或是 dplyr::*_join的適用情況比較像下面這樣


DT <- data.table(name = c(""Joe"", ""Bob"", ""Vicky""),
                 sex = c(""M"", ""M"", ""F"")
                 age = c(28, 26, 34))

queryConDT <- data.table(name = c(""Joe"", ""Vicky""),
                         sex = c(""M"", ""F""))

# dplyr
inner_join(DT, queryConDT)

# merge
merge(DT, queryConDT)


也就是有兩個以上條件要做查詢的時候再去使用

merge, *_join 為了去join還有做不少運算

能夠用 == 或是 %in% 處理就用這些運算子處理


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1189","M.1479617197.A.A7F","abc2090614","問題","Re: 用兩個檔案找相同的值",2016-11-20 12:46:35,NA,NA,"※ 引述《hirdaramani (Hirdaramani)》之銘言：:: [問題類型]::: A檔案是name,B檔案有name和age: 想要知道當發現A某個name的時候 可以去B的data.frame找到他的age: [程式範例]:: name <- c(""Joe"", ""Bob"", ""Vicky""): age <- c(""28"", ""26"", ""34""): data <- data.frame(name, age): name_data <-c(""Joe"", ""Bob"", ""Vicky"")用dplyr的SQL式寫法  我把你的data跟name_data改成你所想的A, B

data.table請其他人寫吧


B <- data
A <- data.frame(name_data)
age_match <- dplyr::left_join(A, B, by=c(""name_data"" = ""name""))

這樣age_match裡會有A的name加上所有對應到B中的age, 重複的會全部列出來, 沒有就NA


--","R_Language"
"1190","M.1479615665.A.3DF","hirdaramani","問題","用兩個檔案找相同的值",2016-11-20 12:21:02,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手~~[問題敘述]:A檔案是name,B檔案有name和age想要知道當發現A某個name的時候 可以去B的data.frame找到他的age[程式範例]:
name <- c(""Joe"", ""Bob"", ""Vicky"")
age <- c(""28"", ""26"", ""34"")
data <- data.frame(name, age)

name_data <-c(""Joe"", ""Bob"", ""Vicky"")

for (i in name_data){
  for(x in 1:length(data$name))
  {
    if(i ==data$name[x])
      age_x <- data$age[x]

  }
}


以上是我自己想出來用兩個迴圈寫的 只是感覺有點蠢，應該有更聰明方便的方法

本質上我就是想要類似excel的vlookup但是要可以在去叫出那個值。

謝謝各位前輩的分享教學

想要增進自己的能力避免自己只會當LOSER~~~~--","R_Language"
"1191","M.1479615214.A.668","lenofire","問題","undersampling的問題",2016-11-20 12:13:31,NA,NA,"請問R的resampling package 能否用來做unsampling？能否用於多分類上？後者問題應該
是可以的

--","R_Language"
"1192","M.1479560974.A.6E7","celestialgod","問題","Re: 用一行code str_detect 判斷多個string元素",2016-11-19 21:09:30,NA,NA,"※ 引述《wanson (望生)》之銘言：: 我上網看到有人討論: 當要判斷的strin 為多個可以用: string =c(""a"",""b""): str_detect(data, paste(string, collapse = '|')): 用| 去判斷字串中有 a or b的出現有無: 我後來想如果我要取「同時」要有a 與b 本以為只要把| 換成 &: 可以得到結果: 但發現似乎沒有相關的討論: 想要請問一下 是否有更好簡潔的寫法幫助我完成這個需求迴圈在資料大一點也會慢

會建議下面做法：

library(stringr)
library(pipeR)
strs <- sample(letters[1:4], 500, TRUE) %>>%
    (str_c(.[1:125], .[126:250], .[251:375], .[376:500]))
patterns <- letters[1:2]
contain_a_b <- sapply(patterns, str_detect, string = strs) %>>%
    rowSums %>>% `==`(length(patterns))
strs[contain_a_b]


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1193","M.1479546736.A.7D4","wanson","問題","用一行code str_detect 判斷多個string元素",2016-11-19 17:12:14,NA,NA,"我上網看到有人討論

當要判斷的strin 為多個可以用



string =c(""a"",""b"")

str_detect(data, paste(string, collapse = '|'))


用| 去判斷字串中有 a or b的出現有無

我後來想如果我要取「同時」要有a 與b 本以為只要把| 換成 &

可以得到結果

但發現似乎沒有相關的討論

想要請問一下 是否有更好簡潔的寫法幫助我完成這個需求


--","R_Language"
"1194","M.1479546303.A.C7A","joson4921","問題","對group_by後的資料使用filter過濾",2016-11-19 17:04:57,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:*[m入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:手上有一組資料叫作OnStop_TT(csv檔:https://goo.gl/uneVoZ)想選取其中的Time_frame(5-22時)/Goback(去&返程)/NameZh(單程25站)等三個欄位

以group_by作分類,分類結果為

符合對應Time_frame/Goback/NameZh底下皆有數十筆不等之Time_OnStop(停靠時間)

再以summarise取出停靠時間最小值,然後用arrange依Time_OnStop大小排序輸出

以下程式碼參考網路上有的並加以修改如下:
===============================================================

#初始化 type 儲存分類後的 OnStop_TT 資料
type <- OnStop_TT %>%

  #選取Time_frame, Goback, NameZh等三欄位作為分類數據的依據
  group_by(Time_frame,Goback,NameZh) %>%

  summarise(Time_OnStop = min(Time_OnStop)) %>%
  arrange(desc(Time_OnStop))

===============================================================






到這邊為止都OK也能跑出我要的結果.

但我想做的是在summarise取最小值之前,先行排除停靠時間過小的資料：

→比「盒鬚法下緣(令此數為 QL )減1.5倍 IQR」還要小的資料視為異常值刪除

之後再對每一組分類結果底下的停靠時間資料作處理:

因為不會寫所以copy網路上找到的程式碼並修改如下:

===============================================================

  #初始化盒鬚法上下緣分別為 QU 和QL, IQR值為QU-QL

  QL <- quantile( type, probs=0.25) %>%
  QU <- quantile( type, probs=0.75) %>%
  QU_QL <- QU-QL %>%
  QL %>%
  QU %>%
  QU_QL %>%

  #鎖定小於下四分位數的數值（ Time_OnStop < QL-1.5*IQR 的資料視為異常值)
  which(type < QL-1.5*QU_QL) %>%
  type[which(type < QL-1.5*QU_QL)] %>%

  #移除小於 下緣QL減去1.5倍IQR 的資料列
  #然後取最小值
  filter( type, Time_OnStop < (QL-1.5*QU_QL)) %>%

  summarise(Time_OnStop = min(Time_OnStop)) %>%
  arrange(desc(Time_OnStop))

===============================================================

錯誤代碼,疑似QU沒有成功初始化:Error: object 'QU' not found

弄了快一星期還是找不到問題出在哪,請求板上大神協助

感謝大家


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1195","M.1479450788.A.615","jklkj","問題","merge某些欄位不須merge",2016-11-18 14:33:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
目前我手上有兩個表格，兩張表格是用AAA、BBB、CCC去merge
AAA、BBB、CCC、111.x、222.x、333.x、111.y、222.y、333.y
111、222、333我只想出現一次，可是我解決的辦法很蠢
想請問一下有更好的方法嗎

[程式範例]:
test.data <- merge(test1.data, test2.data,
                   by = c(""AAA"", ""BBB"", ""CCC"",
                          ""111"", ""222"", ""333""), all = TRUE)

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1196","M.1479403943.A.E77","pinlateng","問題","3D繪圖問題",2016-11-18 01:32:20,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
我現在有一份人口學統計資料，想要用 3D 繪圖方式呈現

目標是畫出  地區 X 年分 X 人數的 3D 散佈圖 (或是折線圖)

[程式範例]:
我先下載了scatterplot3d這個套件

因為我知道年份跟地區不能直接用於繪圖，所以先用一般數字向量來處理

之後再用繪圖軟體補上標籤，所以我的程式大概是這樣

x <- c(1:24) #縣市數目
y <- c(1:10) #十年份資料
f <- function (x,y) {dataframe[x,y]} # 10variables * 24obs的人口統計數據
z <- f(x,y)

最後跑 scatterplot3d(x,y,z)的時候跑出了這個：
Error in xyz.coords(x = x, y = y, z = z, xlab = xlabel, ylab = ylabel,  :
  'x', 'y' and 'z' lengths differ

因為我爬了網路的文章，媕Y的案例都是變數有所相關的數學函數
但我猜我這個問題應該是出在數值彼此沒有函數的對應關係，所以畫不出來
可是不知道怎麼處理...Orz

[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:3D繪圖  社會統計  人口學  歷時性資料--","R_Language"
"1197","M.1479400776.A.7DD","celestialgod","問題","Re: 折線圖+長條圖呈現",2016-11-18 00:39:33,NA,NA,"※ 引述《samex4x4 (Same)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？: 兩者是不同的數值(取不同欄位): 大概是長這樣: http://imgur.com/b5XELZF.jpg: 謝謝QQ: [程式範例]::
:: [環境敘述]::: 3.3.2:: [關鍵字]::: 選擇性，也許未來有用:

我也要跟個風，發個畫圖文XDD

我這裡提供lattice的寫法

ggplot跟傳統繪圖都不能做到自動雙軸align

使用lattice就可以輕鬆達成了

恭喜原PO集齊R三大畫圖系統XDDDD

資料是用andrew43大大的

dt <- data.frame(
  x = 1:8,
  freq = c(120,130,140,150,160,170,170,180),
  earn = c(3,3,5,4,6,7,3,5) * 0.1
)

library(lattice)
library(latticeExtra)

barChart <- barchart(freq ~ x, dt, horizontal = FALSE,
                     scales = list(x = list(at=1:8,
                       labels=rep(paste0(""Q"", 1:4), 2))),
                     xlab = NULL, ylab = NULL)
lineChart <- xyplot(earn ~ x, dt, type = ""l"", xlab = NULL, ylab = NULL)
doubleYScale(barChart, lineChart, add.axis = TRUE)

結果圖：http://imgur.com/wKxqCuL--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1198","M.1479399907.A.41D","andrew43","問題","Re: 折線圖+長條圖呈現",2016-11-18 00:25:05,NA,NA,"這裡提供傳統內建的畫法。
基本上就是先畫柱再加折線。

# 假資料
dt <- data.frame(
  freq = c(120,130,140,150,160,170,170,180),
  earn = c(3,3,5,4,6,7,3,5) * 0.1
)

# 柱值和線值尺度上差很多需要調整的比例
y1.y2.ratio <- 500

# 第一縱軸值
y4.axis.val <- c(0, 100, 200, 300, 400)

# 畫柱，不畫第一縱軸
bp <- barplot(dt$freq, ylim = c(0, 400), yaxt = ""n"")
box()

# 畫折線
lines(bp, dt$earn * y1.y2.ratio, col = 2)

# 補畫各個軸
axis(1, bp, paste0(""Q"", rep(1:4, 2)))
axis(1, c(2, 7.3), c(""2013"", ""2014""), line = 2, tick = F)
axis(2, y4.axis.val)
axis(4, y4.axis.val, y4.axis.val / y1.y2.ratio, col = 2, col.axis = 2)※ 引述《samex4x4 (Same)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？: 兩者是不同的數值(取不同欄位): 大概是長這樣: http://imgur.com/b5XELZF.jpg: 謝謝QQ: [程式範例]::
:: [環境敘述]::: 3.3.2:: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"1199","M.1479399758.A.46C","celestialgod","問題","Re: lubridate的使用問題",2016-11-18 00:22:35,NA,NA,"※ 引述《hardy1127 (阿提)》之銘言：:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 我想要印出2015年，每個月的第一天和最後一天，前七個月都正常，: 但第八個月之後，最後一天就會變成ＮＡ: [程式範例]::: year_counter = 2015: mon_counter = 1: while (year_counter < 2016){:   s_day = ymd(""2015-01-01""):   e_day = ymd(""2015-01-31""):   while (mon_counter < 13) {:     print(mon_counter):     print(""star is""):     print(s_day):     print(""end is""):     print(e_day):     month(s_day) = month(s_day) + 1:     month(e_day) = month(s_day) + 1:     day(e_day) = day(s_day) - 1:     mon_counter = mon_counter + 1:   }:   year_counter = year_counter + 1: }:: }環境敘述]::: Version 0.99.903–2009-2016 RStudio, Inc.: lubridate 1.6.0:: [關鍵字]::: 選擇性，也許未來有用:

這樣就全部列出來拉~~~ 不用用到迴圈

x1 <- seq(as.Date(""2016-01-01""), length=12, by=""1 month"")
x2 <- seq(as.Date(""2016-02-01""), length=12, by=""1 month"")

data.frame(firstDay = x1, lastDay = x2 - 1)
#      firstDay    lastDay
# 1  2016-01-01 2016-01-31
# 2  2016-02-01 2016-02-29
# 3  2016-03-01 2016-03-31
# 4  2016-04-01 2016-04-30
# 5  2016-05-01 2016-05-31
# 6  2016-06-01 2016-06-30
# 7  2016-07-01 2016-07-31
# 8  2016-08-01 2016-08-31
# 9  2016-09-01 2016-09-30
# 10 2016-10-01 2016-10-31
# 11 2016-11-01 2016-11-30
# 12 2016-12-01 2016-12-31


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1200","M.1479398353.A.A02","hardy1127","問題","lubridate的使用問題",2016-11-17 23:59:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我想要印出2015年，每個月的第一天和最後一天，前七個月都正常，但第八個月之後，最後一天就會變成ＮＡ[程式範例]:library(lubridate)year_counter = 2015mon_counter = 1while (year_counter < 2016){s_day = ymd(""2015-01-01"")e_day = ymd(""2015-01-31"")while (mon_counter < 13) {print(mon_counter)print(""star is"")print(s_day)print(""end is"")print(e_day)month(s_day) = month(s_day) + 1month(e_day) = month(s_day) + 1day(e_day) = day(s_day) - 1mon_counter = mon_counter + 1}year_counter = year_counter + 1}}環境敘述]:Version 0.99.903–2009-2016 RStudio, Inc.lubridate 1.6.0[關鍵字]:選擇性，也許未來有用--","R_Language"
"1201","M.1479386780.A.310","PhyResearch","問題","關於實驗數據作高斯fitting的問題",2016-11-17 20:46:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:目前有一些實驗的數據，但小弟不知道該怎麼針對這些數據進行高斯fitting，想請教板上大大們目前是否有這樣的package可以直接來使用?或是有無其他方法?謝謝--","R_Language"
"1202","M.1479372930.A.CB3","lovealbee","問題","不同IP的MySQL與RSTUDIO串聯",2016-11-17 16:55:27,NA,NA,"E
- 問題: 不同IP的MYSQL及RSTUDIO間的串聯

[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我在自己本機上用Rstudio r中的dbconncet()去讀取在虛擬伺服器
Ubuntu server上MySQL資料到本機上分析．




[程式範例]:
library(shiny)
library(RMySQL)


  conn <- dbConnect(MySQL(), user=""root"", password=""love123"",
                    host=""192.168.254.132"", db=""Partculate_matters"")


錯誤訊息如下:

Error in .local(drv, ...) :
  Failed to connect to database: Error: Host '192.168.254.1' is not allowed to
 connect to this MySQL server



[環境敘述]:

R版本: 3.2.1
本機:WIN7
伺服器:UBUNTU



[關鍵字]:

MySQL
R
Rstudio




--","R_Language"
"1203","M.1479363125.A.263","clansoda","問題","Re: 折線圖+長條圖呈現",2016-11-17 14:12:01,NA,NA,"library(ggplot2)

dat1 <- data.frame(categories = c(1,2,3),
                   picachu = c(100,150,120))
dat2 <- data.frame(categories = c(1,2,3),
                   pocketmonster = c(200,250,220))

ggplot(data = dat2,aes(categories,pocketmonster)) +
                   geom_point() +
                   geom_line() +
 geom_bar(data = dat1 , aes(categories,picachu),stat = ""identity"")

Hi，我想你可以試試看用ggplot，因為它是用圖層式的概念往上疊加

因此就想成先畫出其中一種圖在畫另外一種圖然後疊起來

--","R_Language"
"1204","M.1479355095.A.FE8","samex4x4","問題","shiny圖表呈現",2016-11-17 11:58:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想詢問是否有辦法同時畫出長條圖和摺線圖在一張圖表上？
兩者是不同的數值(取不同欄位)

大概是長這樣http://imgur.com/b5XELZF.jpg謝謝QQ

[程式範例]:[環境敘述]:3.3.2[關鍵字]:選擇性，也許未來有用--","R_Language"
"1205","M.1479322263.A.F59","isofjslk3ad","問題","r 與python 爬蟲穩定性的比較",2016-11-17 02:51:00,NA,NA,"想要請問一下


前一陣子在學習使用R 與python 的排蟲

由於一開始事先學R 所以主要把R當主力


但我的爬蟲屬於重複不間斷的方式

但我發現R 使用rhttr 與 rvest

有時候就會出現無法攫取參數之類的問題


此時只好重新啟動

最近想說是否要換成用python 當作主力的念頭


想說不知道這樣是否可以比r 更穩定

不會偶而出現bug

不知道有哪位大大熟悉兩種程式

對於這兩種程式的爬蟲的穩定度 孰優孰劣



--","R_Language"
"1206","M.1479273944.A.68B","trumulertrml","問題","Rstudio無法開啟",2016-11-16 13:25:42,NA,NA,"我的Rstudio安裝後無法開啟
會出現http://imgur.com/a/MDRBN的錯誤訊息
請問有沒有大大知道該怎麼解決的??
感激不盡

--","R_Language"
"1207","M.1479225410.A.782","lovedmagic","問題","Re: facebook 額外抓取 ",2016-11-15 23:56:48,NA,NA,"想請問一下大大有連絡方式嗎?
我也想針對粉絲團對每個貼文的讚數
或是分享數做統計，感覺Rfacebook是
辦不到了，但是Rselenium也剛在看，
覺得對我來說有點複雜了，求解(T_T)

--","R_Language"
"1208","M.1479203100.A.559","samex4x4","問題","facebook 額外抓取",2016-11-15 17:44:56,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我現在正在爬取facebook的內容
大部分都可以用Rfacebook做掉

現在我想要爬取對某個粉絲團的按讚人數(不指單篇post)

查fb api可以查到 是/{粉絲團id}?fields=fan_count

這項數值Rfacebook 好像要用getInsights這個function
才能爬到，但是要求是only owner or admin of page

想請問
1. 有不使用Rfacebook抓取facebook的套件嗎?
   目前是在看RSelenium

2. 還是Rfacebook有辦法抓到我想要的數值而我漏看嗎，求解Orz

感謝各位

[環境敘述]:R version 3.3.2 (2016-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1[關鍵字]:Facebook--","R_Language"
"1209","M.1479182086.A.A4D","abc2090614","問題","Re: Conjugate Gradient Method in optim",2016-11-15 11:54:43,NA,NA,"※ 引述《wheado (principal component QQ)》之銘言：: [程式範例]:: http://ideone.com/xCSQ8s: [環境敘述]:: R version 3.3.2 (2016-10-31): [關鍵字]:: nonlinear conjugate gradient for minimization: 感謝大家的指導跟建議: 這真的好困難QQ我目前測出來的結果是...應該是演算法本身的問題

那篇教學裡有說非線性的conjugate gradient只有在起始點接近local minima時才會收斂

我在[-4,4]^2裡用你的code跑了10,000個起始點,

黑色的點代表以該點為起始點有收斂到正確的極值 f(x)=-1http://i.imgur.com/74MDxkO.png看得出來只有在 (pi/2, -pi/2) modulo pi 的附近才會收斂到正確的點

其他地方只能聽天由命


也可能是程式裡有bug  但我看了半天還是看不出來

不是numDeriv的問題, 換成analytical solution也是一樣

P.S. 你忘記update i=i+1


--","R_Language"
"1210","M.1479181745.A.974","ppp1987","問題","請問有關gee的package",2016-11-15 11:49:02,NA,NA,"問題: 想找有關gee的package

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我現在在分析一筆資料

資料是有一群人半年內填寫他們的作息(可能2-3天填一次)

我現在是用lme4裡的glmer分析 把人與人之間當random effects

我現在想用gee分析天與天之間的correlation structure

但是geepack這個package好像沒辦法做random effects

所以想請問有沒有gee的package可以同時做random effects

謝謝


--","R_Language"
"1211","M.1479176794.A.3F7","lovedmagic","問題","利用R抓取網頁資料",2016-11-15 10:26:31,NA,NA,"板上各位大大好，不才想請問一下，如果我想
從網頁上抓取資料的話，有什麼方法可以讓我
呈現在R上呢？例如我今天到FB上，我想看看
這個人的FB總貼文數是多少，或是某人貼文的
按讚數，我要如何能夠快速擷取呢？

跪求解法

--","R_Language"
"1212","M.1479108227.A.C2E","wheado","問題","Conjugate Gradient Method in optim",2016-11-14 15:23:44,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想自己練習寫一個Nonlinear Conjugate Gradient Method，可是我參考文獻http://www.cs.cmu.edu/%7Equake-papers/painless-conjugate-gradient.pdf中的 ""52頁 B4-table"" 所寫的程式碼卻跟R內建optim找到的不一樣，

很明顯不是最小值，試了很久還是不懂哪裡出問題，我把我的程式貼在下面。

我想寫出來的程式是想跟optim一樣只需要

Input 函數 起始點 迭代次數 誤差

就可以 output 一個解使得函數是local min

我使用numDeriv套件找到該點的 梯度 跟 hessian

[程式範例]:http://ideone.com/xCSQ8s[環境敘述]:

R version 3.3.2 (2016-10-31)

[關鍵字]:

nonlinear conjugate gradient for minimization





感謝大家的指導跟建議

這真的好困難QQ

--","R_Language"
"1213","M.1479071564.A.830","shell123","問題","如何擷取部分字串",2016-11-14 05:12:41,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:我想要擷取字串中的一部分舉例來說: 我的格式是 ""150_38_2015-01-11""也就是""numb1_numb2_date""在這個情況下,我會擷取numb1 跟 date但想要請問怎麼擷取numb2謝謝![環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1214","M.1479048568.A.4EC","x9060000456","問題","quantmod 的問題",2016-11-13 22:49:25,NA,NA,"各位前輩先進大家好
最近使用quantmod這個packages分析股市的資料，
在一開始讀交易的資料就遇到瓶頸了，像是

library(quantmod)
getSymbols('BIM.TW', src = 'yahoo')

就抓不到資料，不只生技股，有些類股也無法抓到資料，
但'2330.TW'就抓的到，
所以想請問只能上網手動抓csv檔，在import進R裡面進行分析嗎?
另外不太了解有些類型抓資料要加'^'，有些不用加'^'，
像是

getSymbols('BIM', src = 'yahoo')
getSymbols('^TWII', src = 'yahoo')

請問要怎麼知道什麼時候要加'^'

謝謝!

--","R_Language"
"1215","M.1478936542.A.D90","AmuroRai","問題","用group_by做表格",2016-11-12 15:42:20,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
手上有一組叫做data6的資料，裡面有兩個變數：sme和skill，兩者的值都是0或1。
而我希望分別對sme=0和1的部分各別做一張表來看skill的分布狀況，所以最直覺的方式
自然是用以下的方法：
table(filter(data6,sme==0)$skill)
table(filter(data6,sme==1)$skill)

為了讓程式更精簡，我打算用group_by來做同一件事情：
table(group_by(data6,sme)$skill)

但是這麼做的結果並不如預期般看到兩張表，而是得到和
table(data6$skill)
一樣的結果。因此想請教各位先進該如何使用group_by語法來弄？


[關鍵字]:
dplyr group_by table

--","R_Language"
"1216","M.1478889493.A.C87","myfish1213","分享","新手 下載package問題",2016-11-12 02:38:11,NA,NA,"大家好，
前幾天在板上問了一個問題，
因某些私人因素而刪除，
但由於版上公告的提醒覺得的確對回文者不太好意思，
因此在此大致回復當初的貼文，
希望有人遇到跟我相同問題也可以解決~

由於當初問題照片已刪除，
故以文字敘述，問題如下：

在下載package A時出現error，
error大概是說我少了其中某個套件B所以無法順利下載A，
但我在package中又找不到B，
後來有幾位熱心大大告訴我package有版本的限制，
可能是R版本太舊導致無法下載A，
後來發現真的是版本問題更新後便解決。

在此謝謝熱心回答的高手們~~~

--","R_Language"
"1217","M.1478880287.A.4AC","andrew43",NA,"呼籲：有板友推文回應後請儘量不要刪除原文",2016-11-12 00:04:44,NA,NA,"諸位板友好。

在此呼籲，當有其它板友以推文的方式回應文章後，
請原作者儘量不要刪除原文。
我這麼說的理由如下。

1. 即使你問了一個很「笨」的問題，其它板友也可能有一樣的問題。
   留下這種文章與其它的人推文解答供後人查閱，也是功德一件。
   請不要抱持著
   「我拿到解答了所以文章沒意義了」或是
   「原來我的問題真蠢還是快刪了」之類的想法而刪文。

2. 一句短短的推文可能可以大大地啟發原發文者或其它任何人。
   請尊重這些善心人士熱心的寶貴推文內容。
   刪文前請再想一想：「我真的有權就刪了別人的文字嗎？」
   也別忘了，這些推文的最大受益著正是自己，但自刪卻損害了熱心人的權利。

雖然本看板目前不禁止自刪，板主也不主動回救刪文。
但假如有推文者希望救回自己被刪的文字，歡迎和板主（們）聯絡。
謝謝諸位。

--","R_Language"
"1218","M.1478861864.A.4CA","kevin102575","問題","常態分配表 迴圈",2016-11-11 18:57:42,NA,NA,"請問如何用迴圈製作Z TABLE
不知道哪裡打錯了
感覺少了什麼東西
拜託救救我

loop1=seq(-3,3,0.1)
loop2=seq(0,0.09,0.01)
nr=length(loop1)
nc=length(loop2)
m=matrix(NA,nr,nc)
for(i in nr)
{
for(j in nc)
{
}
}

--","R_Language"
"1219","M.1478766677.A.30D","clansoda","問題","符號指定使用",2016-11-10 16:31:13,NA,NA,"各位好，我的標題打得很不清楚，因為不知道怎麼一句話形容

我現在想讓使用者在shiny內可以filter整個資料

因此我寫了一個selectInput進來，接著在shiny內部用switch

轉成一個reactive obejct

但是這樣會的很奇怪，R code不讓我過，我也覺得這段程式碼很怪

舉個例子就像這樣我想確認2是不是大於1

正常的寫法一定是 2 > 1 所以答案是TRUE

那我現在因為是從外部進來的關係所以我得指定他給一個object

bigger <- input$chooseoperator

假設bigger裡面已經是"">""

那我就會寫成 2 bigger 1，不過這明顯是怪怪的

我有想過另外一種用function寫的方法，像是除號除了用/代表之外

也有divide_by function可以使用，

請問有板友有其他方法可以克服這個問題嗎?

--","R_Language"
"1220","M.1478697856.A.730","celestialgod","問題","Re: 新手XML批次轉CSV問題",2016-11-09 21:24:12,NA,NA,"※ 引述《qq9966pp (神雞大人)》之銘言：: [問題類型]:: 程式諮詢(我想用R做某件事，但是我不知道要怎麼用R寫出來: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位先進好，我想用R批次把XML檔轉成CSV檔: 但是不知道該怎麼做: 懇求各位幫忙 感謝先我抓W3school的XML當示範，自己改成自己要的吧

library(plyr)
library(xml2)
library(data.table) # 1.9.7 其他版本沒有fwrite
library(pipeR)

sink('file1.xml')
cat('<?xml version=""1.0""?>
<catalog>
  <book id=""bk101"">
    <author>Gambardella, Matthew</author>
    <title>XML Developer\'s Guide</title>
    <genre>Computer</genre>
    <price>44.95</price>
    <publish_date>2000-10-01</publish_date>
    <description>An in-depth look at creating applications with
    XML.</description>
  </book>
  <book id=""bk102"">
    <author>Ralls, Kim</author>
    <title>Midnight Rain</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2000-12-16</publish_date>
    <description>A former architect battles corporate zombies,
    an evil sorceress, and her own childhood to become queen
    of the world.</description>
  </book>
  <book id=""bk103"">
    <author>Corets, Eva</author>
    <title>Maeve Ascendant</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2000-11-17</publish_date>
    <description>After the collapse of a nanotechnology
    society in England, the young survivors lay the
    foundation for a new society.</description>
  </book>
</catalog>')
sink()

sink('file2.xml')
cat('<?xml version=""1.0""?>
<catalog>
  <book id=""bk104"">
    <author>Corets, Eva</author>
    <title>Oberon\'s Legacy</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2001-03-10</publish_date>
    <description>In post-apocalypse England, the mysterious
    agent known only as Oberon helps to create a new life
    for the inhabitants of London. Sequel to Maeve
    Ascendant.</description>
  </book>
  <book id=""bk105"">
    <author>Corets, Eva</author>
    <title>The Sundered Grail</title>
    <genre>Fantasy</genre>
    <price>5.95</price>
    <publish_date>2001-09-10</publish_date>
    <description>The two daughters of Maeve, half-sisters,
    battle one another for control of England. Sequel to
    Oberon\'s Legacy.</description>
  </book>
  <book id=""bk106"">
    <author>Randall, Cynthia</author>
    <title>Lover Birds</title>
    <genre>Romance</genre>
    <price>4.95</price>
    <publish_date>2000-09-02</publish_date>
    <description>When Carla meets Paul at an ornithology
    conference, tempers fly as feathers get ruffled.</description>
  </book>
</catalog>')
sink()

list.files(pattern = ""\\.xml"") %>>%
  llply(function(xmlFile){
    read_xml(xmlFile) %>>% xml_children %>>% llply(function(node){
      tmp <- xml_children(node)
      xml_text(tmp) %>>% `names<-`(xml_name(tmp)) %>>% c(xml_attrs(node))
    }) %>>% do.call(what = rbind) %>>% data.table
  }) %>>% rbindlist %>>% fwrite(""output.csv"")

不過我保證出來的csv有問題XD，因為xml資料裡面滿滿的逗號

這只是一個範例自行參考(攤手

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1221","M.1478680852.A.604","qq9966pp","問題","新手XML批次轉CSV問題",2016-11-09 16:40:49,NA,NA,"[問題類型]:
程式諮詢(我想用R做某件事，但是我不知道要怎麼用R寫出來

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位先進好，我想用R批次把XML檔轉成CSV檔

但是不知道該怎麼做

懇求各位幫忙 感謝先

--","R_Language"
"1222","M.1478609520.A.272","Edster","分享","hydrology model in R",2016-11-08 20:51:58,NA,NA,"在程式語言部分，我的專長在物質流估計、水文、地形、生地化作用模擬，
還有一點點資料處理(真是不敢在這裡講資料處理)。

研究室要我介紹 R 有什麼用處、誰應該學 R
(終於要收徒弟了)

就列出一些我有在用的 package 吧，
今天一清點，刪掉的 pkg 也蠻多的。

主題有幾個> Probability Distribution> Time Series Analysis> Spatial Analysis - vector> Spatial Analysis - raster> Optimization> Numerical model就開始吧。> Probability Distributionactuar
    Actuarial Functions and Heavy Tailed Distributions

  base
    The R Base Package: include the mountaion and include the sea.> Time Series AnalysisTSA
    Time Series Analysis

  timsac
    Time Series Analysis and Control Package

  wavelets
    A package of functions for computing wavelet filters,
    wavelet transforms and multiresolution analyses> Spatial Analysis - vectorSp
    Classes and Methods for Spatial Data

  Maptools
    Tools for Reading and Handling Spatial Objects

  shapefiles
    Read and Write ESRI Shapefiles

  Splance
    Spatial and Space-Time Point Pattern Analysis

  rgdal
    Bindings for the Geospatial Data Abstraction Library> Spatial Analysis - rasterRPyGeo
    ArcGIS Geoprocessing in R via Python

  Raster
    Geographic Data Analysis and Modeling

  RSAGA
    SAGA Geoprocessing and Terrain Analysis in R

  Fields
    Tools for Spatial Data> Hydrology model in Rtopmodel
    Implementation of the hydrological model TOPMODEL in R

  TUWmodel
    Lumped Hydrological Model for Education Purposes

  Ecohydrology
    A community modeling foundation for Eco-Hydrology

  Evapotranspiration
    Modelling Actual, Potential and Reference Crop Evapotranspiration

  hydrogeo
    Groundwater Data Presentation and Interpretation

  hydroTSM
    Time series management, analysis and interpolation for
    hydrological modelling> OptimizationDEoptim
    Global Optimization by Differential Evolution

  hydroGOF
    Goodness-of-fit functions for comparison of simulated and observed
    hydrological time series

  mcmc
    Markov Chain Monte Carlo

  FME
    A Flexible Modelling Environment for Inverse Modelling, Sensitivity,
    Identifiability and Monte Carlo Analysis> Numerical model, Differential equationdeSolve
    Solvers for Initial Value Problems of Differential Equations
    (ODE, DAE, DDE)


就這樣，去做ppt了。

--","R_Language"
"1223","M.1478598681.A.2FF","wheado","問題","如何 print ""optim"" 的 iteration？ ",2016-11-08 17:51:19,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想在執行optim的時候，show出optim每次跌代時的次數和更新後的值。

在執行完optim後雖然可以找到，但我想要在他每次跌代的時候，

都可以print出來。但是我在網路上找不太到。

[程式範例]:
fr <- function(x) {
    x1 <- x[1]
    x2 <- x[2]
    100 * (x2 - x1 * x1)^2 + (1 - x1)^2
}
optim(par=c(1,2),fr,method=""CG"")

[環境敘述]:

R-3.3.1

[關鍵字]:

How to show iteration of optim in R?

--","R_Language"
"1224","M.1478594207.A.8A5","kenfossil","問題","大數據要匯入R",2016-11-08 16:36:45,NA,NA,"[軟體熟悉度]:
入門(學習約莫1年)

[問題敘述]:
有一筆（12968*11046）的大型矩陣（0和1組成），使用read.table一次讀進R時，出現記
憶體不夠問題！

若想要一次一列的讀取進來後，做分析完後，再讀取下一列資料，以這樣一列一列的逐步
分析！


先感謝各位版友！！



--","R_Language"
"1225","M.1478579091.A.F28","clansoda","問題","shiny疑問",2016-11-08 12:24:48,NA,NA,"各位版友好，我現在在用shiny dashboard做dashboard

目前碰到一個問題是假如我要的output叫做F

而這個dashboard是要靠inputfile來跑圖出來

假設這個inputfile現在叫做A

他要經過一系列的處理，A -> B -> C -> D -> E

E是一個datatable的型態，我要畫出F所以是plot某某E -> F

接著我想要畫出G，也是從E出來，所以是plot(E) -> G

目前用render的話就要處理很多次data

每次都要從A跑到E在畫圖

我想問問有沒有方法能夠A跑到E一次然後存起來

接下來每次都是plot(E)然後變成不同的圖像

我用reactive後，後面再用ggplot之類的function

他會顯示不能操作reactive格式的物件

請問有人知道這樣該如何處理嗎?

--","R_Language"
"1226","M.1478527228.A.4F9","f496328mm","問題","資料輸出 write.csv 速度慢",2016-11-07 22:00:25,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我目前使用write.csv輸出data，再利用bigmemory輸出des/bin檔，

因為資料量有點多，總共超過100G，只能利用這樣的方式，降低RAM的使用量

實際上是，有將近50種變數，每個大約2~3GB，

想問問看有沒有其他的方法，目前可能會朝購買SSD的方向走

直接買1TB的SSD

PS :

做data mining，不知道重要變數，所以只好生一堆變數出來，

再用一些演算法去降維


謝謝

--","R_Language"
"1227","M.1478523965.A.9C1","geneknight","問題","sparse.model.matrix疑問",2016-11-07 21:06:02,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

1.在使用sparse.model.matrix時，第一行會產生1這個intercept，如果是用xgboost，

似乎都會寫成~.-1，把intercept移除，那如果創造sparse.model.matrix，想用來預估

其他模型，查到的範例似乎都沒有移除1這個intercept，為什麼在xgboost需要移除，

而在預估其他模型便不需移除?

2.如果用hashed.model.matrix，也能夠搭配xgboost嗎，會有移除intercept的問題嗎?


[程式範例]:

sparse_matrix <- sparse.model.matrix(Improved~.-1, data = df)


[關鍵字]:
sparse.model.matrix ,xgboost, hashed.model.matrix

以上的疑問，懇請各位先進解答，謝謝！

--","R_Language"
"1228","M.1478449793.A.625","greengo","問題","html無法顯示中文",2016-11-07 00:29:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:魯肉腳

[問題敘述]:
用r notebook處理中文分詞，knit to HTML 時，中文無法顯示, 該如何設定呢？
先謝謝了
[程式範例]:
按 knit to html後之訊息http://imgur.com/bRdJiB9[環境敘述]: under R version 3.3.2




--","R_Language"
"1229","M.1478407711.A.20D","Edster","問題","多維度pareto最佳化效能",2016-11-06 12:48:28,NA,NA,"效能諮詢(我想讓R 跑更快)

[問題敘述]:

我自己想了一支多維度pareto front / pareto optimize
演算法的部分是自己跟同事想的，沒有參照別人的code，
line 6 資料排序的部分有po過版，是C版幫解決的。

目前發現這隻稍慢，希望速度更快一點, 不知有沒有什麼好的寫法。
如果哪天我把這隻跟其他最佳化的function傳上cran，會放幫忙修改的人的名字的。

[程式範例]:
請見http://pastebin.com/A3Uh73DxP是一個matrix, column 是目標函數

執行範例
MPF(matrix(runif(100),20,5))


--","R_Language"
"1230","M.1478205712.A.F54","andrew43","問題","Re: 自動改變function中的local variable",2016-11-04 04:41:50,NA,NA,"# 因為你的例子不會看到變化結果，所以我把方程式改一下。
# 為了未來潛在使用的靈活性，把 z 和 y 也寫成參數 loc 了。
ff <- function(loc, a) {
  rez <- (loc[1] ^ 2) * (loc[2] ^ a) + 3
  return(rez)
}

# try ff()
ff(c(1, 2), a = 1)
ff(c(1, 2), a = 3)

# try grad() and hessian()
library(numDeriv)
grad(ff, c(1, 2), a = 1)
grad(ff, c(1, 2), a = 3)
hessian(ff, c(1, 2), a = 1)
hessian(ff, c(1, 2), a = 3)
# 這裡 grad() 和 hessian() 的用法受益於作者提供的 ""..."" 參數，
# 所以本來給 ff() 的 a 可以直接丟入。

# 建立 a.seq 的 list，當成變動 a 的值與容器
a.seq <- as.list(seq(1, 3, 1))
# 利用 lapply 做 grad() 和 hessian()
res.list <-
  lapply(a.seq, function(this.a) {
    res.grad <- grad(ff, c(1, 2), a = this.a)
    res.hessian <- hessian(ff, c(1, 2), a = this.a)
    return(list(
      res.grad = res.grad,
      res.hessian = res.hessian,
      a = this.a
    ))
  })
res.list # 結果與上面試驗相符

# 取出所有的 res.grad 或 res.hessian
# 用 lapply 或 sapply 看之後的使用情況而定
lapply(res.list, function(x) x$res.grad)
sapply(res.list, function(x) x$res.grad)
lapply(res.list, function(x) x$res.hessian)
sapply(res.list, function(x) x$res.hessian)

使用 list + l/sapply 系列的設計可能對之後的擴展更有利，例如平行運算。
for loop 當然也可以解，看個人撰寫偏好。※ 引述《TZULIU (消費券收購商)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 想取(z^2)*(y^2)+a於z=1和y=2（在不同的a值下）的gradient與Hessian，: 在下面範例中，請問有沒有方法可以透過loop持續改變常數項3(e.g. 0到3)?: [程式範例]:: dummy <- function(x) {:          z <- x[1]; y <- x[2]:          rez <- (z^2)*(y^3)+3:          rez:          }: grad(dummy, c(1,2)): hessian(dummy, c(1,2)): 謝謝！--","R_Language"
"1231","M.1478193031.A.81A","TZULIU","問題","自動改變function中的local variable",2016-11-04 01:10:29,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)


[問題敘述]:

想取(z^2)*(y^2)+a於z=1和y=2（在不同的a值下）的gradient與Hessian，
在下面範例中，請問有沒有方法可以透過loop持續改變常數項3(e.g. 0到3)?


[程式範例]:

dummy <- function(x) {
         z <- x[1]; y <- x[2]
         rez <- (z^2)*(y^3)+3
         rez
         }
grad(dummy, c(1,2))

hessian(dummy, c(1,2))



謝謝！

--","R_Language"
"1232","M.1478180742.A.CF4","abc2090614","問題","Re: plotly heatmap 座標軸與標籤",2016-11-03 21:45:40,NA,NA,"※ 引述《xxkevin (x_x)》之銘言：: [問題類型]:: 程式諮詢：plotly 使用相關: [軟體熟悉度]:: 使用者: [問題敘述]:: 各位先進，我希望用plotly製作可顯示標籤的熱力圖: 目前成果如下圖: https://goo.gl/Mloi1t: 但是在y軸的地方由於單位是時間: 不知道刻度應該怎麼調整: 原本是希望顯示刻度是1小時: 像是這樣: https://goo.gl/ywB7Pa: (這是用ggplot畫的)這是你原本的程式碼

ya <- list(
  title = ""時間"",
  autorange = ""reversed"",
  autotick = FALSE,
  autorange=T,
  dtick=60
)


你的資料裡y軸的格式是 hh:mm，而且是存成factor
這裡用dtick = 60, plotly應該是看不懂你要表達的意思
比如說15:00 跟16:00 他應該不知道這兩個是差60，再加上是factor...
弄出另外一欄把它轉成分鐘後再處理比較好: 另外一個問題是在顯示標籤時: x:28.67: y:10:32: z:28.36: x,y,z有沒有辦法置換成任意的文字?: 像是: 里程:28.67: 時間:10:32: 速率:28.36 kphplot_ly(vst4, x=~milage,y=~time_HM ,z = ~vdsAvgSpd,
        colors = my_palette,
        type = ""heatmap"",
        hoverinfo = 'text',
        text = ~paste('里程: ', milage,
                      '</br> 時間: ', time_HM,
                      '</br> 速率: ', vdsAvgSpd, ' kph')): 以上兩個問題  懇請各位先進解惑: [程式範例]:: 程式碼:: http://ideone.com/FzP3XE: 資料(csv):: https://goo.gl/t8yWII: [環境敘述]:: R version 3.3.1 (2016-06-21): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: [關鍵字]:: plotly,heatmap,坐標軸,標籤,時間序列--","R_Language"
"1233","M.1478163628.A.971","xxkevin","問題","plotly heatmap 座標軸與標籤",2016-11-03 17:00:21,NA,NA,"[問題類型]:
程式諮詢：plotly 使用相關

[軟體熟悉度]:
使用者

[問題敘述]:
各位先進，我希望用plotly製作可顯示標籤的熱力圖

目前成果如下圖https://goo.gl/Mloi1t但是在y軸的地方由於單位是時間

不知道刻度應該怎麼調整

原本是希望顯示刻度是1小時

像是這樣https://goo.gl/ywB7Pa(這是用ggplot畫的)


另外一個問題是在顯示標籤時

x:28.67
y:10:32
z:28.36

x,y,z有沒有辦法置換成任意的文字?
像是
里程:28.67
時間:10:32
速率:28.36 kph

以上兩個問題  懇請各位先進解惑


[程式範例]:
程式碼:http://ideone.com/FzP3XE資料(csv):https://goo.gl/t8yWII[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

[關鍵字]:
plotly,heatmap,坐標軸,標籤,時間序列

--","R_Language"
"1234","M.1478131450.A.769","celestialgod","問題","Re: data frame排序問題",2016-11-03 08:04:08,NA,NA,"※ 引述《locka (locka)》之銘言：: 先謝謝celestailgod大大的幫忙,不過抱歉小弟資質駑鈍: 希望可以跟板上各位前輩求教討論>""<: ※ 引述《celestialgod (天)》之銘言：: : 用merge跟match就可以達到你要的效果了: : library(data.table): : library(pipeR): : factory_list_dt <- data.table(factory = c(""台北"", ""台中"", ""高雄"",: :                                           ""新竹"", ""台南"")): : dt1 <- data.table(factory = c(""台北"", ""高雄"", ""新竹"", ""台中"", ""台南""),: :                   rev = c(9.23913043478261,16.3571428571429,: :                           15.6206896551724, 15.0980392156863, 10)): : dt1_sorted <- merge(factory_list_dt, dt1, by = ""factory"", all.x = TRUE) %>>%: :   `[`(match(factory_list_dt$factory, factory)): 我知道前面 merge 會藉由對應factory這個欄位 把 f_list, dt1 join 在一起: (如果沒理解錯的話): 這邊主要想請問的都是`[`(match(factory_list_dt$factory, factory)) 這一行: 1. match函式的第二個參數 ""factory"" 是甚麼東西的factory呢?: 個人猜測是前面 merge() 完產生出來的新的data table(在此設為dt_new): 所以意思應該是「列出 f_list_dt中factory,在dt_new中的位置」: 不知道這樣的理解正不正確?factory是merge出來的data.table中的一個column，也就是你這說的dt_new: 2. 那為什麼要用()把match的結果包起來?: 3. `[` 的意思是...?2跟3一起說明，其實我們再用 A[i,j] 可以寫作 `[`(A, i, j)，`[`是一個函數: : dt2 <- data.table(factory = c(""台北"", ""台中"", ""高雄""),: :                 rev = c(9.23913043478261,16.3571428571429, 15.6206896551724)): : dt2_sorted <- merge(factory_list_dt, dt2, by = ""factory"", all.x = TRUE) %>>%: :   `[`(match(factory_list_dt$factory, factory)) %>>%: :   `[`(j = rev := ifelse(is.na(rev), 0, rev)): 這邊 `[`(j = rev := ifelse(is.na(rev), 0, rev)) 也有同樣的問題: 我知道大概意思是判斷rev, 如果其值是na的話就補0 否則就填rev原本的值: 可是這個j是怎麼冒出來的啊???同2 3，j是`[`第三個element: 最後真的不得不感謝celestialgod大大,每次都可以瞬間解決問題: 而且程式碼都好簡潔啊!: 也謝謝大家熱情幫忙!! :)--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1235","M.1478104734.A.F80","locka","問題","Re: data frame排序問題",2016-11-03 00:38:51,NA,NA,"先謝謝celestailgod大大的幫忙,不過抱歉小弟資質駑鈍

希望可以跟板上各位前輩求教討論>""<※ 引述《celestialgod (天)》之銘言：: 用merge跟match就可以達到你要的效果了: library(data.table): library(pipeR): factory_list_dt <- data.table(factory = c(""台北"", ""台中"", ""高雄"",:                                           ""新竹"", ""台南"")): dt1 <- data.table(factory = c(""台北"", ""高雄"", ""新竹"", ""台中"", ""台南""),:                   rev = c(9.23913043478261,16.3571428571429,:                           15.6206896551724, 15.0980392156863, 10)): dt1_sorted <- merge(factory_list_dt, dt1, by = ""factory"", all.x = TRUE) %>>%:   `[`(match(factory_list_dt$factory, factory))我知道前面 merge 會藉由對應factory這個欄位 把 f_list, dt1 join 在一起
(如果沒理解錯的話)

這邊主要想請問的都是`[`(match(factory_list_dt$factory, factory)) 這一行

1. match函式的第二個參數 ""factory"" 是甚麼東西的factory呢?

個人猜測是前面 merge() 完產生出來的新的data table(在此設為dt_new)
所以意思應該是「列出 f_list_dt中factory,在dt_new中的位置」
不知道這樣的理解正不正確?

2. 那為什麼要用()把match的結果包起來?
3. `[` 的意思是...?: dt2 <- data.table(factory = c(""台北"", ""台中"", ""高雄""),:                 rev = c(9.23913043478261,16.3571428571429, 15.6206896551724)): dt2_sorted <- merge(factory_list_dt, dt2, by = ""factory"", all.x = TRUE) %>>%:   `[`(match(factory_list_dt$factory, factory)) %>>%:   `[`(j = rev := ifelse(is.na(rev), 0, rev))這邊 `[`(j = rev := ifelse(is.na(rev), 0, rev)) 也有同樣的問題
我知道大概意思是判斷rev, 如果其值是na的話就補0 否則就填rev原本的值
可是這個j是怎麼冒出來的啊???


最後真的不得不感謝celestialgod大大,每次都可以瞬間解決問題
而且程式碼都好簡潔啊!

也謝謝大家熱情幫忙!! :)



--","R_Language"
"1236","M.1478096002.A.7CF","rockken","問題","Shiny 開發",2016-11-02 22:13:19,NA,NA,"[問題類型]:程式諮詢(我想用R Shiny 開發互動是介面)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:目前幫別人用 R 開發一個分析方法，由於對方不懂程式碼。所以想說用 R shiny 幫他開發一套只要丟資料進去，然後就可以跑出結果。由於對方想要視覺化，所已有搭配圖表給他。不過 shiny 好像輸出的表格無法進行修正，例如官方的網址 Observations 表格。http://shiny.rstudio.com/gallery/widgets.html請問有人知道輸出後表格，如何可以由使用方進行修改，然後圖形也會跟著改變嗎?類似 matlab GUI 開發的中間表格，如下圖http://0rz.tw/Zeo0J或是有人有開發類似的產品，請問你們是用甚麼方法在 R 軟體開發。謝謝--","R_Language"
"1237","M.1478004578.A.2C7","celestialgod","問題","Re: data frame排序問題",2016-11-01 20:49:35,NA,NA,"※ 引述《locka (locka)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 各位大大們好:: 想請教該怎麼把一個 data frame 裡面的row 按特定順序重新排序: 例如說我有一個 list factory_list 是a,b,c,d,e: 然後我dataframe mydf是: c 1000: d 1500: b 3000: 我想要按照factory_list的順序重新排序變成: a 0: b 3000: c 1000: d 1500: e 0: 當list跟mydf長度一樣的時候我用 mydf[factory_list,] 可以正確排序: 但當list長度不一樣的時候就會出現問題: 想了很久實在不知道該從何下手,煩請各位大大求解惑了 m(__)m: *補充:: 原本想自己重現問題可是卻無法(結果不對): 所以後來是用dput把原始data印出來再修改: 詳細情形請見程式碼: (不知道差別在哪裡...如果有大大知道為什麼也歡迎指點!): 先謝謝大家了!!!: [程式範例]::: http://ideone.com/YmgnI7:: [關鍵字]::: data frame, 排序用merge跟match就可以達到你要的效果了

library(data.table)
library(pipeR)

factory_list_dt <- data.table(factory = c(""台北"", ""台中"", ""高雄"",
                                          ""新竹"", ""台南""))

dt1 <- data.table(factory = c(""台北"", ""高雄"", ""新竹"", ""台中"", ""台南""),
                  rev = c(9.23913043478261,16.3571428571429,
                          15.6206896551724, 15.0980392156863, 10))
dt1_sorted <- merge(factory_list_dt, dt1, by = ""factory"", all.x = TRUE) %>>%
  `[`(match(factory_list_dt$factory, factory))
print(dt1_sorted)
#    factory      rev
# 1:    台北  9.23913
# 2:    台中 15.09804
# 3:    高雄 16.35714
# 4:    新竹 15.62069
# 5:    台南 10.00000

dt2 <- data.table(factory = c(""台北"", ""台中"", ""高雄""),
                rev = c(9.23913043478261,16.3571428571429, 15.6206896551724))
dt2_sorted <- merge(factory_list_dt, dt2, by = ""factory"", all.x = TRUE) %>>%
  `[`(match(factory_list_dt$factory, factory)) %>>%
  `[`(j = rev := ifelse(is.na(rev), 0, rev))
print(dt2_sorted)
#    factory      rev
# 1:    台北  9.23913
# 2:    台中 16.35714
# 3:    高雄 15.62069
# 4:    新竹  0.00000
# 5:    台南  0.00000

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1238","M.1478000940.A.9EC","locka","問題","data frame排序問題",2016-11-01 19:48:56,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位大大們好:

想請教該怎麼把一個 data frame 裡面的row 按特定順序重新排序

例如說我有一個 list factory_list 是a,b,c,d,e
然後我dataframe mydf是

c 1000
d 1500
b 3000

我想要按照factory_list的順序重新排序變成

a 0
b 3000
c 1000
d 1500
e 0

當list跟mydf長度一樣的時候我用 mydf[factory_list,] 可以正確排序
但當list長度不一樣的時候就會出現問題

想了很久實在不知道該從何下手,煩請各位大大求解惑了 m(__)m

*補充:
原本想自己重現問題可是卻無法(結果不對)
所以後來是用dput把原始data印出來再修改
詳細情形請見程式碼
(不知道差別在哪裡...如果有大大知道為什麼也歡迎指點!)


先謝謝大家了!!!

[程式範例]:http://ideone.com/YmgnI7[關鍵字]:data frame, 排序--","R_Language"
"1239","M.1477987745.A.764","tan800630","問題","sparkR實作問題",2016-11-01 16:09:00,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:各位前輩好，最近我想自學spark，因此昨天參照了https://spark.apache.org/docs/latest/sparkr.html網頁中的步驟想自己玩玩看，但在creat dataframe時一直出現錯誤，error code第一行如下錯誤在invokeJava(isStatic = TRUE, className, methodName, ...) :java.lang.reflect.InvocationTargetException也稍微搜尋了是否有人遇到相似問題，依照類似的問題解答更新了java版本以及重新install rJava套件但仍然出現相同狀況，請各位大大解惑了，謝謝[程式範例]:code如見連結網址http://pastie.org/10953656[環境敘述]:R version 3.1.2 (2014-10-31)Platform: x86_64-w64-mingw32/x64 (64-bit)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] rJava_0.9-8  SparkR_2.0.1[關鍵字]:選擇性，也許未來有用--","R_Language"
"1240","M.1477972513.A.38B","Catbert","問題","用R讀取Word檔",2016-11-01 11:55:08,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:
請問板上各位先進，如何用R讀取word檔呢？

目前用qdapTools事可以將檔案逐段落讀入成character
但是無法判斷原word中設定的樣式

主要是要將word中有設定樣式(標題1.2.3...)的文字讀取出來
之後再進行文字解析

謝謝

[關鍵字]:WORD、Text Analysis、--","R_Language"
"1241","M.1477907512.A.768","huangsam","問題","時間匯出討論",2016-10-31 17:51:49,NA,NA,"- 討論: 當你自己已經有答案，但是也想聽聽版友意見時[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的主要是想要詢問時間格式匯出的問題
在整理資料時，由於資料是匯入經由整理並匯出
匯入時使用read_excel，匯入時將欄位屬性改寫成TEXT
舉例如下:
匯入後原本資料的時間為以42661.343310185184
故我會使用as.POSIXct(as.numeric(42661.3...)*(60*60*24), origin=""1899-12-30"",
tz=""UCT"")的方式將格式改寫成時間格式2016-10-18 09:08:45 UCT
匯出時，若是以XLSX方式(write.xlsx2)匯出則時間格式很OK不會有所變動!
""但是""
若匯出CSV時，則匯出會形成2016-10-18T09:08:45Z
為了改善這樣問題我會將原本2016-10-18 09:08:45 UCT=>使用substr(xxx,1,19)
使得資料呈現2016-10-18 09:08:45 但是這樣又會遇到一個問題
就是XLSX 輸出會呈現單純文字並不會是時間格式，但是CSV卻可以!
總結問題:
用原本格式2016-10-18 09:08:45 UCT
匯出XLSX 沒問題
匯出CSV 有問題呈現2016-10-18T09:08:45Z
若將原本格式改寫成2016-10-18 09:08:45
匯出XLSX有問題會呈現文字格式
匯出CSV 沒有問題

想請問大家有沒有遇過類似的情況



[環境敘述]:[關鍵字]:--","R_Language"
"1242","M.1477902778.A.B1D","alan00205","問題","請問如何用R做面板門限模型",2016-10-31 16:32:55,NA,NA,"問題:如何用R做面板門限模型(panel threshold)呢?

[問題類型]:
程式諮詢(我想用R做這個模型，但是我不知道要怎麼用R寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位大大好，我卡在看不懂R裡面的panel threshold的範例要怎麼弄，一開始
輸入library(pdR)這邊是載入pdR包，但後面的我就看不懂了像是data(invest)
dat<-invest[1:1500,]這些，實在是不懂這指令的意思，請求高手指點，謝謝
指教!

--","R_Language"
"1243","M.1477891017.A.0D6","Wush978","問題","Re: 如何在函數中產生函數?",2016-10-31 13:16:52,NA,NA,"※ 引述《wheado (principal component QQ)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 假設有個函數 F <- function(data=iris ,unit=3){...}: 我想要在裡面產生另外一個函數 f <- function(X, par){...}。: 但是，這個函數是跟我的 data 與 unit 有關，: 會根據我給的data與unit不同產生的函數會不一樣，: 請問有沒有關鍵字或是網站可以讓我搜尋類似的教學。: 這個問題我不知道要怎麼GOOGLE。: 謝謝。關鍵字： function, environment, closure

參考網頁：

- R advanced:http://adv-r.had.co.nz/Environments.html- Closure in R:https://www.r-bloggers.com/closures-in-r-a-useful-abstraction/學會這些技巧，可以讓寫的程式碼更短，但是同事若不懂，在共用R script
上可能會有問題。你要自行取捨了。

--","R_Language"
"1244","M.1477830397.A.F46","wheado","問題","如何在函數中產生函數?",2016-10-30 20:26:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

假設有個函數 F <- function(data=iris ,unit=3){...}

我想要在裡面產生另外一個函數 f <- function(X, par){...}。

但是，這個函數是跟我的 data 與 unit 有關，

會根據我給的data與unit不同產生的函數會不一樣，

請問有沒有關鍵字或是網站可以讓我搜尋類似的教學。

這個問題我不知道要怎麼GOOGLE。

謝謝。


--","R_Language"
"1245","M.1477811580.A.583","f496328mm","問題","bigmemory套件中  類別變數問題",2016-10-30 15:12:57,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

在使用bigmemory時，是不是只能讀數值型變數，因為我用來讀類別時，都變成NA，

目前的方法是，先轉factor，再轉數字，雖然是數字，但是把他當成類別變數，

想問有沒有別的方法，能夠讀類別型變數

謝謝

ps:因為data.table 的 fread 讀資料時  會佔ram，用這個比較不會

[關鍵字]:
bigmemory



--","R_Language"
"1246","M.1477796198.A.F68","f496328mm","問題","lasso相關套件",2016-10-30 10:56:36,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我想問，有關lasso的套件有哪些，我目前知道的是lars和glmnet

想用lasso幫我找重要變數，另外用lasso去挑出來的變數，下去做machine learning

結果一定會比較好嗎?

因為我目前用glmnet去挑，結果並沒有比較好，差距在5%以內

謝謝

[關鍵字]:
lasso   lars   glmet


--","R_Language"
"1247","M.1477745748.A.CFF","clansoda","問題","工作用電腦選擇",2016-10-29 20:55:45,NA,NA,"各位好，最近我一直碰到windows編碼的問題，所以有一些挫折

網路上也是有一些改locale的解法，但是看起來好像都沒有很好的效果

我目前是傾向在工作上用MacOS或者linux來解決這件事。

我很久之前就有想要買macbook但是新版的遲遲不出來

直到這禮拜新版的終於出來了，只是各位也知道這價格...潮翻了

我的第一個問題是R的執行速度主要是受限於CPU嗎? 因為我之前寫了一個function

在我自己的電腦(I5-4460)上面跑不會算太慢，但是在我同事的電腦(筆電不知道CPU)

卻慢得很厲害，所以我在想是不是CPU有很巨大的影響，又或者是因為他的電腦都在養蠱

他裝了很多中國軟體。那macbook air能不能很好的做工作呢?或者一定要上到pro才可以

我目前是一定會買到8G記憶體以上，只是不知道哪一個機型而已，又或者我應該買一台

windows筆電裝linux來使用呢?因為我本身不是資工出身，對於linux會有點害怕。

我也知道本地端在怎麼買也不可能比那些雲端企業來的更好，所以各位認為在自己的

電腦上面跑的規模大概到多大呢?例如100萬筆資料之類的，而怎樣的規模才需要用

AWS或google提供的雲端平台?因為平台有好幾個，有有經驗的版友可以分享優劣嗎?

我總結一下自己的問題

1、macbook air or macbook pro or notebook in linux

2、多少規模的資料需要在雲平台上面跑

3、多家的平台是否有優缺點之分呢

雖然這應該是NBXXXXXX版的問題，但是認為版友會比較有使用R的經驗所以來此發問

若有違規會自刪，會比較偏mac的原因是後來要出國，怕用linux後娛樂會有問題。

--","R_Language"
"1248","M.1477670532.A.716","celestialgod","問題","Re: R讀取JSONL(or JSON)格式的dataset",2016-10-29 00:02:08,NA,NA,"※ 引述《pp61022 (fight)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我在kaggle看到一個dataset，: https://www.kaggle.com/roamresearch/prescriptionbasedprediction: 想要把他下載下來轉成Rdata檔，: 但是他是JSONL的格式,但好像也算是JSON格式?!: (網站說明:The file is in JSONL format (one JSON record per line)): 有搜尋一些R讀取JSON格式的方法, 但還是沒辦法出來,: 想請教版友們該如何修改才能正常讀取這種格式的dataset: (我剛學R, 對於某些程式碼還不熟, 不清楚應該如何debug): [程式範例]:: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題: http://ideone.com/PL9XJq: 讀到CleanData<-do.call(""rbind"", person)出現warning message，但我不知道該如何修: 正:: Warning message:: In rbind(provider_variables = list(settlement_type = ""non-urban"",  ::   number of columns of result is not a multiple of vector length (arg 1): [環境敘述]:: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤: R version 3.2.3 (2015-12-10): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods: [7] base: other attached packages:: [1] rjson_0.2.15: loaded via a namespace (and not attached):: [1] tools_3.2.3: [關鍵字]:: 選擇性，也許未來有用:  我有參考https://goo.gl/EEdGxP 這個網站的寫法試試看ndjson這個套件吧

他可以正確解析jsonl

並且速度也不慢，以下是測試code

library(ndjson)

jsonlFileName <- unzip(""prescriptionbasedprediction.zip"", list = TRUE)$Name
unzip(""prescriptionbasedprediction.zip"")
df <- stream_in(jsonlFileName)

用ndjson是目前看到最快的方法XDD

ndjson是八月新出的套件...

玩一下覺得還不錯XDD


而且這資料怎麼那麼大，吃掉我快10G的記憶體= =....

讀要好久，用readLines + sapply + fromJSON的時間超久... 久到完全不想等Orz

補充一點，ndjson讀進來是data.table

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1249","M.1477665658.A.930","abc2090614","問題","Re: R讀取JSONL(or JSON)格式的dataset",2016-10-28 22:40:55,NA,NA,"※ 引述《pp61022 (fight)》之銘言：library(dplyr)
library(jsonlite)


content <- readLines(""roam_prescription_based_prediction.jsonl"")
line1.cms <- fromJSON(readlines[1])$cms_prescription_count %>% as.data.frame

mydata <- line1.cms

for (i in 2:length(content)) {
  mydata <- bind_rows(mydata, fromJSON(content[i])$cms_prescription_count
%>% as.data.frame)
}

這會parse出其中一個data frame

另一個類似方法操作吧...

--","R_Language"
"1250","M.1477655683.A.74C","huangsam","問題","write_excel_csv 輸出問題",2016-10-28 19:54:41,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)*[m[問題敘述]:想請問write_excel_csv輸出的問題!!!我有一個data.frame資料內容為c(""01"", ""02"", ""03"")但是我輸出EXCEL表格內容卻是 ""1"" ,""2"", ""3""就是無法將原本的字串輸出，他會轉成數字。[關鍵字]:write_excel_csv--","R_Language"
"1251","M.1477651594.A.602","pp61022","問題","R讀取JSONL(or JSON)格式的dataset",2016-10-28 18:46:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我在kaggle看到一個dataset，https://www.kaggle.com/roamresearch/prescriptionbasedprediction想要把他下載下來轉成Rdata檔，
但是他是JSONL的格式,但好像也算是JSON格式?!
(網站說明:The file is in JSONL format (one JSON record per line))
有搜尋一些R讀取JSON格式的方法, 但還是沒辦法出來,
想請教版友們該如何修改才能正常讀取這種格式的dataset
(我剛學R, 對於某些程式碼還不熟, 不清楚應該如何debug)


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題http://ideone.com/PL9XJq讀到CleanData<-do.call(""rbind"", person)出現warning message，但我不知道該如何修正Warning message:In rbind(provider_variables = list(settlement_type = ""non-urban"",  :number of columns of result is not a multiple of vector length (arg 1)[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R version 3.2.3 (2015-12-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

other attached packages:
[1] rjson_0.2.15

loaded via a namespace (and not attached):
[1] tools_3.2.3

[關鍵字]:選擇性，也許未來有用我有參考https://goo.gl/EEdGxP這個網站的寫法


--","R_Language"
"1252","M.1477557725.A.19B","clansoda","問題","Windows package編碼問題",2016-10-27 16:42:02,NA,NA,"我被這個問題困擾很久了，我目前做的資料就是會有中文

而我現在想要弄一個package出來，我在.R file裡面是UTF-8的編碼

用document來跑就是會跑不過，因為是亂碼

我google到的方法是告訴我在description下面塞Encoding: UTF-8

也不行，但是我不想用CP950，因為我想要讓這個package也能給mac用

請問有其他的解決方法嗎?，下面是error訊息

Error in parse(text = lines, n = -1, srcfile = srcfile) :

C:\Users\user\Documents\BonnyRead\BonnyReadWorking/R/Recommendations.R:24:17:
unexpected input
23:     # We need to handle the missing value in transaction date
24:     datafile[,閮?

其實就是我的datatable後面的colname他讀不出來。

--","R_Language"
"1253","M.1477556262.A.A53","SpiritKnight","問題","超新手發問",2016-10-27 16:17:39,NA,NA,"大家好，小弟最近開始碰R, 有在統計板看到同樣的問題，只是那個板友的回答我看不懂。。。

我想問的是
R的 Workspace和History還有script到底差在哪裡呢？

想我寫了一部分程式碼之後，有課要去上所以晚點繼續寫 這樣要用什<U+9EBD>方式儲存，下次要怎麼接著寫？
或者說我已經完成我想要的內容了，想要儲起來，下次遇到就可以直接拿來用，那該怎麼做呢？

先感謝各板友了！


-----
Sent from JPTT on my YuLong Coolpad 8675_S01.

--","R_Language"
"1254","M.1477480426.A.F8F","lenofire","問題","有關於bootstrapping的謎思",2016-10-26 19:13:44,NA,NA,"我看完了一些文獻，想要做bootstrapping 的resample（隨機抽樣）以達成減少多數類別
問題（一 使用bootstrapping後該如何看隨機抽樣結果？
問題（二 使用bootstrapping是需要把三類別一起放進去才能運作？
問題（三 我是該輸人哪句指令？用這句但沒反應http://i.imgur.com/ggcnikf.jpg-----------https://youtu.be/tb6wb9ZdPH0?t=6m46s大家可以參考該影片 ，我是不懂怎麼運用在大量資料上
-------------http://i.imgur.com/Lg4WvMv.jpg如圖所見
資料紅色Label A有過多的現象，發生了imbalance dataset ，所以我要使用undersample
 與over
sample 但Rose package 不能應用在多分類上

--","R_Language"
"1255","M.1477452633.A.678","PhysicsBoy","問題","跑同個程式儲存影像檔的大小卻不同",2016-10-26 11:30:29,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:小弟目前利用兩台主機進行研究的模擬，最近發現一個狀況，我分別用這兩台主機跑一模一樣的程式，最後都把影像檔存起來(都存成.rda)，結果這兩個影像檔大小卻差了很多，照理來說儲存的東西完全一樣不該有這情況才對，所以想請問板上大大有人遇過這樣的情況嗎?小弟兩台主機都是用R 3.3.1版兩台主機比較大的差別是一台是傳統硬碟一台是SSD作業系統都是Win7--離開你的視線~讓情緒完完整整的宣洩~我想今夜就這樣吧~反正孤獨也無所謂~--","R_Language"
"1256","M.1477391798.A.25F","f496328mm","問題","排序  ( 按照 設定 的順序 )",2016-10-25 18:36:35,NA,NA,"文章分類提示:

- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

ex:
c(1:10)
#1 2 3 4 5 6 7 8 9 10

#我想要按照這樣排序

 c(2,5,6,3,1,4,7,8,9,10)
 #[1]  2  5  6  3  1  4  7  8  9 10

#排序的位置   是我任意挑選的#-------------------------------------------------
#實際上是有一組id
#我先排序後做了一些事

#想要變回來原本順序


想問問看有沒有什麼方法可以辦到

我目前最陽春的方法就是用

        d1=c(1:10)#準備排序的data
        d2=c(2,5,6,3,1,4,7,8,9,10)#按照此順序排

        d3=rep(0,10)#暫存
        for(i in 1:10){
                map = d1[i]==d2
                d3[map] = d1[i]
        }
        d3

一一去比對這樣    不過非常沒效率

謝謝


--","R_Language"
"1257","M.1477385598.A.0F1","f496328mm","問題","請問 dr packages 中  維度縮減的方法",2016-10-25 16:53:16,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

dr packages中  維度縮減的方法

[程式範例]:


[關鍵字]:

dr


不太清楚 dr 包中，是用什麼方法，做降維，應該不是用PCA  or  LDA


method中有這幾個變數可以選擇
""sir"", ""save"", ""phdy"", ""phdres"" and ""ire""

我目前只知道PCA   LDA，不過有朋友推薦用dr，效果會比較好，

還是找特徵值嗎？

所以想問各位

謝謝



--","R_Language"
"1258","M.1477287280.A.392","Edster","問題","lineprfo 可否決定層數？",2016-10-24 13:34:31,NA,NA,"最近要檢查一支程式為何越來越慢 (因為陸陸續續修改，有陸續加東西)

我用 hadley 大神寫的 lineprof pkg 來確認。

可參考http://adv-r.had.co.nz/Profiling.htmlhttps://github.com/hadley/lineprof想偷懶看中文也是有 (我是英文看完才發現有中文)http://blog.fens.me/r-perform-lineprof/雖然看的到function中""每支"" function 的執行時間，
但是我想知道的是某層 function 的總執行時間，
他的資料結構我也不太容易輸出成 csv 自己加
因此想請問有經驗的板友
我可否在設定上使用 lineprof 來計算某層function的總執行時間？
或是用什麼方式輸出成檔案自己加？

感謝先。

ps:
如果想要裝的話，要從GitHub自己下載source自己轉成binary

以下是我的安裝過程，後面附的是官方範例。
devtools或是Rcpp可能要先刪掉重新裝。

==
install.packages(""devtools"")
install.packages(""Rcpp"")
library(devtools)
devtools::install_github(""hadley/lineprof"")
install_github(""wch/shiny-slickgrid"",force=TRUE)

library(lineprof)
library(shiny)

source(find_ex(""read-delim.r""))
source(find_ex(""read-table.r"")) # local copy so get line numbers
wine <- find_ex(""wine.csv"")

## Not run:
y1 = read.table2(wine, sep = "","")
system.time(x1 <- lineprof(read.table2(wine, sep = "",""), torture = TRUE))
x2 <- lineprof(read_delim(wine), torture = TRUE)

shine(x1)
shine(x2)


--","R_Language"
"1259","M.1477281136.A.6AD","clansoda","問題","Rmarkdown evaluation",2016-10-24 11:52:12,NA,NA,"各位好

我目前在研究Rmarkdown寫出一個dashboard來使用

我一開始就碰到一些問題，我現在用Rstudio給我的Rmarkdown去跑

只要一knit他就會出現

Error in evaluate_call(expr, parsed$src[[i]], envir = envir, enclos =

enclos,  : unused argument (include_timing = include_timing)

Calls: <Anonymous> ... call_block -> block_exec -> in_dir -> evaluate ->

evaluate_call

因為是eval這個步驟出錯了，所以我有試著在Rchunk後面打eval = FALSE

可是只要這樣打他的評估就是 ordinary text without R code

等於不管我打什麼都沒用，想請問這該如何解決呢?

最上面那塊的Rchunk我有試過兩種argument，分別是setup跟global

看起來都沒差。

--","R_Language"
"1260","M.1477147337.A.5D1","celestialgod","問題","Re: 計算重複次數",2016-10-22 22:42:14,NA,NA,"※ 引述《jasonfun44 (kk123)》之銘言：: 問題: 程式諮詢:: 想計算每筆id重覆次數: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: aaa為data.table: 我想對其id做排序後,再對日期做排序: 然後計算每筆id重複次數給入新增count欄位:   aaa<-Rawdata[order(id,name,date),]:   for(i in 1:100){:     if(   aaa[i,id]==aaa[i+1,id] &  aaa[i,name]==aaa[i+1,name] ) {:       aaa[c(i),count]<=z:       z=z+c(1):     }:     else(  aaa[i,id]!=aaa[i+1,id] | aaa[i,name]!=aaa[i+1,name]  ):     {:       aaa[c(i),count]<=z:       aaa[c(i+1),count]<=c(1):        z<-1:       }:   }: 不知道以上這段程式碼要如何改,懇請各位大大幫我檢查位在哪,謝謝: [環境敘述]:: Win10 r3.31library(data.table)
set.seed(11)
aaa <- data.table(id = rep(1:5, times = sample(1:10, 5, TRUE)))

aaa[,id2 := id][ , count := cumsum(duplicated(id2))+1L, by=.(id)][,id2 :=NULL]
print(aaa)
#     id count
#  1:  1     1
#  2:  1     2
#  3:  1     3
#  4:  2     1
#  5:  3     1
#  6:  3     2
#  7:  3     3
#  8:  3     4
#  9:  3     5
# 10:  3     6
# 11:  4     1
# 12:  5     1


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1261","M.1477144899.A.66F","phil5566","問題","optim函數代不同初始值解出的解都不同?",2016-10-22 22:01:36,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想解 likelihood 函數裡的變數,打好了自定的function後,要解fr的X1,X2,X3用了optim(C(a,b,c),fr)的指令但解出來的值,根據給的初始值a,b,c不同而不同甚至還會出現Error in optim 不可使用初始參數來評估函數讓我感到困擾,究竟是哪一個解才是正確的如果用牛頓疊代法解多變數,要怎麼用R來寫?請高手指點迷津,謝謝程式碼可貼於以下網站：http://ideone.com/0MCowj[環境敘述]:Win7 Rx64 3.3.1--","R_Language"
"1262","M.1477114200.A.690","jasonfun44","問題","計算重複次數",2016-10-22 13:29:57,NA,NA,"問題
程式諮詢:
想計算每筆id重覆次數

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
aaa為data.table
我想對其id做排序後,再對日期做排序
然後計算每筆id重複次數給入新增count欄位
  aaa<-Rawdata[order(id,name,date),]

  for(i in 1:100){

    if(   aaa[i,id]==aaa[i+1,id] &  aaa[i,name]==aaa[i+1,name] ) {

      aaa[c(i),count]<=z

      z=z+c(1)
    }
    else(  aaa[i,id]!=aaa[i+1,id] | aaa[i,name]!=aaa[i+1,name]  )
    {
      aaa[c(i),count]<=z
      aaa[c(i+1),count]<=c(1)
       z<-1
      }

  }
不知道以上這段程式碼要如何改,懇請各位大大幫我檢查位在哪,謝謝



[環境敘述]:
Win10 r3.31

--","R_Language"
"1263","M.1477052610.A.1AD","celestialgod","問題","Re: for loop 迴圈命名變數",2016-10-21 20:23:18,NA,NA,"※ 引述《pinlateng (中肯不嘴砲)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我現在將一份問卷匯入到 R 之後，希望依照某行的數值加以分類，再將分類結果: 用迴圈命名以便後續處理: [程式範例]:: 有個 data frame：data: 媕Y有一行 column_a，值是 1~5: 現在想以 column_a 的數值為條件將特定列抓出來指定成一個變數: 也就是把: column_a_1 <- data[data$column_a == 1,]: column_a_2 <- data[data$column_a == 2,]: .: .: .: 濃縮成類似這樣的感覺：: for (x in c(1:5)){:   column_a[x] <- data[data$column_a == x,]: }: [環境敘述]::: R version 3.3.1 (2016-06-21): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): [關鍵字]:: 迴圈  變數  命名不建議這麼做，我建議下面的做法

dataList <- split(data, data$column_a)

for (i in 1:length(dataList)){
  # do something with dataList[[i]]
}

至於你要的做法，自行?assign或是eval + parse

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上.下)#1LhpJCfB,#1Lhw8b-s (R_Language)https://goo.gl/GcfNoPtidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1264","M.1477052383.A.23D","pinlateng","問題","for loop 迴圈命名變數",2016-10-21 20:19:39,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
我現在將一份問卷匯入到 R 之後，希望依照某行的數值加以分類，再將分類結果
用迴圈命名以便後續處理

[程式範例]:
有個 data frame：data
媕Y有一行 column_a，值是 1~5
現在想以 column_a 的數值為條件將特定列抓出來指定成一個變數
也就是把

column_a_1 <- data[data$column_a == 1,]
column_a_2 <- data[data$column_a == 2,]
.
.
.
濃縮成類似這樣的感覺：
for (x in c(1:5)){
  column_a[x] <- data[data$column_a == x,]
}


[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:

迴圈  變數  命名

--","R_Language"
"1265","M.1477039486.A.EB3","clansoda","問題","Re: 抓取PTT網頁，請問此程式碼的錯誤在哪？",2016-10-21 16:44:42,NA,NA,"Hi，很遺憾的是你後面那部分我有點看不太懂，但可以提供另外一種方法

來做到你想要做的事情http://pastebin.com/yEvK1FuG只有一個小問題，就是他的本文含在一個大TAG裡面但是有其他小TAG

我找不到一個很好的方式只抓本文，因此裡面會有一些title跟日期的廢話

用xml_contents可以只抓到本文，但是它的位置很不固定，只要有例如版主

塞了一些話進去的話，他的位置就會往後，這個只能看看有沒有了解結構的人

看看有甚麼好方法解決了

下面是用到的package

library(xml2)
libray(httr)

--","R_Language"
"1266","M.1477034088.A.06B","huangsam","討論","多筆重覆中的第一筆",2016-10-21 15:14:46,NA,NA,"- 討論: 當你自己已經有答案，但是也想聽聽版友意見時[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:
想要找多筆當中為重複的筆數或者是重複中的第一筆
[你的答案]:DT <- data.table(letter = sample(letters, 50, replace = TRUE), num = 1:5)DT[, com:=paste0(letter, num)]dt.multi <- DT$com %>% duplicated()#解法一DT_COM <- cbind(DT, dt.multi) %>% filter(dt.multi == FALSE)#解法二，但是這個有個地方有問題就是選取等於1和大於1的第一筆，這邊不知道怎麼下手DT[, MUTI:=.N, by =com]有想是否可以使用unique不知大家有沒有甚麼好想法，切磋或是討論，感謝--","R_Language"
"1267","M.1476775409.A.321","mikemlbb","問題","抓取PTT網頁，請問此程式碼的錯誤在哪？",2016-10-18 15:23:22,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我照著書本輸入以下程式碼，
想嘗試抓取笨版中之文章文字內容，
但程式碼執行完後卻出現：
Error in regexpr(""www"", line) :
   argument ""line"" is missing, with no default

了解regexpr語法的用法後，
發現此程式的""line""字詞與該語法之用法不同，
然而若是在此範例中，
要怎麼修改才能抓取到笨版當中的文章呢？

謝謝大家解惑

[程式範例]:
install.packages(""XML"")
install.packages(""RCurl"")
library(XML)
library(RCurl)

data <- list()
for(i in 1058:1118){
  tmp <- paste(i, '.html', sep = '')
  url <- paste('https://www.ptt.cc/bbs/StupidClown/index',tmp,sep= '')

  get_url <- getURL(url,ssl.verifypeer = FALSE)
  html <- htmlParse(get_url)
  url.list <- xpathSApply(html,""//div[@class='title']/a[@href]"",xmlAttrs)
  data <- rbind(data, paste('https://www.ptt.cc',url.list,sep= ''))
}

data <- unlist(data)

getdoc <- function(line){
  start <- regexpr('www', line)[1]
  end <- regexpr('html', line)[1]
  if(start != -1 & end != -1){
    url <- substr(line, start, end+3)
    html <- htmlParse(getURL(url,ssl.verifypeer = FALSE),encoding = 'UTF-8')
    doc <- xpathSApply(html, ""//div[@id='main-container']"",xmlValue)
    name <- strsplit(url,'/')[[1]][4]
    write(doc,gsub('html','txt',name))
  }
}

getdoc()
sapply(data, getdoc)

setwd(""C://Documents and Settings//12345//桌面//R_textmining"")
write.table(getdoc,file = ""getdoc.txt"",row.names = F,quote = F)

[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows XP (build 2600) Service Pack 3

[關鍵字]:
regexpr、xpathSApply、PTT爬蟲

--","R_Language"
"1268","M.1476707818.A.402","celestialgod","問題","Re: grepl與迴圈使用",2016-10-17 20:35:52,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 手上有兩個檔案，分別是參照表以及原始檔: 其中一個參照表為: EX:: 檔案DT: 1  ^123.* A: 2  ^234.* B: .: .: .: 原始檔為: 檔案DT2: 1. 123456: 2. 23456: 經由比對可以發現: 1.=>為A: 2.=>為B: [你的答案]::: 我的寫法是用迴圈方式然後: 想請問有沒有更好的寫法: ansewer <- c():   for (i in 1:nrow(DT)):   {:         ind <- grepl(DT[i, 1, with=F], DT2):     for(j in which(ind==1)):     {:       ansewer[j] <- ifelse(TYPE[j]==0, DT2[i],ansewer[j] ):     }:   }:: [關鍵字]::: grepl:

好讀版：http://pastebin.com/cZWwyGGHlibrary(data.table)
library(stringr)
library(pipeR)
library(zoo)

# 產生資料
numDigits <- 6
numRows <- 1000
DT2 <- data.table(str = rollapply(sample(9, numRows*numDigits, TRUE),
                               numDigits, function(x) str_c(x, collapse = """"),
                               by = numDigits), value = NA_character_)

# 產生mapping table
allPatterns <- substring(DT2$str,1,3) %>>% unique %>>% sort
DT <- data.table(pattern = str_c(""^"", allPatterns, "".*""),
                 value = sprintf(""A%03i"", 1:length(allPatterns)))

# mapping開始
st <- proc.time()
for (i in 1:nrow(DT))
  set(DT2, which(str_detect(DT2$str, DT$pattern[i])),
      which(names(DT2) == ""value""), DT$value[i])
proc.time() - st
#    user  system elapsed
#    0.11    0.00    0.11

# 如果會有string map到兩種pattern，取最前面的pattern
# 就在第一個which裡面加上 & !is.na(DT2$value)條件
# 取最後面的話就不用改

print(DT2)
#          str value
#    1: 588847  A297
#    2: 472447  A225
#    3: 181823  A048
#    4: 928228  A495
#    5: 331838  A139
#   ---
#  996: 172326  A042
#  997: 522373  A253
#  998: 828978  A437
#  999: 617415  A311
# 1000: 877184  A470

# 如果先用迴圈抓位置的話，會慢一倍...
st <- proc.time()
valueLoc <- lapply(1:nrow(DT), function(k)
  data.table(locDT=k, locDT2=grep(DT$pattern[k], DT2$str))) %>>%
  rbindlist %>>% setorder(locDT2)
DT2[,value := DT$value[valueLoc$locDT]]
proc.time() - st
#    user  system elapsed
#    0.28    0.00    0.28

# 如果有重複pattern問題，就valueLoc再對locDT2做groupby的max/min

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)https://goo.gl/OBto1xdata.table#1LhW7Tvj (R_Language)https://goo.gl/QFtp17dplyr(上)#1LhpJCfB (R_Language)https://goo.gl/GcfNoPdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)https://goo.gl/pcq5nqpipeR#1NXESRm5 (R_Language)https://goo.gl/cDIzTh--","R_Language"
"1269","M.1476692454.A.C19","huangsam","討論","grepl與迴圈使用",2016-10-17 16:20:52,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的手上有兩個檔案，分別是參照表以及原始檔
其中一個參照表為
EX:
檔案DT
1  ^123.* A
2  ^234.* B
.
.
.

原始檔為
檔案DT2
1. 123456
2. 23456
經由比對可以發現
1.=>為A
2.=>為B

[你的答案]:我的寫法是用迴圈方式然後想請問有沒有更好的寫法ansewer <- c()for (i in 1:nrow(DT)){ind <- grepl(DT[i, 1, with=F], DT2)for(j in which(ind==1)){ansewer[j] <- ifelse(TYPE[j]==0, DT2[i],ansewer[j] )}}[關鍵字]:grepl--","R_Language"
"1270","M.1476610354.A.1A0","chrisli7","問題","Function中變數轉為文字的方法",2016-10-16 17:32:32,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位前輩們好，不好意思我又來問問題了，這次想請問當我在寫Function時，
希望把輸入的變數變為文字，該怎麼做呢？

我丟入的x變數是資料集，例如taipei為台北的資料集，Kaohsuing為高雄資料集，
我希望可以直接在Function中將我鍵入的taipei直接變成""taipei""


簡化的例子為：以下分別為職業、次數、百分比

matrix1 <- matrix(""學生"",""上班族"",""家管"",""觀光客"",""其他"",
student,salaryman,housekeeper,turist,others,percentage),
nrow = 3,ncol = 5,byrow = T)

假設跑出來為

學生  上班族  家管  觀光客  其他
 22     52     12     8      10
21.2%  50.0%  11.5%  7.7%   9.6%

如今我想在最左加上一欄，延續上面的例子利用以下的方式：

keyin <- Function(x){
switch(x,
  Taipei = ""台北""
  Kaohsuing = ""高雄"",其他)

matrix1 <- matrix(rep(switch(x,
  Taipei = ""台北""
  Kaohsuing = ""高雄"",其他)),5)
""學生"",""上班族"",""家管"",""觀光客"",""其他"",
student,salaryman,housekeeper,turist,others,percentage),
nrow = 4,ncol = 5,byrow = T)

x變數為我丟入的資料集
希望能依據我丟入的資料集跑出以下：(以台北的資料集為例)

台北   台北   台北   台北   台北
學生  上班族  家管  觀光客  其他
 22     52     12     8      10
21.2%  50.0%  11.5%  7.7%   9.6%


但是因為我丟入的X並非單純的向量或是數值，
沒有辦法直接判斷或是轉換，不知道是否有什麼方式能將我輸入的x變數，
直接轉為文字並且形成表格呢？

謝謝各位前輩！網路上找了好久的資料仍然無所獲，希望能有前輩能為我解惑，謝謝！

--","R_Language"
"1271","M.1476603778.A.AC9","jlzl0612","問題","如何用MLE法估計回歸係數",2016-10-16 15:42:55,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
不知道如何從ols法 改成mle法

[程式範例]:用OLS法去估 alpha beta時用這樣
F1=function(n)
{
  A=c()
  B=c()
  for(i in 1:10000)
  {
    X=rnorm(n,0,1)
    Y=rt(n,10)
    L=lm(Y~X)
    A[i]=L$coefficients[1]
    B[i]=L$coefficients[2]
  }
  C=c(mean(A),var(A),mean(B),var(B))
  return(C)
}
同樣的一件是若要使用MLE法去估
不知該如何輸入


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1272","M.1476582014.A.495","jlzl0612","問題","如何檢定資料是否為常態分配",2016-10-16 09:40:11,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手

[問題敘述]:
請問如何檢定在給定不同n值得條件下所求得的alpha beta是否為常態

[程式範例]:
F1=function(n)
{
  A=c()
  B=c()
  for(i in 1:10000)
  {
    X=rnorm(n,0,1)
    Y=rt(n,10)
    L=lm(Y~X)
    A[i]=L$coefficients[1]
    B[i]=L$coefficients[2]
  }
  C=c(mean(A),var(A),mean(B),var(B))
  return(C)
}
F1(20)
F1(50)
F1(100)
F1(1000)



[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:--","R_Language"
"1273","M.1476544130.A.462","msntree","問題","讀取程式時當機",2016-10-15 23:08:45,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我用是用官方的編輯器，最近為了課程需要所以學著使用，但是當我要讀檔時，程式就整個當掉，不知道問題到底出在哪，重灌過還是一樣。想請問板友，問題不知道出在哪感恩，謝謝[環境敘述]:Mac OSX 10.10.5R version 3.2.4--","R_Language"
"1274","M.1476541084.A.402","SleepyChink","問題","twoord.plot 繪圖問題",2016-10-15 22:18:00,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:
新手

[問題詳述]
我利用plotrix這個package繪圖後，y軸座標數值部份會產生重疊等問題。
結果如連結:https://drive.google.com/open?id=0B8TJyO4uJv6mSDhNZ084dGQ0Rjg由於不希望手動一筆一筆設定座標範圍，因此使用range(變項)使之自動讀取座標軸範圍
，
但有些圖的座標軸數字會重疊或是自動產生小數點(e.g. 34.5)，
找了些文章似乎沒有看到能解決的方式，因此想請教各位是否有處理過類似問題，謝謝。

[語法連結:http://pastebin.com/FapxCaNS][語法示範]
par(""mar"")
par(mar=c(1,1,1,1))
par(mfrow=c(2,3))
twoord.plot(prolactin$day,prolactin$AC001,panss$day,panss$AC001,xlab=""Times"",l
yl

twoord.plot(prolactin$day,prolactin$AC006,panss$day,panss$AC006,xlab=""Times"",l
yl

twoord.plot(prolactin$day,prolactin$AC012,panss$day,panss$AC012,xlab=""Times"",l
yl

twoord.plot(prolactin$day,prolactin$AC013,panss$day,panss$AC013,xlab=""Times"",l
yl

twoord.plot(prolactin$day,prolactin$AC014,panss$day,panss$AC014,xlab=""Times"",l
yl

twoord.plot(prolactin$day,prolactin$AC015,panss$day,panss$AC015,xlab=""Times"",l
yl

--
Sent from my Windows

--","R_Language"
"1275","M.1476359736.A.31C","celestialgod","問題","Re: dplyr 與 mutate用法",2016-10-13 19:55:30,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 想要用dplyr中的mutate 搭配迴圈使用或是大家有更好的想法: 下方並無法將column1....改變只會產生新的欄位i: [程式範例]::: 想要用dplyr中的mutate做迴圈舉例如下: x <- c(""column1"",""column2"", ""column3"",....): 總共可能有100個欄位其中有10個欄位是時間格式，目前我是用: data %>% mutate(column1 = as.POSIXct....:                 column2 = as.POSIXct....:                   .:                   .:                 column10 = as.POSIXct...): for (i in x): {: data %>% mutate( i = as.POSIXct(as.numeric(i)*(60*60*24), origin=""1899-12-30"": , tz=""UCT"") ): }:: [環境敘述]::
:: [關鍵字]::: dplyr , mutate:

好讀版：http://pastebin.com/vQbFHfxmlibrary(dplyr)
minDate <- as.POSIXct(""1990-01-01"")

N <- 1000
p <- 100
dat <- lapply(1:p, function(x) {
  if (x > p*0.1){
    rnorm(N)
  } else {
    as.integer(Sys.time()) - sample(2e8, N)
  }
}) %>% `names<-`(paste0(""V"", 1:p)) %>% as_data_frame

possibleTimeCols <- sapply(dat[1, ], function(x){
  as.POSIXct(x, origin = ""1970-01-01"", tz = ""Asia/Taipei"") >= minDate
}) %>% {names(.)[.]}

datOut <- dat %>% mutate_each_(funs(as.POSIXct(., origin = ""1970-01-01"",
  tz = ""Asia/Taipei"")), vars = possibleTimeCols)
print(datOut)
# Source: local data frame [1,000 x 100]
#
#                     V1                  V2                  V3
#                 <time>              <time>              <time>
# 1  2011-12-15 20:55:45 2012-04-18 23:16:08 2012-10-13 13:38:58
# 2  2013-03-15 11:05:22 2013-07-28 18:11:49 2011-03-26 14:46:51
# 3  2015-03-03 13:54:22 2011-06-18 05:31:24 2012-03-26 14:53:00
# 4  2015-11-03 01:30:12 2011-11-02 01:21:49 2013-11-05 15:16:48
# 5  2012-11-18 12:06:22 2012-04-05 16:28:43 2010-09-12 14:24:42
# 6  2012-01-24 03:38:18 2014-11-09 11:54:44 2016-05-30 21:50:26
# 7  2010-08-03 22:27:15 2016-01-04 00:05:41 2014-02-16 00:53:00
# 8  2013-05-14 12:44:14 2011-12-24 22:13:11 2012-01-17 18:22:01
# 9  2011-05-14 16:28:25 2011-04-23 07:36:51 2011-05-01 04:31:10
# 10 2010-07-02 17:25:18 2010-08-26 05:15:27 2013-12-31 21:10:19# data.table解法library(data.table)
library(pipeR)
minDate <- as.POSIXct(""1990-01-01"")

N <- 1000
p <- 100
dat <- lapply(1:p, function(x) {
  if (x > p*0.1){
    rnorm(N)
  } else {
    as.integer(Sys.time()) - sample(2e8, N)
  }
}) %>>% as.data.table

possibleTimeCols <- sapply(dat[1, ], function(x){
    as.POSIXct(x, origin = ""1970-01-01"", tz = ""Asia/Taipei"") >= minDate
}) %>>% (names(.)[.])

dateDT <- dat[ , lapply(.SD, function(x) as.POSIXct(x, origin = ""1970-01-01"",
                                                    tz = ""Asia/Taipei"")) ,
             .SDcols = possibleTimeCols]
dat[ , `:=`(eval(possibleTimeCols), dateDT)] %>>% print
#                        V1                  V2                  V3
#    1: 2014-04-29 22:17:22 2013-07-12 11:37:04 2013-12-19 13:01:16
#    2: 2010-11-15 19:23:53 2016-01-28 05:17:19 2013-06-16 15:04:38
#    3: 2013-04-14 18:16:29 2012-10-25 07:32:09 2012-09-30 05:00:31
#    4: 2010-10-19 02:10:24 2015-04-02 19:09:34 2012-09-11 20:30:54
#    5: 2012-09-10 02:39:22 2014-05-18 23:02:04 2015-11-19 21:44:06
#   ---
#  996: 2016-09-20 12:48:47 2016-10-08 11:42:33 2013-08-07 23:56:46
#  997: 2011-12-19 12:23:57 2011-01-23 02:55:16 2015-12-25 23:17:27
#  998: 2013-08-29 22:00:48 2013-07-16 04:39:07 2014-03-17 08:53:01
#  999: 2011-11-13 19:55:30 2010-08-08 16:43:12 2012-01-24 10:58:16
# 1000: 2015-08-07 16:55:23 2015-11-22 21:17:57 2014-03-05 10:13:36

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1276","M.1476355870.A.42B","swedrf0112","問題","Re: dplyr 與 mutate用法",2016-10-13 18:51:07,NA,NA,"不知道是不是你要的XD
  可使用 dplyr::mutate_each_

  library(dplyr)
  library(magrittr)

  d = data.frame(Column1=sample(1:10,10),
                 Column2=sample(1:10,10),
                 Column3=sample(1:10,10),
                 Column18=sample(20:30,10))

  transF = function(x){

     return( as.POSIXct(as.numeric(x)*(60*60*24), origin=""1899-12-30"",
             tz=""UCT"") )

  }

  ## 可自己修改成需要的欄位名稱 ex: named = c(""Column2"",""Column18"")
  named = names(d)
  d %>% mutate_each_(funs(transF),named)

--","R_Language"
"1277","M.1476343352.A.58A","clansoda","問題","Re: dplyr 與 mutate用法",2016-10-13 15:22:28,NA,NA,"Hi，根據你的文章，我猜你是想要把現有一個含有numeric格式的dataframe

轉換成POSIXct的格式，http://pastebin.com/zXuJuWTe這理論上應該可以一行寫出來，可是我功力不夠，卡在as.POSIXct那邊

datatable是因為我現在在摸datatable才拿來用，你可以用dataframe做一樣的事

我是先把天轉換成秒這件事情用apply做出來，然後再用for loop丟進dataframe裡面

我發現如果你把POSIXct丟進martix裡面會變成一個很大很大的負數，我猜應該是matrix

處理這個格式的default，因為這幾個數字都蠻接近的，所以我是丟回原來的那個dat

順便請教一下版友，我想寫成一行能解決的方式，可是不知道錯在哪

apply(dat,2,function(k) { k * (60*60*24) %>% as.POSIXct(origin = ""1899-12-30"",

tz = ""UTC"") -> bobochacha

然後他就出現error了，請問這個寫法錯在哪呢?

--","R_Language"
"1278","M.1476338271.A.DBF","huangsam","問題","dplyr 與 mutate用法",2016-10-13 13:57:48,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想要用dplyr中的mutate 搭配迴圈使用或是大家有更好的想法
下方並無法將column1....改變只會產生新的欄位i
[程式範例]:想要用dplyr中的mutate做迴圈舉例如下x <- c(""column1"",""column2"", ""column3"",....)總共可能有100個欄位其中有10個欄位是時間格式，目前我是用data %>% mutate(column1 = as.POSIXct....column2 = as.POSIXct......column10 = as.POSIXct...)for (i in x){data %>% mutate( i = as.POSIXct(as.numeric(i)*(60*60*24), origin=""1899-12-30"", tz=""UCT"") )}[環境敘述]:[關鍵字]:dplyr , mutate--","R_Language"
"1279","M.1476269433.A.667","celestialgod","問題","Re: 多重選擇的 grep",2016-10-12 18:50:30,NA,NA,"※ 引述《Edster (Edster)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 開發者(有撰寫R 的套件經驗): [問題敘述]:: 一個簡單的問題: 一堆字串中，想要擷取/篩選複數條件的字串: 例如:  ""./zw1_agriculture.txt"":  ""./zw1_agriculture.txt.xml"":  ""./zw1_bareland.txt"":  ""./zw1_bareland.txt.xml"":  ""./zw1_built_up.txt"":  ""./zw1_built_up.txt.xml"":  ""./zw1_forest.txt"":  ""./zw1_forest.txt.xml"":  ""./zw1_mining.txt"":  ""./zw1_mining.txt.xml"":  ""./zw1_watersurface.txt"":  ""./zw1_watersurface.txt.xml"": 等等: 只有下面的方法嗎？: for(i in c(""mining"",""watersurface"",""xml"")) f = f[grep(i, f, invert = TRUE)]: 我試著用lapply，但最後還需要取交集，不算好用，不如用for.: f = lapply(c(""mining"",""watersurface"",""xml""),:     FUN=function(x){f = f[grep(x, f, invert = TRUE)]; return(f)}): [關鍵字]::: grep, 複選:


strs <- c( ""./zw1_agriculture.txt"",
              ""./zw1_agriculture.txt.xml"",
              ""./zw1_bareland.txt"",
              ""./zw1_bareland.txt.xml"",
              ""./zw1_built_up.txt"",
              ""./zw1_built_up.txt.xml"",
              ""./zw1_forest.txt"",
              ""./zw1_forest.txt.xml"",
              ""./zw1_mining.txt"",
              ""./zw1_mining.txt.xml"",
              ""./zw1_watersurface.txt"",
              ""./zw1_watersurface.txt.xml"")

strToFind <- c(""mining"", ""watersurface"", ""xml"")

library(stringr)
outStr <- setdiff(strs, str_subset(strs, paste(strToFind, collapse = ""|"")))

f <- strs
for(i in c(""mining"",""watersurface"",""xml"")) f = f[grep(i, f, invert = TRUE)]

all.equal(outStr, f) # TRUE

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1280","M.1476261555.A.4FB","Edster","問題","多重選擇的 grep",2016-10-12 16:39:13,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除開發者(有撰寫R 的套件經驗)[問題敘述]:

一個簡單的問題
一堆字串中，想要擷取/篩選複數條件的字串

例如
 ""./zw1_agriculture.txt""
 ""./zw1_agriculture.txt.xml""
 ""./zw1_bareland.txt""
 ""./zw1_bareland.txt.xml""
 ""./zw1_built_up.txt""
 ""./zw1_built_up.txt.xml""
 ""./zw1_forest.txt""
 ""./zw1_forest.txt.xml""
 ""./zw1_mining.txt""
 ""./zw1_mining.txt.xml""
 ""./zw1_watersurface.txt""
 ""./zw1_watersurface.txt.xml""

等等
只有下面的方法嗎？
for(i in c(""mining"",""watersurface"",""xml"")) f = f[grep(i, f, invert = TRUE)]

我試著用lapply，但最後還需要取交集，不算好用，不如用for.
f = lapply(c(""mining"",""watersurface"",""xml""),
    FUN=function(x){f = f[grep(x, f, invert = TRUE)]; return(f)})


[關鍵字]:grep, 複選--","R_Language"
"1281","M.1476204638.A.B38","bedroom0204","問題","找出從A到B的平均值",2016-10-12 00:50:34,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我有兩個的資料檔，
一個是Fixation的資料檔，一個是gyro的資料檔。
Fixation的資料檔結構如下：
        start   end     fixation.x      fixation.y      fixation.x_gyro
1       50.69   100.11  1020            590
2       124.1   160     1123            690
3       200     275     1700            300
4       500     551.25  850             475
5       700     890.2   697             785

gyro的資料如下：
        gyro    start
1       6.9     0
2       4.7     50.69
3       1.5     55.77
4       -2.3    63.44
5       -4.3    90
6               100.11
7               124.1
8       -1.3    150.22
9       1.5     160

由於Fixation的資料是從gyro資料分析的，所以start值必定會有相同。
我想要求每個fixation經過幾個gyro值，並將該fixation.x乘上經過的gyro平均值。
例如：
（起點終點不一定會有gyro值，所以計算在這時間區間內的gyro值）
第1個fixation有第2.3.4.5個gyro值；
第2個fixation有經過第8.9個gyro值。

實在是程式新手，麻煩各位給予一些指導，謝謝。


--","R_Language"
"1282","M.1476159501.A.F01","Ryomaa","問題","無法安裝package",2016-10-11 12:18:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
[問題敘述]:
抱歉剛開始學習使用R
在安裝package時出現連線問題
查了rseek.org都是說將防火牆關掉
以及在設定改CRAN mirrors位置，也都改過

[程式範例]:
在更改mirrors出現> chooseCRANmirror()Warning: failed to download mirrors file (無法開啟 URL
'https://cran.r-project.org/CRAN_mirrors.csv');using local file
'C:/PROGRA~1/R/R-33~1.1/doc/CRAN_mirrors.csv'
Warning message:
In download.file(url, destfile = f, quiet = TRUE) :
  InternetOpenUrl 失敗: '無法解析伺服器名稱或位址'> utils:::menuInstallPkgs()Warning: unable to access index for repositoryhttp://cran.csie.ntu.edu.tw/src/contrib:無法開啟 URL 'http://cran.csie.ntu.edu.tw/src/contrib/PACKAGES'Warning: unable to access index for repositoryhttp://www.stats.ox.ac.uk/pub/RWin/src/contrib:無法開啟 URL 'http://www.stats.ox.ac.uk/pub/RWin/src/contrib/PACKAGES'Error in install.packages(NULL, .libPaths()[1L], dependencies = NA, type =
type) :
  no packages were specified

[環境敘述]:
R version 3.3.1 (2016-06-21)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.3.1


請大大救命，查了好久都完全沒有頭緒。
謝謝

--","R_Language"
"1283","M.1476105327.A.0BE","s1001326","問題","如何自動生成data.frame?",2016-10-10 21:15:25,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請問怎麼一次生成多個dataframe，想用迴圈生成一次自動生成多個檔案，但是發現不太能行，小弟想請問一下如何一次生成多個檔案，先謝謝各位大大[程式範例]:[關鍵字]:--","R_Language"
"1284","M.1476088537.A.E0A","celestialgod","問題","Re: 先分組後迴圈",2016-10-10 16:35:33,NA,NA,"※ 引述《mdmdmdmd (bluebubble)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: 新手(沒寫過程式，R 是我的第一次): 抱歉又來打擾各位板友，再次麻煩各位了: [問題敘述]:: 首先我有先做出一個function功能是抽出一個n位數，每一位數都從1到4所組成。: 然後我想要每次做完都判斷是否這個n位數有含1，2，3，4的每個數。最後再抽1000個n位: 數跟判斷有沒有含。: 我覺得應該可以在一個function內完成，只是我資質駑鈍，都想不出來QQ: [程式範例]:: g<-function(m){:   for(s in 1:m){:     A<-"""":     A<-sample(1:4,1,replace=TRUE):     if(A==1) A<-""T"";:     if(A==2) A<-""R"";:     if(A==3) A<-""U"";:     if(A==4) A<-""E"";:     f<-print(A):     }:   }: g(6): any(g(6)%in%c(""T"",""R"",""U"",""E""))g <- function(replicate, n){
  sapply(rep(n, replicate), function(m){
    all(table(factor(sample(1:4, m, TRUE), levels = 1:4))) > 0
  })
}
g(1000, 6) # 1000個6位數有沒有包含1~4

或是

g <- function(replicate, n){
  sapply(rep(n, replicate), function(m){
    all(as.character(1:4) %in% names(table(sample(1:4, m, TRUE))))
  })
}
g(1000, 6)

理應第二個會比較快，用factor會比較慢: 這是我目前做出來的成果，另外想請問有沒有甚麼R語言的社團看置底文

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1285","M.1476083191.A.ACB","mdmdmdmd","問題","先分組後迴圈",2016-10-10 15:06:28,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

新手(沒寫過程式，R 是我的第一次)
抱歉又來打擾各位板友，再次麻煩各位了


[問題敘述]:
首先我有先做出一個function功能是抽出一個n位數，每一位數都從1到4所組成。
然後我想要每次做完都判斷是否這個n位數有含1，2，3，4的每個數。最後再抽1000個n位
數跟判斷有沒有含。

我覺得應該可以在一個function內完成，只是我資質駑鈍，都想不出來QQ

[程式範例]:
g<-function(m){
  for(s in 1:m){
    A<-""""
    A<-sample(1:4,1,replace=TRUE)
    if(A==1) A<-""T"";
    if(A==2) A<-""R"";
    if(A==3) A<-""U"";
    if(A==4) A<-""E"";
    f<-print(A)
    }
  }
g(6)
any(g(6)%in%c(""T"",""R"",""U"",""E""))

這是我目前做出來的成果，另外想請問有沒有甚麼R語言的社團
非常感謝各位^^

--","R_Language"
"1286","M.1475850535.A.DA6","yu8861213","問題","Re: for 迴圈",2016-10-07 22:28:53,NA,NA,"※ 引述《mdmdmdmd (bluebubble)》之銘言：: [問題類型]:迴圈語法: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): 對不起，我真的很不熟才剛學幾天，感謝您們的幫忙: [問題敘述]:我做了一個迴圈，可是他跑出來的值都是NULL，我不知道哪裡出了錯: K是要做100次的意思: p是每次抽樣的結果: W是把p的值(1,0)給加起來: 然後我的目的是想把第1次到第100次的值顯現出來: [程式範例]:: http://imgur.com/a/hISLE: [關鍵字]:forloop語法Hi, 你的意思是這樣嗎？？

library(pipeR)
result <- 1:100 %>>% sapply(function(x){
  sample(c(1,0),365,T,c(0.01,0.99)) %>>% sum %>>%
    (~cat('第',x,'次的和是',.,'\n'))
})

--","R_Language"
"1287","M.1475847112.A.D6B","celestialgod","問題","Re: 單一y值針對每兩個欄位去計算lm",2016-10-07 21:31:49,NA,NA,"※ 引述《girl5566 (5566520)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想嘗試將所有的X組合跟Y進行lm計算，目前不太清楚何種方式較有效率: 是否應該要用平行處理!?: [程式範例]:: fun <- function(x) coef(lm(paste0(""y ~ "", paste(x, collapse=""+"")),:           data=iris))[2]: combn(names(iris[1:4]), 2, fun): [環境敘述]:: Win7 64 bit , R 3.2.2: [關鍵字]:最快的方法：

library(Rcpp)
library(RcppArmadillo)
library(RcppParallel)

sourceCpp(code = ""
// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
using namespace Rcpp;
using namespace arma;
// [[Rcpp::depends(RcppParallel)]]
#include <RcppParallel.h>
using namespace RcppParallel;

struct coef_compute: public Worker {
  const mat X;
  const vec& y;
  const umat& combnMat;
  mat& coefMat;
  coef_compute(const mat& X, const vec& y, const umat& combnMat,mat& coefMat):
    X(X), y(y), combnMat(combnMat), coefMat(coefMat) {}
  void operator()(std::size_t begin, std::size_t end)
  {
    for (uword i = begin; i < end; i++)
    coefMat.row(i) = solve(join_rows(ones<vec>(y.n_elem),
                           X.cols(combnMat.col(i))), y).t();
  }
};


// [[Rcpp::export]]
List fastCoef_allCombns(arma::vec y, arma::mat x, int k)
{
  Rcpp::Function combn_rcpp(\""combn\"");
  umat combnMat = conv_to<umat>::from(as<mat>(combn_rcpp(x.n_cols, k))) - 1;
  mat coefMat = zeros<mat>(combnMat.n_cols, k + 1);
  coef_compute coefResults(x, y, combnMat, coefMat);
  parallelFor(0, combnMat.n_cols, coefResults);
  return List::create(combnMat.t() + 1, coefMat);
}"")

n <- 30
X <- matrix(rnorm(120), n)
coefs <- c(2, 5, -7, 8, 0.5)
y <- as.vector(cbind(1, X) %*% coefs) + rnorm(n, 0, 5)

outRes <- lapply(1:ncol(X), function(i){
  fastCoef_allCombns(y, X, i)
})

outRes[[2]]
# # 哪些X的組合
# [[1]]
#      [,1] [,2]
# [1,]    1    2   # X1 跟 X2的組合
# [2,]    1    3
# [3,]    1    4
# [4,]    2    3
# [5,]    2    4
# [6,]    3    4
#
# # 每一個組合的X，其係數，BY列去看
# [[2]]
#           [,1]      [,2]       [,3]
# [1,] 0.4210033  6.445250 -7.5248928
# [2,] 0.7895878  7.378273  8.7397441
# [3,] 0.6180885  6.864235  0.9617974
# [4,] 2.6213473 -6.677914  6.3579295
# [5,] 2.3471788 -7.834296  1.4096750
# [6,] 2.9802756  8.212602  0.9764216


# benchmark
n <- 3000; p <- 10
X <- matrix(rnorm(n*p), n)
coefs <- sample(-10:10, p+1, TRUE)
y <- as.vector(cbind(1, X) %*% coefs) + rnorm(n, 0, 5)

st <- proc.time()
outRes <- lapply(1:ncol(X), function(i){
  fastCoef_allCombns(y, X, i)
})
proc.time() - st
# user  system elapsed
# 0.14    0.08    0.07

st <- proc.time()
outRes2 <- lapply(1:ncol(X), function(i){
  combnMat <- combn(1:ncol(X), i)
  return(list(t(combnMat), t(apply(combnMat, 2, function(v){
    coef(lm(y ~ X[,v]))
  }))))
})
proc.time() - st
# user  system elapsed
# 3.57    0.19    3.56


快沒很多啦，快50倍而已

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1288","M.1475800558.A.8DD","girl5566","問題","單一y值針對每兩個欄位去計算lm",2016-10-07 08:35:56,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想嘗試將所有的X組合跟Y進行lm計算，目前不太清楚何種方式較有效率

是否應該要用平行處理!?

[程式範例]:

fun <- function(x) coef(lm(paste0(""y ~ "", paste(x, collapse=""+"")),

          data=iris))[2]

combn(names(iris[1:4]), 2, fun)

[環境敘述]:

Win7 64 bit , R 3.2.2

[關鍵字]:


--","R_Language"
"1289","M.1475762687.A.24A","celestialgod","問題","Re: 迴圈整理資料",2016-10-06 22:04:43,NA,NA,"下面有幫你把程式修成能跑的，不過我還是推薦我的解法

我的解法：

library_mul <- function(..., lib.loc = NULL, quietly = FALSE,
                        warn.conflicts = TRUE){
  pkgs <- setdiff(sapply(as.list(substitute(list(...))),as.character),""list"")
  if (any(!pkgs %in% installed.packages()))
    install.packeges(pkgs[!pkgs %in% installed.packages()])
  invisible(sapply(pkgs, library, character.only = TRUE, lib.loc = lib.loc,
            quietly = quietly))
}
library_mul(pipeR, data.table)

DT_list <- list.files(""E:/"", pattern = ""\\.txt"") %>>% lapply(fread) %>>%
  lapply(function(dt) setnames(x, LETTERS[1:8]))

colSumsRes <- lapply(DT_list, colSums)
colMeansRes <- lapply(DT_list, colMeans)※ 引述《eegame (yu)》之銘言：: 目前程式執行之後: 可以將資料讀入D1~D10: 以及開ND1~ND10的矩陣: 但是在數據計算方面出了問題: for(i in 1:n){:   for(j in 2:8){:   F <- paste(""ND"", i, ""[1]"", sep=""""):   FF <- paste(""D"", i, ""[1]"", sep="""")# 改成下面這樣
   assign(F[1], colSums(get(FF[1])))    #ND[i][1] <- colSums(D[i][1])
   assign(F[j], colMeans(get(FF[j])))    #ND[i][j] <- colMeans(D[i][j]):   }: }--

我絕對不是來show我的library_mul XDD

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1290","M.1475722201.A.A6E","eegame","問題","迴圈整理資料",2016-10-06 10:49:58,NA,NA,"[問題類型]:迴圈應用程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
整理10筆資料
每筆資料有10000組數據
將10筆txt讀入D1~D10
根據""A"",""B"",""C"",""D"",""E"",""F"",""G"",""H""欄位計算
把計算結果分別存入ND1~ND10
最後想把ND1~ND10的計算結果合併輸出成txt
程式如下
n <- 10   #有10個txt
for(i in 1:n){
  DATA <- paste(""E:/ _"", i, "".txt"", sep="""")   #讀檔案名字
  D <- paste(""D"",i, sep="""")   #存數據
   assign(D, read.table (DATA, header=T))   #把數據讀入D
  ND <- paste(""ND"",i, sep="""")   #開新矩陣放計算好的數據
  rowname <- c(1:1) #Y軸名稱
  length(rowname)
  colname <- c(""A"",""B"",""C"",""D"",""E"",""F"",""G"",""H"") #X軸名稱
  length(colname)
  assign(ND, matrix(nrow=length(rowname), ncol=length(colname) ,dimnames=list(
rowname,colname)))
}
目前程式執行之後
可以將資料讀入D1~D10
以及開ND1~ND10的矩陣
但是在數據計算方面出了問題
for(i in 1:n){
  for(j in 2:8){
  F <- paste(""ND"", i, ""[1]"", sep="""")
  FF <- paste(""D"", i, ""[1]"", sep="""")
  assign(F[1], colSums(FF[1]))    #ND[i][1] <- colSums(D[i][1])
  assign(F[j], colMeans(FF[j]))    #ND[i][j] <- colMeans(D[i][j])
  }
}
這個迴圈裡面paste存的D1及ND1無法去連接數據與矩陣
導致assign中的colSums和colMeans無法計算
希望各位前輩可以指點
拜託拜託


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:迴圈 資料整理

--","R_Language"
"1291","M.1475595030.A.08F","fantasywater","問題","取出 levels",2016-10-04 23:30:28,NA,NA,"[問題類型]:

基本取值

[軟體熟悉度]:

入門

[問題敘述]:

請問一下，我有個變數 print 出來如下> predictions150
virginica
Levels: setosa versicolor virginica


然後我把他指定給另一個變數

a <- predictions


結果 a 印出來卻是 3，想問一下，我要怎麼把 virginica 存到 a 然後印出來

也是 virginica ..?






--","R_Language"
"1292","M.1475569846.A.5BE","cywhale","問題","以helmert coding做dummy variables給RDA",2016-10-04 16:30:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)query ?model.matrix 用contr.helmert來處理類別變數，所得到的dummy variables
應該是彼此正交 (orthogonal) 但試驗過程中不必然如此，以?model.matrix 提供的例
子的確是得到正交的結果，但下方範例則未必(只有tb接近，ta, tc則沒有)

不知道是不是自己哪裡搞錯?? 剛去翻Numerical ecology with R 書中也是這樣處理
dummy variables, 只是沒提到model.matrix出來的結果是否彼此正交

一般的連續變數彼此相關，但還是可以做為RDA(比如vegan::rda())的解釋變數，但
dummy variables如果彼此存在相關性，不知道是否適當?...
請教各位，謝謝！


[程式範例]:library(data.table)dta <- fread('2 2 2 3 3 3 3 3 4 4 4 4 4 4 4 4 4 4 5 44 4 4 4 2 2 2 3 3 3 3 4 4 4 4 4 4 4 4 44 4 5 4 4 4 5 5 5 5 5 5 4 4 4 4 3 3 3 33 2 2 2 2 2 2 2 2 1 1 1 5 5 5 4 4 4 3 33 3 3 3 2 2 2 2 2 2 2 1 1 1 1 1 5 4 4 4') %>% unlist(use.names = F)dtb <- fread('3 4 4 2 1 2 1 4 2 5 3 4 2 2 2 1 2 5 1 21 3 2 4 3 3 1 1 4 4 2 5 5 3 2 1 4 5 4 54 1 4 2 1 1 2 1 2 3 4 3 3 5 2 1 1 5 1 42 1 3 2 4 1 3 4 1 5 4 2 4 3 3 1 5 1 2 23 5 2 2 1 1 2 4 1 5 5 1 5 4 4 3 4 4 3 3') %>% unlist(use.names = F)data <- data.frame(tsta=as.factor(dta),tstb=as.factor(dtb),tstc=as.factor(sample(1:5,100,replace=T)))ta <- model.matrix(~tsta, data, contrasts = list(tsta = ""contr.helmert""))cor(ta[,-1]) ########################################## collinear results######       tsta1       tsta2       tsta3       tsta4#tsta1  1.00000000 -0.26595995 -0.22219661 -0.09186113#tsta2 -0.26595995  1.00000000 -0.09463643 -0.03912485#tsta3 -0.22219661 -0.09463643  1.00000000 -0.13350694#tsta4 -0.09186113 -0.03912485 -0.13350694  1.00000000tb <- model.matrix(~tstb, data, contrasts = list(tstb = ""contr.helmert""))cor(tb[,-1])##################################### almost orthogonal######       tstb1      tstb2        tstb3        tstb4#tstb1 1.000000000 0.01192291  0.009193480  0.005885889#tstb2 0.011922914 1.00000000  0.076964759  0.049274704#tstb3 0.009193480 0.07696476  1.000000000 -0.004985713#tstb4 0.005885889 0.04927470 -0.004985713  1.000000000tc <- model.matrix(~tstc, data, contrasts = list(tstc = ""contr.helmert""))cor(tc[,-1]) ##################################### collinear######      tstc1       tstc2       tstc3       tstc4#tstc1 1.00000000  0.14295322  0.10340384  0.07009347#tstc2 0.14295322  1.00000000 -0.03144958 -0.02131846#tstc3 0.10340384 -0.03144958  1.00000000 -0.03976866#tstc4 0.07009347 -0.02131846 -0.03976866  1.00000000tt <- model.matrix(~tsta, data)cor(tt[,-1]) ### binary coding produce also non-orthogonal results[關鍵字]:選擇性，也許未來有用--","R_Language"
"1293","M.1475515640.A.DA6","chrisli7","問題","(已更新)將多個Function輸出的內容整理成矩陣",2016-10-04 01:27:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

各位前輩好，因為自學R，見識可能短淺，實在想不出方法，
希望前輩可以提供想法，謝謝！

我目前遇到的問題是，我目前有寫幾個Function，然後把資料集丟入，
在source區裡面，寫成以下的方式：
function1(data1)
function1(data2)
function2(data3)
.
.
function3(data7)

如果達成if條件，會return出一個矩陣，
不知道是否有辦法自動讓這些判斷出來的矩陣，
能夠用rbind的方式或是其他方式堆疊成一個新的矩陣呢？

我用的方式是，先建立一個空矩陣，
我在function中最後寫這個
newmatrix <- rbind(newmatrix,df3[,criteria])
就是希望能夠在function執行完後可以重新覆寫我設立的矩陣讓他跑完，
可是實際上第一個function執行完後跑出的newmatrix並不會真的改變。
我在Console中打newmatrix，跑出來仍都是NA。

很抱歉我的觀念也許不足，想請前輩們指點，謝謝！！
因為我的function有點多，PO上來解釋也會搞得很複雜，若有前輩需要我再補上，
謝謝！！

--------------------------------------------------------

謝謝前輩！不好意思剛下班現在才回。
以下是其中一個Function，會這樣寫是因為資料裡面是複選題，
其他若還有需要補充解釋的煩請告訴我，我會盡快回答當時為何這麼寫的。
我是用子集跟原本的資料集做比較，跑出一個criteria去選要return的資料
(上述的if條件我已經修改掉了)

occupation <- function(x){
  student<-x %>%
    filter(grepl(""學生"",occupation)) %>%
    nrow()
  salaryman<-x %>%
    filter(grepl(""上班族"",occupation)) %>%
    nrow()
  housekeeper<-x %>%
    filter(grepl(""家管"",occupation)) %>%
    nrow()
  turist<-x %>%
    filter(grepl(""觀光客"",occupation)) %>%
    nrow()
  others<-x %>%
    filter(grepl(""其他"",occupation)) %>%
    nrow()
  sum <- sum(student,salaryman,housekeeper,turist,others)
  percentage <- round((c(student,salaryman,housekeeper,turist,others)/sum),digits = 4)
  df1 <- matrix(c(""學生"",""上班族"",""家管"",""觀光客"",""其他"",student,salaryman,housekeeper,turist,others,percentage),nrow = 3,ncol = 5,byrow = T)

  student <- tasty %>%
    filter(grepl(""學生"",occupation)) %>%
    nrow()
  salaryman <- tasty %>%
    filter(grepl(""上班族"",occupation)) %>%
    nrow()
  housekeeper <- tasty %>%
    filter(grepl(""家管"",occupation)) %>%
    nrow()
  turist <- tasty %>%
    filter(grepl(""觀光客"",occupation)) %>%
    nrow()
  others <- tasty %>%
    filter(grepl(""其他"",occupation)) %>%
    nrow()
  sum <- sum(student,salaryman,housekeeper,turist,others)
  percentage_tasty <- round((c(student,salaryman,housekeeper,turist,others)/sum),digits = 4)
  difference_of_percentage <- percentage - percentage_tasty
  index <- percentage*difference_of_percentage
  df3 <- rbind(df1,difference_of_percentage,index)
  rownames(df3) <- c(""名稱"",""次數"",""比例"",""與母體比例差"",""指數"")
  criteria <- df3[4,] >= 0.015
  new_matrix <- rbind(new_matrix,t(df3[,criteria]))
  return(new_matrix)
  }

以下是跑出的結果> occupation(bike)名稱     次數 比例   與母體比例差 指數
[1,] NA       NA   NA     NA           NA
[2,] ""學生""   ""8""  ""0.32"" ""0.1472""     ""0.047104""
[3,] ""觀光客"" ""1""  ""0.04"" ""0.0189""     ""0.000756""
[4,] ""其他""   ""3""  ""0.12"" ""0.0795""     ""0.00954""

但是這個表格沒有辦法堆疊越來越多，再按別的function又會重跑> occupation(bus)名稱   次數 比例     與母體比例差 指數
[1,] NA     NA   NA       NA           NA
[2,] ""學生"" ""19"" ""0.2262"" ""0.0534""     ""0.01207908""


請問前輩我該怎麼寫呢？感激不盡！！





--","R_Language"
"1294","M.1475476850.A.802","clansoda","問題","Shiny Download",2016-10-03 14:40:46,NA,NA,"我目前遇到一個很奇怪的問題，我按下shiny app的download file以後

就會pop out出一個一模一樣的app 視窗 等於是無限鬼打牆

在按一次就會出現多一個視窗，而不是讓你選擇路徑的視窗

這是我的shiny app codehttp://pastebin.com/rijUAU15server的部分有點長，我怕有一些因素在裡面所以我全部貼上來

我output$downloadfile那段完全是擷取自我其他shiny app的

另外一個APP在chrome上面開啟以後點download按鈕可以順利下載

但是這個不行，有有經驗的板友可以幫我解惑嗎?

--","R_Language"
"1295","M.1475422868.A.B3C","amygm307","問題","shiny上傳jsonline檔案",2016-10-02 23:41:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:想做的事情是可以透過shiny做出的介面上傳json line的檔案透過我的程式整理之後輸出csv檔原本讀json line檔 整理 最後輸出csv如下http://ideone.com/tAnZTD我參照shiny gallery上傳csv的方法還沒有寫進整理data的部分ui.rhttp://ideone.com/ERby9Wui.serverhttp://ideone.com/D2seDo最後出現的錯誤碼如下Listening on http://127.0.0.1:7552Warning: Error in UseMethod: no applicable method for 'xtable' applied to anobject of class ""function""Stack trace (innermost first):79: <Anonymous>78: do.call77: origRenderFunc76: output$contents1: runApp請教各位大大了感激不盡--","R_Language"
"1296","M.1475362758.A.A3F","Paclitaxel","問題","安裝 R 和 RStudio 的幾個問題",2016-10-02 06:59:08,NA,NA,"[問題類型]:
安裝諮詢
程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
在 2009 年中 Macbook Pro (Mac OS 10.11.6)
安裝完 R (3.3.1) 和 RStudio (0.99.903) 後
打開程式都會出現

During startup - Warning messages:1: Setting LC_CTYPE failed, using ""C""2: Setting LC_COLLATE failed, using ""C""3: Setting LC_TIME failed, using ""C""4: Setting LC_MESSAGES failed, using ""C""5: Setting LC_MONETARY failed, using ""C""[R.app GUI 1.68 (7238) x86_64-apple-darwin13.4.0]WARNING: You're using a non-UTF8 locale, therefore only ASCII characters willwork. Please read R for Mac OS X FAQ (see Help) section 9 and adjust yoursystem preferences accordingly.[History restored from /Users/xxxxxxx/.Rapp.history]



然後想要安裝一些套件比如 ggplot2 和 swirl 時
安裝完要載入時會出現：http://paste.plurk.com/show/2441693/這會跟我是使用中文的 Mac 有關嗎？

[程式範例]:


[關鍵字]:套件, 安裝--

--","R_Language"
"1297","M.1475342907.A.22E","ray333john","問題","Re: 用RStudio都會碰到invalid multibyte",2016-10-02 01:28:23,NA,NA,"小弟也是R的新手，一樣被這個問題困擾很久

但是剛剛經過i大推文提點，再上網查終於解決問題

一樣照i大所說，先輸入Sys.getenv(""R_USER"")，去確認

是否有中文變亂碼，經過確認發現windows預設的個人資料

夾名稱顯示為亂碼，如果只是輸入getwd()或setwd()去改目錄名稱

是無法查覺或解決RStudio辨識中文路徑的問題的，解決方法可

以參照https://www.pcsetting.com/windows/3去更改個人資料夾路

徑位置設定，路經不要有中文，或直接還原成預設值，經測試我的

RStudio已經可以正常運作，雖然不懂其原理有點誤打誤撞，還是希望

我的個案也適用其他有此困擾的人，提供給你參考

--","R_Language"
"1298","M.1475324361.A.C52","clansoda","問題","Re: for 迴圈",2016-10-01 20:19:18,NA,NA,"Hi，我很少用sample這個function，所以我不知道你要的東西是什麼

但是你要做的是下面這件事情嗎?

 SumVector <- vector()

  for ( i in 1 : 100 ) {
    c (SumVector, sum ( sample(1:100,10) ) ) -> SumVector
  }

print(SumVector)


--","R_Language"
"1299","M.1475317065.A.CCD","mdmdmdmd","問題","for 迴圈",2016-10-01 18:17:42,NA,NA,"[問題類型]:迴圈語法
[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

對不起，我真的很不熟才剛學幾天，感謝您們的幫忙
[問題敘述]:我做了一個迴圈，可是他跑出來的值都是NULL，我不知道哪裡出了錯

K是要做100次的意思

p是每次抽樣的結果

W是把p的值(1,0)給加起來

然後我的目的是想把第1次到第100次的值顯現出來

[程式範例]:http://imgur.com/a/hISLE[關鍵字]:forloop語法

--","R_Language"
"1300","M.1475023262.A.5A1","clansoda","問題","Re: 類別型迴歸 畫出預測線方法 請教",2016-09-28 08:40:58,NA,NA,"我看起來的話你這個好像不是回歸吧

你只是單純地想把每個觀測值根據X軸由左到右連起來

可以用這個方法

library(ggplot2)

ggplot(data=dat,aes(x,y))+geom_line()

至於顏色之類的參數你在自己去?geom_line裡面慢慢參考一下

------------------------------------我是分隔線

如果你的方向性不顯示的話，看來你只想告訴報表的讀者

每個值的預測值分布在Y軸的範圍對吧，看來是有點奇怪

不過你把順序弄成interger的向量，預測值弄成另外一個向量然後合併

例如 dat <- data.frame ( order = 1:10 , value = sample (1:100,10) )

這樣你會得到一個有兩個向量的dataframe

library(ggplot2)

ggplot (data = dat , aes(x,y) ) + geom_point(color = red)

+geom_line(color = blue) + scale_x_continuous(breaks = seq(1,10,by=1))

大概可以弄出你想要的感覺，如果X軸與Y軸你想調整，就去翻scale_x or y_con

tinuous 這兩個function的manual去找參數來修改。

--","R_Language"
"1301","M.1474985132.A.847","loser113","問題","類別型迴歸 畫出預測線方法 請教",2016-09-27 22:05:29,NA,NA,"資料類型 X:類別(方向) Y:數量http://imgur.com/6grP2Mi使用方法 迴歸 LM

上網找的都是 X:數字 Y:數字 畫出預測線http://imgur.com/H98sw67想畫出順序+預測值(紅色字)圖型樣本分布http://imgur.com/0yn1FYt想要預測線(紅線我手動畫的沒畫完)http://imgur.com/PTgQzS7要問 這紅線怎麼畫 X軸順序就照資料順序

--","R_Language"
"1302","M.1474858699.A.AB8","jklkj","問題","Re: 用RStudio都會碰到invalid multibyte",2016-09-26 10:58:17,NA,NA,"好奇問一下
目前我也遇到這個問題，但是我就算是重新安裝也無法解決
意思就是我連script都還沒開始寫
所以這樣的情形就只能跳到Linux嗎※ 引述《JackBaska (Baska)》之銘言：: 這個問題是我去年怒轉 Linux 的主因 , 我測試的結果是: 當你在RStudio裡面載入大量中文字元 big 5 的檔案後 ,: 即便有編碼設定 , 只要你對 Script 做存取動作便會發生: 發生後所有RStudio的功能會完全癱瘓 , 可以操作但基本: 上沒有任何意義: 一旦發生 , 只要你往後對該Script 做任何操作 , 特別: 是像跟Syntax 有關的 tab complete , 便會出現這個bug: 我猜是在存取時有些默認字元遇到 big 5 碼 , 產生無意: 義 , 但被誤以為指令的段落 , 造成直譯的parser crash: 我對 R 的整體架構還沒很全面的想法 , 所以是用猜的: 癱瘓當下解決方式::       Session -> Terminate R: 但該Script是否廢了 ? 好險還沒有 , 我有試出一個依舊: 能執行該Script的方式 , 只要你叫出該Script , 不要做: 任何動作 , 直接全選貼到新開的 Script , 但切記不要把: 新Script做存檔動作 , 否則該問題會重新出現 , 只要不: 存檔 , 你依舊可以自由操作該 Script: 環境編碼::      Tools -> Global Option -> General: BTW , 改環境編碼對處理這個問題沒有幫助 , 問題不是: package 是script 本身 , 目前經驗是有載入中文檔案: 有中文註解 或是有屬性名是中文 , 在 Windows都會有機: 會發生 , 且只要一旦在存取Script發生 , 該Script就: 會一直發生: 這問題我剛遇到有考慮要回報 , 但RStudio的crash support: 那時候翻寫 ""Only for Mac/Linux"" 我就沒回報了 , 整體來: 說 , 是 Windows RStudio 的問題 不是 R的問題: 希望對你有幫助: 方便的話可以把標題改成方便遇到的人查詢::         ""invalid multibyte"": ============原始可能遇到的 erro================: invalid multibyte character in parser at line 1: invalid multibyte string, element 1: ===============================================: ※ 引述《jjx66os ()》之銘言：: : [問題敘述]:: : 之前都是在Mac筆電上編寫R: : 最近有些程式運算比較複雜些，改用Windows的桌機執行: : 不過當我打開RStudio，進行像是下載package的時候: : 都會碰到Error in nchar(homeDir) : invalid multibyte string, element 1: : 這樣的訊息: : 我的安裝路徑資料夾都是英文的，安裝位置也在預設的地方: : 但只要先執行Sys.setlocale(category = ""LC_ALL"", locale = ""us""): : 就沒問題了，不過關掉後下次再打開還是會有這樣的問題: : 請問如何讓Sys.setlocale(category = ""LC_ALL"", locale = ""us"")成為我的設定值呢?: : 找不到RStudio設定預設編碼的地方: : 或者有沒有其他的解決方法呢???: : 我的系統為Windows10專業版，R 3.2.5，RStudio應為最新版。--","R_Language"
"1303","M.1474814618.A.790","linkpon5566","問題","Rstudio與rmarkdown的一些問題",2016-09-25 22:43:35,NA,NA,"[問題類型]:
基礎操作

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:


大家好


在學校剛學R沒幾天   目前是在學
Rstudio中使用  rmarkdown編輯pdf   遇到的一些問題....





Q1:請問 TeX  LaTeX   MiKTeX   之間的關係是??

老師明明叫我們""裝MiKTeX""
有時候言談間卻又夾雜LaTeX

EX:某些錯誤出現後   就說是LaTeX版本不夠新之類的

有google過  但相關基礎知識貧乏   還是一知半解


GOOGLE後 我的理解:

TeX是排版軟體   LaTeX是基於TeX開發出來
MiKTeX又基於TeX  LaTeX開發出來    所以包含前2者的語法??




Q2: 如何縮排會影響程式執行嗎??

我試著在Rstudio中用rmarkdowm 輸出繁體中文

用的方法如1F推文(系統不允許我打在文章裡...)


到了簡體中文的那一步都OK

繁體中文的那一步   卻無法成功knit出中文pdf



最後我改了開頭的縮排  居然成功輸出中文了....

差異如下(沒打出的部分都沒更動)


原:
output:
  pdf_document:
    includes:
    in_header: header.tex
  latex_engine: xelatex

出現錯誤:
Error in (function (toc = FALSE, toc_depth = 2, number_sections = FALSE,  :
  unused argument (in_header = ""header.tex"")
Calls: <Anonymous> -> create_output_format -> do.call -> <Anonymous>
停止執行



改了之後:
output:
  pdf_document:
    includes:
     in_header: header.tex
    latex_engine: xelatex


成功knit出繁體中文的pdf....


不知道這些問題會不會不符版旨

希望有人可以解惑...或是指引我一條明路...
或是告訴我教材自行閱讀QQ


謝謝大家



--","R_Language"
"1304","M.1474594114.A.394","cywhale","問題","Re: 關於一些shiny的問題",2016-09-23 09:28:32,NA,NA,"1. in server.R 可能是你要的方式？參考看看，若不是再討論..

output$load_new_data_but <- renderUI({
  fileInput('load_newdata', ...)

})


observeEvent(input$load_newdata,{
  if (is.null(input$load_newdata))
    return(NULL)

  isolate({xt <- input$load_newdat})

  df <- try( #read your data in xt$datapath here
            )

  ## then get your min/max value from dataframe, df
  ## assume out[1] <- YourMin; out[2] <- YourMax

  updateDateRangeInput(session, ""YourUIid"", start=out[1],end=out[2])
})

2. 我的DT::datatable打中文不會掛，不確定你的問題，也許是編碼問題？
可以試著用read.csv(,..encoding= ) 或其他轉編碼轉成UTF-8試看看再讓DT::datatable
吃進去

3. 沒用過shiny.io, 不過我若在自己的server很快disconnect掛掉，通常按F12
看console output message可以找到一些蛛絲馬跡※ 引述《clansoda (小笨)》之銘言：: 各位好，我最近正在學習怎麼寫一個shiny的簡單應用: http://pastebin.com/wnj4P7Xc 這是我的server.R: http://pastebin.com/XdEGQhjs 這是我的ui.R: 我的應用是想讓我們公司的人上傳csv檔: 來評估這段時間的銷售狀況: 我的第一個問題是，如果我想讓使用者上傳檔案以後: 接著讓server.R回傳這個檔案內的日期最小值與日期最大值: 給ui.R端告訴她datarangeInput的min跟max各位多少的話: 有這樣的function可以做到嗎? 我是看updateDateInput的manual: 可是我看不太懂這個是不是我要的那種: 第二個問題是我是用datatableOutPut的形式去輸出我的最後資料: 因為我看到這種輸出，他是會內建搜尋欄可以使用的，這樣可以找到要找的: 品項名稱，但是現在的問題是他只要鍵入中文立刻就會error: http://imgur.com/a/WWNuW 這是error的類型 我拿去google也沒得到類似的: 問題與回覆。因此我自己寫了一個textinput的格式來作為暫時的功能替代: 雖然功能一樣但是就多了好幾格: 第三個問題是我把這個shiny應用發布到shiny.io上面: 但是一開他就disconnect，這樣的問題是不是我的應用寫錯了什麼: 導致她一開就像是crush一樣立刻就斷掉了呢?: 這是我的shiny.io的網址  https://bonnyread.shinyapps.io/salessearch/: 先感謝各位的回覆--","R_Language"
"1305","M.1474533062.A.140","clansoda","問題","關於一些shiny的問題",2016-09-22 16:30:55,NA,NA,"各位好，我最近正在學習怎麼寫一個shiny的簡單應用http://pastebin.com/wnj4P7Xc這是我的server.Rhttp://pastebin.com/XdEGQhjs這是我的ui.R

我的應用是想讓我們公司的人上傳csv檔

來評估這段時間的銷售狀況

我的第一個問題是，如果我想讓使用者上傳檔案以後

接著讓server.R回傳這個檔案內的日期最小值與日期最大值

給ui.R端告訴她datarangeInput的min跟max各位多少的話

有這樣的function可以做到嗎? 我是看updateDateInput的manual

可是我看不太懂這個是不是我要的那種

第二個問題是我是用datatableOutPut的形式去輸出我的最後資料

因為我看到這種輸出，他是會內建搜尋欄可以使用的，這樣可以找到要找的

品項名稱，但是現在的問題是他只要鍵入中文立刻就會errorhttp://imgur.com/a/WWNuW這是error的類型 我拿去google也沒得到類似的

問題與回覆。因此我自己寫了一個textinput的格式來作為暫時的功能替代

雖然功能一樣但是就多了好幾格

第三個問題是我把這個shiny應用發布到shiny.io上面

但是一開他就disconnect，這樣的問題是不是我的應用寫錯了什麼

導致她一開就像是crush一樣立刻就斷掉了呢?

這是我的shiny.io的網址https://bonnyread.shinyapps.io/salessearch/先感謝各位的回覆



--","R_Language"
"1306","M.1474528028.A.A1F","haoshin","問題","R 執行VBA巨集",2016-09-22 15:07:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的因為受限於某個資料庫只能匯出資料在EXCEL，

而且它內建資料更新程式是寫在VBA裡，

無法透過R來更新(因為資料庫把連接資料庫的VBA程式碼鎖起來)，

因此我有寫了一個去執行更新資料的EXCEL巨集，

但想透過R來執行這個巨集，

想請問各位大神，是否有方法可以做到，

非常感謝。

[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1307","M.1474432642.A.0F7","celestialgod","問題","Re: 判斷資料值後做資料整理",2016-09-21 12:37:20,NA,NA,"※ 引述《amygm307 (簡單點ˇ)》之銘言：: 判斷B欄值為0的那一列，為整筆資料的第一列: 變成:   A   B: 1 1   0: 2 1   5: 3 3   na: 因為我每筆資料B為0的位置都不一樣: 目前想到的作法是用if去判斷df$B==0時回傳該值為第幾列: 然後再刪掉前面資料df[-i,]: 但是我不知道""回傳第幾列""應該怎麼寫: 拜託各位大大幫幫小妹ˊˋ: 一直找不到有用的解法1.

library(data.table)
dt <- data.table(A = c(1,1,1,1,1,3), B = c(3,1,2,0,5,NA))
dt[ , rn := .I][rn >= which(B == 0)]

2.
library(dplyr)
df <- data.frame(A = c(1,1,1,1,1,3), B = c(3,1,2,0,5,NA))
df %>>% mutate(rn = 1:nrow(.)) %>>% filter(rn >= which(B == 0))


--","R_Language"
"1308","M.1474380226.A.D6A","amygm307","問題","判斷資料值後做資料整理",2016-09-20 22:03:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想要判斷某一欄資料的第一筆為0的資料為全部資料的第一筆例如某變數 dfA   B1 1   32 1   13 1   24 1   05 1   56 3   na判斷B欄值為0的那一列，為整筆資料的第一列變成A   B1 1   02 1   53 3   na因為我每筆資料B為0的位置都不一樣目前想到的作法是用if去判斷df$B==0時回傳該值為第幾列然後再刪掉前面資料df[-i,]但是我不知道""回傳第幾列""應該怎麼寫拜託各位大大幫幫小妹ˊˋ一直找不到有用的解法--","R_Language"
"1309","M.1473949703.A.F2C","eri820503","問題","迴圈錯誤後繼續執行",2016-09-15 22:28:19,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

使用迴圈時，當發生錯誤或者在計算矩陣inverse發生singular時，
會自動停止在那層迴圈。

我想問的是，當這類情況發生時，有辦法自動執行下一層迴圈嗎?

舉例來說:

for(i in 1:100)
   {
      solve(matrix)   #舉例為解一個矩陣的inverse
   }

當i=50時發生錯誤，這時候R會自動停止
有辦法自動變成i=51嗎?
而不是當看到出現error時，手動去改成for(i in 51:100)


不知道有沒有人有相關經驗，謝謝!


[關鍵字]:

迴圈

--","R_Language"
"1310","M.1473931985.A.0F0","Laviathan","問題","ptt的常用語找不到下載的地方",2016-09-15 17:32:59,NA,NA,"https://goo.gl/HSrt0z這個網址內要抓ptt常用語時變成 404 not found了http://wubi.sogou.com/dict/cell.php?id=9182到這邊抓txt檔就是上面的抓檔的連結
words <- readLines(""http://wubi.sogou.com/dict/download_txt.php?id=9182"")當然也是404 not found

請問還有哪邊可以抓？

--","R_Language"
"1311","M.1473688978.A.1B9","Neisseria","問題","在 Windows 上使用 R 的經驗談",2016-09-12 22:02:55,NA,NA,"文章分類提示: 問題[問題類型]:經驗諮詢 (我想在 Windows 上使用 R，請問大家的經驗)[軟體熟悉度]:本身 Windows, Linux, OS X 都有使用過一段時間之前寫程式時主要是在 Linux 和 OS X，反而比較少用 Windows 寫程式使用 R 以直接使用現有的 CRAN 和 Bioconductor 的套件為主通常都只寫簡單的命令稿，不會寫 R 套件[問題敘述]:最近要購買筆電，想在 Dell XPS (Windows 10) 和 Macbook Pro Retina 中擇一較偏好 Windows 一點，因為現有的桌機是 Linux，應用軟體和遊戲較少但是沒有在 Windows 上跑 R 的經驗，不知道會不會有什麼問題最近要做的主題以 cancer biology and bioinformatics 為主，還不知道會用什麼套件如果小弟很有錢，也可以兩台都買，但是這樣會爆預算所以上來問問大家的意見[程式範例]:無[環境敘述]:無[關鍵字]:R for Windows--","R_Language"
"1312","M.1473610426.A.2A1","andrew43","問題","Re: jiebaR  針對文字檔讀取檔案處理",2016-09-12 00:13:43,NA,NA,"我不知道那是 bug 還是如何。
就用我習慣的方式寫一個例子。

str0 <- scan(""/somewhere/temp.txt"", ""character"", fileEncoding = ""big5"")
str1 <- paste0(str0, collapse = """")
mixseg <= str

另外，按你給的資料，不覺得用 readr::read_table() 是好方法，
改用 scan() 吧。※ 引述《wanson》之銘言：: 請問一下: 他的教學網站中提到""./temp.dat"": 可以load 檔案進去: 以下是他的說明: 支持<U+5BF9>文件<U+8FDB>行分<U+8BCD>：: cc[""./temp.dat""]  ### 自<U+52A8>判<U+65AD><U+8F93>入文件<U+7F16><U+7801>模式，默<U+8BA4>文件<U+8F93>出在同目<U+5F55>下。: ## segment( ""./temp.dat"" , mixseg ): 英文說明: You can pipe a file path to cut file.: cutter <= ""./temp.dat""  ### Auto encoding detection.: ## OR segment( ""./temp.dat"" , cutter ): 很奇怪的是我自己怎樣嘗試都無法成功: 這是我自己的目錄: setwd(""C:/SASMACRO/data/F2+Blank""): mixseg <= ""./temp.dat"": 另外我如果使用read_table 去讀取txt檔案，如果檔案內只有簡單的幾個字: 讀檔可以成功: 但如果檔案有點大，而且一開始很多分行: 就會失敗: 例如下列的檔案 (temp.txt): https://www.dropbox.com/s/wdwgk8t64xgrlu9/temp.txt?dl=0: 怎樣也都無法讀進去: 想請教一下版上的高手: 謝謝--","R_Language"
"1313","M.1473474479.A.E49","tus","問題","Rjags Multinomial prior distr.",2016-09-10 10:27:55,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者

[問題敘述]:

想要利用rjags (JAGS) 來建一個Bayesian Mixture model
其中 theta 的 prior distribution 想要設定成multinomial distribution

本身對jags沒有很熟 這個code是我老闆寫的 跑不出來丟給我
看了一個星期 解決不了他的問題
他認為是 在jags中 prior 不能是multinomial distribution
但我已經試過一些幾單的例子 prior 可以是multinomial distribution
但還沒想到辦法解決這個程式裡的問題


[程式範例]:
程式碼http://ideone.com/X6TlGM錯誤訊息

Error in jags.model(""mixturemodel4.bug"", data = dataList,
        inits = initsValues,  :  Error in node theta
Unable to find appropriate sampler

謝謝

--","R_Language"
"1314","M.1473440420.A.9C0","celestialgod","分享","sparklyr",2016-09-10 01:00:16,NA,NA,"[關鍵字]: sparklyr

[出處]:http://spark.rstudio.com/index.html[重點摘要]:

煩請移駕到我的部落格觀看：https://goo.gl/3nkJNl最近花了點時間研究Spark

終於研究到了一個段落

回來研究一下自己最愛的R

而且又看到rstudio釋出了sparklyr就手癢想說試試看了

於是就有這篇心得了XD


只是我還沒去測試machine learning相關的東西

就留給其他人慢慢賞玩了

--","R_Language"
"1315","M.1473234992.A.2CE","f496328mm","問題","MLE 做 聯立方程式 估計 (已解決)",2016-09-07 15:56:29,NA,NA,"聯立方程式 or system equation

用MLE去做  我目前只會做一條equation的MLE

我目前上網找的只能做到一條equation的MLE估計
目前code如下:
#==========================================
library(stats4)
set.seed(1001)
N <- 100

x <- runif(N)
y <- 5 * x + 3 + rnorm(N)

LL <- function(beta0, beta1, mu, sigma) {
# Find residuals
#
R = y - x * beta1 - beta0
#
# Calculate the likelihood for the residuals (with mu and sigma as parameters)
#
R = suppressWarnings(dnorm(R, mu, sigma))
#
# Sum the log likelihoods for all of the data points
#
-sum(log(R))
}
fit <- mle(LL, start = list(beta0 = 3, beta1 = 1, mu = 0, sigma=1))
summary(fit)
#==========================================
R = y - x * beta1 - beta0
這是我的一條equation

我目前只會做到一條

如果要做一條以上，要如何做?

#=========================================
另外我也有找到這個package   ""systemfit""

它可以一次做兩個以上的迴歸

不過   我的理解是  他是分開做的

因為我分別用lm去做   估計出來的參數也一樣

所以沒什麼意義    可能是我理解錯誤

不知道這個函數的用意是什麼


謝謝

--","R_Language"
"1316","M.1473137428.A.C83","lenofire",NA,"K-mean center設定",2016-09-06 12:50:25,NA,NA,"想問如何找到Center 最佳解？

--","R_Language"
"1317","M.1472728842.A.ED1","andrew43","分享","multcomp 及 multcompView 套件分享",2016-09-01 19:20:39,NA,NA,"1. 套件名稱：

multcomp_1.4-6
multcompView_0.1-7

2. 套件主要用途：

multcomp 的主要工作是：
在建立模型後，
利用調整某因子的編碼，
達到特定的對比組合或所有兩兩對比（即事後比較）。
其中可選用不同的 p-value 校正方式。

multcompView的主要工作是：
所有兩兩對比完成後，
利用所截取出的 p-value 或是否顯著的 boolean 值自動進行分群，
分群的結果是給予各組 abcde……之類的分群編碼。

3. 套件主要函數列表：

a. multcomp::glht()
   在模型中套用特定的對比組合或所有兩兩對比
b. multcompView::multcompLetters()
   按 p-value 或是否顯著 boolean 進行分群

4. 分享內容：

## 建立一個 one-way Poisson regression 模型
## TRT 為自變數，共四組，平均分別為 1、1.01、2、4
dt <- data.frame(
  FREQ = c(rpois(10, 1), rpois(10, 1.01), rpois(10, 2), rpois(10, 4)),
  TRT = gl(4, 10, labels = c(""GroupA"", ""GroupB"", ""GroupC"", ""GroupD""))
)
poisson.model <- glm(FREQ ~ TRT, data = dt, family = poisson)

######## CASE 1

## 利用 multcomp::glht() 進行自己設計的
## (GroupB - GroupC = 0)
## (GroupD - GroupA = 1)
## (GroupC = 0)
## 三組對比與檢驗，並未考慮 p-value 校正
## 如果想採用更複雜的對比，例如 A-(B+C)/2 = 0，請見 help(glht)
## 如果模型中有其它自變數，會一併納入考慮，並改變指定因子的對比
poisson.model.p1 <- glht(
  poisson.model,
  linfct = mcp(TRT = c(
    ""GroupB - GroupC = 0"",
    ""GroupD - GroupA = 1"",
    ""GroupC = 0""
  ))
)
summary(poisson.model.p1)


######## CASE 2

## 利用 multcomp::glht() 達到所有兩兩事後比較
## 注意！經驗告訴我此時 TRT 的組別名稱不要有 space 或怪怪的字符，
## 純英數最好，不然會卡關
poisson.model.pairwise <-
  glht(poisson.model, linfct = mcp(TRT = ""Tukey""))

## 配合 Bonferroni p-value 校正
## 校正選項可另見 help(p.adjust)
poisson.model.pairwise.summary <-
  summary(
    poisson.model.pairwise, test = adjusted(""bonferroni"")
  )
print(poisson.model.pairwise.summary)

## 把已校正的 p-value 截取出來
p.vals <- poisson.model.pairwise.summary$test$pvalues

## 注意！p.vals 的名字不要有 space 或怪怪的字符，純英數最好，不然會卡關
## 組和組之間只有一個 ""-"" 來隔開就好
names(p.vals)
names(p.vals) <- gsub("" "", """", names(p.vals))
names(p.vals)

## 利用 multcompView() 以 p < 0.05 進行分群
multcompLetters(p.vals)

## 利用 multcompView() 以 p < 0.01 進行分群
## 此時輸入的是 boolean
multcompLetters(p.vals < 0.01)

## 同上，但藉由改變 threshold
multcompLetters(p.vals, threshold = 0.01)


5. 備註
a. multcomp 和 multcompView 都是可以獨立進行的，不相依。
   只不過為了演示，我同時在此一併介紹。
b. glht() 和 multcompView() 對組別的名字有點敏感，
   在上述的例子中已有提醒，請注意。

--","R_Language"
"1318","M.1472687134.A.F0F","Bass1986","問題","學功能開啟前後分析，哪本書適合？",2016-09-01 07:45:31,NA,NA,"各位好，有個選書的問題想請教各位

目前在電信業工作，需要分析某功能開啟之後，網路是變好還是變差
或者是在某一天過後,網路是否有變化
例如流量上升/下降,用戶活躍性變化，是不是使用網路的時間變得傾向某時候

我在amazon搜尋了幾個小時,有
統計類 ex: the elements of statistical learning
多變數分析 Using R With Multivariate Statistics
時間序列分析 Joint Models for Longitudinal and Time-to-Event Data

不過當試閱時,amazon寄來都都是第一章, r installation, package download...
所以想請教各位,針對我的工作內容有沒有推薦哪一本可以先看? 謝謝

--","R_Language"
"1319","M.1472609983.A.F1F","huangsam","問題","Re: data.frame 字體問題",2016-08-31 10:19:41,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想將""簡體""字形匯出至EXCEL檔，遇到的問題為: 一開始假設時還""可以""顯示: 例如:: > aa <- ""<U+90D1>州"": > aa: [1] ""<U+90D1>州"": 若是將他放入置data.frame導致: > data.frame(aa,""11""): 1 <U+90D1>州    11: 變成匯入至EXCEL檔的時候會形成上方形式，不知道有沒有哪位大大有類似的經驗分享: ，謝謝: --------------------------------------------------------------------: 目前使用文章方法可以顯示出來，但有個問題是匯出至EXCEL時一樣會顯示<U+90D1>州: 想請問哪邊操作有問題: write.csv(print.unicode_df(data), 'path'): 轉成XLS是可以的!!!有沒有大大可以分享一下CSV的相關經驗-----------------------------------------------------------------------
最近在做撰寫又遇到問題了!> ""碩<U+7855>""[1] ""碩<U+7855>""
write.csv(""碩<U+7855>"", paste0(path, data, ""TEST.csv""), row.names = FALSE)
打開CSV檔顯示=>碩<U+7855>
------------------------------------------------------------------------
後來上網找了一個方法分享給大家可以使用套件readr中的write_excel_csv
如果其他人有新的方法也可以分享，謝謝

--","R_Language"
"1320","M.1472573340.A.E41","rodion","分享","Quant in R: 初學者R的GitHub repo",2016-08-31 00:08:55,NA,NA,"初學R剛滿一個禮拜，
寫了個非常簡單的投資策略
(簡單到一句話就描述完 XD)

以後應該會增加更多進階的R程式
(希望啦... 有想法的話...)

有空的話，可以幫忙看看有甚麼需要改進加強的地方
(寫得不好請鞭小力點...0rz)

以下是GitHub repo網址:https://github.com/r-kan/Quant-in-RWeb interface (by Shiny):https://rkan.shinyapps.io/SHY2目前我以R實作一個長期投資策略'SHY'
策略的主要精神就是SHarpe夏普率，以及Yield殖利率

2017/01更新:
利用了PerformanceAnalytics這個套件展示了SHY在投資上的潛力:

由從2005始的回測結果表明，SHY擁有不遜於、甚至勝過0050的表現


--","R_Language"
"1321","M.1472554356.A.4B7","huangsam","問題","gsub",2016-08-30 18:52:34,NA,NA,"[問題類型]:程式諮詢[問題敘述]:想要使用gsub 把""-""取代成""/""，若是單純想要取代成""/""該如何寫!謝謝[程式範例]:> gsub(""\\-"", ""\\\\"", ""2016-07-16 17:11:07"")[1] ""2016\\07\\16 17:11:07""> gsub(""\\-"", ""\\\"", ""2016-07-16 17:11:07"")Error: unexpected numeric constant in ""gsub(""\\-"", ""\\\"", ""2016""[關鍵字]:
gsub選擇性，也許未來有用--","R_Language"
"1322","M.1472454549.A.A9F","clansoda","問題","創建package的問題",2016-08-29 15:09:05,NA,NA,"各位好，目前想要將工作上的有重複性的function寫成package好讓我不用

一直重覆一樣的事情，我目前的問題有兩個

第一個是encode的問題，我用我認為比較普遍的UTF-8格式儲存

並且創建package，這時候會出現

ERROR: unable to collate and parse R files for package

這個error message，而我只要轉成default的CP950就完全不會有這種情況

可是我這個CP950的編碼應該是windows的格式，如果我用這種編碼

那是不是mac或linux的平台就會使用不了呢?因為第一次寫package不太清楚

第二個問題是，我的function用到很多的其它package的function

我看很多package他在library的時候會順便地讀進其它的package

我google後，有很多提到import與depend兩種

有文章說import是比較安全且保守的方式

所以我就把我的namespace媕Y寫成這樣http://imgur.com/a/97VBK，不過source package且library了以後

使用function卻沒有如預期的有接入其他package的function

想請問我哪裡寫錯或者漏了什麼呢?
____________________________________________

我現在根據那篇PKG的文章，及樓下提到的roxygen2 package

已經寫出這樣

namespacehttp://imgur.com/a/4HuCUdescriptionhttp://imgur.com/a/4PPlThead part of functionhttp://imgur.com/a/2Fvmw但是建立新的package後，我依然無法跑放進去的function

就是我的認知上，export function是我想要我的function能被別人import才需要

若我自己使用的話，就不需要export function了對嗎?

那我現在要如何調整才能讓我放進去這個package的function能跑呢?

因為我現在呼叫這個function，他會說無法使用function %>%

因為我在裡面用了很多magrittr的pipe符號。
--","R_Language"
"1323","M.1472353304.A.AE4","Edster","問題","install dependence of package",2016-08-28 11:01:41,NA,NA,"[問題敘述]:

我自己寫一隻package，會用到其他人的package,
於是在project的description這個檔案裡填上Depends: ...
我知道如果是從cran下載來的pkgs可以在dependencies選擇要不要裝需要的pkgs
但如果沒打算上傳cran，就是用zip傳給人家裝
install.packages(..., dependencies=""Depends"") 就不太成功,
看了說明換成NA或TRUE其他的都不行
Google了一下，不多這樣的問題，而且有些時間了http://stackoverflow.com/questions/4090169/elegant-way-to-check-for-missing-packages-and-install-themhttp://stackoverflow.com/questions/14171148/how-to-tell-cran-to-install-package-dependencies-automatically

我以為可以更簡單的解決.

例如require(mylib) 之中設定個參數. 但好像沒有找到


[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] tools_3.3.1[關鍵字]:
install.package dependencies

--","R_Language"
"1324","M.1472298129.A.85B","samex4x4","問題","tm包中Corpus的空白清除",2016-08-27 19:42:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有30個用結巴斷詞後的txt檔，想要使用tm包做文字探勘

問題在我沒有辦法讓讀進來的檔案斷開成一個一個乾淨的詞

都會變成以下情況http://imgur.com/fsHDCJY.jpg輸入到tm包裡的Corpus之後無法清除空白

嘗試用過Rwordseg包裡的segmentCN和strsplit都不行


[程式範例]:http://ideone.com/imbirW[環境敘述]:R version 3.3.1 (2016-06-21)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:文字探勘 tm--","R_Language"
"1325","M.1472228289.A.B8A","yun611","問題","categorical & continuous variable",2016-08-27 00:18:06,NA,NA,"之前在做project的時候

沒有多想就沒有把分類變量設成factor

所以在做變量選擇和建立模型的時候

都是把分類變量默認成continuous

像是Race分成5種(1.2.3.4.5用這五個數字代替)

但是因為現在所剩時間不多...

所以可能沒辦法再從頭改整個data mining過程

如果直接默認成continuous做出來的結果是可以的嗎?

會不會有很大的問題出現...

查了一些國內國外資訊

沒有特別講到這塊

然後好像也有人是直接就默認成continuous

想問版上各位強者有什麼想法?

謝謝!

--","R_Language"
"1326","M.1472221162.A.91F","Bass1986","問題","已有data frame,想轉成輸出的table",2016-08-26 22:19:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的將原始資料做summaryBy, group by LTE_UE_PCI 之後已經有data frame如下

  LTE_UE_PCI Message.m Message.s Distance.m Distance.s Longitude.m
1         48   97273.0  3014.331   10507.37   338.3344    121.5866
2         49  137060.4 25016.458   15440.68  2908.9631    NA
3         50  106330.0 27260.485   11883.63  2979.6712    NA


想請問是否有function能將data frame轉成表格如下,要在markdown的html上顯示,謝謝

                   ____________________________________
                   |       LTE_UE_PCI                  |
                   |-----------------------------------|
                   |   48      |   49      |  50       |
--------------------------------------------------------
Message.m          | 97273.0   | 137060.4  | 106330.0  |
--------------------------------------------------------
Message.s          | 3014.331  | 25016.458 | 27260.485 |
--------------------------------------------------------
Distance.m         | 10507.37  | 15440.68  | 11883.63  |
--------------------------------------------------------
Distance.s         | 338.3344  | 2908.9631 | 2979.6712 |
--------------------------------------------------------
Longitude.m        | 121.5866  | NA        | NA        |
--------------------------------------------------------

[程式範例]:[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1327","M.1472211654.A.9C6","yahoo523","問題","想揪人一起團報資策會的r語言三部曲",2016-08-26 19:40:52,NA,NA,"如題，團報的期限是在2016/09/22
二人95折，四人9折
有興趣的可以站內信給我~

相關網址：http://www.iiiedu.org.tw/ites/RB.htm上課地點：台北市信義路三段153號10樓(大安站)

--","R_Language"
"1328","M.1472206089.A.3D1","yun611","問題","Variable selection",2016-08-26 18:08:06,NA,NA,"小妹現在正在做data mining相關的project

但是遇到一個問題

我的data裡面有categorical 和numeric variable

如果是在迴歸裡

我知道要把分類變量轉換成factor

然後迴歸會幫我跑出dummy variables來解釋結果

但是如果是用lasso在variable selection這個步驟的時候

分類變量要怎麼去解讀呢?
(因為可能變量選擇完後，部分dummy variable有係數部分沒有)

另外如果是要分析這樣的數據集，

是不是只有特定的variable selection方法才能做?

謝謝!



--","R_Language"
"1329","M.1472141668.A.354","Edster","問題","在RStudio使用含中文的project",2016-08-26 00:14:25,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別


[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除開發者(有撰寫R 的套件經驗)[問題敘述]:

請問在Rstudio中可否使用含中文的project及.R檔
我有一個.R的script檔案想要做成package,
但其中含有一點中文 (要處裡中文資料, 於是有些預設值是中文)

在project外，可以看到中文仍然可以辨識，
但是包入project中，這個中文字就變得不可辨識。
請問有解法嗎?中文, package, project--","R_Language"
"1330","M.1472133467.A.207","clansoda","問題","合併長短不一的向量",2016-08-25 21:57:44,NA,NA,"各位好，我目前有一大串的向量

裡面長短不一，而我想把它合併成一個dataframe

例如這是一個list

(1)  a  b  c

(2)  d  e

(3)  f  g

(4)  h  i  j

我現在想把它弄成dataframe的形式vector1就是row1，vector2就是row2

我用do.call(rbind)之後會得到

(1) a b c

(2) d e f

(3) f g h

(4) i j

這樣的形式，明顯跟我要的不同，請問唯一的做法是將剩下的向量補上

空格已形成三個元素的向量還是有其他做法能完成這件事呢?

--","R_Language"
"1331","M.1471975031.A.89C","Wush978","分享","一些Rcpp Modules的二三事的筆記",2016-08-24 01:57:08,NA,NA,"[關鍵字]:R, Rcpp, C++11

[出處]:http://wush.ghost.io/rcpp-modules-and-cpp11/[重點摘要]:

最近重新review研究要用的R套件，所以順手把Rcpp Modules的一些筆記整理一下。

我記得Rcpp Modules很雷，不應該碰，但是我忘記為什麼。

希望整理到最後會發現到。

...

也希望不要發現到 XD

--","R_Language"
"1332","M.1471896476.A.0E3","andrew43","問題","Re: R plot可否自訂圖的起始位置",2016-08-23 04:07:53,NA,NA,"給你一段簡單的例子

x <- c(1,2,3,11,12,13)
y <- c(2,5,2,15,11,20)
plot(NULL, xlim=c(0,15), ylim=c(0,20), xlab=""x"", ylab=""y"")
lines(x[1:3], y[1:3], lty=1, col=2)
lines(x[4:6], y[4:6], lty=2, col=3)※ 引述《HumuHumu (呼姆呼姆)》之銘言：: 我想用plot畫一個類似趨勢圖的東西，但是把不同的資料畫在同一個圖上: 且在趨勢圖上根據資料段來分顏色: 我想請問說 當我用plot畫好第一筆資料如下圖: http://imgur.com/JgWnAwY: 我想把另一筆資料用藍色的 接在紅色段後面: 但我用lines只能做到這樣: http://imgur.com/zofwqiV: 我的問題是，有沒有什麼辦法可以讓第二段藍色的部分的起始位置是在紅色結束的那邊呢: 大概是從15000左右開始--","R_Language"
"1333","M.1471883155.A.C0A","Edster","問題","Re: 型態轉換  文字轉數字  最大位數",2016-08-23 00:25:52,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：:         y= c(""195875715247033841"" ):         as.numeric( y ): #       195875715247033856: 因為一些原因: 會用到位數非常大的data: 像上面y這樣  我想要把他轉成數字  做排序之類: 就會轉失敗  沒有辦法完全文字轉數字: 雖然R一樣會轉成一組數字   但不是我要的: 因為我還會再把他轉回文字: 這樣一來一往   資料就會改變: 想問問看有沒有什麼解決方法: options(digits=22): 我也有開到最大位數: 可是依然不行: 謝謝library(magrittr)
library(bit64)
# library(forRest)

y1= c(""195875715247033841"")
y2= c(""195875715247033842"")
y3= c(""195875715247033839"")
y=c(y1,y2,y3)

substring(y, c(4,6,8,10,12), c(6,8,10,12,30))
t1 = Sys.time()
sortedData =lapply(y, function(x)substring(x, c(4,6,8,10,12),
c(6,8,10,12,30))) %>% do.call(rbind,.) %>% sortbyrowR(., decreasing=FALSE)
apply(sortedData,1,function(x) paste(x,collapse = """"))
t2=Sys.time()
t2-t1

Time difference of 0.012008905410766602 secs

t1=Sys.time()
as.integer64(y) %>% sort
t2=Sys.time()
t2-t1

Time difference of 0.006504058837890625 secs


sortbyrowR 是參照C版大的文章,http://pastebin.com/zE0bQT3U--","R_Language"
"1334","M.1471879514.A.2C9","wearytolove","問題","只有Console的中文是亂碼",2016-08-22 23:25:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
剛下載一個中文資料庫,使用view可以看到正確的繁體中文

但是使用head(data$var1)就在console裡變成亂碼了,

已經試過Sys.setlocale(,""CHT"")  也試過relode with encoding ""UTF-8""但都沒用

不知道問題出在哪....

[程式範例]:

install.packages(""devtools"")
devtools::install_github(""ChihChengLiang/abroadplayr"")
library(dplyr)
library(abroadplayr)
data<- reports
head(data$gov)

[1] ""銝剖亢\xe6<U+7CAD>摨\x9c"" ""銝剖亢\xe6<U+7CAD>摨\x9c"" ""銝剖亢\xe6<U+7CAD>摨\x9c"" ""銝剖亢\xe6
<U+7CAD>摨\x9c""
[5] ""銝剖亢\xe6<U+7CAD>摨\x9c"" ""銝剖亢\xe6<U+7CAD>摨\x9c""

原本應該是""中央政府""

[環境敘述]:

R version 3.1.3 (2015-03-09)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950




感謝各位大大!

--","R_Language"
"1335","M.1471879383.A.F95","f496328mm","問題","型態轉換  文字轉數字  最大位數",2016-08-22 23:23:00,NA,NA,"y= c(""195875715247033841"" )
        as.numeric( y )

#       195875715247033856

因為一些原因

會用到位數非常大的data

像上面y這樣  我想要把他轉成數字  做排序之類

就會轉失敗  沒有辦法完全文字轉數字

雖然R一樣會轉成一組數字   但不是我要的

因為我還會再把他轉回文字

這樣一來一往   資料就會改變

想問問看有沒有什麼解決方法

options(digits=22)

我也有開到最大位數

可是依然不行


謝謝

--","R_Language"
"1336","M.1471837196.A.056","Muhaosic","問題","矩陣運算過程ERROR",2016-08-22 11:39:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
請簡略描述你所要做的事情，或是這個程式的目的

[程式範例]:https://mega.nz/#F!6Ro1BLiQ[環境敘述]:
用R-STUDIO寫的

[關鍵字]:

選擇性，也許未來有用

--","R_Language"
"1337","M.1471768416.A.E4D","HeroNoah","問題","Re: 利用R 篩選欄位內相同資料",2016-08-21 16:33:35,NA,NA,"x = 手機號碼4欄位

y = 手機號碼5欄位

z = 天數4欄位

所求 = z[x %in% y]

補充一下

如果 data = 資料

將 z 改成 data 並且取 subset 的方法為

data[x %in% y, ]※ 引述《Tampa (光芒)》之銘言：: ※ 引述《Tampa (光芒)》之銘言：: : 作者: Tampa (光芒) 看板: Database: : 標題: [SQL ] 篩選欄位內相同資料: : 時間: Fri Aug 19 23:28:06 2016: 謝謝各位大大回復: 新增一個問題: : 問題如下: 手機號碼4 天數4 手機號碼5  天數5: : 111       3      118         4: : 112       4      113         5: : 113       5      111         8: : 115       5      116         9: : 118       6      119        10: : .         .       .          .:    篩選條件如下:    1.當手機號碼4中 有符合手機號碼5的資料，則回傳天數4所對應欄位的資料:      (類似excel的index): : 希望呈現如下: : 手機號碼4   天數4    手機號碼5  天數5: : 111          3          111       8: : 113          5          113       5:   118          6          118       4: 情境就是: 想分析公司推完活動後，是否有明顯增加使用者使用的天數: 感謝各位大大--","R_Language"
"1338","M.1471761412.A.19A","f496328mm","問題","Re: 利用R 篩選欄位內相同資料",2016-08-21 14:36:49,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: ※ 引述《Tampa (光芒)》之銘言：: : 作者: Tampa (光芒) 看板: Database: : 標題: [SQL ] 篩選欄位內相同資料: : 時間: Fri Aug 19 23:28:06 2016: 謝謝各位大大回復: 新增一個問題: : 問題如下: 手機號碼4 天數4 手機號碼5  天數5: : 111       3      118         4: : 112       4      113         5: : 113       5      111         8: : 115       5      116         9: : 118       6      119        10: : .         .       .          .:    篩選條件如下:    1.當手機號碼4中 有符合手機號碼5的資料，則回傳天數4所對應欄位的資料:      (類似excel的index): : 希望呈現如下: : 手機號碼4   天數4    手機號碼5  天數5: : 111          3          111       8: : 113          5          113       5:   118          6          118       4: 情境就是: 想分析公司推完活動後，是否有明顯增加使用者使用的天數: 感謝各位大大phone_fun=function(x2,y2){
        map1=x2[,1] %in% y2[,1]
        map2= y2[,1] %in% x2[,1]

        x3=x2[map1,]
        y3=y2[map2,]

        order_x3=order(x3[,1])
        x4=x3[order_x3,]

        order_y3=order(y3[,1])
        y4=y3[order_y3,]

        value=cbind(x4,y4)
        return(value)
}

        #先生成手機資料
        x=c(111,112,113,115,118)
        x1=c(3,4,5,5,6)

        y=c(118,113,111,116,119)
        y1=c(4,5,8,9,10)
        #合併
        x2=cbind(x,x1)
        y2=cbind(y,y1)
        #一般來說  手上有資料 讀進來只要用矩陣拆開就好
        x2
        y2
        #直接幫你寫好一個function
        #只要輸入 拆開來的 手機號碼4 手機號碼5
        #就可以得到你要的結果
        phone_fun(x2,y2)

==========================================

話說   有沒有明顯增加使用者使用天數

是用統計方法去作檢定嗎?
H0:
mean(活動前) >= mean(活動後)

不知道這樣 >= 方向有沒有錯






--","R_Language"
"1339","M.1471761205.A.03A","celestialgod","問題","Re: 利用R 篩選欄位內相同資料",2016-08-21 14:33:21,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: ※ 引述《Tampa (光芒)》之銘言：: : 作者: Tampa (光芒) 看板: Database: : 標題: [SQL ] 篩選欄位內相同資料: : 時間: Fri Aug 19 23:28:06 2016: 謝謝各位大大回復: 新增一個問題: : 問題如下: 手機號碼4 天數4 手機號碼5  天數5: : 111       3      118         4: : 112       4      113         5: : 113       5      111         8: : 115       5      116         9: : 118       6      119        10: : .         .       .          .:    篩選條件如下:    1.當手機號碼4中 有符合手機號碼5的資料，則回傳天數4所對應欄位的資料:      (類似excel的index): : 希望呈現如下: : 手機號碼4   天數4    手機號碼5  天數5: : 111          3          111       8: : 113          5          113       5:   118          6          118       4: 情境就是: 想分析公司推完活動後，是否有明顯增加使用者使用的天數: 感謝各位大大cp_num_gen_f <- function(n) paste0(""09"", apply(matrix(sample(0:9, 8*n, TRUE),
        n), 1, paste0, collapse =""""))
dat <- data.frame(cp4 = cp_num_gen_f(10), nd4 = rpois(10, 5), cp5 = 0,
        nd5 = rpois(10, 6), stringsAsFactors = FALSE)
dat$cp5 <- c(sample(dat$cp4, 3), cp_num_gen_f(7))

# 1.
match(dat$cp5, dat$cp4)

# 2.
library(dplyr)
dat %>% mutate(idx = match(cp5, cp4)) %>%
  mutate(cp4_match = dat[idx, 1], nd4_match = dat[idx, 2]) %>%
  filter(!is.na(cp4_match))

#          cp4 nd4        cp5 nd5 idx  cp4_match nd4_match
# 1 0969429990   7 0993267331   6   2 0993267331         2
# 2 0993267331   2 0941547740   4   4 0941547740         4
# 3 0999020937   4 0930712667   2   7 0930712667         1

8/22修改：調換index順序，才符合原PO的問題

--","R_Language"
"1340","M.1471751857.A.E9D","Tampa","問題","Re: 利用R 篩選欄位內相同資料",2016-08-21 11:57:35,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: ※ [本文轉錄自 Database 看板 #1NjoM8UQ ]: 作者: Tampa (光芒) 看板: Database: 標題: [SQL ] 篩選欄位內相同資料: 時間: Fri Aug 19 23:28:06 2016謝謝各位大大回復

新增一個問題: 問題如下手機號碼4 天數4 手機號碼5  天數5: 111       3      118         4: 112       4      113         5: 113       5      111         8: 115       5      116         9: 118       6      119        10: .         .       .          .篩選條件如下

   1.當手機號碼4中 有符合手機號碼5的資料，則回傳天數4所對應欄位的資料

     (類似excel的index): 希望呈現如下: 手機號碼4   天數4    手機號碼5  天數5: 111          3          111       8: 113          5          113       5118          6          118       4

情境就是

想分析公司推完活動後，是否有明顯增加使用者使用的天數

感謝各位大大


--","R_Language"
"1341","M.1471703521.A.93B","HumuHumu","問題","R plot可否自訂圖的起始位置",2016-08-20 22:31:58,NA,NA,"我想用plot畫一個類似趨勢圖的東西，但是把不同的資料畫在同一個圖上

且在趨勢圖上根據資料段來分顏色

我想請問說 當我用plot畫好第一筆資料如下圖http://imgur.com/JgWnAwY我想把另一筆資料用藍色的 接在紅色段後面

但我用lines只能做到這樣http://imgur.com/zofwqiV我的問題是，有沒有什麼辦法可以讓第二段藍色的部分的起始位置是在紅色結束的那邊呢

大概是從15000左右開始

--","R_Language"
"1342","M.1471700977.A.7FE","HeroNoah",NA,"Re: 利用R 篩選欄位內相同資料",2016-08-20 21:49:36,NA,NA,"x = 手機號碼4欄位

y = 手機號碼5欄位

y[unique(match(x, y, 0L))]※ 引述《Tampa (光芒)》之銘言：: ※ [本文轉錄自 Database 看板 #1NjoM8UQ ]: 作者: Tampa (光芒) 看板: Database: 標題: [SQL ] 篩選欄位內相同資料: 時間: Fri Aug 19 23:28:06 2016: 問題如下: 我現在資料表裡面 有手機號碼4 跟手機號碼5兩個欄位: 手機號碼4   手機號碼5: 111             118: 112             113: 113             111: 115             116: 118             119: .                .: .                .: .                .: 我要篩選並排序出 同時出現於 手機號碼4 與手機號碼5中的資料: 並製作成新表: 希望呈現如下: 手機號碼4   手機號碼5: 111           111: 113           113: 欄位資料的格式為文字(不知道這會不會影響): 有嘗試用access試過: 用select T from where 手機號碼4 = 手機號碼5: 但只能篩出一筆 不知道為何: 所以來嘗試用R看看--","R_Language"
"1343","M.1471698415.A.DF9","f496328mm",NA,"Re: 利用R 篩選欄位內相同資料",2016-08-20 21:06:52,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: ※ [本文轉錄自 Database 看板 #1NjoM8UQ ]: 作者: Tampa (光芒) 看板: Database: 標題: [SQL ] 篩選欄位內相同資料: 時間: Fri Aug 19 23:28:06 2016: 問題如下: 我現在資料表裡面 有手機號碼4 跟手機號碼5兩個欄位: 手機號碼4   手機號碼5: 111             118: 112             113: 113             111: 115             116: 118             119: .                .: .                .: .                .: 我要篩選並排序出 同時出現於 手機號碼4 與手機號碼5中的資料: 並製作成新表: 希望呈現如下: 手機號碼4   手機號碼5: 111           111: 113           113這裡應該還有118吧?
因為118也出現在 號碼4 號碼5: 欄位資料的格式為文字(不知道這會不會影響): 有嘗試用access試過: 用select T from where 手機號碼4 = 手機號碼5: 但只能篩出一筆 不知道為何: 所以來嘗試用R看看現學現賣

我前幾篇也問過類似問題

a=c(111,112,113,115,118)
b=c(118,113,111,116,119)


map1 = a %in% b
a[map1]

map2 = b %in% a
b[map2]

順序會不一樣  不過排序很簡單  就不做了

--","R_Language"
"1344","M.1471663289.A.B2B","Tampa",NA,"Fw: 利用R 篩選欄位內相同資料",2016-08-20 11:21:28,NA,NA,"※ [本文轉錄自 Database 看板 #1NjoM8UQ ]作者: Tampa (光芒) 看板: Database
標題: [SQL ] 篩選欄位內相同資料
時間: Fri Aug 19 23:28:06 2016

問題如下

我現在資料表裡面 有手機號碼4 跟手機號碼5兩個欄位

手機號碼4   手機號碼5
111             118
112             113
113             111
115             116
118             119
.                .
.                .
.                .
我要篩選並排序出 同時出現於 手機號碼4 與手機號碼5中的資料

並製作成新表

希望呈現如下

手機號碼4   手機號碼5
111           111
113           113

欄位資料的格式為文字(不知道這會不會影響)

有嘗試用access試過

用select T from where 手機號碼4 = 手機號碼5

但只能篩出一筆 不知道為何

所以來嘗試用R看看



--","R_Language"
"1345","M.1471629533.A.CC8","dobyuni","問題","rpart 問題請教",2016-08-20 01:58:51,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
因為訓練資料和測試資料放在不同電腦，
我在一台電腦做何好迴歸樹(fit)，要如何把fit帶到另外一台電腦做測試(預測)使用
也就是說，我到另外一台電腦沒有fit，如何做predict(fit,a)這個動作。




[程式範例]:
#迴歸樹
library(rpart)
fit <- rpart(Price ~ Mileage + Type + Country, cu.summary)
par(xpd = TRUE)
plot(fit, compress = TRUE)
text(fit, use.n = TRUE)



#預測
a=data.frame(Mileage=33, Type=""Small"", Country=""USA"")
predict(fit,a)


--","R_Language"
"1346","M.1471597802.A.DE4","f496328mm","問題","矩陣每列種類數量",2016-08-19 17:09:59,NA,NA,"[,1] [,2] [,3] [,4] [,5]
[1,]    1    6    2    7    5
[2,]    2    7    3    8    5
[3,]    3    8    4    9    5
[4,]    4    9    5   10    5
[5,]    5   10    6   11    5

舉例來說

data是上面那樣  我要算出每列有多少""種""

像第四列 4 9 5 10 5  有4種數字

code在這   我想要算出所有列的種類數

x=matrix( c(1:10,2:11,5,5,5,5,5) ,ncol=5 )
sapply(c(1:5), function(i)
                length( levels( factor( x[i,1:5] ) ) )
        )

我目前是先轉factor  然後取level  再算length

不過這樣效率很差

想問問看有沒有什麼比較好的寫法

目前我100萬筆要1.5min

我總data有2.6千萬筆  起碼要30min

感覺沒效率

謝謝



--","R_Language"
"1347","M.1471569482.A.FB6","HumuHumu","問題","讀取某個資料夾所有文件",2016-08-19 09:18:00,NA,NA,"我有GOOGLE過了，但得到的結果都是只能讀取某個資料夾下所有文件的語法


但我現在的狀況是，我的資料夾下，還有很多子資料夾，裡面又有很多同格式的CSV檔案


我想要設定最上層的資料夾的路徑後，讀取這個資料夾裡面所有子資料夾的CSV檔

該怎麼做呢

--","R_Language"
"1348","M.1471450602.A.941","sky800507","問題","Rselenium findElement 如何找第二項?",2016-08-18 00:16:39,NA,NA,"我想用Rselenium在Google Map上自動搜尋，並將搜尋到的地址、網站、電話都爬下來，可是目前只能爬到地址。

程式碼如下:
library(RSelenium)
startServer()
mybrowser <- remoteDriver()
mybrowser$open()
mybrowser$navigate(""https://www.google.com.tw/maps/"")Sys.sleep(3)
search <- mybrowser$findElement(using = ""css selector"", ""#searchboxinput"")
search$sendKeysToElement(list(""taiwan university"",""\uE007""))

mybrowser$findElement(using = ""css selector"", "".widget-pane-section-info-text"")$getElementText()

網站的class也是widget-pane-section-info-text，但我不知道如何搜尋到第二項，爬了好久資訊都還沒找到解答，有人有遇過類似的問題嗎?

--","R_Language"
"1349","M.1471352090.A.B43","clansoda","問題","無法爬含中文的網址",2016-08-16 20:54:46,NA,NA,"還真是有點抱歉，整天來問的不是資料分析都是爬蟲的問題

我今天遇到一個之前沒遇過的問題就是當網頁含中文的時候

xml媕YGET是會發生一些怪怪的問題，我今天爬文章的時候發現

GET後得到的網頁content會是unknown的型態，而使用content以後

會得到RAW型態的資料，而不是nodeset型態，想請問如何解決這樣的問題呢

下面是一個範例網頁，http://goo.gl/cc7EAI感謝各位回覆。

--","R_Language"
"1350","M.1471345900.A.1A8","f496328mm","問題","資料篩選相關問題  多對多",2016-08-16 19:11:38,NA,NA,"舉例來說

x=c(123,456,897,243,651,852,964,357,555)

y=c(651,852,111)

我想要從 x 中  篩選出 y 中有的變數 651 852 111

111沒有出現在 x 中  所以不用顯示出來

基本上我想要的就是位置 5,6  ( 651=x[5] 852=x[6] )


目前我的想法是

#先用布林值去判斷哪個為true
#再去找位置
bo = as.integer( x == y[1] )
bo_matr = matrix(bo)
map =
      which(apply(bo_matr, 1L,function(row) all(row == 1)))

這樣就很清楚知道是  x 中的 5,6 是我要的 (因為 true=1 )


但是這樣很花時間

因為我 x y 各有上百萬筆row

每次都百萬筆去做布林比對

非常沒效率

所以想問問看有沒有類似函數可以幫我做篩選

謝謝



--","R_Language"
"1351","M.1471321398.A.F4C","psinqoo","問題","資料取用與轉換",2016-08-16 12:23:15,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的資料一批

ID與地點次數

ID  台中 高雄 台北 新竹 嘉義
A    6    4    3    8    10
B    3    1    0    2     3
C    1    0    0    0     2
D    3    3    3    0     1

變成

ID 最多次
A  嘉義
B  台中、嘉義
C  嘉義
D  台中、高雄、台北


因為要把 colname欄位拿來用
目前無頭緒中




[程式範例]:[環境敘述]:[關鍵字]:
資料轉換
plyr
dplyr--

--","R_Language"
"1352","M.1471315852.A.8F1","taichi53719","問題","text2vec 在windows中文顯示問題",2016-08-16 10:50:48,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除開發者(有撰寫R 的套件經驗)[問題敘述]:目前使用的是windows R 3.2.5用套件jiebaR做中文斷詞，段詞的結果沒問題但是要使用text2vec做字詞向量化分析就會有亂碼的問題不曉得有沒有方法可以修正另外我在MAC和Linux上使用相同的code顯示上都很正確所以直覺應該是windows設定的問題還想請問該如何設定中文才可以正確顯示感謝[程式範例]:> tw=""R: 最流行的統計語言""> cutter=worker(bylines=TRUE)> words=segment(tw,cutter)> words[[1]][1] ""R""    ""最""   ""流行"" ""的""   ""統計"" ""語言""> library(text2vec)>> #create iterator> a.token=itoken(words)>> a.vocab<-create_vocabulary(a.token, ngram=c(1, 1))> a.vocab$vocabterms terms_counts doc_counts1:  隤<U+9757>\xa8\u0080            1          12:   蝯梯\xa8\x88            1          13:   \xe7\x9a\x84            1          14: \xe6\x9c\u0080            1          15:    瘚<U+770E>\xa1\x8c            1          16:              R            1          1$ngramngram_min ngram_max1         1$document_count[1] 1$stopwordscharacter(0)attr(,""class"")[1] ""text2vec_vocabulary""[環境敘述]:R version 3.2.5 (2016-04-14)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1[關鍵字]:jiebaR;text2vec;中文斷詞--","R_Language"
"1353","M.1471255355.A.1F8","clansoda","問題","如何分開奇特符號",2016-08-15 18:02:32,NA,NA,"過去我遇到特殊的符號都用escape就能逃開，只是這個更特殊所以我一直繞不過去

現在我有一個字串 cast=""mother cooks"", hihizoo=""mute cool""

隨便亂打的，我想用""這個符號來分割取得mother cooks這個字串

我用strsplit(cast,"""""",fixed=TRUE)，他會抓不到我中間要的是甚麼

他會要求我繼續打完，我用perl也不行，\也不行

想請問要如何才能用""來分割文字呢，又或者有更好的方式取得我要的字串嗎

想補完剩下的問題，我現在的問題是http://goo.gl/vuZtHn我想抓這頁裡面的的產品連結，可以看到他的產品連結TAG後面都有google analytics

的程式碼，因此我抓到<a href>這個TAG後，我才會想把整串spilt，請問我這是唯一作法

還是在XML還有其他方法可以直接得到<a href=""網址"" 後面這段 而忽略 ng click這段--","R_Language"
"1354","M.1471247827.A.EB3","f496328mm","問題","kmeans 大數據 版本",2016-08-15 15:57:04,NA,NA,"跑kmeans出現以下訊息

Warning message:
Quick-TRANSfer stage steps exceeded maximum (= 1318974700)

看起來是  已達最大值

我的data 有2.6千萬筆

想問問看有沒有

大數據的kmeans版本

或是解決方法   或是說這是warning所以不用理他???

謝謝

--","R_Language"
"1355","M.1471181593.A.30A","andrew43","分享","colorout 套件分享 (在terminal下有色彩)",2016-08-14 21:33:10,NA,NA,"1. 套件名稱
colorout 1.1-2

2. 套件主要用途：
如果你習慣在 terminal 中操作 R，可以引入此套件，使 R 的輸出文字有色彩提示。
請看作者提供簡介和螢幕截圖：https://github.com/jalvesaq/colorout如果你習慣用 IDE 或內建的圖形化應用程式來操作 R，可能不需要考慮這個套件。

3. 套件主要函數列表：
不需要函數，只要 library(colorout) 後就可馬上生效。
如果想要改變顯示的效果，請在引入套件後看一下 help(colorout) 的說明。

4. 分享內容：
無。真的無需再多介紹什麼……

5. 備註
目前該套件不存在於 CRAN，所以安裝方式請見：https://github.com/jalvesaq/colorout--","R_Language"
"1356","M.1471064884.A.2D4","celestialgod","問題","Re: 資料長<->寬變換",2016-08-13 13:08:02,NA,NA,"※ 引述《DrRd (就這樣吧)》之銘言：: [問題類型]::: 意見調查(我對R 有個很棒的想法，想問問大家的意見):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::: 要將寬型的資料轉成長型的資料，但是要合併成的新變項有兩個: 以iris為例: 本來iris的資料長這樣: | Sepal.Length | Sepal.Width | Petal.Length | Petal.Width | Species |: |:------------:|:-----------:|:------------:|:-----------:|:-------:|: |     5.1      |     3.5     |     1.4      |     0.2     | setosa  |: |     4.9      |     3.0     |     1.4      |     0.2     | setosa  |: |     4.7      |     3.2     |     1.3      |     0.2     | setosa  |: |     4.6      |     3.1     |     1.5      |     0.2     | setosa  |: 我想要轉成: | Species |    SorP.x    | Length | Width |: |:-------:|:------------:|:------:|:-----:|: | setosa  | Sepal        |  5.1   |  3.5  |: | setosa  | Sepal        |  5.1   |  3.0  |: | setosa  | Pepal        |  5.1   |  3.2  |: | setosa  | Pepal        |  5.1   |  3.1  |: | setosa  | Sepal        |  5.1   |  3.6  |: 目前我想到的作法是先弄出兩個長期的資料，一個是Length另一個是Width: 然後再把兩個merge起來，請問大家有沒有什麼其他的方法？可以不用先弄成兩個資料？:: [程式範例]::: data(""iris""): head(iris): library(tidyr);library(dplyr): aa <- merge(:   gather(iris[-c(2,4)],key = SorP, value = Length, Sepal.Length, Petal.Length),:   gather(iris[-c(1,3)],key = SorP, value = Width, Sepal.Width, Petal.Width),:   by.x = ""Species"", by.y = ""Species""):: [環境敘述]::: R version 3.3.0 (2016-05-03): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.11.6 (El Capitan):: [關鍵字]::: 資料格式、tidyr好讀版：http://pastebin.com/Lei4AzsU兩個方法都可以達成，重點是unique key - id的建立

1. data.table

library(data.table)
library(pipeR)
resDT <- iris %>>% data.table %>>%
  transform(Species = as.character(Species), id = 1:nrow(.)) %>>%
  melt(id = 5:6, measure = c(1:4), variable.factor = FALSE) %>>%
  `[`( , `:=`(c(""partName"", ""measure""), tstrsplit(variable, ""\\.""))) %>>%
  dcast.data.table(Species + partName + id~ measure, sum,
    value.var = ""value"") %>>% `[`( , id := NULL)
#        Species partName Length Width
#   1:    setosa    Petal    1.4   0.2
#   2:    setosa    Petal    1.4   0.2
#   3:    setosa    Petal    1.3   0.2
#   4:    setosa    Petal    1.5   0.2
#   5:    setosa    Petal    1.4   0.2
# ---
# 296: virginica    Sepal    6.7   3.0
# 297: virginica    Sepal    6.3   2.5
# 298: virginica    Sepal    6.5   3.0
# 299: virginica    Sepal    6.2   3.4
# 300: virginica    Sepal    5.9   3.0

2. dplyr + tidyr

library(pipeR)
library(dplyr)
library(tidyr)
resTbl <- iris %>>% tbl_df %>>% mutate(id = 1:nrow(.)) %>>%
  gather(variable, value, -Species, -id) %>>%
  separate(variable, c(""partName"", ""measure"")) %>>%
  spread(measure, value) %>>% select(-id)

# Source: local data frame [300 x 4]
#
#    Species partName Length Width
#     <fctr>    <chr>  <dbl> <dbl>
# 1   setosa    Petal    1.4   0.2
# 2   setosa    Sepal    5.1   3.5
# 3   setosa    Petal    1.4   0.2
# 4   setosa    Sepal    4.9   3.0
# 5   setosa    Petal    1.3   0.2
# 6   setosa    Sepal    4.7   3.2
# 7   setosa    Petal    1.5   0.2
# 8   setosa    Sepal    4.6   3.1
# 9   setosa    Petal    1.4   0.2
# 10  setosa    Sepal    5.0   3.6
# ..     ...      ...    ...   ...


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1357","M.1471053111.A.7A5","DrRd","問題","資料長<->寬變換",2016-08-13 09:51:49,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:要將寬型的資料轉成長型的資料，但是要合併成的新變項有兩個以iris為例本來iris的資料長這樣| Sepal.Length | Sepal.Width | Petal.Length | Petal.Width | Species ||:------------:|:-----------:|:------------:|:-----------:|:-------:||     5.1      |     3.5     |     1.4      |     0.2     | setosa  ||     4.9      |     3.0     |     1.4      |     0.2     | setosa  ||     4.7      |     3.2     |     1.3      |     0.2     | setosa  ||     4.6      |     3.1     |     1.5      |     0.2     | setosa  |我想要轉成| Species |    SorP.x    | Length | Width ||:-------:|:------------:|:------:|:-----:|| setosa  | Sepal        |  5.1   |  3.5  || setosa  | Sepal        |  5.1   |  3.0  || setosa  | Pepal        |  5.1   |  3.2  || setosa  | Pepal        |  5.1   |  3.1  || setosa  | Sepal        |  5.1   |  3.6  |目前我想到的作法是先弄出兩個長期的資料，一個是Length另一個是Width然後再把兩個merge起來，請問大家有沒有什麼其他的方法？可以不用先弄成兩個資料？[程式範例]:data(""iris"")head(iris)library(tidyr);library(dplyr)aa <- merge(gather(iris[-c(2,4)],key = SorP, value = Length, Sepal.Length, Petal.Length),gather(iris[-c(1,3)],key = SorP, value = Width, Sepal.Width, Petal.Width),by.x = ""Species"", by.y = ""Species"")[環境敘述]:R version 3.3.0 (2016-05-03)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.11.6 (El Capitan)[關鍵字]:資料格式、tidyr--","R_Language"
"1358","M.1471004535.A.63B","SleepyChink","問題","關於使用text,label 最大值",2016-08-12 20:22:12,NA,NA,"[Code]
library(MASS)
attach(Animals)
min(Animals$body)
max(Animals$body)
min(Animals$brain)
max(Animals$brain)
par(mfrow=c(1,2))
plot(brain~body, xlab=""body"", ylab=""brain"", xlim=c(0,88000), ylim=c(0,5800), main=""body vs. brain"", mex=0.8)
text(x=Animals$body, y=Animals$brain, labels=row.names(Animals), pos=4)

[問題]
上述語法能在我畫完的圖中標示出資料(Animals)的名稱，
但是如果我只想要標示出body中，
最大的三個值可以如何更改，
我目前有想到先用order(Animals$body)搭配sort(Animals$brain)找出最大的三個值，
但不曉得如何只標出這三個的名稱與值，
謝謝大家。



--
Sent from my Windows

--","R_Language"
"1359","M.1470996319.A.26D","david31408","問題","抓取網頁",2016-08-12 18:05:15,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好，我是R的新手，所以最近在練習
想要用XML這個package試著抓取 baseballreference的資料試看看

由於很菜，所以就先亂試，程式碼跟提示如下

會不會不是所有的網頁都可以用xml抓取?> library(""XML"", lib.loc=""~/R/win-library/3.2"")> url <- ""http://www.baseball-reference.com/leaders/H_career.shtml""> Hits <- readHTMLTable(url)Error in UseMethod(""xpathApply"") :
  no applicable method for 'xpathApply' applied to an object of class ""NULL""

在上面的case中，不知道為什麼會出現這樣的error message
但我猜網頁本身不是table


後來又試了方法2> url <- ""http://www.baseball-reference.com/leaders/H_career.shtml""> x <- xmlParse(url)Error message 如下
Specification mandate value for attribute itemscope
attributes construct error
Couldn't find end of Start Tag html line
Extra content at the end of the document
Error: 1: Specification mandate value for attribute itemscope
2: attributes construct error
3: Couldn't find end of Start Tag html line 1
4: Extra content at the end of the document

可能baseballreference防止這樣?

謝謝大家教學 :)

[關鍵字]:
MLB, XML

--","R_Language"
"1360","M.1470965433.A.15A","HumuHumu","問題","R資料反向排序",2016-08-12 09:30:30,NA,NA,"如提，我有一筆資料Data是依照時間來排序的

越上面的Row是越靠近現在的時間的資料，越下面的Row是越久以前的資料

但我想把他反向排序，讓越上面的Row是越舊的資料要怎麼排呢

我有用For迴圈寫出來，但是這樣實在太慢

我想知道有什麼可以用的函數可以達到重新排序的功能 謝謝

--","R_Language"
"1361","M.1470939418.A.AE8","swilly0906",NA,"在資料中新增一個變數來進行統計分析",2016-08-12 02:16:56,NA,NA,"[問題類型]:
新手(沒寫過程式，R 是我的第一次)
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

拍謝拍謝 其實我真的不清楚標題要怎麼打比較好

我的問題及如下:

這是我資料的前10筆

年   性別  ......(其他變數)
100   F
101   M
100   F
102   M
103   M
101   M
102   F
104   M
104   F
102   M

.
.
.
.
.
(約2w筆)
我先講 我的目的:我希望可以算出各年(資料僅有100~104年而已)的男女生的

某變數統計量

所以就是說 我想要跑出一個表格

列:100年男,100年女,101年男.....,104年女(共10個)
行:meadian,mean,sd,skewness....(一些統計量而已)

所以我想到了一個方法(因為我只能想到這招 有更好的請教我一下 感恩QQ)

第一步驟:我先創造一個新變數叫做""yearsex""

然後我希望把""100年男,100年女,....,104年女"" 分別用1~10代表

我以我上面的資料例子為例yearsex=c(2,3,2,5,7,3,6,9,10,5)

然後再用cbind併入我的原資料

:第二步驟:接著我再用sapply(unique(yearsex),function(x){........})

就大功告成了

其實step2我沒問題啦,反而我想問step1怎麼做呀???????(還是有其他比這2個步驟更好的)

------------------------------------------------------------------------------

其實還有另一個問題,不過這問題我已經用SQL解決了

但我還是想問一下

有關篩選掉重複值要如何在R進行(還是我這個要求 無法在R執行!?)

資料如下:

  NUM          ID         NAME
  123      A123456789     willy
  123      A123456789     willy  *重複
  123      A233456789     sandy
  124      B123456789     wang
  124      A233456789     sandy
  125      A233789456     janet
  126      B123456789     wang
  127      C147852369     mandy
  127      C147852369     mandy  *重複
我的目的就是要把*的那一個row全部刪除
其餘都要留著 這辦的到嗎?

我的意思就是我希望在給定相同的NUM裡面 裡面的ID只能出現一次,不能同時出現2次


感謝解答><

[程式範例]:


[環境敘述]:


[關鍵字]:
分組變數,篩選重複值問題

--","R_Language"
"1362","M.1470930388.A.EF5","HumuHumu","問題","lm中X變數太多怎麼寫",2016-08-11 23:46:25,NA,NA,"[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一筆資料Data有14個Column，其中第一個column是Y變數，後面的13個column是X變數

我想跑回歸如下

model<-lm(Data[,1]~Data[,2]+Data[,3]+..........Data[,14])

請問有辦法讓後面的X變數部分不用這樣一次一次慢慢打嗎?

如果變數一多不就寫到天荒地老 感謝大家

--","R_Language"
"1363","M.1470917601.A.E73","amygm307","問題","有條件的刪除資料筆數",2016-08-11 20:13:18,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我有一堆資料如下範例ts  x1   vts12  0.1  na23  0.2  na34  0.3  na45  0.4  056  0.5  na...想要把vts值為0的那一列當作第一列，以上的資料通通刪除實在是不知道怎麼做，不知道是否應該用if不知道怎麼寫可以讓他一筆一筆讀直到第一筆為0時停止，然後把前面的資料都刪掉求各位大大幫忙解惑了! 感激不盡!--","R_Language"
"1364","M.1470896878.A.9B1","Muhaosic","問題","矩陣運算問題",2016-08-11 14:27:56,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
矩陣無法運算

[程式範例]:

程式出現
erroe : requires numeric / complex matrix / vector arguments


[關鍵字]:

選擇性，也許未來有用

--","R_Language"
"1365","M.1470661341.A.738","naturalsmen","問題","Re: 求救QQ 時間序列分析繪圖問題",2016-08-08 21:02:18,NA,NA,"※ 引述《kindarex (花香滿庭園)》之銘言：: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 各位高手大家好，謝謝上次高手說先了解時間序列分析: 也開始在自學練習畫圖，但遇到同一個問題卡很久: 我的資料是新竹2010-2014年1-12月的平均溫度，: 從Excel表整理好後匯入到Rstudio，開始按照youtube的影片教學: 練習跟跟影片教學中https://www.youtube.com/watch?v=0gf5iLTbiQM: 2小時07分開始進行練習: 以下是我的資料: > d<-read.csv(""C:\\Users\\1503063\\Desktop\\平均溫度.csv""): > d: Year    Jan     Feb     Mar     Apr     May     Jun     Jul     Aug     Sep     Oct     Nov     Dec: 2010    15.9    16.7    19      20.3    25      26.5    29.9    29.6    28.1    24.3    20.9    16.4: 2011    13.3    15.2    15.5    21      24.3    28.5    28.8    29.2    27.7    24.5    22.7    16.6: 2012    15.3    14.9    17.4    23.3    25.8    27.8    29.7    28.6    26.8    23.9    21      17.3: 2013    5.8     17.3    19.2    20.9    26      28.9    28.9    28.9    27.7    24.2    21      16.1: 2014    15.6    15.4    18      22.3    25.3    28.3    30.4    29.9    29.6    24.7    22      16: > myts <- ts(d, start=c(2010,1), end=c(2014,12), frequency=12): > class(myts)(以下吃掉)

大概看了一下影片

你跟講者不同的地方在於你的原始資料設定

雖然你的資料結構跟講者一樣(看起來

但是class卻不同

我猜你是在excel就先把matrix的行列名稱設好

但是如果你注意看影片

會發現講者是讀進numeric的資料

print出來的matrix是經過ts()轉換之後(cola2)

你如果用str(cola2)去看 會發現他的結構長這樣

Time-Series [1:100] from XXXX to XXXX: ...

class(cola2)

# [1] ""ts""

但你的class(d)應該是""matrix""

所以我建議可以這樣做

d <- matrix(runif(36), nrow = 3, ncol = 12)
dd <- seq(as.Date(""2000/1/1""), by = ""month"", length.out = 12)
dd <- format(dd, ""%b"")
colnames(d) <- dd
rownames(d) <- c(""2000"", ""2001"", ""2002"")

# your imported data
d

            Jan       Feb        Mar        Apr       May       Jun       Jul        Aug        Sep
2000 0.06464222 0.4859936 0.19107794 0.06705835 0.9428377 0.1095469 0.5137503 0.50677142 0.64370554
2001 0.27664552 0.1420115 0.08748821 0.23434808 0.6796937 0.8334102 0.3728003 0.30359776 0.18653139
2002 0.75141165 0.3336006 0.88925778 0.08978937 0.8929249 0.2680072 0.9846332 0.03387092 0.09410578
           Oct        Nov       Dec
2000 0.4206437 0.05388721 0.5835108
2001 0.7170996 0.37223711 0.1542709
2002 0.2134047 0.52395925 0.5123901

# transform the matrix to be numeric vector
md <- as.numeric(t(d))
class(md)

# [1] ""numeric""

myts <- ts(md, start = c(2000, 1), end = c(2002, 12), frequency = 12)
myts

            Jan       Feb        Mar        Apr       May       Jun       Jul        Aug        Sep
2000 0.06464222 0.4859936 0.19107794 0.06705835 0.9428377 0.1095469 0.5137503 0.50677142 0.64370554
2001 0.27664552 0.1420115 0.08748821 0.23434808 0.6796937 0.8334102 0.3728003 0.30359776 0.18653139
2002 0.75141165 0.3336006 0.88925778 0.08978937 0.8929249 0.2680072 0.9846332 0.03387092 0.09410578
           Oct        Nov       Dec
2000 0.4206437 0.05388721 0.5835108
2001 0.7170996 0.37223711 0.1542709
2002 0.2134047 0.52395925 0.5123901

class(myts)

# [1] ""ts""

plot(myts)

--","R_Language"
"1366","M.1470646066.A.832","kindarex","問題","求救QQ 時間序列分析繪圖問題",2016-08-08 16:47:43,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位高手大家好，謝謝上次高手說先了解時間序列分析

也開始在自學練習畫圖，但遇到同一個問題卡很久

我的資料是新竹2010-2014年1-12月的平均溫度，
從Excel表整理好後匯入到Rstudio，開始按照youtube的影片教學

練習跟跟影片教學中https://www.youtube.com/watch?v=0gf5iLTbiQM2小時07分開始進行練習

以下是我的資料> d<-read.csv(""C:\\Users\\1503063\\Desktop\\平均溫度.csv"")> dYear    Jan     Feb     Mar     Apr     May     Jun     Jul     Aug     Sep     Oct     Nov     Dec
2010    15.9    16.7    19      20.3    25      26.5    29.9    29.6    28.1    24.3    20.9    16.4
2011    13.3    15.2    15.5    21      24.3    28.5    28.8    29.2    27.7    24.5    22.7    16.6
2012    15.3    14.9    17.4    23.3    25.8    27.8    29.7    28.6    26.8    23.9    21      17.3
2013    5.8     17.3    19.2    20.9    26      28.9    28.9    28.9    27.7    24.2    21      16.1
2014    15.6    15.4    18      22.3    25.3    28.3    30.4    29.9    29.6    24.7    22      16> myts <- ts(d, start=c(2010,1), end=c(2014,12), frequency=12)> class(myts)[1] ""mts""    ""ts""     ""matrix""> plot(myts)出現錯誤是說
Error in plotts(x = x, y = y, plot.type = plot.type, xy.labels = xy.labels,
 :
  cannot plot more than 10 series as ""multiple""

看不懂為何會出現""mts""    ""ts""     ""matrix""  而不是影片中的""ts""

然後查了資料是說class
class to be given to the result, or none if NULL or ""none"". The default is
""ts"" for a single series, c(""mts"", ""ts"", ""matrix"") for multiple series.

不知道有高手知道是我哪邊錯誤了! Q^Q  先感謝大家


--

--","R_Language"
"1367","M.1470639907.A.EA9","wheado","問題","有關網路爬蟲""網址(url)""的問題",2016-08-08 15:05:04,NA,NA,"問題：

      有關於網頁的""url""問題

程度：

      新手

敘述：

      我想對一個網站(某個租屋網)進行資料收集，

      該網站將屋子訊息每20筆放在一個分頁，

      但是當我點入第二個分頁時，

      網址在後面只多了""#list""，

      當我點入第三個分頁時，仍就是如此，找不到網頁的網址。

      想請問有沒有類似的關鍵字可以讓我搜尋相關的問題。

      謝謝。

程式：

require(""XML"")
require(""httr"")
.get     <- GET(""https://rent.591.com.tw/"").content <- content(.get,""text"")
.htmlParse  <- htmlParse(.content)
.web        <- xpathSApply(.htmlParse,""//div[@class='left']/a[@href]"",
                           xmlAttrs)

##  The first 20 data information  in the page-1.
.web[1,]


環境：
      Windows R-3.2.5


--","R_Language"
"1368","M.1470481113.A.F54","Tampa","問題","如何用R讀取本地的mdb檔?",2016-08-06 18:58:31,NA,NA,"因為工作需求

需要操作Access

希望可以用R語言來讀取，並從中分類資料

上網查詢後 得知需要用的套件為Hmisc

載下來後並測試幾次後 都無法成功讀取

煩請各位大大幫忙解惑

以下為我的程式碼

library(Hmisc)

Y<-mdb.get(""C:/Users/hippo/Desktop/lahman-mdb_2016-03-02 (2)/lahman2015.mdb"")

會一直噴以下錯誤

Error in system(paste(""mdb-tables -1"", file), intern = TRUE) :
  'mdb-tables' not found



--","R_Language"
"1369","M.1470422861.A.04C","f496328mm","問題","bigmemory 用ssd硬碟會變快嗎?",2016-08-06 02:47:38,NA,NA,"最近在用bigmemory套件

因為要用平行  所以要把讀資料的過程寫在函數中  才不用把data傳給每個不同的R

所以會一直讀取存放在硬碟的DATA

---------------------------------------------------
以上是題外話

bigmemory用起來是把data存放在HHD而不是RAM中

那我如果把HHD改成SSD    這樣程式效率會變快嗎?

雖然目前讀資料不用一秒   還是想問問看

這問題可能比較偏資工了

DATA存放在  RAM  V.S  HHD    對於R執行程式效率上的差異

如果SSD會比HHD好的話   打算換一個   增加效率

順便把R也灌在SSD     看看速度會不會變快

因為目前有在執行跟bigmemory相關的code時   電腦就會變很慢

在做其他的反而不會

謝謝

--","R_Language"
"1370","M.1470320873.A.5A5","GetRobin","問題","爬蟲相關問題",2016-08-04 22:27:49,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
目前想抓取求職天眼通各公司的討論串，
不過碰到問題是進入個別討論串後，
(例如https://disqus.com/home/discussion/clv-bakc-end/_1111_811556/)，
使用rvest或RSelenium都抓不到討論內容，
不知該怎麼處理。

[程式範例]:
library(RSelenium)
remDr <- remoteDriver(remoteServerAddr = ""localhost""
                      , port = 4444
                      , browserName =""firefox""
)
remDr$open()
remDr$navigate(""https://disqus.com/home/discussion/clv-bakc-end/_1111_811556/"")
page_source<-remDr$getPageSource()
page_source ##page_source沒討論內容，去抓html的nodes也就抓不到了


[關鍵字]:
爬蟲

--","R_Language"
"1371","M.1470291500.A.E08","clansoda","問題","Re: 自動跳過填入驗證碼",2016-08-04 14:18:16,NA,NA,"我這個問題像這樣，這是個簡化的function型態

  problemsolver<-function(x,y) {

       z<-x^2
       if (exists(""y"")) {
             paste0(z,y)->r
             print(r)          }
                                 }

我希望能在只有x填入的情況下，也就是Y根本沒值的情況下

他只跑z<-x^2，理論上它應該只會print(z)這個值出來

而在有Y的情況下，他會執行下面的斷paste0的代碼然後print(r)

因為她有print他應該就會忽略Z這個值

但是現在只要我只丟X進去，他就會寫argument ""y"" is missing, with no default

這應該是代表他仍舊有跑下面這段代碼的意思吧

那應該要如何寫才能讓他在沒Y的情況下忽略if這段程式碼呢?

我在console裡面打exists回傳的都是TRUE或FALSE的值，因此我才認為可以用exists

來控制，但是看起來跟我想像的不同。

--","R_Language"
"1372","M.1470285484.A.7A9","greatjus","問題","迴圈中相同名稱都覆蓋了還是記憶體不足",2016-08-04 12:38:01,NA,NA,"使用經驗:2年，還OK

[問題]

我在使用R將資料存成不同檔案

首先是我有一筆大資料 A 我已經預先把 A 切割成 a1,a2,a3...,a140

再來是我寫迴圈，讓資料自動讀入、寫出，但是碰到問題是迴圈j
在一開始j=1到5時，都跑得很快，但是等j比較大之後就跑很慢

我有打開工作管理員看，比較發現每次回圈
都會使得R在""記憶體""的部分佔更大的比例，
後面甚至會佔到70%電腦記憶體以上。

我的疑問是，我回圈內所有的名稱，都是相同的名稱，應該下一次迴圈
都會覆蓋掉前一次迴圈物件才對，
不應該每跑一次迴圈，佔更多的記憶體阿?


[MY CODE]

library(data.table)
for(j in 0:34)
{[email<U+00A0>protected]#$
rm(list=ls(all=TRUE))
}





裡面的[email<U+00A0>protected]#$=

讀取 連續的4筆資資料
b1=a(j*4+1)
b2=a(j*4+2)
b3=a(j*3+3)
b4=a(j*4+4)       #相當於j=0時讀取 a1,a2,a3,a4
B=rbind(b1,b2,b3,b4)

寫成B之後我有再刪減掉一些不需要的欄或列，以及加入一些新的變項
加入的變數我舉個例子，因為我怕記憶體會不足跟這個有關

Disease =cbind(Disease1 ,Disease2 ,...,Disease29)
Medicine=cbind(Medicine1,Medicine2,...,Medicine23)

最後是把加入的變數跟刪減後小很多的B合併再一起存成一個text檔

Final=cbind(B,Disease,Medicine)
write.table(Final,file = paste0('C:/users/data',j+1,'.txt'))
                             #相當於每個迴圈對應存成1個data
                             #data1到data34

想請問有碰過類似問題的人怎麼解決呢?
我也有google過R memory，很多都是在討論rm()和gc()
但是我看不太懂gc()......
想請有經驗的人幫幫我
不論你是誰，真的非常謝謝你的分享







--","R_Language"
"1373","M.1470242016.A.77A","x9060000456","問題","關於pchisqsum 做 power simulation",2016-08-04 00:33:33,NA,NA,"各位大神前輩大家好
目前在做統計分析，因為統計模型類似SKAT，
因此使用 'survey'這個packages下的 pchisqsum
進行p-value的運算，則以下是 survey 的 manual 下的例子，

x <- 2.7*rnorm(1001)^2+rnorm(1001)^2+0.3*rnorm(1001)^2
x.thin<-sort(x)[1+(0:100)*10]
p.invert<-pchisqsum(x.thin,df=c(1,1,1),a=c(2.7,1,.3),method=""int""
,lower=FALSE)
p.satt<-pchisqsum(x.thin,df=c(1,1,1),a=c(2.7,1,.3),method=""satt"",lower=FALSE)
p.sadd<-pchisqsum(x.thin,df=c(1,1,1),a=c(2.7,1,.3),method=""sad"",lower=FALSE)
plot(p.invert, p.satt,type=""l"",log=""xy"")
abline(0,1,lty=2,col=""purple"")
plot(p.invert, p.sadd,type=""l"",log=""xy"")
abline(0,1,lty=2,col=""purple"")
pchisqsum(20, df=c(1,1,1),a=c(2.7,1,.3), lower.tail=FALSE,method=""sad"")

如果只是一般的 pchisq 這個function，就有相關套件可以進行power simulation，
因此想請問各位大大pchisqsum 該如何運算 power，
非常謝謝!!

--","R_Language"
"1374","M.1470217067.A.9F8","banana08","問題","訓練與測試資料詢問",2016-08-03 17:37:44,NA,NA,"如題今天利用了訓練與測試資料用R跑
結果跑出以下錯誤
Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 + isOF[nn]]) : contrasts can be applied only to factors with 2 or more levels
想請問這是甚麼原因呢？是他只能用連續性資料去跑嗎？
-----
Sent from JPTT on my iPhone

--","R_Language"
"1375","M.1470197230.A.083","clansoda","問題","自動跳過填入驗證碼",2016-08-03 12:07:06,NA,NA,"各位好，我有一些報表要從GA抓取，但是想讓他自動化

因此我寫了一個function想完成這件事

我現在有兩個問題，第一個是我賦予這個function三個argument

分別是year、month與quarter，我想讓使用者在沒填入quarter這個

argument的情況下不要跑某一段的程式碼，因此我用了exists這個函數

我寫成 if (exists(""quarter"")) {巴拉巴拉} ，我的認知裡只要exists回傳

TRUE他應該就會跑下面這段，而是FALSE則不跑，可是我拿去測試後發現

就算我沒放入quarter這個argument他依然會跑下面這段然後跑出error

想請教要如何做才能在沒有這個變數的情況下忽略這段程式碼呢

第二個問題是關於package rga，他是一個可以與GA的API整合的package

開始的時候要使用rga.open這個function來跟GA連結，然後她會開啟一個網頁

上頭有驗證碼要你填入R裡面，想請問有方法能讓他自己抓取這段驗證碼然後填入嗎

因為後來可能不是我要用這段程式碼，想讓使用者更方便的能自動抓取資料

--","R_Language"
"1376","M.1470143735.A.0DB","swilly0906","問題","看不是很懂的warning訊息",2016-08-02 21:15:33,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的看不懂一個警告訊息,已經出現好幾天了...:

 In grepl(""|||"", what, fixed = TRUE) : input string 1 is invalid in this
locale

我有用help(grepl)稍微看了一下這個指令在幹嘛

這個指令我的理解好像是 類似在抓取字元或數值用的吧(我猜的拉 我不確定@@"")

但我從頭到尾沒有用過上面指令壓

我只是把我的資料其中某一個變數從numeric 轉成factor並且使用levels跟labels重新

命名而已

然後就出現這個警告訊息

可是..就算我不理會此訊息

我還是可以繼續進行接下來的工作
-------------------------------------------------------------------
拍謝拍謝

我以為不用貼code ><

我的指令如下:

bird$""日期""<- factor(bird$""日期"",levels=c(100,101,102,103,104),labels=c(""100年"",""101年
"",""102年"",""103年"",""104年""))

這裡的""100年"" 只是在講民國100年的意思而已

--","R_Language"
"1377","M.1470131412.A.F9B","banana08","問題","logit迴歸請教",2016-08-02 17:50:10,NA,NA,"請問一下
最近再跑一羅吉斯回歸遇到問題想請問大家
大概是利用31個因素去判斷結果是危險或不危險
過程和結果如下：
我先利用逐步回歸刪除一些因子http://i.imgur.com/a5cj7M4.jpg結果http://i.imgur.com/Aim7DgC.jpg再用逐步得到的因子跑回歸http://i.imgur.com/T4Ekkg0.jpg最後得到http://i.imgur.com/aQYesLy.jpg然後我把最後得到的值帶入原先檔案中
每個因子加起來假如大於0.5是危險小於0.5是不危險

但為什麼全部都是不危險
是我沒做到哪些狀況嗎？
請大家幫忙解惑謝謝！
-----
Sent from JPTT on my iPhone

--","R_Language"
"1378","M.1470125653.A.C63","clansoda","問題","一個除以一個",2016-08-02 16:14:09,NA,NA,"這問題有點白痴，我是想問問有沒有更好的方法

假設我現在有個dataframe，裡面有個feature叫做銷售量好了

我想算成長率，例如八月的銷售成長率就是以七月當基期

讓八月的值除以七月，我現在只會用土法煉鋼的用for loop來做

想問問有沒有能用plyr,dplyr類似package媕Y的mutate function

我的問題應該是直接生成新的一個feature然後媕Y的值是

九月除八月，八月除七月，七月除六月這樣的問題，希望能以更簡單的方式完成

，感謝各位

--","R_Language"
"1379","M.1470119396.A.D8E","swilly0906","問題","如何講年月轉成只有月份呈現??",2016-08-02 14:29:53,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
其實有點不知道標題要怎麼打才對XD

我把Excel讀到R裡面進行作業

我現在有一個變數欄位叫做""年月"":

0302  <-3年又2個月
0204  <-2年又4個月
1011  <-10年又11個月


我想把資料轉成:
38
28
131


這個資料有上萬筆 所以我也沒辦法土法煉鋼,對了 我這個年月的變數最多只到2000(20年
而已)不會有破百年問題，所以皆為4位數

想請問R(或Excel)有沒有什麼方式可以去做我上面的要求QQ??



[環境敘述]

我用Win10
r 最新版的
[關鍵字]:


將年月轉成用月數來呈現!!

--","R_Language"
"1380","M.1470118718.A.702","a9995559","問題","指令錯誤",2016-08-02 14:18:36,NA,NA,"今天在使用R撈臉書的data時，出現了一個問題

不知道版上有沒有人了解這錯誤碼的意思?

上網查了些資料，似乎仍然沒有改善!


謝謝!!

指令碼如下> users<-getUsers(likes$from_id,token=fb_oauth,private_info = F)Error in callAPI(query, token) :
  (#100) Tried accessing nonexisting field (first_name) on node type (Page)

--","R_Language"
"1381","M.1470081533.A.082","Ian10","問題","套件撰寫(undocumented data)",2016-08-02 03:58:50,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

  大家好:我想請問關於撰寫R套件的問題。

原本在撰寫套件時,我將全部有使用到的範例都寫成rd檔,但後來發現太過攏長,

希望改成內建資料不寫出他的詳細內容,只在主程式的Example中供使用者做範例。

於是,我直接將範例所使用到的rd檔從""man""的資料夾中刪除後,按下""check""後

會有一個warning 訊息: ""checking for missing documentation entries""

告訴我這些資料要加上rd檔。但產生出來的pdf檔已幫我把全部資料的rd檔刪除

(符合我的要求)

  我想請問如何解決這個warning?(有出現warning上傳到CRAN應該過不了吧?!)

還是說有用到的data就一定要寫rd檔?

在google搜尋找到兩個方法 (1.用到的data改放在主程式的資料夾裡(""R"")
                          2.同一個目錄再創一個資料夾,把data放進去)

兩個方法試完之後更慘,都從warning變error...

爬了一下文發現大家好像比較沒有這種問題QQ

第一次PO文如果有排版太難看的問題敬請見諒

謝謝大家

[環境敘述]:

R的版本:3.3.0

[關鍵字]:

package

--","R_Language"
"1382","M.1469890439.A.458","tytony","問題","Shiny在指定時間重跑程序",2016-07-30 22:53:56,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

各位先進好

我的程式是要讓Shiny在指定時間到網站上撈最新數據，然後做出圖表

先前有用過reactiveTimer()這個指令讓某段程序間隔一定時間重跑

但假設網站資料是每整點更新，reactiveTimer設定時間太長會延遲抓到資料的時間

若設定時間太短又會增加不必要的資料連線傳輸

是否有方法能夠指定像在系統時間""整點+2分鐘""來reactive這段程序

謝謝.

--","R_Language"
"1383","M.1469872682.A.A21","f496328mm","問題","R背景記憶體使用量控制",2016-07-30 17:58:00,NA,NA,"想問怎麼控制R在背景記憶體使用量（開工作管理員看到的RAM使用量）

我開R studio ，看到我目前的變數size都不會太多，總共加起來不到10mb

但是工作管理員的R卻佔超過2GB

可能是運算過程產生的? 有沒有辦法刪除 ?


我目前在做8千萬筆的DATA，大慨3GB，

目前用bigmemory讀進去，R studio顯示size不到1mb

我不知道到底是誰在後面佔用我的ram

想問問看有沒有什麼指令可以看到

這是變數佔的size  和我的工作管理員http://imgur.com/DrljpW3-------------------------------------
code:

map=find_map_fun(train_data[,2],1111)#train_data有8千萬筆

find_map_fun=function(data,num){
  bo=as.integer( data==num )
  bo_matr=matrix(bo)
  map=which(apply(bo_matr, 1L,
                  function(row) all(row == 1)))
  return(map)
}

---------------------------------------------

目前光做這件事，就讓背景ram飆到2gb了

function中的變數不是執行完就會自動刪除嗎?

到底是誰在背後佔空間@@

謝謝

--","R_Language"
"1384","M.1469866285.A.159","NewTaipeCity","問題","新手安裝RStudio 未見台灣伺服器",2016-07-30 16:11:23,NA,NA,"[問題類型]:
軟體問題

[軟體熟悉度]:新手

[問題敘述]:http://i.imgur.com/0jVES5U.png按照書本指示
應該有台灣伺服器
目前找不到
謝謝

[程式範例]:

[環境敘述]:
RStudio-0.99.903.exe

[關鍵字]:
RStudio
台灣伺服器


--","R_Language"
"1385","M.1469813601.A.FD0","celestialgod","分享","ROracle",2016-07-30 01:33:17,NA,NA,"[關鍵字]: Oracle, R

[出處]:https://goo.gl/8w35WU[重點摘要]:

在windows/centos中安裝ROracle

示範怎樣去大量上傳需要的資料表

(PS: 範例從package的dataset，可以改成用讀檔上傳的方式，自行發揮)

並且示範其他各種函數用法

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1386","M.1469765106.A.8AC","fifish89","問題","換藥天數",2016-07-29 12:05:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

主要是想知道藥物轉換的所有順序及平均使用天數

[軟體熟悉度]:
有使用R

[問題敘述]:
每個人都有使用多種藥物的種類與天數，
假設有A,B,C,D藥物，會有多種組合，
A-->B
A-->C-->D
B--->D-->A
.
.
.
也有可能再回頭吃已經吃過的藥物
A-->C--->D--->C--->A
若每個箭頭我都知道使用天數，

那如何可以知道每個人的用藥順序是如何?
因為想要計算藥物和藥物轉換的平均使用天數?


ID  使用天數  藥物種類
1      3         A
1      5         B
2      4         B
2      1         C
2      2         D
3      4         A
3      2         B
3      3         C
4      2         D
4      3         B
4      3         C
4      6         D


ID=1,用藥順序 :A-->B
ID=2,用藥順序 :B-->C-->D
ID=3,用藥順序 :A-->B-->C
ID=4,用藥順序 :D-->B-->C-->D

想知道A--->B的平均用藥天數 : 3.5天 = 3(ID=1)+4(ID=3)/2(人)
      B--->C               : 3天 = 4(ID=2)+2(ID=3)+3(ID=4)/3(人)
.
.
藥物跟藥物轉換的所有可能


[程式範例]:

[環境敘述]:

[關鍵字]:藥物轉換


--","R_Language"
"1387","M.1469718816.A.14D","x1234567","問題","如何下載網頁連結檔案(EXCEL)並轉成CSV",2016-07-28 23:13:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
為了定期自下列網址下載每個Excel檔並轉成文字檔(csv or txt)給其他軟體吃http://www.jcic.org.tw/main_ch/docDetail.aspx?uid=217&pid=217&docid=333想請問可以用什麼語法？

猜想要三個步驟：
1.下檔至本機 D:\
2.將Excel的某個sheet擷取某個範圍(去掉合併儲存格說明)讀進 R
3.用 R 寫出csv

謝謝！

[環境敘述]:
R 3.3.1 for windows

[關鍵字]:
網路（網頁）下檔
讀Excel
寫出csv

--","R_Language"
"1388","M.1469630379.A.525","girl5566","問題","如何安裝data.table 1.9.7?",2016-07-27 22:39:37,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想嘗試利用fwrite 把大量的資料集較快速的寫成csv

但於安裝data. table 1.9.7

發生以下錯誤

* installing *source* package 'data.table' ...
** libs
Warning: 執行中命令 'make -f ""Makevars"" -f
""C:/PROGRA~1/R/R-33~1.1/etc/x64/Makeconf"" -f
""C:/PROGRA~1/R/R-33~1.1/share/make/winshlib.mk"" SHLIB=""data.table.dll"" WIN=64
TCLBIN=64 OBJECTS=""assign.o bmerge.o chmatch.o dogroups.o fastmean.o fcast.o
fmelt.o forder.o frank.o fread.o fsort.o fwrite.o gsumm.o ijoin.o init.o
openmp-utils.o quickselect.o rbindlist.o reorder.o shift.o subset.o
transpose.o uniqlist.o vecseq.o wrappers.o""' 已有狀態 127
ERROR: compilation failed for package 'data.table'
* removing 'C:/Users/YuTien/Documents/R/win-library/3.3/data.table'
* restoring previous 'C:/Users/YuTien/Documents/R/win-library/3.3/data.table'
Warning in install.packages :
  running command '""C:/PROGRA~1/R/R-33~1.1/bin/x64/R"" CMD INSTALL -l
""C:\Users\YuTien\Documents\R\win-library\3.3""
C:\Users\YuTien\AppData\Local\Temp\RtmpqgbnwA/downloaded_packages/data.table_1.9.7.tar.gz'
had status 1
Warning in install.packages :
  installation of package ‘data.table’ had non-zero exit statushttp://tinyurl.com/huvhnvu[程式範例]:
require(data.table) # v1.9.7
require(feather) # v0.0.0.9000
require(readr) # v0.2.2
DTn = function(N) data.table(
  str1=sample(sprintf(“%010d”,sample(N,1e5,replace=TRUE)), N, replace=TRUE),
  str2=sample(sprintf(“%09d”,sample(N,1e5,replace=TRUE)), N, replace=TRUE),
  str3=sample(sapply(sample(2:30, 100, TRUE), function(n)
paste0(sample(LETTERS, n, TRUE), collapse=””)), N, TRUE),
  str4=sprintf(“%05d”,sample(sample(1e5,50),N,TRUE)),
  num1=sample(round(rnorm(1e6,mean=6.5,sd=15),2), N, replace=TRUE),
  num2=sample(round(rnorm(1e6,mean=6.5,sd=15),10), N, replace=TRUE),
  str5=sample(c(“Y”,”N”),N,TRUE),
  str6=sample(c(“M”,”F”),N,TRUE),
  int1=sample(ceiling(rexp(1e6)), N, replace=TRUE),
  int2=sample(N,N,replace=TRUE)-N/2
)
set.seed(21)
DT = DTn(1e6)
Either ram disk :
  setwd(“/dev/shm”)
or HDD/SDD :
  setwd(“~”)
system.time(fwrite(DT,”fwrite.csv”))

[環境敘述]:
R3.3.1 Win 7 64bit

[關鍵字]:選擇性，也許未來有用--","R_Language"
"1389","M.1469622120.A.01D","girl5566","問題","大量資料集如何使用stepwise?",2016-07-27 20:21:57,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
目前的資料量為84rows 80000columns  第一欄為Y值其他皆為X

在1000個欄位的時候 stepwise都很快的反應出來

但是在10000個欄位時，效能極差

[程式範例]:
library(Rcmdr)
require(MASS)
data.lm <- lm(Y ~ ., data = bwt)
stepwise(data.lm, direction=""forward/backward"")

--","R_Language"
"1390","M.1469617915.A.267","celestialgod","問題","Re: 爬蟲新手問題",2016-07-27 19:11:52,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: [問題類型]:: 網頁爬蟲，已找出xpath，但無法製作成data.frame: [軟體熟悉度]:: 中新手: [問題敘述]:: 網頁爬蟲，想把wiki的球隊資訊爬下來: [程式範例]:: library(magrittr): library(rvest): URLteam <-: ""https://zh.wikipedia.org/wiki/%E7%BE%8E%E5%9C%8B%E8%81%B7%E6%A5%AD%E6%A3%92%E7%90%83%E5%A4%A7%E8%81%AF%E7%9B%9F"": #網頁: xpathTeam <- ""//table[@class='navbox wikitable']/tbody/tr/td[1]""#球隊隊名的: xpath: docTeam <- read_html(URLteam, encoding=""UTF-8"")#將網頁讀進R: rankTeam<- docTeam %>%:   html_nodes(.,xpath = xpathTeam) %>%:   html_text %>%:   iconv(from = ""UTF-8"", to = ""UTF-8""): stockTmp <- data.frame(team=docTeam): 以下是我噴錯的error: Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors =: stringsAsFactors) ::   cannot coerce class ""c(""xml_document"", ""xml_node"")"" to a data.frame: 問題1: 不知道怎麼了解自己xpath有沒有抓對: 問題2:data.frame是不是有設定錯誤?1. 看起來沒問題
2. doc_team轉成data.frame?? 應該是rankTeam


如果我寫會這樣寫：

library(pipeR)
library(rvest)
library(httr)
library(stringi)
library(data.table)

Sys.setlocale(""LC_ALL"", 'C') # for windows

URLteam <- paste0(""https://zh.wikipedia.org/wiki/%E7%BE%8E%E5%9C%8B"",""%E8%81%B7%E6%A5%AD%E6%A3%92%E7%90%83%E5%A4%A7%E8%81%AF%E7%9B%9F"")
rankTeam <- URLteam %>>% GET %>>% content %>>%
  html_nodes(xpath = ""//table[@class='navbox wikitable']"") %>>%
  html_table(fill = TRUE) %>>% `[[`(1) %>>% data.table %>>%
  `[`( , lapply(.SD, function(x) stri_conv(x, ""UTF-8"", ""BIG5""))) %>>%
  (setnames(., stri_conv(names(.), ""UTF-8"", ""BIG5"")))

Classes 'data.table' and 'data.frame':  32 obs. of  7 variables:
# $ 分區     : chr  ""美國聯盟"" ""東區"" ""波士頓紅襪\nBoston Red Sox"" ...
# $ 隊伍     : chr  NA ""巴爾的摩金鶯\nBaltimore Orioles""  ...
# $ 區域/城市: chr  NA ""馬里蘭州，巴爾的摩\nMaryland, Baltimore""  ...
# $ 主場     : chr  NA ""金鶯公園\nOriole Park At Camden Yard"" "" ...
# $ 坐標     : chr  NA ...
# $ 成立時間 : chr  NA ""1894年"" NA NA ...
# $ 加入??   : chr  NA ""1901年"" NA NA ...
# - attr(*, "".internal.selfref"")=<externalptr>

剩下再做一些資料整理就好了，他有一些跨欄的表格

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1391","M.1469527614.A.E10","Tampa","問題","爬蟲新手問題",2016-07-26 18:06:51,NA,NA,"[問題類型]:

網頁爬蟲，已找出xpath，但無法製作成data.frame


[軟體熟悉度]:

中新手


[問題敘述]:

網頁爬蟲，想把wiki的球隊資訊爬下來


[程式範例]:
library(magrittr)
library(rvest)
URLteam <-
""https://zh.wikipedia.org/wiki/%E7%BE%8E%E5%9C%8B%E8%81%B7%E6%A5%AD%E6%A3%92%E7%90%83%E5%A4%A7%E8%81%AF%E7%9B%9F""#網頁
xpathTeam <- ""//table[@class='navbox wikitable']/tbody/tr/td[1]""#球隊隊名的
xpath
docTeam <- read_html(URLteam, encoding=""UTF-8"")#將網頁讀進R
rankTeam<- docTeam %>%
  html_nodes(.,xpath = xpathTeam) %>%
  html_text %>%
  iconv(from = ""UTF-8"", to = ""UTF-8"")
stockTmp <- data.frame(team=docTeam)


以下是我噴錯的error

Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors) :
  cannot coerce class ""c(""xml_document"", ""xml_node"")"" to a data.frame


問題1: 不知道怎麼了解自己xpath有沒有抓對

問題2:data.frame是不是有設定錯誤?

--","R_Language"
"1392","M.1469452727.A.CF6","pockychu","問題","字串怎麼變數字?... 做關聯性分析(cor)",2016-07-25 21:18:44,NA,NA,"[問題類型]:
有一組open data 內容為每一年男女 身高 體重的資料
x軸為year  gender  height  weight

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要做關聯性分析 correlation coefficient 並畫圖
看年度 性別 身高 體重 兩兩之間誰最有關聯
但cor的資料必須要為numeric
我想要把性別變成numeric 再做cor
看似簡單 但嘗試了很多語法 都做不出來QWQ
或者是可以自己指定男為0 女為1

[程式範例]:
以下是我試過的
data$x = as.numeric(data$x)
data<-as.numeric(as.character(data$gender))
data[indx] <- lapply(data[indx], function(x) as.numeric(as.character(x)))

以下分別是以上方法的錯誤訊息
Warning message:
NAs introduced by coercion

Error in `$<-.data.frame`(`*tmp*`, ""x"", value = numeric(0)) :
  replacement has 0 rows, data has 58046


拜託了>""< 謝謝!!!!

--","R_Language"
"1393","M.1469439520.A.26A","jklkj","問題","句子分群",2016-07-25 17:38:37,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:大家好，我目前有很多客訴留言，之前公司有大致將留言做分類，目前我想用文字探勘的方法把之後的留言做分類，大致上是如果有n類，那我就設n+1，多出來的一類設為不確定再用人工判斷那不確定的，之後再匯入模型中之前做分群都是用顧客消費金額，在文字探勘分群想請大家幫忙解答例如斷字用jiebaR然後分群用kmeans之類的感謝[程式範例]:

[環境敘述]:目前有在桌機跟終端機上用R 3.3.0--","R_Language"
"1394","M.1469369923.A.5E6","f496328mm","問題","fread讀資料 and 使用 snow 平行",2016-07-24 22:18:41,NA,NA,"上面有問過一篇如何讀取3G的DATA

-----------------------------------------------------------

所以現在使用fread 去讀取3G的DATA，但是這樣會讓我RAM至少花3G在跑

如果要使用snow去做平行，我幾乎要複製同等大小的DATA給不同的R

例如我要開6個做平行，那我就要花費3G*7=21G的RAM

(我工作管理員有8個程序在跑)

即使開到4個做平行，也要3G*5=15G的RAM


這樣RAM使用量太大了，雖然可以加裝RAM到32G

但有沒有別的方法，一次性對整個DATA去處理，

我知道可以把DATA分幾塊，做完輸出清空RAM，在去做下一塊DATA

但這樣有點麻煩
----------------------------------------------------------

有看到下面那篇 bigmemory

目前正在嘗試中

謝謝

--","R_Language"
"1395","M.1469354217.A.46B","celestialgod","分享","Re: 更進一步使用RSelenium抓取PTT內容與通知",2016-07-24 17:56:52,NA,NA,"※ 引述《wanson (望生)》之銘言：: 最近看到有人教學使用RSelenium 抓取PTT的內容: https://www.youtube.com/watch?v=PYy5C9IIgp8: 我自學了一下發現的確可行: 我自己本身因為有搭共乘的需求: 特別搭乘的是比較少人提供的部分: 所以我想更進一步使用這個方法並且進一步通知: 上述網址的教學只能將爬到的檔案存成一個file: 並且限制在該網頁的首頁: 但是我希望更多的功能為以下，想要請問一下不知道可否使用R更進一步處理: 1. 爬取更多頁面或是該版所有的頁面: 這個部分我發現: 他似乎根據網址的index那邊變動: 如果我使用最舊就會等於1，下一頁就是二: 但我使用最新他只會顯示index: https://www.ptt.cc/bbs/car-pool/index2.html: 似乎可以寫回圈去提取: 2.  定期自動爬蟲: 我想要讓電腦設定每兩小時爬一次，不知道要怎樣設定: 不知道是否可以教學一下: 謝謝: 以下是使用他的教學我產生的code: library(RSelenium): url= ""https://www.ptt.cc/bbs/car-pool/index.html"": remDr <- remoteDriver(remoteServerAddr = ""localhost"":                      , port = 4444:                      , browserName =""firefox"": ): remDr$open() #open browser: remDr$getStatus()#check the status of browser: remDr$navigate(url)# website to crawl: #the separate symbol in ppt is r-ent: #get the element from the website: webElem<-remDr$findElements('css selector', "".r-ent"")#class for period (.) id: then use #: a = sapply(webElem, function(x){:   c =x$findChildElement('css selector', '.author'):   d =x$findChildElement('css selector', '.title'):   e =x$findChildElement('css selector', '.date'):   cbind(c(""author"" = c$getElementText(), ""title"" =: d$getElementText(),e$getElementText())):   }: ): t=as.data.frame(t(a))第一個問題的話就是抓上一頁的按鈕連結，然後再慢慢往前轉就好，下面舉例

RSelenium是滿好入手的工具

抓到感覺後就可以慢慢開始用httr, xml2去抓網頁，速度會相對快很多

舉例如下：

(stri_conv只用在windows系統，linux/mac可以不需要)

library(httr)
library(xml2)
library(pipeR)
library(stringi)
library(stringr)

# url
url <- ""https://www.ptt.cc/bbs/car-pool/index.html""# parse網頁
html_nodex <- GET(url) %>>% content
# 找轉頁數的按鈕
btnPageChange <- html_nodex %>>% xml_find_all(""//div/a[@class='btn wide']"")
# 找上一頁按鈕的位置
locPrevPage <- btnPageChange %>>% xml_text %>>%
  stri_conv(""UTF8"", ""BIG5"") %>% str_detect(""上頁"")
# 看上一頁的index編號
indexCount <- btnPageChange[locPrevPage] %>>% xml_attr(""href"") %>>%
  str_match(""index(\\d{4})"") %>>% `[`(2) %>>% as.integer

# 要抓的欄位資訊
infoVec <- c(title = ""//div[@class='title']"",
             date = ""//div[@class='date']"",
             author = ""//div[@class='author']"")
# 先抓第一頁的
info <- sapply(infoVec, function(xpath){
  xml_find_all(html_nodex, xpath) %>>% xml_text %>>%
    stri_conv(""UTF8"", ""BIG5"") %>>% str_replace_all(""\t|\n| "", """")
})

# 把前天的日期抓出來 (只要date出現前天，就停止，
# 當然有可能置底是前天發的就GG了，這個再自己修改)
crawlDate <- format(Sys.Date()-2, ""%m/%d"") %>>%
  str_extract(""[1-9]{1,2}/\\d{2}"")
while (continueCrawl)
{
  # 把index.html改成上一頁/上上一頁/...
  html_nodex <- url %>>%
    str_replace(""index.html"", sprintf(""index%i.html"", indexCount)) %>>%
    GET %>>% content
  # 抓出那一頁的資訊
  tmpInfo <- sapply(infoVec, function(xpath){
    xml_find_all(html_nodex, xpath) %>>% xml_text %>>%
      stri_conv(""UTF8"", ""BIG5"") %>>% str_replace_all(""\t|\n| "", """")
  })
  # 跟之前的合併
  info <- rbind(info, tmpInfo)
  # 如果出現不是昨天日期的就停止
  if (any(tmpInfo[ , ""date""] == crawlDate))
    continueCrawl <- FALSE
  indexCount <- indexCount - 1
}
info # 即為所求

每兩小時執行一次的話，就外面加一層while (TRUE)然後搭配Sys.sleep使用

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1396","M.1469300017.A.7D0","naturalsmen","分享","quantstrat 套件分享",2016-07-24 02:53:28,NA,NA,"1. 套件名稱：

quantstrat 0.9.1739

Depends:
    R(>= 2.10),
    quantmod,
    xts(>= 0.8-2),
    blotter(>= 0.9),
    FinancialInstrument(>= 0.12.5),
    foreach(>= 1.4.0)

Repos:https://github.com/braverock/quantstrathttps://R-Forge.R-project.org2. 套件主要用途：

提供股票和各國貨幣等資產組合模擬交易的框架
能夠產生商品k線圖、進出場flag、留倉部位等
也支援使用者定義的技術指標、買賣手續費設定http://imgur.com/a/BJ5Zo提供交易次數、Annual Sharpe Ratio、MAE、MFE、年化算術平均/幾何報酬率等統計資料http://imgur.com/a/RsTO1還有基於平行運算的Walk Forward Analysishttp://imgur.com/a/vsm9l但因為OS的問題 註冊cluster的方式不一樣 需要不同的package
Windows: doParallel、doRedis、snow等
Ubuntu: doMC

由於多數Finance相關的package都是基於quantmod的框架再延伸
所以有蠻多相依的套件，但我覺得主要功能是在quantstrat
所以標題就用quantstrat了XD


3. 套件主要函數列表：

quantstrat:
add.indicator
add.signal
add.rule
applyStrategy
apply.paramset
add.distribution
add.distribution.constraint
walk.forward

blotter:
tradeStats
chart.Posn

FinancialInstrument:
currency
stock

4. 分享內容：

其實網路上資料蠻多的，但都是英文
所以我很納悶怎麼都沒有人寫中文的教學文
台灣看到的回測程式大多是用Python、VBA或現成套裝軟體居多
想說可以推廣一下R這個還蠻方便的package

Analysis、Visualization和用平行運算處理參數最佳化和WFA是他的特色
不過覺得他的documentation不是很完整
由於我今年GSoC的project是整合Josh新的xts_0.10-0和quantmod、quantstrat等套件
和加入dynamic graphs feature
順利的話在計畫結束前應該能把他補得更完整

如果想要自動交易
台灣券商的話 可以將R作為computing server
將結果pass到C++進行下單

國外券商的話
可以用IBroker直接用R跟國外券商API串接
就可以下單了

如果跟shiny結合 就可以做出一個簡單的線上應用https://naturalsmen.shinyapps.io/Backtest這是小弟有段時間之前寫來自用的
已經內建策略了
所以請忽略首頁設定參數的tab
直接到Backtest 選擇股號就可以run了
run完請選擇Backtest result
highchart是我之前加上去的
不在本文介紹的範圍內
日後有時間應該會把他完善
這邊就先用來做個簡單的範例

------以下正題------

以Windows為例

library(doParallel) # for apply.paramset() and walk.forward()
library(quantstrat) # main package
library(IKTrading) # quantstrat extensions, mainly for asset allocation
                   # and order-sizing functions
library(quantmod) # retrieve symbols from yahoo finance, google finance, etc

getSymbols(""^GSPC"")

# 由於之前可能有策略存在.blotter environment裡，我們要先把他清空
rm(list = ls(.blotter), envir = .blotter)

# 設定貨幣是TWD、USD或EUR等
currency(""TWD"")

# 設定時區，一般是Universal Time(UTC)或GreenWich Mean Time(GMT)
# 也可以用xts::indexTZ(GSPC)來確認時區
Sys.setenv(TZ = ""UTC"")

# 可以有多個symbols，多個symbols會形成投資組合
# 如symbols = c(""GSPC"", ""GDAXI"")
# 為了方便說明，這邊只用一個指數商品
symbols = ""GSPC""

# multiplier為槓桿乘數，比如90元買入中華電(2412)一張，100賣出
# 當multiplier=m，不計手續費下賺m*10000元
stock(symbols, currency = ""TWD"", multiplier = 1)

# 設定日期、策略名稱和初始權益(本金)
initDate = ""1999-01-01""
strategy.st <- portfolio.st <- account.st <- ""myStrat""
tradeSize <- 1000000
initEq <- tradeSize*length(symbols)

# 避免策略重複，先將投組、策略、帳號等初始化
# 並從initDate開始執行策略
rm.strat(portfolio.st)
rm.strat(strategy.st)
initPortf(portfolio.st, symbols = symbols, initDate = initDate, currency = ""TWD"")
initAcct(account.st, portfolios = portfolio.st, initDate = initDate, currency = ""TWD"", initEq = initEq)
initOrders(portfolio.st, initDate = initDate)
strategy(strategy.st, store = TRUE)

# 設定會使用到的參數
nRSI = 2
thresh1 = 10
thresh2 = 6

nSMAexit = 10
nSMAfilter = 200

period = 10
pctATR = .02 #  2% ATR, size the position based on risk
maxPct = .04


# 設定indicator
# name是這個indicator的名稱，會由名稱呼叫該函數# 所以你也可以自己定義技術指標或加入ML函數# mktdata在function內會被替換成你的symbols所以不用更動# label會讓你指標的欄位名稱變成<column1>.labeladd.indicator(strategy.st, name = ""lagATR"",
              arguments = list(HLC=quote(HLC(mktdata)), n=period),
              label = ""atrX"")

add.indicator(strategy.st, name = ""RSI"",
              arguments = list(price=quote(Cl(mktdata)), n=nRSI),
              label = ""rsi"")

#  舉例來說，這裡coloumn name 會變成 SMA.quickMA
add.indicator(strategy.st, name = ""SMA"",
              arguments = list(x=quote(Cl(mktdata)), n=nSMAexit),
              label = ""quickMA"")

add.indicator(strategy.st, name = ""SMA"",
              arguments = list(x=quote(Cl(mktdata)), n=nSMAfilter),
              label = ""filterMA"")

# 設定signals
# 主要有sigComparison、sigThreshold、sigCrossover和sigAND
# sigComparison：比較兩個設定好的indicator
# sigThreshold：比較設定好的indicator和一個定值
# sigCrossover：也是比較兩個indicator，但default是t-1時和t時的交叉
#               若要其他lag期間需要使用者自行定義函數
#               效果等同於sigComparison(..., cross=TRUE)
# sigAND：兩個signal需要同時成立
# relationship有gt(greater than)、lt(lower than)、
# gte(greater than or equal to)、lte(lower than or equal to)
# 這邊設定close price > 200日MA時產生訊號，並設定label為upTrend
add.signal(strategy.st, name = ""sigComparison"",
           arguments = list(columns = c(""Close"", ""filterMA""), relationship = ""gt""),
           label = ""upTrend"")

#  cross = FALSE, for current signal
#  cross = TRUE, for both previous day and current signal
#  rsi < 10
add.signal(strategy.st, name = ""sigThreshold"",
           arguments = list(column = ""rsi"", threshold = thresh1,
                            relationship = ""lt"", cross = FALSE),
           label = ""rsiThresh1"")

#  rsi < 6
add.signal(strategy.st, name = ""sigThreshold"",
           arguments = list(column = ""rsi"", threshold = thresh2,
                            relationship = ""lt"", cross = FALSE),
           label = ""rsiThresh2"")

# 進場訊號1：今天的rsi<10 且 close price > 200日MA，昨天則否(任一不成立)
# long
add.signal(strategy.st, name = ""sigAND"",
           arguments = list(columns = c(""rsiThresh1"", ""upTrend""), cross = TRUE),
           label = ""longEntry1"")

# 進場訊號2：今天的rsi<6 且 close price > 200日MA，昨天則否(任一不成立)
# 可以看出這是反向加碼策略
add.signal(strategy.st, name = ""sigAND"",
           arguments = list(columns = c(""rsiThresh2"", ""upTrend""), cross = TRUE),
           label = ""longEntry2"")

# 出場訊號1：今天的close price > 10日MA，昨天則否
add.signal(strategy.st, name = ""sigCrossover"",
           arguments = list(columns = c(""Close"", ""quickMA""), relationship = ""gt""),
           label = ""exitLongNormal"")

# 出場訊號2：今天的close price < 200日MA，昨天則否
add.signal(strategy.st, name = ""sigCrossover"",
           arguments = list(columns = c(""Close"", ""filterMA""), relationship = ""lt""),
           label = ""exitLongFilter"")

# 這邊設定台灣的手續費和交易稅，買入0.001425，賣出0.004425# function args必須有TxnQty, TxnPrice和SymbolbuyCost <- 0.001425
# custom transaction fee function based on value of transaction
buyFee <- function(TxnQty, TxnPrice, Symbol, ...)
{
  abs(TxnQty) * TxnPrice * -buyCost
}

sellCost <- 0.004425
sellFee <- function(TxnQty, TxnPrice, Symbol, ...)
{
  abs(TxnQty) * TxnPrice * -sellCost
}


# 設定規則，為了方便講解，這邊都以做多為例
# name: rule的名稱，用來呼叫ruleSignal()，所以也可以自己定義
# sigcol: 上面訊號的label
# sigval: 當訊號產生，是否給訊號賦值，TRUE為1、FALSE為0
# ordertype: 下單類型，有市價單、限價單、停損單等
#            這邊以市價單為例
# orderside: 做多或放空
# replace: 如果兩個訊號同時成立，這個訊號是否取代另一個
# prefer: 因為是回測，所以我們需要假定買入和賣出的價格
#         這邊假設是開盤價，若要考慮滑價的話需要自行定義function
# osFUN: 下單的數量，default為osDollarATR和osMaxDollar
#   osDollarATR: 依照現有部位產品的波動度和風險承受度加權
#   osMaxDollar: 每次都依現有資金買滿，ex.一股160的2330，本金50w，會買滿3張
# 零股需另外定義function
# tradeSize: 用多少本金交易
# pctATR, maxPctATR: 風險承受度的百分比
# atrMod: 搭配ATR，最早的indicator，lastATR的label必須要是atrX
# TxnFees: 額外交易費用，如上所定義之函數
# type: 進場或出場
# path.dep: 當這個rule未close掉，其他的rule不會執行#           call ruleSignal時需要設為TRUEadd.rule(strategy.st, name = ""ruleSignal"",
         arguments = list(sigcol = ""longEntry1"",
                          sigval = TRUE,
                          ordertype = ""market"",
                          orderside = ""long"",
                          replace = FALSE, #  replace = TRUE may choose just one rule
                          prefer = ""Open"", #  tomorrow because today has closed
                          osFUN = osDollarATR, #  order size function
                          tradeSize = tradeSize,
                          pctATR = pctATR,
                          maxPctATR = pctATR, #  set an upper limit of orders
                          atrMod = ""X"",
                          TxnFees = ""buyFee""), #  atrx above
         type = ""enter"", path.dep = TRUE, label = ""enterLong1"")

add.rule(strategy.st, name = ""ruleSignal"",
         arguments = list(sigcol = ""longEntry2"",
                          sigval = TRUE,
                          ordertype = ""market"",
                          orderside = ""long"",
                          replace = FALSE, #  replace = TRUE may choose just one rule
                          prefer = ""Open"", #  tomorrow because today has closed
                          osFUN = osDollarATR, #  order size function
                          tradeSize = tradeSize,
                          pctATR = pctATR,
                          maxPctATR = maxPct, #  set an upper limit of orders
                          atrMod = ""X"",
                          TxnFees = ""buyFee""), #  atrx above
         type = ""enter"", path.dep = TRUE, label = ""enterLong2"")

# 出場規則
# orderqty: 'all'為賣出所有部位，可以是數字或自定義function
# ordertype是停損單(stoplimit)時，需額外設定停損點
# 如果tmult=TRUE，threshold需為百分比，如0.2(=20%)，買入價*threshold=停損價
# 如果tmult=FALSE，threshold為絕對數字，如158，停損價就是跌破158時平倉
# 這邊都以市價單出場
add.rule(strategy.st, name = ""ruleSignal"",
         arguments = list(sigcol = ""exitLongNormal"",
                          sigval = TRUE,
                          orderqty = ""all"", #  order quantity, in all and out all
                          ordertype = ""market"",
                          orderside = ""long"",
                          replace = FALSE,
                          prefer = ""Open"",
                          TxnFees = ""sellFee""),
         type = ""exit"", path.dep = TRUE, label = ""normalExitLong"")

add.rule(strategy.st, name = ""ruleSignal"",
         arguments = list(sigcol = ""exitLongFilter"",
                          sigval = TRUE,
                          orderqty = ""all"",
                          ordertype = ""market"",
                          orderside = ""long"",
                          replace = FALSE,
                          prefer = ""Open"",
                          TxnFees = ""sellFee""),
         type = ""exit"", path.dep = TRUE, label = ""filterExitLong"")


# 開始進行回測
out <- applyStrategy(strategy = strategy.st, portfolios = portfolio.st)

# 更新投組資料
updatePortf(portfolio.st)

tradeDetails <- getPortfolio(portfolio.st)
posPL <- tradeDetails$symbols$tsmc$posPL

# 更新帳戶資料和期末權益金額
dateRange <- time(tradeDetails$summary)[-1]
updateAcct(portfolio.st, dateRange)
updateEndEq(account.st)

# 統計資料
tStats <- tradeStats(Portfolios = portfolio.st, use = ""trades"", inclZeroDays = FALSE)
tStats[, 4:ncol(tStats)] <- round(tStats[, 4:ncol(tStats)], 2)
(aggPF <- sum(tStats$Gross.Profits)/-sum(tStats$Gross.Losses))
(aggCorrect <- mean(tStats$Percent.Positive))
(numTrades <- sum(tStats$Num.Trades))
(meanAvgwLR <- mean(tStats$Avg.WinLoss.Ratio[tStats$Avg.WinLoss.Ratio < Inf], na.rm = TRUE))


# 畫k線圖、進出場flag、持有部位和累積報酬
myTheme<-chart_theme()
myTheme$col$dn.col<-'lightgray'
myTheme$col$dn.border <- 'lightgray'
myTheme$col$up.border <- 'lightgray'

chart.Posn(Portfolio = portfolio.st, Symbol=symbols, theme= myTheme)

# 自由加入技術指標
sma <- SMA(x = Cl(tsmc), n = 200)
sma2 <- SMA(x = Cl(tsmc), n = 10)
rsi <- RSI(price = Cl(tsmc), n = 2)
atr <- lagATR(HLC = HLC(tsmc), n = 10)
add_TA(sma2, on = 1, col = ""red"")
add_TA(sma, on = 1, col = ""green"")
add_TA(rsi, col = ""green"", lwd = 1.5)

### 參數最佳化
# 設定參數範圍
# add distribution and distribution contraints
# rsi
# paramset.label: 參數組合名稱
# label: 這個參數的範圍
add.distribution(strategy.st,
                 paramset.label = 'allParam',
                 component.type = 'signal',
                 component.label = 'rsiThresh1',
                 variable = list(threshold = 5:10),
                 label = 'up.rsi'
)

add.distribution(strategy.st,
                 paramset.label = 'allParam',
                 component.type = 'signal',
                 component.label = 'rsiThresh2',
                 variable = list(threshold = 5:10),
                 label = 'dn.rsi'
)

# 加入參數範圍限制
add.distribution.constraint(strategy.st,
                            paramset.label = 'allParam',
                            distribution.label.1 = 'up.rsi',
                            distribution.label.2 = 'dn.rsi',
                            operator = '>',
                            label = 'RSI'
)

# MA
add.distribution(strategy.st,
                 paramset.label = 'allParam',
                 component.type = 'indicator',
                 component.label = 'quickMA',
                 variable = list(threshold = 5:15),
                 label = 'quickMA'
)

add.distribution(strategy.st,
                 paramset.label = 'allParam',
                 component.type = 'indicator',
                 component.label = 'filterMA',
                 variable = list(threshold = 220:260),
                 label = 'filterMA'
)


# Walk Forward Analysis
# paramset.label: 設定的參數範圍
# k.training: 樣本期間
# k.testing: 測試期間
# nsamples: 等於0代表所有組合
# obj.func: objective function，目標函數，由於default的最佳化是以
#           報酬率最大為指標，若要改成Max drawdown或其他條件則要自定義函數
# anchored: 是否是moving time window
# verbose: 是否印出交易明細

registerDoParallel(cores=detectCores())
resultsWFA <- walk.forward(
  strategy.st=strategy.st,
  paramset.label='allParam',
  portfolio.st=portfolio.st,
  account.st=account.st,
  period='years',
  k.training=4,
  k.testing=2,
  nsamples=0,
  audit.prefix='wfa',
  #obj.func=my.obj,
  #obj.args=my.args,
  anchored=TRUE,
  verbose=TRUE,
  include.insamples=TRUE
)

結果會自動輸出樣本內和樣本外的.RData檔到使用者的預設路徑，可以
用ls(.audit)看到training和testing的名稱

舉例來說：
chart.forward.training(""wfa.GSPC.2007-01-03.2010-12-31.RData"")http://imgur.com/a/Scgc3如果是testing的部分：
chart.forward(""wfa.results.RData"")

如果不清楚Out of sample和In sample的關係
可以參考我網頁上WFA的tabhttps://naturalsmen.shinyapps.io/Backtest因為quantstrat的help page真的不太友善，所以打了很多arguments的定義和用法說明
code不知不覺也打了一長串@@
雖然看起來有點長
但我覺得這是用quantstrat搭配其他package建立自己的交易系統蠻完整的code了
如果排版或內容有哪裡需要改進再請板友指教
之後會再慢慢修改與完善這篇
或者可能直接搬到我的部落格了@@

下一個打算分享IBrokers 如果沒有被其他板友搶先的話XD
還有Josh新版的xts_0.10-0、quantmod、PerformanceAnalytics等
或者是等到正式release之後再寫了


5. 備註：
因為自己埋頭研究quantstrat和IBrokers這兩個package非常非常久
一直希望找個時間把自己經驗分享出去
一方面是讓大家知道有這個很好用的package來寫交易程式
另一方面是讓大家少走些彎路
因為可能碰到的bug我大概都遇過 也open issue過了@@:
但是自己一直懶懶的 又在忙GSoC的計畫 以至於一拖再拖
感謝c大提供這個機會讓我上來騙騙p幣
也給我個動機寫了第一篇弱弱的分享文

感覺板上大大多是討論技術為主
所以就想說來個比較應用的範例好了
之後會慢慢把這篇補完、弄得更通順更好閱讀一點

感謝耐心看完或直接End的大家XD


參考資料：

Guy Yollin,
Computational Finance & Risk Management,
University of Washington, Department of Applied Mathematics:http://www.r-programming.org/papersQuantStrat TradeR:https://quantstrattrader.wordpress.com/--","R_Language"
"1397","M.1469287424.A.FC6","pk790127","問題","SprkR rJava 安裝",2016-07-23 23:23:42,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 我想使用R裡面的SparkR這個套件,不論是windos或是linux系統[問題類型]:實驗室想要使用Hadoop或是Spark平行式的運算方式提升計算功能,主要研究Spark的方式已查詢過有SparkR的套件,但是怎麼都裝不起來,不論是linux 或是 windos[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的linux: 已將R 與 Rstudio scala spark 灌好,碰到
'devtools’&""rJava"" is not available (for R version 3.2.2)這種類似的問題
導致後面無法進行 (參考對岸或是外國教學網站)

Windos: 主要是參考:https://www.youtube.com/watch?v=oG0HZogxEUc這個網站的教學,但是到了install_github後面將SparkR套件載下來就出錯了!
還是我漏裝了一些東西呢?

想請問有人有使用過sparkR這個套件 或是有更詳細的安裝教學網站(原文也可以)
能提供我參考嗎 謝謝



--","R_Language"
"1398","M.1469196372.A.BF3","dreler1","問題","Fourier Transform, noise and signal",2016-07-22 22:06:08,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一組time series 數據 裡面有兩個signals 跟一個background noise

首先要把noise 去掉

把兩個signals 兩個頻率不一樣 一個短頻的 一個是偶發的

分開再把這三個東西畫回 time series

我大概找了一下有matlab的範例

Ｒ最清楚的應該是這個http://www.di.fc.ul.pt/~jpn/r/fourier/fourier.html沒有看到這個部分

有其他更好的範例嗎？

謝謝


--","R_Language"
"1399","M.1469160184.A.266","cywhale","分享","bigmemory 套件分享",2016-07-22 12:03:02,NA,NA,"1. 套件名稱：

bigmemory 4.5.19

2. 套件主要用途：

處理較吃記憶體的資料，尤其當資料大小逼近或超過實體記憶體，使load資料很慢時..
但資料限定為單一資料型態，不能同時混雜character, numeric
它這種資料結構 big.matrix 其實只是一個 R object但實際指向 C++資料結構的指標
可以memory或檔案形式 share (shared.big.matrix, filebacked.big.matrix)，實現
在 multip processes or cluster共用的機制

可以做簡單的資料操作，如取符合條件的子集合資料出來
配合其他 big 系列的套件如 biganalytics, bigtabultae等做其他處理、modeling

3. 套件主要函數列表：

a. read.big.matrix: 讀取一份.csv 並創建成file-backing形式的big.matrix
                    格式比如
   read.big.matrix(""test.csv"", header = TRUE,
                      type = ""double"",
                      backingfile = ""test.bin"",
                      descriptorfile = ""test.des""))
   你提供test.csv, 執行後會多兩個供bigmemory使用的descriptorfile .bin, .des

b. attach.big.matrix: 讀取一份 file-backing big.matrix的descriptor file，
                      提供套件可以抓到這個 big.matrix object所需的資訊

c. mwhich: 如同base所提供的which，可以對各欄位做篩選

d. write.big.matrix: 將 big.matrix object寫入 file


4. 分享內容：

之前看一些朋友發問有較大容量資料要吃進來，而絕大部分都可以由data.table套件的
fread解決。

bigmemory處理資料當然沒有data.table又快又方便，但它有個好處，就是一開始只放
資料的記憶體指標，不會把所有資料都放進記憶體。
所以我把它應用在網路server上需要供人查詢的較大筆資料（如shiny建構的查詢介面）
資料本身較少更動，而供公眾使用的linux server資源不多（有時VM只開4GB）
當我把資料備妥(.csv），先建好file-backing方式所需要的descriptor file，
之後只要attach上去，資料就可以在web-based application中讀取到。
使用者以介面查詢、篩選資料範圍，透過 mwhich 方式縮小真正載入記憶體的資料大小，
再轉換到data.table做其他運算。

所以我用bigmemory的方式、函數超簡單：attach %>% mwhich (%>% data.table())

這也能用資料庫完成，但上述流程可能比 (connect Database -> SQL query -> return
query)來得快一點（後有簡單測試）

但如果資料本身常常更新，或資料各欄位型態複雜，資料庫有它難以取代的優勢。
bigmemory也可以 write, flush，但我本身很少用它，我主要應用在一份很大的歷史資料
(數值資料，少更動)，這當然僅只是個人選擇。

bigmemory另一個不錯的優點也在於它和Rcpp(, RcppArmadillo..)等的配合，比如這個
簡單清楚的例子http://www.r-bloggers.com/using-rcpparmadillo-with-bigmemory/其他應用或參考資料 可在R-blogger上搜尋 bigmemory
另外google 這份文件也頗有參考價值，雖然已是2010年...
Taking R to the Limit, Part II: Working with Large Datasets


我之前曾對data.table, bigmemory, 和PostgreSQL做簡單的測試，以下是部分內容(可run

library(data.table)
library(magrittr)
library(bigmemory)
library(RPostgreSQL)
library(microbenchmark)

# ========================== Test data preparation

tstL <- 1e6
wr.first <- TRUE
bigmf<- file(""bigm_sample01.csv"", open = ""w"")

DT <- data.table(lat=numeric(), lng=numeric(), date=as.Date(character()),
                 grp=numeric(), pick=numeric())

idxf <- function(x, idx) {
  x[-idx] <- 0; x[idx] <- 1; return(x)
}

pconn <- dbConnect(dbDriver(""PostgreSQL""), # change to your configuration
                   user=""xx"", password=""xx"", dbname=""xxx"", host=""localhost"")

print(""write big.mat start"")
print(format(Sys.time(), ""%Y%m%d %H:%M:%S""))


# randomly prepare data, can arbitrarily chang loop iteration
for (i in 1:20) {
  dt <- data.table(lat = runif(tstL,0,90),lng = runif(tstL,0,180),
                   yr = as.integer(runif(tstL,2000,2015)),
                   mo = as.integer(runif(tstL,1,12)),
                   day = as.integer(runif(tstL,1,28))) %>%
    .[,date:=as.Date(paste(yr,mo,day,sep="" ""),""%Y %m %d"")] %>%
    .[,c(""yr"",""mo"",""day"",""grp""):=list(NULL,NULL,NULL,i)] %>% setkey(date) %>%
    .[,pick:=idxf(seq_along(lat),sample(seq_along(lat),1)), by=.(date)]

  print(format(Sys.time(), ""%Y%m%d %H:%M:%S""))
  print(""combine DT"")

  DT <- rbindlist(list(DT, dt))

  print(format(Sys.time(), ""%Y%m%d %H:%M:%S""))
  print(""write to PostgreSQL"")

  dbWriteTable(pconn, value=dt, name= ""bigmdb"", append=!wr.first, row.names=F)

  print(format(Sys.time(), ""%Y%m%d %H:%M:%S""))
  print(""write.table"")

# Big.matrix cannot have mixed-type data, change charater 'date' to int 'datei'
  write.table(dt[,datei:=as.integer(gsub(""-"","""",date))] %>% .[,date:=NULL],
              file = bigmf, sep = "","", row.names = FALSE, col.names = wr.first)

  print(i)
  wr.first <- FALSE
}

close(bigmf)

#========================== ? read.big.matrix
system.time(db <- read.big.matrix(""bigm_sample01.csv"", header = TRUE,
                      type = ""double"",
                      backingfile = ""bigm_sample01.bin"",
                      descriptorfile = ""bigm_sample01.des""))
#   user  system elapsed
#  69.21    3.21   72.54
#========================== ? attach.big.matrix
system.time(db <- dget(""bigm_sample01.des"") %>% attach.big.matrix())
# user  system elapsed
# 0.01    0.00    0.01

nrow(db) ## 2e+07 rows
nrow(DT)
#========================== Indexing PostgreSQL data

dbSendQuery(pconn, ""CREATE INDEX date_index ON bigmdb USING btree (date)"")

#========================== simple benchmark

microbenchmark(
  'DT' = DT[date>='2003-01-01' & date <='2014-12-01' & pick==1,],
  'Bigm' = db[mwhich(db,c(5,5,4),list(c(20030101,20141201,1)),
                     list(c('ge','le','eq')),'AND'),],
  'SQL'= dbGetQuery(pconn, statement=paste0(""SELECT * FROM bigmdb WHERE date >=
                                            '2003-01-01' AND date <= '20141201'
                                            AND pick = 1;"")),
  times=10
) ######## Note: SQL statement should be in single line ######################

#Unit: milliseconds
#expr       min        lq      mean    median        uq       max neval
#  DT  325.0868  347.0721  367.5553  360.3873  389.9555  440.2354    10
#Bigm  404.6935  416.9812  452.5594  441.7622  462.6059  591.9303    10
# SQL 3221.8961 3226.8496 3303.9357 3274.3635 3377.8906 3521.6359    10

format(object.size(DT),""Mb"")
#[1] ""762.9 Mb""

format(object.size(out2),""Mb"")
#[1] ""2.7 Mb""

lapply(dbListConnections(PostgreSQL()), dbDisconnect)


5. 備註

沒有特別分享到什麼bigmemory套件高深功能，也不是來騙錢的XDD 只是拋磚引玉，
自己也有困惑~~ 也許data欄位不能mixed-type 某方面侷限了它的發展，bigmemory
在網路的討論度很低，但套件作者默默在維持、不時小更新，只是未來的發展走向不明。
不知道它在愈來愈多更快、更方便的資料處理套件選擇下，未來性如何??~~

bigmemory只是R資料處理中的其一選擇，小小心得供參，也請多多指教，更希望引來
有趣的其他應用或使用方式，謝謝


--","R_Language"
"1400","M.1469145350.A.C51","newmatt","問題","擷取excel中某些資料，並且另存成excel",2016-07-22 07:55:48,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有一個EXCEL檔案，其中檔案格式如下

  日期   | 地點 | 項目 | 01 | 02 | 03 | 04 | 05
1998/1/1   高雄    AA    50   90   1.1  33   4.4
1998/1/1   高雄    BB    10   20   1.5  34   2.2
1998/1/1   高雄    CC    30   40   2.1  45   4.2
1998/1/2   高雄    AA    40   92   1.1  53   3.5
1998/1/2   高雄    BB    14   22   1.5  44   2.2
1998/1/2   高雄    CC    32   43   2.1  35   4.2
.
.
.
1998/12/31   高雄    AA    40   92   1.1  53   3.5
1998/12/31   高雄    BB    14   22   1.5  44   2.2
1998/12/31   高雄    CC    32   43   2.1  35   4.2


由於是一整年份的地區資料，

如今我想把 符合 項目 BB 中那一整列的資料全部抓出來，另存一個 .xls檔或csv

像這樣
1998/1/1   高雄    BB    10   20   1.5  34   2.2
1998/1/2   高雄    BB    14   22   1.5  44   2.2
1998/12/31 高雄    BB    14   22   1.5  44   2.2


由於想要處理的EXCEL檔案有上百個，因此就想用自動化的部份來協助擷取
謝謝


目前程式只有執行到

[程式範例]:
目前程式只有執行到

library(""readxl"")
myfile <- ""D:/123.xls""
x <- read_excel(myfile ,col_names = FALSE)
y <- x[3]==""BB""
head(y) # 會秀出符合 ""BB"" 欄位的TRUE/FALSE值


謝謝

--","R_Language"
"1401","M.1469094196.A.49B","f496328mm","問題","讀取3GB的csv檔  資料太大",2016-07-21 17:43:14,NA,NA,"請問要怎麼讀取3GB的資料

有沒有比較有效率的方法?
我有用read.csv去讀

但是光要把3GB讀到電腦的RAM中   就要花很多時間(我讀個幾百MB的就要一分左右)

而且3GB我可能要超過16G的RAM去讀他   可能更多  因為我電腦只有16G

想要再加RAM到32G  只怕這樣還吃不下3G的DATA  要進行分析更是困難

分批讀是一個方法

但有沒有比read.csv更好的套件去讀這樣的data

畢竟3GB以目前的BIG DATA  應該不算大吧

會需要用到hadoop嗎?

謝謝


--","R_Language"
"1402","M.1468947589.A.DE4","Chris7462","問題","Rstudio 目錄",2016-07-20 00:59:46,NA,NA,"[問題類型]:
經驗諮詢

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
Rstudio 每次開啟的時候，都會在我的 home 目錄下產生一個 R 的資料夾用來存放 lib，
不過我習慣把 lib 放在 /usr/local/lib 下方便管理。
想請問有人知道要怎麼樣不要讓 Rstudio 產生那個資料夾嗎？

[環境敘述]:
系統：Ubuntu 16.04
R version 3.2.3
Rstudio version 0.99.903

--","R_Language"
"1403","M.1468936204.A.ECD","developme223","問題","資料屬性",2016-07-19 21:50:02,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我將原本的excel檔案匯入R中，整理後，想使用stat.desc函數跑敘述統計，但其中有一

變項屬性為factor，因此無法顯示，改用as.numeric轉換為數值，但資料跟原本的不同

，想請教各位高手，該如何轉換，感謝。

[程式範例]:

--","R_Language"
"1404","M.1468847331.A.E54","celestialgod","公告","套件分享徵文活動",2016-07-18 21:08:46,NA,NA,"大家好，我是被Wush在資料年會表的副板主 celestialgod

不小心幫人寫到功課，不是我的錯啊啊啊啊，這是題外話XD


R板一直以來都由問題文章為主，分享文章比較少

我個人認為從問題文章去學習東西，非常有限

而且容易讓新來板上的人感到害怕

大家問的問題好像都很厲害，解法看不太懂之類的

而不敢再進來這個板發問、分享等


另外，R板一直以來都在解決的是技術上的問題

很少接觸到應用面的問題

我也希望透過這個問題

大家也能討論到方法應用

互相分享一下自己研究的東西

說不定可以從別人的分享中

得到一些新點子去改善自己的方法

或是知道自己原來用的套件沒那麼好用 有更好用的套件可以用等

這都是這個活動的目標之一


基於上述理由，在此徵求板友分享自己在使用的套件

不管是心得，或是教學都歡迎

活動期間，使用[分享]分類，打上套件名稱+套件分享，即可得到P幣

標題規定舉例： [分享] dplyr 套件分享

               [分享] data.table 套件分享

活動期間，就從7/25號到9/30


同時，可能有些人會覺得自己會的沒什麼

不知道該不該分享，另外設立 [許願] 分類

對於任何一個套件 (甚至是相關的多個) 有疑問

想請求板上的大大給予一些學習經驗，應用的技巧，教學等

都可以使用 [許願] 分類


最後是獎勵方式

因為站方那邊，最多可以申請到一個板七萬，最多20個人

所以我計畫是 一篇分享文章 符合最低標準是給予 2000 P幣

可分享系列文章，就是以單篇做計算

這裡為了避免一些紛爭，設立一點獎勵門檻

至少發表要有五頁，共23*5=115行

扣除空行就是58行文字 (標題行不算)，又一行中文字最多40個

大概就是平均塞半行好了

就以最少字數40*58*0.5 = 1160個字為給予P幣的最低標準

每增加五頁(限制每兩行只能有一行空白)，就多給200批幣，無上限

但是因為站方規定，一個人受領最多30000批幣

所以如有不夠，我會再用我的批幣補上，補到我沒有為止

另外，獎勵人數超過20個，也是一樣，我會用我的批幣補上

但是，補完沒有，我就沒辦法了QQ，我再向其他兩個板主樂捐


發文格式如下：

1. 套件名稱：

麻煩後面附上版本號，在R輸入library之後，打sessionInfo()查詢即可
範例格式：dplyr 0.5.0

2. 套件主要用途：

請不要貼套件的description，至少簡單翻譯一下
也可以說明你主要用這個套件做什麼事情

3. 套件主要函數列表：

這裡的主要指的是你個人主要會用的函數

不需要套件中的函數一一介紹

範例格式：
a. select: 選擇data.frame的欄位
b. mutate: 新增data.frame的欄位
c. filter: 以條件去篩選適當的列
d. arrange: 依照欄位排列

4. 分享內容：

可以寫套件函數的用法、成果的展示、教學等

(如果是教學，第3點可以不必填)

也可以寫你覺得這個套件對你的工作、學業有什麼重大的幫助

或是你認為這個套件有什麼魅力會讓你想要去使用他等等

5. 備註

(optional) 寫一些你對於這個套件分享徵文活動的感想



--","R_Language"
"1405","M.1468823777.A.406","wanggz","情報","R 語言入門課程（8/29 ∼ 8/30，南科）",2016-07-18 14:36:13,NA,NA,"課程名稱：R 語言入門課程
上課日期：2016/8/29（一）∼2016/8/30（二）
上課地點：國家高速網路與計算中心 台南分部

課程內容安排：
1. R 簡介：安裝操作環境與 RStudio
2. 基本語法：向量、列表、因子、矩陣、資料表等操作
3. 進階語法：流程控制、迴圈與函數的使用、指令稿撰寫
4. 資料視覺化：基本的 R 繪圖功能
5. 套件的使用：使用各種 R 套件，進行各式資料視覺化分析

詳情請見官網https://goo.gl/2Ptuks--","R_Language"
"1406","M.1468486946.A.1B1","ireullin","問題","read.csv 無法讀取問題",2016-07-14 17:02:23,NA,NA,"小弟我使用的是win10(我試過win7也是相同狀況)
在linux下則一切正常
我的csv檔是utf-8編碼的
我在R console下了
Sys.setlocale(category='LC_ALL', locale='C')

之後執行
readLines <-- 這個結果是正常的
read.csv  <-- 中文無法正常顯示
read.table <-- 連讀都不能讀

實際的結果如下http://imgur.com/a/DfPFp請問要如何才能讓他正常顯示

--","R_Language"
"1407","M.1468485226.A.229","milk9420milk","問題","用for迴圈找曲線上點的問題",2016-07-14 16:33:43,NA,NA,"[問題類型]程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]新手(沒寫過程式，R 是我的第一次)[問題敘述]目前已經用 funtion 的方式找出圖上最佳化的曲線及參數值
(如網址的第一區Rcode跟做圖)

由於之後需要求出曲線下的面積，故需要知道曲上的各個點,
目前採用for迴圈的方式進行:
    先建立一個空矩陣，然後採用for迴圈逐一算出值再填到矩陣中。[遇到的錯誤]由於for迴圈的迴圈變數範圍為-10:100，間隔為0.1(即 seq(-10,100,0.1))
  ==>導致將數值填入矩陣時出問題，數值和做圖僅剩下其中一部分(fa值只到0.5)
   (應該是 (P$fa[i]=fa 和 P$hit[i]=hit) 這兩行有問題 )

目前有嘗試著解決:
1.有試過將i調成由1開始
  ==>結果圖做出來(跟第一張圖一樣)，但[ ]中放小數使部分數據重複
     怕之後算面積時會產生誤差
2.試過用兩個for迴圈，但是跑不出來
  for{for{}}[問題]想請問版上的各位，
當需要找曲線上各個點時，
我該如何寫回傳數值的code才能正確的找到各點的數值呢?


謝謝大家，以下連結為目前撰寫出的Rcode[程式範例]http://rpubs.com/mochi524/195810[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1408","M.1468471296.A.42D","goat1214","問題","Solve function小問題",2016-07-14 12:41:32,NA,NA,"我是R新手，最近開始上R翻轉課程
寫到BASIC HW5的時候出現了一點小問題想跟大家請教一下

在第五題的最後要求解出basic
按照WIKI這個公式https://en.wikipedia.org/wiki/Ordinary_least_squares#Estimation所以我嘗試了用solve(t(X)%*%X, t(X)%*%y)
以及  ((t(X)%*%X)^-1)%*%t(X)%*%y
結果是不太一樣的

想請問為什麼會不一樣呢?

--","R_Language"
"1409","M.1468462606.A.75A","leebochen521","問題","rvest,RCurl,curl,httr in linux",2016-07-14 10:16:44,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
rvest,RCurl,curl,httr 無法安裝於 linux ubuntu
想問如何安裝，或是有沒有其他可以取代的套件?
[關鍵字]:
rvest RCurl curl httr linux ubuntuhttp://imgur.com/yHBYVYJhttp://imgur.com/a/JExN6--","R_Language"
"1410","M.1468392521.A.C4F","clansoda","問題","xgboost regression",2016-07-13 14:48:36,NA,NA,"首先我先貼出資料

trainhttps://drive.google.com/file/d/0B3xY9FMzjybzZ1pCTDE1cE1yVmM/view?usp=sharingtesthttps://drive.google.com/file/d/0B3xY9FMzjybzWUpzdmNmWlhwUmc/view?usp=sharing這是一個hackthon上面的資料，我只是想用實際一點的資料來做我正在研究的package

train跟test都是數字資料是因為xgboost本身只吃數字資料，因此類別變數我全部都

轉成dummy variable，我用train data訓練一個random forest得到的RMSE在1179

但是我用相同的train data去訓練xgbooster然後predict，得到的RMSE居然2800多

已經是最後一名的邊都摸不到的那種，我覺得應該是我的code哪裡寫錯了，但是我看

vignette，我一開始是寫成classification的樣子，後來改成regression後卻跑出

負數的值，比用classification去跑更離譜，因此發文請教

xgboost(data = trainmatrix,label = train$Item_Outlet_Sales,max_depth=2
,eta=1,nthread=2,nrounds = 2,objective=""reg:linear"",booster=""gblinear"")->s

上面是我用來訓練xgbooster的語法跟參數，我一開始跟著vignette寫如果booster不寫

=gblinear好像會試classfication，多寫以後跑出來是負數。

--","R_Language"
"1411","M.1468376923.A.D0A","grimmq427532","問題","R爬蟲抓html的問題",2016-07-13 10:28:38,NA,NA,"[問題類型]:
程式諮詢



[軟體熟悉度]:
使用者(已經有用R 做過不少作品)



[問題敘述]:

昨天開始研究使用R爬蟲，從 celestialgod 大大的code開始起頭

範例中大大抓的是BG版的文章內容，而我是想要抓八卦版的文章標題就好

但發現paste完網址、read_html抓code之後

再使用xml_find_all去抓title會有問題，其值為空 ( 顯示{xml_nodeset(0)} )




往回追read_html，懷疑是不是html碼抓漏了，並沒有抓到title等項

因為開原網站的html來看，在body的部分似乎和抓到的有出入

不知道是不是這樣？還是其他地方有問題？



因為對html不熟悉，如果理解有誤請見諒



[程式範例]

為了研究先只抓15220這一頁

paste(15220, '.html', sep='') %>%
paste('https://www.ptt.cc/bbs/Gossiping/index',., sep='') %>%
xml2::read_html() %>%
xml2::xml_find_all(""//div[@class='title']/a[@href]"")



[環境敘述]:

R version : 3.3.1


[關鍵字]:

crawl
xml2
read_html


--","R_Language"
"1412","M.1468327707.A.C05","celestialgod","分享","pipe operators in R",2016-07-12 20:48:24,NA,NA,"[關鍵字]: pipe operator, %>%, %>>%, pipeR, magrittr

[出處]:https://goo.gl/zRUISx[重點摘要]:

剛好github的jekyll升級...

我的github部落格一度停擺

把一些檔案精簡跟刪除之後，現在終於復活了

可以把五天前打好的文章分享上來了QQ

(當你部落格啊，打那麼多廢話)


重點是這篇是為了跟人介紹pipe operator所打的文章

會比之前介紹magrittr的文章更加流暢，更有系統

並且介紹另一個提供pipe operator的套件 - pipeR

希望大家不吝惜指教，謝謝大家

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1413","M.1468295692.A.2DA","greatjus","問題","想用quote指令寫迴圈但碰到問題",2016-07-12 11:54:49,NA,NA,"使用R經驗：2年#--------------------------------------------------
首先我有
data1=1
data2=2

然後我用迴圈i的形式

for(i in 1:2) {
data=noquote(paste('data',x,sep=''))[i]  #匯入資料
#然後用這筆資料做些事情
}

這相當於在i=1的時候

data=noquote(paste('data',x,sep=''))[1]

可是現在問題來了，在i=1時
當我輸入data的時候得到的不是 1 而是 data1，可是當我輸入data1時是output 1沒有錯
我的想法是
當我輸入data ，R應該要 output 1
但是 R 是 output data1

想請問有人有這個問題的解決方法嗎(我預期 輸入data 會得到值 1)#-------------------------------------------------------------
不管是誰回答我或與我討論，都非常感謝您的幫助  謝謝



--","R_Language"
"1414","M.1467977928.A.A15","shihs","問題","script在不同電腦上路徑設定問題",2016-07-08 19:38:46,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我在windows上寫了一個script，
用setwd()設定路徑，
但是我把程式碼換到另外一台電腦(mac)
就必須要修改setwd()一次，
想要知道有沒有什麼好一點的辦法，
不用每次都需要修改一次路徑。

另外想要再問一個問題，
設定路徑到底應該要寫相對路徑或是絕對路徑呢？
（我最近都是寫絕對路徑）

謝謝

[程式範例]:
setwd(""路徑"")

[環境敘述]:
R version 3.2.3 (2015-12-10)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.5 (El Capitan)

[關鍵字]:
setwd()、路徑設定

--","R_Language"
"1415","M.1467942261.A.CE9","celestialgod","問題","Re: 處理資料 效能詢問",2016-07-08 09:44:17,NA,NA,"※ 引述《spiderway (spiderway)》之銘言：: ※ 引述《spiderway (spiderway)》之銘言：: : - 問題: 當你想要問問題時，請使用這個類別: : [問題類型]:: : 效能諮詢(我想讓R 跑更快): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 大家好，: : 最近因為需要要處理一些資料，雖然有寫出要的東西，但是實在是跑太慢了，感覺要跑個: : 幾年= =,一定是我寫法不好,想來這問一下各位大大該怎個改才對，並學習一下: : 麻煩各位大大給予小魯指導，感激不盡!!!: : 程式:: : 讀取了全部CSV(10萬多個)存在一個大大的list裡面,要做的大概是把每一個list裡面的: : 資料都做同一件事,就是每5筆整理成1筆,然後append在一起，如下: :    1  2 3  4 5 6                    1  2 3 ....: : 1 6/1 a b 12 1 2                 1 6/1 a b 12 1 2 13 1 3 14 1 4 15 1 5 16 1 6: : 2 6/1 a b 13 1 3: : 3 6/1 a b 14 1 4     變成1筆>>>: : 4 6/1 a b 15 1 5: : 5 6/1 a b 16 1 6: : [程式範例]:: : http://pastie.org/10898589: : [版本]: : R version 3.3.0 (2016-05-03): : Platform: x86_64-pc-linux-gnu (64-bit): : Running under: Ubuntu 14.04.4 LTS: : [關鍵字]:: 解說一下我的資料型態: CSV檔10萬個，每一個大概有2000~3000多列不等，但一定是5個倍數: 但是他的資料都是5列一組，所以我才會希望第一篇說得讓他5個整理成一列: 前面會有V1~V3分別是 時間和AB兩個屬性，前五筆都是一樣的，V4~V6是我要處理的。: 我上次是選C板大的教學使用，但是因為之前都不常用過dply那些，不太會用: 用到csv_append之後是沒問題，但是在data那邊是個list我想要的是一個值: 一行，所以最後的資料希望是像這樣，最後存成一個csv，因為我之後還要在處理一個類: 似的資料，只有後面不一樣，再合併在一起。: V1     V2   V3   V4 ... V18: 時間1  A1   B1   (整理的那5 rows合併的)1: 時間2  A2   B2   (整理的那5 rows合併的)2:                .:                .:                .: 我現在面臨的問題，: 1,do.call(rbind,csv_append)大概下午跑到隔天早上，但至少跑好了XD: 2,data那邊是list我不太理解是不是能夠直接轉: 2,我後來有想到辦法，我發現我都只會這種處理方法...: http://pastie.org/10901154: 是可以把每一個都轉成我要的之後在做do.call rbind: 在請大大幫忙了 謝謝~~~~~~: 心得:謝謝各位大大的幫忙，雖然我很多function都看不太懂= =: 而且發現好像apply系列很好用欸，之前都一直覺得用for就好了，真的遇到資料量變大差: 別真多...，之後應該好好找時間重讀一下apply系列和dply那些我就用三千筆測試就好，下面是三種不同方法：

好讀版：http://pastebin.com/GPgR4FSclibrary(pipeR)
library(plyr)
library(dplyr)
library(tidyr)

# data generation (csv_files就是你的ldf)
num_csv <- 3e3
num_xlvls <- 30
num_ylvls <- 30
timePoints <- expand.grid(paste0(""a"", 1:num_xlvls),
                          paste0(""b"", 1:num_ylvls),
                          stringsAsFactors = FALSE)
csv_files <- lapply(1:num_csv, function(i){
  dat <- sample(1:nrow(timePoints), sample(400:600, 1)) %>>%
    rep(each = 5) %>>% (timePoints[., ]) %>>%
    modifyList(setNames(lapply(1:3, function(j){
      sample(1:100, nrow(.), TRUE)
    }), paste0(""Var"", 3:5))) %>>% tbl_df
})

# 整併 + 分開
st <- proc.time()
outRes1 <- lapply(csv_files, function(subdf){
  nest(subdf, -Var1, -Var2) %>>%
    mutate(data = lapply(data, function(x){
      as.matrix(x) %>>% t %>>% as.vector %>>% paste(collapse = "";"")
    })) %>>% unnest(data) %>>% separate(data, paste0(""V"", 1:15)) %>>%
    mutate_each(funs(as.integer(.)), -Var1, -Var2)
}) %>>% bind_rows
proc.time() - st
#   user  system elapsed
# 263.93    0.02  265.86

st <- proc.time()
outRes2 <- lapply(csv_files, function(subdf){
  subdf %>>% gather(vars, values, -Var1, -Var2) %>>%
    group_by(Var1, Var2) %>>%
    summarise(tmp = paste(values, collapse = "";"")) %>>% ungroup %>>%
    separate(tmp, paste0(""V"", 1:15)) %>>%
    mutate_each(funs(as.integer(.)), -Var1, -Var2)
}) %>>% bind_rows
proc.time() - st
#  user  system elapsed
# 70.01    0.00   70.25

library(data.table)
st <- proc.time()
outRes3 <- lapply(csv_files, function(subdf){
  subdf %>>% data.table %>>% melt(c(""Var1"", ""Var2"")) %>>%
   `[`( , list(tmp = paste(value, collapse = "";"")), by = c(""Var1"", ""Var2""))%>>%
    `[`( , `:=`(paste0(""V"", 1:15), tstrsplit(tmp, "";""))) %>>%
    `[`( , tmp := NULL) %>>%
    `[`( , `:=`(paste0(""V"", 1:15), lapply(.SD, as.integer)), .SDcols = V1:V15)
}) %>>% rbindlist
proc.time() - st
#  user  system elapsed
# 37.35    1.30   38.16

第一個方法只是把我原本方法做一個修正，但是nest跟unnest實在太花時間

而且沒有必要，所以就有了第二個版本直接把資料直接做合併的動作

雖然快了四倍，但是速度還可以更快，所以就有了第三個版本

(測了一下記憶體使用量已經很低)

我最近開始往回走，雖然dplyr好用，但是data.table在處理資料還是有他的優勢

在第三個方法可以看到，硬是比dplyr的解法快了一倍，但是相對寫起來就沒那麼漂亮

這個是code style跟效能的取捨(攤手

另外，我一萬個csv就會出問題了... 記憶體真沒那麼大...

如果你記憶體真的有很大在考慮這樣做，沒那麼大可以考慮分段讀取

分段寫入時，在append就好，不過之後讀進來又很麻煩(攤手

以上，敬請參考~~~


OS: 難得的颱風假阿~~~ 大家請注意自身安全!!


7/8 11:00補上data.table把V1~V15轉成integer

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1416","M.1467904670.A.493","spiderway","問題","Re: 處理資料 效能詢問",2016-07-07 23:17:44,NA,NA,"※ 引述《spiderway (spiderway)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好，: 最近因為需要要處理一些資料，雖然有寫出要的東西，但是實在是跑太慢了，感覺要跑個: 幾年= =,一定是我寫法不好,想來這問一下各位大大該怎個改才對，並學習一下: 麻煩各位大大給予小魯指導，感激不盡!!!: 程式:: 讀取了全部CSV(10萬多個)存在一個大大的list裡面,要做的大概是把每一個list裡面的: 資料都做同一件事,就是每5筆整理成1筆,然後append在一起，如下:    1  2 3  4 5 6                    1  2 3 ....: 1 6/1 a b 12 1 2                 1 6/1 a b 12 1 2 13 1 3 14 1 4 15 1 5 16 1 6: 2 6/1 a b 13 1 3: 3 6/1 a b 14 1 4     變成1筆>>>: 4 6/1 a b 15 1 5: 5 6/1 a b 16 1 6: [程式範例]:: http://pastie.org/10898589: [版本]: R version 3.3.0 (2016-05-03): Platform: x86_64-pc-linux-gnu (64-bit): Running under: Ubuntu 14.04.4 LTS: [關鍵字]:解說一下我的資料型態
CSV檔10萬個，每一個大概有2000~3000多列不等，但一定是5個倍數
但是他的資料都是5列一組，所以我才會希望第一篇說得讓他5個整理成一列
前面會有V1~V3分別是 時間和AB兩個屬性，前五筆都是一樣的，V4~V6是我要處理的。
我上次是選C板大的教學使用，但是因為之前都不常用過dply那些，不太會用
用到csv_append之後是沒問題，但是在data那邊是個list我想要的是一個值
一行，所以最後的資料希望是像這樣，最後存成一個csv，因為我之後還要在處理一個類
似的資料，只有後面不一樣，再合併在一起。


V1     V2   V3   V4 ... V18
時間1  A1   B1   (整理的那5 rows合併的)1
時間2  A2   B2   (整理的那5 rows合併的)2
               .
               .
               .



我現在面臨的問題，
1,do.call(rbind,csv_append)大概下午跑到隔天早上，但至少跑好了XD
2,data那邊是list我不太理解是不是能夠直接轉

2,我後來有想到辦法，我發現我都只會這種處理方法...http://pastie.org/10901154是可以把每一個都轉成我要的之後在做do.call rbind

在請大大幫忙了 謝謝~~~~~~


心得:謝謝各位大大的幫忙，雖然我很多function都看不太懂= =
而且發現好像apply系列很好用欸，之前都一直覺得用for就好了，真的遇到資料量變大差
別真多...，之後應該好好找時間重讀一下apply系列和dply那些



--
Sent from my ibon.

--","R_Language"
"1417","M.1467863878.A.B62","lusa","問題","使用 rvest 套件,爬不出表格內容",2016-07-07 11:57:55,NA,NA,"想要使用 rvest套件,爬出此網頁的table
此網頁：http://app.tzuchi.com.tw/tzuchi/About_TP_Center/?ContentType=6&IdentityID=130剛申請進入這裡，第一次發文
小妹初步學習Ｒ語言，希望淺顯易懂，能夠更加了解使用方法。

程式碼如下：
library(rvest)
webpage <-
html(""http://app.tzuchi.com.tw/tzuchi/About_TP_Center/?ContentType=6&IdentityID=130"")webpage <- iconv(webpage,from=""UTF-8"",to=""UTF-8"")
data <- webpage %>%　html_nodes(""table[@id='table15']"") %>%　.[[1]] %>%　html_table()

使用這樣程式碼卻爬不出來，是甚麼原因呢？

跑出錯誤訊息是：
Error in UseMethod(""xml_find_all"") :
  no applicable method for 'xml_find_all' applied to an object of class
""character""

--","R_Language"
"1418","M.1467852643.A.399","dreler1","問題","dynamic variables",2016-07-07 08:50:40,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
寫好的主程式在這邊https://gist.github.com/JiaoyanHuang/c10e51c4779885ace1ec272a135128c4如此我會創造10 不同的data

PMIJ_airc_base_0501
...       sens1
...       sens2
...       sens3
...       sens4
#case 後面

我想再用一個loop
for (k in 1:5){
    TEMP = spc_case[k]_YYMM[i]-XXXX_case[k-1]_YYMM[i]
    assign(XXXX,TEMP)
}
但是我不太確定要怎麼讓我等號右邊的變數隨著我k變化

不知道這樣的解釋清楚嗎?

有點像csh

foreach n (""A"",""B"",""C"")

  setenv AA balabala$n

end

這種感覺> sessionInfo()R version 3.2.2 (2015-08-14)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
 [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
 [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8    LC_PAPER=en_US.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.2


謝謝大家

--","R_Language"
"1419","M.1467770422.A.B30","clansoda","問題","Re: 用for迴圈算zscore",2016-07-06 10:00:18,NA,NA,"先解釋一下 %>% 這個符號，這是pipe operator

高中的時候教的函數都常都長這樣，f(x)代表f()函數對X作用接著會跑出答案

還有一種問題更複雜g(f(x))，這是包兩層的函數，也不難理解

但是如果包成十層呢?長的類似sd(mean(sum(sqrt(x))))，一眼根本很難辨識

因此magrittr這個package提供這個operator，它的作用是將左邊的object

直接作用於右邊的function，例如f(x)就能寫成x %>% f()，或者更上面的

x %>% f() %>% g()，x %>% sqrt() %>% sum() %>% mean() %>% sd()

這樣的方式更容易讓自己與別人一眼就了解你在寫什麼

建議你可以去下載swirl package來使用，這是一個互動式學習的package

置底的翻轉教室也是一樣的，只是內容是中文與內容稍有不同

英文版本的可以從github上面下載新的課程，裡面有apply、sapply、tapply

跟lapply的教學，用這個速度會比loop快很多，當然小樣本感覺不出來

但如果後面是大樣本，就是一個是喝杯水的時間，另一個是吃頓飯的時間了

接著是loop的部分，你的DATA應該是每個值都有一個對應的組別

而你想要的是該值減掉組平均除以組標準差進而對其標準化吧

在loop上面你應該先cbind一個column進去你的dataframe假設叫做zscore

首先要把mean跟sd算出來，我就不寫了

for (i in 1:nrow(dat)) {zscore[i]<-(dat$A20[i]-dat$mean[i])/dat$sd[i]}

這樣寫你才能對應自己組別的mean跟sd

--","R_Language"
"1420","M.1467746279.A.F96","memphis","問題","Re: 處理資料 效能詢問",2016-07-06 03:17:57,NA,NA,"因為你的敘述不是很清楚
只知道你有10萬個csv, 存在list裡
list中nrow不確定, 只知道是5的倍數
然後把資料直轉橫

解法前面兩位都寫了,
我只想補充, 如果資料結構是很固定的,
請注意你loop的方向

下面的東西雖然醜, 不過loop是18 不是 nrow(N)/5
要好看的話, 用動態變數縮一縮就可以

####

library(dplyr)

data_m <- data.frame(v1=rep(""6/1"",5), v2=rep(""a"",5), v3=rep(""b"",5),
v4=c(12:16), v5=rep(1,5), v6=c(2:6), stringsAsFactors=F)

data_l <- lapply(1:100000, function(v){data_m})

data2 <- data_l %>% rbind_all()

ind <- seq(1,nrow(data2),5)

myV1 <- data2[ind,1]
myV2 <- data2[ind,2]
myV3 <- data2[ind,3]
myV4 <- data2[ind,4]
myV5 <- data2[ind,5]
myV6 <- data2[ind,6]
myV7 <- data2[ind+1,4]
myV8 <- data2[ind+1,5]
myV9 <- data2[ind+1,6]
myV10 <- data2[ind+2,4]
myV11 <- data2[ind+2,5]
myV12 <- data2[ind+2,6]
myV13 <- data2[ind+3,4]
myV14 <- data2[ind+3,5]
myV15 <- data2[ind+3,6]
myV16 <- data2[ind+4,4]
myV17 <- data2[ind+4,5]
myV18 <- data2[ind+4,6]

data_out <- data.frame(myV1, myV2, myV3, myV4,
myV5, myV6, myV7, myV8, myV9, myV10, myV11,
myV12, myV13, myV14, myV15, myV16, myV17, myV18, stringsAsFactors=F)※ 引述《spiderway (spiderway)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好，: 最近因為需要要處理一些資料，雖然有寫出要的東西，但是實在是跑太慢了，感覺要跑個: 幾年= =,一定是我寫法不好,想來這問一下各位大大該怎個改才對，並學習一下: 麻煩各位大大給予小魯指導，感激不盡!!!: 程式:: 讀取了全部CSV(10萬多個)存在一個大大的list裡面,要做的大概是把每一個list裡面的: 資料都做同一件事,就是每5筆整理成1筆,然後append在一起，如下:    1  2 3  4 5 6                    1  2 3 ....: 1 6/1 a b 12 1 2                 1 6/1 a b 12 1 2 13 1 3 14 1 4 15 1 5 16 1 6: 2 6/1 a b 13 1 3: 3 6/1 a b 14 1 4     變成1筆>>>: 4 6/1 a b 15 1 5: 5 6/1 a b 16 1 6: [程式範例]:: http://pastie.org/10898589: [版本]: R version 3.3.0 (2016-05-03): Platform: x86_64-pc-linux-gnu (64-bit): Running under: Ubuntu 14.04.4 LTS: [關鍵字]:--","R_Language"
"1421","M.1467740342.A.CA6","hakiooi","問題","plot中文標題成方格(MAC)",2016-07-06 01:39:00,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:想要跑calendarplot，但是標題是中文的話就會變成方格，在其他plot沒有這個問題，中文正常顯示。另外，在主標題下面，如7月、8月，「月」這個字也會變方格[程式範例]:calendarPlot(data, pollutant =""unable"",month=c(7:8), year=2016,w.shift=1,anntate=""unable"",key = F)http://imgur.com/oyYHe12[環境敘述]:R version 3.2.4 (2016-03-10)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.11.5 (El Capitan)locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] openair_1.8-6 maps_3.1.0loaded via a namespace (and not attached):[1] Rcpp_0.12.4         mapdata_2.2-6       RColorBrewer_1.1-2  plyr_1.8.3          tools_3.2.4[6] lubridate_1.5.6     gtable_0.2.0        nlme_3.1-125        lattice_0.20-33     mgcv_1.8-12[11] png_0.1-7           Matrix_1.2-4        DBI_0.3.1           mapproj_1.2-4       parallel_3.2.4[16] hexbin_1.27.1       proto_0.3-10        stringr_1.0.0       dplyr_0.4.3         cluster_2.0.3[21] RgoogleMaps_1.2.0.7 grid_3.2.4          R6_2.1.2            jpeg_0.1-8          RJSONIO_1.3-0[26] sp_1.2-3            ggmap_2.6.1         latticeExtra_0.6-28 ggplot2_2.1.0       reshape2_1.4.1[31] magrittr_1.5        scales_0.4.0        assertthat_0.1      geosphere_1.5-1     colorspace_1.2-6[36] stringi_1.0-1       lazyeval_0.1.10     munsell_0.4.3       rjson_0.2.15[關鍵字]:
calendarplot, openair,中文編碼選擇性，也許未來有用--","R_Language"
"1422","M.1467705681.A.E54","amygm307","問題","用for迴圈算zscore",2016-07-05 16:01:18,NA,NA,"- 問題: 用for迴圈算z-score遇到的問題[問題類型]程式諮詢[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:不好意思小妹初學R又來打擾想要把分數依照每位受試者去算z score每位受試者有8個觀察值於是我先分別計算平均數和標準差，如下A20是我要標準化的變項，sub是受試者編號wtpmean=aggregate(dat$A20,by=list(dat$sub),mean)colnames(wtpmean)=c(""sub"",""mean"")wtpsd=aggregate(dat$A20,by=list(dat$sub),sd)colnames(wtpsd)=c(""sub"",""sd"")接著我想要用迴圈來把分數標準化zscore=0for(i in 1:length(dat$A20)){zscore=(subset(dat$A20,dat$sub==i)-wtpmean$mean[i])/wtpsd$sd[i]}但是這裡就出現問題了，我的zscore是空的，我不知道是哪裡寫錯了還是迴圈的用法不對呢?[環境敘述]:R version 3.3.0 (2016-05-03)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods[7] baseloaded via a namespace (and not attached):[1] tools_3.3.0--","R_Language"
"1423","M.1467646043.A.971","celestialgod","問題","Re: 處理資料 效能詢問",2016-07-04 23:27:19,NA,NA,"※ 引述《spiderway (spiderway)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好，: 最近因為需要要處理一些資料，雖然有寫出要的東西，但是實在是跑太慢了，感覺要跑個: 幾年= =,一定是我寫法不好,想來這問一下各位大大該怎個改才對，並學習一下: 麻煩各位大大給予小魯指導，感激不盡!!!: 程式:: 讀取了全部CSV(10萬多個)存在一個大大的list裡面,要做的大概是把每一個list裡面的: 資料都做同一件事,就是每5筆整理成1筆,然後append在一起，如下:    1  2 3  4 5 6                    1  2 3 ....: 1 6/1 a b 12 1 2                 1 6/1 a b 12 1 2 13 1 3 14 1 4 15 1 5 16 1 6: 2 6/1 a b 13 1 3: 3 6/1 a b 14 1 4     變成1筆>>>: 4 6/1 a b 15 1 5: 5 6/1 a b 16 1 6: [程式範例]:: http://pastie.org/10898589: [版本]: R version 3.3.0 (2016-05-03): Platform: x86_64-pc-linux-gnu (64-bit): Running under: Ubuntu 14.04.4 LTS: [關鍵字]:覺得哪堜ワョA我先附上我目前弄出來的結果

library(pipeR)
library(plyr)
library(dplyr)
library(tidyr)

# data generation (csv_files就是你的ldf)
num_csv <- 1e1
num_xlvls <- 2
num_ylvls <- 2
sampleSize_csv <- 1e2
csv_files <- lapply(1:num_csv, function(i){
  expand.grid(letters[1:num_xlvls], letters[1:num_ylvls],
              stringsAsFactors = FALSE) %>>%
    `[`(sample(1:nrow(.), sampleSize_csv, TRUE), ) %>>%
    modifyList(setNames(lapply(1:3, function(j){
      sample(1:100, sampleSize_csv, TRUE)
    }), paste0(""Var"", 3:5))) %>>% tbl_df
})

# append一起
csv_files_append <- lapply(csv_files, function(subdf){
  nest(subdf, -Var1, -Var2) %>>%
    mutate(data = lapply(data, function(x){
      as.matrix(x) %>>% t %>>% as.vector
    }))
})


csv_files大概會像這樣：

[[1]]
Source: local data frame [100 x 5]

    Var1  Var2  Var3  Var4  Var5
   <chr> <chr> <int> <int> <int>
1      b     a    62    29    94
2      a     a    11    26     6
3      a     a    49    83    32
4      b     b    45    22    44
5      a     b    83    57     3
6      b     a    31    68     5
7      a     a    24    79    71
8      a     a     2    70    61
9      a     a    93    22    93
10     a     b    21    52     2
..   ...   ...   ...   ...   ...


然會有這樣的data.frame  num_csv個

csv_files_append會長這樣：

[[1]]
Source: local data frame [4 x 3]

   Var1  Var2       data
  <chr> <chr>     <list>
1     b     a <int [84]>
2     a     a <int [66]>
3     b     b <int [81]>
4     a     b <int [69]>

一樣會有num_csv個

但是問題是你現在要怎麼把這num_csv個csv合併再一起

還是我誤會你的意思，你一個csv只會有一個Var1跟一個Var2嗎？

如果只有一個，那每一個csv_files_append就會大概長像這樣：

[[1]]
Source: local data frame [4 x 3]

   Var1  Var2       data
  <chr> <chr>     <list>
1     b     a <int [84]>

那最後在do.call加上rbind就會像上面多個level那樣...

只是每一個csv_files的Var1跟Var2都要是不同組合就是...

如果你能更完整陳述問題，我就能再看要怎麼寫~~


--","R_Language"
"1424","M.1467645432.A.012","Tampa","問題","自訂網頁關鍵字",2016-07-04 23:17:10,NA,NA,"程度:自學一個月左右


問題:如何自訂搜尋網頁關鍵字

已安裝套件 tmcn 與 RCurl

#讀取網頁

y<-url.exists(""https://zh.wikipedia.org/wiki/%E5%85%B3%E7%BE%BD"")想自訂關鍵字 關羽，關帝聖君(有關於關羽的別稱都搜尋出來)

匯出每種名稱的種類以及頻率


如關羽:10次

  關公:5次

等等

請問大大們 是要設定甚麼函數啊??


--","R_Language"
"1425","M.1467643744.A.057","spiderway","問題","處理資料 效能詢問",2016-07-04 22:48:59,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好，
最近因為需要要處理一些資料，雖然有寫出要的東西，但是實在是跑太慢了，感覺要跑個
幾年= =,一定是我寫法不好,想來這問一下各位大大該怎個改才對，並學習一下
麻煩各位大大給予小魯指導，感激不盡!!!

程式:
讀取了全部CSV(10萬多個)存在一個大大的list裡面,要做的大概是把每一個list裡面的
資料都做同一件事,就是每5筆整理成1筆,然後append在一起，如下
   1  2 3  4 5 6                    1  2 3 ....
1 6/1 a b 12 1 2                 1 6/1 a b 12 1 2 13 1 3 14 1 4 15 1 5 16 1 6
2 6/1 a b 13 1 3
3 6/1 a b 14 1 4     變成1筆>>>
4 6/1 a b 15 1 5
5 6/1 a b 16 1 6


[程式範例]:http://pastie.org/10898589[版本]
R version 3.3.0 (2016-05-03)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.4 LTS


[關鍵字]:

--
Sent from my ibon.

--","R_Language"
"1426","M.1467620229.A.984","Edster","心得","strptime 與中文",2016-07-04 16:17:06,NA,NA,"- 心得: strptime 與中文

我自己很不常用到中文來表達時間，
但最近拿到別人特意存成csv給我的時序資料，
開啟純文字才發現，對方的Excel是用中文的12小時制。

查了一下版上沒有相關討論，
國外的討論也都是AM/PM表示法，
沒想到Windows下 R 是用""上午/下午""來表示12小時制。

給個範例> strptime(""2014/01/01 01:10:00 PM"", ""%Y/%m/%d %I:%M:%S %p"")[1] NA> strptime(""2014/01/01 01:10:00 下午"", ""%Y/%m/%d %H:%M:%S %p"")[1] ""2014-01-01 01:10:00 CST""> strptime(""2014/01/01 01:10:00 下午"", ""%Y/%m/%d %I:%M:%S %p"")[1] ""2014-01-01 13:10:00 CST""

第三個才對。
po版留個紀錄

[關鍵字]:
windows, 12小時制, 上午/下午, AM/PM

[重點摘要]:

--","R_Language"
"1427","M.1467357927.A.B9F","amber219212","問題","R graph with two y-axes",2016-07-01 15:25:25,NA,NA,"我在網路上找到語法如下
x <- 1:5
y1 <- rnorm(5)
y2 <- rnorm(5,20)
par(mar=c(5,4,4,5)+.1)
plot(x,y1,type=""l"",col=""red"")
par(new=TRUE)
plot(x, y2,,type=""l"",col=""blue"",xaxt=""n"",yaxt=""n"",xlab="""",ylab="""")
axis(4)
mtext(""y2"",side=4,line=3)
legend(""topleft"",col=c(""red"",""blue""),lty=1,legend=c(""y1"",""y2""))

出處:http://goo.gl/G318eZ但是當我有第3個y(y3), 其值也想要對照 右邊y軸, 不知道該如何寫?

希望有人可以幫忙解答,謝謝

--","R_Language"
"1428","M.1467305732.A.354","bedroom0204","問題","判斷row的重複個數並做某個計算",2016-07-01 00:55:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我有個眼動數據格式縮小後如下：time    type200     1201     1206     1211     1216     1220     1222     1774     2776     2780     2784     2787     2814     6819     6820     6824     6829     61153    111160    111160    111163    111.我想要搜尋各type值，各持續幾秒，例如：此範例，type=1時，經過20秒；type=2時，經過13秒......可以利用甚麼函數或寫法呢？2.在得到上述持續時間後，可以怎麼把type=1,2,6,11取出，並乘上各自的持續時間？例如：type1=1*20、type2=2*13、type6=6*15...這些type數字是會持續累積的，time也會持續增加，但每列增加的幅度不一樣。謝謝回答！[關鍵字]:row--","R_Language"
"1429","M.1467304819.A.84D","JJabrams","問題","在mac上plot中文出現方塊的永久解決方案",2016-07-01 00:40:17,NA,NA,"[問題類型]:

想要解決 mac 上畫圖的問題

[軟體熟悉度]:
使用者

[問題敘述]:
已經爬文了但是找不到相關的討論 > <
最近用 mac 寫 R, 發現有好多 encoding 相關的問題＠＠
用 mac 的 Rstudio 畫圖, 中文會出現方格
網路上找到解決方案，用 par(family = 'STHeiti') 可以預先設定 plot 所用的字體
但是每次畫圖都需要重新定義一次字體覺得很麻煩
想要詢問有沒有一個永久的解決方案？
直接在根本上解決
就像是 locale 直接用 system() 把 R 的編碼從 C 定義成 UTF-8 一樣

[程式範例]:
par(family = 'STHeiti') 可解決
但是希望有永久性的解決方案

[環境敘述]:> sessionInfo()R version 3.3.1 (2016-06-21)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.5 (El Capitan)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

loaded via a namespace (and not attached):
[1] tools_3.3.1

[關鍵字]:
mac, plot, 中文, 亂碼, 方格

--","R_Language"
"1430","M.1467206900.A.030","dp2046","問題","請教Rmpi設定哪裡出了問題",2016-06-29 21:28:13,NA,NA,"[問題類型]:
Rmpi設定的問題

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我要用3台電腦平行處理一筆資料
是使用OpenMPI
然後openmpi-default-hostfile有設定3台電腦的IP
192.168.0.10
192.168.0.13
192.168.0.16
SSH也都暢通免密碼能直接登入
可是在R裡輸入mpi.spawn.Rslaves(nslaves=2)
顯示下列訊息
2 slaves are spawned successfully. 0 failed.
master (rank 0, comm 1) of size 3 is running on: Apple05de-Mac-mini
slave1 (rank 1, comm 1) of size 3 is running on: Apple05de-Mac-mini
slave2 (rank 2, comm 1) of size 3 is running on: Apple05de-Mac-mini

這樣是代表還是只有一台電腦在做處理吧？
不知道設定的地方哪邊出了問題
要怎樣才能讓那兩個slave是顯示其他電腦的名稱

--","R_Language"
"1431","M.1467205354.A.397","MrSomebody","問題","R的規劃求解 optim()、constrOptim()",2016-06-29 21:02:31,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門

[問題敘述]:
最近在研究SVM，但同樣資料用R和matlab跑出來結果不一樣，所以想嘗試寫演算法，
在過程中有地方卡住，故上PTT求助各位大大。http://imgur.com/5c2wQue解線性kernal的SVM演算法，即解出函數max{L_D function}(如圖中紅框)，
x_i為解釋變數(已知)、y_i為反應變數(已知)，
要求alpha_i帶入甚麼值時使L_D function最大。

可利用optim() 函數求主要L_D最大值，但無法加入條件式(圖中藍框兩條件式)；
constrOptim() 函數可以加不等式條件，但只限定alpha_i線性組合之不等式，無法設
sum(alpha_i&y_i)=0條件式。

不知R是否有其他函數可以求類似的問題?
謝謝大家耐心看完。


--","R_Language"
"1432","M.1467178939.A.E67","wanggz","情報","R 語言入門課程（7/21 ∼ 7/22，南科）",2016-06-29 13:42:14,NA,NA,"課程名稱：R 語言入門課程
上課日期：2016/7/21（四）∼2016/7/22（五）
上課地點：國家高速網路與計算中心 台南分部

課程內容安排：
1. R 簡介：安裝操作環境與 RStudio
2. 基本語法：向量、列表、因子、矩陣、資料表等操作
3. 進階語法：流程控制、迴圈與函數的使用、指令稿撰寫
4. 資料視覺化：基本的 R 繪圖功能
5. 套件的使用：使用各種 R 套件，進行各式資料視覺化分析

詳情請見官網https://goo.gl/v7wAiK--","R_Language"
"1433","M.1467102515.A.CEB","celestialgod","問題","Re: Magrittr 小問題",2016-06-28 16:28:32,NA,NA,"※ 引述《swedrf0112 (M)》之銘言：: [問題類型]:程式諮詢: [軟體熟悉度]: 入門: [問題敘述]: magrittr 的 pipe 可以抓到最一開始的物件嗎?: [程式範例]:: 其實原本的問題是，在問題中的 x ，有些時候是一些經過處理的物件，: 給我現在遇到的例子 :: #  > head(season,20): # [1] ""2000-01"" ""2001-02"" ""2002-03"" ""2003-04"" ""2004-05"" ""2005-06"" ""2006-07"": ""2007-08"" ""2008-09"" ""2009-10"": # [11] ""2010-11"" ""2011-12"" ""2012-13"" ""2013-14"" ""2014-15"" ""2015-16"" ""1996-97"": ""1997-98"" ""1998-99"" ""1999-00"": 我想要針對 season 向量的 unique 進行排序，以一般的寫法，我寫成 :: # > unique(season): #  [1] ""2000-01"" ""2001-02"" ""2002-03"" ""2003-04"" ""2004-05"" ""2005-06"": #  [7] ""2006-07"" ""2007-08"" ""2008-09"" ""2009-10"" ""2010-11"" ""2011-12"": #  [13] ""2012-13"" ""2013-14"" ""2014-15"" ""2015-16"" ""1996-97"" ""1997-98"": #  [19] ""1998-99"" ""1999-00"": unique(season)[order(as.numeric(substr(unique(season),1,4)))]: 但是因為我覺得在裡面 season 必須被 unique 兩次，很浪費計算資源，: 也可以先令一個 y=unique(season)，把原本的式子 unique(season) 改成 y ， 但這樣: 會浪費記憶體記這一個暫時的向量: 所以我想用 magrittr 寫，所以我才以剛剛這個簡單的例子，想問是否可以呼叫 pipe 最: 一開始的物件，因為我在 magrittr 的 help 裡沒找到這件事XD: season %>% unique %>% substr(.,1,4) %>% as.numeric %>% order %>% ""這邊應該要呼: 叫最一開始的 season"": 針對一開始沒把問題說清楚，跟 C 大與各位致歉，謝謝!: 也請各位指正裡面的想法是否有錯誤，或許根本就不會發生我想的事XDD: [環境敘述]:: [關鍵字]: Magrittr測試一下存暫存變數的差異有多大

順便看不同pipe的速度差異有多少

測試程式：

library(magrittr)
library(pipeR)
# data generation
# 生成一千萬筆資料
dat <- seq.Date(as.Date(""1990-01-01""),
                as.Date(""2015-10-01""), by = ""quarter"") %>>%
  sample(1e7, TRUE) %>>% format(""%Y-%m"")

# 第一個方法，直接算，不用暫存變數
st <- proc.time()
res1 <- unique(dat)[order(as.numeric(substr(unique(dat),1,4)))]
proc.time() - st
# user  system elapsed
# 0.20    0.05    0.25

# 第二個方法，用pipe跟block，暫存變數只會在block裡面存活
st <- proc.time()
res2 <- dat %>% {
  tmp1 <- unique(.)
  tmp1 %>% substr(1,4) %>% as.numeric %>% order %>% {tmp1[.]}
  }
proc.time() - st
# user  system elapsed
# 0.12    0.07    0.19
print(length(ls(pattern = ""tmp1"")) > 0) # FALSE

# 同第二個，pipe改成%>>%
st <- proc.time()
res3 <- dat %>>% {
  tmp2 <- unique(.)
  tmp2 %>>% substr(1,4) %>>% as.numeric %>>% order %>>% (tmp2[.])
}
proc.time() - st
# user  system elapsed
# 0.10    0.03    0.12
print(length(ls(pattern = ""tmp"")) > 0) # FALSE

# 用pipeR的assignment，把暫存變數存在外面
st <- proc.time()
res4 <- dat %>>% unique %>>% (~ tmp3 <- .) %>>% substr(1, 4) %>>%
  as.numeric %>>% order %>>% (tmp3[.])
proc.time() - st
# user  system elapsed
# 0.08    0.04    0.13
print(length(ls(pattern = ""tmp3"")) > 0) # TRUE

這樣測一次好像pipeR + block表現最好，但是沒有重複

接下來用加上重複在試一次：

library(microbenchmark)
microbenchmark(
  res1 = unique(dat)[order(as.numeric(substr(unique(dat),1,4)))],
  res2 = dat %>% {
    tmp1 <- unique(.)
    tmp1 %>% substr(1,4) %>% as.numeric %>% order %>% {tmp1[.]}
  },
  res3 = dat %>>% {
    tmp2 <- unique(.)
    tmp2 %>>% substr(1,4) %>>% as.numeric %>>% order %>>% (tmp2[.])
  },
  res4 = dat %>>% unique %>>% (~ tmp3 <- .) %>>% substr(1, 4) %>>%
                 as.numeric %>>% order %>>% (tmp3[.])
  )
# Unit: milliseconds
# expr      min       lq     mean   median       uq      max neval
# res1 247.9882 289.0776 284.7083 291.4474 293.3180 429.9460   100
# res2 123.6998 124.9163 138.5741 126.2327 165.8535 170.4374   100
# res3 123.3566 124.9036 137.5461 125.9739 165.4394 171.2854   100
# res4 123.6355 124.9607 137.1532 125.9386 165.5996 170.9329   100

可以看出有暫存變數的表現都差不多

如果不想要存一個暫存變數在外面，就用block + pipe的方式吧

而且不同pipe在這裡沒什麼差異

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1434","M.1467097215.A.D67","swedrf0112","問題","Magrittr 小問題",2016-06-28 15:00:13,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]: 入門

[問題敘述]: magrittr 的 pipe 可以抓到最一開始的物件嗎?

[程式範例]:> x=runif(5,0,1)>> ## 將向量內的值排序> x[order(x)][1] 0.1710200 0.2608820 0.2966179 0.5351188 0.9172524
>> ## 想請問除了下面的方法外，最後一個 pipe 該怎麼下?> x %>% order %>% x[.][1] 0.1710200 0.2608820 0.2966179 0.5351188 0.9172524


先謝謝各位!!

######

不好意思，我重新說明一次我的問題，
其實原本的問題是，在問題中的 x ，有些時候是一些經過處理的物件，
給我現在遇到的例子 :

#  > head(season,20)
# [1] ""2000-01"" ""2001-02"" ""2002-03"" ""2003-04"" ""2004-05"" ""2005-06"" ""2006-07""
""2007-08"" ""2008-09"" ""2009-10""
# [11] ""2010-11"" ""2011-12"" ""2012-13"" ""2013-14"" ""2014-15"" ""2015-16"" ""1996-97""
""1997-98"" ""1998-99"" ""1999-00""

我想要針對 season 向量的 unique 進行排序，以一般的寫法，我寫成 :

# > unique(season)
#  [1] ""2000-01"" ""2001-02"" ""2002-03"" ""2003-04"" ""2004-05"" ""2005-06""
#  [7] ""2006-07"" ""2007-08"" ""2008-09"" ""2009-10"" ""2010-11"" ""2011-12""
#  [13] ""2012-13"" ""2013-14"" ""2014-15"" ""2015-16"" ""1996-97"" ""1997-98""
#  [19] ""1998-99"" ""1999-00""

unique(season)[order(as.numeric(substr(unique(season),1,4)))]

但是因為我覺得在裡面 season 必須被 unique 兩次，很浪費計算資源，
也可以先令一個 y=unique(season)，把原本的式子 unique(season) 改成 y ， 但這樣
會浪費記憶體記這一個暫時的向量

所以我想用 magrittr 寫，所以我才以剛剛這個簡單的例子，想問是否可以呼叫 pipe 最
一開始的物件，因為我在 magrittr 的 help 裡沒找到這件事XD

season %>% unique %>% substr(.,1,4) %>% as.numeric %>% order %>% ""這邊應該要呼
叫最一開始的 season""

針對一開始沒把問題說清楚，跟 C 大與各位致歉，謝謝!
也請各位指正裡面的想法是否有錯誤，或許根本就不會發生我想的事XDD




[環境敘述]:

[關鍵字]: Magrittr


--","R_Language"
"1435","M.1466996625.A.9CD","jklkj","問題","在伺服器上跑R",2016-06-27 11:03:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:目前公司在伺服器上有裝R，我想要在伺服器上每天固定用R抓GA的資料我有先做了一個test.R的檔案，可是我在R裡執行test.R都跟我說沒這個檔案test.R裡的程式碼我有在伺服器上的R跑過，沒問題，但是目前第一步就卡住了因為RStudio有裝在伺服器上的，一開始我的RGoogleAnalytics是裝在RStudio上可是發現在終端機上卻找不到，之後我直接在終端機上裝就可以了想請問一下大家有在終端機上讀R檔或寫R檔的經驗嗎？謝謝[程式範例]:[[email<U+00A0>protected] ~]$ lsR  test.R  test.Rout  token> test.RError: object 'test.R' not found[環境敘述]:R version 3.3.0 (2016-05-03) -- ""Supposedly Educational""Copyright (C) 2016 The R Foundation for Statistical ComputingPlatform: x86_64-redhat-linux-gnu (64-bit)[關鍵字]:終端機 伺服器--","R_Language"
"1436","M.1466938046.A.82F","celestialgod","問題","Re: 統計csv內的次數",2016-06-26 18:47:23,NA,NA,"※ 引述《Tampa (光芒)》之銘言：: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 讀入csv檔: 表格形式如下:    x25  x26  x27: 6   h         g: 7   g    h: 8: 9   g    h: 10  h    g: 想要統計g 跟h的次數 並做成圖: 因為圖形好像不能直接計算字元: 所以要先把字元次數轉成數字: [程式範例]:: 大家可以看到 表格總共有x.25 x.26 x.27三行: 底下 分別會有g ,h ,跟空格: 現在想要做: 1.統計整個表格共有幾個g 幾個h: 2.每一行 總共有幾個g 幾個h: 已用過table等語法 但還是無法計算出來: 希望呈現的形式 是變成y<-(g的次數,h的次數): 然後再來畫圖: 感謝大家# 一般作法
dat <- data.frame(x1 = c(""h"", ""g"", """", ""g"", ""h""),
                  x2 = c("""", ""h"", ""h"", """", ""g""),
                  x3 = c(""g"", rep("""", 4)),
                  stringsAsFactors = FALSE)

table(factor(unlist(dat), levels = c(""g"", ""h"")))
# g h
# 4 4

sapply(dat, function(x){
  table(factor(x, levels = c(""g"", ""h"")))
})
#   x1 x2 x3
# g  2  1  1
# h  2  2  0



# dplyr作法

library(dplyr)

dat <- data.frame(x1 = c(""h"", ""g"", """", ""g"", ""h""),
                  x2 = c("""", ""h"", ""h"", """", ""g""),
                  x3 = c(""g"", rep("""", 4)),
                  stringsAsFactors = FALSE)
dat2 <- dat %>% mutate_each(funs(factor(., levels = c(""g"", ""h""))))

# 1. 統計整個表格共有幾個g 幾個h
table(unlist(dat2))
# g h
# 4 4

# 2. 每一行 總共有幾個g 幾個h
dat2 %>% sapply(table)
#   x1 x2 x3
# g  2  1  1
# h  2  2  0

--","R_Language"
"1437","M.1466933007.A.78F","Tampa","問題","統計csv內的次數",2016-06-26 17:23:24,NA,NA,"入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
讀入csv檔

表格形式如下
   x25  x26  x27
6   h         g
7   g    h
8
9   g    h
10  h    g

想要統計g 跟h的次數 並做成圖

因為圖形好像不能直接計算字元

所以要先把字元次數轉成數字


[程式範例]:


大家可以看到 表格總共有x.25 x.26 x.27三行

底下 分別會有g ,h ,跟空格

現在想要做

1.統計整個表格共有幾個g 幾個h

2.每一行 總共有幾個g 幾個h

已用過table等語法 但還是無法計算出來

希望呈現的形式 是變成y<-(g的次數,h的次數)

然後再來畫圖

感謝大家

--","R_Language"
"1438","M.1466830022.A.09E","obarisk","情報","R3.3.1",2016-06-25 12:47:00,NA,NA,"[關鍵字]: R 3.3.1 釋出

[重點摘要]:

總算把中文欄位對不到的問題消掉了

應該是這一點


match(x, t) (and hence x %in% t)
failed when x was of length one,
and either character and x and t only differed in their Encoding
or when x and t where complex with NAs or NaNs. (PR#16885.)


有想踩其它雷的可以試試了



--","R_Language"
"1439","M.1466744631.A.F25","moutain5566","問題","奇異值分解(SVD)",2016-06-24 13:03:48,NA,NA,"小弟因老師的要求研究奇異值分解

我的資料約20個x 2個y(EPS跟ROE)

我的目的是要利用SVD來萃取變數

我只知道SVD會縮減矩陣的維度

我試著把資料丟進去跑

跑出的特徵值有四個比較高

可是跑到這裡我就碰壁了

完全不知道要怎麼處理

可以請教各位有經驗的大大教一下小弟嗎

感激不盡



--","R_Language"
"1440","M.1466676393.A.00C","Edster","問題","Re: readxl小問題",2016-06-23 18:06:31,NA,NA,"我也來問問,
readxl::read_excel 讀入日期/時間的精準度的問題
偶而還是會遇到讀取Excel的情形

在Windows下，讀MS Excel創造出來的 YYYY-mm-dd HH:MM:SS 這種格式
例:讀取內容
2009-01-03 07:00:00

col_type
1. date: 2009-01-03 06:59:59
2. text: 39997.291666666664
3. numeric: 39997.29

用text屬性差距很少, 但也不是7點整, 因為7/24不能整除.
               7/24 = 0.291666666667
(0.291666666664)*24 = 6.999999999936

不知是微軟的問題還是誰的問題.
(Excel好像存到小數點十位(且是用截斷的方式), 但用readxl讀進來卻是12位)

因為我處理的資料都是整點, 也就偷懶這樣處理了.
這支function還有別的用途, 才寫成這樣. 在這邊功能是一樣的就直接貼上來了.

TS是 POSIX 格式: redaxl::read_excel(file, col_type=""date"")
TS2Oclock <- function (TS) {
  MM = as.numeric(format(TS, ""%M""))/60; MM[MM>=0.5] <- 1; MM[MM<0.5] <- 0
  HH = as.numeric(format(TS, ""%H"")) + MM
  TS = as.POSIXct(paste(format(TS, ""%Y-%m-%d""),"" "", HH, "":00"",sep=""""))
}
TS2Oclock(as.POSIXct(2009-01-03 06:59:59))

各位用哪支function去重新處理?
我知道用 csv 且用ISOdatetime格式儲存就沒有這種問題, 但總會遇到excel※ 引述《clansoda (小笨)》之銘言：: 各位好，我有個xls檔案，他是用general格式去儲存時間格式: 所以外部顯示會長得像2016/06/21 11:39:25 AM 這樣: 但其實裡面是用電腦化的紀錄時間會變成42535.49413: 這個應該是以1990-01-01為止到現在的天數 所以是: 42535.49413天從那天算起，我用readxl的read_excel讀入: 但是他的function在讀入的時候只會讀入兩個小數點: 因此會變成42535.49天，接著我用openxlsx的convertDateTime: 將這個數字轉換成我們和R看得懂的格式，結果雖然前面都一樣: 但是差三位小數導致真實的時間差了五分鐘，如果我想將這個數字導正: 請問除了直接在excel加工之外還有其他的方法嗎，openxlsx的read.xlsx: 我已經試過了，但是他一直顯示亂碼，我不確定是不是中文太多導致: 他沒有可以encoding的選項，而xlsx的read.xlsx是太慢無法使用: 如果要人工去調整excel會很辛苦，因為數量不小: 不知道有沒有人知道如何解決這個問題呢?--","R_Language"
"1441","M.1466658481.A.FAB","celestialgod","問題","Re: parsing的中文顯示",2016-06-23 13:07:58,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: C大我把我的問題發一篇，我目前大部分都有看懂: 第一個問題是我有?GET，他的maunal裡面沒有提到referer這個: 請問這個是要設成你尋頁的什麼才是正確的呢?chrome F12查看該網頁的requested header可以看到他有referer

curl的manual裡面有referer的參數

httr::config的...可以放置curl的其他參數，可以?config查看

GET第二個element就是給config: 因為看你設的參數是該網頁的整頁，也是inspect頁面的network: 的第一項，所以我有點疑惑這個參數究竟要設什麼就是給request headers: 第二個問題是str_replace_all，manual，只有\\1\\1這個例子: 那個例子是多一個前面的文字，但是您的寫法把前面的括號消掉了: 請問這個\\(|\\)代表什麼涵義呢?這是regexp， ( 或 )這個取代掉， |代表或的意思

又因為()在regexp裡面有意義，所以需要用escape \\

可以參考這個網站：http://regexone.com/: 第三個問題是這個str_replace跑完後，我用class查詢他是chracter: 可是您在後面接了一個fromJson然後整個LIST就變成dataframe的型態了: 為什麼他是Json的格式呢?是如何判斷的，而如果str_replace只消掉: 前面的文字如showStoreList，而沒有消掉括號的話fromJson就會出錯: 請問如何判斷他是JSON的格式呢?怎麼判斷這個問題很怪，你找一下JSON的範例格式對一下滿明顯的

那個樣式就是一個javascript的物件(攤手

就是JSON (javascript object notation)....

不知道怎麼回答你這個問題QQ: 最後一個問題是在這個全家頁面用我之前用的ctrl+u這種顯示整頁html的: 方式會看不到想要parsing的格式，用C大這種inspect的方式可以看到他後面API的: 走向，我點那個api的頁面會出現類似:  ""NAME"": ""全家基隆廟口店"",:     ""TEL"": ""02-24289166"",:     ""POSTel"": ""02-77230578"",:     ""px"": 121.742868,:     ""py"": 25.128415,:     ""addr"": ""基隆市仁愛區仁三路33號"",:     ""SERID"": 15829.0,:     ""pkey"": ""011629"",:     ""oldpkey"": ""005829"",:     ""post"": ""200"",:     ""all"": ""COFFEE,WiFi,oneice"",:     ""road"": ""仁三路"",:     ""twoice"": null: 看起來就是我們要的資料沒錯，接著我用同樣方式去找seven他們的查詢系統: 他們的更隱密，我找不到類似全家的這種方式可以抓他們的資料: 只有一個emap開頭的，但是後面的參數是時間，裡面的值是縣市: 我就再也沒找到裡面有值的檔案了，請問C大這種的也parsing的了嗎?: 感謝您的回復每個網站寫法都不一樣，這個就要慢慢找怎樣爬了

像是全家在header上加referer，我也是第一次看到(攤手

多爬幾個網站累積經驗囉(攤手

至於seven的網站一樣可以在https://emap.pcsc.com.tw按下搜尋後

可以在network看到Request URL:https://emap.pcsc.com.tw/EMapSDK.aspx從Form Data可以看到他有SearchStore這個api，然後下query字串就有xml檔案了

如圖所示：http://i.imgur.com/WJt3eR8.png借用了全家的全國鄉鎮位置去做查詢 (你可以另外去找網頁找全國鄉鎮，借全家比較慢)

程式：http://pastebin.com/HZimmj1X檔案下載連結：http://www.mediafire.com/download/gbova5bl29h9owb/sevenElevenStoreLoc.csv部分結果：

   POIID  POIName                X                Y        Telno
   <chr>    <chr>            <chr>            <chr>        <chr>
1  15886     千成        121522903         25043751 (02)23577481
2  11081     千翔        121516971         25045748 (02)23123025
3  13639   大永博 121511644.363883 25043153.9228778 (02)23826912
4  16133     中航        121522538         25042552 (02)23278931
5  99156   中華電        121523275         25036515 (02)33433607
6  12179     中愛        121520249         25033082 (02)23415461
7  93291     中樂        121510506         25045116 (02)23122424
8  12830     丹陽        121525546         25039050 (02)23516914
9  13529     仁金        121528948         25038452 (02)23583428
10 12786   北高鐵 121519384.869613 25047133.4366581 (02)23149940

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1442","M.1466656124.A.3B4","clansoda","問題","Re: parsing的中文顯示",2016-06-23 12:28:39,NA,NA,"C大我把我的問題發一篇，我目前大部分都有看懂

第一個問題是我有?GET，他的maunal裡面沒有提到referer這個

請問這個是要設成你尋頁的什麼才是正確的呢?

因為看你設的參數是該網頁的整頁，也是inspect頁面的network

的第一項，所以我有點疑惑這個參數究竟要設什麼

第二個問題是str_replace_all，manual，只有\\1\\1這個例子

那個例子是多一個前面的文字，但是您的寫法把前面的括號消掉了

請問這個\\(|\\)代表什麼涵義呢?

第三個問題是這個str_replace跑完後，我用class查詢他是chracter

可是您在後面接了一個fromJson然後整個LIST就變成dataframe的型態了

為什麼他是Json的格式呢?是如何判斷的，而如果str_replace只消掉

前面的文字如showStoreList，而沒有消掉括號的話fromJson就會出錯

請問如何判斷他是JSON的格式呢?

最後一個問題是在這個全家頁面用我之前用的ctrl+u這種顯示整頁html的

方式會看不到想要parsing的格式，用C大這種inspect的方式可以看到他後面API的

走向，我點那個api的頁面會出現類似

 ""NAME"": ""全家基隆廟口店"",
    ""TEL"": ""02-24289166"",
    ""POSTel"": ""02-77230578"",
    ""px"": 121.742868,
    ""py"": 25.128415,
    ""addr"": ""基隆市仁愛區仁三路33號"",
    ""SERID"": 15829.0,
    ""pkey"": ""011629"",
    ""oldpkey"": ""005829"",
    ""post"": ""200"",
    ""all"": ""COFFEE,WiFi,oneice"",
    ""road"": ""仁三路"",
    ""twoice"": null

看起來就是我們要的資料沒錯，接著我用同樣方式去找seven他們的查詢系統

他們的更隱密，我找不到類似全家的這種方式可以抓他們的資料

只有一個emap開頭的，但是後面的參數是時間，裡面的值是縣市

我就再也沒找到裡面有值的檔案了，請問C大這種的也parsing的了嗎?

感謝您的回復

--","R_Language"
"1443","M.1466587682.A.795","vargnatt","問題","如何透過shiny頁面把資料寫進mysql?",2016-06-22 17:28:00,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除新手[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的利用shiny做一個註冊帳號的頁面


[程式範例]:=ui.R=library(shiny)shinyUI(fluidPage(titlePanel(""註冊帳號 Sign Up""),fluidRow(column(3,wellPanel(textInput(""email"", ""請輸入E-Mail""),passwordInput(""paswd"", ""請輸入密碼""),textInput(""nickname"", ""請輸入一個暱稱""),actionButton(""signup"",""註冊""))))))=server.R=library(RMySQL)library(shiny)#connect to databasewriteDB <- function(input_) {memberDB = dbConnect(MySQL(),dbname = ""MEMBERS"",username = """",password = """",host = ""xx.xx.xx.xx"",port =3306)query = sprintf(""INSERT INTO Members_Info(EMail,Password,Name) values(%s,%s,%s)"",input$email,input$paswd,input$nickname)dbSendQuery(memberDB,query)dbDisconnect(memberDB)}shinyServer(function(input, output, session){observe({if(input$signup==1){isolate({writeDB(input_)})}})})執行出來的結果是說我在sprintf那邊有問題：Warning: Error in sprintf: object 'input' not found請問我應該要用什麼方式把值傳到server.R然後寫進Mysql？
或者是不應該用sprintf?
另外能否請版上高手提供相關問題討論的地方或是範例？謝謝！
我找過一些資料，但是不多（可能是自己不太會找），
這個code我是參考stack overflow上的討論寫的。

[環境敘述]:

[關鍵字]:R shiny mysql--","R_Language"
"1444","M.1466521939.A.9D0","also5566","問題","讓replication更快速",2016-06-21 23:12:15,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我寫了一個模擬研究的function
裡面包含了隨機變數的產生以及後續的一些運算
需要有500次重複
產出結果是一個list
裡面的元素包含一些參數估計、共變異數矩陣等等

因為我操弄變項總共有60種組合
每個都要重複500次
目前是用for loop來跑
1個組合大約需要20-30分鐘
所有組合跑完就要20-30小時
function若有一些瑕疵就需要重跑20-30小時
因此希望可以讓這個過程更快

[程式範例]:

setwd('dir1')

for (i in 1:500){
  trial=formatC(i, width = 3, flag = '0')
  res<-compute()
  filename<-paste0(trial,"".Rdata"")
  save(res,file=filename)
}

其中compute() 即為我的function

[環境敘述]:

[關鍵字]:


--","R_Language"
"1445","M.1466514438.A.696","celestialgod","問題","Re: parsing的中文顯示",2016-06-21 21:07:13,NA,NA,"→ clansoda: 請問C大，這種網頁是不是完全爬不了06/21 16:20→ clansoda: http://www.family.com.tw/marketing/inquiry.aspx06/21 16:21→ clansoda: 外面能爬的那個網頁，他大概有幾百個缺漏值，可能他後來06/21 16:21→ clansoda: 就不曾更新了，因此有些新開的他就沒加進去了06/21 16:21好讀版：http://pastebin.com/zNjkb0uhcsv結果：http://www.mediafire.com/download/a3d7aat94yhz16n/familyMart_loc.csv我用查郵遞區號方式去對inquery.aspx查詢

這裡最重要的是用curl的referer

我一開始找不到httr的方法去設定，所以先用了RCurl去做

後面補上用httr的GET的做法


library(httr)
library(xml2)
library(pipeR)
library(purrr)
library(stringi)
library(stringr)
library(RCurl)
library(jsonlite)

url_postCodes <- ""http://www.easytravel.com.tw/postid_search.asp""all_postCodes <- url_postCodes %>>% GET %>>% content(encoding = ""big5"") %>>%
  xml_find_all(""//td/font"") %>>% xml_text %>>%
  stri_conv(from = ""UTF-8"", to = ""Big5"") %>>% str_extract(""\\d{3}"") %>>%
  `[`(!is.na(.)) %>>% as.integer

# method with RCurl::getURL
familyMartLoc <- lapply(all_postCodes, function(postCode){
  url_toPrint <- str_c(""http://api.map.com.tw/net/GraphicsXY.aspx?"",""search_class=Zip&Zip=%i&fun=getCityByZipReturn"")
  city_area <- sprintf(url_toPrint, postCode) %>>%
    getURL(referer = ""http://www.family.com.tw/marketing/inquiry.aspx"")%>>%
    str_replace_all(""getCityByZipReturn\\(|\\)"", """") %>>% fromJSON

  url_toPrint <- str_c(""http://api.map.com.tw/net/familyShop.aspx?"",""searchType=ShopList&type=&city=%s&area=%s&road=&"",
            ""fun=showStoreList&key=6F30E8BF706D653965BDE302661D1241F8BE9EBC"")
  sprintf(url_toPrint, city_area$COUNTY, city_area$TOWN) %>>%
    getURL(referer = ""http://www.family.com.tw/marketing/inquiry.aspx"")%>>%
    str_replace_all(""showStoreList\\(|\\)"", """") %>>% fromJSON
}) %>>% do.call(what = rbind)

# method with httr::GET
familyMartLoc2 <- lapply(all_postCodes, function(postCode){
  url_toPrint <- str_c(""http://api.map.com.tw/net/GraphicsXY.aspx?"",""search_class=Zip&Zip=%i&fun=getCityByZipReturn"")
 city_area <- sprintf(url_toPrint, postCode) %>>%
  GET(config(referer = ""http://www.family.com.tw/marketing/inquiry.aspx""))%>>%
  content(""text"") %>>% str_replace_all(""getCityByZipReturn\\(|\\)"", """") %>>%
  fromJSON

  url_toPrint <- str_c(""http://api.map.com.tw/net/familyShop.aspx?"",""searchType=ShopList&type=&city=%s&area=%s&road=&"",
            ""fun=showStoreList&key=6F30E8BF706D653965BDE302661D1241F8BE9EBC"")
 sprintf(url_toPrint, city_area$COUNTY, city_area$TOWN) %>>%
 GET(config(referer = ""http://www.family.com.tw/marketing/inquiry.aspx""))%>>%
 content(""text"") %>>% str_replace_all(""showStoreList\\(|\\)"", """") %>>%
 fromJSON
}) %>>% do.call(what = rbind)

partial results:

          NAME         TEL      POSTel       px       py
1   全家新德店 02-23214351 02-77463163 121.5316 25.04447
2   全家台醫店 02-23278841 02-23279603 121.5185 25.04079
3 全家南機場店 02-23039420 02-77095865 121.5058 25.02840
4 全家新惠安店 02-23036887 02-77300717 121.5065 25.02953
5 全家新龍口店 02-23047184 02-77300715 121.5104 25.02723
6 全家新廈門店 02-23681443 02-77397215 121.5176 25.02532

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1446","M.1466508180.A.68F","locka","問題","write.xlsx套件問題",2016-06-21 19:22:56,NA,NA,"各位好,
假設我有一組日期的資料(POSIXct格式)想要輸出成.xlsx檔

data <- c(""2007-04-14 17:41:00 CST"",...)

當我用write.csv(data, ""test1.csv"") 不會有問題
顯示的會是2007/4/14 05:41:00 PM

可是當我使用write.xlsx2(data, ""test2.xlsx"")時
顯示的結果變成 4/14/2007 09:41:00 AM
所有時間都提早了八小時

大家有遇過這個問題嗎>""<

(code貼在下面)http://ideone.com/7W7riH[關鍵字]:xlsx, POSIXct, date, time--","R_Language"
"1447","M.1466480659.A.C22","clansoda","問題","readxl小問題",2016-06-21 11:44:15,NA,NA,"各位好，我有個xls檔案，他是用general格式去儲存時間格式

所以外部顯示會長得像2016/06/21 11:39:25 AM 這樣

但其實裡面是用電腦化的紀錄時間會變成42535.49413

這個應該是以1990-01-01為止到現在的天數 所以是

42535.49413天從那天算起，我用readxl的read_excel讀入

但是他的function在讀入的時候只會讀入兩個小數點

因此會變成42535.49天，接著我用openxlsx的convertDateTime

將這個數字轉換成我們和R看得懂的格式，結果雖然前面都一樣

但是差三位小數導致真實的時間差了五分鐘，如果我想將這個數字導正

請問除了直接在excel加工之外還有其他的方法嗎，openxlsx的read.xlsx

我已經試過了，但是他一直顯示亂碼，我不確定是不是中文太多導致

他沒有可以encoding的選項，而xlsx的read.xlsx是太慢無法使用

如果要人工去調整excel會很辛苦，因為數量不小

不知道有沒有人知道如何解決這個問題呢?

--","R_Language"
"1448","M.1466448775.A.491","skyloveyan","問題","如何在ggplot2在同一張畫布上畫4*4的子圖",2016-06-21 02:52:53,NA,NA,"在一般plot，我們可以透過par(mfrow=c(4,4)) ，

在同一畫布上畫出4*4共16張子圖。

想問的是，如何在 ggplot2 使用，我用過 facet_grid(. ~ )

但他只能放在同一列上，而我的圖形是類似 image的圖。

用 facet_grid(. ~ ) 效果並不好。希望大家能夠指點一下

--","R_Language"
"1449","M.1466365948.A.BF5","keepingJBJ","問題","資料處理/統計分析 R or python好",2016-06-20 03:52:25,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)

各位前輩大家好
小弟本身是在做資料分析的工作
平常工作上使用的主要是SQL跟SAS
自己想學其他的 open source code 加強能力
不知道各位前輩對於做ETL or Data mining
比較推薦python還是R呢
小弟第一次發言
請大家提供小弟建議
謝謝

--","R_Language"
"1450","M.1466210341.A.5C3","celestialgod","問題","Re: 條件機率矩陣",2016-06-18 08:38:58,NA,NA,"※ 引述《mowgur (PINNNNN)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想把這樣的資料: 交易編號        會員卡號        V1      V2      V3      V4: 6557            1235            0       0       1       1: 6558            1235            1       0       1       0: 6559            1235            1       1       1       0: .: .: .: .: .: 變成條件機率矩陣:         V1      V2      V3      V4: V1              .2      .5      .7: V2                      .4      .6: V3                              .1: V4: [程式範例]:: 資料group是8個dataframe組合的list 每個dataframe有14欄 前2欄是id 希望能夠: 輸出8個條件機率矩陣組成的list: 以下是我的程式碼及錯誤訊息: m <- 12: f <- list(matrix(nrow = m, ncol = m)): cp <- list(matrix(nrow = m, ncol = m)): summation <- list(c()): for(k in 1:length(group)){:   group[[k]] <- group[[k]][,-c(1,2)]:   summation <- apply(group[[k]],2,sum):   for(i in 1:(m-1)) {:     for(j in (i+1):m){:       index <- (group[[k]][,i]==1 & group[[k]][,j]==1):       f[[k]][i,j] <- length(group[[k]][index,1]):       cp[[k]][i,j] <- f[[k]][i,j]/summation[[k]][j]:     }:   }: }: Error in `*tmp*`[[k]] : subscript out of bounds: [環境敘述]:: Rx64 3.2.5: [關鍵字]::: 選擇性，也許未來有用:

library(dplyr)
# data generation
numMemer <- sample(300:500, 8, TRUE)
df_list <- lapply(1:8, function(i){
  data.frame(member_id = rep(1:numMemer[i],
             sample(1:15, numMemer[i], TRUE))) %>%
    mutate(trans_id = 1:nrow(.), V1 = rbinom(nrow(.), 1, 0.5),
           V2 = rbinom(nrow(.), 1, 0.5), V3 = rbinom(nrow(.), 1, 0.5),
           V4 = rbinom(nrow(.), 1, 0.5))
})

# calculation of conditional probability matrix
prob_list <- lapply(df_list, select, starts_with(""V"")) %>%
  lapply(as.matrix) %>%
  lapply(function(x){
    t(x) %*% x %>% sweep(1, diag(.), '/')
  })

%>%, mutate, select請參考簽名檔的magrittr跟dplyr部分

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1451","M.1466190784.A.086","mowgur","問題","條件機率矩陣",2016-06-18 03:13:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想把這樣的資料
交易編號        會員卡號        V1      V2      V3      V4
6557            1235            0       0       1       1
6558            1235            1       0       1       0
6559            1235            1       1       1       0
.
.
.
.
.

變成條件機率矩陣

        V1      V2      V3      V4
V1              .2      .5      .7
V2                      .4      .6
V3                              .1
V4

[程式範例]:
資料group是8個dataframe組合的list 每個dataframe有14欄 前2欄是id 希望能夠
輸出8個條件機率矩陣組成的list
以下是我的程式碼及錯誤訊息

m <- 12
f <- list(matrix(nrow = m, ncol = m))
cp <- list(matrix(nrow = m, ncol = m))
summation <- list(c())
for(k in 1:length(group)){
  group[[k]] <- group[[k]][,-c(1,2)]
  summation <- apply(group[[k]],2,sum)
  for(i in 1:(m-1)) {
    for(j in (i+1):m){
      index <- (group[[k]][,i]==1 & group[[k]][,j]==1)
      f[[k]][i,j] <- length(group[[k]][index,1])
      cp[[k]][i,j] <- f[[k]][i,j]/summation[[k]][j]
    }
  }
}


Error in `*tmp*`[[k]] : subscript out of bounds


[環境敘述]:

Rx64 3.2.5

[關鍵字]:選擇性，也許未來有用--","R_Language"
"1452","M.1466150343.A.EF1","huangsam","問題","data.frame 字體問題",2016-06-17 15:59:00,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想將""簡體""字形匯出至EXCEL檔，遇到的問題為
一開始假設時還""可以""顯示
例如:> aa <- ""<U+90D1>州""> aa[1] ""<U+90D1>州""
若是將他放入置data.frame導致> data.frame(aa,""11"")1 <U+90D1>州    11

變成匯入至EXCEL檔的時候會形成上方形式，不知道有沒有哪位大大有類似的經驗分享
，謝謝

--------------------------------------------------------------------



目前使用文章方法可以顯示出來，但有個問題是匯出至EXCEL時一樣會顯示<U+90D1>州
想請問哪邊操作有問題
write.csv(print.unicode_df(data), 'path')
轉成XLS是可以的!!!有沒有大大可以分享一下CSV的相關經驗
--","R_Language"
"1453","M.1466083859.A.E02","laputaca","問題","指定路徑",2016-06-16 21:30:56,NA,NA,"小弟今天再打程式的時候遇到一個問題

要如何讀取一個檔案

並且跑出來的是它的路徑

舉個例子

abc <- ???

>abc

[1] ""c:/user/laputaca/Desktop/abc.txt""

也就是說讓它跑出來的不是abc檔案裡面的東西

而是abc這個檔案的路徑

感謝各位大大!!!


--","R_Language"
"1454","M.1466080833.A.F5D","celestialgod","問題","Re: 找出各row最大值的colnames",2016-06-16 20:40:29,NA,NA,"※ 引述《po5113 (π)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想找出row裡面的最大值並挑出該值的colnames: 資料與前幾篇matrix找最大值的column name類似: 部分資料如下::               [,1]         [,2]         [,3]:  [1,] 3.490245e-11 8.579553e-05 9.999142e-01:  [2,] 3.020358e-11 7.424585e-05 9.999258e-01:  [3,] 7.690743e-12 1.890628e-05 9.999811e-01:  [4,] 8.779051e-10 2.153561e-03 9.978464e-01:  [5,] 6.732860e-20 1.655181e-13 1.000000e+00:  [6,] 9.544444e-15 2.346370e-08 1.000000e+00:  [7,] 4.519803e-13 1.111130e-06 9.999989e-01: ...: ...: 不過目的在找出各row中最大值所在的column name: 因此output中會有跟row number一樣的個數: 有想過用apply加上colnames: 但似乎是遇到了點瓶頸: 想請問在處理各列單行內的資料時: 是否有適合使用的函數或其他寫法呢?: 感謝各位提供寶貴的意見!:: [關鍵字]:: row, max, column names根據我的測試，十萬列，apply都還很快，0.57秒而已XD

numCols <- 1e2
numRows <- 1e5
mat <- matrix(rnorm(numCols*numRows), numRows, dimnames = list(NULL,
  paste0(sample(LETTERS, numCols, TRUE), 1:numCols)))

st <- proc.time()
loc_max <- apply(mat, 1, which.max)
out <- colnames(mat)[loc_max]
proc.time() - st
# user  system elapsed
# 0.53    0.04    0.57

如果覺得太慢，需要加速什麼的可以試試看matrixStats：

library(matrixStats)
st <- proc.time()
loc_max <- rowOrderStats(mat, which = 1)
out2 <- colnames(mat)[loc_max]
proc.time() - st
# user  system elapsed
# 0.12    0.00    0.12

all.equal(out, out2) # TRUE

只要原本的20%時間

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1455","M.1466079980.A.82E","po5113","問題","找出各row最大值的colnames",2016-06-16 20:26:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:想找出row裡面的最大值並挑出該值的colnames資料與前幾篇matrix找最大值的column name類似部分資料如下:[,1]         [,2]         [,3][1,] 3.490245e-11 8.579553e-05 9.999142e-01[2,] 3.020358e-11 7.424585e-05 9.999258e-01[3,] 7.690743e-12 1.890628e-05 9.999811e-01[4,] 8.779051e-10 2.153561e-03 9.978464e-01[5,] 6.732860e-20 1.655181e-13 1.000000e+00[6,] 9.544444e-15 2.346370e-08 1.000000e+00[7,] 4.519803e-13 1.111130e-06 9.999989e-01......不過目的在找出各row中最大值所在的column name因此output中會有跟row number一樣的個數有想過用apply加上colnames但似乎是遇到了點瓶頸想請問在處理各列單行內的資料時是否有適合使用的函數或其他寫法呢?感謝各位提供寶貴的意見![關鍵字]:

row, max, column names


--","R_Language"
"1456","M.1466056948.A.67C","clansoda","問題","parsing的中文顯示",2016-06-16 14:02:23,NA,NA,"現在想要抓全家的網頁當作練習

用這個網站來做練習http://www.i-write.idv.tw/life/info/familymart/familymart1.html下面是我的程式碼

library(Rcurl)
library(XML)
library(httr)

klist<-paste0(""http://www.i-write.idv.tw/life/info/familymart/familymart1-"",1:7,"".html"")

getURL(klist,encoding=""UTF-8"")->k

htmlParse(k,encoding=""UTF-8"")->k

readHTMLTable(k)->k1

k1[seq(3,length(k1),by=3)]->k2

這樣會得到一個完整的table沒錯，可是除了數字之外其他的都是詭異的亂碼

請問我在parsing的哪個過程需要做修正呢


--","R_Language"
"1457","M.1466049482.A.375","clansoda","問題","Re: 一個data套用不同的格式",2016-06-16 11:57:58,NA,NA,"C大這是我根據你的文章寫出一個類似我自己的案例http://pastebin.com/cb9SwTrJ看了您的文章我已經可以寫出我想要的型態

只是我不知道我這是不是正確的方式

因為在轉換的過程中會讓資料格式變成數字

要再用as.Date的方式轉回來時間格式

我的想法就是要不創造新的物件的情況下能直接改變dataframe內

的部分vector，因為以前要改變都是直接整個vector做修改

例如as.character(資料)->資料 這樣

我沒試過 as.character(資料[1:50])->資料[1:50]

這種修改dataframe內部分的vector，所以我不確定這個做法是不是可行

或者這邊可以而其他地方可能會出現BUG之類的情況

--","R_Language"
"1458","M.1466047210.A.762","celestialgod","問題","Re: 一個data套用不同的格式",2016-06-16 11:20:07,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 我知道題目很難看懂，我不知道怎麼用一句話解釋這個問題: 首先我有個dataframe，他在某一段日期前跟後的時間格式不同: 我想用as.date加上格式來對他套用，前面的格式是月-日-年: 後面則是日/月/年，這兩個明顯不同直接套用會有問題: 我想直接分開賦予時間格式並直接丟回dataframe媕Y: 假設dataframe叫做u: as.Date(u[u$date<as.Date(""YYYY-MM-DD""),]$buytime,""%b-%d-%Y""): ->u[u$date<as.date(""YYYY-MM-DD""),]$buytime: 這樣會出現錯誤 他不會停下來但是會有warnning: 1: In grepl(""\n"", lines, fixed = TRUE) ::   input string 1 is invalid in this locale: 接來出現在variable裡面的都是一堆數字，看起來很像是跟SAS的儲存格式一樣: 可能是從某月某日當作0，往後就+1，往前就-1，因此我的日期都是例如說8531: 10793這樣的數字，我目前的做法是土法煉鋼我將dataframe分成兩個部分分別賦值後: 拉出來成為一個object，再用C把兩個object合併然後再塞回去dataframe裡面: 請問有其他做法可以解決我這個問題嗎?看一下下面的例子，不知道是不是你要的

x <- seq.Date(as.Date(""2000/1/1""), as.Date(""2003/1/1""), by = ""month"")
y <- c(format(head(x, 18), ""%Y-%m-%d""), format(tail(x, 19), ""%d/%m/%Y""))
## 前五個值
# [1] ""2000-01-01"" ""2000-02-01"" ""2000-03-01"" ""2000-04-01"" ""2000-05-01""

mode(y) # [1] ""character""

z <- ifelse(grepl(""\\d{2}/\\d{2}/\\d{4}"", y), as.Date(y, ""%d/%m/%Y""),
            as.Date(y, ""%Y-%m-%d""))
## 前五個值
# [1] 10957 10988 11017 11048 11078 11109

mode(z) # [1] ""numeric""

z2 <- as.Date(z, ""1970-01-01"")
## 前五個值
# [1] ""2000-01-01"" ""2000-02-01"" ""2000-03-01"" ""2000-04-01"" ""2000-05-01""

all.equal(x, z2) # TRUE


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1459","M.1466044235.A.9E4","clansoda","問題","一個data套用不同的格式",2016-06-16 10:30:30,NA,NA,"我知道題目很難看懂，我不知道怎麼用一句話解釋這個問題

首先我有個dataframe，他在某一段日期前跟後的時間格式不同

我想用as.date加上格式來對他套用，前面的格式是月-日-年

後面則是日/月/年，這兩個明顯不同直接套用會有問題

我想直接分開賦予時間格式並直接丟回dataframe媕Y

假設dataframe叫做u

as.Date(u[u$date<as.Date(""YYYY-MM-DD""),]$buytime,""%b-%d-%Y"")

->u[u$date<as.date(""YYYY-MM-DD""),]$buytime

這樣會出現錯誤 他不會停下來但是會有warnning

1: In grepl(""\n"", lines, fixed = TRUE) :
  input string 1 is invalid in this locale

接來出現在variable裡面的都是一堆數字，看起來很像是跟SAS的儲存格式一樣

可能是從某月某日當作0，往後就+1，往前就-1，因此我的日期都是例如說8531

10793這樣的數字，我目前的做法是土法煉鋼我將dataframe分成兩個部分分別賦值後

拉出來成為一個object，再用C把兩個object合併然後再塞回去dataframe裡面

請問有其他做法可以解決我這個問題嗎?

--","R_Language"
"1460","M.1466006460.A.4DC","celestialgod","問題","Re: 字串處理-抓取字串中的數字",2016-06-16 00:00:54,NA,NA,"※ 引述《PILIPALAPON (pilipalapon)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門: [問題敘述]:: 資料檔如下: Addr: 宜蘭縣數學鎮數學里10鄰數學路１００巷１６之２號: 基隆市太陽區太陽里17鄰太陽三街２２３之２號十九樓: 基隆市白雲區白雲里20鄰白雲三街５９號十樓之１: 新竹市海洋區海洋里13鄰海洋路２９號六樓: 臺北市小明區小名里20鄰小名路２２２號二十樓: 新北市語文區語文里17鄰語文路２２１號二十九樓之５: 宜蘭縣飛機鎮飛機里3鄰飛機路７３號: 新北市紅色區紅色里15鄰紅色路四段１５號之４十七樓: 若「樓」前面有國字數字，需先轉成數字，再將每一個住址裡的數字全部抓出來。:

這個問題除了中文數字外，還需要處理全型的數字(已問過原PO，後面確實是全型數字)

我這裡的順序是先處理全型的數字，才處理中文數字

當然也可以反過來，兩個不影響

好讀版：http://pastebin.com/srDz11gP全型轉成半型的想法是這樣：

先行知識：字串可以轉成raw bytes的型式，多個16進位的數字表示

你可以試試看  charToRaw(""123"") 會出現 [1] 31 32 33

              charToRaw(""１２３"") 會出現 [1] a2 b0 a2 b1 a2 b2

所以全形數字會佔去兩個16進位，可以稍微測試一下：

charToRaw(""０１２３４５６７８９"")

 [1] a2 af a2 b0 a2 b1 a2 b2 a2 b3 a2 b4 a2 b5 a2 b6 a2 b7 a2 b8

可以看到全型的0123456789 開頭都是 a2 而結尾是af到b8

把af到b8轉成數字就是 175~184

因此，先把a2找出來，再將確定後一位是否為175~184 (全形數字)

之後再把第二個數字做位移(減去127)，然後把第一個數字去掉

這樣轉換就完成了

PS: 減去127的原因是 as.integer(charToRaw(""0""))是 48

                    as.integer(charToRaw(""０"")[2])是 175 兩個相差的值是127...


至於中文數字轉阿拉伯數字則是參考這篇的python code：http://www.cnblogs.com/kaituorensheng/p/3586942.htmladdress <- c(""宜蘭縣數學鎮數學里10鄰數學路１００巷１６之２號"",
""基隆市太陽區太陽里17鄰太陽三街２２３之２號十九樓"",
""基隆市白雲區白雲里20鄰白雲三街５９號十樓之１"",
""新竹市海洋區海洋里13鄰海洋路２９號六樓"",
""臺北市小明區小名里20鄰小名路２２２號二十樓"",
""新北市語文區語文里17鄰語文路２２１號二十九樓之５"",
""宜蘭縣飛機鎮飛機里3鄰飛機路７３號"",
""新北市紅色區紅色里15鄰紅色路四段１５號之４十七樓"")

library(magrittr)
library(plyr)
library(stringr)
library(stringi)

address_converted <- sapply(address, function(x){
  raw_address <- charToRaw(x)
  loc_maybe_fullwidth_digits <- which(raw_address == ""a2"")
  second_loc <- raw_address[loc_maybe_fullwidth_digits+1] %>% as.integer
  loc_fullwidth_digits <- loc_maybe_fullwidth_digits[second_loc >= 175 &
                                                     second_loc <= 184] + 1
  raw_address[loc_fullwidth_digits] <- raw_address[loc_fullwidth_digits] %>%
    as.integer %>% '-'(127) %>% as.raw
  return(rawToChar(raw_address[setdiff(1:length(raw_address),
                                       loc_fullwidth_digits-1)]))
}) %>% `names<-`(NULL)

# [1] ""宜蘭縣數學鎮數學里10鄰數學路100巷16之2號""
# [2] ""基隆市太陽區太陽里17鄰太陽三街223之2號十九樓""
# [3] ""基隆市白雲區白雲里20鄰白雲三街59號十樓之1""
# [4] ""新竹市海洋區海洋里13鄰海洋路29號六樓""
# [5] ""臺北市小明區小名里20鄰小名路222號二十樓""
# [6] ""新北市語文區語文里17鄰語文路221號二十九樓之5""
# [7] ""宜蘭縣飛機鎮飛機里3鄰飛機路73號""
# [8] ""新北市紅色區紅色里15鄰紅色路四段15號之4十七樓""

chinese2digits <- function(x){
  vals <- sapply(str_split(x, """")[[1]], function(chi_digit){
    mapvalues(chi_digit, c(""零"", ""一"", ""二"", ""三"", ""四"", ""五"", ""六"", ""七"",
                           ""八"", ""九"", ""十"", ""百"", ""千"", ""萬"", ""億""),
              c(0:10, 10^c(2,3,4,8)), FALSE)
  }) %>% as.integer
  digit_output <- 0
  base_term <- 1
  for (i in rev(seq_along(vals)))
  {
    if (vals[i] >= 10 && i == 1)
    {
      base_term <- ifelse(vals[i] > base_term, vals[i], base_term * vals[i])
      digit_output <- digit_output + vals[i]
    } else if (vals[i] >= 10)
    {
      base_term <- ifelse(vals[i] > base_term, vals[i], base_term * vals[i])
    } else
    {
      digit_output <- digit_output + base_term * vals[i]
    }
  }
  return(digit_output)
}

## test
# chinese2digits(""一百五十二"") # 152
# chinese2digits(""一億零八萬零三百二十三"") # 100080323
# chinese2digits(""十九"") # 19

address_converted2 <- sapply(address_converted, function(x){
  pattern_starts <- ""[零一二三四五六七八九十百千萬億]+樓""
  if (!str_detect(x, pattern_starts))
    return(x)
  stairs <- str_extract(x, pattern_starts)
  x <- str_replace(x, str_c(""(\\d+)("", pattern_starts, "")""), ""\\1, \\2"")
  x <- str_replace(stairs, ""樓"", """") %>% chinese2digits %>% str_c(""樓"") %>%
    {str_replace(x, stairs, .)}
  return(x)
}) %>% `names<-`(NULL)

# [1] ""宜蘭縣數學鎮數學里10鄰數學路100巷16之2號""
# [2] ""基隆市太陽區太陽里17鄰太陽三街223之2號19樓""
# [3] ""基隆市白雲區白雲里20鄰白雲三街59號10樓之1, ""
# [4] ""新竹市海洋區海洋里13鄰海洋路29號6樓""
# [5] ""臺北市小明區小名里20鄰小名路222號20樓""
# [6] ""新北市語文區語文里17鄰語文路221號29樓之5, ""
# [7] ""宜蘭縣飛機鎮飛機里3鄰飛機路73號""
# [8] ""新北市紅色區紅色里15鄰紅色路四段15號之4, 17樓""

sapply(address_converted2, str_extract_all, pattern = ""\\d+"")
# $`宜蘭縣數學鎮數學里10鄰數學路100巷16之2號`
# [1] ""10""  ""100"" ""16""  ""2""
#
# $基隆市太陽區太陽里17鄰太陽三街223之2號19樓
# [1] ""17""  ""223"" ""2""   ""19""
#
# $`基隆市白雲區白雲里20鄰白雲三街59號10樓之1, `
# [1] ""20"" ""59"" ""10"" ""1""
#
# $新竹市海洋區海洋里13鄰海洋路29號6樓
# [1] ""13"" ""29"" ""6""
#
# $臺北市小明區小名里20鄰小名路222號20樓
# [1] ""20""  ""222"" ""20""
#
# $`新北市語文區語文里17鄰語文路221號29樓之5, `
# [1] ""17""  ""221"" ""29""  ""5""
#
# $宜蘭縣飛機鎮飛機里3鄰飛機路73號
# [1] ""3""  ""73""
#
# $`新北市紅色區紅色里15鄰紅色路四段15號之4, 17樓`
# [1] ""15"" ""15"" ""4""  ""17""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1461","M.1465989794.A.8AB","PILIPALAPON","問題","字串處理-抓取字串中的數字",2016-06-15 19:23:12,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門[問題敘述]:

資料檔如下

Addr
宜蘭縣數學鎮數學里10鄰數學路１００巷１６之２號
基隆市太陽區太陽里17鄰太陽三街２２３之２號十九樓
基隆市白雲區白雲里20鄰白雲三街５９號十樓之１
新竹市海洋區海洋里13鄰海洋路２９號六樓
臺北市小明區小名里20鄰小名路２２２號二十樓
新北市語文區語文里17鄰語文路２２１號二十九樓之５
宜蘭縣飛機鎮飛機里3鄰飛機路７３號
新北市紅色區紅色里15鄰紅色路四段１５號之４十七樓

若「樓」前面有國字數字，需先轉成數字，再將每一個住址裡的數字全部抓出來。


--","R_Language"
"1462","M.1465964945.A.A57","celestialgod","分享","tidyr 0.5.0",2016-06-15 12:29:02,NA,NA,"[關鍵字]: tidyr

[出處]:http://www.r-bloggers.com/tidyr-0-5-0/[重點摘要]:

重點功能之一，也是我覺得有興趣的XD：

separate_rows() separates values that contain multiple values separated by a
delimited into multiple rows. Thanks to Aaron Wolen for the contribution!

df <- data_frame(x = 1:2, y = c(""a,b"", ""d,e,f""))
df %>% separate_rows(y, sep = "","")
#> Source: local data frame [5 x 2]
#>
#>       x     y
#>   <int> <chr>
#> 1     1     a
#> 2     1     b
#> 3     2     d
#> 4     2     e
#> 5     2     f

Compare with separate() which separates into (named) columns:

df %>% separate(y, c(""y1"", ""y2"", ""y3""), sep = "","", fill = ""right"")
#> Source: local data frame [2 x 4]
#>
#>       x    y1    y2    y3
#> * <int> <chr> <chr> <chr>
#> 1     1     a     b  <NA>
#> 2     2     d     e     f

--","R_Language"
"1463","M.1465959862.A.F49","aee36900","問題","matrix找出max value與column name",2016-06-15 11:04:18,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:手上有一個matrix data如下lag0     lag1     lag2     lag3     lag4     lag5     lag68  1.009114 1.007150 1.004775 1.004175 1.003529 1.002235 1.00510510 1.011406 1.008945 1.005972 1.005221 1.004413 1.002794 1.00638512 1.013703 1.010744 1.007171 1.006269 1.005298 1.003354 1.00766714 1.016005 1.012546 1.008371 1.007317 1.006183 1.003914 1.00895116 1.018312 1.014351 1.009573 1.008367 1.007070 1.004474 1.010236想要找出最大值且在哪一個欄位目前知道可以透過which(mat == max(mat), arr.ind = TRUE)找到位置row col16   5   1請問如何可以進一步或是可以直接得到lag0 以及 1.018312 這兩個值呢?謝謝[關鍵字]:matrix max column name--","R_Language"
"1464","M.1465904072.A.5AC","Tampa","問題","迴歸新手問題請教",2016-06-14 19:34:29,NA,NA,"各位先拜好

小弟最近入門R

對於程式程度大概只有小學這樣

之前有寫過一點點matlab

以下是參考 陳景祥老師R軟體應用統計方法一書

其中一個範例

Y=iris$Petal.width
X=cbind(1,iris$Sepal.Length)
X

x=iris$Sepal.Length
lm(Y~x)

Y為R內建範例iris裡面的值，x為另外一個值

程式碼都有照書上打

但跑出來都會出現以下錯誤

錯誤在model.frame.default(formula = Y ~ X1, drop.unused.levels = TRUE) :
  invalid type (NULL) for variable 'Y'

不管x改成X1 改成其他變數名稱 都跑不出 回歸方程式的係數與結果

請問有大大可以指點一下嗎??

另外 好奇問一下

R語言 如果照貼程式碼至R Console 請問有辦法只貼上 但不執行程式結果嗎??

感謝大家



--","R_Language"
"1465","M.1465830165.A.733","s1001326","問題","Re: nloptr initial value 如何放矩陣?",2016-06-13 23:02:41,NA,NA,"※ 引述《s1001326 (gg)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想用R的nloptr中的package解決一個非線性規劃的問題，欲解的變數為x1~x5，以上均: 為矩陣，因為nloptr必須給一個x0當作起始解，但是範例中的x0所給的值為向量，不知道: 如何塞矩陣進去且x1~x5的各別長度不相等，上網找相關的資源也沒有收尋到類似的問題，謝謝各位大大的幫忙: [程式範例]:: eval_f <- function(x) {:          return( ""objective""=x[1]%*%x[1]):                       }: eval_g_ineq <- function(x) {:          constr <- rbind(x2,x3,x4):                            }: evql_g_eq <- function(x){:         constr <- x2%*%x3:                   x3%*%x4:                         }: x0 <- ?: 僅列出概念的程式碼，不知道如何塞矩陣到x0初始值以內，且各個矩陣的長度皆不相等，: 此問題已困擾多時，請各位大大指點迷津Q_Q這是修改前的程式碼http://ideone.com/6xg9gI這是修改後的codehttp://ideone.com/WzXjyk聽完C大說的 把x0變成一個向量 且在function裡面設定矩陣
不知道是不是這個意思 trd為一個excel檔
但是跑出以下錯誤
Error in trd%*% x3 : non-confortable arguments
不知道是不是因為要在 限制式裡面打多個限制式的程式碼打錯
上網查是用rbind去解決多個限制式 但還是有錯誤
因此不知道錯誤是在rbind的程式碼 還是初始值x0連成一個向量 在裡面設定成矩陣的
上面出現錯誤?  先謝謝C大的幫忙!非常感謝


--","R_Language"
"1466","M.1465828619.A.23D","frank610003","問題","R畫圖問題",2016-06-13 22:36:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:想請問一下我在畫圖的時候想固定x軸座標0~24是用axis(1,0:24)?如果想在圖中出現中文是在plot(family = '')參數做設定嗎那我要用標楷體可以嗎另外還有image.plot( legend.only=TRUE, legend.width = 0.6, zlim=zr, col = cols)我匯出來的ＰＤＦ指標軸跟圖有時會太近疊在一起可以調整他們之間的間距嗎我不管怎麼調左邊都是一大片空白希望匯出的圖可以剛好兩張擺滿橫式的A4(下面留一行寫字)如圖http://imgur.com/xDN4KOt有適合的格式嗎最後想請問我如何用r做回歸的ANOVAhttp://imgur.com/jpRhtJf[程式範例]:[環境敘述]:Windows8[關鍵字]:選擇性，也許未來有用--","R_Language"
"1467","M.1465828007.A.343","WEIWEI12","問題","Shiny 寫檔後並讀檔顯示",2016-06-13 22:26:44,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門[問題敘述]:我想要再shiny環境下輸入文字送出後會連同輸入的文字和歷史訊息會一同顯示功能類似聊天室或布告欄[程式範例]:詳情如內容    http://ideone.com/uFtOTx[關鍵字]:Shiny--","R_Language"
"1468","M.1465811237.A.255","s1001326","問題","nloptr initial value 如何放矩陣?",2016-06-13 17:47:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想用R的nloptr中的package解決一個非線性規劃的問題，欲解的變數為x1~x5，以上均
為矩陣，因為nloptr必須給一個x0當作起始解，但是範例中的x0所給的值為向量，不知道
如何塞矩陣進去且x1~x5的各別長度不相等，上網找相關的資源也沒有收尋到類似的問題，謝謝各位大大的幫忙

[程式範例]:
eval_f <- function(x) {
         return( ""objective""=x[1]%*%x[1])
                      }
eval_g_ineq <- function(x) {
         constr <- rbind(x2,x3,x4)
                           }
evql_g_eq <- function(x){
        constr <- x2%*%x3
                  x3%*%x4
                        }

x0 <- ?

僅列出概念的程式碼，不知道如何塞矩陣到x0初始值以內，且各個矩陣的長度皆不相等，
此問題已困擾多時，請各位大大指點迷津Q_Q

--","R_Language"
"1469","M.1465744034.A.889","HumuHumu","問題","function內部的變數在其他地方也可存取",2016-06-12 23:07:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我自訂一個function，裡面有一個變數，我想在function外面也可以存取的

我用了 a<-function(x){
         b<<- x+1
         }
然後我想在其他程式碼也可以讀到b這個值，所以我用<<把b存到globe

可是就一直在執行的時候顯示

cannot change value of locked binding for 'b'

這該何解....

--","R_Language"
"1470","M.1465740068.A.467","eri820503","問題","如何等比例切割資料?",2016-06-12 22:01:04,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
該如何等比例切割資料?
假設目前資料目前有5個變數，樣本數為1000個
每個變數內的資料都想切成5等份，每份為200個

目前用cut函數切出來的只是等距，但每段內的樣本數不為200個

目前想到的做法為，先將資料做排序，看每100筆資料的interval在哪邊
再透過cut去做切割，但樣本數大的時候這個做法似乎不有效
不知道有沒有人知道其他做法?

[程式範例]:

將資料第i個變數切成5等份(等距但不等比例):
cut(data[,i],breaks=5, order_result=T,include.lowest=T)





--","R_Language"
"1471","M.1465574759.A.33B","psinqoo","問題","Re: 零基礎的網頁Parse?",2016-06-11 00:05:55,NA,NA,"之前看到想回，放假回一下，你參考 我是用這樣子做法

我是用 Ubuntu 所以沒 big5問題 (很討厭微軟，每次都是卡在轉碼，囧。)

我猜原網頁是 用 utf8 所以在轉碼 出問題


library(XML)
library(httr)
library(rvest)
library(xml2)

x1 <-GET(""http://gweb.wra.gov.tw/ebooks/ebook/hyb2000/1140H058.htm"")x2<-html(x1)

tables<-html_nodes(x2,""table"")
y1<-html_table(tables)
y1

#請自行挑想用的表格 y1<-html_table(tables[2])



sessionInfo()

R version 3.2.3 (2015-12-10)
Platform: x86_64-pc-linux-gnu (64-bit)
Running under: Ubuntu 14.04.3 LTS

收工

-----http://128.199.74.32:3838/※ 引述《Edster (Edster)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我想要將一個網站的表格擷取下來: http://goo.gl/S5P7yO: http://goo.gl/pyMNCe: 過去我在R的經驗都是讀純文字及或是空間資料.: 盲試了兩天，網路教學包含本版上面的文章都看了。: 但是一來對html格式的不瞭解，讀進來之後要一層層拆解搞得我有點難懂。: 中間測試了package包括 XML, xml2, 還有版主C大前幾天示範的httr + xml2: 我只要抓365日的觀測數值，中文字和下面的統計值都不用。: 目前的進度如範例，研究了一天半不知如何把這堆格式代碼去除。: 請問可否給點提示。: [程式範例]::: ## method1: f = ""http://goo.gl/S5P7y"": a = htmlParse(f, encoding = ""big5""): b = getNodeSet(a, path=""//body/div""): c = getNodeSet(b[[2]], path=""//tr""): d = c[[5]]: ## method2: tableContent <-: GET(f) %>>% content(""text"", encoding = ""BIG5"") %>% read_html(""BIG5""): tableContent %<>% xml_find_all(""//body/div/div""): xml_structure(tableContent[[2]]): tableContent <- tableContent[[2]] %>% xml_find_all(., ""//tr"") %>% xml_text(.): tableContent[[5]]: [環境敘述]::: R: 3.3.0: Rstudio: 0.99.902: OS: Win 10:: [關鍵字]::: XML, xml2, httr.:

--







--","R_Language"
"1472","M.1465480076.A.2ED","HumuHumu","問題","Rstudio打包package一直出現錯誤",2016-06-09 21:47:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的剛剛想把我寫的一些.R檔案打包成一個套件，上網google了一下方法，也安裝了Rtools

但我按下Rstdio裡面的Build→Build and reload右上角卻一直出現這樣的錯誤http://imgur.com/pq1LNMS然後就沒有下文了，這樣該怎麼辦呢?

有google到一篇用cmd打包，但看不太懂，操作上好像也有很多跟教學不一樣的地方所以就
放棄了



最近發的文有點多，只是因為最近有課堂上的期末project，寫的比較勤，所以問題也多

絕對不是洗文章，還請版友多多包涵

--","R_Language"
"1473","M.1465406574.A.E9F","HumuHumu","問題","sample函數的問題",2016-06-09 01:22:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想用sample抽樣，可是如果我要抽樣的那個集合已經收斂到只剩下一個數

要怎麼樣才能保證抽到這個數呢?

[程式範例]:
set<-c(100)

sample(set,1)

這樣子抽樣結果會變成0~100隨機抽一個數

而不是保證會剛好抽出來就是100

我想要保證剛好抽出來就是100，要做什麼調整呢?

因為我的程式碼中，set這個集合是會慢慢收斂的，這樣抽中某個數字x的機率會慢慢提高

可是如果set收斂到只剩下x一個數時，抽樣結果會是0~x，而不是我想要的x

--","R_Language"
"1474","M.1465370972.A.BB0","celestialgod","問題","Re: EXCEL匯入時間格式",2016-06-08 15:29:30,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門: [問題敘述]:: 匯入xlsx之EXCEL檔，其中有個欄位為時間EX:2016/5/23  08:40:01 PM: 但是匯入後匯入方式如下: read_excel(path,...): 但是匯入後呈現R上面顯示為42513.861122685186: 我想問，怎麼回推當初EXCEL的日期(可以沒有時分秒，但需要有日期): 謝謝各位大大: 套件部分使用library(readxl)匯入EXCEL 並將它顯示出來參考這個網址：http://tinyurl.com/zm3zxqcdateNum <- c(42513.86, 42515.17, 42521.23)
as.POSIXct(dateNum * (60*60*24), origin=""1899-12-30"", tz=""UCT"")

[1] ""2016-05-23 20:38:24 UCT"" ""2016-05-25 04:04:48 UCT""
[3] ""2016-05-31 05:31:12 UCT""


--","R_Language"
"1475","M.1465366711.A.75B","huangsam","問題","EXCEL匯入時間格式",2016-06-08 14:18:28,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門

[問題敘述]:
匯入xlsx之EXCEL檔，其中有個欄位為時間EX:2016/5/23  08:40:01 PM
但是匯入後匯入方式如下
read_excel(path,...)
但是匯入後呈現R上面顯示為42513.861122685186
我想問，怎麼回推當初EXCEL的日期(可以沒有時分秒，但需要有日期)
謝謝各位大大

套件部分使用library(readxl)匯入EXCEL 並將它顯示出來



--","R_Language"
"1476","M.1465340732.A.5ED","toxicsweet","問題","R 如何計算 txt 檔案中每個字出現的頻率",2016-06-08 07:05:29,NA,NA,"[問題類型]: 程式諮詢

[軟體熟悉度]:
介於入門和使用者之間

[問題敘述]:
手邊有個txt文件，目前先使用read.table讀進R後，原本想使用text mining 的package
(tm)來計算出每個字出現的頻率。

以一個兩列的文件為例：
第一列：I like it, can you share it?
第二列：Yes, I would like to!

想得到：
I like it can you share yes would to
2 2 2 1 1 1 1 1 1

但翻了一下tm package還是不知道該怎麼套用，或是有其他作法可以得到呢？


--","R_Language"
"1477","M.1465319144.A.2B1","HumuHumu","問題","在使用者輸入後才繼續執行程式",2016-06-08 01:05:41,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我想要做一個類似猜數字的遊戲，想透過scan()這個函數讓使用者輸入數字來猜

但是我如果把整個程式寫好，一次全部執行的話，根本沒有時間能讓我輸入

等到程式執行到scan()這一行的時候，後面的程式碼還是會繼續執行，沒辦法輸入

我想請問有什麼辦法可以在這邊暫停一下，等到我輸入後再繼續執行後面的程式碼

的嗎?

--","R_Language"
"1478","M.1465313901.A.EE1","celestialgod","問題","Re: 零基礎的網頁Parse?",2016-06-07 23:38:17,NA,NA,"※ 引述《Edster (Edster)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我想要將一個網站的表格擷取下來: http://goo.gl/S5P7yO: http://goo.gl/pyMNCe: 過去我在R的經驗都是讀純文字及或是空間資料.: 盲試了兩天，網路教學包含本版上面的文章都看了。: 但是一來對html格式的不瞭解，讀進來之後要一層層拆解搞得我有點難懂。: 中間測試了package包括 XML, xml2, 還有版主C大前幾天示範的httr + xml2: 我只要抓365日的觀測數值，中文字和下面的統計值都不用。: 目前的進度如範例，研究了一天半不知如何把這堆格式代碼去除。: 請問可否給點提示。: [程式範例]::: ## method1: f = ""http://goo.gl/S5P7y"": a = htmlParse(f, encoding = ""big5""): b = getNodeSet(a, path=""//body/div""): c = getNodeSet(b[[2]], path=""//tr""): d = c[[5]]: ## method2: tableContent <-: GET(f) %>>% content(""text"", encoding = ""BIG5"") %>% read_html(""BIG5""): tableContent %<>% xml_find_all(""//body/div/div""): xml_structure(tableContent[[2]]): tableContent <- tableContent[[2]] %>% xml_find_all(., ""//tr"") %>% xml_text(.): tableContent[[5]]: [環境敘述]::: R: 3.3.0: Rstudio: 0.99.902: OS: Win 10:: [關鍵字]::: XML, xml2, httr.:

新手建議先去R翻轉教室把XML那一節跑過一輪

library(httr)
library(pipeR)
library(xml2)
library(stringi)
library(stringr)
library(plyr)
url <- ""http://gweb.wra.gov.tw/ebooks/ebook/hyb2000/1140H058.htm""tableContent <- GET(url) %>>% content(""text"", encoding = ""BIG5"") %>>%
  str_replace_all(""&nbsp;"", """") %>>% read_html %>>%
  xml_find_all(""//div[@class='Section1']/div/table"") # 抓出所有表格

# 只要第二張表格，去掉統計量，並把空欄位跟*換成NA
fullTable <- tableContent[[2]] %>>% xml_find_all(""tr"") %>>%
lapply(function(node){
  xml_find_all(node, ""td"") %>>% xml_text %>>%
    stri_conv(from = ""UTF-8"", to = ""Big5"")
}) %>>% do.call(what = rbind)
outputTable <- matrix(fullTable[2:32, 2:13] %>>%
  mapvalues(c("""", ""*""), c(NA, NA)) %>>% as.numeric, 31, 12, FALSE,
    dimnames = list(fullTable[2:32, 1], fullTable[1, 2:13]))

參考一下吧


後來在FB社團看到有人用setlocale解決了rvest的問題：http://pastebin.com/3hb1t0JZ--","R_Language"
"1479","M.1465306795.A.EA4","Edster","問題","零基礎的網頁Parse?",2016-06-07 21:39:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要將一個網站的表格擷取下來http://goo.gl/S5P7yOhttp://goo.gl/pyMNCe過去我在R的經驗都是讀純文字及或是空間資料.
盲試了兩天，網路教學包含本版上面的文章都看了。
但是一來對html格式的不瞭解，讀進來之後要一層層拆解搞得我有點難懂。
中間測試了package包括 XML, xml2, 還有版主C大前幾天示範的httr + xml2
我只要抓365日的觀測數值，中文字和下面的統計值都不用。

目前的進度如範例，研究了一天半不知如何把這堆格式代碼去除。
請問可否給點提示。

[程式範例]:## method1f = ""http://goo.gl/S5P7y""a = htmlParse(f, encoding = ""big5"")b = getNodeSet(a, path=""//body/div"")c = getNodeSet(b[[2]], path=""//tr"")d = c[[5]]## method2tableContent <-GET(f) %>>% content(""text"", encoding = ""BIG5"") %>% read_html(""BIG5"")tableContent %<>% xml_find_all(""//body/div/div"")xml_structure(tableContent[[2]])tableContent <- tableContent[[2]] %>% xml_find_all(., ""//tr"") %>% xml_text(.)tableContent[[5]][環境敘述]:R: 3.3.0Rstudio: 0.99.902OS: Win 10[關鍵字]:XML, xml2, httr.--","R_Language"
"1480","M.1465266885.A.8E0","amber219212","問題","COX-PH model什麼情況下要用ties=""exact""",2016-06-07 10:34:42,NA,NA,"想請教大家,
什麼情況下COX-PH model需要加上ties=""exact"",
因為我加跟沒加, 計算出來的p-value 不同,
且沒加時會跑出下面這段 warming

Warning message: In fitter(X, Y, strats, offset, init, control, weights =
weights,  : Ran out of iterations and did not converge

我只知道這段警告是跟我說model 是未收斂的,
但究竟是為什麼,我不清楚原因。



謝謝

--","R_Language"
"1481","M.1465222205.A.1FA","jimmm","問題","Re: Rstudio",2016-06-06 22:10:02,NA,NA,"※ 引述《jimmm (jim)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我已安裝完R3.3.0，但接著安裝Rstudio後卻沒辦法開啟，點開畫面會是一整片白的只有: ，只有最上列的功能在，但點選時沒有任何反應，另外用管理員身分執行情況也一樣....: 截圖如下：: http://imgur.com/e949Vg8: 請問這是什麼問題該如何解決呢? 謝謝!!: [環境敘述]:: R版本：3.3.0: Rtudio：0.99.902謝謝各位大大的指點(拜)，目前重安裝在跟R同路徑，並用管理員身分執行後有跑出
頁面了，但是還是有點問題(如附圖)，按OK後可以使用coding一般功能，但無法安裝
任何套件連packages的視窗也是空白的，還有些warning的敘述......，不過我不太懂
這問題點在哪 @@? 可以請大大們再幫個忙看一下嗎~感激不盡!!
附圖如下：http://imgur.com/3Vz42oKhttp://imgur.com/xyVnoum(可能要快點兩下點開他不然有縮圖好像看不到@@)--","R_Language"
"1482","M.1465205427.A.718","laputaca","問題","選取list中特定部分",2016-06-06 17:30:23,NA,NA,"大家好，

小弟今天遇到一個問題如下


a <- list(x=1, y=2)
b <- list(x=3, y=4)

result <- list(a=a, b=b)

結果如下

$a
$a$x
[1] 1

$a$y
[1] 2


$b
$b$x
[1] 3

$b$y
[1] 4

如果是使用$是沒問題的

但是如果我想要用數字

也就是說像是這樣> result[1]$a
$a$x
[1] 1

$a$y
[1] 2

那當我想要只選擇result[1]裡面的x的部分

除了> result$a$x[1] 1

似乎沒有辦法? 比如說result[1][2] 之類的 (這個我試過不行XD)

感謝!






--","R_Language"
"1483","M.1465201420.A.0D2","celestialgod","問題","Re: table問題(網頁編碼)",2016-06-06 16:23:37,NA,NA,"※ 引述《vicror84 (阿<U+6C58>)》之銘言：: ※ 引述《celestialgod (天)》之銘言：: : 我不知道網頁的header跟內文的關係: : 我看charset是big5，不過我實際讀表格的資料，還是要用UTF8: : 所以我抓content的時候用big5是正常的，再用read_html with encoding utf8: : 之後再把utf8轉回去big5 (windows才要轉，mac, linux不用stri_conv那段): : 之後就可以看到正常的表格內容了: : library(httr): : library(pipeR): : library(xml2): : library(stringi): : library(stringr): : tableContent <- GET(""http://depart.femh.org.tw/HMC/wholebody.html"") %>>%: :   content(""text"", encoding = ""BIG5"") %>>% read_html(""UTF-8"") %>>%: :   xml_find_all(""//tr/td/table/tbody/tr"") %>>% lapply(function(x){: :     output_text <- xml_find_all(x, ""td"") %>>% xml_text %>>%: :       stri_conv(from = ""UTF-8"", to = ""Big5"") %>>% str_replace_all(""\\s"", """"): :     if (length(output_text) >= 9 && length(output_text) <= 11): :     {: :       return(c(rep("""", 12-length(output_text)), output_text)): :     } else if (length(output_text) == 8): :     {: :       return(c(output_text[1:4], unlist(rbind(output_text[5:8], rep("""", 4))))): :     } else: :     {: :       return(output_text): :     }: :   }) %>>% do.call(what = rbind): : 結果截圖：: : http://i.imgur.com/eDG4uEY.png: : 函數說明可以往前翻我的文章，某一篇(#1N9lFXFI (R_Language))下面有一些說明: : 不懂再回文發問吧: : #那串的用法：http://evolutionbrain.blogspot.tw/2015/08/ptt.html: 因為我是新手剛學R，看不太懂  str_replace_all(""\\s"", """")  這段程式，: 還有，str_replace_all(string, pattern, replacement):http://www.inside-r.org/packages/cran/stringr/docs/str_replace_all把string中符合pattern的字串置換成replacement的字串

例如：str_replace_all(""aa bb cc"", ""\\s"", """")

""\\s""是regexp裡的空白，""""就是零長度的字串，所以置換後就會變成 ""aabbcc""

%>>% 部分可以參考在板上/magrittr，有一篇簡單的教學文，看%>%部分

我這裡只有一個地方用到%>>%的特色 (do.call(what = rbind)這裡用到而已): if (length(output_text) >= 9 && length(output_text) <= 11):      {:        return(c(rep("""", 12-length(output_text)), output_text)):      } else if (length(output_text) == 8):      {:       return(c(output_text[1:4], unlist(rbind(output_text[5:8], rep("""", 4)))):      } else:      {:        return(output_text):   }:    }) %>>% do.call(what = rbind): 尤其是那些數字，不太懂他們代表什麼意思，如果逐一註解更好，不方便的話沒有關係數字是因為網頁的表格有跨欄位的問題，所以他不見得都會抓滿12欄

所以你需要自己手動去補成12欄，我只是做這樣的事情而已

因此，才會在你下一篇回答說那個表格處理請參考我下一篇

也就是這個部分，自己抓出每一列之後，做補滿或是調整空位的部分

這個可能對R新手比較困難一點，但是沒有現成的函數可以直接讀跨欄的欄位

如果只會用XML的readHTMLTable，就只會出現都靠左的情況，剩下都補入""""

這個就只能自己慢慢位移了


逐一註解就不做了，這裡只是一個概念，你需要自己動手去把table抓下來

看看抓下來的每一列長怎樣，然後程式裡對應處理為何


--","R_Language"
"1484","M.1465198177.A.A7C","vicror84","問題","Re: table問題(網頁編碼)",2016-06-06 15:29:34,NA,NA,"※ 引述《celestialgod (天)》之銘言：: 我不知道網頁的header跟內文的關係: 我看charset是big5，不過我實際讀表格的資料，還是要用UTF8: 所以我抓content的時候用big5是正常的，再用read_html with encoding utf8: 之後再把utf8轉回去big5 (windows才要轉，mac, linux不用stri_conv那段): 之後就可以看到正常的表格內容了: library(httr): library(pipeR): library(xml2): library(stringi): library(stringr): tableContent <- GET(""http://depart.femh.org.tw/HMC/wholebody.html"") %>>%:   content(""text"", encoding = ""BIG5"") %>>% read_html(""UTF-8"") %>>%:   xml_find_all(""//tr/td/table/tbody/tr"") %>>% lapply(function(x){:     output_text <- xml_find_all(x, ""td"") %>>% xml_text %>>%:       stri_conv(from = ""UTF-8"", to = ""Big5"") %>>% str_replace_all(""\\s"", """"):     if (length(output_text) >= 9 && length(output_text) <= 11):     {:       return(c(rep("""", 12-length(output_text)), output_text)):     } else if (length(output_text) == 8):     {:       return(c(output_text[1:4], unlist(rbind(output_text[5:8], rep("""", 4))))):     } else:     {:       return(output_text):     }:   }) %>>% do.call(what = rbind): 結果截圖：: http://i.imgur.com/eDG4uEY.png: 函數說明可以往前翻我的文章，某一篇(#1N9lFXFI (R_Language))下面有一些說明: 不懂再回文發問吧: #那串的用法：http://evolutionbrain.blogspot.tw/2015/08/ptt.html因為我是新手剛學R，看不太懂  str_replace_all(""\\s"", """")  這段程式，
還有，
if (length(output_text) >= 9 && length(output_text) <= 11)
     {
       return(c(rep("""", 12-length(output_text)), output_text))
     } else if (length(output_text) == 8)
     {
      return(c(output_text[1:4], unlist(rbind(output_text[5:8], rep("""", 4))))
     } else
     {
       return(output_text)
  }
   }) %>>% do.call(what = rbind)
尤其是那些數字，不太懂他們代表什麼意思，如果逐一註解更好，不方便的話沒有關係

--","R_Language"
"1485","M.1465187597.A.51A","celestialgod","問題","Re: 格式轉換",2016-06-06 12:33:14,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 我目前有一個dataframe，我想把裡面其中一個coloum從character轉換成date: 但是我只要一轉，他就會全部變成NA，我把locale調成LC_TIME C也沒有作用: 想請問有人碰過同樣的情形或者有解法嗎?: 這是轉換後的warrning: 補上範例檔案，因為是商用檔案所以把個資都刪除了: https://drive.google.com/open?id=0B3xY9FMzjybzSUt5TTNOWERicmM: 語法是 as.Date(訂單日期)->xxd$訂單日期: Warning message:: In grepl(""|||"", what, fixed = TRUE) ::   input string 1 is invalid in this locale: 這是我的session info: R version 3.2.5 (2016-04-14): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows >= 8 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: LC_TIME=C: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] tidyr_0.4.1          recommenderlab_0.1-9 registry_0.3: proxy_0.4-15         arules_1.4-1         Matrix_1.2-6: gtools_3.5.0: [8] dplyr_0.4.3          plyr_1.8.3: loaded via a namespace (and not attached)::  [1] Rcpp_0.12.5     lattice_0.20-33 assertthat_0.1  grid_3.2.5: R6_2.1.2        DBI_0.4-1       magrittr_1.5    irlba_2.0.0: tools_3.2.5: [10] parallel_3.2.5我轉出來是沒問題，程式：

library(data.table)
library(dplyr)
dat = fread('ss.csv') %>% tbl_df %>%
  mutate(訂單日期 = as.Date(gsub('-', '/', 訂單日期)))

# > str(dat)
# Classes ‘tbl_df’, ‘tbl’ and 'data.frame':   11338 obs. of  173 variables:
#  $ V1                      : chr  ""1"" ""2"" ""3"" ""4"" ...
#  $ 訂單日期                : Date, format: ""2016-04-01"" ""2016-04-01"" ...
#  $ 訂單狀態                : chr  ""已確認"" ""已完成"" ""已確認"" ""已確認"" ...

我合理懷疑你的訂單日期type是factor才會轉失敗，character會成功

應該不會只是忘了加xxd$，像這樣：

as.Date(訂單日期)->xxd$訂單日期 => as.Date(xxd$訂單日期)->xxd$訂單日期


session information:> sessionInfo()R version 3.2.4 (2016-03-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] dplyr_0.4.3.9001    fasttime_1.0-1      data.table_1.9.7
RevoUtilsMath_3.2.4

loaded via a namespace (and not attached):
[1] lazyeval_0.1.10.9000 magrittr_1.5         R6_2.1.2
assertthat_0.1.0.99  rsconnect_0.4.2.1
[6] DBI_0.3.1            tools_3.2.4          tibble_1.0-1
Rcpp_0.12.4.5

--","R_Language"
"1486","M.1465180788.A.ED9","clansoda","問題","格式轉換",2016-06-06 10:39:45,NA,NA,"我目前有一個dataframe，我想把裡面其中一個coloum從character轉換成date

但是我只要一轉，他就會全部變成NA，我把locale調成LC_TIME C也沒有作用

想請問有人碰過同樣的情形或者有解法嗎?

這是轉換後的warrning

補上範例檔案，因為是商用檔案所以把個資都刪除了https://drive.google.com/open?id=0B3xY9FMzjybzSUt5TTNOWERicmM語法是 as.Date(訂單日期)->xxd$訂單日期

Warning message:
In grepl(""|||"", what, fixed = TRUE) :
  input string 1 is invalid in this locale

這是我的session info

R version 3.2.5 (2016-04-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
LC_TIME=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] tidyr_0.4.1          recommenderlab_0.1-9 registry_0.3
proxy_0.4-15         arules_1.4-1         Matrix_1.2-6
gtools_3.5.0
[8] dplyr_0.4.3          plyr_1.8.3

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.5     lattice_0.20-33 assertthat_0.1  grid_3.2.5
R6_2.1.2        DBI_0.4-1       magrittr_1.5    irlba_2.0.0
tools_3.2.5
[10] parallel_3.2.5

--","R_Language"
"1487","M.1465132100.A.58E","celestialgod","問題","Re: table問題",2016-06-05 21:08:11,NA,NA,"※ 引述《vicror84 (阿<U+6C58>)》之銘言：: 請問我想把亞東健檢中心(http://depart.femh.org.tw/HMC/wholebody.html)的表格爬下: 來，但會出現亂碼在windows系統中，使用R語言，抓取表格呈現出亂碼，: 我們將格式轉為繁體，: 還是會呈現亂碼，我們研究出所有BIG5編碼的網頁，轉換後，還是亂碼，: 程式如下:: library(XML): URL = paste0(""http://depart.femh.org.tw/HMC/wholebody.html""): doc<-htmlParse(URL,encoding=""UTF-8""): tables<-readHTMLTable(doc,header=T,which = 2): tables: dim(tables): View(tables)我不知道網頁的header跟內文的關係

我看charset是big5，不過我實際讀表格的資料，還是要用UTF8

所以我抓content的時候用big5是正常的，再用read_html with encoding utf8

之後再把utf8轉回去big5 (windows才要轉，mac, linux不用stri_conv那段)

之後就可以看到正常的表格內容了

library(httr)
library(pipeR)
library(xml2)
library(stringi)
library(stringr)
tableContent <- GET(""http://depart.femh.org.tw/HMC/wholebody.html"")%>>%
  content(""text"", encoding = ""BIG5"") %>>% read_html(""UTF-8"") %>>%
  xml_find_all(""//tr/td/table/tbody/tr"") %>>% lapply(function(x){
    output_text <- xml_find_all(x, ""td"") %>>% xml_text %>>%
      stri_conv(from = ""UTF-8"", to = ""Big5"") %>>% str_replace_all(""\\s"", """")
    if (length(output_text) >= 9 && length(output_text) <= 11)
    {
      return(c(rep("""", 12-length(output_text)), output_text))
    } else if (length(output_text) == 8)
    {
      return(c(output_text[1:4], unlist(rbind(output_text[5:8], rep("""", 4)))))
    } else
    {
      return(output_text)
    }
  }) %>>% do.call(what = rbind)

結果截圖：http://i.imgur.com/eDG4uEY.png函數說明可以往前翻我的文章，某一篇(#1N9lFXFI (R_Language))下面有一些說明

不懂再回文發問吧

#那串的用法：http://evolutionbrain.blogspot.tw/2015/08/ptt.html--","R_Language"
"1488","M.1465129670.A.0C1","vicror84","問題","儲存格問題",2016-06-05 20:27:35,NA,NA,"原網址：http://www.mmh.org.tw/health/image/exam_services/exam_services.htmlR語言程式：

library(XML)
URL =
paste0(""http://www.mmh.org.tw/health/image/exam_services/exam_services.html"")Sys.sleep(runif(1,1,2))
doc<-htmlParse(URL,encoding=""UTF-8"")
tables<-readHTMLTable(doc,header=F,which = 2)
tables
dim(tables)
有些資料原本在右邊，但爬出來後出現在左邊

--","R_Language"
"1489","M.1465129416.A.876","vicror84","問題","table問題",2016-06-05 20:23:26,NA,NA,"請問我想把亞東健檢中心(http://depart.femh.org.tw/HMC/wholebody.html)的表格爬下
來，但會出現亂碼在windows系統中，使用R語言，抓取表格呈現出亂碼，
我們將格式轉為繁體，
還是會呈現亂碼，我們研究出所有BIG5編碼的網頁，轉換後，還是亂碼，
程式如下:
library(XML)

URL = paste0(""http://depart.femh.org.tw/HMC/wholebody.html"")doc<-htmlParse(URL,encoding=""UTF-8"")
tables<-readHTMLTable(doc,header=T,which = 2)
tables
dim(tables)
View(tables)






--","R_Language"
"1490","M.1465118358.A.B84","sky84911","問題","package car 安裝問題",2016-06-05 17:19:16,NA,NA,"舊文重發
之前發文請教各方高手，但是始終未解決，
我的rstudio 是最新版的，
要做統計需要使用anova所以需要安裝car
但是一直不能安裝，很困惑
希望高手能提供解決的方法
謝謝
願以http://i.imgur.com/6jW48nH.jpg--","R_Language"
"1491","M.1465113359.A.8D4","laputaca","問題","關於自定函數$",2016-06-05 15:55:54,NA,NA,"大家好

小弟今天在編寫function的時候有一個疑問

function內該如何編寫才有辦法使得輸出的東西

可以使用$

就像是比如說使用

model <- lm(y~x)

我們可以用 model$coefficients 來看他的係數

而我自己編寫的function就只能跑出放在最後的東西

請求大大開釋!

感謝~

--","R_Language"
"1492","M.1465041751.A.4B0","eternalheast","問題","AER套件中的ivreg無法執行",2016-06-04 20:02:28,NA,NA,"- 問題: AER套件(也就是ivpack)中的ivreg無法執行[問題類型]:程式諮詢：查詢過如inside-R之類的網站，但照著寫無法做出來[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:做作業題目要求用工具變項，但照著教學網站的做法，會一直出現：1: In ivreg.fit(X, Y, Z, weights, offset, ...) :more regressors than instruments這樣的警告，而宣告summary時，R studio就只給出：錯誤在linearHypothesis.default(object, Rmat, vcov. = vcov., test = ifelse(df >  :there are aliased coefficients in the model我有查到這是完全共線性錯誤，但我是照教學一動一動做的且先前只有一個工具變項、2個自變項時也有成功所以不懂為何工具變項的數目加多了，就會錯誤。[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：由於資料來自教科書，語法也只有三行，所以就直接貼了library(ivpack)c1.6 <- ivreg(log(income) ~ cigs+educ+age+I(age^2)| log(cigpric)+restaurn,  rm.na = TRUE, data = data)summary(c1.6)-----rm.na先前有額外試過，雖然不屬於ivreg的內容，但也不影響ivreg估計運作[關鍵字]:
工具變項、AER、ivpack

說來有點尷尬，看語法這麼短就知道這應該不難才是

但就不知道哪個環節出錯，也一直找不到答案

還麻煩高手解惑，感激不盡

--","R_Language"
"1493","M.1465007754.A.E37","jklkj","問題","Re: 記憶體不足",2016-06-04 10:35:50,NA,NA,"因為要打得太多了我想說還是再問一篇好了
我試過http://goo.gl/soE8XA這篇的方法
可是出現錯誤訊息如下
Loading required package: tcltk
Error in .local(conn, name, value, ...) :
  RS_sqlite_import: data1.dat line 2 expected 2 columns of data but found 3
然後我google了這個錯誤https://groups.google.com/forum/#!topic/sqldf/1VWgp9WJLr4這篇有講到14年11月已經修改這個問題了
所以我不知道這樣是發生什麼事了
我還蠻想學會這招的
然後我還想問有關bigmemory跟ff跑起來的速度會比較慢嗎
謝謝※ 引述《jklkj (誠實可靠小郎君)》之銘言：: 標題: [問題] 記憶體不足: 時間: Wed Jun  1 15:53:04 2016:
:: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 目前我要把大概幾千萬筆的資料(目前只跑到2000多萬筆)放進R去，: 應該會有兩三個dataframe，每個dataframe都有數千萬筆: 打算把R當作資料庫，不管是join或是一些資料的整理: 我把資料一直rbind下去，超過兩千多萬筆之後就會出現記憶體不足的問題: 想請問這樣的問題除了直接加記憶體以外(因為是公司的電腦): 有別的方法嗎？: [程式範例]:: 程式範例就是很簡單的: sale <- rbind(sale1, sale): 錯誤訊息如下: error: cannot allocate vector of size 256.0 mb: 我有找到一些解決的方法是加ram(其實我也很想加到32G)、用64bit(感覺我已經在用了): 想請問一下有別的解決方法嗎？:: [環境敘述]:: R version 3.3.0 (2016-05-03) -- ""Supposedly Educational"": Copyright (C) 2016 The R Foundation for Statistical Computing: Platform: x86_64-w64-mingw32/x64 (64-bit):: [關鍵字]::: 記憶體 不足:: --","R_Language"
"1494","M.1464981705.A.F47","HumuHumu","問題","如何改變X的座標軸",2016-06-04 03:21:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的假如說，我有一個數列，代表了我的機率分配的參數(這邊用二項分配的P為例子)

我想要設定不同的機率P，然後跑二項分配，我想測試的P總共有五個

Binomprob <- c(0.2,0.4,0.6,0.8,1)

然後想要以Binomprob這個變數為X座標，抽樣的結果為Y軸畫圖

但我畫出來的plot，X座標軸都是顯示1,2,3,4,5，我想要顯示0.2,0.4,0.6,0.8,1

要怎麼做呢?

--","R_Language"
"1495","M.1464880586.A.D11","sky800507","問題","shiny的tooltip在篩選之後會定位錯誤",2016-06-02 23:16:24,NA,NA,"shiny的官方網站範例是shiny.rstudio.com/gallery/movie-explorer.html

在篩選之後，滑鼠移過去就會亂定位，顯示出來的資料都不是滑鼠所指定的點，想請教各
位高手改如何解決這個問題

--","R_Language"
"1496","M.1464865182.A.01F","locka","問題","contingency table",2016-06-02 18:59:39,NA,NA,"大家好:

我有一個data frame，由欄位x,y組成，想要做列聯表
於是我使用table()這個函式，不過它只會計算有出現過的組合
請問有沒有辦法讓資料裡面沒有出現過的也一起列出來?

例如：

ｘ <- c(2,2,3,4)
y <- c(3,5,3,2)
xy <- data.frame(x,y)

執行 table(xy) 會出現以下的結果：

　ｙ
ｘ　　２　３　５
　２　０　１　１
　３　０　１　０
　４　１　０　０

我想要產生的結果是：

　ｙ
ｘ　　１　２　３　４　５
　１　０　０　０　０　０
　２　０　０　１　０　１
　３　０　０　１　０　０
　４　０　１　０　０　０
　５　０　０　０　０　０


不知道有甚麼建議的處理方法嗎？

先謝謝大家了！


--","R_Language"
"1497","M.1464831018.A.F1F","huangsam","問題","Re: data.frame&data.table之間的問題",2016-06-02 09:30:16,NA,NA,"用您的例子舉例
dt <- data.frame(V1 = rpois(5, 3),
                   V2 = sample(c(""g1"", ""g2""), 5, 1), V3 = rnorm(5))
dt %>% mutate(V5 = V1 * V3, V6 = substr(V2, 2, 2),
              V7 = round(V3), V8 = 1L, V3 = V3 **2)
顯示如下:
  V1 V2         V3         V5 V6 V7 V8
1  3 g1 1.12495036 -3.1819103  1 -1  1
2  1 g1 0.29694964 -0.5449309  1 -1  1
3  5 g1 0.10764162 -1.6404391  1  0  1
4  2 g2 0.73171230 -1.7108037  2 -1  1
5  4 g1 0.05673553 -0.9527689  1  0  1

但是若是
dt <- data.table(V1 = rpois(5, 3),
                   V2 = sample(c(""g1"", ""g2""), 5, 1), V3 = rnorm(5))
dt %>% mutate(V5 = V1 * V3, V6 = substr(V2, 2, 2),
              V7 = round(V3), V8 = 1L, V3 = V3 **2)
執行後無結果※ 引述《celestialgod (天)》之銘言：: ※ 引述《huangsam (sam)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 1。使用dplyr 時資料型態需要為data.frame?: 是的，Hadley在某篇文章(我記得是發布purrr的文章)中說明過dplyr的d是for data.frame: : 2。data.table處理大筆資料時比data.frame好？: 是的，data.table不會複製一次data: : 3。我在使用dplyr時,若資料型態為data.table時，會不會有問題，與問題1有關，好比: : 說使用filter,mutate(用的時候無效？）,select,為什麼有些可以有些不行，請大大解惑: 不會有問題，但是dplyr在操作data.table的時候，還是複製了一次 (避免一些問題): 所以不會享有data.table帶來的好處，現在Hadley正在做dtplyr: 想把data.table加入dplyr，並且不會複製一次data.table: 現在應該只有join有做完而已，其他部份還是援用dplyr的函數: 我不懂你說的『用的時候無效』跟『有些可以有些不行』，麻煩你舉例一下: : 謝謝！: : [關鍵字]:: : data.frame data.table--","R_Language"
"1498","M.1464780914.A.48D","HumuHumu","問題","請問可否改變#後面文字的顏色",2016-06-01 19:35:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想變#後面文字的顏色


想請問，在R studio中，coding的時候，#後面的文字都是綠色的

但是在執行程式時，卻會整條都是藍色的，跟其他的程式碼都是同樣的深藍色

我想請問可不可以在執行的時候，讓#後面的文字不是深藍色的

這樣在報告程式碼給人家看時，比較好區分哪段是註解哪段是程式碼

謝謝大家

--","R_Language"
"1499","M.1464774847.A.F07","celestialgod","問題","Re: data.frame&data.table之間的問題",2016-06-01 17:54:04,NA,NA,"※ 引述《huangsam (sam)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 1。使用dplyr 時資料型態需要為data.frame?是的，Hadley在某篇文章(我記得是發布purrr的文章)中說明過dplyr的d是for data.frame: 2。data.table處理大筆資料時比data.frame好？是的，data.table不會複製一次data: 3。我在使用dplyr時,若資料型態為data.table時，會不會有問題，與問題1有關，好比: 說使用filter,mutate(用的時候無效？）,select,為什麼有些可以有些不行，請大大解惑不會有問題，但是dplyr在操作data.table的時候，還是複製了一次 (避免一些問題)

所以不會享有data.table帶來的好處，現在Hadley正在做dtplyr

想把data.table加入dplyr，並且不會複製一次data.table

現在應該只有join有做完而已，其他部份還是援用dplyr的函數


我不懂你說的『用的時候無效』跟『有些可以有些不行』，麻煩你舉例一下: 謝謝！: [關鍵字]:: data.frame data.table--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1500","M.1464774519.A.855","jklkj","心得","RGoogleAnalytics",2016-06-01 17:48:36,NA,NA,"[關鍵字]:
RGoogleAnalytics
[重點摘要]:
之前有用RGoogleAnalytics撈取一些資料，也參考網路上一些資料做了自動的功能
想說跟大家分享一下，因為現在正值新工作蜜月期，所以比較有空分享
library(""RGoogleAnalytics"") #首先當然是要先library進來
client.id <- ""xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com""
client.secret <- ""Vlww7gdXdSGnbGp3mdkR6r9H""
token <- Auth(client.id, client.secret) #我是習慣這樣設，就是把帳密設給token
save(token, file=""C:/Users/token_file"") #這是把剛剛的token存起來
                                         之後有需要就不用再跑一次
ValidateToken(token) #這是檢察token有沒有過期，如果過期的話會再次認證(好像)
profile <- GetProfiles(token) #這個可以看GA帳號裡所有的table.id之後會講
接下來就可以跑GA了
APPnewslist.list <- Init(start.date = ""2016-01-01"", #日期的標準格式
                         end.date = ""2016-01-02"",
                         dimensions = ""ga:date"",    #GA的維度
                         metrics = ""ga:pageviews"",  #GA的指標https://developers.google.com/analytics/devguides/reporting/core/dimsmets上面這個網址可以找GA的維度跟指標
                         max.results = 10000,#最大就是10000，如果需要更多等等講
                         sort = ""ga:date"", #這是依照哪個維度做排序
                                            必須是要在dimensions有下的才能用
                         table.id = ga:12345678) #剛剛說的table.id就是放在這
APP.query <- QueryBuilder(APP.list)
APP.data <- GetReportData(APP.query, token)
剛剛有說如果資料量大於10000怎麼辦         ^方法就是在token之後加個
                                           paginate_query=True
APP.data <- GetReportData(APP.query, token, paginate_query=True) #像這樣
然後如果你抓的資料區間過長，例如一年吧，GA就會用說資料來自幾%的抽樣
如果要避免這樣的問題可以下split_daywise=True在token之後
這要RGoogleAnalytics就會每天去跑資料，但是如果中間某天資料量是0的話就會中斷
但要記得GA一天好像可以接受10000筆的查詢
但是如果你用split_daywise=True每天就算是一筆
感覺是很多，但是如果公司用的話其實一不小心就會超量，我在之前的公司就超過兩次
之後就只能望著電腦發呆
寫著寫著突然發現我下班時間到了，明天再說怎麼自動跑

--","R_Language"
"1501","M.1464767586.A.407","jklkj","問題","記憶體不足",2016-06-01 15:53:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前我要把大概幾千萬筆的資料(目前只跑到2000多萬筆)放進R去，
應該會有兩三個dataframe，每個dataframe都有數千萬筆
打算把R當作資料庫，不管是join或是一些資料的整理
我把資料一直rbind下去，超過兩千多萬筆之後就會出現記憶體不足的問題
想請問這樣的問題除了直接加記憶體以外(因為是公司的電腦)
有別的方法嗎？
[程式範例]:
程式範例就是很簡單的
sale <- rbind(sale1, sale)
錯誤訊息如下
error: cannot allocate vector of size 256.0 mb
我有找到一些解決的方法是加ram(其實我也很想加到32G)、用64bit(感覺我已經在用了)
想請問一下有別的解決方法嗎？

[環境敘述]:
R version 3.3.0 (2016-05-03) -- ""Supposedly Educational""
Copyright (C) 2016 The R Foundation for Statistical Computing
Platform: x86_64-w64-mingw32/x64 (64-bit)

[關鍵字]:

記憶體 不足

--","R_Language"
"1502","M.1464748511.A.599","huangsam","問題","data.frame&data.table之間的問題",2016-06-01 10:35:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
1。使用dplyr 時資料型態需要為data.frame?
2。data.table處理大筆資料時比data.frame好？
3。我在使用dplyr時,若資料型態為data.table時，會不會有問題，與問題1有關，好比
說使用filter,mutate(用的時候無效？）,select,為什麼有些可以有些不行，請大大解惑
謝謝！

[關鍵字]:
data.frame data.table

--","R_Language"
"1503","M.1464707459.A.394","jimmm","問題","Rstudio",2016-05-31 23:10:57,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我已安裝完R3.3.0，但接著安裝Rstudio後卻沒辦法開啟，點開畫面會是一整片白的只有
，只有最上列的功能在，但點選時沒有任何反應，另外用管理員身分執行情況也一樣....
截圖如下：http://imgur.com/e949Vg8請問這是什麼問題該如何解決呢? 謝謝!!
[環境敘述]:
R版本：3.3.0
Rtudio：0.99.902

--","R_Language"
"1504","M.1464707159.A.944","s1001326","問題","nloptr gradient 疑問 ",2016-05-31 23:05:56,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
不好意思，想請教一個問題，因為研究上需要，因此要用nloptr解問題，裡面的gredient
意思不是很懂，從字面上我知道是斜率，但是看了範例之後發現我的想法不是很對，
以R提供的範例為例
Exampls

min_{x} x1*x4*(x1+x2+x3)+x3
s.t.
x1*x2*x3*x4 >= 25
x1^2 + x2^2 + x3^2 +x4^2 =40
1 <= x1,x2,x3,x4 <= 5

f(x)
""objective""=x[1]*x[4]*(x[1]+x[2]+x[3])+x[3],
""gradient""=c(x[1]*x[4]+x[4]*(x[1]+x[2]+x[3])),
             x[1]*x[4],
             x[1]*x[4]+1.0,
             x[1]*(x[1]+x[2]+x[3])

eval_g_ineq
constr <- c(25-x[1]*x[2]*x[3]*x[4])

grad  <- c(-x[2]*x[3]*x[4],
           -x[1]*x[3]*x[4],
           -x[1]*x[2]*x[4],
           -x[1]*x[2]*x[3],)


eval_g_eq
constr <- c(x[1]*2+ x[2]*2 + x[3]*2 + x[4]^2 -40)

grad  <-c( 2.0*x[1],
           2.0*x[2],
           2.0*x[3],
           2.0*x[4])

# initial values
x0 <- c (1,5,5,1)

這邊僅列出部分程式碼，很不好意思，有大大可以解釋目標式與限制式所對應的
gradient所代表的意思嗎?為什麼是這樣表示?非常謝謝大家的幫助

BTW,想請問initial values所代表的意思，是固定的值還是有其他意思，要如何決
定裡面的數字?煩請各位大大指點迷津@@




--","R_Language"
"1505","M.1464698382.A.89E","gbd37","問題","list問題",2016-05-31 20:39:40,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
小弟一直打不出來 list(1,2,....,50) 怎麼打

不是list(1:50)喔 是中間都要用逗點隔開

會使得Global envirment那邊會呈現List of 50


補充:

因為小弟是要用在parLapply()裡的list(1,2,3,4,5,.....,50)

所以想知道怎麼打Orz


還麻煩大大指點一下，感覺很基本的東西 但我一直打不出來T_T

謝謝



[關鍵字]:list

--","R_Language"
"1506","M.1464624320.A.D9B","sky800507","問題","欄位名稱是否會影響運算過程",2016-05-31 00:05:17,NA,NA,"如題,小弟目前遇上了一個困難,假設資料名稱為db,當欄位名稱有空格時，例如Big head
，在運算時就要寫成db$'Big head',這樣究竟會不會影響運算過程呢?

--","R_Language"
"1507","M.1464622387.A.212","yuechinwu","問題","徵求Rstudio高手",2016-05-30 23:33:04,NA,NA,"http://i.imgur.com/k2dhrBL.jpg為什麼Rstudio開起來 都會跑出一個""R  code execution error""的東西  第二個問題:怎
麼安裝quamtmod元件 請高手幫解答

--","R_Language"
"1508","M.1464597072.A.9A3","sky800507","問題","shiny中的render與reactive差在哪裡?",2016-05-30 16:31:10,NA,NA,"如題shiny中的render與reactive差在哪裡?請各位高手幫忙解惑也，小弟感激不盡

--","R_Language"
"1509","M.1464462673.A.213","decken","問題","histogram X軸",2016-05-29 03:11:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的自己想要用histogram畫某個東西(cipher suite)的出現頻率，
資料如下：Cipher.Suite                    timesDES-CBC3-SHA                    2AES256-SHA                      4ECDHE-RSA-DES-CBC3-SHA          1DHE-RSA-AES256-GCM-SHA384       2ECDHE-RSA-AES128-GCM-SHA256     94ECDHE-RSA-AES256-SHA384         7ECDHE-RSA-AES128-SHA            2AES256-SHA256                   3AES128-SHA                      1ECDHE-ECDSA-AES128-GCM-SHA256   13AES256-GCM-SHA384               3ECDHE-RSA-AES256-GCM-SHA384     29AES128-GCM-SHA256               3DHE-RSA-AES256-SHA              2也就是說，DES-CBC3-SHA在X軸，然後Y坐標是2的historgram，以此類推
不過hist函數只能放numeric在X軸，不知道大家有方法可以做到這樣的histogram嗎？
謝謝~

[程式範例]:data <-read.table(""cipherSuite.txt"", header = TRUE);attach(data);hist(data)[環境敘述]:R version 3.2.5 (2016-04-14)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C                                 LC_TIME=Chinese(Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   base[關鍵字]:hist histogram","R_Language"
"1510","M.1464249754.A.FE0","ayugioh2003","問題","如何合併有相同因子的資料並取依變項平均",2016-05-26 16:02:32,NA,NA,"文章分類提示：- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的第一次想上來問問題，突然斷線文章就不見了 QQ 只好重打

如果問題描述不清楚，請見諒

最近在整理資料，本來是用 excel，但想看看 R 有沒有辦法整理

因為要用變異數分析（受試者內），所以想把資料整理成能跑 anova 的格式

想問的是，能不能將有相同因子的資料，把它們合併後，依變數變成這些資料的平均

舉個例子


S = Subject 受試者
A = 第一個獨變項（因子）
B = 第二個獨變項（因子）
Y = 依變項

S   A   B     Y
1   L   pic   1234
1   L   pic   1883
1   L   word  732
1   L   word  273
1   R   pic   1843
1   R   pic   1362
1   R   word  321
1   R   word  234
2   L   pic   2983
2   L   pic   1283
2   L   word  321
2   L   word  532
2   R   pic   2492
2   R   pic   2182
2   R   word  324
2   R   word  583
.
.

能不能變成這樣（合併相同因子的資料，依變數取平均）

S   A   B     Y
1   L   pic   1558.5（=(1234+1883)/2）
1   L   word  502.5
1   R   pic   1602.5
1   R   word  277.5
2   L   pic   2133
2   L   word  426.5
2   R   pic   2337
2   R   word  453.5
.
.


之前是在 excel 上是用 DAVERAGE() 語法篩選，再慢慢貼上

但資料量多，有點累...

因此想問用在 R 上能不能作到這件事情（相同因子的資料合併後 依變項取平均）

（或是想聽聽其他見解，例如 excel 上能不能更方便作到這件事，

或是 anova 其實不需要做這個前置動作之類的）

謝謝



[程式範例]:[環境敘述]:rRstudio[關鍵字]:資料整理, 合併資料, 取平均, Anova--","R_Language"
"1511","M.1464074631.A.57B","celestialgod","問題","Re: 繪圖的問題",2016-05-24 15:23:47,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 首先我先將我想畫的圖貼上來，有點醜 http://i.imgur.com/UjXDh9E.jpg: 假如我有三種水果，而三種水果有大小之分，然後各有數量: 而我想畫出bar圖，不太記得中文是什麼，想讓三種水果中間有區隔: 而大小貼在一起的話該如何畫出來呢?: 第二種圖是我在stackoverflow上面看過有人畫，但我現在回去找不到了: 假設我有三種動物，豬牛羊的年銷售量，假如一百萬好了: 而牛佔30，豬40和羊30，接著把它疊起來，讓一整個bar被切三塊: 按照動物的比例分成三塊，接著劃分不同顏色和寫上文字該如何做到呢: 我看了ggvis 的cookbook沒提到這類型的圖像: 還有一個問題是 我看網路上的教學比較多人使用ggplot，但是我自己使用過後: 跟ggvis比感覺ggvis比較直覺，不知道這兩種的優缺點各是什麼，而板友又比較多: 用哪一種呢?我是慣用lattice，有時候會應要求畫ggplot，不過這時候都用ggplot的theme代替居多

很少直接操作ggplot，必要的話，ggplot在他網站有很多demo，滿容易找到需要的圖

只是我就完全沒有把指令記起來過，畫一次查一次

lattice，我不知道要怎麼把疊起來的圖轉成縱的，但我懶得研究了(攤手


我個人愛lattice的風格，不過ggplot的圖比較fancy可以拿出去給老闆看~""~

至於ggvis，我就沒用過了，看了一下stackoverflow，

有人說ggvis is for creating interactive plots，

如果是interactive plots，我比較喜歡plotly的ggplotly

不過這也是見仁見智，以上。


5/24 15:43補上縱向疊的圖。


程式：http://pastebin.com/MaR9RtkQ成品：

lattice:http://i.imgur.com/ehRitcx.pnghttp://i.imgur.com/uVgzOrY.pnghttp://i.imgur.com/UihwVKm.pnglattice with ggplot2 theme:http://i.imgur.com/UJcJa1L.pnghttp://i.imgur.com/7pJfFtZ.pnghttp://i.imgur.com/8IqTZpm.pngggplot2:http://i.imgur.com/h26Xiv7.pnghttp://i.imgur.com/jBAoahg.png--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1512","M.1464070827.A.A29","clansoda","問題","繪圖的問題",2016-05-24 14:20:23,NA,NA,"首先我先將我想畫的圖貼上來，有點醜http://i.imgur.com/UjXDh9E.jpg假如我有三種水果，而三種水果有大小之分，然後各有數量

而我想畫出bar圖，不太記得中文是什麼，想讓三種水果中間有區隔

而大小貼在一起的話該如何畫出來呢?

第二種圖是我在stackoverflow上面看過有人畫，但我現在回去找不到了

假設我有三種動物，豬牛羊的年銷售量，假如一百萬好了

而牛佔30，豬40和羊30，接著把它疊起來，讓一整個bar被切三塊

按照動物的比例分成三塊，接著劃分不同顏色和寫上文字該如何做到呢

我看了ggvis 的cookbook沒提到這類型的圖像

還有一個問題是 我看網路上的教學比較多人使用ggplot，但是我自己使用過後

跟ggvis比感覺ggvis比較直覺，不知道這兩種的優缺點各是什麼，而板友又比較多

用哪一種呢?

--","R_Language"
"1513","M.1463978742.A.479","amygm307","問題","R讀json檔遇到的問題",2016-05-23 12:45:40,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:
我目前用jsonlite來讀json檔
但是因為我的json檔裡面每個物件是用enter隔開
(用記事本打開看到的是空格，但匯入excel卻自動分列顯示，所以應該是用enter隔開)
所以讀入時會有問題
(我有嘗試複製一小段，把每個物件中間改成逗號，就可以跑)
但是我不知道要怎麼去改每個物件中間的分隔方式
問google大神也找不到可以解決的方法
(也有可能我是新手，所以沒有輸入正確的關鍵字)
所以來問版上的大大們了!
感謝各位!

[程式範例]:
以下我輸入的程式碼:

j = file.choose()
y = fromJSON(j, flatten = FALSE)
Error in feed_push_parser(readBin(con, raw(), n), reset = TRUE) :
  parse error: after array element, I expect ',' or ']'
          23.92,-28.13],""eye"":""right""} {""ts"":114513748,""s"":0,""pd"":3.79
                     (right here) ------^

出現了中間分隔的錯誤
我的json檔大致長的像下面那樣

{""test"": [{""ts"":114513748,""s"":0,""pc"":[-30.90,-23.92,-28.13],""eye"":""right""} {""ts"":114513748,""s"":0,""pd"":3.79,""eye"":""right""}]}


[環境敘述]:

R version 3.2.3 (2015-12-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] jsonlite_0.9.20

loaded via a namespace (and not attached):
[1] tools_3.2.3 curl_0.9.4


--","R_Language"
"1514","M.1463750414.A.E88","newmatt","問題","請問符號~",2016-05-20 21:20:12,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:
請問符號

[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

在練習 R 翻轉教室 ""01-RBasic-06-List-DataFrame""

其中，課後練習題有出現一個 ~ 符號，請問這 ~ 所代表的意義

謝謝


[程式範例]:

#' 我們可以利用`model.matrix`來建立一個矩陣。舉例來說：
#' `model.matrix(~ Type + Treatment + conc, CO2)`可以
#' 建立一個基於Ty 、Treatment和conc的矩陣。


--","R_Language"
"1515","M.1463707327.A.A03","DEATHorz","問題","rstudio 中打 中文顯示疑問",2016-05-20 09:22:04,NA,NA,"[問題類型]:

軟體使用疑問

[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:

在rstudio的環境下，
1.無法使用r的中文版，
2.中打(新注音)超過第三個字，則不顯示
所以難以選字,但enter後字會出現

以上問題在r的環境下均正常
(r版本3.3.0   rstudio 0.99.896 32位元)



有以中文.rstudio作關鍵字
但都沒看到能解決的方案
還是這些都是付費版就能解決的問題！？



--","R_Language"
"1516","M.1463668260.A.C7B","virus111111","問題","重導向網頁",2016-05-19 22:30:55,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:各位好我想要抓八卦版的文章但是開啟網頁版的時候會重導向到另一個網頁問你是否滿18歲下面是我試著抓的程式[程式範例]:myurl<-""https://www.ptt.cc/bbs/Gossiping/M.1463657364.A.ABB.html""test <- getForm(myurl,.params = c(yes = ""yes""))[環境敘述]:windows 7RstudioR3.2.5[關鍵字]:bypass--","R_Language"
"1517","M.1463498480.A.F26","h310713","問題","snow 結束運算輸出Summary File",2016-05-17 23:21:16,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

各位好，目前想將自己所解的程式，運算完後輸出一個summay的檔案

所使用的平行運算套件為Snow套件。

目前所遭遇的問題有兩個，分別敘述如下：

1.在平行運算的時候，想要印出 iterations 的進度

ex. 總共做 10 次運算，印出 1/10,2/10...這樣的輸出掌握運算進度

請問這該如何改寫?

2.在平行運算之後，該如何印出每一次iterations所得到的summary?

ex.

Iteration 1: A B C
Iteration 2: B C D
Iteration 3: E G I
##################################

運算結束後

輸出一個Summary File

1.A B C
2.B C D
3.E G I

這樣子的一個檔案

請問該如何改寫?





[程式範例]:在此我提供兩個程式碼1.寫好的for loop 運算，並未使用平行運算，可以順利輸出summary file& Iteration numberLink:http://ideone.com/5AT7l62.加入平行運算之後，並未成功輸出 summary file & print out iteration numberLink:http://ideone.com/QUIfoF請各位指導一下該如何改寫，謝謝各位的指導，如果需要任何資訊請讓我知道謝謝[環境敘述]:> R.version_platform       x86_64-w64-mingw32arch           x86_64os             mingw32system         x86_64, mingw32statusmajor          3minor          2.3year           2015month          12day            10svn rev        69752language       Rversion.string R version 3.2.3 (2015-12-10)nickname       Wooden Christmas-Tree[關鍵字]:Data.table,dplry,snow--","R_Language"
"1518","M.1463366825.A.A63","clansoda","問題","拆解dataframe",2016-05-16 10:47:00,NA,NA,"google了很久，都沒辦法找到答案，因為英文不夠好，不知道如何把這個問題

用英文形容，因此上來發問

我現在有個dataframe

id item1 item2 item3
a 香蕉 瑪奇朵 老虎
b 豆子 山葵 蘋果

想把這個dataframe打成像是

id
a 香蕉
a 瑪奇朵
a 老虎
b 豆子
b 山葵
b 蘋果

我試著用reshape2媕Y的melt來做，做出來有點像是stack做出來的感覺

會變成

1 香蕉
2 瑪奇朵
3 老虎
4 豆子
5 山葵
6 蘋果

請問各位先輩有甚麼好的function或方法可以解決這個問題嗎?

--","R_Language"
"1519","M.1463307465.A.652","gbd37","問題","如何看內建套件裡的函數code",2016-05-15 18:17:42,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

例如我想找stats::hclust函數裡每一個method怎麼寫出來的?


小弟只知道如何看額外灌的套件裡的函數

但是想看R內建套件裡函數怎麼寫的，不知從何找起...

想看詳細一點內容

還望各位大大知道怎麼看，告訴小弟

謝謝大大們

[關鍵字]:內建函數


--","R_Language"
"1520","M.1463222876.A.A49","loveakai","問題","shinyapp.io 地圖無法顯示",2016-05-14 18:47:46,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我使用shiny建立一個含有地圖的app
在本機可以使用runApp()順利的運作
但是當我使用deployApp()放到shiinyapps.io時
卻會顯示Disconnected from the server

我看logs中有一行error是Error : isTRUE(gpclibPermitStatus()) is not TRUE
我覺得有可能是這一行的問題
我循著網路上的一些建議加入了library(rgeos)
但仍然不得解

另，在本機上isTRUE(gpclibPermitStatus())的結果依然是FALSE
但是此shinyAPP卻可以運行

希望有經驗的版友可以提供意見

[程式範例]:

server.Rhttp://pastie.org/10836804UI.Rhttp://pastie.org/10836807shinyapps.io logshttp://pastie.org/10836810[環境敘述]:

R version 3.2.3 (2015-12-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] maptools_0.8-39 ggplot2_2.1.0   shiny_0.13.2    rgeos_0.3-19    sp_1.2-3


loaded via a namespace (and not attached):
 [1] Rcpp_0.12.4        lattice_0.20-33    digest_0.6.9       mime_0.4

 [5] grid_3.2.3         plyr_1.8.3         R6_2.1.2           jsonlite_0.9.20

 [9] xtable_1.8-2       gtable_0.2.0       scales_0.4.0       labeling_0.3

[13] RColorBrewer_1.1-2 rgdal_1.1-10       tools_3.2.3        foreign_0.8-66

[17] munsell_0.4.3      rsconnect_0.4.3    httpuv_1.3.3
colorspace_1.2-6
[21] htmltools_0.3.5


[關鍵字]: shiny maptools

--
<U+30CD><U+30FC> <U+30CA><U+30CA>
為什麼得到幸福和夢想成真
永遠都是兩回事呢？

--","R_Language"
"1521","M.1463152168.A.103","JackBaska","問題","Re: find & substr 在r的應用",2016-05-13 23:09:25,NA,NA,"library(magrittr)
data:
   1. 22/2/2144
   2. 33/4/5364
   3. 56/1/6543

DF = data %>% as.character() %>% strsplit(""/"") %>%
     do.call(rbind.data.frame,.) %>% .[,3]

試試這帖吧 , 沒開 R 盲打 , 如果有打錯記得要修一下
有一個 Lapply 版的 , 不過那是我用來處理不定維度的
資料用的※ 引述《wanson (望生)》之銘言：: 目前學習使用r 遇到想切特定符號後數字: 例如: /x/1771416: 想抓第二個slash後面的七個字: 在以前excel 我大概用find,find,substr去抓就可以了: 目前在book看到str_detect: 但似乎只會傳輸T or F: 另外有看到有人提到gregexpr: 但似乎會回傳list: 可以請問這樣的例子要怎樣處理嗎？: 謝謝--","R_Language"
"1522","M.1463124100.A.FEE","laputaca","問題","重疊圖問題",2016-05-13 15:21:37,NA,NA,"大家好

小弟想要重疊折線圖&長條圖

使用以下CODE:

plot(y)
par(new=TRUE)
barplot(z, xaxt=""n"", yaxt=""n"")

不過重疊出來的圖會是

長條圖在重疊在折線圖框框下邊

而不是全部在同一個框框裡面

還是說R內建的本來就是這樣設定呢?


--","R_Language"
"1523","M.1463064828.A.BAE","HumuHumu","問題","如何在一筆資料中新增欄",2016-05-12 22:53:46,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的如果我已經有一筆資料col為變數X1~X3，row是觀察值50筆，但我現在有一個新變數X4，觀

察值跟原本的資料一樣都是50筆，我要怎麼在現在的資料中把這個col(X4)加進去

--","R_Language"
"1524","M.1462938822.A.EDA","sandychan","問題","字串合併",2016-05-11 11:53:38,NA,NA,"[軟體熟悉度]:
入門

[問題敘述]:
想要將字串合併,字串長度長,至少超過200

[程式範例]:

在先前步驟生成字串

如> seq[1] ""A"" ""A"" ""T"" ""N"" ""T"" ""G"" ""T"" ""T"" ""A"" ""A""

希望能將上面的字串合併為 ""AATNTGTTAA""

我知道可以用paste(""A"", ""A"", ""T"", ""N"", ""T"", ""G"", ""T"", ""T"", ""A"", ""A"",sep="""")

但因為我的字串長度很長,所以想請問有沒有其他指令可以用



--","R_Language"
"1525","M.1462781867.A.687","f496328mm","問題","ksvm機率表問題",2016-05-09 16:17:45,NA,NA,"> model=ksvm(x1,y1,kernel=""rbfdot"")> model2=ksvm(x1,y1,kernel=""rbfdot"",prob.model=TRUE)> predict(model,x2)[10:12]這是不顯示機率表預測結果
[1] cat=G cat=B cat=L
Levels: cat=0 cat=1 cat=A cat=B cat=C cat=D cat=E cat=F cat=G cat=H cat=I
cat=J cat=K cat=L> predict(model2,x2, type=""probabilities"")[10:12,]由於資料太長
我直接貼照片http://imgur.com/eBlshLD主要我想問第3列

不印機率表預測的值是 cat=L

但是印機率表之後  cat=L 那欄不是最大值

但是其他列都有符合最大值就是預測值
舉例來說
第一個預測是G
機率表第一列   在G那個欄也是最大的
第二個預測是B
機率表第二列   在B也是最大的

很奇怪

--","R_Language"
"1526","M.1462764258.A.558","eri820503","問題","用R解壓縮.gz檔",2016-05-09 11:24:15,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近再用R抓網路上的資料做分析,但下載回來的檔案是.gz檔,
如果是.zip或者.tar檔,可以用unzip跟untar去做解壓縮,
但是現在檔案是.gz檔,找不到相關package或指令可以去做

[程式範例]:
binData=getBinaryURL(url)
temp <- file(""file.xml.gz"", open = ""wb"")
writeBin(binData,temp)
close(temp)

如果是.zip檔的做法:
files <- unzip(""file.xml.gz"")
diabetes <- read.csv(files[1], stringsAsFactors = FALSE)

但因為目前下載回來的檔案是.gz檔,所以不知道該怎麼解壓縮,
有去google後的結果是有人說用system()這個指令執行,但對這個不太熟
另外用shell(""path"")可以將我的rar檔打開,因為想讓程式自動去解壓縮,那用這個會變成
有點半手動,不知道有沒有人有相關的經驗? 謝謝


[關鍵字]:

unzip(), system()

--","R_Language"
"1527","M.1462703818.A.FB3","Wush978","分享","command line tool + 平行運算",2016-05-08 18:36:55,NA,NA,"[關鍵字]: 資料前處理, 平行運算

[出處]:http://0rz.tw/gqPN5[重點摘要]:

在Command line tool 也可以玩平行處理

搭配R 就能夠很高效的寫出平行處理的簡單應用

--","R_Language"
"1528","M.1462703741.A.04F","Wush978","分享","讓R 加入pipe的一環",2016-05-08 18:35:38,NA,NA,"[關鍵字]: 資料前處理

[出處]:http://0rz.tw/w7sgA[重點摘要]:

筆記一下最近在玩的，linux command line + pipe + R

可以用很省記憶體的方式處理很大量的數據

--","R_Language"
"1529","M.1462581313.A.05F","JackBaska","問題","Re: 每次用RStudio都會碰到的問題",2016-05-07 08:35:11,NA,NA,"這個問題是我去年怒轉 Linux 的主因 , 我測試的結果是
當你在RStudio裡面載入大量中文字元 big 5 的檔案後 ,
即便有編碼設定 , 只要你對 Script 做存取動作便會發生
發生後所有RStudio的功能會完全癱瘓 , 可以操作但基本
上沒有任何意義

一旦發生 , 只要你往後對該Script 做任何操作 , 特別
是像跟Syntax 有關的 tab complete , 便會出現這個bug
我猜是在存取時有些默認字元遇到 big 5 碼 , 產生無意
義 , 但被誤以為指令的段落 , 造成直譯的parser crash
我對 R 的整體架構還沒很全面的想法 , 所以是用猜的

癱瘓當下解決方式:
      Session -> Terminate R

但該Script是否廢了 ? 好險還沒有 , 我有試出一個依舊
能執行該Script的方式 , 只要你叫出該Script , 不要做
任何動作 , 直接全選貼到新開的 Script , 但切記不要把
新Script做存檔動作 , 否則該問題會重新出現 , 只要不
存檔 , 你依舊可以自由操作該 Script

環境編碼:
     Tools -> Global Option -> General

BTW , 改環境編碼對處理這個問題沒有幫助 , 問題不是
package 是script 本身 , 目前經驗是有載入中文檔案
有中文註解 或是有屬性名是中文 , 在 Windows都會有機
會發生 , 且只要一旦在存取Script發生 , 該Script就
會一直發生

這問題我剛遇到有考慮要回報 , 但RStudio的crash support
那時候翻寫 ""Only for Mac/Linux"" 我就沒回報了 , 整體來
說 , 是 Windows RStudio 的問題 不是 R的問題

希望對你有幫助

方便的話可以把標題改成方便遇到的人查詢:
        ""invalid multibyte""
============原始可能遇到的 erro================
invalid multibyte character in parser at line 1
invalid multibyte string, element 1
===============================================※ 引述《jjx66os ()》之銘言：: [問題敘述]:: 之前都是在Mac筆電上編寫R: 最近有些程式運算比較複雜些，改用Windows的桌機執行: 不過當我打開RStudio，進行像是下載package的時候: 都會碰到Error in nchar(homeDir) : invalid multibyte string, element 1: 這樣的訊息: 我的安裝路徑資料夾都是英文的，安裝位置也在預設的地方: 但只要先執行Sys.setlocale(category = ""LC_ALL"", locale = ""us""): 就沒問題了，不過關掉後下次再打開還是會有這樣的問題: 請問如何讓Sys.setlocale(category = ""LC_ALL"", locale = ""us"")成為我的設定值呢?: 找不到RStudio設定預設編碼的地方: 或者有沒有其他的解決方法呢???: 我的系統為Windows10專業版，R 3.2.5，RStudio應為最新版。--","R_Language"
"1530","M.1462559090.A.701","jjx66os","問題","每次用RStudio都會碰到的問題",2016-05-07 02:24:48,NA,NA,"[問題敘述]:

之前都是在Mac筆電上編寫R
最近有些程式運算比較複雜些，改用Windows的桌機執行
不過當我打開RStudio，進行像是下載package的時候
都會碰到Error in nchar(homeDir) : invalid multibyte string, element 1
這樣的訊息

我的安裝路徑資料夾都是英文的，安裝位置也在預設的地方
但只要先執行Sys.setlocale(category = ""LC_ALL"", locale = ""us"")
就沒問題了，不過關掉後下次再打開還是會有這樣的問題

請問如何讓Sys.setlocale(category = ""LC_ALL"", locale = ""us"")成為我的設定值呢?
找不到RStudio設定預設編碼的地方
或者有沒有其他的解決方法呢???

我的系統為Windows10專業版，R 3.2.5，RStudio應為最新版。

--","R_Language"
"1531","M.1462552397.A.E80","celestialgod","問題","Re: snow中使用parSapply 找不到函數",2016-05-07 00:33:13,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：: > sapply(c(1:10), function(x) actv_fun(data,bo_matrix,x)):  [1]  0.5  0.5  0.5  3.0  1.5 17.5  9.0  0.5  2.5  2.5: > parSapply(cl,c(1:10), function(x) actv_fun(data,bo_matrix,x)): Error in checkForRemoteErrors(val) ::   6 nodes produced errors; first error: 沒有這個函數 ""actv_fun"": http://imgur.com/nMZbBme: 一樣的東西  sapply都可以執行: 但是為什麼用到parSapply: 卻會出現沒有這個函數??: sapply不是可以用嗎?: 該不會parSapply只能用內定的函數吧?我通常都用doSNOW搭配plyr跟foreach來做

舉個例子，我要平行來parse xml檔案，裡面用到xml2, purrr, stringr跟pipeR：

(可以到這裡下載幾個xml.gz，放在vd資料夾裡面測試看看：http://tisvcloud.freeway.gov.tw/history/vd/20160501/)

library(xml2)
library(foreach)
library(doSNOW)
library(plyr)
library(purrr)
library(stringr)
library(pipeR)

# 我只用九成的執行緒個數 (可以根據自己喜好去設定要不要全用)
# 至於MPI部分，我就比較不熟了...
cl <- makeCluster(floor(parallel::detectCores() * 0.9), type = ""SOCK"")
registerDoSNOW(cl)

# library package in clusters
clusterEnv <- clusterEvalQ(cl, {
  library(plyr)
  library(stringr)
  library(purrr)
  library(pipeR)
  library(xml2)
})

# export functions (我這沒有函數、變數要export就寫個範例這樣
# 就把每一個變數或是函數的名稱用字串放到list裡面即可
# clusterExport(cl, list(""x"", ""y"", ""some_variables"", ""some_functions""))

# list the folders in vd
vdFiles <- list.files(""vd"", ""\\.xml.gz"", full.names = TRUE)

# 將llply做平行使用，只要加上.parallel=TRUE，以及registerDoSNOW就可以了
vdValueDataTable <- llply(vdFiles, function(xmlFileName){
  # try to read the file
  xmlFile <- try({xmlFileName %>>% read_xml(encoding = 'UTF-8') %>>%
    xml_children %>>% xml_children})

  # if there is something wrong, return NULL
  if (any(class(xmlFile) == ""try-error"") || length(xmlFile) == 0)
    return(NULL)

  # used for combine columns of dat1
  repRows <- map(seq_along(xmlFile), ~ rep(., each =
    xml_length(xmlFile[[.]])*3)) %>>% do.call(what = c)

  # output character matrix
  xmlFile %>>% {
    xmlFile %>>%
        # find the vdid, status and datacollecttime
      (~ dat1 <- xml_attrs(.) %>>% do.call(what = rbind) %>>%
      (x ~ x[repRows, ])) %>>% xml_children %>>%
        # find the vsrdir, vsrid, speed and laneoccupy
      (~ dat2 <- xml_attrs(.) %>>% do.call(what = rbind) %>>%
      (x ~ x[rep(1:nrow(x), each = 3), ])) %>>% xml_children %>>%
      xml_attrs %>>% do.call(what = rbind) %>>%
        # find the carid and volume
      cbind(dat1, dat2)
  } %>>% (.[.[, ""laneoccupy""] != ""-99"" & .[, ""volume""] != ""-99"" &
            .[, ""speed""] != ""-99"" & .[, ""volume""] != ""0"" &
            .[, ""status""] == ""0"", ]) %>>%
    (.[ , c(""vdid"", ""carid"", ""datacollecttime"", ""speed"",
            ""laneoccupy"", ""volume"")])
}, .parallel = TRUE) %>>% do.call(what = rbind)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1532","M.1462547875.A.00E","f496328mm","問題","snow中使用parSapply 找不到函數",2016-05-06 23:17:53,NA,NA,"> sapply(c(1:10), function(x) actv_fun(data,bo_matrix,x))[1]  0.5  0.5  0.5  3.0  1.5 17.5  9.0  0.5  2.5  2.5> parSapply(cl,c(1:10), function(x) actv_fun(data,bo_matrix,x))Error in checkForRemoteErrors(val) :
  6 nodes produced errors; first error: 沒有這個函數 ""actv_fun""http://imgur.com/nMZbBme一樣的東西  sapply都可以執行

但是為什麼用到parSapply

卻會出現沒有這個函數??

sapply不是可以用嗎?

該不會parSapply只能用內定的函數吧?

--","R_Language"
"1533","M.1462459438.A.1A7","celestialgod","問題","Re: Y在不同group的占比",2016-05-05 22:43:54,NA,NA,"※ 引述《but07 (BUT07)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想要知道應變數(y)在各個x中的不同group的占比(%): 以下是拿arules裡面的IncomeESL資料作範例: 我想要知道: 1. 男性在每個收入成的占比(男性/全部): 2. 男性在每個年齡層的占比(男性/全部): 目前的圖:: http://imgur.com/yvKPuNZ: 希望的圖:: http://imgur.com/sLocu8c: (希望有點+曲線趨勢線): [程式範例]: plot(sex~income+age,data=IncomeESL): 上面是我目前使用的code: Google了一下找不太到答案: 可能是我不太會下關鍵字: 只好上來麻煩各位大大了: 感謝不知道是不是你要的，我讀了幾次，還是有點無法理解你想要的東西

我還是嘗試用折線圖去呈現男性於各收入級距、年齡層的比例

看看是否符合你的需求。


我也沒想到更簡單的畫法，就直接畫，但是這樣就會需要對資料整理比較熟悉

才有辦法直接整理資料你需要的資料做繪圖的動作

這個可能對一般R的新手是一道門檻，非常建議學會用dplyr做資料整理

然後用ggplot2去呈現你的圖形

我的做法是每一次都控制x變數，計算proportion之後

在繪製再圖上，兩張圖就要group_by兩次，當然也有函數解法放在下面

不過函數解法就比較難了，不太適合新手。

有任何疑問可以再發問。

library(ggplot2)
library(dplyr)
library(pipeR)

data(""IncomeESL"", package = ""arules"")

IncomeESL %>>% group_by(income) %>>%
  summarise(male_proportion = length(income[sex == ""male""]) / n()) %>>%
  {
    ggplot(., aes(x = income, y = male_proportion, group = 1)) +
      geom_point() + geom_line()
  }

IncomeESL %>>% group_by(age) %>>%
  summarise(male_proportion = length(age[sex == ""male""]) / n()) %>>%
  {
    ggplot(., aes(x = age, y = male_proportion, group = 1)) +
      geom_point() + geom_line()
  }


也是可以改成用函數做，只是這個技巧比較高一點：

plot_prop_f <- function(data, variableName, ylim = numeric(0)){
  stopifnot(length(variableName) == 1)
  stopifnot(length(ylim) %in% c(0, 2))
  group_by_(data, variableName) %>>%
  summarise_(.dots = setNames(list(
    sprintf(""length(%s[sex == 'male']) / n()"", variableName)),
            ""male_proportion"")) %>>%
  {
    g <- ggplot(., aes_(x = as.name(variableName), y = ~ male_proportion,
                group = ~ 1)) + geom_point() + geom_line()
    if (length(ylim) == 2)
      g <- g + ylim(ylim)
    g
  }
}

plot_prop_f(IncomeESL, ""age"")
plot_prop_f(IncomeESL, ""age"", c(0.35, 0.5))
plot_prop_f(IncomeESL, ""income"")
plot_prop_f(IncomeESL, ""income"", c(0.4, 0.5))

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1534","M.1462444658.A.F42","obarisk","心情","黑特 3.2.5",2016-05-05 18:37:35,NA,NA,"中文欄位名問題一堆

有空幫忙測試@@

正式公測版

--","R_Language"
"1535","M.1462439758.A.D95","naturalsmen","問題","將argument以變數表示",2016-05-05 17:15:56,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

標題可能下的不太好

我一直有一個疑問

假如code如下

list(a = 1:10, b = 1:5)

$a
 [1]  1  2  3  4  5  6  7  8  9  10

$b
 [1]  1  2  3  4  5

如果我把這行code存成一個變數 比如

(var = paste(""list(a = 1:10, b = 1:5)""))

[1] ""list(a = 1:10, b = 1:5)""

有可能將var作為一段code放入某個function裡面並回傳結果嗎？

謝謝


[環境敘述]:
R version 3.2.5 (2016-04-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

[關鍵字]:


--","R_Language"
"1536","M.1462433413.A.B12","corel","問題","寫檔問題",2016-05-05 15:30:09,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

寫檔失敗

錯誤訊息:

Error in file.exists(file) : 'file' 引數不正確
Calls: htmlParse -> file.exists


奇怪的是，我如果直接用Rstudio去執行，並不會發生錯誤

而是往往用 crontab 設定排程去跑，就會跑出錯誤訊息..



[程式範例]:

# 儲存網頁內容並且輸出到暫存檔之中
doc <- htmlParse(saveXML(tr_data, file = outPutFile))






謝謝




--

--","R_Language"
"1537","M.1462421341.A.18F","h310713","問題","Snow套件加速運算 Stepwise Regression",2016-05-05 12:08:59,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:各位好，目前我正在寫一支配Stepwise Regression的程式；且已經可以成功執行。但是在執行效能上還有很大的進步空間目前所配的Variables 共有80左右，所以配逐步回歸的方式來選取留下的Variable因為每個變數都需要建立一個獨立模型所以總共會跑80次左右的iterstions總共執行時間約莫落在2.5HR左右，所以開始考慮效能提升問題有遇到一些問題需要各位協助排除障礙，先在此謝謝各位以下的範例，我先設定跑2次的iteration用來測試效能[程式範例]:這是我已經寫好可以Run的程式碼

##########可以Run的###########

system.time(lapply(1:2,function(i)(
{
  print(i)

TrainModel<-cbind(setnames(TrainDT[7:nrow(TrainDT),i,with=F],paste0(names(DT[1,i,with=FALSE]),'_y')),TrainDT[1:(nrow(TrainDT)-6),1:length(TrainDT),with=F])

PracticeModel<-cbind(setnames(PracticeDT[7:nrow(PracticeDT),i,with=F],paste0(names(DT[1,i,with=FALSE]),'_y')),PracticeDT[1:(nrow(PracticeDT)-6),1:length(PracticeDT),with=F])
  resp<-grep('_y',names(TrainModel),value=T)
  pre<-grep('01F',names(TrainModel),value =T)
  pre<-pre[2:length(pre)]
  addq<-function(x) paste0(""`"",x, ""`"")
  Model<-as.formula(paste(addq(resp),paste(lapply(pre, addq),collapse =
'+'),sep = '~'))
  FitModel<-lm(Model,data=TrainModel)#Fitmodel<-lm(`01F0017S_y`~.,data=TrainModel)#Fitmodel<-lm(as.matrix(TrainDT[7:nrow(TrainDT),i,with=F])~as.matrix(TrainDT[1:(nrow(TrainDT)-6),1:length(TrainDT),with=F]),data=TrainDT)
  stepwise<-step(FitModel,sacle=0,direction = 'both')
  write.csv(stepwise$coefficients,file =
paste0(names(DT[1,i,with=FALSE]),'_Coefficients','.csv'))

write.csv(cbind(TrainModel[[1]],stepwise$fitted.values,stepwise$residuals),file
= paste0(names(DT[1,i,with=FALSE]),'_Residual','.csv'))

write.csv(cbind(PracticeModel[[1]],predict(stepwise,PracticeModel),PracticeModel[[1]]-predict(stepwise,PracticeModel)),file
= paste0(names(DT[1,i,with=FALSE]),'_Predict','.csv'))#PredictData<-predict(stepwise,PracticeDT)
})))

每一個iteration在最後會丟出三個我需要參數的csv，總共耗時約2.5HR


###########配合snow 套件的程式###########


clusterfun<-function(i){
  print(i)

TrainModel<-cbind(setnames(TrainDT[7:nrow(TrainDT),i,with=F],paste0(names(DT[1,i,with=FALSE]),'_y')),TrainDT[1:(nrow(TrainDT)-6),1:length(TrainDT),with=F])

PracticeModel<-cbind(setnames(PracticeDT[7:nrow(PracticeDT),i,with=F],paste0(names(DT[1,i,with=FALSE]),'_y')),PracticeDT[1:(nrow(PracticeDT)-6),1:length(PracticeDT),with=F])
  resp<-grep('_y',names(TrainModel),value=T)
  pre<-grep('01F',names(TrainModel),value =T)
  pre<-pre[2:length(pre)]
  addq<-function(x) paste0(""`"",x, ""`"")
  Model<-as.formula(paste(addq(resp),paste(lapply(pre, addq),collapse =
'+'),sep = '~'))
  FitModel<-lm(Model,data=TrainModel)#Fitmodel<-lm(`01F0017S_y`~.,data=TrainModel)#Fitmodel<-lm(as.matrix(TrainDT[7:nrow(TrainDT),i,with=F])~as.matrix(TrainDT[1:(nrow(TrainDT)-6),1:length(TrainDT),with=F]),data=TrainDT)
  stepwise<-step(FitModel,sacle=0,direction = 'both')
  write.csv(stepwise$coefficients,file =
paste0(names(DT[1,i,with=FALSE]),'_Coefficients','.csv'))

write.csv(cbind(TrainModel[[1]],stepwise$fitted.values,stepwise$residuals),file
= paste0(names(DT[1,i,with=FALSE]),'_Residual','.csv'))

write.csv(cbind(PracticeModel[[1]],predict(stepwise,PracticeModel),PracticeModel[[1]]-predict(stepwise,PracticeModel)),file
= paste0(names(DT[1,i,with=FALSE]),'_Predict','.csv'))#PredictData<-predict(stepwise,PracticeDT)
}


cluster <- makeCluster(type=""SOCK"",c(""localhost"", ""localhost"", ""localhost"",
""localhost""))

system.time(parLapply(cluster,1:2,clusterfun))

stopCluster(cluster)

但是在執行上得到這個錯誤> cluster <- makeCluster(type=""SOCK"",c(""localhost"", ""localhost"", ""localhost"",""localhost""))> system.time(parLapply(cluster,1:2,clusterfun))Error in checkForRemoteErrors(val) :
  2 nodes produced errors; first error: 沒有這個函數 ""setnames""
Timing stopped at: 0 0 0.01> stopCluster(cluster)請問各位該如何排除這樣的障礙，謝謝各位的指教

[環境敘述]:> version_platform       x86_64-w64-mingw32arch           x86_64os             mingw32system         x86_64, mingw32statusmajor          3minor          2.1year           2015month          06day            18svn rev        68531language       Rversion.string R version 3.2.1 (2015-06-18)nickname       World-Famous Astronaut[關鍵字]:選擇性，也許未來有用Snow, data.table,Stepwise Regression

--","R_Language"
"1538","M.1462365149.A.03C","but07","問題","Y在不同group的占比",2016-05-04 20:32:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

想要知道應變數(y)在各個x中的不同group的占比(%)

以下是拿arules裡面的IncomeESL資料作範例
我想要知道
1. 男性在每個收入成的占比(男性/全部)
2. 男性在每個年齡層的占比(男性/全部)

目前的圖:http://imgur.com/yvKPuNZ希望的圖:http://imgur.com/sLocu8c(希望有點+曲線趨勢線)

[程式範例]
plot(sex~income+age,data=IncomeESL)
上面是我目前使用的code


Google了一下找不太到答案
可能是我不太會下關鍵字
只好上來麻煩各位大大了
感謝


--","R_Language"
"1539","M.1462362068.A.EE2","NeiSeHai","問題","修改package的內建函數並永久儲存",2016-05-04 19:41:06,NA,NA,"如題。

我目前只能透過

options(error = recover)
trace(""fitcml"", edit=TRUE) #fitcml is a built-in function

暫時修改。

請問如何永久儲存這個修改呢？ 就是下次打開R，修改一直都在。

感謝。

--","R_Language"
"1540","M.1462206190.A.A90","g22gs","問題","關於命令稿日文編碼",2016-05-03 00:23:03,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

新手求助

目前修課的關係需要開啟註解為日文的.R命令稿

（希望的編碼應該是 shift-jis）


查了一下只有找到讀.csv檔改編碼的方法

以及在命令列輸入 Sys.setlocale(""LC_ALL"",""Japanese"")

但setlocale之後註解的漢字部分看得到了假名部分還是問號


想請教要如何設定，先謝謝了


[環境敘述]:
R version 3.2.5 (2016-04-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 10 x64 (build 10586)

locale:
[1] LC_COLLATE=Japanese_Japan.932  LC_CTYPE=Japanese_Japan.932
[3] LC_MONETARY=Japanese_Japan.932 LC_NUMERIC=C
[5] LC_TIME=Japanese_Japan.932

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.5


--","R_Language"
"1541","M.1462202896.A.E5B","celestialgod","問題","Re: xyplot 文字大小調整",2016-05-02 23:28:13,NA,NA,"※ 引述《decken (HAHAHA~)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 使用xyplot畫圖時，文字太大導致圖形太小: 錯誤圖片：http://i.imgur.com/wpVk3T1.png?1: 正確圖片：http://i.imgur.com/hj80j9x.png?1: Google了許久，找不到參數可以把圖形的範圍拉大，: 不知道版友們有遇過類似的問題嗎？: 謝謝~:: [程式範例]::: data1 <-:  read.table(""C:/Users/YOUR_NAME/Desktop/lq.dat"", header=T): attach(data1): library(package = ""lattice""): xyplot(lq~timestamp|ip*neighbor, data=data1): detach(data1):: ====================================: lq.dat 下載 - https://goo.gl/WtFo3W其實我看不太懂你的問題，xyplot有很多個cex可以調，我調幾個給你看一下

不確定你要調的參數是哪一個，就把圖都存下來傳到imgur去了

有什麼問題可以再推文告知

library(data.table)
library(lattice)
dat <- fread(""lq.dat"")
png(""test.png"", 1500, 900)
xyplot(lq ~ timestamp | ip * neighbor, data = dat)
dev.off()

存下來的圖：http://i.imgur.com/2sYN96l.png要多大都可以透過png去調高度、寬度


png(""test2.png"", 1500, 2000)
xyplot(lq ~ timestamp | ip * neighbor, data = dat,
  par.strip.text = list(cex = 2))
dev.off()

存下來的圖：http://i.imgur.com/JTznnm4.pngpng(""test3.png"", 1500, 2000)
xyplot(lq ~ timestamp | ip * neighbor, data = dat, cex = 2,
       scales = list(cex = 3), par.strip.text = list(cex = 2))
dev.off()

存下來的圖：http://i.imgur.com/hs8tLL4.png--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1542","M.1462202228.A.4CC","decken","問題","xyplot 文字大小調整",2016-05-02 23:16:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:使用xyplot畫圖時，文字太大導致圖形太小錯誤圖片：http://i.imgur.com/wpVk3T1.png?1正確圖片：http://i.imgur.com/hj80j9x.png?1Google了許久，找不到參數可以把圖形的範圍拉大，不知道版友們有遇過類似的問題嗎？謝謝~[程式範例]:data1 <-read.table(""C:/Users/YOUR_NAME/Desktop/lq.dat"", header=T)attach(data1)library(package = ""lattice"")xyplot(lq~timestamp|ip*neighbor, data=data1)detach(data1)


====================================lq.dat 下載 -https://goo.gl/WtFo3W[環境敘述]:R version 3.2.5 (2016-04-14)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] lattice_0.20-33loaded via a namespace (and not attached):[1] grid_3.2.5[關鍵字]:xyplot 圖形大小--","R_Language"
"1543","M.1462191813.A.FDF","celestialgod","問題","Re: 畫圖",2016-05-02 20:23:30,NA,NA,"※ 引述《corel (可羅)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: - 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性: ): - 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性): - 心得: 當你自己想要分享經驗時，請使用這個類別。: - 討論: 當你自己已經有答案，但是也想聽聽版友意見時:: [問題類型]::: 意見調查(我對R 有個很棒的想法，想問問大家的意見): 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 效能諮詢(我想讓R 跑更快): 經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): 入門(寫過其他程式，只是對語法不熟悉): 使用者(已經有用R 做過不少作品): 開發者(有撰寫R 的套件經驗): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 想要畫圖: [程式範例]:: http://ideone.com/fuQFUL: [結果圖]:: 不是我想要的: http://imgur.com/0NQW53E: 原本設想其實應該比較接近: http://imgur.com/0u5N2k9: 或是折線圖: 謝謝你輸入的x被當成了整數，所以畫出來會不如你所想是正常的

請轉成時間之後再使用

x<-c(201401,201402, 201403, 201404, 201405, 201406, 201407, 201408, 201409,
     201410, 201411,201412, 201501, 201502, 201503, 201504, 201505, 201506,
     201507, 201508, 201509, 201510, 201511, 201512, 201601, 201602, 201603,
     201604)

library(fasttime)

x_time <- fastPOSIXct(paste0(paste0(substring(x, 1, 4), ""/"",
  substring(x, 5, 6)), ""/01 00:00:00"")) - as.difftime(8, units = ""hours"")

# ct是格林威治標準時間，轉過去的時間點，在台灣時區(GMT+8)剛好會多8小時
# 所以做一個簡單的修正減去八小時(其實不做也沒差，圖看不出來八小時的差異)

y<-c(16.8, 16.5 ,18.9, 22.5, 25.2 ,28.0 ,30.5 ,30.2, 29.7 ,24.7 ,22.3, 16.5,
     16.7, 17.3, 18.9, 22.7, 26.1 ,30.0 ,30.0 ,28.6 ,27.4, 25.2 ,23.5 ,18.9,
     16.2, 15.5, 17.5 ,24.0)
plot(x_time,y,type=""o"",
     lwd=2,
     col=2,
     xlab=""年月"",
     ylab=""氣溫"")


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1544","M.1462189883.A.C1C","corel","問題","畫圖",2016-05-02 19:51:18,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)- 心得: 當你自己想要分享經驗時，請使用這個類別。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)使用者(已經有用R 做過不少作品)開發者(有撰寫R 的套件經驗)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想要畫圖



[程式範例]:http://ideone.com/fuQFUL[結果圖]:

不是我想要的http://imgur.com/0NQW53E原本設想其實應該比較接近http://imgur.com/0u5N2k9或是折線圖


謝謝



--

--","R_Language"
"1545","M.1462170593.A.3D2","celestialgod","問題","Re: 抓取氣象局網頁資料",2016-05-02 14:29:49,NA,NA,"※ 引述《corel (可羅)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想擷取 http://www.cwb.gov.tw/V7/climate/monthlyData/mD.htm: 天氣資料，但由於天氣的資料會依網頁上所選取的下拉式選單的值而有所變化: 想請問各位先進，要如何讓R自動會帶值選取對應的資料?: 例如: 2013年3月阿里山的平均溫度為9.9度:       2013年4月阿里山的平均溫度為11.3度: 謝謝: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: R version 3.2.4 Revised (2016-03-16 r70336): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese: (Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C                                 LC_TIME=Chinese: (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: loaded via a namespace (and not attached)::  [1] httr_1.1.0      magrittr_1.5    R6_2.1.1        tools_3.2.4: RCurl_1.95-4.8  yaml_2.1.13     rappdirs_0.3    memoise_0.2.1   crayon_1.3.1:    swirl_2.3.1-2: [11] stringi_1.0-1   stringr_1.0.0   digest_0.6.8    testthat_0.11.0: bitops_1.0-6好讀版：http://pastebin.com/DYaWwFQ2library(stringi)
library(stringr)
library(xml2)
library(pipeR)
library(purrr)
dat <-
read_html(""http://www.cwb.gov.tw/V7/climate/monthlyData/Data/mD201512.htm"",""UTF-8"") %>>%
  xml_find_all('//table[@class=""Form00""]/tr') %>>%
  map(~ when(.,
     identical(class(try({xml_find_one(., 'td')})), ""try-error"") ~
        xml_find_all(., 'th'),
      ~ xml_find_all(., 'td')
    ) %>>% xml_text %>>%
    when(
      identical(.Platform$OS.type, ""windows"") ~ stri_conv(., ""UTF-8"", ""BIG5""),
      ~ .
    ) %>>%
    str_replace_all(""\\s"", """")
  )

# 最上面的表頭
dat[[1]]
# [1] ""項目""                           ""溫度(℃)""                   ""雨量""
# [4] ""風速(公尺/秒)/風向(360°)/日期"" ""相對溼度(%)""                ""測站氣壓""
# [7] ""降水日數>=0.1毫米""              ""日照時數""

# 下面的表格
do.call(rbind, dat[2:length(dat)])
## 印出部分
#      [,1]     [,2]   [,3]        [,4]        [,5]     [,6]
# [1,] ""測站""   ""平均"" ""最高/日期"" ""最低/日期"" ""(毫米)"" ""最大十分鐘風""
# [2,] ""阿里山"" ""9.8""  ""18.0/5""    ""2.8/29""    ""56.8""   ""4.8/340.0/26""
# [3,] ""鞍部""   ""12.3"" ""23.7/22""   ""2.5/17""    ""245.7""  ""14.3/350.0/10""
# [4,] ""板橋""   ""18.8"" ""29.9/22""   ""11.1/17""   ""80.6""   ""7.1/70.0/19""
# [5,] ""成功""   ""21.1"" ""27.8/21""   ""14.5/17""   ""86.4""   ""9.8/30.0/31""
# [6,] ""嘉義""   ""19.8"" ""30.2/24""   ""10.4/19""   ""31.4""   ""8.4/20.0/10""


不再建議使用XML做parse XML的工具，盡量轉到xml2去

xml2至少有20%以上的效率提升，並且XML有一些memory leak的問題


函數說明：

stri_conv 轉換編碼 (這個函數是在stringi裡面)

xml_find_all 用xpath找node (xml2)

read_html 讀網頁 (xml2)

when (purrr) 每一個是一個input是一個條件跟對應的output

例如：

row %>>% when(
           identical(class(try({xml_find_one(., 'td')})), ""try-error"") ~
             xml_find_all(., 'th')
           ~ xml_find_all(., 'td')
         )

當identical(class(try({xml_find_one(., 'td')})), ""try-error"")成立就回傳

xml_find_all(row, 'th')

沒有條件的話就當成else，回傳xml_find_all(row, 'td')

裡面的.都是第一個input (就是%>>%左邊傳入的變數)

這個函數算是ifelse的強化版(ifelse不能輸出block)，可以直接在pipe裡面用

不需要再存暫存變數中斷pipe了 (我可能已經是pipe到走火入魔了)


map (purrr) 等同於lapply，是hadley跟rstudio另外用C++重寫的

str_replace_all 等同於gsub，只是第三個input改到第一個，方便pipe

(這函數在stringr)

%>>% 大體上與%>%一樣，但是有一些比較好用的新功能，此處沒用上就不說明了

另外，作者也宣稱不會像%>%有時候會有input模糊的問題 (自行GOOGLE)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1546","M.1462153221.A.953","corel","問題","抓取氣象局網頁資料",2016-05-02 09:40:17,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:想擷取 http://www.cwb.gov.tw/V7/climate/monthlyData/mD.htm天氣資料，但由於天氣的資料會依網頁上所選取的下拉式選單的值而有所變化想請問各位先進，要如何讓R自動會帶值選取對應的資料?例如: 2013年3月阿里山的平均溫度為9.9度2013年4月阿里山的平均溫度為11.3度謝謝[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤R version 3.2.4 Revised (2016-03-16 r70336)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C                                 LC_TIME=Chinese
(Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
 [1] httr_1.1.0      magrittr_1.5    R6_2.1.1        tools_3.2.4
RCurl_1.95-4.8  yaml_2.1.13     rappdirs_0.3    memoise_0.2.1   crayon_1.3.1
   swirl_2.3.1-2
[11] stringi_1.0-1   stringr_1.0.0   digest_0.6.8    testthat_0.11.0
bitops_1.0-6

--

--","R_Language"
"1547","M.1462149214.A.2B6","JackBaska","討論","Re: 有關R的平行計算應用",2016-05-02 08:33:31,NA,NA,"Mac 直接參考 Rmpi 設置網頁即可 , 有安裝home brew 的話 , 基本上
沒大問題 , 不熟home brew 安裝的人可以直接查 home brew 網頁,已經
整理到只要把上面那行原封不動貼到 command line 即可安裝好home brew
由於小弟有點菜加上手邊機器都是借別人的 , 版本跟系統都很亂 , 才
會搞了好幾種 , 感謝 W 大還有 C 大詳細的指教

=================Linux Ubuntu 快速安裝============================
1. 把OpenMPI裝好 (安裝過程本內容有寫)
2. 回去R安裝其他的.......... end

由於我照參考連結還是會遇到自動抓取常常說找不到或版本不行 , 如 Wush 大所說
如果單裝openmpi , 依舊不能用 還要裝很多東西,所以我直接加了apt-get的默認字
元 ""*""

一行解:
sudo apt-get install openmpi-* libopenmpi-* openssh-*

參考連結:
(過長  縮網址會被當廣告 請自行拼貼)http://lsi.ugr.es/~jmantas/pdp/ayuda/datos/instalaciones/Install_OpenMPI_en.pdf

==============================================================================
==========================CentOS 保險版安裝===================================
1. 下載  OpenMPI
OpenMPI 參考網頁https://www.open-mpi.org/software/ompi/v1.10/OpenMPI 安裝影片https://www.youtube.com/watch?v=QIMAu_o_5V82. 設定環境告知mpi 位址(此段請加入 .bashrc):
export PATH=/home/user_local/openmpi_install_dir/bin:$PATH
export LD_LIBRARY_PATH=/home/user_local/openmpi_install_dir/lib:$LD_LIBRARY_PAT
export LD_PRELOAD=/home/user_local/openmpi_install_dir/lib/libmpi.so:$LD_PRELOAD
(第三行是在你一直跳load 問題用的)

3. Compile Rmpi (請確定抓好了Rmpi):
R CMD INSTALL Rmpi_your_version.tar.gz \
--configure-args=""--with-mpi-type=OPENMPI \
--with-mpi=/home/user_local/openmpi_install_dir""


Rmpi的設置http://www.stats.uwo.ca/faculty/yu/Rmpi/OpenMPI 操作影片https://www.youtube.com/watch?v=QIMAu_o_5V8MPI 後續設定文獻http://lsi.ugr.es/~jmantas/pdp/ayuda/datos/instalaciones/Install_OpenMPI_en.pdf

參考pbdMPI  的安裝文獻:https://cran.r-project.org/web/packages/pbdMPI/INSTALL因為沒有Root 還要手動設定 ./configure , 參考make install文獻:http://unix.stackexchange.com/questions/42567/how-to-install-program-locally-without-sudo-privileges
==============================================================================


→ clickhere: OpenMP和OpenMPI是不同的東西....                      05/02 00:15
→ clickhere: OpenMPI和Rmpi都不需要permission.安裝在user下即可.    05/02 00:16
→ clickhere: 不需要root                                           05/02 00:17
→ JackBaska: 我直接裝library是會跳non-zero status ,然後參考原文   05/02 08:11
→ JackBaska: 網站的做法是先用command line安裝完OpenMPI,然後CMD    05/02 08:11
→ JackBaska: Rmpi後再回到R裡面安裝library才成功,然而前面command   05/02 08:12
→ JackBaska: line的動作我在cluster好像沒有權限,然後試另一個方法   05/02 08:13
→ JackBaOBska: 都遇到版本問題,cluster的R是3.1.x,我還在找怎麼避開    05/02 08:13
→ JackBaska: permission做更新還有以上建置                         05/02 08:14

由於C大有提出這個問題 , 想回答C大順便看是否知道怎麼解
我參考的設置是http://www.stats.uwo.ca/faculty/yu/Rmpi/網頁 , 由於工作環境的關係 , 我的測試機跟有Root的Server
跟沒有 Root的Cluster 分別是OS X/Linux Xbuntu/Linux CentOS

我已經試了幾個方法安好 parallel需要的東西 , 然而cluster
的 R 是 3.1.x 的 , 有一些 parallel提供的資料會一直跳沒有
支援該版本的 parallel , 所以我轉研究Rmpi相關的 , 前面在
OS X/Cluster的測試已經確定直接安裝Rmpi會出現 non-zero status
而OS X的經驗是只要照網站上做的先install 好 OpenMPI 後才能
成功讓 Rmpi 確實安裝好

所以在 Cluster 上我目前是打算研究是否有辦法像是 brew install
只安裝在 User 底下 , 以避開 permission 的問題 , 不過我剛注意
到Linux 好像是直接開始用 CMD INSTALL  Rmpi , 我可能會再回Cluster
試 , 我不確定Cluster 的 OpenMPI是否已經安裝好了 , 但該Cluter
本身有被用 C++/CUDA 在跑平行 , 我可能要再研究一下C++/CUDA所用
的mpi跟 R 的是否有差異

=============安裝時遇到找不到支援版本時=====================
如果你跟我一樣在新電腦裝了 R 但莫名其妙的連 dplyr都跟你說沒
支援版本 , 我還沒確定原因 , 但以下做法是可以work的
""**"" : 你要的 package

install.packages(""**"", dependencies=TRUE,
                repos='http://cran.rstudio.com/')=============補充給需要OpenMPI/RMPI的人=====================
由於昨天到今天有被私訊發現有其他想碰平行的板友遇到類似的狀況
無法做平行 , 這裡補充一下使用的參考網頁

Rmpi的設置 (要先安好 OpenMPI)http://www.stats.uwo.ca/faculty/yu/Rmpi/OpenMPI 參考網頁https://www.open-mpi.org/software/ompi/v1.10/OpenMPI 操作影片https://www.youtube.com/watch?v=QIMAu_o_5V8MPI 後續設定文獻http://lsi.ugr.es/~jmantas/pdp/ayuda/datos/instalaciones/Install_OpenMPI_en.pdf

===========================================================

最後我在cluster 上有遇到最後要把Rmpi安上去時不斷出現此訊息
checking for stdint.h... yes
checking for unistd.h... yes
checking mpi.h usability... no
checking mpi.h presence... no
checking for mpi.h... no
configure: error: ""Cannot find mpi.h header file""
ERROR: configuration failed for package ‘Rmpi’
爬原文網站發現似乎是 MPI安置位置並沒有寫到R用的路徑裡面
然而網站中提及的修改路徑的資料 , 我還沒找到

====================without Root ============================
設定環境告知mpi 位址:
export PATH=/home/user_local/openmpi_install_dir/bin:$PATH
export LD_LIBRARY_PATH=/home/user_local/openmpi_install_dir/lib:$LD_LIBRARY_PATH
export LD_PRELOAD=/home/user_local/openmpi/lib/libmpi.so:$LD_PRELOAD

Compile Rmpi (請確定抓好了Rmpi):
R CMD INSTALL Rmpi_your_version.tar.gz \
--configure-args=""--with-mpi-type=OPENMPI \
--with-mpi-include=/home/user_local/openmpi_install_dir""

參考pbdMPI  的安裝文獻:https://cran.r-project.org/web/packages/pbdMPI/INSTALL因為沒有Root 還要手動設定 ./configure , 參考make install文獻:http://unix.stackexchange.com/questions/42567/how-to-install-program-locally-without-sudo-privileges
========================================================

export LD_PRELOAD=/home/user_local/openmpi/lib/libmpi.so:$LD_PRELOAD

R裡面叫 mpi時出現時使用上面這行:
Error : .onLoad failed in loadNamespace() for 'Rmpi', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: unable to load shared object
'/home/user_local/R/x86_64-redhat-linux-gnu-library/3.1/Rmpi/libs/Rmpi.so':
  libmpi.so.12: cannot open shared object file: No such file or directory
Error: package or namespace load failed for ‘Rmpi’

最後感謝 C 大的指導 , 小弟是平行運算菜鳥 , OpenMPI 跟 OenpMP
的差異還沒有很清晰 , 只知道做平行運算 這兩個都有在環境建置中
被使用過

==========能安裝 snow 以及 parallel的話 可參考這個 pseudo code===========
""**"" : 自行加入自己想叫的額外套件
trainsmall :  一個超大型的 table資料 , 可自行改成自己要輸入的資料

library(""**"")
library(magrittr)
library(snow)
library(parallel)

no_core = detectCores() - 1
#用parallel 幫你找出所有cpu ,記得保留一個提供系統運作 , OS X試過若不保留
#R很容易整個當掉
cl = makeCluster(no_core)
#用snow 啟動多 cpu slave
transDat = list()
for(i in 1:5){        #以5個平行運行為例 把要用的資料跟需要引數包成 list
  bb = list(1,trainsmalls)
  transDat =transDat %>% append(list(bb))
}

#我用 parLapply 將資料傳進Slave 並依造各個 Slave需要讓他們自行拆出資料
#我是覺得這個做法有個缺點 , 就是他會將資料複製 , 我還在找比這個方法更好
#的方式
paraData = parLapply(cl,transDat,function(x) {
  require(""**"")
  set.seed(50+x[[1]])
  result = ""**""(Category ~ PdDistrict+ Months ,data=x[[2]],ntree=10)
  return(result)})

paraData[1] # 確認資料有傳出 Slave

stopCluster(cl)
========================================================================

--","R_Language"
"1548","M.1462078782.A.D91","JackBaska","討論","有關R的平行計算運用",2016-05-01 12:59:40,NA,NA,"- 討論: 當你自己已經有答案，但是也想聽聽版友意見時
[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

各位 R 領域專業的大大們好 , 小弟最近想開始用R的平行計算功能
已經拜讀過 Wush大的平行計算筆記 , 也照一些原文網站內容用Terminal
安裝好 OpenMP 跟 用R 處理好 Rmpi了 , 也成功repeat 一些平行
的小範例

不過我我要做的運算主要會用到一些 Machine Learning的套件,但
我在試跑時會遇到一些問題像是 , 開始跑之後表示沒有該套件的方
法,我後來是在裡面直接做 套件 require處理 , 但還是會有一些載
入資料,還有相關引數的問題

想詢問各位是否知道什麼資源可以學R的平行的一些訊息 , 因為我的
運算只有特定段落有需要平行 , 所以我希望能熟悉 R 的平行,像是我
要把工作分給 Slave 時, 讓他們可以完全接收原本 R kernel已載入
的一些資訊,並把套件跟需求物件正確的傳給所有 Slave

另外如果有詳細 R 怎麼做資源分配的資訊也麻煩各位指點了 , 因為
目前這幾個parallel 的範例我都還沒看到資源分配相關的資訊 , 有點
疑惑

以上主要是針對 CPU 平行問的 , 手邊也有GPU Cluster , 如果有人
有推薦的GPU 在 R 的應用 , 也感激不盡 , 不過對CUDA還不熟 ,所以
先不打算用CPU的部分

另外想問一下有沒有人知道 OpenMP 還有 Rmpi得設置要怎麼只建置
在特定User下面 , 由於手邊的Cluster 有部分沒有 Root , 所以在
管理員有空前我可能得自己處理 , 以前裝package是用只建置在User
底下的方式 , 但mpi 還有 Rmpi有部分步驟要用command line裝,我
安裝時一直被擋掉說我權限不足

[你的答案]:

有想到幾種載入方式還在試 , 但相對還不是我想要的型式 , 覺得另外
自己加入載入段落不見得是好的 , 想了解要怎麼用 R 正確且有效率的
做這件事

另外小弟現在是先用筆電做小資料集的小規模計算測試 , 等大致熟練
才會搬到cluter上面

小弟是平行菜鳥 , 還請大家多多指教

[關鍵字]:
R 平行運算
Master  Slave / Head Node
Cluster
Parallel Computing by CPU

--","R_Language"
"1549","M.1462040172.A.2C0","celestialgod","問題","Re: read.table 多個sep  遺失值miss",2016-05-01 02:16:08,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：: 問題一: 我要讀的是筆記本txt檔: 檔案太大無法先用excel處理: 我的分隔符號有多個   請問要怎麼寫??: 我的code: read.table(""d:\\xxx.txt"" ,sep="";"",  fill=T, quote=""""): 我想要用 ; 和 空格  當作分隔符號  未來可能再增加假設你資料長這樣，可以先用regex把分隔符號抓出來，再用fread處理：

sam 18; boy
paul; 20 boy
charlotte; 21; girl
christy 17 girl


好讀版：http://pastebin.com/QjwNiyNK備註很長，不想看就轉下一頁吧，無所謂的murmur XD

(備註：library後面註解是該套件會用到的函數，我盡量減少使用奇怪的函數，

%>>%部分，我這裡用法幾乎都跟%>%一樣，去看magrittr介紹即可，

有興趣了解更多，再到作者網站看，%>>%多了不少好用的功能，

data.table主要是用fread，data.table跟setnames都可以分別用

data.frame, `names<-`這兩個函數取代，rlply可以用replicate取代

mutate也可以用base的transform取代，str_c跟paste一樣，

str_replace_all只是把gsub原本放字串的位置移到第一個，方便pipe，

還有其他問題或是不會取代函數的話，再推文或是回文發問吧，

至於為什麼要用其他函數，其函數有其他好處加上習慣，甚至只是因為style問題，

就不在程式中做取代了)

code:

library(data.table) # fread, data.table, setnames
library(pipeR)      # %>>%
library(plyr)       # rlply
library(dplyr)      # mutate
library(stringr)    # str_replace_all, str_c

readLines(textConnection('sam 18; boy
paul; 20 boy
charlotte; 21; girl
christy 17 girl')) %>>%
  str_replace_all(""([a-zA-Z0-9]);? "", ""\\1,"") %>>%
  # str_replace_all比gsub適合用在pipeR
  str_c(collapse = ""\n"") %>>% fread %>>% # str_c = paste
  setnames(c(""name"", ""age"", ""sex"")) %>>%
  mutate(age = as.integer(age))
#        name age  sex
# 1       sam  18  boy
# 2      paul  20  boy
# 3 charlotte  21 girl
# 4   christy  17 girl


用兩百萬個row測試看看：

# data generation
textData <- raply(5e5, 'sam 18; boy
paul; 20 boy
charlotte; 21; girl
christy 17 girl') %>>% str_c(collapse = ""\n"")

library(microbenchmark) # microbenchmark
microbenchmark(test = textData %>>%
                 str_replace_all(""([a-zA-Z0-9]);? "", ""\\1,"") %>>%
                 str_c(collapse = ""\n"") %>>% fread %>>%
                 setnames(c(""name"", ""age"", ""sex"")) %>>%
                 mutate(age = as.integer(age)), times = 10L)
# Unit: seconds
# expr      min       lq     mean   median       uq      max neval
# test 4.489137 4.520529 4.528179 4.529275 4.543055 4.557189    10

平均一次4.5秒左右，全距也很小，所以兩百萬列不是問題: ==========================================================: 問題二: 我的資料中  有些地方沒有值  所以當初在存的時候就直接忽略  連空白都沒留: 像這樣:: sam;16;boy; 2015:00:09:59: green;18;gril: paul;20; 2015:00:09:59: 第一行是name: 第二行是age: 第三行是性別: 但是paul沒有記錄到  所以直接記錄到第四行的time: green的time也沒記錄到: 想問有沒有什麼方法解決   我目前只想到比較笨的方法: 給它特定範圍去判斷   像性別不是boy就是gril  出現其他就給他NA: 還有: 這樣讀資料也會因為每列資料col都不一樣   有的時候會出現問題: 是可以讀成文字再去慢慢拆開   不過有點笨就是了: 最後想問如果讀資料量上百萬筆: 還是用read.table嗎?: 有沒有比較好的函數專門處理large  data?: 謝謝一樣用regex處理即可，速度也是相當快：

pattern <- str_c(""([a-z]*);?\\s*"", ""(\\d*)?;?\\s*"", ""(boy|girl)?;?\\s*"",
  ""(\\d{4}:\\d{2}:\\d{2}:\\d{2})?"")
# 第一個是第一欄位，第二個是第二欄位，依此類推

readLines(textConnection('sam;16;boy; 2015:00:09:59
green;18;girl;
paul;20; 2015:00:09:59
charlotte; 21;')) %>>% str_replace_all(pattern, ""\\1, \\2, \\3, \\4"") %>>%
  str_replace_all("", , , "", """") %>>% str_c(collapse = ""\n"") %>>%
  fread(na.string="""") %>>% setnames(c(""name"", ""age"", ""sex"", ""time"")) %>>%
  mutate(age = as.integer(age))
# name age  sex          time
# 1       sam  16  boy 2015:00:09:59
# 2     green  18 girl          <NA>
# 3      paul  20 <NA> 2015:00:09:59
# 4 charlotte  21 <NA>          <NA>

# 這裡要為什麼要取代"", , , ""，我暫時想不出來為什麼
# 這裡不知道為什麼經過regex後，每一列會多出三個逗號，讓我匪夷所思QQ


# 用兩百萬個row測試看看：
# data generation
textData <- raply(5e5, 'sam;16;boy; 2015:00:09:59
green;18;girl;
paul;20; 2015:00:09:59
charlotte; 21;') %>>% str_c(collapse = ""\n"")

library(microbenchmark)
microbenchmark(test = readLines(textConnection(textData)) %>>%
                 str_replace_all(pattern, ""\\1, \\2, \\3, \\4"") %>>%
                 str_replace_all("", , , "", """") %>>% str_c(collapse = ""\n"") %>>%
                 fread(na.string="""") %>>%
                 setnames(c(""name"", ""age"", ""sex"", ""time"")) %>>%
                 mutate(age = as.integer(age)), times = 10L)
# Unit: seconds
# expr      min      lq    mean   median       uq      max neval
# test 10.93214 10.9493 10.9683 10.96072 10.98294 11.04314    10

平均一次11秒左右，全距也很小，所以兩百萬列不是問題


最後murmur，這個資料真的長得很醜，我花了一小時才把這篇打完

還在測試不用regular expression的方法，能多快

發現讀一次檔案還是要80秒，實在太慢，最後就不PO上來了

這裡推薦一個網站學regex:http://regexone.com/題外話：這一篇文章值 185 Ptt幣 XDD

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1550","M.1462034121.A.29E","f496328mm","問題","read.table 多個sep  遺失值miss",2016-05-01 00:35:19,NA,NA,"問題一

我要讀的是筆記本txt檔

檔案太大無法先用excel處理

我的分隔符號有多個   請問要怎麼寫??

我的code

read.table(""d:\\xxx.txt"" ,sep="";"",  fill=T, quote="""")

我想要用 ; 和 空格  當作分隔符號  未來可能再增加

==========================================================
問題二

我的資料中  有些地方沒有值  所以當初在存的時候就直接忽略  連空白都沒留

像這樣:

sam;16;boy; 2015:00:09:59
green;18;gril
paul;20; 2015:00:09:59

第一行是name
第二行是age
第三行是性別
但是paul沒有記錄到  所以直接記錄到第四行的time
green的time也沒記錄到

想問有沒有什麼方法解決   我目前只想到比較笨的方法

給它特定範圍去判斷   像性別不是boy就是gril  出現其他就給他NA

還有

這樣讀資料也會因為每列資料col都不一樣   有的時候會出現問題

是可以讀成文字再去慢慢拆開   不過有點笨就是了


最後想問如果讀資料量上百萬筆
還是用read.table嗎?
有沒有比較好的函數專門處理large  data?

謝謝

--","R_Language"
"1551","M.1462031510.A.4C3","cywhale","問題","Re: 正則表示式 regex in R",2016-04-30 23:51:48,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《cywhale (cywhale)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : 若一字串的開頭與結尾只想留下英文字，我寫: : gsub(""^[^a-zA-Z]+|[^a-zA-Z]+$"", """", x): : 但若結尾是""sp."" or ""spp."" 我想保留""."" 這個符號不被上面這個式子濾掉: : 比如 ""aaa bbb sp."" 就維持原字串: : 但其他情況的"".""應該要被濾掉 比如 ""aaa bbb22."" -> ""aaa bbb"": : 試了一些?: ?! 等語法都沒抓到，向大家請教~~ 謝謝~: str <- c(""aaa bbb sp."", ""aaa bbb sp2.""): gsub(""[^a-zA-Z]*([a-zA-Z. ]+).*"", ""\\1"", str):                          ^ 這個空格要留著 不然會出事XD: # [1] ""aaa bbb sp."" ""aaa bbb sp"": 我忘了問 會不會有  ""aa2 bb3 cc."" 要變成  ""aa bb cc."" 這種情況了？: 有這種情況建議用regmatches，把 ""aa"", ""bb"", ""cc.""都抓出來，再處理QQ: 大概像這樣(可能考慮還不夠周延)：: str <- c(""aaa bbb sp."", ""aaa bbb sp2."", ""aa2 bb3 cc.""): sapply(regmatches(str, gregexpr(""[a-zA-Z. ]+"", str)), function(x){:   paste0(x[x != "".""], collapse = """"): }): # [1] ""aaa bbb sp."" ""aaa bbb sp""  ""aa bb cc.""From previous post (thanks celestialgod), I learned ""\\1"" and got some idea..
So I tried and made the following code.
The results closed to my targets, to simplify some scientific names collected
from web. Those formats were just in a mess. ><
After these trials, learned a lot for handling regex... ^_^

gsub(""^[^a-zA-Z]+|(?!\\.)[^a-zA-Z]+$|
      \\b((sp\\.)+$)|\\b((spp\\.)+$)|((\\w{0,})\\.+$)"",""\\2\\4\\6"",
     c(""33aaa sp."", ""aaa sp.bb33"", ""aaasp.bb 33 de"",""aaa w2sp."",
       ""aaa www spp. "", ""spp."",""bb."", ""XXX sp. "",
       ""YYY spp.()"", ""ZZZZ..""), perl=T)

[1] ""aaa sp.""  ""aaa sp.bb""  ""aaasp.bb 33 de"" ""aaa w2sp""  ""aaa www spp.""
[6] ""spp.""  ""bb""             ""XXX sp.""        ""YYY spp."" ""ZZZZ""

Any comments or bugs found, just tell me! Thanks for the help~







--","R_Language"
"1552","M.1462013732.A.7DC","HumuHumu","問題","prcomp和eigen算出來的特徵向量正負不一",2016-04-30 18:55:30,NA,NA,"如題，我用R跑主成份分析的時候，分別用兩個方法計算特徵值和特徵向量

第一個是用prcomp的指令，算出來特徵向量如下http://imgur.com/qmBZP6u第二個是算出資料的相關係數矩陣，然後用eigen指令求這個矩陣的特徵向量，如下http://imgur.com/XOUSPPC不知道各位有沒有發現，雖然兩種方法算出來的特徵向量值的大小都是一樣的

但是第二、四、五主成分，用兩種指令算出來卻是正負號相反，請問有人知道這

是為什麼嗎?

--","R_Language"
"1553","M.1461950686.A.137","celestialgod","問題","Re: 如何轉化數字",2016-04-30 01:24:42,NA,NA,"※ 引述《laputaca (離歌笑)》之銘言：: 各位大大好: 小弟做了一個逐步迴歸 得到類似這樣的結果: > result$call: lm(formula = y ~ `15` + `16` + `17` + `25` + `28` , data = data): 想請問我該如何將`15` ,`16` , `17` , `25` , `28` 這些變數轉化成數字呢?: 也就是得到 15,16,17,25,28: 我有嘗試硬轉: 如: as.numeric(names(result$aliased)[-1]): 結果明顯是不行的XDD: 請求各位大大幫忙有一個函數叫做all.vars，可以試一下

dat <- data.frame(rnorm(100), rnorm(100), rnorm(100))
names(dat) <- c(""y"", ""15"", ""16"")
lm_object <- lm(y ~ `15` + `16`, dat)
lm_call <- lm_object$call

一般解法：

vars_formula <- all.vars(lm_call$formula)
as.integer(vars_formula[2:length(vars_formula)])

套用 %>%：

library(magrittr)
lm_call %>% .$formula %>% all.vars %>% .[2:length(.)] %>% as.integer

套用 %>>%：

library(pipeR)
lm_call %>>% (formula) %>>% all.vars %>>% (.[2:length(.)]) %>>% as.integer


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1554","M.1461939308.A.A4E","andrew43","問題","Re: 如何轉化數字",2016-04-29 22:15:05,NA,NA,"※ 引述《laputaca (離歌笑)》之銘言：: 各位大大好: 小弟做了一個逐步迴歸 得到類似這樣的結果: > result$call: lm(formula = y ~ `15` + `16` + `17` + `25` + `28` , data = data): 想請問我該如何將`15` ,`16` , `17` , `25` , `28` 這些變數轉化成數字呢?: 也就是得到 15,16,17,25,28: 我有嘗試硬轉: 如: as.numeric(names(result$aliased)[-1]): 結果明顯是不行的XDD: 請求各位大大幫忙lm 物件裡的 $call 是一種叫 call 的東西。
它主要的作用是你可以直接 eval(result$call) 來進行原本的 lm(...)。

我並不會精確的解法，所以只是試出一個解法，但不一定穩健。
更穩健的解法有請高手幫忙了。

library(dplyr)
result$call %>% as.character %>% .[2] %>%
  as.formula %>% as.character %>% .[3] %>%
  strsplit(""[` +]"") %>% .[[1]] %>% as.numeric %>% na.omit

對了，題外話，colnames 取這樣有時可能會很麻煩。
不知道你是不是有特別的目的？
這些 colnames 的數字和值有什麼關係嗎？


--","R_Language"
"1555","M.1461936562.A.F2E","laputaca","問題","如何轉化數字",2016-04-29 21:29:17,NA,NA,"各位大大好

小弟做了一個逐步迴歸 得到類似這樣的結果> result$calllm(formula = y ~ `15` + `16` + `17` + `25` + `28` , data = data)


想請問我該如何將`15` ,`16` , `17` , `25` , `28` 這些變數轉化成數字呢?

也就是得到 15,16,17,25,28

我有嘗試硬轉

如: as.numeric(names(result$aliased)[-1])

結果明顯是不行的XDD

請求各位大大幫忙

--","R_Language"
"1556","M.1461920783.A.7D4","celestialgod","問題","Re: 正則表示式 regex in R",2016-04-29 17:06:18,NA,NA,"※ 引述《cywhale (cywhale)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: 若一字串的開頭與結尾只想留下英文字，我寫: gsub(""^[^a-zA-Z]+|[^a-zA-Z]+$"", """", x): 但若結尾是""sp."" or ""spp."" 我想保留""."" 這個符號不被上面這個式子濾掉: 比如 ""aaa bbb sp."" 就維持原字串: 但其他情況的"".""應該要被濾掉 比如 ""aaa bbb22."" -> ""aaa bbb"": 試了一些?: ?! 等語法都沒抓到，向大家請教~~ 謝謝~str <- c(""aaa bbb sp."", ""aaa bbb sp2."")
gsub(""[^a-zA-Z]*([a-zA-Z. ]+).*"", ""\\1"", str)^ 這個空格要留著 不然會出事XD# [1] ""aaa bbb sp."" ""aaa bbb sp""我忘了問 會不會有  ""aa2 bb3 cc."" 要變成  ""aa bb cc."" 這種情況了？

有這種情況建議用regmatches，把 ""aa"", ""bb"", ""cc.""都抓出來，再處理QQ

大概像這樣(可能考慮還不夠周延)：

str <- c(""aaa bbb sp."", ""aaa bbb sp2."", ""aa2 bb3 cc."")
sapply(regmatches(str, gregexpr(""[a-zA-Z. ]+"", str)), function(x){
  paste0(x[x != "".""], collapse = """")
})
# [1] ""aaa bbb sp."" ""aaa bbb sp""  ""aa bb cc.""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1557","M.1461918640.A.29D","cywhale","問題","正則表示式 regex in R",2016-04-29 16:30:38,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)若一字串的開頭與結尾只想留下英文字，我寫
gsub(""^[^a-zA-Z]+|[^a-zA-Z]+$"", """", x)

但若結尾是""sp."" or ""spp."" 我想保留""."" 這個符號不被上面這個式子濾掉
比如 ""aaa bbb sp."" 就維持原字串
但其他情況的"".""應該要被濾掉 比如 ""aaa bbb22."" -> ""aaa bbb""

試了一些?: ?! 等語法都沒抓到，向大家請教~~ 謝謝~


--","R_Language"
"1558","M.1461848173.A.8C9","HumuHumu","問題","關於R語言是否會吃記憶體",2016-04-28 20:56:10,NA,NA,"小弟我是R新手 ，這個問題顯得很笨但還是想請問一下

請問R語言會很吃記憶體嗎?

因為最近想買一台變形平板，主要是用來上網以及做WORD、PPT等，而且又輕便

但想說偶爾可能會跑個R，不知道記憶體夠不夠力

看上的這台是2G RAM，64G ROM

感謝版友的回答

--","R_Language"
"1559","M.1461761903.A.655","ghostdx","問題","請問如何賦予tif檔gis座標",2016-04-27 20:58:21,NA,NA,"問題: 當你想要問問題時，請使用這個類別[問題類型]:

程式諮詢


[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:

希望將tif檔賦予座標 使圖片匯入gis中時 能在正確的位置

謝謝

抱歉 描述的不夠清楚

原始檔案是csv檔 利用r作出分佈圖的圖片檔後 要丟入arc gis中使用

為了避免要再gis再執行一次對位的動作(有大量圖片 gis對位無法批次進行)

所以想請教大家如何能在利用r繪出成圖片檔時 也順便賦予圖片座標

謝謝!!

我在網路上找到點資料 但還不太確定是否是在教我說的這件事https://pakillo.github.io/R-GIS-tutorial/也先放上來給大家參考看看 我再繼續研究一下 也麻煩大家能分享一下心得

非常謝謝

--","R_Language"
"1560","M.1461746523.A.FF4","clark574","問題","位數顯示問題",2016-04-27 16:42:00,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
[問題敘述]:
矩陣計算結果的數字呈現都會用科學符號表示，如2e+03這種的方式呈現。請問各位高手
，我要如何把它更改成像""2000""這種讓我們淺顯易懂的表示方式?是需要輸入麼指令更改
環境嗎?謝謝各位。
[環境敘述]:
win7,R i386 3.2.4 Revised






--","R_Language"
"1561","M.1461715128.A.F23","naturalsmen",NA,"有人去今年的GSOC嗎？",2016-04-27 07:58:46,NA,NA,"想了半天不知道板標要選什麼 就沒選了...

如果不妥再請板大告知

----------

小弟看到今年GSOC的R project裡貌似有五個華人名字

其他是亂取的或一看就是外國人名

想問問看裡面是不是有其他台灣人

雖然感覺都是中國人 (單名的居多)

不好意思在mailing list裡問國籍問題

但台灣對GSOC有興趣的本來就很少了

R project裡的感覺又更少...

只好到這邊來找找看有沒有同鄉XD

--","R_Language"
"1562","M.1461677465.A.77C","celestialgod","問題","Re: 循環數列",2016-04-26 21:31:03,NA,NA,"※ 引述《PILIPALAPON (pilipalapon)》之銘言：: [問題類型]:: 程式資訊: [軟體熟悉度]:: 入門: [問題敘述]:: a為7個1到7隨機取後不放回的數: a=sample(1:7,7,replace=T): 當a為1時 b=2 c=3 d=4 e=5 f=6 g=7: 當a為2時 b=3 c=4 d=5 e=6 f=7 g=1: 當a為3時 b=4 c=5 d=6 e=7 f=1 g=2: 以此類推...: [程式範例]:: 目前只想到用迴圈直接寫，想請版友提供更快更好的方法: [環境敘述]:: R3.2.4a <- sample.int(7L, 7L) # [1] 6 7 2 5 1 3 4
out <- sweep(replicate(7L, 1L:7L), 2, a, '+')
out[out > 7] <- out[out > 7] - 7

#      [,1] [,2] [,3] [,4] [,5] [,6] [,7]
# [1,]    7    1    3    6    2    4    5
# [2,]    1    2    4    7    3    5    6
# [3,]    2    3    5    1    4    6    7
# [4,]    3    4    6    2    5    7    1
# [5,]    4    5    7    3    6    1    2
# [6,]    5    6    1    4    7    2    3
# [7,]    6    7    2    5    1    3    4


# 一次pipe得到答案 (這個絕對是太無聊)：
library(pipeR)
library(plyr)

sample.int(7L, 7L) %>>% (sweep(replicate(7L, 1L:7L), 2, ., '+')) %>>%
  mapvalues(8:14, 1:7)

--","R_Language"
"1563","M.1461677119.A.A27","celestialgod","問題","Re: ggplot 畫機率分配走勢圖(NT$300+200)",2016-04-26 21:25:16,NA,NA,"※ 引述《realtemper (Be pythonic!)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 註：賞金限首殺者，自動分組的部分跟主要問題分開，詳見內文: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 問題應該算常見，看標題就明白，但做起來卻難如登天 怎麼做怎麼錯: 我的資料長這樣(公司資料無法攜出 勞煩解答者自行按下面說明稍微模擬一下):       tableA: GP    N     N_valid: ---------------------: 1     300     120: 2     225     55: 3     145     42: 4     101     45: ....: 52    5       3: 53    1       1: 55    2       0: 58    2       2: 63    1       0: 79    2       1: 97    1       0: tableA 是一個 pre-summarized 的次數分布圖：: GP 是整數，由小排到大，但並不 consecutive: N 代表某 GP 值的事件數: N_valid 代表成功事件數，0 <= N_valid <= N: 並且這張表有一個特性: 就是 N 愈到後面愈稀疏: 如果 N = N_valid = 0 則不會出現該 GP 的 row, 例如 GP=80: 我想做的事情也很簡單：:    畫出成功機率 (N_valid / N) vs GP 的走勢圖: 實際上應該會是 sum(N_valid)/sum(N) ""group by 每個bins"" 的概念: 並且因為GP愈大，N值愈稀疏，所以組距也必須設定為愈後面愈寬: 要不然每組的樣本數不夠，機率的上下跳動幅度會太大: 目前還想不到什麼好方法來做自動化的計算: 所以就先手動設定 breaks = c(5,10,15,20,30,50): (如果可以自動化，也希望一併提供solution，賞金額外再給$200): 我嘗試弄了一段程式碼如下: hist <- ggplot(tableA, aes(x=GP)) +:   geom_bar(aes(y=sum(N_valid)/sum(N)),:            breaks=breaks,:            stat='identity') +:   scale_y_continuous(labels=percent): hist: 反正就先設好資料，再設好圖層跟軸，最後座標軸等修飾屬性套上去: ggplot 的 code 基本也就長這樣: 結果雖然有圖，但是不work，跑出一堆黑白相間的條紋，scale 也完全不對。: (資料在公司 無法連網請見諒): 這問題太 subtle 了: stackoverflow 無果: 性質最接近的帖子如下: http://stackoverflow.com/questions/15664202/how-to-interpret-the-different-ggplot2-densities: http://stackoverflow.com/questions/15733531/specifying-number-of-breaks-with-scales-in-ggplot2-without-a-transform/15734133#15734133: http://stackoverflow.com/questions/15651084/error-with-ggplot2-mapping-variable-to-y-and-using-stat-bin: 但都不是我所需要的(當然也可能是我程度太差看不懂): google 關鍵字也不知道要怎麼下: 因為工作關係沒有辦法在這個問題上浪費太多時間: 故在此直接出 $300 徵答(如有辦法不用手動設定breaks再加$200): 請意者作答後，把匯款方式寄站內信給我(我付款後要再麻煩您推文告知已收到): 感謝大大熱心!library(pipeR)
library(dplyr)
library(ggplot2)

# data generation
prob_f <- function(x) x %>>% (.^2/2+3*.-3) %>>% (./sum(.)) %>>% rev
sample_f <- function(x) sort(sample(x, 60, prob = prob_f(x)))
table_A <- data.frame(GP = sample_f(1:100), N = rev(sample_f(1:400))) %>>%
  mutate(N_valid = sapply(N, function(x) rbinom(1, x, 0.6)))
# find the breaks
find_breaks_f <- function(x){
  seq(log(5), log(round(max(x)/100)*100),
    length.out = round(length(x)/11))  %>>%
    exp %>>% c(0) %>>% sort %>>% return
}
breaks <- find_breaks_f(table_A$GP)
# find the probability of success by breaks
table_for_graph <- mutate(table_A, group = findInterval(GP, breaks)) %>>%
  group_by(group) %>>% summarise(prob_success = sum(N_valid) / sum(N)) %>>%
  mutate(x = breaks %>>% ((head(., length(.)-1) + tail(., length(.)-1))/2 ))
# plot
ggplot(table_for_graph, aes(x = x, y=prob_success)) + geom_line() +
  ylab(""Probabilities"") + xlab("""")

%>>%網路上有很詳細的解釋 (跟%>%不相容)

dplyr的相關內容a我的id吧

我這裡只是用直覺去做而已，我不知道合不合用，試試看吧: [程式範例]:: 請見問題敘述後半段(公司資料保密無法連網請見諒): [環境敘述]:: 摘要如下: R 3.2.1 win7 x64 SP1: platform: x86_64-w64-mingw32/x64 (64-bit): 有library(ggplot2):   library(scales): [關鍵字]:: ggplot: geom_histogram: geom_bar: summary function: density--: 順便再問一下: 為什麼我想上網 RTFM 卻沒有一個地方給我 RTFM (例如python就有python docs): 只能在一堆非結構化的散亂網頁當中連來連去: https://cran.r-project.org/index.html: https://cran.r-project.org/manuals.html: http://stat.ethz.ch/R-manual/: https://www.r-project.org/other-docs.html: 是不是大家學R真的全靠help()跟example()就可以了呢？好的help可以讓你懂那個套件在幹嘛，用心的作者還會寫tutorial or vignettes

而遇到一些問題，常常爬stackoverflow都能找到解答

不過畫圖這種東西，我覺得個人要的不同，很難找答案

不如自己想辦法畫吧: 在網路上沒有一個像python docs的集中地 個人覺得是UX上的一個致命缺陷這我不清楚，我不熟python: 當然個人學習 靠help()跟example()是OK的沒錯: 問題是你要demo,要推廣,要做教學demo, 推廣, 教學，有R console也夠阿，不懂為啥要Rstudio

而且Rstudio可以直接按Open in new windows，不用拉來拉去

自備一台筆電最重要 (我自己都用桌機還敢說別人XD

有自己的筆電有自己的環境才適合做更多事情

版上沒有自己筆電應該少之又少(攤手

如果是公司電腦就比較難辦了(攤手: 你所在的環境不一定容許你預先裝好Rstudio: 例如，公司電腦，或者手機(出門在外需要討論問題查資料): 而且初學者通常不喜歡打指令，初學者之所以初學者就是要學，不喜歡打指令只能慢慢習慣

你選擇了這個工具只能去習慣這個工具

不然就去用SAS EG, spss, pspp, minitab之類的吧: 更不喜歡每打一次指令就要跑去把Rstudio的說明視窗拉大上面有說: 我也很好奇大家是怎麼面對這個困擾的 @@--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/j3ql84cdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/hr77hrndplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/jtg4haudplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/jq3o2g3--","R_Language"
"1564","M.1461675748.A.A89","PILIPALAPON","問題","循環數列",2016-04-26 21:02:26,NA,NA,"[問題類型]:

程式資訊

[軟體熟悉度]:

入門

[問題敘述]:

a為7個1到7隨機取後不放回的數
a=sample(1:7,7,replace=F)
當a為1時 b=2 c=3 d=4 e=5 f=6 g=7
當a為2時 b=3 c=4 d=5 e=6 f=7 g=1
當a為3時 b=4 c=5 d=6 e=7 f=1 g=2
以此類推...

[程式範例]:

目前只想到用迴圈直接寫，想請版友提供更快更好的方法

[環境敘述]:

R3.2.4

--","R_Language"
"1565","M.1461666979.A.09E","realtemper","問題","ggplot 畫機率分配走勢圖(NT$300+200)",2016-04-26 18:36:06,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
註：賞金限首殺者，自動分組的部分跟主要問題分開，詳見內文

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

問題應該算常見，看標題就明白，但做起來卻難如登天 怎麼做怎麼錯
我的資料長這樣(公司資料無法攜出 勞煩解答者自行按下面說明稍微模擬一下)

      tableA
GP    N     N_valid
---------------------
1     300     120
2     225     55
3     145     42
4     101     45
....
52    5       3
53    1       1
55    2       0
58    2       2
63    1       0
79    2       1
97    1       0

tableA 是一個 pre-summarized 的次數分布圖：
GP 是整數，由小排到大，但並不 consecutive
N 代表某 GP 值的事件數
N_valid 代表成功事件數，0 <= N_valid <= N
並且這張表有一個特性
就是 N 愈到後面愈稀疏
如果 N = N_valid = 0 則不會出現該 GP 的 row, 例如 GP=80

我想做的事情也很簡單：

   畫出成功機率 (N_valid / N) vs GP 的走勢圖

實際上應該會是 sum(N_valid)/sum(N) ""group by 每個bins"" 的概念
並且因為GP愈大，N值愈稀疏，所以組距也必須設定為愈後面愈寬
要不然每組的樣本數不夠，機率的上下跳動幅度會太大
目前還想不到什麼好方法來做自動化的計算
所以就先手動設定 breaks = c(5,10,15,20,30,50)
(如果可以自動化，也希望一併提供solution，賞金額外再給$200)

我嘗試弄了一段程式碼如下

hist <- ggplot(tableA, aes(x=GP)) +
  geom_bar(aes(y=sum(N_valid)/sum(N)),
           breaks=breaks,
           stat='identity') +
  scale_y_continuous(labels=percent)
hist

反正就先設好資料，再設好圖層跟軸，最後座標軸等修飾屬性套上去
ggplot 的 code 基本也就長這樣
結果雖然有圖，但是不work，跑出一堆黑白相間的條紋，scale 也完全不對。
(資料在公司 無法連網請見諒)

這問題太 subtle 了
stackoverflow 無果
性質最接近的帖子如下http://stackoverflow.com/questions/15664202/how-to-interpret-the-different-ggplot2-densitieshttp://stackoverflow.com/questions/15733531/specifying-number-of-breaks-with-scales-in-ggplot2-without-a-transform/15734133#15734133http://stackoverflow.com/questions/15651084/error-with-ggplot2-mapping-variable-to-y-and-using-stat-bin但都不是我所需要的(當然也可能是我程度太差看不懂)
google 關鍵字也不知道要怎麼下
因為工作關係沒有辦法在這個問題上浪費太多時間
故在此直接出 $300 徵答(如有辦法不用手動設定breaks再加$200)
請意者作答後，把匯款方式寄站內信給我(我付款後要再麻煩您推文告知已收到)
感謝大大熱心!


[程式範例]:
請見問題敘述後半段(公司資料保密無法連網請見諒)


[環境敘述]:

摘要如下
R 3.2.1 win7 x64 SP1
platform: x86_64-w64-mingw32/x64 (64-bit)

有library(ggplot2)
  library(scales)

[關鍵字]:

ggplot
geom_histogram
geom_bar
summary function
density

--
順便再問一下
為什麼我想上網 RTFM 卻沒有一個地方給我 RTFM (例如python就有python docs)
只能在一堆非結構化的散亂網頁當中連來連去https://cran.r-project.org/index.htmlhttps://cran.r-project.org/manuals.htmlhttp://stat.ethz.ch/R-manual/https://www.r-project.org/other-docs.html是不是大家學R真的全靠help()跟example()就可以了呢？

在網路上沒有一個像python docs的集中地 個人覺得是UX上的一個致命缺陷
當然個人學習 靠help()跟example()是OK的沒錯
問題是你要demo,要推廣,要做教學
你所在的環境不一定容許你預先裝好Rstudio
例如，公司電腦，或者手機(出門在外需要討論問題查資料)
而且初學者通常不喜歡打指令，
更不喜歡每打一次指令就要跑去把Rstudio的說明視窗拉大
我也很好奇大家是怎麼面對這個困擾的 @@

--","R_Language"
"1566","M.1461568088.A.005","gbd37","問題","parSapply問題(兩個迴圈)",2016-04-25 15:08:05,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

小弟想試試用parSapply加快速度，看了範例後只用一個parSapply函數執行不會有誤

可是把兩個加一起就會error ...

不懂問題出在哪裡 勞煩有使用經驗的大大告訴小弟

小弟在此謝謝您Orz  虛心受教


[程式範例]:http://pastie.org/10811859[環境敘述]:

3.2.4 win10

[關鍵字]:sapply、parSapply、parallel

--","R_Language"
"1567","M.1461422594.A.1BC","WolfOfWest","問題","R連接fortran問題",2016-04-23 22:43:10,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:入門*[m[問題敘述]:第一次發文請教若有問題請不吝指教。爬文看板上很少關於fortran的資訊，所以來請教各位大大。小弟最近試著更改package內的code，內部包含的fortran code也一起做了修改。然後將改完的code重新包回package，執行後卻跑出錯誤訊息。Error in .Fortran(""findsegpt"", n = as.integer(current.n),x=as.matrix(current.genomdat), :""findsegpt"" not available for .Fortran() for package ""fixedCBS""In addition: Warning message:NAs introduced by coercion其中findsegpt是小弟用fortran寫的function，fixedCBS是小弟包的package名稱。小弟一開始以為是fortran變數的宣告有問題，但經過檢查後沒有發現有誤。想請問error的原因是fortran的function產生NA，所以才有錯誤，還是其他原因造成的？先謝謝了！！[程式範例]:因fortran的code非常的長，而且不知是哪個部分有問題，所以先暫不貼上code，有需要再補上。[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] fixedCBS_0.1loaded via a namespace (and not attached):[1] tools_3.2.2[關鍵字]:fortran--","R_Language"
"1568","M.1461418803.A.5EB","annie51439","情報","R Crawler101開課囉！",2016-04-23 21:40:00,NA,NA,"打給厚∼∼∼！！！！


因為廣大朋友的支持以及反映先前R Crawler101課程搶不到票，因此木刻思在5月份即將開課囉！歡迎有興趣的朋友可以前往活動頁面進行了解！

此次不同以往的是會特別加開R Basic的先修課程，讓沒有碰過R語言的夥伴可以先熟悉語法及環境，之後才可以無痛銜接網路爬蟲課程！！

想要了解課程的朋友歡迎至

R Crawler101 課程http://datasci.kktix.cc/events/rcrawler101-201605R Basic for Crawler 101課程http://datasci.kktix.cc/events/rbasic201605如果有任何問題也歡迎大家上我們的粉絲專頁聯絡我們喔！！！！！



臉書搜尋

Learning by hacking




-----
Sent from JPTT on my HTC_M910x.

--","R_Language"
"1569","M.1461304699.A.D24","Wush978","討論","Re: R語言與其他語言",2016-04-22 13:58:17,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 標題: [討論] R語言與其他語言: 時間: Tue Apr 19 12:31:03 2016:: 不知道這樣的討論能不能PO在板上，若不行請告知我立刻刪除:: 剛學資料分析的時候是用SAS，但是考量到SAS只有大公司的授權版本:: 我認為說可能很多公司用不了，因此尋找替代方案:: 這時候R出現在我面前，既開源又有許多的PACKAGE來使用很符合需求:: 因此開始使用R語言來做分析，就我來說R是一個把資料丟進去跑分析:: 然後可將結果視覺化的工具軟體，確實相當優秀，可是得出結論:: 但是如果要應用的話感覺有些不足，像是我先前一段時間再研究arules package:: 所使用的association rule 和collaborative filtering 這樣的推薦系統:: 確實可以跑出結果，例如A可能會像B一樣想買C產品，這樣的一條結果:: 但是結果怎麼實用呢，感覺還需要其他輔助才能做出真的像是amazon或pchome那樣:: 使用者真的能立刻被推薦的系統，我查了一下發現apache的開源專案mahout跟hadoop:: 我之前有上過hadoop的課程，不過聽不太懂，而mahout是一個可以應用推薦系統的開源:: 專案，網路上是說用java去寫，因此我是不是就去學java呢?:: 也想知道板友除了R之外是不是都有另外的語言專長像是C或JAVA這樣的語言:: 也深深感到自己的不足，有板友可以推薦其他可以和R或者實務連結的語言嗎?:

實務上，你可以透過作業系統來串連不同的工具

透過Rscript 執行檔，R 可以包成命令列應用程序，讓所有能呼叫system call的

語言使用，例如：C, java, python, php, nodejs, ... 族繁不及備載

hadoop streaming也是用類似的概念來串接其他的工具，讓你可以用Hadoop cluster

來跑R, python, ...

如果你相關經驗不足（例如這篇文章中用的名詞沒辦法全部看懂），我強烈建議你先

去學這個解決方案，會省很多時間。



如果要更直接的連結，一種方式是把R 或其他工具整合到相同的Process中，只要掌握

得當，這種方法可以有更好的效能。但是掌握不得當，就是拿石頭砸自己的腳。

基本上，R 可以跟任何C based的工具有深入的連結，例如：C, C++, python,

php，以python為例，可以看看我投Rcpp Gallery的：http://gallery.rcpp.org/articles/rcpp-python/如果是要嵌入R 的話，有RInside專案。

現成解決方案的話，要看工具。Python的話，有rPython套件，nodejs的話有V8

（但是少很多東西，所以我不推薦）

我是覺得，如果你只是自己用，可以玩一玩。如果要做成服務，最好搞懂我上面那篇文章

中的技術，因為穩定性是系統最重要的事情之一，用rPython這種套件，你很難確認它有沒

有埋地雷到你的系統裡面。

R 和Java的話，有rJava套件，但是我的經驗是除了Linux based的系統外，可能光Hello

World 就要搞很多系統設定，這是因為R 是C 寫的，所以和C 寫的其他工具整合比較容

易，而Java就要透過jni...  我不會說做不到，但是脆弱更多。rJava 幫你搞定很多問題

但是也可能導入其他地雷。

ps. 脆弱的意思是，容易出錯的地方更多，所以用起來更不穩定，新手要嘗試也更容易失

    敗

Scala, Spark 也都是走rJava，所以如果你真的想玩的話，去弄Linux 作業系統來試吧，

會省下你很多的時間的。Mac 上的rJava我自己都搞不定，Windows的話有一些額外的設定

動作要跑。Ubuntu的話，只要照著說明跑一兩行程式碼就可以開始玩你的目標了。



以上是方向，以下是我個人經驗

我有寫一個小專案來透過python做資料前處理後匯入R 。跑了一兩年都沒問題，因為我

100%掌握了裡面所有關鍵。（我知道不會有記憶體洩漏，因為我自己看到記憶體怎麼管）

但是最終，我還是把程式拆解成python先處理，寫入硬碟，R再讀出來的架構，因為...

用python，我才能找工程師來幫忙。

我在R中進行模型學習後，最後把模型寫到database。在nodejs中，再連到database中

讀取模型，並且在nodejs中實作演算法。雖然這樣簡單，但是後續維護會有兩倍成本：

R 在模型學習中產生feature的動作，要100%和nodejs中產生feature的動作一致。

這會讓後續的維護成本變成兩倍以上（除了要改兩套之外，還要確保一致性）

現在我正在嘗試用nodejs直接把所有產生feature的動作做完後才交給R，以降低未來的

維護困難度。

以上是我個人整合系統的經驗，給你參考: --","R_Language"
"1570","M.1461119947.A.993","morefunmba","問題","SNA資料讀取問題",2016-04-20 10:39:04,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的主要是想了解SNA在讀取資料的問題
以前在學校學SNA或igraph套件時
讀去的資料格式不外乎以下兩種

[格式A] Matrix
        A       B       C       D
A       0       0       1       1
B       1       0       0       1
C       0       0       0       1
D       1       1       1       0

[格式B] edge-list
Source  target
A       B
B       C
C       A
D       B

因為最近拿到一筆資料是格式C，這樣的格式我想問有沒有可能也可以畫出社會網絡圖的
(無方向性)

[格式C]
TeamID  Node
1       A,B
1       A,C,D,E
1       B,D
1       D,E
1       A,B,C
.....

總資料筆數大約是800多筆
google了一些SNA的範例，好像找不太到可不可行
所以要要來麻煩大家
謝謝

[環境敘述]:R-Studio 0.99.467--","R_Language"
"1571","M.1461047617.A.023","f496328mm","問題","R連結matlab新手問題",2016-04-19 14:33:32,NA,NA,"這是我的code 跟執行結果> library(matlabr)> library(R.matlab)R.matlab v3.5.1 (2016-03-27) successfully loaded. See ?R.matlab for help.

Attaching package: ‘R.matlab’

The following objects are masked from ‘package:base’:

    getOption, isOpen

Warning message:
package ‘R.matlab’ was built under R version 3.2.5> Matlab$startServer()[1] 0> matlab <- Matlab(host=""localhost"")> if (!open(matlab))+   throw(""Matlab server is not running: waited 30 seconds."")> # Run Matlab expressions on the Matlab server> res <- evaluate(matlab, ""A=1+2;"", ""B=ones(2,20);"")>> # Get Matlab variables> data <- getVariable(matlab, c(""A"", ""B""))#============================================================
Warning message:
In readChar(con = con, nchars = nbrOfBytes) :
  在非 UTF-8 MBCS 語區中只能以位元組為單位讀取
#============================================================

重點就在這裡  這是什麼意思?

而且之後我的data還是有讀進去

所以不要理他?> cat(""Recieved variables:\n"")Recieved variables:> str(data)List of 2
 $ A: num [1, 1] 3
 $ B: num [1:2, 1:20] 1 1 1 1 1 1 1 1 1 1 ...
 - attr(*, ""header"")=List of 3
  ..$ description: chr ""MATLAB 5.0 MAT-file, Platform: PCWIN64, Created on:
Tue Apr 19 14:27:16 2016                                        ""
  ..$ version    : chr ""5""
  ..$ endian     : chr ""little""



=====================================================================

請問版上有R連結MATLAB的教學嗎?我爬文都蠻少的

還有一點就是
Matlab$startServer()

這行我執行第一次會出現一個MATLAB  但是我不能在這個MATLAB寫東西

我執行第二次才會有個畫面出來讓我在MATLAB做事

還是說我一次開R跟MATLAB

然後用R整理好的DATA  存起來

再叫MATLAB去做?

ps:我要用matlab裡面的sgmm  經濟方面的Simulated Generalized Method of Momentshttp://www.yildiz.edu.tr/~tastan/SGMM.html不知道有沒有大大做過  謝謝

--","R_Language"
"1572","M.1461040268.A.059","clansoda","討論","R語言與其他語言",2016-04-19 12:31:03,NA,NA,"不知道這樣的討論能不能PO在板上，若不行請告知我立刻刪除

剛學資料分析的時候是用SAS，但是考量到SAS只有大公司的授權版本

我認為說可能很多公司用不了，因此尋找替代方案

這時候R出現在我面前，既開源又有許多的PACKAGE來使用很符合需求

因此開始使用R語言來做分析，就我來說R是一個把資料丟進去跑分析

然後可將結果視覺化的工具軟體，確實相當優秀，可是得出結論

但是如果要應用的話感覺有些不足，像是我先前一段時間再研究arules package

所使用的association rule 和collaborative filtering 這樣的推薦系統

確實可以跑出結果，例如A可能會像B一樣想買C產品，這樣的一條結果

但是結果怎麼實用呢，感覺還需要其他輔助才能做出真的像是amazon或pchome那樣

使用者真的能立刻被推薦的系統，我查了一下發現apache的開源專案mahout跟hadoop

我之前有上過hadoop的課程，不過聽不太懂，而mahout是一個可以應用推薦系統的開源

專案，網路上是說用java去寫，因此我是不是就去學java呢?

也想知道板友除了R之外是不是都有另外的語言專長像是C或JAVA這樣的語言

也深深感到自己的不足，有板友可以推薦其他可以和R或者實務連結的語言嗎?

--","R_Language"
"1573","M.1461036983.A.D01","biozoo","問題","微分方程式內含min/max function的數值解",2016-04-19 11:36:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要解一個微分方程組，方程式裡面包括min function
目前使用deSolve package 的ode function 來解...但是似乎解不出來...
請問大家有無適合的function 可以解這樣的問題，非常感謝~~~



[程式範例]:http://codepad.org/lHHjGwvdpars=c(Rm=30,u=5,v=5,m2=1.5,m3=0.3,ma=0.3,mb=0.5,Nex0=2,Pex=0.2,q=0.3,f=16/106,f2=1/106,e1=1.5,e2=0.6,a1=0.1,s=1,w=0.75)istate <- c(R=10,C=10,N=10,P=1)feed=function(t,state, pars){with(as.list(c(state, pars)),{I=w/(1+exp(-(u*N-v)))E=N^2-e1*N+e2dri=I-(I/P)*Rdre=(E/P)*RdR=(dri-dre)m1=ma*R^mbleig=min((m1*N)/(m2+N),(m1*P)/(m2+P)) ###主要是加了這一段dC=(leig*C-m3*C)dN=(q*(Nex-N)+f*(1-q)*m3*C-f*leig*C)dP=(q*(Pex-P)+f2*(1-q)*m3*C-f2*leig*C)list(c(dR,dC,dN,dP))})}times <- seq(0,200,by=1/12)out <- ode(y = istate, times = times, func = feed, parms = pars)[環境敘述]:Windows 8R 3.2--","R_Language"
"1574","M.1460991337.A.30F","PILIPALAPON","問題","寫function算個數百分比",2016-04-18 22:55:34,NA,NA,"[問題類型]:

程式諮詢


[軟體熟悉度]:

入門

[問題敘述]:

現有1-20的數字10個，想寫一支程式依輸入的切點算出個數及百分比。
（13、5、7、19、4、18、1、10、15、2）
例如當輸入切點：
10
結果：
              個數    百分比
01-10      5          50
11-20      5          50

例如當輸入切點：
5 13 18
結果：
              個數    百分比
01-05     4           40
06-13     3           30
14-18      2           20
19-20     1            10


[環境敘述]:

R3.2




--","R_Language"
"1575","M.1460950075.A.0D2","clansoda","問題","時間格式的賦予",2016-04-18 11:27:51,NA,NA,"我現在有一串時間格式，他讀進來是文字格式

因此我想轉成時間格式，我用strptime function來告訴她要怎麼讀

這個時間格式像是Jan 5, 2016 這樣的類型 第二個天的值會有個位數

因此我用strptime(%b %e, %Y) 但是跑出來都是NA

我換成(%b %d, %Y)跑也是一樣，我的認知是%d的個位數值應該會是01 02

這樣有0的格式，%e則是1-31 這樣無0的格式 其他是有空白就要空白有其他符號

就要告訴R有其他符號，如-或,這樣的符號。請問各位大大，我哪裡寫錯了導致R不知道

不知道這個時間變數如何讀入。

--","R_Language"
"1576","M.1460868745.A.14F","HeroNoah","問題","Re: 函數輸入 自動命名",2016-04-17 12:52:23,NA,NA,"key_value = function(a) {
  x = as.list(a + seq_along(a))
  names(x) = paste0(substitute(a), seq_along(a))
  return(x)
}

測試結果:

k = c(1, 2, 3)
attach(key_value(k))
k1
k2
k3

apple = c(1, 2, 3)
attach(key_value(apple))
apple1
apple2
apple3※ 引述《laputaca (離歌笑)》之銘言：: 標題: [問題] 函數輸入 自動命名: 時間: Sat Apr 16 16:31:08 2016:: 想請問各位大大:: 如果寫一個函數讓他可以自動命名:: 舉個例子:: k <- c(1:3):: function(k): {:: ?? <- k[1]+1: ?? <- k[2]+2: ?? <- k[3]+3:: }:
:: 如何才有辦法讓??的部分:: 可以是自動命名成:: k1 <- k[1]+1: k2 <- k[2]+2: k3 <- k[3]+3:: 也就是說如果我輸入的是apple:: 他就是自動定義三個數值是:: apple1, apple2, apple3:
:
:
:: 我有查過之前的文章:: 似乎有提到 甚麼 assign(paste0(""k"",i),value):: 不過實在是不太懂:: 有大大能指點一下嗎?:: 感謝:: --","R_Language"
"1577","M.1460868492.A.61D","hakiooi","問題","如何安裝下載的套件(mac)",2016-04-17 12:48:10,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
最近在嘗試ggmap畫圖，但是在我的r裡面似乎沒有這個package，於是我從http://cran.csie.ntu.edu.tw上面下載了，但是下載後嘗試很多方法都無法安裝進去
r studio裡面，迫於無奈只好上來請教版友了

[程式範例]:[環境敘述]:R version 3.2.3 (2015-12-10)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.11.4 (El Capitan)locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] ggplot2_2.0.0loaded via a namespace (and not attached):[1] colorspace_1.2-6 scales_0.3.0     plyr_1.8.3       tools_3.2.3      gtable_0.1.2     Rcpp_0.12.3[7] grid_3.2.3       munsell_0.4.3[關鍵字]:選擇性，也許未來有用--","R_Language"
"1578","M.1460809404.A.3D3","micdebate","問題","把一筆資料先分類後同時跑迴圈",2016-04-16 20:23:20,NA,NA,"問題諮詢：

不好意思想請問版上的高手

小弟是剛接觸R的新手

最近拿到一大筆資料(data frame)(至少有一千萬筆)

想把資料依照類別分組後同時跑迴圈

譬如說一千萬筆資料中可以分成10類(每一類的資料量不一定相同)

之後用同量的邏輯一次性把迴圈跑完

不知道R能不能做到這件事情

如果可以有沒有我能參考的程式碼

不然用一千萬筆資料跑兩層迴圈時間會太長

感謝

--","R_Language"
"1579","M.1460795472.A.A79","laputaca","問題","函數輸入 自動命名",2016-04-16 16:31:08,NA,NA,"想請問各位大大

如果寫一個函數讓他可以自動命名

舉個例子

k <- c(1:3)

function(k)
{

?? <- k[1]+1
?? <- k[2]+2
?? <- k[3]+3

}


如何才有辦法讓??的部分

可以是自動命名成

k1 <- k[1]+1
k2 <- k[2]+2
k3 <- k[3]+3

也就是說如果我輸入的是apple

他就是自動定義三個數值是

apple1, apple2, apple3




我有查過之前的文章

似乎有提到 甚麼 assign(paste0(""k"",i),value)

不過實在是不太懂

有大大能指點一下嗎?

感謝

--","R_Language"
"1580","M.1460624833.A.C03","wheado","問題","有關""readJPEG""以及""raster""問題",2016-04-14 17:07:10,NA,NA,"問題是這樣，最近想要用R來處理圖片的一些問題。

也就是將圖片轉換成矩陣，這邊使用的套件是""jpeg""

指令說明中有一個參數""native=T""，是一個邏輯參數。

他的說明中當""native=T""，出來是一個矩陣，如480 X 640 ---- 感覺上平面中的矩陣。

當""native=F""，出來似乎也是一個矩陣，如：480 X 640 X 3 -- 感覺上空間中的矩陣。

我不懂差別在哪裡，只知道裡面有個raster(翻譯:光柵)這個單字。

而且出來的矩陣中的數值都不太一樣。

小弟對於圖片沒有太多的知識，不知道這兩個結果差別在哪?

可不可以簡單的提供一些線索或介紹QQ。





另外一個在意的是有關在R中畫出圖片檔的圖，

使用的是指令""rasterImage""，在這邊我用了以下的程式碼來做圖：
=============================================================
A1 <- readJPEG(""img_100026.jpg"")
A2 <- readJPEG(""img_100026.jpg"",native = T)
      ##畫圖function
      plot.jpeg <- function(jpeg){
                     res = dim(jpeg)[1:2]
                     plot(1,1,xlim=c(1,res[1]),ylim=c(1,res[2]))
                     rasterImage(jpeg,1,1,res[1],res[2])
                   }
plot.jpeg(A1)
plot.jpeg(A2)
=============================================================

不管native是T或F，單單用兩個不同的 480 X 640 矩陣，

都可以畫出圖片，明明矩陣數值不同，為何還可以畫出來??

如果用 480 X 640 就可以畫出來，那多出來的 ""X3""到底是有甚麼意義??

謝謝大家QQ






















--","R_Language"
"1581","M.1460612779.A.62B","bedroom0204","問題","透過animation執行ffmpeg圖片合成影片",2016-04-14 13:46:13,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我試圖透過ffmpeg將圖片組合成影片，
如果不經過R，直接在ffmpeg輸入：
ffmpeg -r 25 -f image2 -i ""D:\new\test1(%d).jpg""  -vcodec libx264
video2.mp4
可以成功合併成影片檔。

如果要在R裡，可能就必須透過animation這個package，
oopts = ani.options(interval = 0.04, ani.width=1920, ani.height=1020,
ffmpeg = ""C:/ffmpeg-20160407-git-0c94906-win32-static/bin/ffmpeg.exe"")
saveVideo(for(k in 1:1000)""D:\\MRTTT\\new\\test1(%d).jpg"",video.name =""D:\\MRTTT\\new\\newvid.mp4"",
  ffmpeg = ani.options(""ffmpeg""),
  other.opts = ""-b 3000k"")
但是，結果只能轉出白色畫面沒秒數影片檔，
我判斷是讀取圖片的程式碼寫錯(上述黃色處)。
另外也想要改成libx264的方式編碼，檔案比較小，
也不知道怎麼改比較好。

如果說用
system()開啟，如下：
system(""C:\\ffmpeg-20160407-git-0c94906-win32-static\\bin\\ffmpeg.exe"")
又會出現Warning message:
running command
'C:\Users\KH\Desktop\ffmpeg-20160407-git-0c94906-win32-static\bin\ffmpeg.exe'had status 1也不知道是甚麼原因。
麻煩解答了。


[程式範例]:
如上

[關鍵字]:
ffmpeg, animation

--","R_Language"
"1582","M.1460601393.A.67B","celestialgod","問題","Re: 選取重覆的資料",2016-04-14 10:36:26,NA,NA,"※ 引述《criky (立業成家)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 有5年的報名資料，資料欄位如年度，姓名，身份證ID，科系: 考生可能會隔年重考(不同年度): 也可能會同一年重覆報考不同科系: 我想要找出同一年重覆報考不同科系的資料，: 要怎麼做呢？謝謝~: example：:    學年度 身分證字號 學生姓名 報考科系: 1     100 A121297328     Andy   中文系: 2     100 A121297328     Andy   歷史系: 3     100 A121297329       Jo   中文系: 4     100 A121297330      Ann   歷史系: 5     100 A121297331     Jack   哲學系: 6     101 A121297332    Julie   中文系: 7     101 A121297333     Rose   中文系: 8     101 A121297334      Tim   歷史系: 9     101 A121297334      Tim   哲學系: 10    101 A121297335    Renee   哲學系: 11    101 A121297336    Joyce   歷史系: 12    101 A121297328     Andy   中文系: 我執行: sample.1<-which(duplicated(subset(sample,select=c(""學年度"",""身分證字號"")))): 會有Warning message:: In grepl(""\n"", lines, fixed = TRUE) ::   input string 1 is invalid in this locale: sample.1: [1] 2,9: 我想要的結果應該是[1] 1,2,8,9: 要怎麼做呢？: [環境敘述]:: [關鍵字]:: 重覆library(data.table)
DT <- fread('
學年度 身分證字號 學生姓名 報考科系
   100 A121297328     Andy   中文系
   100 A121297328     Andy   歷史系
   100 A121297328     Andy   外文系
   100 A121297329       Jo   中文系
   100 A121297330      Ann   歷史系
   100 A121297331     Jack   哲學系
   101 A121297332    Julie   中文系
   101 A121297333     Rose   中文系
   101 A121297334      Tim   歷史系
   101 A121297334      Tim   哲學系
   101 A121297335    Renee   哲學系
   101 A121297336    Joyce   歷史系
   101 A121297328     Andy   中文系')
condition1 <- duplicated(DT, fromLast = TRUE,
                         by = c(""學年度"", ""身分證字號""))
condition2 <- duplicated(DT, fromLast = FALSE,
                         by = c(""學年度"", ""身分證字號""))
which(condition1 | condition2)
# [1] 1 2 3 9 10

PS: 這裡的duplicated是用於data.table的function

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1583","M.1460539331.A.326","criky","問題","選取重覆的資料",2016-04-13 17:22:08,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
有5年的報名資料，資料欄位如年度，姓名，身份證ID，科系
考生可能會隔年重考(不同年度)
也可能會同一年重覆報考不同科系
我想要找出同一年重覆報考不同科系的資料，
要怎麼做呢？謝謝~

example：

   學年度 身分證字號 學生姓名 報考科系
1     100 A121297328     Andy   中文系
2     100 A121297328     Andy   歷史系
3     100 A121297329       Jo   中文系
4     100 A121297330      Ann   歷史系
5     100 A121297331     Jack   哲學系
6     101 A121297332    Julie   中文系
7     101 A121297333     Rose   中文系
8     101 A121297334      Tim   歷史系
9     101 A121297334      Tim   哲學系
10    101 A121297335    Renee   哲學系
11    101 A121297336    Joyce   歷史系
12    101 A121297328     Andy   中文系

我執行
sample.1<-which(duplicated(subset(sample,select=c(""學年度"",""身分證字號""))))

會有Warning message:
In grepl(""\n"", lines, fixed = TRUE) :
  input string 1 is invalid in this locale

sample.1
[1] 2,9

我想要的結果應該是[1] 1,2,8,9
要怎麼做呢？


[環境敘述]:

[關鍵字]:
重覆

--","R_Language"
"1584","M.1460445402.A.BC1","shnn217","問題","package 'rugarch' for mac 能安裝不能使",2016-04-12 15:16:40,NA,NA,"如題

小弟使用的OS系統

在寫程式的時候 安裝了rugarch的package

目前R的版本為3.2.4  OS X 為10.10.5

安裝過程都沒問題也寫是成功安裝

在要執行時卻出現以下訊息> library(rugarch)Loading required package: parallel
Error : .onLoad failed in loadNamespace() for 'rgl', details:
  call: dyn.load(file, DLLpath = DLLpath, ...)
  error: 無法載入共享物件 '/Library/Frameworks/R.framework/Versions/3.2/Resources/library/rgl/libs/rgl.so' ：
 dlopen(/Library/Frameworks/R.framework/Versions/3.2/Resources/library/rgl/libs/rgl.so, 6): Library not loaded: /opt/X11/lib/libGLU.1.dylib
  Referenced from: /Library/Frameworks/R.framework/Versions/3.2/Resources/library/rgl/libs/rgl.so
  Reason: image not found
錯誤: package or namespace load failed for ‘rugarch’

想請問有大大們遇過同樣情況解決的嗎？


--","R_Language"
"1585","M.1460430470.A.84A","clansoda","問題","比對兩個dataframe",2016-04-12 11:07:46,NA,NA,"各位好，我現在有兩筆資料，是我用apply function跑grepl 跑出來的

兩個資料都是TRUE跟FALSE兩種來填滿整個dataframe

我現在想找A資料的[j,i]為TRUE而B資料[j,i]為FALSE的資料

我用 for (i in 1:ncol(A)) {

          for (j in 1:nrow(A)) {

               if (A[j,i]==TURE & B[j,i]==FALSE) {

                   new[j,i]<-TRUE } else {

                          new[j,i]<-FALSE }
        }

            }

結果會一直跑出argument is of length zero

與subscript out of bounds 這兩種

第一個我google它讓我加上is.null在IF函數裡面但是沒有用

第二個不知道是不是new data要先做成跟A和B一樣的大小

所以我有用matrix(nrow=nrow(A),ncol=ncol(A))來跑，好像就沒出來了。

--","R_Language"
"1586","M.1460335540.A.EFC","psinqoo","問題","Re: r studio server電腦需求",2016-04-11 08:45:36,NA,NA,"※ 引述《f496328mm (為什麼會流淚)》之銘言：: 請問要架好一個r server: 電腦需要到server等級嗎？: 我目前電腦i7.   16g是不是太弱了？不會 我家用是I5: 只能遠端去操作？本機也可: 然後如果用vm或是其他的虛擬機去架linux，讓r server在上面執行遠端後 VM遇到滑鼠問題 網路延遲 對VM不熟
  你要考慮的應該是 是要用 Centos 或Ubuntu: 會很不穩嗎？我建議是不要 因為會有記憶體分配問題 16G VM怎麼配?

很容易被攻擊嗎
是的，尤其是對岸來的


--

--","R_Language"
"1587","M.1460294675.A.308","kellywind","問題","如何列出所有排列",2016-04-10 21:24:33,NA,NA,"不好意思，剛剛開始學R，想請教版上前輩一些問題~~


[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想要能找到能列出所有的排列數的函數或function

[程式範例]:
有找到函數
combn()
它可以列出所有的組合(非排列)的結果

例如:
 x<-7,8,9,10
combn(x,2)
     [,1] [,2] [,3] [,4] [,5] [,6]
[1,]    7    7    7    8    8    9
[2,]    8    9   10    9   10   10

但我希望可以列出所有""排列""的結果，如下

      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
[1,]    7    8    9   10    7    8    9   10    7     8     9    10     7
[2,]    7    7    7    7    8    8    8    8    9     9     9     9    10
     [,14] [,15] [,16]
[1,]     8     9    10
[2,]    10    10    10



[環境敘述]:R 3.2.3


麻煩大家了，感謝~~

--","R_Language"
"1588","M.1460168238.A.F0C","f496328mm","問題","r studio server電腦需求",2016-04-09 10:17:15,NA,NA,"請問要架好一個r server
電腦需要到server等級嗎？
我目前電腦i7.   16g是不是太弱了？
只能遠端去操作？



然後如果用vm或是其他的虛擬機去架linux，讓r server在上面執行
會很不穩嗎？

--","R_Language"
"1589","M.1460049065.A.13E","Wush978","問題","Re: 如何整理合併資料並計算個數",2016-04-08 01:11:02,NA,NA,"這個問題只用dplyr就可以了:

early <-
  filter(df, stage == ""early"") %>%
  group_by(Firm, year) %>%
  summarise(early = n())

later <-
  filter(df, stage == ""later"") %>%
  group_by(Firm, year) %>%
  summarise(later = n())

full_join(early, later)

這應該就是你要的!

另外一個給新手的小建議, dplyr 設計的API, 可以解決許多實務問題

這背後是有一些代數理論的支持的.

長久以來SQL在資料庫的成功也證實這套API可以解決許許多多的問題

ps. dplyr的API設計等價於SQL

所以往這方向練習應該是沒錯※ 引述《atomo (Mr.Wu)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 原始資料::  Firm stage  year:   A   early  2012:   A   early  2012:   A   later  2012:   A   later  2013:   B   early  2012:   B   early  2013:   B   early  2013:   B   later  2012:   C   early  2013:   C   early  2013:   C   later  2013:   .......: 想讓資料會按公司名稱和年度去計算當年度的early以及later的數目: 想變成::   Firm  year  early  later:    A    2012    2       1:    A    2013    0       1:    B    2012    1       0:    B    2013    2       0:    C    2013    2       1: 不好意思,剛開始使用r 不太清楚如何敘述問題和寫程式碼,目前是使用dplyr的: group_by 和 n() 兩個來練習不知道方向有無錯誤,謝謝有任何需要補充的我在補充: [環境敘述]::: R version 3.2.3 (2015-12-10): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.11.3 (El Capitan):: [關鍵字]::: 合併資料 計算個數:

--","R_Language"
"1590","M.1460038781.A.933","celestialgod","問題","Re: 如何整理合併資料並計算個數",2016-04-07 22:19:36,NA,NA,"※ 引述《atomo (Mr.Wu)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 原始資料::  Firm stage  year:   A   early  2012:   A   early  2012:   A   later  2012:   A   later  2013:   B   early  2012:   B   early  2013:   B   early  2013:   B   later  2012:   C   early  2013:   C   early  2013:   C   later  2013:   .......: 想讓資料會按公司名稱和年度去計算當年度的early以及later的數目: 想變成::   Firm  year  early  later:    A    2012    2       1:    A    2013    0       1:    B    2012    1       0:    B    2013    2       0:    C    2013    2       1: 不好意思,剛開始使用r 不太清楚如何敘述問題和寫程式碼,目前是使用dplyr的: group_by 和 n() 兩個來練習不知道方向有無錯誤,謝謝有任何需要補充的我在補充方向正確，只是要把early跟later拉出來

還需要會用tidyr的spread或是data.table的dcast.data.table或是base的unstack

也可以用reshape2的dcast，甚至是reshape的cast

另外，硬幹的話，還可以用split + lapply(llply) + merge (full_join)

下面用tidyr的spread示範：

library(data.table)
library(magrittr)
library(dplyr)
library(tidyr)

DT <- fread('Firm stage  year
  A   early  2012
  A   early  2012
  A   later  2012
  A   later  2013
  B   early  2012
  B   early  2013
  B   early  2013
  B   later  2012
  C   early  2013
  C   early  2013
  C   later  2013')

DT %>% group_by(Firm, year, stage) %>%
  summarise(stage_count = n()) %>%
  spread(stage, stage_count, fill = 0)

# Source: local data table [5 x 4]
# Groups:
#
#    Firm  year early later
#   (chr) (int) (dbl) (dbl)
# 1     A  2012     2     1
# 2     A  2013     0     1
# 3     B  2012     1     1
# 4     B  2013     2     0
# 5     C  2013     2     1


# 寫一下硬幹的方法：

split(DT2, DT2$stage) %>% llply(function(x){
  x %>% setnames(""stage_count"", unique(.$stage)) %>% select(-stage)
}) %>% {full_join(.[[1]], .[[2]])} %>%
  mutate_each(funs(mapvalues(., NA, 0)))

--","R_Language"
"1591","M.1460037903.A.60C","atomo","問題","如何整理合併資料並計算個數",2016-04-07 22:05:00,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:原始資料:Firm stage  yearA   early  2012A   early  2012A   later  2012A   later  2013B   early  2012B   early  2013B   early  2013B   later  2012C   early  2013C   early  2013C   later  2013.......想讓資料會按公司名稱和年度去計算當年度的early以及later的數目想變成:Firm  year  early  laterA    2012    2       1A    2013    0       1B    2012    1       0B    2013    2       0C    2013    2       1不好意思,剛開始使用r 不太清楚如何敘述問題和寫程式碼,目前是使用dplyr的group_by 和 n() 兩個來練習不知道方向有無錯誤,謝謝有任何需要補充的我在補充[環境敘述]:R version 3.2.3 (2015-12-10)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.11.3 (El Capitan)[關鍵字]:合併資料 計算個數--","R_Language"
"1592","M.1459968410.A.D57","celestialgod","問題","Re: data frame撈取資料-複雜條件",2016-04-07 02:46:47,NA,NA,"※ 引述《aee36900 (持久戰!!)》之銘言：: [問題敘述]::: 延續上個data frame 撈取特定資料問題,但是條件比較複雜: 我需要c1 c2條件下的c3作為篩選條件: 程式我嘗試用下面的方式敘述: 但是沒有效果@@: 想請問哪邊需要修改:: [程式範例]::: df <- df[df$c3 %in% df[df$c1 >= '0.xxx' & df$c2 == 1,c3],]:: [關鍵字]::: data frame select condition row column好讀版：http://pastebin.com/nY3KvCmd# 資料生成
set.seed(500)
dat <- data.frame(c1 = rnorm(10), c2 = sample(1:3, 10, TRUE),
                  c3 = sample(LETTERS[1:5], 10, TRUE))
#             c1 c2 c3
# 1   0.96848929  1  A
# 2   1.96536781  3  A
# 3   0.88632253  1  D
# 4   0.03054026  2  A
# 5   0.94955742  1  B
# 6  -0.57673001  3  E
# 7   0.72152335  3  E
# 8   0.61909890  3  A
# 9   0.02100582  1  E
# 10  0.27485018  1  A

# 推文前兩行說的方法
dat[dat$c3 %in% dat[dat$c1 >= 0.9 & dat$c2 == 1, 'c3'], ]
#            c1 c2 c3
# 1  0.96848929  1  A
# 2  1.96536781  3  A
# 4  0.03054026  2  A
# 5  0.94955742  1  B
# 8  0.61909890  3  A
# 10 0.27485018  1  A

# 推文補充的dplyr方法
library(dplyr)
dat %>% filter(c3 %in% (dat %>% filter(c1 >= 0.9, c2 == 1) %>% .$c3))
#           c1 c2 c3
# 1 0.96848929  1  A
# 2 1.96536781  3  A
# 3 0.03054026  2  A
# 4 0.94955742  1  B
# 5 0.61909890  3  A
# 6 0.27485018  1  A


--","R_Language"
"1593","M.1459952193.A.A46","aee36900","問題","data frame撈取資料-複雜條件",2016-04-06 22:16:31,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:延續上個data frame 撈取特定資料問題,但是條件比較複雜我需要c1 c2條件下的c3作為篩選條件程式我嘗試用下面的方式敘述但是沒有效果@@想請問哪邊需要修改[程式範例]:df <- df[df$c3 %in% df[df$c1 >= '0.xxx' & df$c2 == 1,c3],][關鍵字]:data frame select condition row column--","R_Language"
"1594","M.1459927948.A.57F","memphis","心得","dplyr 外掛 multidplyr",2016-04-06 15:32:25,NA,NA,"網址https://github.com/hadley/multidplyr在做資料處理的時候
如果需要針對每個 group 做 window (block) function
在 dplyr 裡是 data %>% group_by(grp) %>% summarize or do
如果組數很多, 或是function太醜算太久
我們就需要平行, 讓每個group在多個核心跑function


在R裡快速平行化的方式是藉由 parallel package
cl <- makeCluster(8)
tmp <- parLapply(cl, a_list, to_this_fun, other_par)
stopCluster(cl)
然後通常是
tmp1 <- tmp %>% rbind_all() %>% distinct() %>% whatever_you_want


重點是那個""list"", list哪裡來?
你可以 tmp_idx <- tmp %>% group_by(grp) %>% group_indices()
或者, 使用""裡""技
tmp %>% mutate(IID=group_indices_(., .dots=c(""grp""))) %>% group_by(IID)


有了分組list, 你可以傳 ""list+整份資料""
然後藉由list讓每個核心, 做一小部分,
但是資料量很大的時候, 根本不可能這樣做


改善的辦法是資料切割(by group)
tmp_sep <- tmp %>% split(.$IID)
注意, split只能切單一索引, 如果你是複合索引(EX:性別+年齡),
那就要照我上面的方法, 先把IID算出來再用IID切


### 方案一: split+parLapply
data <- data %>%
        mutate(IID=group_indices_(., .dots=c(""grp_a"",""grp_b""))) %>%
        group_by(IID)
data_sep <- data %>% split(.$IID)
cl <- makeCluster(8)
out <- parLapply(cl, data_sep, to_this_fun, other_par)
stopCluster(cl)
out <- out %>% rbind_all() %>% distinct()


再來, 如果資料量大, 組數又多的時候, split 會做到天荒地老
這時候方案二出現了 mupltidplyr::partition & collect
他會在group_by的時候把資料平分到各個核心裡, 處理完之後再收回來黏起來
這個外掛還在開發中, 不知道有沒有靈異現象
另外很多function是parallel的wrap, 可能有些特別目的


### 方案二: partition & collect
cl <- create_cluster(8)  ## 這兩行要寫, 似乎是會註冊到自己的env中
set_default_cluster(cl)  ## 然後會自動回收
data_par <- data %>% partition(IID, cluster=cl) ## ""cluster=""要寫
cluster_assign_value(cluster=cl, ""myfun"", myfun) ## export function
out <- data_par %>% do(res=myfun(.)) %>% collect() ## 回收可能是collect觸發的


--","R_Language"
"1595","M.1459873660.A.999","Wush978","情報","R語言翻轉教室",2016-04-06 00:27:38,NA,NA,"[關鍵字]: R, 互動式, 自學, 教材

[出處]:http://www.datascienceandr.org[重點摘要]:

大家好，

這次R語言翻轉教室，是參考社群多次開辦R教學的心得，撰寫出來的一份「自學教材」、
「自學教材」、「自學教材」。

有興趣的版友可以到官網上去安裝課程與進行教材。這份教材也具有挑戰性，沒有程式基
礎的版友做完一次約12 ~ 18小時。有經驗的版友大約是6 ~12小時，並不輕鬆。我也有提
供聊天室，只要註冊github帳號就可以使用。有問題的版有都歡迎在聊天室中和我交流。
（但是我不保證能馬上回，有時候一忙可能就會拖到若干天）

如果版友比較喜歡在有人協助的狀況下學習，或是想要短期衝刺走完翻轉教室的教材，
再考慮報名這次的資料科學愛好者年會系列活動：http://dsc.kktix.cc/events/r-classroom4/7(日)中午開放報名


--","R_Language"
"1596","M.1459778711.A.16D","ehome","問題","Rstudio在Ubuntu中文輸入問題",2016-04-04 22:05:08,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)在Rstudio無法切換 中文輸入


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的安裝好Rstudio發現，發現無法切換中文輸入。
目前是使用fcitx 的輸入法系統，
爬文與google一整天，只有找到大陸網頁有談到相關資訊http://my.oschina.net/u/727594/blog/527589但是按照作法還是無法解決...

不知道大大們有沒有相關經驗＠＠

謝謝幫忙
[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 15.10locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C[3] LC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8[5] LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C[9] LC_ADDRESS=C               LC_TELEPHONE=C[11] LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] tools_3.2.2[關鍵字]:Rstudio, 中文輸入, Ubuntu15.10, fcitx--","R_Language"
"1597","M.1459576404.A.BBE","wep","問題","如何使用R讀取並儲存網頁數據(每30秒更新）",2016-04-02 13:53:22,NA,NA,"各位統計界的前輩們~

以下問題請教~

由於工作需求 需要使用R來進行網頁數據的讀取
並需要每30秒到1分鐘進行儲存更新(每次更新的數據保存起來)
建立成一個資料庫, 後續拿這些資料來進行logistic reggresion分析

請問該如何進行以上目的我知道讀取網頁可以使用XML package套件
require(XML)

theURL
bowPool
以上方法去抓到網頁上的表格數據  但是無法更新與儲存到R

先謝各位前輩了~



--","R_Language"
"1598","M.1459452162.A.659","naturalsmen","問題","shiny-用戶端輸入資料匯出dataframe",2016-04-01 03:22:36,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

各位安安~

小弟最近在用shiny寫一個線上分析的示範程式

過程中需要讓使用者能夠自行輸入(或用選單選擇)數字及文字

舉例來說：

學號  身高  體重  性別  喜歡的電影  ...

我理想中的形式有點像下面三種的結合1. handsontableexample:https://github.com/jrowen/rhandsontable或是

shiny::runGitHub(""jrowen/rhandsontable"",
                 subdir = ""inst/examples/rhandsontable_portfolio"")

如handsontable範例中factor的呈現方式最好─像是selectizeInput選單

缺點：使用者無法新增或減少列數2. shinyTablehttps://github.com/trestletech/shinyTableexample:http://pastie.org/10781067或是

runApp(system.file(""examples/01-simple"", package=""shinyTable""))

我想要的互動形式跟這個package比較像

他能夠回傳dataframe或matrix

但是不希望像他用輸入表格的方式(如範例上方表格)

而是用shiny的widgets像是checkboxInput, selectizeInput賦值

再用actionButton返回

缺點同上3. shinyIncubatorexample:http://pastie.org/10781069像這裡的matrixInput範例就能夠用+/-號來新增減少列數

但是!!! 他沒辦法用character 也不能回傳dataframe...orz



總而言之 我想呈現的東西在這裡都能找到一部份

但我想了很~~久還是不知道怎麼整合...

希望有大大可以幫忙 感恩~

如果我研究出來了會再來更新的

*補充: 因為是用widgets來pass value

只有一列的時候數值會跟著input變動

但若我新增一列後 第一列的值應該要固定 變成第二列的值跟著input變動


*10:30更新

已解決

參考範例：http://pastie.org/10781381[環境敘述]:
R version 3.2.1 (2015-06-18)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
 [1] shinyTable_0.1.0      quantmod_0.4-5        TTR_0.23-0            xts_0.9-7
 [5] zoo_1.7-12            reshape2_1.4.1        data.table_1.9.6      metricsgraphics_0.9.0
 [9] rhandsontable_0.3.0.2 shiny_0.13.2.9003     devtools_1.10.0.9000

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.3       magrittr_1.5      quantstrat_0.8.2  xtable_1.8-2      lattice_0.20-31
 [6] R6_2.1.2          stringr_1.0.0     plyr_1.8.3        httr_1.1.0        tools_3.2.1
[11] grid_3.2.1        withr_1.0.1       htmltools_0.3.5   yaml_2.1.13       digest_0.6.9
[16] blotter_0.9.1644  htmlwidgets_0.6   rsconnect_0.4.1.4 memoise_1.0.0     mime_0.4
[21] stringi_1.0-1     jsonlite_0.9.19   httpuv_1.3.3      chron_2.3-47


[關鍵字]:shiny, dataframe, interactive--","R_Language"
"1599","M.1459431458.A.08D","girl5566","問題","RSNNS中的ART一直R session aborted",2016-03-31 21:37:36,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

修改RSNNS的範例執行較大的矩陣後，會一直出現R session aborted

但記憶體都還充足  不知道要如何解決

[程式範例]:
library(RSNNS)

path <- './data/'
datafiles <- list.files(path)
patterns = NULL
for( file in datafiles){
  map = as.matrix(read.csv(paste(path, file,sep=''),header = F))
  temp = c(wafermap)
  patterns = rbind(waferpatterns,temp)
}
rownames(patterns) <- datafiles

model <- art1(patterns, dimX=63, dimY=50,maxit = 1)
encodeClassLabels(model$fitted.values)

[環境敘述]:

R3.2.2 win7 64bit 8G
[關鍵字]:選擇性，也許未來有用--","R_Language"
"1600","M.1459326247.A.8CC","hanglong","問題","以變數的方式儲存圖片",2016-03-30 16:23:55,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我目前有個需求，必須畫出多個圖片(上百張)，並將這些圖片儲存起來，但不可能每次都一個一個地去命名，不知道有沒有什麼辦法，可以用變數的方式做儲存？個人的程式碼如下：for(i in 1:200){setwd(""C:\\Users\\Desktop\\picture ex"")png(file = ""i.png"", width = 1266, height = 484)plot(1:i,1:i)dev.off()}這樣的程式碼，是可以畫出圖形來，並且儲存，但是只會儲存到最後一張圖，因為程式把""i""當作檔名，而不是變數，不知道有沒有辦法用變數的形式做儲存？[環境敘述]:R version 3.2.3 (2015-12-10)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows >= 8 x64 (build 9200)[關鍵字]:依照變數的方式儲存圖片--
當我們在球場上偶遇, 妳想聽什麼程度的事實?
                      50%的答案是說:我在練自由攻擊.
                      70%的答案是說:其實我想要每球都能定三米
                      90%的答案是說:每週二四我都會在這練球 想打個好成績.
而100%的真實是:
我想定進妳心裡. 即使一球也好.

--","R_Language"
"1601","M.1459297510.A.6F2","aee36900","問題","data frame 撈取特定條件資料",2016-03-30 08:25:08,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:手上有一個data frame資料c1是id,一個id有兩筆資料df格式如下c1   c2 c32356 12 652356 56 644589 26 014589 23 487852 53 517852 32 548963 56 218963 32 55我只需要撈取一部分的資料來做分析知道可以使用sample來隨機撈取資料但是有用到的id 那兩筆都需要選進來因此 我的想法是先針對c1取unique後,再從這些資料取sample當作我要撈取的條件取出來的就是我要用來分析用的資料我嘗試了用下面的指令要隨機撈2筆結果卻只有2筆資料,是不同的id(但我想要的結果應該是2個不同的id,4筆資料)df[df$c1==sample(unique(df$c1),2),]請問該怎樣敘述才會達到我的需求?[程式範例]:df = data.frame(c1 = c(2356,2356,4589,4589,7852,7852,8963,8963),c2 = c(12,56,26,23,53,32,56,32),c3 = c(65,64,01,48,51,54,21,55))df[df$c1==sample(unique(df$c1),2),]c1 c2 c34 4589 23 487 8963 56 21[關鍵字]:data frame unique select condition--","R_Language"
"1602","M.1459222847.A.60F","clansoda","問題","BTYD package",2016-03-29 11:40:43,NA,NA,"在網路上讀了一天的BTYD package walkthrough已經把大部分的概念都理解了

想問的是裡面有兩個period，分別是calibration(estimation)跟

holdout(validation) period，括號裡面是我爬他的PDF他說普遍的用法

請問這邊的定義是將自己已有的資料拆成estimation跟validation兩個部分

然後用前者去預測後者來評估自己這個模型是否有效嗎?

例如我有2014年到2016年的資料，那我就把2014年到2015年9月的資料設為

estimation period並且預測2015年9月到2016年的值，並且與實際值做比較

來評估此模型的適配度，請問我這個理解是否有錯誤。

第二個問題是裡面有一個fumction可以從原始資料直接轉換成cbs跟cbt

兩個型態，dc.elogtocbscbt這個function他是簡化前面的過程，我先照著

walkthrough走了一遍都沒問題，接著我用這個function來簡化

結果跑出來的t.x值，這個應該是最近一次購買時間到estimation結束時

的差異單位值，我的單位是week,因此值應該是正的1~70左右吧，但是跑出來有兩

千個值左右是負的，想請問為什麼會有負值的情況產生，我設定estimation

為2016-01-01,而validation為2016-03-01，順序應該沒錯，應該不會跑出負的值

請問版上有人有用過這套package來做預測嗎?

--","R_Language"
"1603","M.1459184274.A.A8B","f496328mm","問題","gmm中的J-test自由度是0",2016-03-29 00:57:51,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別
gmm(Generalized method of moment estimation)


[問題類型]:
J-test自由度的問題
[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

[程式範例]:http://imgur.com/PrXOTIS貼上我執行的結果

下面是code    如果這樣不方便看我再上傳.r檔

library(xlsx)
library(gmm)
options(digits=10)
#===============Australia=======================
data_Aus<-read.xlsx(file=""d:\\Dataset_5Countries_real-time.xlsx"", sheetIndex=2
,startRow=2,)
z_Aus=data_Aus[25:166,1:8]
z_Aus[,1]

d_Aus_p_t=rep(0,15)
d_Aus_s_t=rep(0,15)
d_Aus_i_t=rep(0,15)

Aus_p_t=z_Aus[1:142,5]#Inflationt+1
Aus_i_t=z_Aus[1:142,2]#InterestRate
Aus_s_t=z_Aus[1:142,8]#ExchangeRate


for(i in 1:141){
        d_Aus_p_t[i]=Aus_p_t[i+1]-Aus_p_t[i]
        d_Aus_s_t[i]=Aus_s_t[i+1]-Aus_s_t[i]
        d_Aus_i_t[i]=Aus_i_t[i+1]-Aus_i_t[i]
}
d_Aus_p_t_1=d_Aus_p_t[2:141]#dpt+1
d_Aus_s_t_1=d_Aus_s_t[2:141]#dst+1
d_Aus_p_i_1=d_Aus_i_t[2:141]#dit-1

d_Aus_p_t=d_Aus_p_t[1:140]
d_Aus_s_t=d_Aus_s_t[1:140]
d_Aus_i_t=d_Aus_i_t[1:140]


Aus_data=data.frame(dpt = d_Aus_p_t, dit = d_Aus_i_t ,dst = d_Aus_s_t,
dpt_1=d_Aus_p_t_1 ,dit_1=d_Aus_p_i_1, dst_1=d_Aus_s_t_1)

#======================================
#tet=[lambda  tau_q rho]
                #x=[dpt dit dst dpt+1 dit-1 dst+1]
g2 <- function(tet,x)
 {
tau_pi=1.5
 m1 = x[,4]-x[,6]-(1-tet[1])*x[,1]+(1-tet[1])*x[,3]

 m2 =
-(1-tet[1])*tau_pi*x[,4]+x[,6]+(1-tet[1])*(tet[3]*tau_pi+tet[2])*x[,1]-
(1-tet[1])*tet[2]*x[,3]-tet[1]*tet[3]*x[,5]

 m3 =(1-tet[1])*tau_pi*x[,4]-(1-tet[1])*(tet[3]*tau_pi+tet[2] )*x[,1]
+(1-tet[1])*tet[2]*x[,3]+tet[1]*tet[3]*x[,5]-tet[3]
 f <- cbind(m1,m2,m3)
 return(f)
 }
 t0 <- c(lambda=0 ,tau_q=0,rho=0)
 print(res <- gmm(g=g2,x=Aus_data,t0=t0))
summary(res)


[關鍵字]:
gmm

我算是新手..最近幾個月才開始用R
--","R_Language"
"1604","M.1459172562.A.977","girl5566","問題","nnet 是使用哪種neural network?",2016-03-28 21:42:36,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想請問 nnet這個package所使用的是哪一種的類神經網路?

[程式範例]:https://cran.r-project.org/web/packages/nnet/nnet.pdf--","R_Language"
"1605","M.1459017111.A.CF7","corel","問題","使用 crontab 排程要執行 R 程式",2016-03-27 02:31:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉) & linux 新手



[問題敘述]:

想要在 Linux底下用 crontab 排程 執行 R 程式

用 Rstudio 直接執行，就一切正常

但是換到用 crontab 設定排程就會產生錯誤..

主要是說 bitops 與 XML 套件找不到...!

請問是不是要把我所需要的套件設成 R 裡面預設的套件?

除require(""套件名稱"") 與 library(""套件名稱"")之外

有其它的做法嗎?




PS. 其實我有寫一個小程式來測試 crontab 來執行 R 程式, 執行結果是正常的...





以下為輸出的錯誤訊息:

Loading required package: bitops

Warning message:

In library(package, lib.loc = lib.loc, character.only = TRUE,

logical.return = TRUE,  :  there is no package called ‘bitops’


Loading required package: XML

Warning message:

In library(package, lib.loc = lib.loc, character.only = TRUE, logical.return =

TRUE,  :  there is no package called ‘XML’

Loading required package: RCurl

Warning message:In library(package, lib.loc = lib.loc, character.only

= TRUE, logical.return = TRUE,  :  there is no package called ‘RCurl’

Loading required package: DBI

Loading required package: methods

Loading required package: RMySQL

Error in library(bitops) : there is no package called ‘bitops’

停止執行



[環境敘述]:
請提供 sessionInfo() 的輸出結果，

R version 3.2.4 Revised (2016-03-16 r70336)

Platform: x86_64-pc-linux-gnu (64-bit)

Running under: Ubuntu 14.04.4 LTS

locale:

[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C        LC_TIME=zh_TW.UTF-8

[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8

[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C                  LC_ADDRESS=C

[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=C



attached base packages:

[1] stats     graphics grDevices utils     datasets  methods   base




other attached packages:

[1] RMySQL_0.10.8  DBI_0.3.1      RCurl_1.95-4.8 XML_3.98-1.4   bitops_1.0-6



loaded via a namespace (and not attached):

[1] tools_3.2.4




感謝各位大大

謝謝

--

--","R_Language"
"1606","M.1458874425.A.F98","k1992313","問題","rvest 以訪客進入八卦版(已解決)",2016-03-25 10:53:42,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
狀況 : 使用網頁版以訪客進入八卦版時
       會遇到被詢問是否滿18歲
       機器人就卡在這近不去了

問題 : 目前爬文也還沒找到相關辦法
       看到一個方式是設定COOKIE

       但想找找看有沒有回傳給網頁指令的方法
       PS:也可能是小的英文不好，看套件說明看不出所以然QQ

已解決，剛才搞懂cookie的用法

以下是rvest 存取cookie的用法https://github.com/dspim/R_Crawler_HTTP/blob/master/http_request.Rmd--","R_Language"
"1607","M.1458829533.A.675","bedroom0204","問題","批次讀取與處理之問題",2016-03-24 22:25:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
沒寫過程式...純新手，如果問題很笨，真的非常抱歉......我會再努力搞懂。

最近嘗試用R進行簡單的影像處理，
我有一份數據檔(.tsv)以及一堆影像檔(test1 00001.jpg~test1 21143.jpg)，
想根據數據檔中具有座標，
想依次讓影像檔產生濾鏡，也就是除了座標點的周圍外都黑的。

目前去搜尋了一些方法能製作單一張圖(但還是有點搞不懂意思)，
但是卻找不到批次處理多張圖片的方法。
有看到C++利用for(int i=0; i&lt;=10; i++){...再組合成字串的方式，
如果R的概念相同，那這個i是否也可以運用到下方的GPX上，
讓不同圖片可以對應到不同列的座標。

[程式範例]:http://ideone.com/Kyu4j3library(""jpeg"")
#針對特定座標以外的距離變黑
dat <-read.csv(""D:\\...\\MRT.tsv"",header=FALSE,stringsAsFactors=TRUE,sep=""\t"")
orgpic = readJPEG(""D:\\...\\old folder\\test1 00001.jpg"")

gazepoint<-function(orgpic,intensity)
{
  newpic=orgpic
  dx=dim(orgpic)[1]
  dy=dim(orgpic)[2]

  GPX=dat[2,35] #test1 00001.jpg需要第35行第2列之X座標
  GPY=dat[2,36] #test1 00001.jpg需要第36行第2列之Y座標
  #但test1 00002.jpg則需要第35與36行，第3列之X與Y座標

  intensity=max(c(dx,dy))
  D2=intensity^2/64

  for(i in 1:dx)
  {
    for(j in 1:dy)
    {
      d=(i-GPX)^2+(j-GPY)^2
      if(d>D2) newpic[i,j,]=newpic[i,j,]*exp(-(d-D2)/D2*intensity)
    }
  }
  return(newpic)
}
writeJPEG(gazepoint(orgpic), target =""D:\\...\\new folder\\test 00001.jpg"",
quality = 0.95)

--","R_Language"
"1608","M.1458825439.A.542","celestialgod","問題","Re: 迴圈中有迴圈 如何用apply系列函數完成",2016-03-24 21:17:16,NA,NA,"※ 引述《gbd37 (有夠瞎)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 如範例: 任意選取資料來跑for迴圈: 因原本所寫函數類似範例迴圈中有迴圈又有迴圈: 發現跑的效能速度很慢，想改善速度。: 知道可以運用apply函數，但試了幾次都無法跑出想要結果(除錯除好久@[email<U+00A0>protected]): 想請教大大們Orz，若是像範例code該如何不用for只用apply系列函數寫出來呢?: 還望指導，小弟必當認真學習: 謝謝: [程式範例]:: http://pastie.org/10772317: [環境敘述]:: win10 R:3.2.4: [關鍵字]:for apply這直接用矩陣乘法就可以搞定了，用apply不會快到哪去

datx <- as.matrix(iris[1:32,-5])
daty <- as.matrix(mtcars[,1:4])
result11 <- datx %*% t(datx)
all.equal(result1, result11, check.attributes = FALSE)
# TRUE

result21 <- datx %*% t(daty)
all.equal(result2, result21, check.attributes = FALSE)
# TRUE

--","R_Language"
"1609","M.1458824153.A.0E5","gbd37","問題","迴圈中有迴圈 如何用apply系列函數完成",2016-03-24 20:55:50,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

如範例

任意選取資料來跑for迴圈

因原本所寫函數類似範例迴圈中有迴圈又有迴圈

發現跑的效能速度很慢，想改善速度。

知道可以運用apply函數，但試了幾次都無法跑出想要結果(除錯除好久@[email<U+00A0>protected])

想請教大大們Orz，若是像範例code該如何不用for只用apply系列函數寫出來呢?

還望指導，小弟必當認真學習

謝謝


[程式範例]:http://pastie.org/10772317[環境敘述]:
win10 R:3.2.4

[關鍵字]:for apply

--","R_Language"
"1610","M.1458821301.A.348","celestialgod","問題","Re: 資料集搜尋",2016-03-24 20:08:17,NA,NA,"※ 引述《spiderway (spiderway)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 大概半年): [問題敘述]:: 有些基本的問題想很久都解決不了，懇請各位大大協助指導: 1.: e.g.,我有一個長度不一的txt: 1 2 3 4 5 6 7 8 9 10: 2 3 3 3 6 7 8: 1 3 4 5 6: 我用下列方法變成一個list，但是假如txt檔的量很大，像我只會一個一個打，有甚麼: 辦法可以處理: x <- readLines(""dat.txt""): list(x[1],x[2],x[3])不知道你是不是要這個：

(x <- as.list(readLines(textConnection(""1 2 3 4 5 6 7 8 9 10
2 3 3 3 6 7 8
1 3 4 5 6""))))
# [[1]]
# [1] ""1 2 3 4 5 6 7 8 9 10""
#
# [[2]]
# [1] ""2 3 3 3 6 7 8""
#
# [[3]]
# [1] ""1 3 4 5 6"": 2. 這個問題是我主要想問的，根據上面那個list我想要搜尋出有query=c(3,3,3)的那一個: index,就上面來看就是第二個，我換個方式表達像是假如我把上面那個變成table，我想要: 搜尋某三行符合是query的index，像我目前是直接開檔案用ctrl+f一個一個比非常花時間:   X1 X2 X3 X4 X5 X6 X7 X8 X9 X10: 1  1  2  3  4  5  6  7  8  9  10: 2  2  3* 3* 3* 6  7  8 NA NA  NA: 3  1  3  4  5  6 NA NA NA NA  NA: 以上是我兩個問題，謝謝library(zoo)
x2 <- lapply(x, function(y) as.integer(strsplit(y, ""\\s"")[[1]]))

query = c(3,3,3)
sapply(x2, function(y){
  any(rollapply(y, 3, function(v) all(v == query)))
})
# [1] FALSE  TRUE FALSE: [環境敘述]:: R version 3.2.2 (2015-08-14): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: [關鍵字]:: 選擇性，也許未來有用--","R_Language"
"1611","M.1458811109.A.403","spiderway","問題","資料集搜尋",2016-03-24 17:18:20,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 大概半年)

[問題敘述]:
有些基本的問題想很久都解決不了，懇請各位大大協助指導
1.
e.g.,我有一個長度不一的txt
1 2 3 4 5 6 7 8 9 10
2 3 3 3 6 7 8
1 3 4 5 6
我用下列方法變成一個list，但是假如txt檔的量很大，像我只會一個一個打，有甚麼
辦法可以處理
x <- readLines(""dat.txt"")
list(x[1],x[2],x[3])

2. 這個問題是我主要想問的，根據上面那個list我想要搜尋出有query=c(3,3,3)的那一個
index,就上面來看就是第二個，我換個方式表達像是假如我把上面那個變成table，我想要
搜尋某三行符合是query的index，像我目前是直接開檔案用ctrl+f一個一個比非常花時間
  X1 X2 X3 X4 X5 X6 X7 X8 X9 X10
1  1  2  3  4  5  6  7  8  9  10
2  2  3* 3* 3* 6  7  8 NA NA  NA
3  1  3  4  5  6 NA NA NA NA  NA

以上是我兩個問題，謝謝
[環境敘述]:
R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

[關鍵字]:

選擇性，也許未來有用

--
Sent from my ibon.

--","R_Language"
"1612","M.1458759316.A.5BC","BENNY49","問題","heatmap固定顏色區間",2016-03-24 02:55:12,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我有兩個矩陣想做heapmap,是用pheatmap來做,想把其中的預設顏色區間複製給另一個矩陣使用,也就是希望兩個矩陣值-0.3到0.3有一樣的顏色,不因極值不同而顏色跑掉,目前兩個圖用相同顏色區間我能做了,想問的是pheatmap的預設顏色區間寫法想要的顏色：http://imgur.com/XTCOFtd自己做的不滿意：http://imgur.com/vA4vA0A感謝版友先進不吝賜教 謝謝！[程式範例]:
以下是自己的寫法 求改進library(pheatmap)bk <- c(seq(-0.4, -0.005, length=99), 0, seq(0.005, 0.4, length=100))col1 <- colorRampPalette(c(""blue"", 'white'))(99)col2 <- ""white""col3 <- colorRampPalette(c(""white"", ""red""))(101)colors <- c(col1, col2, col3)pheatmap(matrix(sample(seq(-0.4,0.4,0.01),1e2,replace = T),nrow=10,ncol=10),color=colors,breaks=bk,scale=""none"",cluster_rows=F,cluster_cols=F)[關鍵字]:heatmap, color interval--","R_Language"
"1613","M.1458690883.A.6C3","ga757494","問題","請教關聯規則一些問題",2016-03-23 07:54:41,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

arules/inspect/... 相關的code已經會使用, 但遇到一些資料處理的問題
想請教版友


(1)  itemA  itemB  itemC  itemD  itemE
       1      0      NA     NA     0
      NA      1      0      0      NA
       0      NA     1      1      1

     以上面的資料舉例,我想要移除NA值但不想有一個出現NA就整行刪除(資料就全沒了)
     如程式在跑A,B的rule時,就保留第一筆. 跑B,C,D的rule,就保留第2筆.
     想請問怎麼寫呢 (P.S 有試過na.rm=T)

(2) inspect(rule)可以列出規則/support/confidence

    想請問怎麼把規則存取下來,因為inspect(rule)的資料型態好像不是矩陣,向量..
    所以無法write.csv把它存下來.


以上這兩問題,請教版友 ~~  謝謝!!






--","R_Language"
"1614","M.1458660821.A.E77","loser113","問題","system.time 指令只要數字",2016-03-22 23:33:38,NA,NA,"system.time(A)

 user  system elapsed
      x      y       z


我只要z值 請指教謝謝

--","R_Language"
"1615","M.1458630164.A.3E0","celestialgod","問題","Re: 關於線性的近似方法 有點怪",2016-03-22 15:02:40,NA,NA,"※ 引述《jackhzt (巴克球)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:piecewise linear approximation(PLA):            目的:使用線性的方式，切割一個序列 ( 時間序列):            目標方法: 簡單來說連結起點和終點， 依時間依序比較點和線的距離:            太大就將點和終點連線， 以新的線再依序和接下來的點比距離， 重複做:            以下是原文敘述::            http://imgur.com/eUcKxg6:            http://imgur.com/BLbYeyJ:            問題:: (step1):: Input time series Q(i : j) and threshold value ""error"". A vector Bp: is used to restore the breakpoints. ""k"" records the number of: the present breakpoints. ""pos"" denotes the position of the: newest breakpoint.: Initially, i = 1, j = m, where m is the length of time series.: Since the first point and the last point: are the special breakpoints, let k = 2, Bp(1) = q1 and: Bp(2) = qm.: (step2):: For time series Q(i : j), create line segment L(i : j) according: to the formula (6). Set two variables l = i + 1 and: best_so_far = 0. *公式6在我的程式碼中有付: (step3):: Calculate the distance of point ql to the line segment L(i : j),: that is D(ql,L(i : j)).: (step4):: If D(ql,L(i : j)) > best_so_far, best_so_far = D(ql,L(i : j)) and: pos = l.: (step5):: l = l + 1. If l>=j, go to the step 6; otherwise, go back to step3.: (step6):: If best_so_farPe, k = k + 1, Bp(k) = q_pos, go back to the Step: 2 and let the two subsequences Q(i : pos) and Q(pos : j): redo the step 2 to step 6, respectively.: (step7):: Sort the element of vector Bp by an ascending time and: output the sorted result.: 出自:http://tinyurl.com/hhosdmk -3.1: 1.我的程式碼看起來有點問題，尤其是step 6這地方不太會表示，有高手可以解惑嗎?: 2.有沒有比較正常的打法?我的打法好像問題很大: 3.package方面有試過一些，但是有辦法表達和上面敘述一樣的package目前好像沒找到: 程式碼可貼於以下網站： http://ideone.com/TOEISf: 求高手救援我不確定我有做對，看圖應該是對了

基本上這個要套用遞迴才能解決

程式如下：

好讀版：http://pastebin.com/95ATSHHVq<-c(18, 15, 24, 23, 18, 22, 19, 29, 22, 25, 20, 19, 18, 20, 26, 32,
     26, 26, 34, 29, 23, 34, 22, 19, 21, 19, 34, 23, 23, 23, 30, 21,
     15, 29, 32, 19, 21, 28, 22, 32, 29, 25, 28, 28, 23, 12, 26, 24,
     27, 14, 38, 27, 28, 25, 38, 34, 25, 37, 15, 28, 15, 23, 23, 28,
     15, 15, 19, 25, 28, 16, 19, 17, 23, 19, 16, 18, 18, 17, 20, 18,
     21, 13, 11, 12, 13, 16, 13, 16, 10, 13, 14,  6, 19, 18, 19, 15,
     17,  6, 14, 28, 15, 20, 16, 12)

# distance function
dis_f <- function(t, q, i, j){
  a <- (q[j]-q[i])/(j-i)
  abs((q[i]*j-q[j]*i)/(j-i) + a * t - q[t]) / sqrt(a^2 + 1)
}

pla <- function(q, i, j, time, eplison){
  if (i > j || j - i <= 1)
    return(sort(time))

  # find the maximum distance (Following two lines represents the Step 3~5)
  dis_t <- dis_f((i+1):(j-1), q, i, j) # calculate distance of qi~qj
  loc <- which.max(dis_t)
  # find the position
  pos <- i + loc
  # record the position
  best_so_far <- dis_t[loc]
  # print the segment
  cat(sprintf(""segment: %i, %i, %.2f\n"", i, j, best_so_far))
  # Step 6: find more segments
  if (best_so_far >= eplison)
  {
    # record the time
    time <- c(time, pos)
    if (pos < j)
    {
      time <- pla(q, i, pos, time, eplison)
      time <- pla(q, pos, j, time, eplison)
    }
  }
  return(sort(time))
}
# calculate eplison
eplison <- sd(dis_f(1:length(q), q, 1, length(q)))
time <- pla(q, 1, length(q), c(1, length(q)), eplison)

plot(1:length(q), q,type=""o"")
lines(time, q[time], col = 2)

--","R_Language"
"1616","M.1458617728.A.A17","jackhzt","問題","關於線性的近似方法 有點怪",2016-03-22 11:35:25,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:piecewise linear approximation(PLA)
           目的:使用線性的方式，切割一個序列 ( 時間序列)
           目標方法: 簡單來說連結起點和終點， 依時間依序比較點和線的距離
           太大就將點和終點連線， 以新的線再依序和接下來的點比距離， 重複做
           以下是原文敘述:http://imgur.com/eUcKxg6http://imgur.com/BLbYeyJ問題:
(step1):
Input time series Q(i : j) and threshold value ""error"". A vector Bp
is used to restore the breakpoints. ""k"" records the number of
the present breakpoints. ""pos"" denotes the position of the
newest breakpoint.
Initially, i = 1, j = m, where m is the length of time series.
Since the first point and the last point
are the special breakpoints, let k = 2, Bp(1) = q1 and
Bp(2) = qm.

(step2):
For time series Q(i : j), create line segment L(i : j) according
to the formula (6). Set two variables l = i + 1 and
best_so_far = 0. *公式6在我的程式碼中有付

(step3):
Calculate the distance of point ql to the line segment L(i : j),
that is D(ql,L(i : j)).

(step4):
If D(ql,L(i : j)) > best_so_far, best_so_far = D(ql,L(i : j)) and
pos = l.

(step5):
l = l + 1. If l>=j, go to the step 6; otherwise, go back to step3.

(step6):
If best_so_farPe, k = k + 1, Bp(k) = q_pos, go back to the Step
2 and let the two subsequences Q(i : pos) and Q(pos : j)
redo the step 2 to step 6, respectively.

(step7):
Sort the element of vector Bp by an ascending time and
output the sorted result.

出自:http://tinyurl.com/hhosdmk-3.1

1.我的程式碼看起來有點問題，尤其是step 6這地方不太會表示，有高手可以解惑嗎?
2.有沒有比較正常的打法?我的打法好像問題很大
3.package方面有試過一些，但是有辦法表達和上面敘述一樣的package目前好像沒找到

程式碼可貼於以下網站：http://ideone.com/TOEISf求高手救援

--","R_Language"
"1617","M.1458616219.A.85B","clansoda","問題","顏色代表性的問題",2016-03-22 11:10:13,NA,NA,"各位好，我今天是想問一個看起來好像很簡單的問題

但是我在google跟stackoverflow怎麼打都找不到我要的答案

我正在用kmeans對資料做分類，結果也很理想的跑了報名

結果長這樣，http://i.imgur.com/FqHA9eq.jpg，就在我想看一下各組大概有什麼特性的時候，突然發現我根本不知道各種顏色代表哪一種

如果我想在右下角跑出一個label代表的圖該要怎麼做呢?

像是pink=1，grey=2，類似這樣的概念，用顏色代表數字也可以

不然我無法分辨各組的差異，感謝各位的幫忙。

--","R_Language"
"1618","M.1458612849.A.E29","pttchiung","問題","關於函數nolptr，解的小數位數設定",2016-03-22 10:14:06,NA,NA,"各位好，
我想請問一下有沒有人用過nloptr這個函數找解(for nonlinear optimization)
他在找解的時候我有辦法設定找到解的小數位數嗎? 沒有設定的話他會找到小數6~7位，我在想不是如果我可以設定他只要找小數第二位，是不是可以找得比較快。(我的目標也只是要他找到小數第二位而已)
但是我查不到設定的地方，有人可以幫我嗎~
感謝大大><


--","R_Language"
"1619","M.1458548400.A.66C","celestialgod","問題","Re: R的向量運算",2016-03-21 16:19:55,NA,NA,"※ 引述《a78998042a (Benjimine)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我需要將程式向量化: 使用迴圈、apply系列的函數太慢了: 但不用apply又做不出來: 想詢問大家的經驗: [程式範例]:: ###vactor的問題: #我想將一個向量分別加上一個數字: x = 1:3: y = rep(0, 3): #我想得到類似下面結果，但不用apply, 不用迴圈的做法: sapply(x, function(x) y + x, simplify = FALSE): [[1]]: [1] 1 1 1: [[2]]: [1] 2 2 2: [[3]]: [1] 3 3 3我猶豫了一下要怎麼回你XD

不過我覺得sapply, lapply夠快了，而且for也很好用

我寫了一個簡單的測試，我不認為這會是你程式速度的瓶頸：

PS: 相信你的y不是全部0，不然用mapply + rep最快

y <- 1:3e4
x <- 1:1e4

st <- proc.time()
z1 <- sweep(array(y, c(length(y), length(x))), 2, x, '+')
proc.time() - st
#   user  system elapsed
#   8.72    0.45    9.19

st <- proc.time()
z2 <- sapply(x, function(xi) y + xi)
proc.time() - st
#   user  system elapsed
#   3.32    0.48    3.83
all.equal(z1, z2) # TRUE

st <- proc.time()
z12 <- sweep(matrix(rep(y, length(x)), length(y)), 2, x, '+')
proc.time() - st
#   user  system elapsed
#   8.93    1.10   10.05
all.equal(z1, z12)

st <- proc.time()
z22 <- sapply(x, function(xi) y + xi, simplify = FALSE)
proc.time() - st
#   user  system elapsed
#   0.58    0.45    1.05

st <- proc.time()
z3 <- lapply(x, function(xi) y + xi)
proc.time() - st
#   user  system elapsed
#   0.53    0.17    0.70
all.equal(z22, z3) # TRUE

st <- proc.time()
z4 <- vector('list', length(x))
for (i in seq_along(x))
  z4[[i]] <- y + x[i]
proc.time() - st
#   user  system elapsed
#   0.61    0.04    0.65
all.equal(z4, z3) # TRUE: ###array的問題: #我想將array不同維度的物件，扣除不同數字: temp.ar = array(matrix(0, 2, 3), c(2, 3, 2)): #我想得到類似下面的結果: sapply(1:2, function(x)temp.ar[,,x] + x,simplify = FALSE): [[1]]:      [,1]  [,2]  [,3]: [1,]    1     1     1: [2,]    1     1     1: [[2]]:      [,1]  [,2]  [,3]: [1,]    2     2     2: [2,]    2     2     2: #另一個問題是，sapply會將物件轉成list，增加後續處理上的難度: #例如我無法直接對list取round: #使用sapply的simplify又會將破壞結構，之後可能需要再重新架構: #但如果結構是array就可以直接做一些函數運算: #不知道大家有這方面的經驗可以分享嗎: #謝謝!arr <- array(0, c(2, 3, 1e4))
st <- proc.time()
z <- sweep(arr, 3, 1:1e4, '+')
proc.time() - st
#   user  system elapsed
#   0.00    0.02    0.02


--","R_Language"
"1620","M.1458546680.A.CC4","a78998042a","問題","R的向量運算",2016-03-21 15:50:58,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我需要將程式向量化
使用迴圈、apply系列的函數太慢了
但不用apply又做不出來
想詢問大家的經驗

[程式範例]:
###vactor的問題
#我想將一個向量分別加上一個數字

x = 1:3
y = rep(0, 3)

#我想得到類似下面結果，但不用apply, 不用迴圈的做法
sapply(x, function(x) y + x, simplify = FALSE)
[[1]]
[1] 1 1 1

[[2]]
[1] 2 2 2

[[3]]
[1] 3 3 3

###array的問題
#我想將array不同維度的物件，扣除不同數字
temp.ar = array(matrix(0, 2, 3), c(2, 3, 2))

#我想得到類似下面的結果
sapply(1:2, function(x)temp.ar[,,x] + x,simplify = FALSE)

[[1]]
     [,1]  [,2]  [,3]
[1,]    1     1     1
[2,]    1     1     1

[[2]]
     [,1]  [,2]  [,3]
[1,]    2     2     2
[2,]    2     2     2

#另一個問題是，sapply會將物件轉成list，增加後續處理上的難度
#例如我無法直接對list取round
#使用sapply的simplify又會將破壞結構，之後可能需要再重新架構

#但如果結構是array就可以直接做一些函數運算
#不知道大家有這方面的經驗可以分享嗎
#謝謝!

--

--","R_Language"
"1621","M.1458544213.A.B30","wheado","問題","新手爬蟲post cookie問題",2016-03-21 15:10:10,NA,NA,"問題是這樣子，前陣子套件httr似乎有經過一些改變，

似乎採用了比較新的套件xml2裡面的函數，

因此，再爬取PTT八卦版文章出現了錯誤，

無法再使用httr的指令set_cookie(""over18""=""1"")

搭配xpathSApply來抓取八卦板index跟裡面的文章內容。

所以想從RCurl套件中做一個Post的動作，

從網路上看高手用Python可以很輕鬆的就解決，

可是自己GOOGLE卻找不到用R解決的辦法QQ

不懂cookie這種東西是如何運作?

要如何用R讓他運作?

一些關鍵字: RCurl cookiefile cookiejar postForm


--","R_Language"
"1622","M.1458498874.A.116","jackhzt","問題","如何看到它是怎麼分群的?",2016-03-21 02:34:31,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:關於dtwclust這個套件，請問一下我要怎知道他的分群狀況?
依他的範例，是將資料分成20組，那要如何讀取其中是誰屬於哪一組?

[程式範例]:http://tinyurl.com/jr7sm5y程式碼可貼於以下網站：


--","R_Language"
"1623","M.1458476621.A.E86","celestialgod","問題","Re: 如何將資料分類",2016-03-20 20:23:37,NA,NA,"※ 引述《SleepyChink (SleepyChink)》之銘言：: [問題類型]:: 我想用R做一件事，但不知道如何完成。: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]::    X Y Z Val: 1 1 1 1   1: 2 2 1 1   0: 3 1 2 1   0: 4 2 2 1   0: 5 1 1 2   1: 6 2 1 2   1: 7 1 2 2   1: 8 2 2 2   0: 要如何將資料按照Val分成兩組連續資料?: 大概成為下列樣式: Val.   0.     1.:           2.     1.:           1.     1.:           1.     1.:           1.     1.:           2.     1.:           1.     2.: 以此類推資料長度不會一樣，不足可以以0補齊嗎？: 麻煩大家幫忙解惑一下，遇過幾次感覺應該是基本的資料處理，但依舊卡以剛開始學習請: 多多包涵。: 謝謝:


library(data.table)
library(magrittr)
library(plyr)
library(dplyr)
library(tidyr)

dat <- fread('
X Y Z Val
1 1 1   1
2 1 1   0
1 2 1   0
2 2 1   0
1 1 2   1
2 1 2   1
1 2 2   1
2 2 2   0') %>% tbl_dt

# dplyr
gather(dat, cate1, cate2, -Val)
# Source: local data table [24 x 3]
#
#      Val cate1 cate2
#    (int) (chr) (int)
# 1      1     X     1
# 2      0     X     2
# 3      0     X     1
# 4      0     X     2
# 5      1     X     1
# 6      1     X     2
# 7      1     X     1
# 8      0     X     2
# 9      1     Y     1
# 10     0     Y     1
# ..   ...   ...   ...

# stack
dat %<>% tbl_df # data.table不能用stack，轉成data.frame
stack(dat, -Val) %>% cbind(rep(dat$Val, 3))
#    values ind rep(dat$Val, 3)
# 1       1   X               1
# 2       2   X               0
# 3       1   X               0
# 4       2   X               0
# 5       1   X               1
# 6       2   X               1
# 7       1   X               1
# 8       2   X               0
# 9       1   Y               1
# 10      1   Y               0
# 11      2   Y               0
# 12      2   Y               0
# 13      1   Y               1
# 14      1   Y               1
# 15      2   Y               1
# 16      2   Y               0
# 17      1   Z               1
# 18      1   Z               0
# 19      1   Z               0
# 20      1   Z               0
# 21      2   Z               1
# 22      2   Z               1
# 23      2   Z               1
# 24      2   Z               0


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1624","M.1458476611.A.E70","hakiooi","問題","中文字串不正常顯示（非亂碼）",2016-03-20 20:23:28,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別)[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
R的超級新手，因為平常都用stata，目前只有爬蟲和圖像化會使用到。
不過目前有點不太懂，為什麼平常匯入資料，中文都會像這樣？http://imgur.com/Ihjwz7a爬文發現很多人都是寫亂碼，而不是這種狀況。我猜是編碼問題，但我該怎麼改呢？


麻煩了∼


[程式範例]:data->read.dta(""PATH"")[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:選擇性，也許未來有用--","R_Language"
"1625","M.1458476010.A.AD3","bcs","問題","爬主計處資料的packages",2016-03-20 20:13:25,NA,NA,"我想從主計處的資料庫捉取資料

捉取的過程如下圖，http://imgur.com/EDDByMx我知道python的爬蟲,但不知道R哪些packages

能夠幫助我實現從資料庫中捉取資料表單。

新手入門，請板友推薦不錯的packages或是有類例的

網頁教學也行。

感謝:)


--","R_Language"
"1626","M.1458463125.A.213","SleepyChink","問題","如何將資料分類",2016-03-20 16:38:42,NA,NA,"[問題類型]:

我想用R做一件事，但不知道如何完成。


[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
   X Y Z Val
1 1 1 1   1
2 2 1 1   0
3 1 2 1   0
4 2 2 1   0
5 1 1 2   1
6 2 1 2   1
7 1 2 2   1
8 2 2 2   0


要如何將資料按照Val分成兩組連續資料?
大概成為下列樣式
Val.   0.     1.
          2.     1.
          1.     1.
          1.     1.
          1.     1.
          2.     1.
          1.     2.
以此類推資料長度不會一樣，不足可以以0補齊嗎？

麻煩大家幫忙解惑一下，遇過幾次感覺應該是基本的資料處理，但依舊卡以剛開始學習請
多多包涵。

謝謝



--
Sent from my Android

--","R_Language"
"1627","M.1458354708.A.6E3","blackyu","問題","data frame轉corpus前過濾非英文字詞",2016-03-19 10:31:46,NA,NA,"[問題類型]: 程式諮詢

[軟體熟悉度]: 入門

[問題敘述]:

大家好，我現在處理data frame時遇到一個問題

我從資料庫取出資料後存為data frame的形式

但裡面內容語言部份是簡體中文、日文等，例如

        text
     1  今天天氣很好...
     2  It's good但是...

我現在需要把非英文的字詞在轉入corpus前先行過濾掉

之前有去stackoverflow找相關的解決辦法

目前有找到一篇http://goo.gl/arqKWi但是我不太熟如何將data frame先拆解後再過濾

請問有什麼方法可以協助我解決這個問題呢？

謝謝各位！

[環境敘述]: R ver 3.2.3；套件：RMySQL & tm

--","R_Language"
"1628","M.1458267049.A.B4A","clansoda","問題","facebook data",2016-03-18 10:10:44,NA,NA,"因為目前有需求，所以想要抓facebook上的data

目前用過Rfacebook搭配它的API來抓取

可是我連抓朋友的list的有問題，我看網路上是說要朋友也授權給graph api exploer

才能抓他們的名單，可是我怎麼可能一個一個去要他們給予授權，覺得很不合理

也看了一下Rcurl的方法，但是這個我對於語法跟html的編寫方式都很不了解

不知道各位有沒有什麼方法或package是能夠從facebook上抓到關於post跟like這類的

資料，因為是要分析fanpage而用的。

--","R_Language"
"1629","M.1458237598.A.088","celestialgod","問題","Re: 去除重複值",2016-03-18 01:59:54,NA,NA,"※ 引述《tHEiPHoNe ( )》之銘言：: 請問有一組資料: 紀錄user點擊item紀錄: 同一個user想踢除相鄰的重複值: 如下: id click: 1  a: 1  a ->重複: 1  b: 1  a: 1  c: 1  c ->重複: 1  a: 1  a ->重複: 1  b: 1  b ->重複: 1  b ->重複: 1  a: 2  a: 2  a ->重複: 2  b: 2  c: 2  a: 2  b: 2  c: 請問該如何處理呢？: 謝謝好讀版：http://pastebin.com/tC7U6MqTlibrary(data.table)
library(magrittr)
DT <- fread('
id click
1  a
1  a
1  b
1  a
1  c
1  c
1  a
1  a
1  b
1  b
1  b
1  a
2  a
2  a
2  b
2  c
2  a
2  b
2  c')

indx <- DT %$% paste0(id, click) %>% rle %$%
  cumsum(c(1, lengths)) %>% .[1:(length(.)-1)]
DT[indx, ]
#     id click
#  1:  1     a
#  2:  1     b
#  3:  1     a
#  4:  1     c
#  5:  1     a
#  6:  1     b
#  7:  1     a
#  8:  2     a
#  9:  2     b
# 10:  2     c
# 11:  2     a
# 12:  2     b
# 13:  2     c


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1630","M.1458236903.A.9AC","tHEiPHoNe","問題","去除重複值",2016-03-18 01:48:20,NA,NA,"請問有一組資料
紀錄user點擊item紀錄
同一個user想踢除相鄰的重複值
如下
id click
1  a
1  a ->重複
1  b
1  a
1  c
1  c ->重複
1  a
1  a ->重複
1  b
1  b ->重複
1  b ->重複
1  a
2  a
2  a ->重複
2  b
2  c
2  a
2  b
2  c

請問該如何處理呢？
謝謝

--","R_Language"
"1631","M.1458232801.A.127","celestialgod","問題","Re: parSapply問題",2016-03-18 00:39:58,NA,NA,"※ 引述《SFMAndroid (安卓發送)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 爬PTT文章，原本是用sapply加上自定義函數，: 但實在跑太久，想說用snow::parSapply會不會比較快，: 但一直遇到問題@@: 除了找不到所有httr裡的函數外: 即使用clusterEvalQ把所有未定義的函數都定義後，: 就出現is.url(url) is not true的無限輪迴...: 但改回用sapply除了跑很久外完全正常，: 請問有沒有大大知道該怎麼辦??: 感謝~: [程式範例]::: https://gist.github.com/anonymous/a45f6d04254adb27e64a:: [環境敘述]::: R version 3.2.1 (2015-06-18): Platform: i386-w64-mingw32/i386 (32-bit): Running under: Windows 8 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] parallel  stats     graphics  grDevices utils     datasets  methods   base:: [關鍵字]::: snow, parallel computing:

不要去寫入硬碟在讀取，我不確定在平行時候開啟硬碟讀取會不會出事...

但是我覺得你可以不用去寫入硬碟，再重新讀入虛耗時間...

好讀版：http://pastebin.com/TKN2jWHr然後我也不推薦用XML，我比較建議使用xml2 參考#1MbXOkFc (R_Language)library(xml2)
library(RCurl)
library(magrittr)
library(stringi)

i <- 2793
data <- NULL
repeat{
  url.list <- try(paste(i, '.html', sep='') %>%
    paste('https://www.ptt.cc/bbs/Boy-Girl/index',., sep='') %>%
    xml2::read_html() %>%
    xml2::xml_find_all(""//div[@class='title']/a[@href]"") %>%
    xml2::xml_attr(""href""), silent = TRUE)
  if (any(grepl(""Error"", url.list)))
    break
  data %<>% c(url.list)
  i <- i + 1
}
data %<>% paste('https://www.ptt.cc',., sep='')

getDoc <- function(line){
  xml2::read_html(line, ""UTF-8"") %>%
    xml2::xml_find_one(""//div[@id='main-content']"") %>%
    xml_text %>% stri_conv(""UTF-8"", ""Big5"")
  # stri_conv for windows
}

st <- proc.time()
articles <- sapply(data, getDoc)
proc.time() - st
# user  system elapsed
# 3.35    3.70    7.21

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1632","M.1458197300.A.FE5","SFMAndroid","問題","parSapply問題",2016-03-17 14:48:16,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的爬PTT文章，原本是用sapply加上自定義函數，

但實在跑太久，想說用snow::parSapply會不會比較快，

但一直遇到問題@@

除了找不到所有httr裡的函數外

即使用clusterEvalQ把所有未定義的函數都定義後，

就出現is.url(url) is not true的無限輪迴...

但改回用sapply除了跑很久外完全正常，

請問有沒有大大知道該怎麼辦??

感謝~

[程式範例]:https://gist.github.com/anonymous/a45f6d04254adb27e64a[環境敘述]:R version 3.2.1 (2015-06-18)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950[4] LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] parallel  stats     graphics  grDevices utils     datasets  methods   base[關鍵字]:snow, parallel computing--","R_Language"
"1633","M.1458134116.A.6B0","xyz6206a","問題","新手R爬蟲問題",2016-03-16 21:15:11,NA,NA,"各位R前輩大家好! 我最近開始練習用R寫爬蟲(也是第一次寫爬蟲)
因為本身經驗不足一直卡卡的~~
我想要爬以下這個網站https://global.factiva.com/np/default.aspx?NAPC=P&inpt=Factiva我想要爬裡面的新聞資料，但我不清楚開怎麼設XPATH
網站新聞圖給各位做參考http://imgur.com/L3Yg4Xe所以我試著用/html/body
結果爬不出東西。

我再附上我自己寫的一小段給大家點評，希望大家
能指出我有什麼地方錯誤，謝謝。

library(XML)
>
res=GET(url=""https://global.factiva.com/ha/default.aspx?ftx=died#./!?&_suid=1458132523982001469636911677985"")> xml=htmlParse(res,encoding=""UTF-8"")> xpath=""/html/body""> text=xml[xpath]> print(text)[[1]]
<body class="""">
  <script type=""text/javascript"">
<![CDATA[


<!--


document.location = '//global.factiva.com/';


// -->
]]>
  </script>
</body>

attr(,""class"")
[1] ""XMLNodeSet""

結果爬不出東西來~~~~

第一次在這邊發文，請大家多多指教!


--","R_Language"
"1634","M.1458115949.A.FF4","celestialgod","問題","Re: dataframe轉換list col name問題",2016-03-16 16:12:25,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 各位好，我又突然冒出奇怪的問題了: 首先我有個dataframe例如像:    god1 god2 god3: 1  長髮 酷酷 漂亮: 2  俊美 長髮 果斷: 3  跳舞 漂亮 跳躍: 我將想將她轉換成list[1] ""長髮""""酷酷""""漂亮"":                     [2] ""俊美""""長髮""""果斷"":                     [3] ""跳舞""""漂亮""""跳躍"": 但是轉換的過程中會變成 [1] god1 god2 god3:                            長髮 酷酷 漂亮: 但是我不想要colname在上面，但是dataframe的colname不得為空白因此我很苦惱: 如果list是這樣寫進去就不會有這個煩惱了: a_list <- list(: c(""a"",""b"",""c""),: c(""a"",""b""),: c(""a"",""b"",""d""),: c(""c"",""e""),: c(""a"",""b"",""d"",""e""): ): 不知道有沒有人知道這怎麼解決呢library(magrittr)  # %>%, set_names
library(purrr)     # map, transpose

aList <- data.frame(x = 1:3, y = 2:4, z = 3:5)
aList %>% map(as.list) %>% transpose %>%
  map(~do.call(c, .) %>% set_names(NULL))
# [[1]]
# [1] 1 2 3
#
# [[2]]
# [1] 2 3 4
#
# [[3]]
# [1] 3 4 5


--","R_Language"
"1635","M.1458112850.A.CAD","clansoda","問題","dataframe轉換list col name問題",2016-03-16 15:20:46,NA,NA,"各位好，我又突然冒出奇怪的問題了

首先我有個dataframe例如像

   god1 god2 god3

1  長髮 酷酷 漂亮

2  俊美 長髮 果斷

3  跳舞 漂亮 跳躍

我將想將她轉換成list[1] ""長髮""""酷酷""""漂亮""
                    [2] ""俊美""""長髮""""果斷""
                    [3] ""跳舞""""漂亮""""跳躍""

但是轉換的過程中會變成 [1] god1 god2 god3
                           長髮 酷酷 漂亮

但是我不想要colname在上面，但是dataframe的colname不得為空白因此我很苦惱

如果list是這樣寫進去就不會有這個煩惱了

a_list <- list(
c(""a"",""b"",""c""),
c(""a"",""b""),
c(""a"",""b"",""d""),
c(""c"",""e""),
c(""a"",""b"",""d"",""e"")
)

不知道有沒有人知道這怎麼解決呢

--","R_Language"
"1636","M.1458106217.A.266","dodo4218","問題","R原文書購買管道",2016-03-16 13:30:14,NA,NA,"不知道有沒有版友有這本

書名: Statistical Computing with R
作者: Rizzo, Maria L.

喜歡實體書的感覺,在網路上找不到購買的途徑
想詢問大家是否有購買的途徑、代理書商,或是願意割愛~

謝謝

--","R_Language"
"1637","M.1458100887.A.D34","celestialgod","問題","Re: 關於使用者自行輸入值的問題",2016-03-16 12:01:23,NA,NA,"※ 引述《HumuHumu (呼姆呼姆)》之銘言：: 請問我要怎麼寫一個程式如下：: 使用者自行輸入一個數字，顯示所有小於此數的質數？: 有查到是用readline: 可是我寫好以後: 他不等我輸入完數字就直接跑後面的程式: 我的目標是：畫面出現""請輸入質數上限""後: 我輸入一個數字，才開始顯示小於此數的所有質數: 我寫的檢視質數程式碼如下(目前質數上限為100，我想要讓這個100可以使用者自行輸入):: library(numbers): x=1: while (x<=100){:   if(isPrime(x)==TRUE){:     print(x):     x=x+1:   }else{:       x=x+1:     }: }: 小弟還是初學者，請多包涵: -----: Sent from JPTT on my HTC_B810x.library(numbers)
print_primes_f <- function(){
  n <- readline(prompt=""Enter an integer: "")
  Primes(2L, as.integer(n))
}
print_primes_f()
# Enter an integer: 100
#  [1]  2  3  5  7 11 13 17 19 23 29 31 37 41 43 47 53 59 61 67 71
# [21] 73 79 83 89 97




--","R_Language"
"1638","M.1458100537.A.E15","HumuHumu","問題","關於使用者自行輸入值的問題",2016-03-16 11:55:35,NA,NA,"請問我要怎麼寫一個程式如下：
使用者自行輸入一個數字，顯示所有小於此數的質數？
有查到是用readline
可是我寫好以後
他不等我輸入完數字就直接跑後面的程式
我的目標是：畫面出現""請輸入質數上限""後
我輸入一個數字，才開始顯示小於此數的所有質數

我寫的檢視質數程式碼如下(目前質數上限為100，我想要讓這個100可以使用者自行輸入):
library(numbers)
x=1
while (x<=100){
  if(isPrime(x)==TRUE){
    print(x)
    x=x+1
  }else{
      x=x+1
    }
}


小弟還是初學者，請多包涵

-----
Sent from JPTT on my HTC_B810x.

--","R_Language"
"1639","M.1458100380.A.0E6","celestialgod","問題","Re: 轉換資料成table格式",2016-03-16 11:52:55,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 各位好，我這次碰到的問題是假設我有以下一個dataframe: 長毛象 山地 10: 狐狸  山地 50: 老虎 山地 60: 猴子 山地 30: 長毛象 雪地 25: 狐狸 雪地 15: 老虎 雪地 8: 猴子 雪地 33: 第一跟第二個column都是factor vector，第三個vector是numeric的格式: 假設我想要做動物跟棲息地是否相關，我想弄成row是以動物作為分隔: 而column是以棲息地作為分隔: 做完應該會像是:          雪地  山地: 長毛象: 狐狸: 老虎: 猴子: 然後將值填入裡面，我用table function可是裡面沒有可以填入值的arugment: 我之前看過reshape的melt function，試了很久也沒成功，不知道有沒有其他方法呢?library(data.table)
library(magrittr)
library(dplyr)
library(tidyr)

dat <- fread('
長毛象 山地 10
狐狸  山地 50
老虎 山地 60
猴子 山地 30
長毛象 雪地 25
狐狸 雪地 15
老虎 雪地 8
猴子 雪地 33')

dat %>% spread(V2, V3)

#        V1 山地 雪地
# 1:   老虎   60    8
# 2:   狐狸   50   15
# 3: 長毛象   10   25
# 4:   猴子   30   33

會有警告：id() is deprecated為正常，等待tidyr作者改版 (dplyr::id要被棄用了)

(tidyr跟dplyr都是Hadley跟Rstudio的作品)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1640","M.1458100136.A.012","clansoda","問題","轉換資料成table格式",2016-03-16 11:48:52,NA,NA,"各位好，我這次碰到的問題是假設我有以下一個dataframe

長毛象 山地 10

狐狸  山地 50

老虎 山地 60

猴子 山地 30

長毛象 雪地 25

狐狸 雪地 15

老虎 雪地 8

猴子 雪地 33

第一跟第二個column都是factor vector，第三個vector是numeric的格式

假設我想要做動物跟棲息地是否相關，我想弄成row是以動物作為分隔

而column是以棲息地作為分隔

做完應該會像是

         雪地  山地

長毛象

狐狸

老虎

猴子

然後將值填入裡面，我用table function可是裡面沒有可以填入值的arugment

我之前看過reshape的melt function，試了很久也沒成功，不知道有沒有其他方法呢?

--","R_Language"
"1641","M.1458075320.A.10D","naturalsmen","問題","shiny-add notes with mouse event",2016-03-16 04:55:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想要解釋ㄧ些在side bar panel出現的名詞
但直接註解在上面又太擁擠
想知道shiny有沒有辦法用嵌入css的方式或現有的API支援這個function
像是新增一個問號在名詞旁
鼠標移過去或click it才會出現

感謝∼

[程式範例]:



[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:


shiny, mouse event

--","R_Language"
"1642","M.1458010958.A.E61","tytony","問題","DT套件datatable顯示中文問題",2016-03-15 11:02:33,NA,NA,"[問題類型]: 程式諮詢

[軟體熟悉度]: 使用者

[問題敘述]:

使用DT套件的datatable建立一個可以依數值大小，而有不同底色的表格

但發現只要表格內容為中文，就會無法顯示，不知該如何解決。謝謝

原始資料http://i.imgur.com/tAYtRqG.png如果不包含中文欄位http://i.imgur.com/SgfQF29.png[程式範例]:

程式碼如下就無法顯示（但沒有錯誤訊息）

datatable(data.all, rownames = FALSE) %>%
   formatStyle(column = ""與昨日溫度差"",
               background = styleInterval(
                  c(-3, -1, 1, 3),
                  c(""#AB7DEF"", ""#ADC1FF"", ""white"", ""#FFC489"", ""#FF3300"")
                  )
               )


如果不包含最後一欄就能正常顯示

datatable(data.all[,1:4], rownames = FALSE) %>%
   formatStyle(column = ""與昨日溫度差"",
               background = styleInterval(
                  c(-3, -1, 1, 3),
                  c(""#AB7DEF"", ""#ADC1FF"", ""white"", ""#FFC489"", ""#FF3300"")
                  )
               )


[環境敘述]:

R version 3.2.4 (2016-03-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows >= 8 x64 (build 9200)

--","R_Language"
"1643","M.1457867897.A.D0E","damody","情報","Visual Studio也有R了喔~",2016-03-13 19:18:09,NA,NA,"[關鍵字]: Visual Studio

[出處]:https://goo.gl/uCcYevdownload:https://www.visualstudio.com/features/rtvs-vssrc:https://github.com/Microsoft/RTVS[重點摘要]: Windows 平台最猛IDE可以幫 R Debug了

Editor – complete editing experience for R scripts and functions, including
detachable/tabbed windows, syntax highlighting, and much more.

IntelliSense – (aka auto-completion) available in both the editor and the
Interactive R window.

R Interactive Window – work with the R console directly from within Visual
Studio.

History window – view, search, select previous commands and send to the
Interactive window.

Variable Explorer – drill into your R data structures and examine their
values.

Plotting – see all of your R plots in a Visual Studio tool window.

Debugging – breakpoints, stepping, watch windows, call stacks and more.

R Markdown – R Markdown/knitr support with export to Word and HTML.

微軟也出了自己的R叫R Open
還有R server給商業用戶https://www.microsoft.com/en-us/server-cloud/products/r-server/看起來微軟也想分食這塊市場。

--","R_Language"
"1644","M.1457861687.A.3A6","yaowei2010","問題","findinterval",2016-03-13 17:34:45,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想給個query回傳落入某個區間的index

[程式範例]:

現在我有個陣列是

表一
 index number
  1     1000
  2     2000
  3     3000
  4     4000
  5     50000
  6     69999
  7     712324

表二區間表(有起始和終點)

start   end
1       10
2       300
999     1998
99999   712325

我想找出表一有落到表二區間的那些點的index，沒落入的就不管

例如此答案是c(1,7)

暴力法subset寫出來的是錯的...
請求版上大大有無快速解法，感恩><

--","R_Language"
"1645","M.1457855093.A.0DE","celestialgod","問題","Re: 寫函數餵入data.frame疑問",2016-03-13 15:44:50,NA,NA,"※ 引述《gbd37 (有夠瞎)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 自已寫函數，如下方連結: 可這樣餵入data很受限，只能餵入分類變數名字要是'y': 現在輸入是cv.log(data,0.5): ________________________________________: 我在想輸入是cv.log(data$y,0.5)像這樣，就方便很多: 請問我函數內該如何修改，麻煩指導小弟: 謝謝Orz: [程式範例]: http://pastie.org/10757810: [環境敘述]: win10 R:3.2.3: [關鍵字]:function logistic data.frame直接使用好用的formula吧!!

好讀版：http://pastebin.com/U42Sq7Xxlibrary(magrittr)   # %>%, %<>%
library(data.table) # data.table, setnames
library(dplyr)      # filter, mutate
library(purrr)      # map_dbl
# data generation
logit_f <- function(x, b) 1 / (1 + exp(x %*% b))
dat <- matrix(rnorm(1000), 100, 10) %>%
  cbind(map_dbl(logit_f(cbind(1, .), runif(11, -5, 5)),
        ~rbinom(1, 1, .))) %>%
  data.table %>% setnames(c(paste0(""X"", 1:10), ""Y""))

# k-fold cv index
cv_index_f <- function(numSampleSize, numFold){
  cvIndex <- rep(1:numFold, each = floor(numSampleSize / numFold))
  m <- numSampleSize %% numFold
  if (m > 0)
    cvIndex %<>% c(1:m)
  return(cvIndex %>% sample(length(.)))
}

# cv function
cv_f <- function(formula, data, threshold = 0.5, kfold = NULL){
  y <- model.frame(formula, data) %>% model.response
  if (is.null(kfold) || kfold == 0)
    kfold <- nrow(data)
  cvIndex <- cv_index_f(nrow(data), kfold)
  predictRes <- vector('numeric', nrow(data))
  for (i in 1:kfold)
  {
    model <- filter(data, cvIndex != i) %>%
      glm(formula, data = ., binomial)
    predictRes[cvIndex == i] <- filter(data, cvIndex == i) %>%
      predict(model, ., type='response')
  }
  return(mean((predictRes > threshold) == y))
}
cv_f(Y ~ X1 + X2 + X3, dat)
cv_f(Y ~ ., dat)
dat %<>% setnames(""Y"", ""sss"")
cv_f(sss ~ ., dat)

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1646","M.1457852916.A.822","gbd37","問題","寫函數餵入data.frame疑問",2016-03-13 15:08:33,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

自已寫函數，如下方連結

可這樣餵入data很受限，只能餵入分類變數名字要是'y'

現在輸入是cv.log(data,0.5)
________________________________________

我在想輸入是cv.log(data$y,0.5)像這樣，就方便很多

請問我函數內該如何修改，麻煩指導小弟

謝謝Orz

[程式範例]:http://pastie.org/10757810[環境敘述]: win10 R:3.2.3

[關鍵字]:function logistic data.frame


--","R_Language"
"1647","M.1457718749.A.B23","celestialgod","問題","Re: 關於這段程式碼 要如何優化?",2016-03-12 01:52:25,NA,NA,"※ 引述《jackhzt (巴克球)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:如何將以下的程式碼跑快一點: [程式範例]:R中的dist這function 因為想使用不同的計算方式，所以希望可以做到:            和此function表現差不多的function: 程式碼可貼於以下網站：: https://gist.github.com/anonymous/cf844933bb6858936e25: 希望有提高效率的方法1. 如果距離函數是常見的，通常建議用dist達成

2. 如果不常見，盡量考慮用矩陣運算求出來

EX: (以歐式距離來說)

library(magrittr)
x <- matrix(rnorm(50), 5, 10)
distMat <- sweep(-x %*% t(x) * 2, 2, rowSums(x^2), '+') %>%
  sweep(1, rowSums(x^2), '+')
diag(distMat) <- 0
distMat %<>% sqrt
all.equal(distMat, as.matrix(dist(x)), check.attributes = FALSE) # TRUE

3. 用簡單的平行，我可能會這樣做：

library(magrittr)
library(foreach)
library(doSNOW)
library(plyr)
library(Matrix)

dis <- function(x, y) sum(abs(as.numeric(x)-as.numeric(y)))
x <- matrix(rnorm(50), 5, 10)
allCombinations <- combn(1:nrow(x), 2)

cl <- makeCluster(8, type = ""SOCK"")
registerDoSNOW(cl)
clusterExport(cl, list = c(""dis"", ""x""))
res <- aaply(allCombinations, 2, function(v){
 dis(x[v[1],], x[v[2],])
}, .parallel = TRUE)
stopCluster(cl)

distMat <- sparseMatrix(i = allCombinations[1,],
  j = allCombinations[2,], x = res) %>%
  rbind(0) %>% as.matrix
distMat[lower.tri(distMat)] <- res

4. 或是乾脆用RcppArmadillo:

(下面是用之前kernel matrix估計的方法，之前有發過更快的方法...)

library(Rcpp)
library(RcppArmadillo)
## For windows user
# library(inline)
# settings <- getPlugin(""Rcpp"")
# settings$env$PKG_CXXFLAGS <- paste('-fopenmp', settings$env$PKG_CXXFLAGS)
# settings$env$PKG_LIBS <- paste('-fopenmp -lgomp', settings$env$PKG_LIBS)
# do.call(Sys.setenv, settings$env)
sourceCpp(code = '
// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
#include <omp.h>
// [[Rcpp::plugins(openmp)]]
using namespace Rcpp;
using namespace arma;

// [[Rcpp::export]]
NumericMatrix kernelMatrix_cpp(NumericMatrix Xr, NumericMatrix Centerr,
double sigma) {
  omp_set_num_threads(omp_get_max_threads());
  uword n = Xr.nrow(), b = Centerr.nrow(), row_index, col_index;
  mat X(Xr.begin(), n, Xr.ncol(), false);
  mat Center(Centerr.begin(), b, Centerr.ncol(), false);
  mat KerX(n, b);
  #pragma omp parallel private(row_index, col_index)
  for (row_index = 0; row_index < n; row_index++)
  {
    #pragma omp for nowait
    for (col_index = 0; col_index < b; col_index++)
    {
      KerX(row_index, col_index) = exp(sum(square(X.row(row_index)
        - Center.row(col_index))) / (-2.0 * sigma * sigma));
    }
  }
    return wrap(KerX);
}')


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1648","M.1457714853.A.2F9","jackhzt","問題","關於這段程式碼 要如何優化?",2016-03-12 00:47:29,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:如何將以下的程式碼跑快一點

[程式範例]:R中的dist這function 因為想使用不同的計算方式，所以希望可以做到
           和此function表現差不多的function

程式碼可貼於以下網站：https://gist.github.com/anonymous/cf844933bb6858936e25希望有提高效率的方法

--","R_Language"
"1649","M.1457709472.A.814","shingetsu","問題","如何在取data其中一部份算mean",2016-03-11 23:17:49,NA,NA,"[問題類型]:

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想把data的資料分段算出平均數，例如 gsprice 第1筆到第50筆算出1個平均數，

第51筆到第100筆再取一個平均數

[程式範例]:

rm(list=ls())                  #清除所有內容
library(TSA);library(tseries);library(FinTS);library(fGarch);library(dynlm)
datain <- read.table(""C:\\R\\mydata.txt"",header=TRUE)#讀入文字檔資料
attach(datain)
lsprice <- log(sprice)
lfprice <- log(fprice)
gsprice <- diff(lsprice)*100
gfprice <- diff(lfprice)*100
obsno   <<- length(date)
datam <<-
matrix(cbind(date[-1],lsprice[-1],lfprice[-1],NFPI[-1],gsprice,gfprice),obsno-1,6)
colnames(datam) <- c(""date"",""lsprice"",""lfprice"",""NFPI"",""gsprice"",""gfprice"")

obs  <<- length(datam[,1])    # obs is the sample size
y    <<- matrix(0,obs,1)
y[,1]<- datam[,5]



[環境敘述]: win10 3.2.3

--","R_Language"
"1650","M.1457542410.A.9FA","PILIPALAPON","問題","資料處理及function問題",2016-03-10 00:53:27,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的ID   性別     年齡   號碼1      F       23      21      F       30      21     M       32     22     M      32     12      F       23      13      M      56     13      F       23      13      M      18     14      M      12     44      F       32      44      M      65     44      F       45      44      M      42     4有一個資料檔，我有三個方案。

方案A同ID的年齡遞增排序，再用號碼變數*0.5四捨五入的數字選取那一列。
方案B同ID的年齡遞減排序，再用號碼變數*0.9四捨五入的數字選取那一列。
方案C同ID的年齡遞減排序，再用號碼變數的數字選取那一列。

例如方案C
同ID下年齡遞減排序
ID  性別 年齡 號碼
1        M     32     2
1         F     30     2
1         F     23     2
2       M     32      1
2        F     23      1
3      M      56     1
3       F      23      1
3      M      18      1
4      M      65     4
4      F       45     4
4      M      42     4
4      F       32     4
4      M      12     4
排完後依照號碼變數選該列
ID  性別 年齡 號碼
1         F     30     2
2       M     32      1
3       M     56     1
4        F     32     4

我希望用function寫輸入方案A即可得到方案A選出的人。



[環境敘述]:
R 3.2.3

--","R_Language"
"1651","M.1457491357.A.F28","celestialgod","問題","Re: 讀取csv中特定的row",2016-03-09 10:42:33,NA,NA,"# 全部讀進來在切割就好了：

library(magrittr)
library(data.table)
library(dplyr)
cv_index_f <- function(numSampleSize, numFold){
  cvIndex <- rep(1:numFold, each = floor(numSampleSize / numFold))
  m <- numSampleSize %% numFold
  if (m > 0)
    cvIndex %<>% c(1:m)
  return(cvIndex %>% sample(length(.)))
}

dat <- data.table(x = rnorm(100), y = rnorm(100))
cvDat <- dat %>% mutate(cvIndex = cv_index_f(nrow(.), 10)) %>%
  split(.$cvIndex)

# > str(cvDat)
# List of 10
#  $ 1 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.424 -0.181 0.241 0.31 0.874 ...
#   ..$ y      : num [1:10] 0.272 -1.197 -0.441 -0.499 -2.136 ...
#   ..$ cvIndex: int [1:10] 1 1 1 1 1 1 1 1 1 1
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 2 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.533 1.25 -1.689 -1.557 -1.597 ...
#   ..$ y      : num [1:10] 0.266 1.272 0.876 2.442 0.928 ...
#   ..$ cvIndex: int [1:10] 2 2 2 2 2 2 2 2 2 2
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 3 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] 0.437 0.463 2.512 0.919 -1.206 ...
#   ..$ y      : num [1:10] -1.3943 -1.7927 0.0471 0.9818 -1.0305 ...
#   ..$ cvIndex: int [1:10] 3 3 3 3 3 3 3 3 3 3
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 4 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.361 -0.34 0.621 1.266 -0.356 ...
#   ..$ y      : num [1:10] -0.315 -0.51 -0.257 -1.533 -1.02 ...
#   ..$ cvIndex: int [1:10] 4 4 4 4 4 4 4 4 4 4
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 5 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] 1.141 -1.699 -1.076 0.443 0.864 ...
#   ..$ y      : num [1:10] 0.3992 0.6175 -1.496 -0.7096 0.0923 ...
#   ..$ cvIndex: int [1:10] 5 5 5 5 5 5 5 5 5 5
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 6 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.175 -0.785 -2.775 -0.315 0.375 ...
#   ..$ y      : num [1:10] -0.262 0.811 1.763 -1.197 0.712 ...
#   ..$ cvIndex: int [1:10] 6 6 6 6 6 6 6 6 6 6
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 7 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] 1.2276 0.0944 0.9955 -1.0433 0.2058 ...
#   ..$ y      : num [1:10] -0.216 -0.691 -3.355 1.082 -1.641 ...
#   ..$ cvIndex: int [1:10] 7 7 7 7 7 7 7 7 7 7
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 8 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.9693 -0.3944 -0.1652 -0.0932 -1.9734 ...
#   ..$ y      : num [1:10] -0.0336 1.1692 -0.2655 -1.9138 -1.3532 ...
#   ..$ cvIndex: int [1:10] 8 8 8 8 8 8 8 8 8 8
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 9 :Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] -0.36 1.2 -1.17 2.5 1.16 ...
#   ..$ y      : num [1:10] 0.4338 -0.4115 0.2877 1.2177 -0.0426 ...
#   ..$ cvIndex: int [1:10] 9 9 9 9 9 9 9 9 9 9
#   ..- attr(*, "".internal.selfref"")=<externalptr>
#  $ 10:Classes ‘data.table’ and 'data.frame':    10 obs. of  3 variables:
#   ..$ x      : num [1:10] 1.583 -1.054 -0.362 -0.259 1.229 ...
#   ..$ y      : num [1:10] -0.135 0.481 -1.52 0.627 0.72 ...
#   ..$ cvIndex: int [1:10] 10 10 10 10 10 10 10 10 10 10
#   ..- attr(*, "".internal.selfref"")=<externalptr>


# 你的case就長這樣：

cvDat <- fread(fileName, sep=',') %>%
  mutate(cvIndex = cv_index_f(nrow(.), 10)) %>%
  split(.$cvIndex)

# 如果要移除cvIndex，可以直接這樣做
cvDat %<>% lapply(function(x) select(x, -cvIndex))

# or equivalently
cvDat %<>% lapply(select, -cvIndex)

# or use purrr
library(purrr)
cvDat %<>% map(~select(., -cvIndex))

# or equivalently
cvDat %<>% map(select, -cvIndex)


題外話：

不建議你用內建函數的名稱當做變數名稱，ex: seq, file, nrow, c等※ 引述《MADNUG (就是比你長)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 小弟有個3.8G多的csv檔，但只想要隨機讀取1/10的row: fread好像沒read specific rows的指令，: 難道只能讀整個檔案再select row了嗎？: 這樣好沒效率呀.....: 若要cross-validation的話光I/O就跑死了....: 想請問有沒有更效率一點方法呢？: 謝謝了: [程式範例]:: 參考網路用fread + nrow and skip 寫了一下，但是更慢Orz.....: 但也是預料中啦XDD: http://pastebin.com/gW9W1GmN: [關鍵字]::: fread:

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1652","M.1457490296.A.858","MADNUG","問題","讀取csv中特定的row",2016-03-09 10:24:52,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
小弟有個3.8G多的csv檔，但只想要隨機讀取1/10的row
fread好像沒read specific rows的指令，
難道只能讀整個檔案再select row了嗎？
這樣好沒效率呀.....
若要cross-validation的話光I/O就跑死了....
想請問有沒有更效率一點方法呢？
謝謝了

[程式範例]:
參考網路用fread + nrow and skip 寫了一下，但是更慢Orz.....
但也是預料中啦XDDhttp://pastebin.com/gW9W1GmN[關鍵字]:fread--
    ○          ""○   ○""          ○""
    (|\          (|\   ))           ))
    /`○rz       /`○r27\""      ○r27\""

    ○╭○rz       ○rz       ○rz-st○
     ￣′          ○=^

--","R_Language"
"1653","M.1457416284.A.18F","sulaxd","問題","Re: arules package",2016-03-08 13:51:21,NA,NA,"以下給你參考：

# 載入套件
library(magrittr)
library(plyr)
library(arules)

# 讀入資料，因資料來源編碼為big5，加入參數fileEncoding
dd <- read.csv(""~/Downloads/dd.csv"",stringsAsFactors = F, fileEncoding = ""big5
"")

# (optional)將資料轉為list，並把每筆交易中的空值及重複項目移除
dd <- dlply(dd, ""X"", function(u){
  unlist(u[-1]) %>% .[.!=""""] %>% unique
})

# 將資料轉為transactions物件並進行apriori算法
trans <- as(dd, ""transactions"")
rules <- apriori(trans, parameter = list(support=0.001, confidence=0.001,minle
n=2))
inspect(rules)※ 引述《clansoda (小笨)》之銘言：: 各位好，首先我先附上資料https://goo.gl/4ds2H4: 這個資料是購買資料的貨號，我想用它來做association analysis: 如果我先將資料直接用rules<-apriori(dd,parameter=list(supp=0.01,conf=0.8)): 接著inspect(rules)，可是我這樣只能得到很少的rules而且都是item1->item5: 類似這樣的空集合，也就是裡面沒有商品當然也就沒辦法分析，想請問如何消除這樣的: rules，接著用另外種方式是直接從外面讀進來而且變成transaction的模式: read.transaction(dd,sep="","")，這樣確實會transaction被讀進來但是這樣做完apriori: 後不會是正常的格式像item1{kites}->item3{ball}類似這樣的模式: 反而會是{ball,kites,lollipop}這樣的格式，所以我不知道哪裡出了錯: 請問有人做過完整的關聯性分析嗎?: 會用貨號的原因是，商品是很長而且有中文的格式反而會更難分析--","R_Language"
"1654","M.1457355205.A.86B","clansoda","問題","arules package",2016-03-07 20:53:20,NA,NA,"各位好，首先我先附上資料https://goo.gl/4ds2H4這個資料是購買資料的貨號，我想用它來做association analysis

如果我先將資料直接用rules<-apriori(dd,parameter=list(supp=0.01,conf=0.8))

接著inspect(rules)，可是我這樣只能得到很少的rules而且都是item1->item5

類似這樣的空集合，也就是裡面沒有商品當然也就沒辦法分析，想請問如何消除這樣的

rules，接著用另外種方式是直接從外面讀進來而且變成transaction的模式

read.transaction(dd,sep="","")，這樣確實會transaction被讀進來但是這樣做完apriori

後不會是正常的格式像item1{kites}->item3{ball}類似這樣的模式

反而會是{ball,kites,lollipop}這樣的格式，所以我不知道哪裡出了錯

請問有人做過完整的關聯性分析嗎?

會用貨號的原因是，商品是很長而且有中文的格式反而會更難分析

--","R_Language"
"1655","M.1457341838.A.2C4","celestialgod","問題","Re: reshape 資料轉換",2016-03-07 17:10:34,NA,NA,"※ 引述《criky (立業成家)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我的資料像是學校的成績系統: 欄位有學生id，學年，學期，科目id，科目名，成績: 一個學生有n列，: 現在想將一個學生拉成一列: 我是先paste(學年+學期)，再用reshape函數作，: data.2<-reshape(data.1,v.names=""成績"",idvar=""學號"",timevar=""學年學期: "",direction=""wide""): 但轉換後成績的部分，: 只有某個科目的成績，: 若用先paste(學年+學期+科目id)，再用reshape函數作，: 是可以作出來，不過這樣NA值會很多，: 我想要用""每個學生的學期平均數""作整理: 所以資料欄位會是1個學生id+8個學期平均：: 學生id 第1學年第1學期平均 第1學年第2學期平均 第2學年第1學期平均: …: 不知道要怎麼寫，: 請問一下，謝謝。: [環境敘述]:: win8: [關鍵字]:: reshapelibrary(data.table)
library(dplyr)
library(magrittr)
# data generation
# 假設一百個學生，五科，三年，上下兩學期
numStu <- 100
numSubject <- 5
numYear <- 3
numSemester <- 2
datBigTable <- data.table(stuID = rep(1:numStu, each = numSubject*numYear*
  numSemester), year = rep(102:(101+numYear), times = numStu*numSubject,
  each = numSemester),
  semester = rep(1:numSemester, times = numStu*numSubject*numYear),
  subjectID = rep(1:numSubject, times = numStu, each = numSemester*numYear))
datBigTable %<>% mutate(Grade = sample(1:100, nrow(.), TRUE),
  subjectName = c(""國文"", ""英文"", ""數學"", ""自然"", ""社會"")[subjectID]) %>%
  tbl_dt(FALSE)
# Source: local data table [3,000 x 6]
#
#    stuID  year semester subjectID Grade subjectName
#    (int) (int)    (int)     (int) (int)       (chr)
# 1      1   102        1         1    32        國文
# 2      1   102        2         1    95        國文
# 3      1   103        1         1    95        國文
# 4      1   103        2         1     7        國文
# 5      1   104        1         1    60        國文
# 6      1   104        2         1    65        國文
# 7      1   102        1         2    85        英文
# 8      1   102        2         2    28        英文
# 9      1   103        1         2    33        英文
# 10     1   103        2         2     7        英文
# ..   ...   ...      ...       ...   ...         ...

datBigTable %>% mutate(yearSemester = sprintf(""%03i%02i"", year, semester)) %>%
  group_by(stuID, yearSemester) %>% summarise(meanGrade = mean(Grade)) %>%
  dcast.data.table(stuID ~ yearSemester, value.var = ""meanGrade"") %>%
  tbl_dt(FALSE)
# Source: local data table [100 x 7]
#
#    stuID 10201 10202 10301 10302 10401 10402
#    (int) (dbl) (dbl) (dbl) (dbl) (dbl) (dbl)
# 1      1  47.4  55.0  36.2  12.8  60.4  36.8
# 2      2  59.2  58.2  58.0  36.4  57.2  47.8
# 3      3  53.8  59.2  60.8  54.2  65.4  34.0
# 4      4  70.0  69.4  66.2  42.2  48.8  45.0
# 5      5  52.8  64.8  34.2  39.4  59.4  50.0
# 6      6  50.0  50.2  45.2  60.6  59.0  68.6
# 7      7  38.0  46.6  50.0  49.6  32.2  52.2
# 8      8  53.4  58.6  47.0  37.6  56.8  47.8
# 9      9  26.6  64.0  37.6  25.2  65.4  55.2
# 10    10  47.0  40.2  26.4  45.6  65.6  40.0
# ..   ...   ...   ...   ...   ...   ...   ...


原本想用tidyr:::spread，不過不知道怎麼了，dplyr更新到0.4.3就不給我用了Orz

更新，突然想到我轉換後的變數名稱是數字，所以才會不行....

library(tidyr)
datBigTable %<>% mutate(year = year - 101)
datBigTable %>% mutate(yearSemester = sprintf(""第%i學年第%i學期平均"",
  year, semester)) %>% group_by(stuID, yearSemester) %>%
  summarise(meanGrade = mean(Grade)) %>%
  spread(yearSemester, meanGrade) %>% tbl_dt(FALSE)

#   Source: local data table [100 x 7]
#
#    stuID 第1學年第1學期平均 第1學年第2學期平均 第2學年第1學期平均
#    (int)              (dbl)              (dbl)              (dbl)
# 1      1               54.6               51.4               41.4
# 2      2               57.6               49.4               63.6
# 3      3               46.8               62.2               51.4
# 4      4               45.0               62.8               60.0
# 5      5               43.8               49.6               43.8
# 6      6               54.4               44.0               59.2
# 7      7               47.6               65.4               52.0
# 8      8               63.6               68.2               75.2
# 9      9               40.4               41.6               50.0
# 10    10               39.0               52.4               50.2
# ..   ...                ...                ...                ...
#
# 第2學年第2學期平均 第3學年第1學期平均 第3學年第2學期平均
#                ...                ...                ...

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1656","M.1457339805.A.306","criky","問題","reshape 資料轉換",2016-03-07 16:36:41,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我的資料像是學校的成績系統
欄位有學生id，學年，學期，科目id，科目名，成績
一個學生有n列，
現在想將一個學生拉成一列
我是先paste(學年+學期)，再用reshape函數作，
data.2<-reshape(data.1,v.names=""成績"",idvar=""學號"",timevar=""學年學期
"",direction=""wide"")

但轉換後成績的部分，
只有某個科目的成績，
若用先paste(學年+學期+科目id)，再用reshape函數作，
是可以作出來，不過這樣NA值會很多，
我想要用""每個學生的學期平均數""作整理
所以資料欄位會是1個學生id+8個學期平均：

學生id 第1學年第1學期平均 第1學年第2學期平均 第2學年第1學期平均
…
不知道要怎麼寫，
請問一下，謝謝。


[環境敘述]:
win8

[關鍵字]:
reshape

--","R_Language"
"1657","M.1457070231.A.BC3","psinqoo","問題","Re: R語言在Data mining 的應用",2016-03-04 13:43:48,NA,NA,"路人回一下※ 引述《SangoDragon (SANGO)》之銘言：: 本人之前都是用 SQL + Mining tools (例如MS-SQL Analysis service , SPSS Modeler): 之前大部分是用 SQL 整理資料: 之後再用 mining Tools run mining (包含調參數等等): 例如我們做一個羅吉斯回歸,去預測信用卡客戶是否會變呆卡: 或用 CART 去做回應率分析: 現在關於 R 我有一些問題:: 1. R的mining 函數支援到那些演算法?:    例如:分群,類神經網路,CART 等等?可以，有很多package包，也有詳細說明文件。: 2. R有辦法調參數嗎?:    例如分群時分幾群,CART的切點,等等 (這部分在mining tools 都有很強的支援)可以，但須對R有相當了解。: 3. R怎樣做Mining前的資料處理?:    SQL 強的地方在於下語法可以做很多資料預處理:    例如:資料中只有生日要轉換成年齡,還有一些更複雜要套公式轉換的部份等等:    SQL 的資料可以存很多資料:    R 在預處理部分的強度如何?:    總不能一直讀EXCEL的資料吧?:    我要表達的是,在資料面SQL 資料庫有很強大的SQL語法,跟儲存面:    R 的方式?可以，如C大回覆。 可以，我現在從SQL撈出計算後寫到另一台 MYSQL 。
或 透過其他 PACKAGE 寫到其他資料庫: 4. 這張圖 http://i.imgur.com/iMTOAoG.jpg:    是否過譽?:    以MS-SQL mining 而言,建構好一個預測模型,可以利用MDX等等:    去對這個Model 做一些處理,例如輸入資料做預測等等:    而且也有很多圖形介面的輸出R+shiny 可以做出很多的東西http://shiny.rstudio.com/gallery/這個是我在教別人用的範例 128.199.74.32:3838/: 以上幾點問題--







--","R_Language"
"1658","M.1457058631.A.71F","celestialgod","問題","Re: R語言在Data mining 的應用",2016-03-04 10:30:28,NA,NA,"不專業的回一下※ 引述《SangoDragon (SANGO)》之銘言：: 本人之前都是用 SQL + Mining tools (例如MS-SQL Analysis service , SPSS Modeler): 之前大部分是用 SQL 整理資料: 之後再用 mining Tools run mining (包含調參數等等): 例如我們做一個羅吉斯回歸,去預測信用卡客戶是否會變呆卡: 或用 CART 去做回應率分析: 現在關於 R 我有一些問題:: 1. R的mining 函數支援到那些演算法?:    例如:分群,類神經網路,CART 等等?分群的話有數種方法，大多數R都有，從k-means, hierarchical clustering到

一些模型假設的分群如EMClust提供Finite Mixture Gaussian Distribution的分群手法

分幾群都會有參數在控制，或是hierarchical clustering怎麼切都有參數控制。


NN，我不太熟，但是CART的話，R至少兩個套件支援，tree跟rpart，參數可調的不少，

這部分可以自己讀一下manual，也有randomForest的套件支持: 2. R有辦法調參數嗎?:    例如分群時分幾群,CART的切點,等等 (這部分在mining tools 都有很強的支援)如1回答: 3. R怎樣做Mining前的資料處理?:    SQL 強的地方在於下語法可以做很多資料預處理:    例如:資料中只有生日要轉換成年齡,還有一些更複雜要套公式轉換的部份等等:    SQL 的資料可以存很多資料:    R 在預處理部分的強度如何?:    總不能一直讀EXCEL的資料吧?:    我要表達的是,在資料面SQL 資料庫有很強大的SQL語法,跟儲存面:    R 的方式?R使用dplyr整理資料就很快了，可以看我的資料整理套件介紹系列文 (簽名檔): 4. 這張圖 http://i.imgur.com/iMTOAoG.jpg:    是否過譽?:    以MS-SQL mining 而言,建構好一個預測模型,可以利用MDX等等:    去對這個Model 做一些處理,例如輸入資料做預測等等:    而且也有很多圖形介面的輸出我認為R比SAS跟SPSS好用很多，這些比較都合情合理。: 以上幾點問題--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1659","M.1457056925.A.0B5","SangoDragon","問題","R語言在Data mining 的應用",2016-03-04 10:02:03,NA,NA,"本人之前都是用 SQL + Mining tools (例如MS-SQL Analysis service , SPSS Modeler)

之前大部分是用 SQL 整理資料

之後再用 mining Tools run mining (包含調參數等等)

例如我們做一個羅吉斯回歸,去預測信用卡客戶是否會變呆卡

或用 CART 去做回應率分析

現在關於 R 我有一些問題:

1. R的mining 函數支援到那些演算法?

   例如:分群,類神經網路,CART 等等?

2. R有辦法調參數嗎?

   例如分群時分幾群,CART的切點,等等 (這部分在mining tools 都有很強的支援)

3. R怎樣做Mining前的資料處理?

   SQL 強的地方在於下語法可以做很多資料預處理

   例如:資料中只有生日要轉換成年齡,還有一些更複雜要套公式轉換的部份等等

   SQL 的資料可以存很多資料

   R 在預處理部分的強度如何?

   總不能一直讀EXCEL的資料吧?

   我要表達的是,在資料面SQL 資料庫有很強大的SQL語法,跟儲存面

   R 的方式?

4. 這張圖http://i.imgur.com/iMTOAoG.jpg是否過譽?

   以MS-SQL mining 而言,建構好一個預測模型,可以利用MDX等等

   去對這個Model 做一些處理,例如輸入資料做預測等等

   而且也有很多圖形介面的輸出


以上幾點問題

--","R_Language"
"1660","M.1456820412.A.E27","delighted","問題","netCDF 轉 csv",2016-03-01 16:20:09,NA,NA,"[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:各位先進高手，小弟最近接觸到大氣及海洋資料，遇到了許多NC檔想藉由R軟體協助將其轉成CSV檔以進行後續的工作目前遇到的NC檔有兩種其一是矩陣類型，首行首列為經緯度，中間所夾為相對應之經緯度上的值另外則是較明瞭的三欄，經度、緯度、值想請教大家是否有相關的教學或例子能幫助我感謝!!--","R_Language"
"1661","M.1456456589.A.700","Shadowy","問題","關於e1071套件的Support Vector Machines",2016-02-26 11:16:26,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位先進大家好：
我想要問有關於e1071的套件進行Support Vector Machines。

目前我已經利用training set寫出判別資料的陰(陽)性的model (產出結果為.RDate檔)，
而現在我有其他的資料想要利用這個model判別是屬於陰(陽)性，
請問大家，我該如何或利用甚麼套件來進行後續呢？

謝謝大家。




[環境敘述]:win7 R_3.2.0[關鍵字]:e1071、Support Vector Machines


--","R_Language"
"1662","M.1456418506.A.F5A","gbd37","問題","函數不瞭解(關於gsub)",2016-02-26 00:41:44,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

網頁範例裡有一個自訂函數""mgsub""，裡面有一部分我不瞭解，

為什麼要多一個"" ... ""呢? 還請賜教Orz

[程式範例]:http://tinyurl.com/zeo2ad4[關鍵字]:gsub function


--","R_Language"
"1663","M.1456323318.A.C8E","girl5566","問題","R 可否replace '.'",2016-02-24 22:15:16,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想詢問在R中可否進行"".""的取代

目前嘗試過 sub 和str_replace  皆無法取代"".""

[程式範例]:> a=""123.456""> sub(""."",""_"",a)[1] ""_23.456""> library(stringr)Warning message:
package ‘stringr’ was built under R version 3.2.3> a=""123.456""> str_replace(a,""."",""_"")[1] ""_23.456""

[環境敘述]:

R 3.2.2  Win7 64bit

[關鍵字]:

string replace

--","R_Language"
"1664","M.1456123215.A.8D9","PILIPALAPON","問題","機率分配（qAnalyst套件）",2016-02-22 14:40:13,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手，會一點sas及spss

[問題敘述]:

我想判定一組資料是服從哪一種機率分配，要怎麼寫程式或用哪個函數呢？

有書說可以使用qAnalyst套件的rapidFitFun，但是無法安裝這個套件於R 3.2.0，這個套
件
請問大家有沒有其他的方法呢∼感謝

[環境敘述]:

Win7 R3.2.0

[關鍵字]:

機率分配 qAnalyst套件


謝謝大家!!!


--","R_Language"
"1665","M.1455887470.A.8AA","JackBaska","問題","把R變成執行檔？",2016-02-19 21:11:08,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我想問一下有沒有人把R包成執行檔過 ? 主要是我有在做一些分析
而我希望能讓同事朋友不用會R也能做這些分析,另一方面是我老闆
也不會程式,我怕我離職後有些東西要是沒交接完又要砍掉重練了
因為我剛入職時有個狀況 XD

我希望能像寫C一樣最後包成執行檔,由於身邊的人有用windows
linux 還有我老闆本身是mac,想問是否有人知道這幾個分別怎麼
製作成執行檔 ？

我有稍微查一下是有人提供一些windows的資料,但mac我覺得是
問題最大的,因為為了把操作轉視覺化有些套件,其實不是那麼穩
定,像tcltk本身在mac更新後必須做QXuartz更新才能再用,所以
我最傾向把mac的包成執行檔,linux跟windows我目前都還沒遇到
這狀況過

[環境敘述]:

Mac X OS

[關鍵字]:

X OS 執行檔製作


--","R_Language"
"1666","M.1455874058.A.B82","Sweach","問題","回歸後求平均標準差",2016-02-19 17:27:36,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)*[m[問題敘述]:我用R作完回歸後 想要取平均值和標準差 可事總是顯示錯誤訊息""data must be a numeric vector""[程式範例]:library(""MASS"")library(""fitdistrplus"")data<-read.csv(""D:/XXXXXX"")fln <- fitdist(data$ratio, distr = ""lnorm"")fg <- fitdist(data$ratio, distr = ""gamma"")fb <- fitdist(data$ratio, distr = ""beta"")plot.legend<-c(""lognormal"",""gamma"",""beta"")cdfcomp(list(fln,fg,fb), legendtext = plot.legend)gofstat(list(fln,fg,fb))descdist(fln)descdist(fg)descdist(fb)rm(fln,fg,fb,data)[環境敘述]:Win7[關鍵字]:回歸謝謝大家!!!

--","R_Language"
"1667","M.1455847819.A.431","hanglong","問題","R-Studio分割畫面？",2016-02-19 10:10:03,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我是使用R-Studio來跑R的程式，R-Studio共分成四個部分：1. Workspace (左上角)。2. Console (左下角)3. Environment、History (右上角)4. Files、Plots、Packages、Help、Viewer (右下角)因為程式碼很多行，所以會將Workspace這一個部分拉的很大，可是這樣就會造成Console或Plots部分變得很小，導致在跑程式的時候，畫面要一直拉來拉去，感覺有點麻煩。不知道R-Studio有沒有類似分割畫面的功能？也就是說在雙螢幕的情形下，我讓Workspace在一個螢幕，其他部分在另外一個螢幕，這樣可以在寫程式的時候，方便不少。[環境敘述]:R x64 3.1.2

[關鍵字]:R-Studio分割畫面--
當我們在球場上偶遇, 妳想聽什麼程度的事實?
                      50%的答案是說:我在練自由攻擊.
                      70%的答案是說:其實我想要每球都能定三米
                      90%的答案是說:每週二四我都會在這練球 想打個好成績.
而100%的真實是:
我想定進妳心裡. 即使一球也好.

--","R_Language"
"1668","M.1455805489.A.CFB","psinqoo","問題","R 寫入SQL問題",2016-02-18 22:24:45,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:目前 從 A 的 SQL 主機 撈資料 到 linux 上的 R 計算後欲寫入 到 B 的 SQL 主機遇到問題 寫入後亂碼 中文的部分sqlSave(con, data, tablename = ""table"",rownames=FALSE,append=TRUE)寫入後 情況 http://imgur.com/aXM2V2h> sessionInfo()R version 3.2.2 (2015-08-14)Platform: x86_64-redhat-linux-gnu (64-bit)Running under: CentOS Linux 7 (Core)locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8[6] LC_MESSAGES=zh_TW.UTF-8    LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C               LC_TELEPHONE=C[11] LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RMySQL_0.10.6 DBI_0.3.1     RODBC_1.3-12loaded via a namespace (and not attached):[1] tools_3.2.2補充然後我試著 在我 WIN 機器上 撈A 計算後 寫入B 是正常可以的win> sessionInfo()R version 3.2.1 (2015-06-18)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese(Traditional)_Taiwan.950[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RMySQL_0.10.6 DBI_0.3.1     RODBC_1.3-12loaded via a namespace (and not attached):[1] tools_3.2.1[程式範例]:[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-redhat-linux-gnu (64-bit)Running under: CentOS Linux 7 (Core)locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8[6] LC_MESSAGES=zh_TW.UTF-8    LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C               LC_TELEPHONE=C[11] LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RMySQL_0.10.6 DBI_0.3.1     RODBC_1.3-12loaded via a namespace (and not attached):[1] tools_3.2.2[關鍵字]:

RODBC
SQL
編碼選擇性，也許未來有用--







--","R_Language"
"1669","M.1455780863.A.98F","clansoda","問題","不懂的格式transaction",2016-02-18 15:34:18,NA,NA,"[問題類型]:

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我又來報到了，最近幾天在研究market basket analysis

參考的是下面這篇文章http://goo.gl/Laq2IV大部分的我都懂了，主要是他的資料這邊引用的Groceris資料集

他是一個隨arules package附的資料集 他的格式叫做transaction

我去查看package作者寫的PDF，他是說transaction是用來指那些交易的item

但是我用View function是不能看裡面的資料內容的，我沒碰過這種情況

想請問要用甚麼方式才能看裡面的資料內容呢?

有沒有人知道什麼樣的資料才能轉換成transaction的格式呢?

附上該PDFhttps://goo.gl/qVgy0f

itemfrequency和itemfrequencyplot這兩個function可以大概了解該資料

可是卻不是詳細的資料，因此才想詢問該怎麼看原始資料

好讓我有辦法將market basket analysis 套用到其他資料上
[程式範例]:

--","R_Language"
"1670","M.1455673214.A.354","jackhzt","問題","關於Text mining tm包的問題",2016-02-17 09:40:11,NA,NA,"[問題類型]:程式諮詢 關於tm包


[問題敘述]:最近在作文本分析，其中tm的使用方式有一些問題

           1.無法用inspect()這函數將我要的內容展現出來
           2.想要用segmentCN這函數取""名詞""做分析 但是抽取出來失敗
             g2=function(data) {
                                 w=segmentCN(data,nature = TRUE)
                                 w[names(w) == ""n""]}

[程式範例]: 以下是我的code:
rm(list=ls())
library(""rJava"")
library(""Rwordseg"")
library(""tm"")
library(""tmcn"")
library(""wordcloud"")


g2=function(data) { w=segmentCN(data,nature = TRUE)
                    w[names(w) == ""n""]}

d.corpus=Corpus(DirSource(""D:\\bigdata\\testR\\word\\三國
"",encoding=""UTF-8""),list(language=NA))
#讀目錄
d.corpus=tm_map(d.corpus,removeNumbers)
#刪數字
d.corpus=tm_map(d.corpus,removePunctuation)
#刪空白
d.corpus=tm_map(d.corpus, content_transformer(function(word)
{gsub(""[A-Za-z0-9]"", """", word)}))
#整理
segment.options(isNameRecognition = F)
d.corpus=tm_map(d.corpus[1:120],content_transformer(g2),nature=T)
#斷辭
d.corpus=tm_map(d.corpus, removeWords, stopwordsCN())
#去掉沒用的字
d.corpus=Corpus(VectorSource(d.corpus))
#儲存
inspect(d.corpus)

主要是問題二，一直失敗 ....

[關鍵字]:tm 、text mining


--","R_Language"
"1671","M.1455620420.A.A12","clansoda","問題","中文字轉成數字",2016-02-16 19:00:16,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]不好意思我又來了，這次遇到的問題是假設像是這次大地震發生，可能就會記錄樓層，可是外面key的資料很可能是中文的資料形式可能長這樣row number   住戶住的樓層1            五樓2            三樓3           二十樓4            九樓5           十一樓可是這樣的文字沒辦法做分析，所以我想把五樓轉成5，三樓轉成3，二十樓當然就是20我想的寫法是先substr(住戶的樓層,1,住戶的樓層-1)，這樣應該可以得到一個col裡面是五、三、二十、九跟十一，我遇到的第一個問題是在sas裡面用length會是格子裡面的長度，像是length(住戶住的樓層)，這裡就會變成2,2,3,2,3這樣的感覺R裡面的length是用來表達向量的長度所以我用length(樓層)就會變成5，那我該如何表達我想要格子裡面的文字長度-1呢?第二個問題是我用if (住戶的樓層==""五"") {新的var<-5}這樣的方式可是if只能接受true跟false而不能是向量的logical所以我轉用ifelse這個函數，ifelse(住戶的樓層==""五"",新的var<-5,新的var<-Null)很明顯地這個是錯的，但是到這邊我已經毫無頭緒，不知道該如何進行想請問有甚麼方法或package可以解決這個問題。感謝各位[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：--","R_Language"
"1672","M.1455541659.A.B95","skyuf003352","問題","資策會Big data三部曲",2016-02-15 21:07:37,NA,NA,"[問題類型]:課程諮詢

[軟體熟悉度] : 入門 (以前曾接觸過，但很久沒用)

[問題敘述]:

想轉換跑道 從事資料分析工作 目前運用網路資料來複習R

也想上些課程幫助自己找到對的方向

查資策會有開 Big data 資料分析的課程(共三種)，採用 R實作
(http://www.iiiedu.org.tw/ites/RB.htm)

分別是R的操作介紹、資料探勘、資料視覺化

是否有人願意分享一下經驗 讓我參考是否值得去上課 謝謝~

--","R_Language"
"1673","M.1455497072.A.832","jackhzt","問題","關於ptt字庫",2016-02-15 08:44:29,NA,NA,"[問題類型]:關於R文本探勘字庫的增加

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
           有關於 installDict()
           最近想分析ptt的文章 但是找到的字庫只到2013年
           近來有增加新的字庫嗎?

--","R_Language"
"1674","M.1455147870.A.EB4","frank61003","問題","Gwr套件",2016-02-11 07:44:23,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想對ubike站的地理位置跟周遭環境資料做分析
資料有了，但是想要用gwr模式來跑卻跑不出來
我是使用下列的套件https://cran.r-project.org/web/packages/spgwr/spgwr.pdf資料如下https://drive.google.com/open?id=0BwsXWXvU1s4ud200M0l1UGNOaWMhttps://drive.google.com/open?id=0BwsXWXvU1s4udVNzNTlfR2hpT0E[程式範例]:
我以ggwr的例子造著寫http://ideone.com/7tjBjJ現在覺得最大的問題可能是因為我的data格式跟他的不一樣
我的是.csv他的是.shp
我寫的連bw的結果都跑不出來


不然就是coords這個矩陣寫錯
他是要矩陣格式
但我的是資料架構形式
不確定這樣可不可以用


原本以為資料有跟距離矩陣求出來就可以跑了
沒想到套件的用法才是真正困難的地方
我不知道要怎樣將資料轉成shp的形式
另外想問套件說明書是要從頭看到尾嗎
還是挑自己要用的函數部分看即可
希望能有高手解答小弟這些新手問題
謝謝


[環境敘述]:
R version 3.2.3 (2015-12-10)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.5 (Yosemite)

locale:
[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] maptools_0.8-39 spgwr_0.6-28    sp_1.1-1

loaded via a namespace (and not attached):
[1] tools_3.2.3     foreign_0.8-66  grid_3.2.3      lattice_0.20-33


[關鍵字]:
GWR

--","R_Language"
"1675","M.1454909912.A.AC7","ming790925","問題","make_function vs function",2016-02-08 13:38:24,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
大家好 pryr package 裡面有一個函數 make_function
我想請教各位高手 他與一般我們使用的 y=function(x){ } 這主要有什麼差異呢？
想知道該如何在適當時機用對指令
感謝！！




[程式範例]:
3.2 通<U+8FC7><U+53C2><U+6570><U+521B>建函<U+6570>make_function()

通<U+8FC7>使用make_function()函<U+6570>，可以通<U+8FC7>make_function()函<U+6570>的3<U+4E2A><U+53C2><U+6570>，<U+6765><U+521B>建一<U+4E2A>普通的函<U+6570>，<U+4ECE>而<U+73B0><U+5B9E><U+52A8><U+6001>性。

make_function()函<U+6570>的3<U+4E2A><U+53C2><U+6570>分<U+522B>是：

生成函<U+6570>的<U+53C2><U+6570>部分, list<U+7C7B>型
生成函<U+6570>的表<U+8FBE>式部分, <U+8BED>法表<U+8FBE>式, call<U+7C7B>型
生成函<U+6570>的系<U+7EDF><U+73AF>境部分, environment<U+7C7B>型

# <U+521B>建<U+6807>准的函<U+6570>> f <- function(x) x + 3> ffunction(x) x + 3

# <U+8FD0>行函<U+6570>> f(12)[1] 15

# 通<U+8FC7><U+53C2><U+6570><U+521B>建函<U+6570>> g <- make_function(alist(x = ), quote(x + 3))> gfunction (x)
x + 3

# <U+8FD0>行函<U+6570>> g(12)[1] 15

（資料來源：http://blog.fens.me/r-pryr/）
[環境敘述]:> sessionInfo()R version 3.1.2 (2014-10-31)
Platform: x86_64-apple-darwin13.4.0 (64-bit)

--","R_Language"
"1676","M.1454375754.A.E01","celestialgod","分享","Strategies to Speedup R Code",2016-02-02 09:15:51,NA,NA,"[關鍵字]: speedup R

[出處]:http://www.r-bloggers.com/strategies-to-speedup-r-code/[重點摘要]:

The for-loop in R, can be very slow in its raw un-optimised form, especially

when dealing with larger data sets. There are a number of ways you can make

your logics run fast, but you will be really surprised how fast you can

actually go.


This posts shows a number of approaches including simple tweaks to logic

design, parallel processing and Rcpp, increasing the speed by orders of

several magnitudes, so you can comfortably process data as large as 100

Million rows and more.


從簡入深介紹一些R加速的技巧，不少在板上都有被討論過


--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1677","M.1454062349.A.8DC","celestialgod","問題","Re: 自寫函數之變項規律命名",2016-01-29 18:12:25,NA,NA,"※ 引述《wanson (望生)》之銘言：: 最近嘗試在寫一個k-means方法的function: 但對R 不是非常熟悉: 目前在對變項命名就卡住: 想說詢問一下: 如果我的function只有data set 跟 k (要取的cluster數目): 請問要怎樣命名第一輪的centroid k: 目前寫到以下，不知道有人可以教一下嗎建議這樣做：

假設data是n x p的矩陣，要分k群，則

label <- sample(1:k, nrow(data), TRUE)

label就是1~k: t<-1:13: kmeans<-function(data,k){: sample=sample(data,k): for(i in 1:k): {: c[i]=sample[i]: }: }: kmeans(t,3): 這邊我想出現c1-c3這樣: 謝謝你如果要出現c1~c3，請用eval

不過跟以往一樣，我不推薦這個方法，就不寫了

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1678","M.1454061945.A.ADB","b10009047","問題","關於平行運算",2016-01-29 18:05:43,NA,NA,"[問題敘述]:

大家好，最近接觸到'snow'這個用於平行運算的package後覺得十分有趣，剛好目前在做
的事情十分需要加快計算速度，因此嘗試使用parRapply, parSapply這些function
突然發現，若是我在parRapply當中在包一個apply，或是parRapply function都會產生
問題，例如 :

library(snow)
library(Rmpi)

data <- matrix(1:6, ncol = 2)
target <- 11:16

cl <- makeCluster(2, type = 'MPI')
parRapply(cl = cl, data, function(x) {
        x <- t(as.matrix(x))
        parRapply(cl = cl, x, function(x){
                target[x]
        })
        })
stopCluster(cl)

會回報錯誤訊息：
Error in checkForRemoteErrors(val) :
2 nodes produced errors; first error: 找不到物件 'cl'

唯一能想像的到的可能為，cl可能是在某個cpu下被定義的，但其他cpu並不知道cl的定義
因此產生以下錯誤訊息，此外也想不到其他可能的原因，想請教是否有人有碰過相同的
問題呢？

謝謝各位！

[軟體熟悉度]:

使用者(對R的基本使用還算熟悉)






--","R_Language"
"1679","M.1453995483.A.A18","girl5566","問題","ggplot contour 使用方式",2016-01-28 23:38:01,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想在ggplot的contour上改變填充顏色(如heatmap)和在線上顯示數字

[程式範例]:

# Generate data
library(reshape2) # for melt
volcano3d <- melt(volcano)
names(volcano3d) <- c(""x"", ""y"", ""z"")

# Basic plot
v <- ggplot(volcano3d, aes(x, y, z = z))
v + geom_tile(aes(fill = z)) + stat_contour()

[環境敘述]:

Win7 32 bit, R.3.2.2

[關鍵字]:

ggplot , contour

--","R_Language"
"1680","M.1453969293.A.662","Schematic","問題","Re: 與資料庫連結的問題",2016-01-28 16:21:31,NA,NA,"試著將錯誤訊息show出

1: In odbcDriverConnect(""DSN=database_name;UID=uid;PWD=passwd"") : [RODBC]
ERROR: state IM002, code 0, message [Microsoft][ODBC]ODBC connection failed

很明顯是與database的連結發生了問題
但這是透過php呼叫R才會發生
php本身與DB連結是ok的
R(利用Rscript或RStudio)與DB連結也ok
所以真的不知道是哪邊沒有設定到※ 引述《Schematic (小小寶的媽)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 將R與SOL server 2012連接(R程式與Database在同一台主機上): 在R Studio的command環境下執行都沒問題，能正常的存取資料庫並做運算: 但若透過網路，從另外一台電腦呼叫RScript的話，就無法執行後續的查詢動作: [程式範例]:: odbcChannel <- odbcConnect(""Database_name"", uid=""uid"", pwd=""pwd""): query <- c(""select * from table_name""): sqlQuery(odbcChannel, query)  <-- RStudio ok，透過PHP呼叫執行的話就會卡住: 有考慮過是不是DSN寫入的地方出問題: 試過以下幾種設定仍是不行: odbcChannel <- odbcConnect(""localhost/Database_name"", uid=""uid"", pwd=""pwd""): odbcChannel <- odbcConnect(""localhost/Server_name/Database_name"",: uid=""uid"", pwd=""pwd""): 另外，在RStudio裡面query若有中文也能正常運作，但一樣透過PHP呼叫script就不行: ex:: query <- c(""select field_name as 中文 from table_name""): [環境敘述]:: R version 3.2.3 (2015-12-10): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows Server >= 2012 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] magrittr_1.5  tidyr_0.3.1   ggplot2_2.0.0 MASS_7.3-45   RODBC_1.3-12: loaded via a namespace (and not attached)::  [1] Rcpp_0.12.2      dplyr_0.4.3      assertthat_0.1   grid_3.2.3:  [5] plyr_1.8.3       R6_2.1.1         gtable_0.1.2     DBI_0.3.1:  [9] scales_0.3.0     tools_3.2.3      munsell_0.4.2    parallel_3.2.3: [13] colorspace_1.2-6: [關鍵字]:::   SQL server 2012:

--","R_Language"
"1681","M.1453954433.A.A9B","jklkj","問題","Re: 定時抓取資料",2016-01-28 12:13:45,NA,NA,"感謝你的回覆
我試了在命令列裡執行Rscript data.R是沒問題的https://www.dropbox.com/s/ggsko2punj6icv4/test3.png?dl=0可是放在工作排程裡就跑不出來https://www.dropbox.com/s/ljgb1wv31mykfhb/test4.png?dl=0想請問一下我的設定有什麼問題嗎https://www.dropbox.com/s/wmaykyqcf3ox9s9/test5.png?dl=0而且我按右鍵執行，狀態是執行中沒錯，可是跑很久都沒完成
想請問各位先進看得出問題所在嗎?
先謝謝了※ 引述《Wush978 (拒看低質媒體)》之銘言：: Hi, 不好意思忘記回你信: 如果你是Windows的機器，就使用工作排程搭配：: https://www.youtube.com/watch?v=A1IIcZW5UrI: 如果你是Linux機器，就請查詢crontab的用法: 如果你有大量的需求，而且又不急，我建議可以使用jenkins: ※ 引述《jklkj (誠實可靠小郎君)》之銘言：: : 文章分類提示:: : - 問題: 當你想要問問題時，請使用這個類別: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 目前在用GA的API定時抓取資料，GA的部分已經完成，: : 但是不知道要怎麼每日定時讓R自動抓取: : 我找到版上有一篇相關的文章#1L79vqJM: : 裡面回文有寫到while(TRUE) if (format(Sys.time(), ""%H"") == ""02""): : do_something() else Sys.sleep(60 * 60)這行程式碼: : 但我不知道要怎麼把我之前寫的塞進去do_something()裡: : [程式範例]:: : 我的GA放在下面的網址: : http://pastebin.com/4s63Z2vc: : 我有請問過別人，他說用個function包住再放去跑，像是: : test <- function(x) {......: : ......: : }: : 這樣: : 可是我試了都沒成功，不要說把function放進去跑: : 連單獨跑function都沒辦法: : 想請問一下這樣是要怎麼結合: : [環境敘述]:: : R 3.2.3: : [關鍵字]:: : 定時--","R_Language"
"1682","M.1453817999.A.455","ariel311","問題","跑羅吉斯迴歸程式疑問",2016-01-26 22:19:57,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:手上有1000*2904的資料,其中自變數與依變數皆為二元變數類型,其需建立Logistic model。找出顯著參數。各參數都已轉換成factor型式,但執行logistic卻還是無法成功。尋求各位高手幫忙解決疑惑，感謝了！[程式範例]:A2 <- as.data.frame(apply(A1,2,factor))mylogistic <- glm(Result ~.,data=A2,family = binomial(logit))Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 + isOF[nn]]) :contrasts can be applied only to factors with 2 or more levels[環境敘述]:程式結果如下：Error in `contrasts<-`(`*tmp*`, value = contr.funs[1 + isOF[nn]]) :contrasts can be applied only to factors with 2 or more levelsR版本：3.2.4 作業系統：WIN7[關鍵字]:邏輯斯迴歸--","R_Language"
"1683","M.1453780847.A.8F6","hanglong","問題","多個子集合選取",2016-01-26 12:00:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:處理比較大量的資料，想要選取某個類別當中的幾個Levels作為子集合，但是只會一個一個將不要的刪除，不知道有沒有一個可以簡單化的程式？[程式範例]:以下為簡單的例子：假設我有個Data Sheet(檔案名稱為Score)：班級    座號    分數A       1       50A       2       60A       3       70B       1       80B       2       90B       3       100C       1       90C       2       80C       3       70D       1       60D       2       50D       3       60若我想要擷取A班的成績：
Score[Score$班級 == ""A"",]
若我想要擷取C班的成績：
Score[Score$班級 == ""C"",]
就可以很容易地擷取出來。

但若我想要同時擷取A & C班的成績，
希望出來的結果：

班級    座號    分數
A       1       50
A       2       60
A       3       70
C       1       90
C       2       80
C       3       70

Score[Score$班級 == ""A"" & Score$班級 == ""C"",]
上面的程式就不會跑出我想要的結果

我就只能將不必要的一一刪除：

Score[Score$班級 != ""B"",]
Score[Score$班級 != ""D"",]
同時跑上面兩行程式，才會出現我要的結果，
但是當Levels很多的時候，就會變得很麻煩，

不知道有沒有比較簡單的程式，可以達成這樣的結果？

[環境敘述]:R 3.1.2[關鍵字]:子集合選取--
如果將字母A到Z分別編上1到26的分數（A=1,B=2...,Z=26）
你的知識（KNOWLEDGE）得到96分（11+14+15+23+12+5+4+7+5=96）
你的努力（HARDWORK）也只得到98分（8+1+18+4+23+15+18+11=98）
你的態度（ATTITUDE）才是左右你生命的全部（1+20+20+9+20+21+4+5=100）

--","R_Language"
"1684","M.1453731304.A.D0D","laputaca","問題","無法反矩陣，singular",2016-01-25 22:15:01,NA,NA,"[問題敘述]:

在執行solve()的時候

出現

Error in solve.default(t(X) %*% X) :
  system is computationally singular: reciprocal condition number =.....

[程式範例]:

solve(t(X)%*%X)

本來X是48個變數，加入了一個新的變數之後

就變成這樣了 =  =...



請問各位大大有遇過這樣的問題嗎?

該如何解決呢?

是因為裡面有兩個變數相關性過高?

煩惱中




--","R_Language"
"1685","M.1453721932.A.040","gbd37","問題","glm函數用for迴圈跑多個data",2016-01-25 19:38:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

程式範例中1的部分會error(第五行)，我想打成像2的部份用迴圈方式run

但glm函數裡data輸入那樣的格式是錯的，請問該怎麼修改呢?

[程式範例]:https://gist.github.com/anonymous/0440728d29c4ae7bdd44[關鍵字]:for glm dplyr

--","R_Language"
"1686","M.1453707422.A.A50","criky","問題","R的製作表格",2016-01-25 15:36:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
1、在做問卷分析時，
會常用到table、t.test、oneway.test函數
要怎麼做表格整理比較好？
是將結果再存成一個變數/矩陣或dataframe嗎？

2、如何將所有ttest、anova檢定的p值取出
存成p.value變數等作法？
一般R的書藉都會強調R的作圖功能強大，
但好像比較少說明R的製表功能~~
謝謝回答~

[環境敘述]:
WIN8

--","R_Language"
"1687","M.1453699139.A.54C","Wush978","問題","Re: 定時抓取資料",2016-01-25 13:18:57,NA,NA,"Hi, 不好意思忘記回你信

如果你是Windows的機器，就使用工作排程搭配：https://www.youtube.com/watch?v=A1IIcZW5UrI如果你是Linux機器，就請查詢crontab的用法

如果你有大量的需求，而且又不急，我建議可以使用jenkins※ 引述《jklkj (誠實可靠小郎君)》之銘言：:: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前在用GA的API定時抓取資料，GA的部分已經完成，: 但是不知道要怎麼每日定時讓R自動抓取: 我找到版上有一篇相關的文章#1L79vqJM: 裡面回文有寫到while(TRUE) if (format(Sys.time(), ""%H"") == ""02""): do_something() else Sys.sleep(60 * 60)這行程式碼: 但我不知道要怎麼把我之前寫的塞進去do_something()裡: [程式範例]:: 我的GA放在下面的網址: http://pastebin.com/4s63Z2vc: 我有請問過別人，他說用個function包住再放去跑，像是: test <- function(x) {......: ......: }: 這樣: 可是我試了都沒成功，不要說把function放進去跑: 連單獨跑function都沒辦法: 想請問一下這樣是要怎麼結合: [環境敘述]::: R 3.2.3:: [關鍵字]::: 定時--","R_Language"
"1688","M.1453697699.A.068","jklkj","問題","定時抓取資料",2016-01-25 12:54:56,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前在用GA的API定時抓取資料，GA的部分已經完成，
但是不知道要怎麼每日定時讓R自動抓取
我找到版上有一篇相關的文章#1L79vqJM裡面回文有寫到while(TRUE) if (format(Sys.time(), ""%H"") == ""02"")
do_something() else Sys.sleep(60 * 60)這行程式碼
但我不知道要怎麼把我之前寫的塞進去do_something()裡

[程式範例]:我的GA放在下面的網址http://pastebin.com/4s63Z2vc我有請問過別人，他說用個function包住再放去跑，像是test <- function(x) {............}這樣可是我試了都沒成功，不要說把function放進去跑連單獨跑function都沒辦法想請問一下這樣是要怎麼結合[環境敘述]:R 3.2.3[關鍵字]:定時--","R_Language"
"1689","M.1453620541.A.17A","Wush978","問題","Re: 在工作站上跑R",2016-01-24 15:28:58,NA,NA,"※ 引述《hnxu ()》之銘言：: [問題類型]::: 程式諮詢:: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 不知道這算是linux的問題還是r的問題: 小弟最近在跑mcmc的程式: 由於要跑很久，所以跟學校申請了工作站: 目前遇到的問題是不知道如何做到以下這件事: 上工作站→跑r→退出工作站→晚點再上工作站看結果: 因為一但在工作站上執行r之後，就無法做其他事，只能等結果: 所以只能一直連著工作站，唯一的好處就是不吃自己電腦的資源: [程式範例]::
:: [環境敘述]::
:: [關鍵字]::: 工作站:

雖然看到很多大大推nohup

但是我想推一下使用screen / tmux 這兩個軟體

這兩個軟體的目是打開一個會持續存在，不會因為你斷線而中斷的shell 環境。

以我現在常用的tmux為例，

你可以打開tmux 之後，直接依照你平常使用的方式輸入：

Rscript xxx.R

然後就可以`ctrl+B , d` 來離開 tmux 提供的shell，斷線。

等到時間差不多了，再連到工作站，輸入： tmux a -t <tmus session number>

ps. 你可以用 tmux list 來列出目前存在的tmux sessions

我自己玩過nohup, 但是非常的不順，常常測了半天，最後斷線後R 還是照斷。

學會tmux後就沒用過nohup。

除了簡單之外，tmux幾乎和我平常使用互動的shell環境一模一樣，所以我不用

額外去記憶其他的環境對離線執行的影響，就只要：

tmux -> Rscript xxx.R ... -> 輸入：`ctrl+B , d`

以上供有需要在工作站跑R 或是其他程序的版友做參考。

另外tmux也提供切割螢幕、同步輸入（同步在不同的電腦中輸入相同的鍵盤指令）等功能

有興趣的板友也可以去裝來玩玩這些功能，在多工作站的時候設定環境很方便。

--","R_Language"
"1690","M.1453617023.A.8F9","oliversu","問題","如何exclude 兩個vectors重複的數",2016-01-24 14:30:21,NA,NA,"[軟體熟悉度]:
入門

[問題敘述]:
我有兩個vectors
分別叫做 sampledata與controldata
controldat是從sampledata隨機取樣3750個
現在我想做一個treatmentdata是把 上述兩個vector重複的數字刪掉


然而，
因為sampledata裡面本身就有重複的數字
如果使用 setdiff這個函數就會發生重複數字被刪除兩次

例如
sampledata{2,3,2,7,5,8,9,8}
controldata{2,8}
預期得到結果 sampledata{3,2,7,5,9,8}

我也試過%in% 的方式，但發現都無法如預期

由於資料頗大，我無法確認%in%的問題出在哪


希望大家幫幫我
我才剛開始摸索R

感謝大家

--","R_Language"
"1691","M.1453601269.A.61A","corel","問題","如何判斷list()為空?",2016-01-24 10:07:46,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[環境敘述]:在下想用 getNodeSet 抓取某網頁(url)中 內含有 messe_treffer 的class名稱

不過不見得每一個網頁內都會有 messe_treffer 的內容

因此有可能抓出來是空值

# url:某網址

messe_treffer<- getNodeSet(url, ""//div[@class='messe_treffer']"")

messe_treffer
# list()
# attr(,""class"")
# [1] ""XMLNodeSet""


秀出來是空值

messe_treffer[1]
# [[1]]
# NULL



可是用 is.null 去判斷它又是成為 false

is.null(messe_treffer[1])
# FALSE


messe_treffer[[1]]
# Error in messe_treffer[[1]] : subscript out of bounds



請問有其它的判斷方式嗎?可以用來判別list()是空值嗎?

謝謝大家> sessionInfo()# R version 3.2.3 (2015-12-10)
# Platform: x86_64-w64-mingw32/x64 (64-bit)
# Running under: Windows 7 x64 (build 7601) Service Pack 1

#locale:
# [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
 (Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
# [4] LC_NUMERIC=C                                 LC_TIME=Chinese
 (Traditional)_Taiwan.950

# attached base packages:
# [1] stats     graphics  grDevices utils     datasets  methods   base

# other attached packages:
# [1] RCurl_1.95-4.7 XML_3.98-1.3   bitops_1.0-6   RMySQL_0.10.7  DBI_0.3.1


# loaded via a namespace (and not attached):
# [1] tools_3.2.3


--

--","R_Language"
"1692","M.1453582323.A.B74","goldberg73","問題","無法開啟Rstudio",2016-01-24 04:52:01,NA,NA,"各位大大好:

我安裝完R後，再去安裝Rstudio，

但Rstudio無法開啟，開啟都會跳出

""Window無法存取指定的裝置 路徑 和檔案。你可能沒有適當的權限，所以無法存取項目""

重新安裝好幾次，試了又試就是無法。

不知道問題出在哪??

謝謝。

--","R_Language"
"1693","M.1453573096.A.861","hnxu","問題","在工作站上跑R",2016-01-24 02:18:14,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:不知道這算是linux的問題還是r的問題小弟最近在跑mcmc的程式由於要跑很久，所以跟學校申請了工作站目前遇到的問題是不知道如何做到以下這件事上工作站→跑r→退出工作站→晚點再上工作站看結果因為一但在工作站上執行r之後，就無法做其他事，只能等結果所以只能一直連著工作站，唯一的好處就是不吃自己電腦的資源[程式範例]:[環境敘述]:[關鍵字]:工作站--","R_Language"
"1694","M.1453395340.A.89E","PhysicsBoy","問題","自動連加連續序號的物件",2016-01-22 00:55:37,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:假設我有 a1=1, a2=2, a3=3我該如何利用迴圈作到a1+a2+a3呢?或者是有辦法讓他自動輸入以用sum()函數加總嗎?[程式範例]:sum_a = 0for(i in 1:3){sum_a  = sum_a + a""i""  # 這個部分就是不知道a""i""要怎麼表示}--離開你的視線~讓情緒完完整整的宣洩~我想今夜就這樣吧~反正孤獨也無所謂~--","R_Language"
"1695","M.1453306897.A.CDE","SleepyChink","問題","function內判讀文字資料",2016-01-21 00:21:35,NA,NA,"cityfreq<-function(area){
a<-as.character(data$city)
city<-c(a)
for(i in 1:length(data$city)){
if(city[i]==""area""){
city[i]<-1
}else{
city[i]<-0
}

}
numcity<-as.numeric(city)
freq<-sum(numcity)
print(freq)
}

cityfreq(Taipei) #預計算的城市
以上是我的程式碼，這樣是無法得到欲求的結果，想請教一下是否function不能夠放欲判讀問子項目?僅能做數值運算?
謝謝

--
Sent from my Windows

--","R_Language"
"1696","M.1453204053.A.533","smallestj","問題","無法安裝Package",2016-01-19 19:47:30,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:大家好，我想用R安裝Package的時候會出現訊息utils::menuInstallPkgs()--- Please select CRAN mirror for use in this session ---錯誤在m[,1L]：維度數目不正確目前有用其他台電腦試過，其他電腦都可正常安裝，麻煩幫忙解答，謝謝 ㄒ^ㄒ[環境敘述]:R version 3.2.3[關鍵字]:Package--","R_Language"
"1697","M.1453173814.A.A31","yaowei2010","問題","怎麼畫區間線段",2016-01-19 11:23:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想畫一個由自訂的區間做成的圖。

input有很多筆資料，每筆有為x1(start),x2(end),y(value)

output為x1→x2同為y值得直線，但每筆資料不必連起來

我有想過用segments去做，但segments要事先plot，我有兩個x值怕會混錯

就不知道怎麼用for loop去寫了orz，想請教版上大大有何提示或解?

[程式範例]:start end value1     10   120    25   230    35   3output希望這樣的圖y^4 |3 |                                    _____2 |                        _____1 |____________0 |____________________________________________________> x1          10          20          30           40--","R_Language"
"1698","M.1453099835.A.C35","jklkj","問題","用R抓取APP後台的資料",2016-01-18 14:50:32,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請問一下R有直接抓取APP後台數據的Package嗎?http://itunesconnect.apple.comhttps://play.google.com/apps/publish或是有先進們有做過類似的東西?謝謝[程式範例]:[環境敘述]:[關鍵字]:APP 後台--","R_Language"
"1699","M.1453024733.A.16E","ming790925","問題","想解決字在圖上 overlapping",2016-01-17 17:58:50,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我在繪製scatter plot時候，想要把每一個點的ID標在旁邊，但直接用text()函數，
則有一些太近的點的ID就會重疊在一起，想請教一下有沒有package/ function
可以解決這問題，畫比較精美的圖 感謝！

[程式範例]:

a <- c(rnorm(10,-3,2),rnorm(10,3,2))
b <- c(rnorm(10,-3,2),rnorm(10,3,2))
dfr <- data.frame(a,b)
dfr$t <- c(paste(""A"",1:10,sep=""""),paste(""B"",1:10,sep="""")) #ID of points
dfr[1,1]=dfr[5,1]+rnorm(1,0,0.0001)
dfr[1,2]=dfr[5,2]+rnorm(1,0,0.0001)

dfr[7,1]=dfr[10,1]+rnorm(1,0,0.0001)
dfr[7,2]=dfr[10,2]+rnorm(1,0,0.0001)

plot(dfr$a,dfr$b,main=""Plot"")
text(dfr$a+0.5,dfr$b+0,5,dfr$t)

[關鍵字]:scatter plot, text, overlapping, plot, text--","R_Language"
"1700","M.1452850330.A.175","EricTao","問題","Re: shiny output可否點選後再呈現詳細資料",2016-01-15 17:32:07,NA,NA,": [問題敘述]:: 目前使用R跑poisson模型: 有10組模型參數的設定: 想要先在shiny中 先將模型的評估值先呈現(10組數值): 然後user可以點選其中一組數值: 下面再呈現該組數值所對應的模型結果以及一些細項資料: 不知道shiny可否做到從第一次的output中: 選擇其中一個結果: 下面再呈現所對應的資訊?不知道是不是這個意思,
#
output$chooseY<-renderUI({
        selectInput(""Y"",""choose Y"",colnames(data))
})
#
這樣可以把data的colnames作為select Input的選項

之後再用eval parse paste把Y的值接回data$的後面

前幾篇C板有說eval危險，可是那個改寫我看不懂QQ

--","R_Language"
"1701","M.1452846286.A.849","cdfq384903","問題","重新執行程式碼的問題",2016-01-15 16:24:43,NA,NA,"[問題類型]:效能諮詢

[軟體熟悉度]:入門

[問題敘述]:
您好 :
請教各位一個有關程式碼重複執行的問題，由於目前我編寫的code是有和外部軟體
GUIDE做橋接並同時模擬資料的程式碼，但在某些條件下必須從新模擬資料並分析，
我是使用while迴圈去執行但{}裡面的程式碼是我之前就打過的(在R-studio裡面是
已經執行過的第122列至第537列)，我目前的笨作法只能複製第122列至537列到while
的{}裡，但只要這段程式碼當中我有修改過某些地方就必須得再從新複製貼上一次。
我想詢問是否有一個函數它可以讓我選擇已經執行過的code在執行一次
類似XXXXX(from=122,to=537)這種感覺
這樣在那個區段內的code我即使修改過他也能自動偵測並重複執行既省時更便利。
我有搜尋過只有找到類似展開/縮縮排 列的功能

[環境敘述]:
R-3.1.3
R-studio 0.98.1091

--","R_Language"
"1702","M.1452842512.A.F9A","celestialgod","問題","Re: 如何讀入多個CSV檔",2016-01-15 15:21:48,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 感謝各位的幫助，我目前資料讀取沒甚麼問題了，是後面卡關了: 我寫一個早上都沒辦法突破，我先把資料貼上來，因為用敘述的好像很難: https://goo.gl/DpkiII，這是我目前用的資料連結失效: 要寫出一個能夠算出sulfate或nitrate的平均數的function: 我目前是想說用土法煉鋼的方式將資料讀進來然後用dplyr的函數來篩選: 我寫成這樣pollutanmean<-function (directory, pollutan, id=1:332 ) {:                 csv_file<-vector(""list"",length(directory)):                 for (i in seq_along(directory)) {:                         csv_file[[i]]<-read.csv(directory[[i]]):                 }:                         s<-0:                         do.call(rbind,csv_file)->completedata:                         library(dplyr):                         final<-completedata %>% filter(ID==id) %>%:                         select(""pollutan""):                         s+mean(final,na.rm=TRUE)->s:                         return(s)library(data.table)
library(plyr)
library(dplyr)
library(magrittr)

pollutanmean <- function(csvFilesLoc, pollutan, id = 1:332){
# other method for reading data
# sprintf('%s/%03i.csv', csvFilesLoc, id) %>% llply(fread) %>% bind_rows %>%
  list.files(csvFilesLoc, full.names = TRUE, pattern = '\\.csv') %>%
    {llply(.[id], fread)} %>% bind_rows %>%
    summarise_(.dots = paste0(""mean("", pollutan, "", na.rm = TRUE)"")) %>%
    unlist %>% set_names(NULL) %>% return
}
# sulfate, nitrate
pollutanmean('specdata', 'nitrate', 1:20) # 0.8286293
pollutanmean('specdata', 'sulfate', 70:80) # 2.712632: 我有碰到一個問題是我想用read.csv只讀我想要的CSV檔案就好了: 但是list[[id]]這樣的寫法會有問題，應該是裡面只能放一個數字: 假設id是1:10這樣的話就會有問題，然後我就想是不是可以用for (i in seq_along(id))seq_along是沿著id長度，所以下面要用id，要使用id[i]

不然就是直接 for (i in id): 這樣的方式去讀，可是假設使用者將id填入68:70，我發現seq_along會傳回1、2、3: 這樣的數字，所以我只好把所有CSV檔案都讀進來然後用昨天學到的do.call將所有: 檔案合併然後用filter篩選ID為使用者填入的id，接著選擇sulfate或nitrate: 其中一個變數然後做平均接著傳回來: 我得到下面的error提示: Error: All select() inputs must resolve to integer column positions.select不能用字串，請用select_: The following do not:: *  ""pollutan"":  In addition: Warning message:: In c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,  ::   longer object length is not a multiple of shorter object length: 第一個我覺得是說要叫我指定變數的位置，但是我學到的select的直接放: 我想要留下來的變數名稱就好了，第二個我就真的看不懂他在寫什麼了: 想請問我中間的邏輯哪邊有錯，不好意思一直在同一個問題打轉。--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1703","M.1452831035.A.AC1","clansoda","問題","Re: 如何讀入多個CSV檔",2016-01-15 12:10:30,NA,NA,"感謝各位的幫助，我目前資料讀取沒甚麼問題了，是後面卡關了

我寫一個早上都沒辦法突破，我先把資料貼上來，因為用敘述的好像很難https://goo.gl/DpkiII，這是我目前用的資料

要寫出一個能夠算出sulfate或nitrate的平均數的function

我目前是想說用土法煉鋼的方式將資料讀進來然後用dplyr的函數來篩選

我寫成這樣pollutanmean<-function (directory, pollutan, id=1:332 ) {
                csv_file<-vector(""list"",length(directory))
                for (i in seq_along(directory)) {
                        csv_file[[i]]<-read.csv(directory[[i]])
                }
                        s<-0
                        do.call(rbind,csv_file)->completedata
                        library(dplyr)
                        final<-completedata %>% filter(ID==id) %>%
                        select(""pollutan"")
                        s+mean(final,na.rm=TRUE)->s
                        return(s)

我有碰到一個問題是我想用read.csv只讀我想要的CSV檔案就好了

但是list[[id]]這樣的寫法會有問題，應該是裡面只能放一個數字

假設id是1:10這樣的話就會有問題，然後我就想是不是可以用for (i in seq_along(id))

這樣的方式去讀，可是假設使用者將id填入68:70，我發現seq_along會傳回1、2、3

這樣的數字，所以我只好把所有CSV檔案都讀進來然後用昨天學到的do.call將所有

檔案合併然後用filter篩選ID為使用者填入的id，接著選擇sulfate或nitrate

其中一個變數然後做平均接著傳回來

我得到下面的error提示

Error: All select() inputs must resolve to integer column positions.
The following do not:
*  ""pollutan""

 In addition: Warning message:
In c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,  :
  longer object length is not a multiple of shorter object length

第一個我覺得是說要叫我指定變數的位置，但是我學到的select的直接放

我想要留下來的變數名稱就好了，第二個我就真的看不懂他在寫什麼了

想請問我中間的邏輯哪邊有錯，不好意思一直在同一個問題打轉。

--","R_Language"
"1704","M.1452792931.A.F2E","rockken","問題","Re: 如何讀入多個CSV檔",2016-01-15 01:35:28,NA,NA,"好像有很多人回應了這問題，不過我剛剛想了一方法也提供你看看

path <- "" "" <= 填入你自己檔路徑境  ex:  ""C:/csv/""

files <- list.files(path=path, pattern=""*.csv"")

了解路徑中所有 .csv 資料名稱。

a<-function(x) read.csv(x
                      , stringsAsFactors = FALSE)
利用 lapply 去讀資料

myfiles = lapply(paste(path,files,sep=""""), a)

如果你的資料很規則可使用下列方法合併

rmyfiles = do.call(rbind, lapply(paste(path,files,sep=""""), a))

有小小試了 3 csv 檔，應該可行提供你參考。※ 引述《clansoda (小笨)》之銘言：: 最近在Coursera上面自己學習R語言，可是礙於過去沒寫過程式也沒人能討論: 因此問的問題很淺顯希望大家見諒: 我現在遇到一個老師給的習題，要我們讀入332個CSV檔案來寫出算平均數的: Function，我目前是用list.file這個函數先將所有CSV檔案弄成一個list: 那應該就會有一個list有332個vector，我想用for函數讀CSV檔: 我寫成for (i in 1:length(kk)) {read.csv(""D:/kk[[i]].csv"")->item}: KK是list的名稱 這樣如果i為一她應該會讀list的第一項叫做001.csv的檔案: 這是我自己的想法，可是拿去跑之後會顯示 Error in file(file, ""rt"") : cannot open the connection In addition: Warning: message:: In file(file, ""rt"") ::   cannot open file 'specdata/kktix[[i]]': No such file or directory: 不知道版上有沒有大大可以糾正我的寫法跟觀念。: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次)--","R_Language"
"1705","M.1452790996.A.F3A","celestialgod","問題","Re: 如何讀入多個CSV檔",2016-01-15 01:03:13,NA,NA,"data_1.csv:

ID, time, A, B
1, 0, 1.2, 9
2, 1, 1.5, 7
3, 3, 2.3, 5
4, 4, 3.1, 4

data_2.csv:

ID, time, A, B
1, 0, 0.9, 11
2, 2, 1.2, 2
3, 4, 2.3, 3
4, 5, 3.7, 2

file_list  <- c('data_1.csv', 'data_2.csv')
table_list <- vector('list', length(file_list))
for (i in seq_along(file_list))
    table_list[[i]] <- read.csv(file_list[[i]])

out_f = function(data, pullution_type, filter_ID)
{
  s <- 0
  for (i in seq_along(data))
  {
      s <- s + sum(subset(data[[i]],
          ID %in% filter_ID)[[pullution_type]])
  }
  return(s)
}
out_f(table_list, 'A', 1:2) # 4.8※ 引述《clansoda (小笨)》之銘言：:          是這樣的，導師給我們的題目是他給一個資料擁有332個CSV檔案:          這個在文章裡面提過，每個CSV檔案都有四個變數分別是時間:          、兩種空氣汙染假設為汙染A和汙染B都是numeric變數、最後是ID變數。:          主要是要寫出一個function讓跑出來的數值會是汙染變數的平均數。:          最後的結果要是function(data進去，指定A汙染或B汙染，ID 例如2:70):         function出來以後會是某個數值，就是A汙染或者B汙染在2到70號:         CSV的數值總和然後平均 ，我現在的問題是如果我寫function:         以後後面的變數要怎麼設定才會是讓使用者填入資料，因為課堂上:         教的都是給一個X或Y值然後變數裡面關聯變數來計算但是沒看過:         還可以讓使用者選要填入變數名稱的所以不知道該如何寫起。就是第二個:         argument讓使用者填入A汙染或B汙染其中一種，這個不知道要怎麼寫前面:         的argument好讓使用者填入。--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1706","M.1452785525.A.A62","clansoda","問題","Re: 如何讀入多個CSV檔",2016-01-14 23:32:01,NA,NA,"是這樣的，導師給我們的題目是他給一個資料擁有332個CSV檔案

         這個在文章裡面提過，每個CSV檔案都有四個變數分別是時間

         、兩種空氣汙染假設為汙染A和汙染B都是numeric變數、最後是ID變數。

         主要是要寫出一個function讓跑出來的數值會是汙染變數的平均數。

         最後的結果要是function(data進去，指定A汙染或B汙染，ID 例如2:70)

        function出來以後會是某個數值，就是A汙染或者B汙染在2到70號

        CSV的數值總和然後平均 ，我現在的問題是如果我寫function

        以後後面的變數要怎麼設定才會是讓使用者填入資料，因為課堂上

        教的都是給一個X或Y值然後變數裡面關聯變數來計算但是沒看過

        還可以讓使用者選要填入變數名稱的所以不知道該如何寫起。就是第二個

        argument讓使用者填入A汙染或B汙染其中一種，這個不知道要怎麼寫前面

        的argument好讓使用者填入。

--","R_Language"
"1707","M.1452777594.A.FA6","PhysicsBoy","問題","迴圈內新增物件自動命名的問題",2016-01-14 21:19:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的有一矩陣 S存在各個不同的.rda檔案中
當然不同的.rda檔案中會有不同的S元素值
每次我會先取出S中最大的值去決定迴圈的數目
如:
n = max(S)

for(i in 1:n)
{
        k""1"" = H(which == i)  # H是另一個純放數據的矩陣
}
問題來了，程式範例中迴圈裡是用k記錄我所挑選出來的數據
而有上引號""""中的數字1代表示第一次迴圈的標記
第二輪迴圈則希望是由k2來記錄，依此類推

有什麼方法可以讓他自動產生k1,k2.....kn呢?

煩請大大們指導
謝謝



--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"1708","M.1452764266.A.A7D","celestialgod","問題","Re: 如何讀入多個CSV檔",2016-01-14 17:37:42,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 最近在Coursera上面自己學習R語言，可是礙於過去沒寫過程式也沒人能討論: 因此問的問題很淺顯希望大家見諒歡迎常來討論^^: 我現在遇到一個老師給的習題，要我們讀入332個CSV檔案來寫出算平均數的: Function，我目前是用list.file這個函數先將所有CSV檔案弄成一個list: 那應該就會有一個list有332個vector，我想用for函數讀CSV檔: 我寫成for (i in 1:length(kk)) {read.csv(""D:/kk[[i]].csv"")->item}"" "" 裡面一定是字串，你裡面放變數，他也不會跑出來

要那樣做只能：

eval(parse(text = paste0(""D:/"", kk[[i]])))

但是我並不推薦用eval的作法 我在MATLAB板每次都會強調eval is evil!

所以下面示範一個比較好的方式做處理: KK是list的名稱 這樣如果i為一她應該會讀list的第一項叫做001.csv的檔案: 這是我自己的想法，可是拿去跑之後會顯示 Error in file(file, ""rt"") : cannot open the connection In addition: Warning: message:: In file(file, ""rt"") ::   cannot open file 'specdata/kktix[[i]]': No such file or directory: 不知道版上有沒有大大可以糾正我的寫法跟觀念。: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次)csv_files <- list.files()[grepl('\\.csv', list.files())] # 抓出.csv結尾的檔案
csv_tables <- vector('list', length(csv_files))
for (i in seq_along(csv_files))
    csv_tables[[i]] <- read.csv(csv_files[[i]])

如果你的檔案不是在工作目錄可以這樣改：
files <- list.files('path/to/csv', full.names = TRUE)
csv_files <- files[grepl('\\.csv', files)]

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1709","M.1452763973.A.C2C","clansoda",NA,"[問題如何讀入多個CSV檔",2016-01-14 17:32:49,NA,NA,"最近在Coursera上面自己學習R語言，可是礙於過去沒寫過程式也沒人能討論

因此問的問題很淺顯希望大家見諒

我現在遇到一個老師給的習題，要我們讀入332個CSV檔案來寫出算平均數的

Function，我目前是用list.file這個函數先將所有CSV檔案弄成一個list

那應該就會有一個list有332個vector，我想用for函數讀CSV檔

我寫成for (i in 1:length(kk)) {read.csv(""D:/kk[[i]].csv"")->item}

KK是list的名稱 這樣如果i為一她應該會讀list的第一項叫做001.csv的檔案

這是我自己的想法，可是拿去跑之後會顯示 Error in file(file, ""rt"") : cannot open the connection In addition: Warning
message:
In file(file, ""rt"") :
  cannot open file 'specdata/kktix[[i]]': No such file or directory

不知道版上有沒有大大可以糾正我的寫法跟觀念。




[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)--","R_Language"
"1710","M.1452701396.A.C47","tony5566","問題","影像相似度",2016-01-14 00:09:54,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

請教一下在R裡面要如何進行影像相似度的分析呢?  影像本身會有旋轉或偏移的問題

肉眼上會覺得相似，但可能不一定在相同位置上

[程式範例]:

無

[環境敘述]:

R3.1 Win 8

[關鍵字]:


--","R_Language"
"1711","M.1452693740.A.CDE","girl5566","問題","ROracle 32 bit 環境可以用嗎?",2016-01-13 22:02:17,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手

[問題敘述]:
ROracle官方的package僅提供64bit的電腦使用

有人知道要如何重新編譯成32bit 的版本嗎??

[程式範例]:

[環境敘述]:

Win7 32 bit

[關鍵字]:

--","R_Language"
"1712","M.1452693515.A.5D9","girl5566","問題","程式效能改進",2016-01-13 21:58:32,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

為了要做圖片比對的動作，所以針對table進行複製，再做相關係數分析找出偏移量

但是這部分大約需要花16~25秒，想詢問看看有沒有更好的寫法

總共有1000多張圖  所以希望先降低這部分的所需時間

[程式範例]:http://pastie.org/10687356[環境敘述]:

Win7, R 3.2.2

[關鍵字]:

--","R_Language"
"1713","M.1452676654.A.3E6","celestialgod","問題","Re: 擷取網頁內的某一筆資料",2016-01-13 17:17:31,NA,NA,"※ 引述《corel (可羅)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: # Q:想要擷取出網頁中某區塊標籤所有的文字,包含html標籤等內的某一資料: #結果:: #擷取出網頁內所有同屬性的資料...: # crawl library ----: library(bitops): library(XML): library(RCurl): # only for windows -----: signatures <- system.file(""CurlSSL"", cainfo=""cacert.pem"", package=""RCurl""): # 網址縮址 http://tinyurl.com/jgoun9c: home <-: ""http://www.expodatabase.com/aussteller/messen/index.php?OK=1&sortierid=0&maxPerPage=20&i_cockpitkeyfindwo=2&i_cockpitkeyfindart=1&currPage=1"": home <- getURL(home, cainfo = signatures): home <- htmlParse(home): # 共有20筆的block: block <-getNodeSet(home, ""//div[@class='shm']""): # length(block)  # 共20筆: doc <- block[[1]] #  抓取第一筆: # doc: # <div class=""shm"">: #   <div class=""listdates"">: #   <div class=""date"">08Jan-17Jan2016</div>: #   </div>: #   <div class=""search_result_list_box"">: #   <div class=""city"">London, United Kingdom</div>: #   <div class=""firma""><a: href=""show.php?id=352&amp;timer=m1452657261&amp;tmid=&amp;currPage=1&amp;maxPerPage=20&amp;params=timer%3Dm1452657261%26amp%3Btimer%3Dm1452657261%26amp%3Bi_cockpitkeyfindwo%3D2%26amp%3Bi_cockpitkeyfindart%3D1%26amp%3Bsortierid%3D0%26amp%3Btimer%3Dm1452657261%26amp%3BmaxPerPage%3D20%26amp%3BshowPrintlist%3D0%26amp%3BmaxPerPage%3D20"">London: Boat Show</a></div>: #   </div>: #   <div class=""search_result_box_right"">: #   <div class=""branchen""><strong>Business sectors:</strong> Boats</div>: #   </div>: #   <div class=""fixfloat""></div>: # </div>: # 想要抓取 block[[1]]筆的 class=""date"" 的 08Jan-17Jan2016: date <- xpathSApply(doc, ""//div[@class='date']"", xmlValue): # 結果秀出網頁內全部 date 的資料: # [1] ""08Jan-17Jan2016"" ""08Jan-17Jan2016"" ""09Jan-17Jan2016"" ""07Jan-15Jan2017"": ""06Jan-14Jan2018"": # [6] ""09Jan-17Jan2016"" ""09Jan-17Jan2016"" ""09Jan-17Jan2016"" ""09Jan-17Jan2016"": ""10Jan-13Jan2016"": # [11] ""10Jan-13Jan2016"" ""10Jan-13Jan2016"" ""10Jan-13Jan2016"": ""11Jan-13Jan2016"" ""11Jan-13Jan2016"": # [16] ""11Jan-13Jan2016"" ""11Jan-14Jan2016"" ""11Jan-14Jan2016"": ""11Jan-14Jan2016"" ""11Jan-14Jan2016"": # [21] ""11Jan-14Jan2016"" ""11Jan-24Jan2016"" ""09Jan-22Jan2017"": 我的問題是, doc <- block[[1]]: 不是己經抓取出 於 block 中第一筆資料並且儲存在doc中嗎?: 結果用 xpathSpply 擷出來的..竟然是網頁中 date 全部資料?: 想請教一下, 我該用那一個函數或方法才能只抓到 block[[1]]中 xml的資料?: 並且解析出 date 為 08Jan-17Jan2016 ?: 謝謝: #線上程式:: # http://ideone.com/ZqHAqr個人經驗，XML需要比較多的記憶體又比較慢，還有可能有memory leak的問題

我推薦你用xml2這個套件XD

library(xml2)
library(magrittr)
library(RCurl)

home <-
""http://www.expodatabase.com/aussteller/messen/index.php?OK=1&sortierid=0&maxPerPage=20&currPage=1""
signatures <- system.file(""CurlSSL"", cainfo=""cacert.pem"", package=""RCurl"")
html_page <- getURL(home, cainfo = signatures)

read_html(html_page) %>% xml_find_all("".//div[@class='shm']"") %>% .[[1]] %>%
  xml_find_all("".//div[@class='date']"") %>% xml_text
# [1] ""08Jan-17Jan2016""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1714","M.1452671934.A.59B","yaohwei","問題","如何求複雜方程式的解",2016-01-13 15:58:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
請問各位高手，如何求下面複雜方程式的解

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
針對方程式:(下面係數1~4是隨便取的)
(1+2/(3+x))^x=4
如何求解x?

非常謝謝各位的幫助

--","R_Language"
"1715","M.1452657983.A.FDA","corel","問題","擷取網頁內的某一筆資料",2016-01-13 12:06:11,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的# Q:想要擷取出網頁中某區塊標籤所有的文字,包含html標籤等內的某一資料

#結果:
#擷取出網頁內所有同屬性的資料...

# crawl library ----
library(bitops)
library(XML)
library(RCurl)

# only for windows -----
signatures <- system.file(""CurlSSL"", cainfo=""cacert.pem"", package=""RCurl"")

# 網址縮址http://tinyurl.com/jgoun9chome <-
""http://www.expodatabase.com/aussteller/messen/index.php?OK=1&sortierid=0&maxPerPage=20&i_cockpitkeyfindwo=2&i_cockpitkeyfindart=1&currPage=1""home <- getURL(home, cainfo = signatures)
home <- htmlParse(home)



# 共有20筆的block
block <-getNodeSet(home, ""//div[@class='shm']"")



# length(block)  # 共20筆



doc <- block[[1]] #  抓取第一筆

# doc
# <div class=""shm"">
#   <div class=""listdates"">
#   <div class=""date"">08Jan-17Jan2016</div>
#   </div>
#   <div class=""search_result_list_box"">
#   <div class=""city"">London, United Kingdom</div>
#   <div class=""firma""><a
href=""show.php?id=352&amp;timer=m1452657261&amp;tmid=&amp;currPage=1&amp;maxPerPage=20&amp;params=timer%3Dm1452657261%26amp%3Btimer%3Dm1452657261%26amp%3Bi_cockpitkeyfindwo%3D2%26amp%3Bi_cockpitkeyfindart%3D1%26amp%3Bsortierid%3D0%26amp%3Btimer%3Dm1452657261%26amp%3BmaxPerPage%3D20%26amp%3BshowPrintlist%3D0%26amp%3BmaxPerPage%3D20"">London
Boat Show</a></div>
#   </div>
#   <div class=""search_result_box_right"">
#   <div class=""branchen""><strong>Business sectors:</strong> Boats</div>
#   </div>
#   <div class=""fixfloat""></div>
# </div>


# 想要抓取 block[[1]]筆的 class=""date"" 的 08Jan-17Jan2016
date <- xpathSApply(doc, ""//div[@class='date']"", xmlValue)

# 結果秀出網頁內全部 date 的資料
# [1] ""08Jan-17Jan2016"" ""08Jan-17Jan2016"" ""09Jan-17Jan2016"" ""07Jan-15Jan2017""
""06Jan-14Jan2018""
# [6] ""09Jan-17Jan2016"" ""09Jan-17Jan2016"" ""09Jan-17Jan2016"" ""09Jan-17Jan2016""
""10Jan-13Jan2016""
# [11] ""10Jan-13Jan2016"" ""10Jan-13Jan2016"" ""10Jan-13Jan2016""
""11Jan-13Jan2016"" ""11Jan-13Jan2016""
# [16] ""11Jan-13Jan2016"" ""11Jan-14Jan2016"" ""11Jan-14Jan2016""
""11Jan-14Jan2016"" ""11Jan-14Jan2016""
# [21] ""11Jan-14Jan2016"" ""11Jan-24Jan2016"" ""09Jan-22Jan2017""



我的問題是, doc <- block[[1]]

不是己經抓取出 於 block 中第一筆資料並且儲存在doc中嗎?

結果用 xpathSpply 擷出來的..竟然是網頁中 date 全部資料?

想請教一下, 我該用那一個函數或方法才能只抓到 block[[1]]中 xml的資料?

並且解析出 date 為 08Jan-17Jan2016 ?

謝謝


#線上程式:
#http://ideone.com/ZqHAqr--

--","R_Language"
"1716","M.1452515905.A.9AB","naturalsmen","問題","shiny Error in get(Symbol)",2016-01-11 20:38:22,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
試著將用quantstrat pkg寫的回測程式deploy到shiny

如範例

但一按下左上角的啟動後

shiny卻顯示Error in get(symbol) : object 'BDCL' not found

不太確定是哪行程式碼的問題

[程式範例]:
ui.Rhttp://pastie.org/10683426server.Rhttp://pastie.org/10683431其實我的問題跟這篇一樣http://goo.gl/DoQiWJ所以就借用了一下code

雖然原PO下面有留他的解決方法

但我這邊還是不行

加了saveSymbols(Symbols=symbols, file.path=stop(getwd()))後

會出現Error in C://~My//~Path

請問大大們有沒有什麼解決辦法？

估狗上好像沒什麼人遇到類似的問題@@

謝謝

[環境敘述]:
R version 3.2.1 (2015-06-18)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.1


[關鍵字]:

shiny quantstrat

--","R_Language"
"1717","M.1452512281.A.141","celestialgod","問題","Re: 依條件篩選資料&串檔",2016-01-11 19:37:57,NA,NA,"※ 引述《developme223 (allen)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::     目前有兩組資料，一組是首次上市櫃公司，另一組是已上市櫃公司: ，想把已上市櫃公司對首次上市櫃公司做配對，配對條件為已上市櫃公司: 的總資產介於[IPOs總資產*70%,IPOs總資產*130%]區間內，即符合配對條件。: 資料型態如下：: 首次上市櫃公司(IPOs)            已上市櫃公司:     Code    Asset                Code    Asset: 1   9955   2097959            1  1101   32922000: 2   3535   2364161            2  1102   28988000: 3   3519  13352343            3  1103    7258000: 4   1583   6534372            4   .        .: 5   4306   8500026            5   .        .:     .         .               .   .        .:     .         .               .   .        .:     .         .               .   .        .:     .         .               .   .        .: 50  .         .              1000 .        .: ----> 想把整理資料成如下型式:  首次上市櫃公司(IPOs):     IPOs$Code        已上市櫃公司$Code       EX：9955的總資產*7/10=1468571.3: 1      9955               1110                   9955的總資產*13/10=2727346.7: 1      9955               1201              總資產介於[1468571.3,2727346.7]的: 1      9955               1203              已上市櫃公司，整理於IPOs$Code旁邊: 1      9955               1216                   。: 1      9955               1218: 2      3535               1503: 2      3535               1507: 2      3535               1530: 2      3535               1537: 2      3535               1525: 3      3519               1618: 3      3519               1537: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: .        .                 .: 50       .                 .: 50       .                 .: 50       .                 .: 想請教各位高手，in R 如何處理，感謝。library(data.table)
library(plyr)
library(dplyr)
library(magrittr)

# data generation
set.seed(15) # for reproduction
numIPOs = 50
IPOs_DT = data.table(code = sprintf('%04i', sample(1:9999, numIPOs)),
  asset = rgamma(numIPOs, 20, 37)*10**sample(4:5, numIPOs, TRUE)) %>%
  tbl_dt(FALSE)
# Source: local data table [50 x 2]
#
#     code     asset
#    (chr)     (dbl)
# 1   6021 57969.857
# 2   1951 61825.953
# 3   9662 44892.029
# 4   6507  6215.292
# 5   3669  4576.075
# 6   9883  5275.881
# 7   8147  7143.431
# 8   2538  6206.857
# 9   6867  6486.436
# 10  8306 58442.176
# ..   ...       ...

# 我不知道已上市櫃公司怎麼簡寫，我就用publicly traded company (PTC)
numPTCs = 1000
PTCs_DT = data.table(code = sample(setdiff(sprintf('%04i', 1:9999),
    IPOs_DT$code), numPTCs),
  asset = rgamma(numPTCs, 20, 37)*10**sample(4:5, numPTCs, TRUE)) %>%
  tbl_dt(FALSE)
# Source: local data table [1,000 x 2]
#
#     code     asset
#    (chr)     (dbl)
# 1   9806  6434.788
# 2   6575 74880.446
# 3   5375 65993.185
# 4   6302  4111.247
# 5   3780  5615.484
# 6   7290 51964.095
# 7   7131 38961.114
# 8   0656 32934.782
# 9   9688  6426.658
# 10  3223  2596.685
# ..   ...       ...

IPOs_DT %>% mutate(asset_p70 = asset*0.7, asset_p130 = asset*1.3) %>%
  ddply(.(code), function(subDT){
    PTCs_DT %>%
      filter(asset >= subDT$asset_p70, asset <= subDT$asset_p130) %>%
      setnames(c('PTCs_code', 'PTCs_asset')) %>%
      mutate(IPOs_code = subDT$code, IPOs_asset = subDT$asset)
  }) %>% tbl_df %>% select(-code)
# Source: local data frame [17,878 x 4]
#
#    PTCs_code PTCs_asset IPOs_code IPOs_asset
#        (chr)      (dbl)     (chr)      (dbl)
# 1       6575   74880.45      0109   61598.19
# 2       9688   64266.58      0109   61598.19
# 3       4209   44089.71      0109   61598.19
# 4       8604   45265.31      0109   61598.19
# 5       4742   48381.22      0109   61598.19
# 6       6318   49848.99      0109   61598.19
# 7       6651   60117.82      0109   61598.19
# 8       4046   43568.23      0109   61598.19
# 9       6646   49588.79      0109   61598.19
# 10      2829   45721.72      0109   61598.19
# ..       ...        ...       ...        ...

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1718","M.1452508505.A.AA4","developme223","問題","依條件篩選資料&串檔",2016-01-11 18:35:02,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

    目前有兩組資料，一組是首次上市櫃公司，另一組是已上市櫃公司

，想把已上市櫃公司對首次上市櫃公司做配對，配對條件為已上市櫃公司

的總資產介於[IPOs總資產*70%,IPOs總資產*130%]區間內，即符合配對條件。


資料型態如下：

首次上市櫃公司(IPOs)            已上市櫃公司

    Code    Asset                Code    Asset
1   9955   2097959            1  1101   32922000
2   3535   2364161            2  1102   28988000
3   3519  13352343            3  1103    7258000
4   1583   6534372            4   .        .
5   4306   8500026            5   .        .
    .         .               .   .        .
    .         .               .   .        .
    .         .               .   .        .
    .         .               .   .        .
50  .         .              1000 .        .



----> 想把整理資料成如下型式

 首次上市櫃公司(IPOs)
    IPOs$Code        已上市櫃公司$Code       EX：9955的總資產*7/10=1468571.3
1      9955               1110                   9955的總資產*13/10=2727346.7
1      9955               1201              總資產介於[1468571.3,2727346.7]的
1      9955               1203              已上市櫃公司，整理於IPOs$Code旁邊
1      9955               1216                   。
1      9955               1218

2      3535               1503
2      3535               1507
2      3535               1530
2      3535               1537
2      3535               1525

3      3519               1618
3      3519               1537

.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
.        .                 .
50       .                 .
50       .                 .
50       .                 .



想請教各位高手，in R 如何處理，感謝。



--","R_Language"
"1719","M.1452325751.A.7A0","celestialgod","問題","Re: 使用正則來分割字串",2016-01-09 15:49:09,NA,NA,"※ 引述《corel (可羅)》之銘言：: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): 大家好,小弟是R新手: 假設我有二個字串的格式如下: [1] ""03Jan-05Jan201602Jul-04Jul2016"": [2] ""06Jan-09Jan2016January 2017"": 我想要把它分離成: ""03Jan-05Jan2016"": ""02Jul-04Jul2016"": 與: ""06Jan-09Jan2016"": ""January 2017"": [1][2]只是舉例,其實想要處理字串的長度不一: 小弟有想到用正則表示式來處理, 以下是我的寫法: # 針對06Jan-09Jan2016格式設計的正則表示式方法: s <- ""03Jan-05Jan201602Jul-04Jul2016"": x <- gsub(""(((0[1-9]|[12][0-9]|3[01]{2})[a-zA-Z]{3})-:            ((0[1-9]|[12][0-9]|3[01]{2})[a-zA-Z]{3})[0-9]{4})"","";"",s): x: # 只不過斷出來的字串是: # OUT PUT "";;"": 其實我想要斷出來的字串是: Result 1:: ""03Jan-05Jan2016;02Jul-04Jul2016"": 或: Result 2:: ""03Jan-05Jan2016"": ""02Jul-04Jul2016"": 在此,想請問大家, 在R之中是否有其它函數配合 正則表示式用來斷出: Result 1或是 Result 2的結果?: 謝謝大家x = c(""03Jan-05Jan201602Jul-04Jul2016"", ""06Jan-09Jan2016January 2017"")
pattern1 = ""(\\d{2}[a-zA-Z]{3}-\\d{2}[a-zA-Z]{3}\\d{4})""
pattern2 = ""([a-zA-Z]*\\s\\d{4})""
regexpRes = regexec(paste0(pattern1, pattern1, '?', pattern2, '?'), x)
lapply(regmatches(x, regexpRes), function(x){
  x[nchar(x) > 0 & c(FALSE, rep(TRUE, length(x)-1))]
})
#
# [[1]]
# [1] ""03Jan-05Jan2016"" ""02Jul-04Jul2016""
#
# [[2]]
# [1] ""06Jan-09Jan2016"" ""January 2017""

後面新問題：

字串它可能會有

[1]""03Jan-05Jan201602Jul-04Jul201602Dec-04Dec2016""  #三筆同格式

[2]""06Jan-09Jan2016January 2017""                    #二筆不同格式

[3]""May 201607Jan-08Jan2016""                        #二筆不同格式

[4]""07Jan-10Jan2016MAY 201706Jan-09Jan2018""         #二筆不同格式

等多種組合...

要如何改寫讓程式可以自動判斷http://pastebin.com/GRWaVSz1--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1720","M.1452313842.A.C28","corel","問題","使用正則來分割字串",2016-01-09 12:30:40,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


大家好,小弟是R新手


假設我有二個字串的格式如下

[1] ""03Jan-05Jan201602Jul-04Jul2016""

[2] ""06Jan-09Jan2016January 2017""


我想要把它分離成

""03Jan-05Jan2016""
""02Jul-04Jul2016""

與

""06Jan-09Jan2016""
""January 2017""


[1][2]只是舉例,其實想要處理字串的長度不一

小弟有想到用正則表示式來處理, 以下是我的寫法

# 針對06Jan-09Jan2016格式設計的正則表示式方法

s <- ""03Jan-05Jan201602Jul-04Jul2016""
x <- gsub(""(((0[1-9]|[12][0-9]|3[01]{2})[a-zA-Z]{3})-
           ((0[1-9]|[12][0-9]|3[01]{2})[a-zA-Z]{3})[0-9]{4})"","";"",s)
x

# 只不過斷出來的字串是
# OUT PUT "";;""
其實我想要斷出來的字串是

Result 1:

""03Jan-05Jan2016;02Jul-04Jul2016""

或

Result 2:
""03Jan-05Jan2016""
""02Jul-04Jul2016""

在此,想請問大家, 在R之中是否有其它函數配合 正則表示式用來斷出
Result 1或是 Result 2的結果?


謝謝大家

--

--","R_Language"
"1721","M.1452252608.A.9DD","locka","問題","用ggplot2在地圖上畫點",2016-01-08 19:30:03,NA,NA,"各位好：


手上有一些經緯度的資料，參考以下這篇，想要如法炮製把點繪製在地圖上http://goo.gl/jMxvkr畫出來的圖大概長這樣：http://i.imgur.com/dnnWmth.jpg想知道有沒有方法讓每張圖只聚焦在該行政區，
而不是都是用同一張底部的圖層，導致點都集中在一起呢？


附上我的範例資料集：https://db.tt/sKFmtWq0程式碼：

library(ggmap)
library(mapproj)

data <- read.csv(""ntp.gis.csv"",fileEncoding=""UTF-8"",header=TRUE)

map <- get_map(location=""Taipei"", zoom=11, language=""zh-TW"",color=""bw"")
ggmap(map) +
geom_point(aes(x=zip_x,y=zip_y), color=""red"", data = data) +
facet_wrap(~district)

有試過 facet_wrap(~district, scale=""free"")，不過會得到錯誤訊息：
Error in facet_render.wrap(plot$facet, panel, plot$coordinates, theme,  :
ggplot2 does not currently support free scales with a non-cartesian
coord or coord_flip.



另外還有第二個問題就是，

是不是一旦get_map() 指定了地點跟zoom的大小，似乎就不能變動了？
像如果想針對板橋的地圖放大，我得先自己在google map上取大概的中心點座標
再丟到get_map()裡面：

map <- get_map(location = c(lon = 121.453220, lat = 25.006734), zoom = 14,
language = ""zh-TW"", color = ""bw"")
ggmap()...

這樣對我來說有點太大，但是zoom調成15又會有許多點被忽略...
請問get_map()有辦法根據資料的散佈自動取最適合的zoom-in尺度嗎?
或是其他建議的做法？



最後第三個問題想請教的是（抱歉問題有點多QQ)

請問ggmap上面經緯度的精確度有辦法提高嗎?
以上面第二個例子來說，做出來的圖很明顯都集中在某些點，
就算使用position_jitter()效果仍然有限
(1萬多筆資料卻只有30多個點)
可是原始資料的經緯度有到小數點後10幾位，所以覺得有點納悶http://i.imgur.com/GO1T5fP.jpg網頁版範例程式碼在這：http://ideone.com/D6FtYK想請教看看大家的想法，謝謝大家！！


[關鍵字]:gis, ggplot2, google map--","R_Language"
"1722","M.1452137641.A.27F","DrRd","問題","ggplot2 barplot 垂直的x軸tick",2016-01-07 11:33:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:使用ggplot2畫barplot時在的座標刻度標示上使用中文垂直標示例如|||人<-----像這樣子數||||________________第      第一      二組      組<--像這樣子使用axis.text.x = element_text(angle = 90)的話文字都會逆時針轉90度，而不像上圖所標示[程式範例]:[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.11.1 (El Capitan)[關鍵字]:ggplot2--","R_Language"
"1723","M.1452078719.A.79C","celestialgod","問題","Re: 依照區間切割資料並計算個數",2016-01-06 19:11:55,NA,NA,"我忘記在哪學到下面這招的，剛剛要找都找不到相關的文章~""~

如果有誰還記得再麻煩告知我一下，謝謝。

19:34補充：

我找到了，是#1KzOu2X8 (R_Language)，他用matrix去創資料的方式很特別XD

所以後來腦海中有這個印象，不過跟這篇無關拉，只是一個小技巧而已


library(data.table)
library(plyr)
library(dplyr)
library(magrittr)

DT = fread('
id date
1 1204
1 1205
1 1209
1 1210
1 1211
2 1201
2 1202
2 1205
2 1207
3 1204
3 1206', header = TRUE, colClasses = c('integer', 'character'))
DT %>% mutate(date2 = gsub('(\\d{2})(\\d{2})', '2015-\\1-\\2', date) %>%
  as.Date) %>% group_by(id) %>% arrange(id, date2) %>%
  mutate(diffDay = diff(c(date2[1]-2, date2))) %>% ungroup %>%
  mutate(num = cumsum(ifelse(diffDay > 1, 1L, 0L))) %>% select(id, date, num)
# Source: local data table [11 x 3]
#
#       id  date   num
#    (int) (chr) (int)
# 1      1  1204     1
# 2      1  1205     1
# 3      1  1209     2
# 4      1  1210     2
# 5      1  1211     2
# 6      2  1201     3
# 7      2  1202     3
# 8      2  1205     4
# 9      2  1207     5
# 10     3  1204     6
# 11     3  1206     7

PS: 2015是隨便加的，有年放年，沒年資料隨便放一年

只要都在同一年就沒問題，出來的天數就不會有問題※ 引述《tHEiPHoNe ( )》之銘言：: 有一組消費者資料: id date: 1  1204: 1  1205: 1  1209: 1  1210: 1  1211: 2  1201: 2  1202: 2  1205: 2  1207: 3  1204: 3  1206: 若同一user不間斷天數消費則計算為同一筆: 不同user或是間斷消費天數則計入下一筆: 如下: id date num: 1  1204  1: 1  1205  1: 1  1209  2: 1  1210  2: 1  1211  2: 2  1201  3: 2  1202  3: 2  1205  4: 2  1207  5: 3  1204  6: 3  1206  7: 想請問有建議使用的function嗎？: 謝謝--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1724","M.1452074144.A.996","tHEiPHoNe","問題","依照區間切割資料",2016-01-06 17:55:42,NA,NA,"有一組消費者資料

id date
1  1204
1  1205
1  1209
1  1210
1  1211
2  1201
2  1202
2  1205
2  1207
3  1204
3  1206

若同一user不間斷天數消費則計算為同一筆
不同user或是間斷消費天數則計入下一筆
如下

id date num
1  1204  1
1  1205  1
1  1209  2
1  1210  2
1  1211  2
2  1201  3
2  1202  3
2  1205  4
2  1207  5
3  1204  6
3  1206  7

想請問有建議使用的function嗎？
謝謝

--","R_Language"
"1725","M.1452066708.A.531","Edster","問題","RData 可以合併嗎?",2016-01-06 15:51:46,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:

請問在多個RData中被我存了數個相同名稱的物件, 是相同樣本多次取樣的結果.
有辦法透過什麼方式將這些物件合併嗎?

以往的方式我都匯成純文字再批次讀取合併.
總覺得應該有什麼解法.

但第一步就有問題了, 因為使用load .RData 新的物件會覆蓋舊的相同名稱物件
有人有經驗嗎？

ps: 這些物件是list或data.frame的結構


[關鍵字]:RData, 合併--","R_Language"
"1726","M.1452065604.A.280","jklkj","問題","write.csv 另存資料夾",2016-01-06 15:33:20,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想把資料存下來，可是不想存在預設的資料夾裡，目前是用write.csv存
也有搜尋到一個write.xlsx，可是都無法另存別的資料夾http://www.inside-r.org/packages/cran/xlsx/docs/write.xlsx而且上面也說file是填輸出的路徑不是嗎

[程式範例]:http://ideone.com/K8T7s6[環境敘述]:最後跳出的錯誤碼如下Error: unexpected '/' in ""write.xlsx(ga.data, C:/""[關鍵字]:資料夾 另存--","R_Language"
"1727","M.1452056307.A.601","k75715","問題","使用dplyr取代特定rows的值",2016-01-06 12:58:24,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要對資料中的非NA值去算ntile
我目前的寫法有點蠢，有點hard-code
df[!is.na(df$amt)] %<>% mutate(amt.ntile = ntile(amt, 10))
而且其實要做這樣處理的欄位有五六個，這樣的寫法有點不是很有彈性

不知道有沒有什麼方法可以讓我的欄位名字可以當成變數這樣傳進去做處理
謝謝！


--","R_Language"
"1728","M.1451926368.A.374","aee36900","問題","shiny output可否點選後再呈現詳細資料",2016-01-05 00:52:45,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:目前使用R跑poisson模型有10組模型參數的設定想要先在shiny中 先將模型的評估值先呈現(10組數值)然後user可以點選其中一組數值下面再呈現該組數值所對應的模型結果以及一些細項資料不知道shiny可否做到從第一次的output中選擇其中一個結果下面再呈現所對應的資訊?[程式範例]:還沒想到怎麼寫--","R_Language"
"1729","M.1451920596.A.599","JackBaska","討論","MongoDB 3.0 以上解法 ?",2016-01-04 23:16:33,NA,NA,"大家好

我有先關鍵字搜一下 NoSQL 還有Mongo 沒看到相關討論
所以想詢問一下有關R串 NoSQL的MongoDB 3.0 以上是否
有人知道如何解 ?

Package上是有 rmongod 可用 , 但Mongo 轉到3.0後改
了底層的認證方式導致無法認證 , 以致無法以rmongod
API對 Mongo DB 下 query

爬了rmongod作者的網路資源討論串 , 作者是表示底層
有大改 , rmongod 必須整隻用cpp重寫 , 所以若要用
rmongod當API , 目標DB 必須 ""完全無上鎖""

另外做了一些追蹤還有看Mongo的資源是有找到一個方法
可以抓取Mongo的資料 , 就是改用 mongolite 將認證
訊息包在url裡面丟給mongolite , 然後轉給MongoDB

但這個方法會有另一個問題我還沒有確認要怎麼解
我還不確定是mongolite有這功能我還不會用 , 還是
mongolite本身沒辦法像一般mongo API一樣下show dbs
show collection的 query , 所以我暫時是先用terminal
查詢完確切的db 跟 collection後再用mongolite直接
針對該collection抓取

想問各位前輩 rmongod 的問題是否有其他方式能解
因為只要去掉auth就能繼續用 , 總覺得好像還是有辦法
繼續用但我還沒什麼頭緒 , 畢竟還不會寫 Rcpp

如果這問題已經討論過只是我沒抓到關鍵字 , 也請
大家指教一下 , 小弟以前寫其他語言的對R的領域還
沒那麼熟


--","R_Language"
"1730","M.1451892093.A.521","memphis","問題","dplyr 移除特定條件",2016-01-04 15:21:30,NA,NA,"如何用 dplyr 移除特定條件的 row (有NA的情況)

ex:

ID <- c(1:10)
VAL <- c(1,2,3,NA,5,6,7,NA,9,10)
data <- data.frame(ID, VAL, stringsAsFactors=F)

###
如果我不要5以下的
我不能寫 data %>% filter(VAL >= 6)
會沒有 NA

也許可以改成 data %>% filter(VAL >= 6 & is.na(VAL))
可是萬一資料有其他的東西 例如空格, 小老鼠之類的?

有沒有什麼辦法是 ""選到符合條件的, 然後移除那些row"" ?

--","R_Language"
"1731","M.1451883348.A.549","psinqoo","問題","Re: 與資料庫連結的問題",2016-01-04 12:55:46,NA,NA,"win下

1.左下 輸入 ODBC
2.進入後 把條件設好
3.有問題再問※ 引述《Schematic (小小寶的媽)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 將R與SOL server 2012連接(R程式與Database在同一台主機上): 在R Studio的command環境下執行都沒問題，能正常的存取資料庫並做運算: 但若透過網路，從另外一台電腦呼叫RScript的話，就無法執行後續的查詢動作: [程式範例]:: odbcChannel <- odbcConnect(""Database_name"", uid=""uid"", pwd=""pwd""): query <- c(""select * from table_name""): sqlQuery(odbcChannel, query)  <-- RStudio ok，透過PHP呼叫執行的話就會卡住: 有考慮過是不是DSN寫入的地方出問題: 試過以下幾種設定仍是不行: odbcChannel <- odbcConnect(""localhost/Database_name"", uid=""uid"", pwd=""pwd""): odbcChannel <- odbcConnect(""localhost/Server_name/Database_name"",: uid=""uid"", pwd=""pwd""): 另外，在RStudio裡面query若有中文也能正常運作，但一樣透過PHP呼叫script就不行: ex:: query <- c(""select field_name as 中文 from table_name""): [環境敘述]:: R version 3.2.3 (2015-12-10): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows Server >= 2012 x64 (build 9200): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] magrittr_1.5  tidyr_0.3.1   ggplot2_2.0.0 MASS_7.3-45   RODBC_1.3-12: loaded via a namespace (and not attached)::  [1] Rcpp_0.12.2      dplyr_0.4.3      assertthat_0.1   grid_3.2.3:  [5] plyr_1.8.3       R6_2.1.1         gtable_0.1.2     DBI_0.3.1:  [9] scales_0.3.0     tools_3.2.3      munsell_0.4.2    parallel_3.2.3: [13] colorspace_1.2-6: [關鍵字]:::   SQL server 2012:

--

--","R_Language"
"1732","M.1451882151.A.D47","gbd37","問題","跑程式耗費時間問題（win&ubuntu)",2016-01-04 12:35:49,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我在跑需花費很多時間的程式（教授說的）

我用windows跑了起碼有六小時還沒跑完

我改用ubuntu跑只花了九分鐘...(我有計時）

請問為什麼會這樣子＝ ＝

是灌雙系統（win&ubuntu)沒灌好使得win變慢？

還是單純linux跑R就是很快.....?

因為我還沒灌雙系統前沒有去測試只有win系統下去跑會花費多少時間

所以上來這邊問問大大們

(我不知道是不是該在這板問這題 有錯我自d)

--","R_Language"
"1733","M.1451870461.A.075","Schematic","問題","與資料庫連結的問題",2016-01-04 09:20:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

將R與SOL server 2012連接(R程式與Database在同一台主機上)

在R Studio的command環境下執行都沒問題，能正常的存取資料庫並做運算
但若透過網路，從另外一台電腦呼叫RScript的話，就無法執行後續的查詢動作


[程式範例]:

odbcChannel <- odbcConnect(""Database_name"", uid=""uid"", pwd=""pwd"")

query <- c(""select * from table_name"")

sqlQuery(odbcChannel, query)  <-- RStudio ok，透過PHP呼叫執行的話就會卡住

有考慮過是不是DSN寫入的地方出問題
試過以下幾種設定仍是不行
odbcChannel <- odbcConnect(""localhost/Database_name"", uid=""uid"", pwd=""pwd"")
odbcChannel <- odbcConnect(""localhost/Server_name/Database_name"",
uid=""uid"", pwd=""pwd"")

另外，在RStudio裡面query若有中文也能正常運作，但一樣透過PHP呼叫script就不行
ex:
query <- c(""select field_name as 中文 from table_name"")



[環境敘述]:
R version 3.2.3 (2015-12-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows Server >= 2012 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] magrittr_1.5  tidyr_0.3.1   ggplot2_2.0.0 MASS_7.3-45   RODBC_1.3-12

loaded via a namespace (and not attached):
 [1] Rcpp_0.12.2      dplyr_0.4.3      assertthat_0.1   grid_3.2.3
 [5] plyr_1.8.3       R6_2.1.1         gtable_0.1.2     DBI_0.3.1
 [9] scales_0.3.0     tools_3.2.3      munsell_0.4.2    parallel_3.2.3
[13] colorspace_1.2-6


[關鍵字]:SQL server 2012--","R_Language"
"1734","M.1451751995.A.82B","andrew43","問題","Re: 離群值",2016-01-03 00:26:28,NA,NA,"內建的 boxplot() 之回傳值會記錄哪些數值被視為鬚外的離群值。
請見以下例子
bp <- boxplot(c(1,10:20,100,120))
bp$out  # 回傳 c(1, 100, 200) 三個值※ 引述《sky84911 (Chun)》之銘言：: 請問一下該怎麼用R找出離群值，: 我可以產生出box plot,可是無法確認離群值是哪一點: 謝謝--","R_Language"
"1735","M.1451745300.A.A33","breakheart","問題","Re: 離群值",2016-01-02 22:34:58,NA,NA,"1. < Q1-N*(Q3-Q1) or > Q3+N*(Q3-Q1) <= 出於常態分配特性exclude outlier

其中N看你對Outlier的容忍度, 容忍小=>N小, 容忍大=>N大

但你會發現用這去exclude outlier似乎並不是所有點都能適當的被移除掉

有其當資料分配是偏態分布情況下,

這是因為前面說過這是假設資料是在常態分布下的移除ourlier,

對鐘型分布(對稱分布內高外低)也許會比較好,但其他就會非常差,

2. 為了改善 1. 的缺點,有些人會採取下面作法

分配右半部right sigma = (P95-P50)/( qnorm(0.95) -qnorm(0.5) )

(當點數少時,0.95會改成0.85 or 0.75)> median - N*right sigma => outlier分配左半部sigma = (P50-P05)/( qnorm(0.50) -qnorm(0.05) )

(當點數少時,0.05會改成0.15 or 0.25)

< median - N*right sigma => outlier

各位發現了嗎,上述做法其實是將分配假設是鐘型分布,

以鐘的兩端以常態方式推估sigma,再利用計算outlier

此法可能比1.好一些,但仍無法適用非鐘型分布(ex:雙峰 or Uniform...etc)

對一些偏態很嚴重的鐘型分布也無法很好的套用

3. 在國外這是可以專章討論的一個好論文,他們第一步會先將資料分配類型先求出,

再依據各分配的特性予以合理的exclude outlier方法,

不會用一個方法公式去套用所有情況,這是最合理效果最好但也是最麻煩的,

那有人會說用甚麼方去求出分配,之後再用甚麼方法根據各分配exclude outlier

這太多資料了.....,各家有各家的法寶,就不贅述了

你會在R發現一些package跟Outlier相關的,

但請切記,他們多半都是Base on是某種分配去exclude outlier的

Outlier這是一個好問題,我其實很想知道其他高手對此的見解來討論看看

板上其實很注重在Coding,但應用就很少談了,也許這是個好話題※ 引述《sky84911 (Chun)》之銘言：: 請問一下該怎麼用R找出離群值，: 我可以產生出box plot,可是無法確認離群值是哪一點: 謝謝--","R_Language"
"1736","M.1451740906.A.C62","sky84911","問題","離群值",2016-01-02 21:21:43,NA,NA,"請問一下該怎麼用R找出離群值，
我可以產生出box plot,可是無法確認離群值是哪一點
謝謝

--","R_Language"
"1737","M.1451664911.A.E62","AmuroRai","問題","Re: R中文編碼(MS950)問題",2016-01-02 00:15:08,NA,NA,"直到剛剛才有空檔碰電腦，發現如果直接用c大的做法程式可以順利執行，但當我想打開
用stri_encoding改過的內容物(即htmlFileEncodingUTF8)時R就會立刻當機。

而在稍微改一下c大的做法後就正常了。

大致上的概念就是使用RCurl而不是用httr來抓內容，之後照我原來的做法用rvest解並用
tmcn去轉碼，附上程式碼和結果如下：> rm(list=ls())>> library(tmcn)> library(httr)> library(rvest)> library(magrittr)> library(RCurl)>
#改成使用RCurl的getURLContent來抓> r<-getURLContent(""http://isin.twse.com.tw/isin/C_public.jsp?strMode=2"")#一樣用rvest來解內容> res<-r%>%read_html()%>%+      html_node("".h4"")%>%html_nodes(xpath=""tr"")%>%html_text()
#用tmcn轉碼成utf8> ress<-toUTF8(res)#轉碼前的結果,一樣是亂碼> res[1:5][1] ""\xe6\x9c<U+6867><U+631F>霅<U+6867><U+9A7C>隞\xa3\xe8\x99<U+84E2>\x8f<U+7BAB>\x90<U+8BB5>迂 \xe5\x9c<U+9E49>\x9aˋ\xad<U+6867><U+9A7C>
颲刻\xad<U+54E3>\x99<U+84F8>Ⅳ(ISIN Code)銝<U+7BAB>\xb8<U+5F34><U+9792>撣<U+5F21><U+016B>\xe5<U+9511>\xe7<U+6921>璆剖<U+9511>
CFICode\xe5\x82<U+24A3>酉""
[2] "" \xe8<U+7BED>蟡\xa8  ""
[3] ""1101      \xe3\u0080\u0080\xe5<U+960B>瘜冉W00011010041962/02/09銝<U+7BAB>\xb8<U+5F34>偌瘜亙
極璆胥SVUFR""
[4] ""1102      \xe3\u0080\u0080鈭<U+9740>野TW00011020021962/06/08銝<U+7BAB>\xb8<U+5F34>偌瘜亙極
璆胥SVUFR""
[5] ""1103      \xe3\u0080\u0080\xe5\x98<U+6809>野TW00011030001969/11/14銝<U+7BAB>\xb8<U+5F34>偌
瘜亙極璆胥SVUFR""

#轉碼後的結果看來是正常多了> ress[1:5][1] ""有價證券代號及名稱 國際證券辨識號碼(ISIN Code)上市日市場別產業別CFICode備
註""
[2] "" 股票  ""

[3] ""1101      　台泥TW00011010041962/02/09上市水泥工業ESVUFR""

[4] ""1102      　亞泥TW00011020021962/06/08上市水泥工業ESVUFR""

[5] ""1103      　嘉泥TW00011030001969/11/14上市水泥工業ESVUFR""

>

--","R_Language"
"1738","M.1451657895.A.273","celestialgod","心得","Re: dplyr filter and slice",2016-01-01 22:18:13,NA,NA,"※ 引述《memphis (讓你喜歡這世界~)》之銘言：: 當你有一個 data.frame (如下): ID col_a col_b: 01    01     2: 01    02     1: 02    05     3: 02    NA     4: 03    NA     2: 03    NA     3: ID=c('01','01','02','02','03','03'): col_a <- c('01','02','05',NA,NA,NA): col_b <- c(2,1,3,4,2,3): m <- data.frame(ID, col_a, col_b, stringsAsFactors=F): ####: 1. 想要挑每組 col_a 最小: m %>% group_by(ID) %>% summarize(min_a = min(col_a, na.rm=T)):      ID min_a:   (chr) (chr): 1    01    01: 2    02    05: 3    03    NA: Warning message:: In min(c(NA_character_, NA_character_), na.rm = TRUE) ::   no non-missing arguments, returning NA: ####: 2. 想要挑每組 col_a 最小時的 col_b: m %>% group_by(ID) %>% filter(col_a = min(col_a)): Error: filter condition does not evaluate to a logical vector.: m %>% group_by(ID) %>% filter(rank(col_a, ties.method='first')==1):      ID col_a col_b:   (chr) (chr) (dbl): 1    01    01     2: 2    02    05     3: 3    03    NA     2: ####: 3. 想要挑每組 col_a 最小時的 col_b (較快): m %>% group_by(ID) %>% slice(which.min(col_a)):      ID col_a col_b:   (chr) (chr) (dbl): 1    01    01     2: 2    02    05     3: ####: 歡迎討論各種例外狀況: 有些時候取大取小, 只接受數字, 有時候又可以自己轉換: 有些時候文字可以比大小, 其中有些格子是空格會無法比, 要轉成NAlibrary(data.table)
library(plyr)
library(dplyr)
library(purrr)
library(magrittr)
library(microbenchmark)

set.seed(10)
N = 1e5
numGroup = 100
maxID = 5000
DT = data.table(group = sample(sprintf('A%02i', 1:numGroup), N, TRUE),
  value = sample(1:1000, N, TRUE)) %>% tbl_dt(FALSE) %>%
  mutate(ID = sprintf('%02i', sample(1:maxID, N, TRUE)),
    group = factor(group, levels = sprintf('A%02i', 1:numGroup))) %>%
  select(ID, group, value) %>% distinct(ID, group)
# distinct 是為了避免有同ID下有同樣組別之情形

dplyr_slice = function() DT %>% group_by(ID) %>% slice(which.min(group))
dplyr_filter_rank = function() DT %>% group_by(ID) %>%
  filter(rank(group, ties.method='first')==1)
dplyr_filter_row_number = function() DT %>% group_by(ID) %>%
  filter(row_number(group) == 1)
dplyr_arrange = function() DT %>% arrange(ID, group, value) %>%
  group_by(ID) %>% summarise(group = group[1], value = value[1])
purrr_split_map = function() DT %>% split(.$ID) %>%
  map(~ .[which.min(.$group), ]) %>% bind_rows
plyr_ddply = function() ddply(DT, .(ID), function(x) x[which.min(x$group), ])
plyr_ddply_filter = function() ddply(DT, .(ID), function(x){
  x %>% filter(row_number(group) == 1)
})

all.equal(dplyr_slice() %>% arrange(ID),
  dplyr_filter_rank() %>% arrange(ID)) # TRUE
all.equal(dplyr_slice() %>% arrange(ID),
  dplyr_filter_row_number() %>% arrange(ID)) # TRUE
all.equal(dplyr_slice() %>% arrange(ID),
  dplyr_arrange() %>% arrange(ID)) # TRUE
all.equal(dplyr_slice() %>% arrange(ID),
  purrr_split_map() %>% arrange(ID)) # TRUE
all.equal(dplyr_slice() %>% arrange(ID),
  plyr_ddply() %>% arrange(ID)) # TRUE
all.equal(dplyr_slice() %>% arrange(ID),
  plyr_ddply_filter() %>% arrange(ID)) # TRUE

microbenchmark(dplyr_slice(), dplyr_filter_rank(),
  dplyr_filter_row_number(), dplyr_arrange(), purrr_split_map(),
  plyr_ddply(), plyr_ddply_filter(), times = 20L
)

# Unit: milliseconds
#                       expr        min         lq       mean
#              dplyr_slice() 1347.66226 1401.43846 1464.60871
#        dplyr_filter_rank()  449.52015  453.61900  471.02026
#  dplyr_filter_row_number()  433.67680  468.01415  480.40588
#            dplyr_arrange()   41.23724   42.51137   46.32983
#          purrr_split_map() 3198.05461 3274.40538 3403.10413
#               plyr_ddply() 1344.17546 1397.38130 1455.63575
#        plyr_ddply_filter() 3894.99410 4013.59103 4117.50118

# Unit: milliseconds
#                       expr    median         uq        max neval
#              dplyr_slice() 1435.9503 1516.38167 1665.08106    20
#        dplyr_filter_rank()  463.6700  480.17833  526.91304    20
#  dplyr_filter_row_number()  480.6615  492.46276  531.02535    20
#            dplyr_arrange()   46.4951   50.18027   52.71638    20
#          purrr_split_map() 3372.4479 3488.43514 3755.94195    20
#               plyr_ddply() 1460.6096 1500.80851 1587.33094    20
#        plyr_ddply_filter() 4114.9551 4196.85084 4461.57974    20

這樣測試下來，直接排序，再取第一個是最快的方法

rank跟row_number差不多快

slice跟ddply差不多快

--","R_Language"
"1739","M.1451554100.A.516","memphis","心得","dplyr filter and slice",2015-12-31 17:28:17,NA,NA,"當你有一個 data.frame (如下)

ID col_a col_b

01    01     2
01    02     1
02    05     3
02    NA     4
03    NA     2
03    NA     3

ID=c('01','01','02','02','03','03')
col_a <- c('01','02','05',NA,NA,NA)
col_b <- c(2,1,3,4,2,3)
m <- data.frame(ID, col_a, col_b, stringsAsFactors=F)

####
1. 想要挑每組 col_a 最小

m %>% group_by(ID) %>% summarize(min_a = min(col_a, na.rm=T))

     ID min_a
  (chr) (chr)
1    01    01
2    02    05
3    03    NA
Warning message:
In min(c(NA_character_, NA_character_), na.rm = TRUE) :
  no non-missing arguments, returning NA


####
2. 想要挑每組 col_a 最小時的 col_b

m %>% group_by(ID) %>% filter(col_a = min(col_a))

Error: filter condition does not evaluate to a logical vector.

m %>% group_by(ID) %>% filter(rank(col_a, ties.method='first')==1)

     ID col_a col_b
  (chr) (chr) (dbl)
1    01    01     2
2    02    05     3
3    03    NA     2

####
3. 想要挑每組 col_a 最小時的 col_b (較快)

m %>% group_by(ID) %>% slice(which.min(col_a))

     ID col_a col_b
  (chr) (chr) (dbl)
1    01    01     2
2    02    05     3


####
歡迎討論各種例外狀況
有些時候取大取小, 只接受數字, 有時候又可以自己轉換
有些時候文字可以比大小, 其中有些格子是空格會無法比, 要轉成NA








--","R_Language"
"1740","M.1451540240.A.F17","celestialgod","分享","magrittr補充說明",2015-12-31 13:37:18,NA,NA,"※ [本文轉錄自 Statistics 看板 #1MTMWLYa ]作者: celestialgod (天) 看板: Statistics
標題: Re: [問題] 中央極限定理
時間: Sat Dec 19 22:22:06 2015


應A大要求，解釋一下程式

library(magrittr)# 載入%>%跟%T>%運算子# %>% 解釋# 現在有一個函數f，有一個input，假設為a# 一般上，我們可以使用f(a)得到回傳值# 而%>% 可以把LHS當作RHS的函數的第一個input# 因此，透過 a %>% f 或是 a %>% f() 都等同於 f(a)# 同理，如果現在還有一個函數g，有兩個input，x跟y# g(x,y)等同於 x %>% g(y)# 但是如果我們想要讓他指定第二個位置呢？這時候就要透過 .跟{}實現# .就是LHS的代替符號，所以其實 a %>% f() 等同於 a %>% f(.)# 所以我們可以g(x,y)寫成 y %>% {g(x, .)}# 其中{}的功能是建立一個block，不直接傳導引數到函數的第一個input# 而%>%最大的好處是節省temporary variable# 像是我現在x = f(a), z = g(x, y)，我最後只要z的話# 可以直接寫成 z = a %>% f %>% g(y)，這一個可能需要花一點時間體會# %T>% 解釋# 其實就是只做傳導的%>%，不做回傳動作。# 寫 b <- a %T>% f 的話就是b會等於a，而R console會列出f(a)的值# 根據這個特性如果我寫成 b = 1:5 %T>% plot# b會等於1, 2, 3, 4, 5，而圖也會同時出現我這裡用另外一種方式去解釋%>%跟%T>%，我之前曾在R_Language寫過相關的文章

之前寫的時候用另一個方向去寫，也可以參考看看，附上我之前寫的文章：https://www.ptt.cc/bbs/R_Language/M.1437452331.A.CD1.htmldat = rep(c(90:98, 5), 10)# 創建母體，5分、90~98分各10人x <- 1e4 %>% replicate(mean(sample(dat, 50))) %T>%
{
  qqnorm(.)
  qqline(.)
}

其實把上面這段用一般寫法就會變成：

x <- replicate(1e4, mean(sample(dat, 50)))
qqnorm(x)
qqline(x)※ 引述《allen1985 (我要低調 拯救形象)》之銘言：: ※ 引述《baltimore (WYC)》之銘言：: : 我想請教一個問題，我是大一的學生，最近看到中央極限定理非常搞不懂，我看到老師的: : 講義寫說不論母群的分佈為何，只要n夠大，樣本平均數的抽樣分佈一定接近常態分配。: : 但是假設有一個考試成績是這樣:95%學生成績是90分以上，1%學生成績10分以下，這樣還: : 會是接近常態分配嗎？我一直覺得很怪，之前有關中央極限定理的文我有看過但是看不懂: : @@還有我是心理系的，不知道我學的跟統計系的相比是不是有所增減，謝謝: : 另外我應該會常常上來問問題XD 麻煩各位版友了: 小弟我對於中央極限定理 雖然很久以前就聽過了 但也並非了解得十分透徹: 前面推文中 提到了一些 此定理的必要條件 非常的嚴謹 非常的好: 但我想對於一個大一生 可能有聽沒辦法懂 畢竟可能連積分都還不會 何況是動差: 所以我希望原po能知道 你原先的敘述很不完整 如果想知道更清楚的: 如果有哪些名詞不懂的 歡迎再問: 不曉得可不可以利用以下實驗 讓原po對中央極限定理更有概念: 這只是我腦中閃過的念頭 希望此實驗沒有太大問題: 首先 我們可以假設 母體總共有100個學生成績好了: 90分10個 91分10個 92分10個 93分10個 94分10個: 95分10個 96分10個 97分10個 98分10個 5分10個: 請原po每次隨機抽樣 50個學生的成績 算其平均數 總共抽個10次: 然後 看看這10次平均數分配會不會有點像常態: 我不知道結果會不會像 希望對原po有一些幫助--

--","R_Language"
"1741","M.1451523208.A.8DA","celestialgod","問題","Re: 取絕對值找最大但要得知原有值",2015-12-31 08:53:22,NA,NA,"※ 引述《girl5566 (5566520)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想請問result 那欄為取絕對值後的最大值之原始值  result要如何取得?:  X    Y    MAX_ABS   RESULT: -3    5       5       5: -5    3       5      -5: [程式範例]:: data <- data.frame(x = c(-3,-5), y = c(5,3)): max_abs <- apply(abs(data),1,max): data <- cbind(data,max_abs): [環境敘述]:: R3.1.2  win7 64bit: [關鍵字]:1. dplyr (只有兩行)
library(dplyr)
data_df = data.frame(x = c(-3,-5), y = c(5,3))
data_df %>% mutate(result = ifelse(abs(x) > abs(y), x, y))

2. apply (可多行)
data_mat = matrix(c(-3,-5,5,3), 2)
loc_max = apply(abs(data_mat), 1, which.max)
result = data_mat[cbind(1:nrow(data_mat), loc_max)]



--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1742","M.1451495460.A.1DE","girl5566","問題","取絕對值找最大但要得知原有值",2015-12-31 01:10:57,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想請問result 那欄為取絕對值後的最大值之原始值  result要如何取得?

 X    Y    MAX_ABS   RESULT
-3    5       5       5
-5    3       5      -5

[程式範例]:

data <- data.frame(x = c(-3,-5), y = c(5,3))

max_abs <- apply(abs(data),1,max)

data <- cbind(data,max_abs)

[環境敘述]:
R3.1.2  win7 64bit

[關鍵字]:


--","R_Language"
"1743","M.1451459270.A.F71","celestialgod","問題","Re: 資料處理與畫圖",2015-12-30 15:07:47,NA,NA,"※ 引述《Schematic (小小寶的媽)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 需要將從資料庫取出的資料畫成柱狀圖或曲線圖: 從資料庫中取出的格式如下: 年度  性別   人數: 100     1      33: 100     2      40: 101     1      50: 101     2      49: 102     1      30: 102     2      34: 103     1      43: 103     2      50: 預期圖片的X軸為每一年度，Y軸為人數；每一年度中又分性別1為一柱狀，: 性別2為另一條。: 請問有直接的函數可以做出這樣的需求嗎?: 若想將上述的格式改為:       年度: 性別  100   101  102  103: 1      33    50   30   43: 2      40    49   34   50: 請問要怎麼做比較好呢?: 謝謝library(tidyr)
library(magrittr)
data_df = read.table(textConnection(""
年度  性別   人數
100     1      33
100     2      40
101     1      50
101     2      49
102     1      30
102     2      34
103     1      43
103     2      50""), header = TRUE)

data_df %>% spread(年度, 人數)
#   性別 100 101 102 103
# 1    1  33  50  30  43
# 2    2  40  49  34  50

library(dplyr)
library(ggplot2)
data_df %>% mutate(性別 = factor(性別)) %>%
  ggplot(aes(x = 年度, y = 人數, fill = 性別)) %>%
  add(geom_bar(stat = ""identity"", position = ""dodge""))http://i.imgur.com/8pqz7kx.pngPS: dplyr版本要0.4.3才能用中文欄位名稱輸入

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1744","M.1451456828.A.1A3","Schematic","問題","資料處理與畫圖",2015-12-30 14:27:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
需要將從資料庫取出的資料畫成柱狀圖或曲線圖
從資料庫中取出的格式如下

年度  性別   人數
100     1      33
100     2      40
101     1      50
101     2      49
102     1      30
102     2      34
103     1      43
103     2      50


預期圖片的X軸為每一年度，Y軸為人數；每一年度中又分性別1為一柱狀，
性別2為另一條。
請問有直接的函數可以做出這樣的需求嗎?
若想將上述的格式改為

      年度
性別  100   101  102  103
1      33    50   30   43
2      40    49   34   50

請問要怎麼做比較好呢?
謝謝


--","R_Language"
"1745","M.1451456729.A.D7F","celestialgod","問題","Re: R中文編碼(MS950)問題",2015-12-30 14:25:26,NA,NA,"※ 引述《AmuroRai (SIEG ZEON!!!!!!)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 最近開始在學用R寫爬蟲，而今天下午試著要爬證交所的股票代碼列表時發現他們似乎: 是使用MS950編碼，但是這個編碼R卻無法認得。（參見程式碼部分）: 後來還有試過用utf-8和big5硬推，也試著用tmcn去轉碼，但是中文部分還是只得到亂碼。: 因此想請問是否有什麼方法可以繞過這個問題？: （把原網頁資料抓下來存成csv轉碼後再丟給R不在考慮之列）: [程式範例]:: 只附上一開始用MS950的程式碼，big5和utf-8的結果大同小異。: 另外最後res和ress的output不知道為什麼無法完整貼上，但總之遇到中文都是亂碼就是了library(RCurl)
library(stringi)
urlToGet = ""http://isin.twse.com.tw/isin/C_public.jsp?strMode=2""htmlFile = getURLContent(urlToGet)
htmlFileEncodingUTF8 = stri_encode(html_file,
  attr(html_file, ""Content-Type"")[2], ""utf8"")
Encoding(htmlFileEncodingUTF8)
# [1] ""UTF-8""

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1746","M.1451397792.A.742","AmuroRai","問題","R中文編碼(MS950)問題",2015-12-29 22:03:09,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
最近開始在學用R寫爬蟲，而今天下午試著要爬證交所的股票代碼列表時發現他們似乎
是使用MS950編碼，但是這個編碼R卻無法認得。（參見程式碼部分）

後來還有試過用utf-8和big5硬推，也試著用tmcn去轉碼，但是中文部分還是只得到亂碼。
因此想請問是否有什麼方法可以繞過這個問題？
（把原網頁資料抓下來存成csv轉碼後再丟給R不在考慮之列）


[程式範例]:
只附上一開始用MS950的程式碼，big5和utf-8的結果大同小異。
另外最後res和ress的output不知道為什麼無法完整貼上，但總之遇到中文都是亂碼就是了> rm(list=ls())>> library(tmcn)Q> library(httr)> library(rvest)> library(stringr)> library(magrittr)>> r<-GET(""http://isin.twse.com.tw/isin/C_public.jsp?strMode=2"")> rResponse [http://isin.twse.com.tw/isin/C_public.jsp?strMode=2]Date: 2015-12-29 10:15
  Status: 200
  Content-Type: text/html;charset=MS950
  Size: 2.69 MB
Unknown encoding MS950. Defaulting to latin1 (ISO-8859-1).
      <link rel=""stylesheet"" href=""http://www.tse.com.tw/style1.css""type=...
      <body><table  align=center><h2><strong><font class='h1'>¥蠊> res<-r$content%>%read_html(encoding=""MS950"")%>%+      html_node("".h4"")%>%html_nodes(xpath=""tr"")%>%html_text()> ress<-toUTF8(res)> res[1:5][1] ""礎糧罈羅\xc3砥<U+56FD>並怏代繡繒瞻\xc3<U+7F03>名繙\xc3\x99 簞礙罈\xc3<U+65BE>砥<U+56FD>並怏螢姻砥
’蜃嗽碼(ISIN Code)瞻W瞼竄瞻矇瞼竄糧繭禮O簡瞿繚~禮OCFICode糧\xc3<U+5C61>腕\xb9""
[2] "" 穠\xc3’笨\xbc  ""
[3] ""1101      癒@瞼x穠dTW00011010041962/02/09瞻W瞼竄瞻繫穠d瞻u繚~ESVUFR""
[4] ""1102      癒@穡\xc3<U+9C7F>泥TW00011020021962/06/08瞻W瞼竄瞻繫穠d瞻u繚~ESVUFR""
[5] ""1103      癒@繒\xc3<U+57D8>泥TW00011030001969/11/14瞻W瞼竄瞻繫穠d瞻u繚~ESVUFR""> ress[1:5][1] ""| 3 瞼N繡繒瞻\xc3<U+7F03>名繙\xc3\x99 簞礙罈\xc3<U+65BE>
[2] "" aN2 <U+00BC>  ""
[3] ""1101      !
[4] ""1102      !
[5] ""1103      !


[環境敘述]:
Win7 64位元
R 3.2.3 (2015/12/10)

[關鍵字]:
中文編碼 MS950 tmcn

--","R_Language"
"1747","M.1451389745.A.0F6","NeiSeHai","問題","quote文字",2015-12-29 19:49:02,NA,NA,"我有code

code <- paste('
{
        for(i in 1:I) {
                d[i] ~ dnorm(0, sd = 100)
        }
}
')

存成文字檔 write(code,file=""code.txt"")

請問該怎麼讀回來，等同於

code <- quote(
{
        for(i in 1:I) {
                d[i] ~ dnorm(0, sd = 100)
        }
}
)

也就是不要有\n \t之類的東西。

我想做這件事的原因是應該editor在讀quote的時候有問題，所以才需要用存檔讀檔的方式。


--","R_Language"
"1748","M.1451372409.A.D93","cywhale","問題","安裝RcppBDT遇到error",2015-12-29 15:00:07,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別安裝RcppBDT 直接用install.packages(""RcppBDT"") Version: 0.2.3
若用install_github(""eddelbuettel/rcppbdt"") Version: 0.2.3.2
但後者install_github 我在linux(centos)下有裝成功，
但在win7下安裝則會出現錯誤訊息：

toPOSIXct.cpp: In function
'Rcpp::DatetimeVector cToPOSIXct(Rcpp::CharacterVector)':
toPOSIXct.cpp:229:45: error: 'strptime' was not declared in this scope
make: *** [toPOSIXct.o] Error 1

查不太到相關錯誤訊息，不知道有沒有辦法可以解此安裝上的問題，謝謝~~~

[環境敘述]:請提供 sessionInfo() 的輸出結果，R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

other attached packages:
[1] RcppBDT_0.2.3  BH_1.60.0-1    devtools_1.9.1

loaded via a namespace (and not attached):
 [1] httr_1.0.0       R6_2.1.1         magrittr_1.5     tools_3.2.2
 [5] curl_0.9.4       Rcpp_0.12.2      memoise_0.2.1    codetools_0.2-14
 [9] stringi_1.0-1    stringr_1.0.0    digest_0.6.8

[關鍵字]:


--","R_Language"
"1749","M.1451298728.A.972","jklkj","問題","Re: RGoogleAnalytics",2015-12-28 18:32:02,NA,NA,"※ 引述《jklkj (誠實可靠小郎君)》之銘言：: 標題: [問題] RGoogleAnalytics: 時間: Mon Dec 28 11:53:45 2015:: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 不知道大家有用這個R的套件嗎: 我已經成功library了: 可是我用QueryBuilder: 都會出現錯誤:: [程式範例]:: > QueryBuilder(帳號@gmail.com): Error in QueryBuilder(帳號@gmail.com) : object '帳號' not found: > QueryBuilder(): Error in QueryBuilder() ::   argument ""query.params.list"" is missing, with no default:: [環境敘述]:: 我的R是3.2.3版的:: [關鍵字]:: RGoogleAnalytics:: --","R_Language"
"1750","M.1451274827.A.667","jklkj","問題","RGoogleAnalytics",2015-12-28 11:53:45,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
不知道大家有用這個R的套件嗎
我已經成功library了
可是我用QueryBuilder
都會出現錯誤

[程式範例]:> QueryBuilder(帳號@gmail.com)Error in QueryBuilder(帳號@gmail.com) : object '帳號' not found> QueryBuilder()Error in QueryBuilder() :
  argument ""query.params.list"" is missing, with no default

[環境敘述]:
我的R是3.2.3版的

[關鍵字]:
RGoogleAnalytics

--","R_Language"
"1751","M.1451097294.A.CA5","girl5566","問題","如何讀取bmp?",2015-12-26 10:34:51,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我需要讀取一個bmp檔，然後得到每個pixel的RGBA

我有嘗試到EBImage可以做到讀取RGBA的部分  但是他目前不支援bmp檔

請問有其他的解決方式嗎??

[程式範例]:

library(""bmp"", lib.loc=""~/R/win-library/3.2"")
Image <- read.bmp('fb.bmp')
Error in read.bmp(""fb.bmp"") : Do not know how to handle compressed BMP

[環境敘述]:
R 3.2   WIN7 64BIT

[關鍵字]:

Image processing

--","R_Language"
"1752","M.1451061340.A.3D2","sky84911","問題","卜瓦松",2015-12-26 00:35:38,NA,NA,"http://i.imgur.com/flnrxlY.jpg想請問 圖中的lower.tail=FALSE是什麼意思，
為何加上這個指令後結果會有改變？
謝謝

--","R_Language"
"1753","M.1451032656.A.311","celestialgod","問題","Re: 資料處理的問題",2015-12-25 16:37:33,NA,NA,"※ 引述《PILIPALAPON (pilipalapon)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): 懂一些簡單的指令: [問題敘述]:: 現在有一個資料檔: ID age sex num: 1 30 1 4: 1 20 1 4: 1 21 2 4: 1 32 2 4: 1 48 2 4: 2 23 1 2: 2 46 1 2: 2 21 1 2: 3 23 2 2: 3 71 2 2: 3 32 1 2: 4 56 2 1: 4 12 2 1: 我要同ID的依照num變數做選取，例如ID=1，num=4，那我要取ID=1的第四列觀測值。ID=2: ，num=2，那我要取ID=2的第二列觀測值，以次類推...: 預期結果如下: ID age sex num: 1 32 2 4: 2 46 1 2: 3 71 2 2: 4 56 2 1:

library(plyr)
library(dplyr)
library(magrittr)

# data generation
set.seed(100)
numID = 5
N = 20
dat = data.frame(ID = sample(1:numID, N, TRUE), age = sample(10:50, N, TRUE),
  sex = sample(1:2, N, TRUE)) %>% group_by(ID) %>%
  mutate(num = sample(1:length(age), 1)) %>% arrange(ID, sex, age)
#    ID age sex num
# 1   1  21   1   1
# 2   1  40   2   1
# 3   2  17   1   6
# 4   2  24   1   6
# 5   2  31   1   6
# 6   2  35   1   6
# 7   2  49   1   6
# 8   2  39   2   6
# 9   2  46   2   6
# 10  2  50   2   6
# 11  3  17   1   4
# 12  3  32   1   4
# 13  3  27   2   4
# 14  3  32   2   4
# 15  4  15   1   3
# 16  4  30   1   3
# 17  4  46   1   3
# 18  4  38   2   3
# 19  5  48   1   1
# 20  5  41   2   1

# dplyr解法：

dat %>% group_by(ID) %>% summarise_each(funs(.[unique(num)]))
#   ID age sex num
# 1  1  21   1   1
# 2  2  39   2   6
# 3  3  32   2   4
# 4  4  46   1   3
# 5  5  48   1   1

# 一般解法：

split(dat, dat$ID) %>% lapply(function(subdf) subdf[unique(subdf$num),]) %>%
  do.call(rbind, .)
#   ID age sex num
# 1  1  21   1   1
# 2  2  39   2   6
# 3  3  32   2   4
# 4  4  46   1   3
# 5  5  48   1   1


上面其實跟以下相等：
do.call(rbind, lapply(split(dat, dat$ID),
  function(subdf) subdf[unique(subdf$num),])


新手的話，我再補一個for loop解法：

# for loop
numID = length(unique(dat$ID))
outDF = data.frame(matrix(NA, numID, ncol(dat)))
names(outDF) = names(dat)
for (i in 1:numID)
{
  rowNum = unique(dat[dat$ID == i, ]$num)
  outDF[i,] = dat[dat$ID == i, ][rowNum, ]
}
outDF
#   ID age sex num
# 1  1  21   1   1
# 2  2  39   2   6
# 3  3  32   2   4
# 4  4  46   1   3
# 5  5  48   1   1

--R資料整理套件系列文：magrittr#1LhSWhpH (R_Language)http://tinyurl.com/1LhSWhpHdata.table#1LhW7Tvj (R_Language)http://tinyurl.com/1LhW7Tvjdplyr(上)#1LhpJCfB (R_Language)http://tinyurl.com/1LhpJCfBdplyr(下)#1Lhw8b-s (R_Language)tidyr#1Liqls1R (R_Language)http://tinyurl.com/1Liqls1R--","R_Language"
"1754","M.1451030088.A.A29","PILIPALAPON","問題","資料處理的問題",2015-12-25 15:54:46,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)懂一些簡單的指令[問題敘述]:
現在有一個資料檔
ID age sex num
1 30 1 4
1 20 1 4
1 21 2 4
1 32 2 4
1 48 2 4
2 23 1 2
2 46 1 2
2 21 1 2
3 23 2 2
3 71 2 2
3 32 1 2
4 56 2 1
4 12 2 1
我要同ID的依照num變數做選取，例如ID=1，num=4，那我要取ID=1的第四列觀測值。ID=2
，num=2，那我要取ID=2的第二列觀測值，以次類推...

預期結果如下
ID age sex num
1 32 2 4
2 46 1 2
3 71 2 2
4 56 2 1





--","R_Language"
"1755","M.1450969287.A.4C0","girl5566","問題","無join key之資料整理",2015-12-24 23:01:25,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

有兩個table想要合併

A table

     x    y
1    71   82

2    88   89

B table

    shiftx  shifty
1     0       0

2     0       1

3     1       0

4     1       1

預期結果

   shiftx   shifty    x   y

1     0       0       71  82

2     0       0       88  89

3     0       1       71  82

4     0       1       88  89

5     1       0       71  82

6     1       0       88  89

7     1       1       71  82

8     1       1       88  89

[程式範例]:

無

[環境敘述]:

R 3.1.2 Win7 64bit

[關鍵字]:


--","R_Language"
"1756","M.1450891233.A.E1F","Udyr","問題","不同字串重複次數",2015-12-24 01:20:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
有一些字串，如

>listA
[1] ""001"" ""002"" ""003"" ""004"" ""005""

>listB
[1] ""002"" ""004"" ""006""

>listC
[1] ""001"" ""003"" ""005""

欲得到每個element重複出現的次數

element    freq
001         2
002         2
003         2
004         2
005         2
006         1




--","R_Language"
"1757","M.1450890361.A.7A4","celestialgod","問題","Re: dplyr之filter同時多個值之應用",2015-12-24 01:05:59,NA,NA,"※ 引述《girl5566 (5566520)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 不太懂為何temp <- data %>% filter(NUMBER == c(0,1))找出來的數量會是錯的: 但這樣做的確是有撈出含有0或1的資料  但是好像會不完全!?: 想詢問temp <- data %>% filter(NUMBER == c(0,1)) 所找出來的會是什麼?R會自動補齊長度，所以

如果NUMBER是1,2,3,4,5,6

就是在計算  c(1,2,3,4,5,6) == c(0,1,0,1,0,1)

你如果是要0或1 應該是用  data %>% filter(NUMBER %in% c(0,1)) 較為合適

去?'%in%'看看吧

不然dplyr可以用 data %>% filter(NUMBER==0 | NUMBER==1): [程式範例]:: > temp <- data %>% filter(NUMBER == 0): > print(nrow(temp)): [1] 939: > temp <- data %>% filter(NUMBER == 1): > print(nrow(temp)): [1] 315: > temp <- data %>% filter(NUMBER == 0 | NUMBER == 1): > print(nrow(temp)): [1] 1254: > temp <- data %>% filter(NUMBER == c(0,1)): > print(nrow(temp)): [1] 626: [環境敘述]:: R 3.2.2,Win7 64bit: [關鍵字]:: dplyr,filter--

--","R_Language"
"1758","M.1450886693.A.7D3","girl5566","問題","dplyr之filter同時多個值之應用",2015-12-24 00:04:51,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

不太懂為何temp <- data %>% filter(NUMBER == c(0,1))找出來的數量會是錯的

但這樣做的確是有撈出含有0或1的資料  但是好像會不完全!?

想詢問temp <- data %>% filter(NUMBER == c(0,1)) 所找出來的會是什麼?

[程式範例]:> temp <- data %>% filter(NUMBER == 0)> print(nrow(temp))[1] 939> temp <- data %>% filter(NUMBER == 1)> print(nrow(temp))[1] 315> temp <- data %>% filter(NUMBER == 0 | NUMBER == 1)> print(nrow(temp))[1] 1254> temp <- data %>% filter(NUMBER == c(0,1))> print(nrow(temp))[1] 626

[環境敘述]:

R 3.2.2,Win7 64bit

[關鍵字]:

dplyr,filter

--","R_Language"
"1759","M.1450774338.A.1DB","trumulertrml","問題","回歸分析的係數",2015-12-22 16:52:12,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]
新手(沒寫過程式，R 是我的第一次)
只會一些簡單的指令


[問題敘述]:我想要建構一個兩個變數的回歸模型 lm(y~X1+X2)y=a*X1+b*X2，但是我希望可以對a,b有一些限制，比如說a+b=1之類的請問R可以做到這樣的功能嗎?感謝有空的大師解答小弟的問題--","R_Language"
"1760","M.1450496557.A.FB5","naturalsmen","問題","Shiny上做平行運算(rugarch)",2015-12-19 11:42:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:最近在用rugarch pkg中的ugarchroll做模型回測是用過去1000天的time window為建模樣本 預測隔天(t+1)的波動度每天都會重新fit一個新的模型 圖示如下T daily returns:|---------|--|--------|1         t t+1       T1000 daily returns to fit AR(1)-GARCH(1,1):|-----------|t-999        t1-step forecast:|---|t  t+1圖如果不好理解我再做修改假設某指數有10000天日報酬率每天用過去1000天的moving window做1-step forecast就會有9900筆預測值但可能是因為這樣就要重新fit 9900次AR(1)-GARCH(1,1)所以跑很慢但ugarchroll裡有一個參數可以設cluster所以我參考這個網站裡的方法:http://unstarched.net/2012/12/26/rolling-garch-forecasts/在本機上跑是ok的用RStudio runApp也沒問題速度大概快了3~4倍但一發布到Shiny Server上就直接斷掉(網頁變成灰色)想請問是什麼原因或是有沒有什麼建議的替代方法現在沒加cluster的情況下 要跑快5分鐘...



[程式範例]:Server部分比較精簡 :http://pastie.org/10641054cluster部分在server的backtest最後幾行目前是可執行狀況 只是因為server有省略一些所以基本上跑不出圖若需要完整版code我再提供沒有加cluster部分會如下網址的輸出http://naturalsmen.shinyapps.io/shinyTry加了cluster後 切到Backtesting頁籤會直接灰屏...現在只是跑比較久

問題主要是「在shiny上加快ugarchroll的處理速度」

怕講太多背景會模糊掉焦點@@

如果有需要補充什麼再請告知

謝謝各位大大<(_ _)>

PS. 我一個禮拜後可能會把shiny先關掉

因為免費帳戶一個月有時數限制...

怕直接被耗光囧



[環境敘述]:R version 3.2.1 (2015-06-18)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese (Traditional)_[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C[5] LC_TIME=Chinese (Traditional)_Taiwan.950attached base packages:[1] parallel  stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] xtable_1.7-4       rugarch_1.3-6      fExtremes_3010.81  fTrading_3010.78[5] fGarch_3010.82     fBasics_3011.87    timeSeries_3012.99 timeDate_3012.100[9] quantmod_0.4-5     TTR_0.23-0         Quandl_2.7.0       xts_0.9-7[13] zoo_1.7-12         shiny_0.12.2loaded via a namespace (and not attached):[1] codetools_0.2-11            digest_0.6.8                htmltools_0.2.6[4] R6_2.1.0                    SkewHyperbolic_0.3-2        expm_0.999-0[7] DistributionUtils_0.5-1     Rsolnp_1.15                 grid_3.2.1[10] stringr_1.0.0               numDeriv_2014.2-1           httr_1.0.0[13] GeneralizedHyperbolic_0.8-1 rgl_0.95.1429               httpuv_1.3.3[16] lattice_0.20-31             mime_0.3                    Matrix_1.2-1
[19] KernSmooth_2.23-14          rstudioapi_0.3.1            jsonlite_0.9.16
[22] rsconnect_0.4.1.4           multicool_0.1-9             spd_2.0-1
[25] stringi_0.5-5               magrittr_1.5                tools_3.2.1
[28] mvtnorm_1.0-3               truncnorm_1.0-7             ks_1.10.0
[31] nloptr_1.0.4                Rcpp_0.12.2                 misc3d_0.8-4



[關鍵字]:shiny, parallel, rugarch--","R_Language"
"1761","M.1450402618.A.005","Schematic","問題","R與PHP之間的執行",2015-12-18 09:36:53,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
嘗試用http://www.r-bloggers.com/integrating-php-and-r/此網址的範例在本機電腦執行
但無法出現預期效果

[程式範例]:

PHP部分http://ideone.com/QmHfQTexec(""C:/Program File/R/R-3.2.3/bin/Rscript .\my_rscript.R $N"");

R部分http://ideone.com/vxKQqrpng(filename=""C:/test/temp.png"", width=500, height=500)


電腦可以執行PHP，但PHP呼叫R之後就沒有下文了



[環境敘述]:
R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] MASS_7.3-45

loaded via a namespace (and not attached):
[1] tools_3.2.2


[關鍵字]:
R, PHP

--","R_Language"
"1762","M.1450265843.A.950","Rose9305","問題","關於sample指令",2015-12-16 19:37:21,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我有組數字資料，想把它當成機率，

運用sample指令來抽樣判別各個數值所當的機率時，會抽出(判別)出甚麼。

[程式範例]:

像正常，若只有單筆資料假設數值0.7

sample(c(""不好"",""好""),1,c(1-0.7,0.7),replace=F)

跑R後，就我了解這指令的意思應該是:

出來結果會有0.7機率跑出""好""，0.3機率跑出""不好""

這都可以正常跑出。

但是我想跑一組數值當機率，分別判斷，卻跑不出來。

a<-c(0.01,0.05,0.7,0.3,0.22)

sample(c(""不好"",""好""),1,c(1-a,a),replace=F)

結果顯示:
Error in sample.int(length(x), size, replace, prob) :
incorrect number of probabilities
(看他紅字好像是說機率數值不正確?)
(我一個一個代數值是可以正常跑出，只是我有很長一組數字阿!!!)

我想做出類似於這樣，第一個用0.01代入a內，判斷(抽出)好還是不好，

下一筆用0.05代入a一樣看抽出(判斷).......下去。

最後應該大概要顯示(以上例):不好,不好,好,不好,不好  這樣的結果。

請問要如何做呢?哪邊有問題?




--","R_Language"
"1763","M.1450200152.A.E08","andrew43","分享","柱狀圖的低階繪圖範例",2015-12-16 01:22:28,NA,NA,"因為常被問到，也好久沒來「上班」了，發一個教學文。

問題：怎麼畫出像下面這種圖？也就是二因子的柱狀圖。http://imgur.com/riRkMGA比較麻煩的部份是：
  1. 同時有線條填色與顏色填色
  2. 放在外部的圖示
  3. 有 error bar

以下請見該圖的原始碼。



# dat 為輸入的二因子資料
set.seed(1234)
dat <- data.frame(
    y = rnorm(80, 5, 2),
    x1 = gl(2, 40, labels = c(""A"",""B"")),
    x2 = gl(4, 10, labels = c(""1"",""2"",""3"",""4""))
)

# 利用 tapply 求出各組之 mean 和 sd
y.mean <- with(dat, tapply(y, paste(x1, x2, sep="".""), mean))
y.sd   <- with(dat, tapply(y, paste(x1, x2, sep="".""), sd))

# 為了方便之後畫圖，把 y.mean 和 y.sd 轉成矩陣
# 矩陣各列表示 X2，各欄表示 X1
Y <- matrix(y.mean, 4)
E <- matrix(y.sd, 4)
colnames(Y) <- colnames(E) <- c(""A"", ""B"")
rownames(Y) <- rownames(E) <- c(""1"", ""2"", ""3"", ""4"")

# 接下來就開始畫圖
# 過程小小複雜，若有不了解可以逐步進行並觀看圖怎麼變化

# 先開一個畫布
# 因為我想把圖示畫在右側外部，所以 mar 和 xpd 要自行設定
dev.new(width = 5, height = 5)
par(mar=c(4, 4, 1, 10) + 0.1, xpd = T)

# 接下來是畫上柱狀圖主體
# 因為 X2 == ""4"" 柱體要畫成同時有「斜線填色」和「顏色填色」
# 所以 barplot 要畫二次
# 以下是第一次，只畫主要文字、框線和顏色填色
# 我習慣先自行算好 ylim
# 注意 barplot 的回傳值被我定義為變數 bp（之後有用）
bp <- barplot(
    Y, beside = T,
    xaxt = ""n"", ylim = c(0,10),
    ylab = ""Title for y-axis (dat$y)"", xlab = ""Title for x-axis (dat$x1)"",
    col = c(0,3,0,""yellow"")
)

# 接下來是疊上 X2 == ""4"" 柱體的「斜線填色」
# 上一步已經畫過的就不要再畫一次
# 只要畫上 X2 == ""4"" 柱體的「斜線填色」即可
# 注意到 add = T 就是疊圖的作用
barplot(
    Y, beside = T,
    xaxt = ""n"", ylim = c(0,10), yaxt = ""n"",
    ylab = """", xlab = """",
    col = c(0,1,1,1), density = c(0,0,25,15), angle = c(NULL,NULL,45,135),
    border = c(0,0,0,0),
    add = T
)

# 這裡只是示範怎麼用 axis()
axis(1, colMeans(bp), c(""A"", ""B""), tick = F)

# 這裡是畫「只向上方延伸的 error bar」
# 這時候 bp 的值（也就是每個柱的橫軸位置）就很有用了
arrows(bp, Y, bp, Y+E, length = 0.1, angle = 90)
# 當然也可以再補畫上「向下方延伸的 error bar」
# 但這個例子不太適當就不做了
# 有需要的話請再加入
# arrows(bp, Y, bp, Y-E, length = 0.1, angle = 90)

# 接下來是畫圖示
# 這裡示範如何把圖示畫在右側外部
# 需要與前面 par() 配合才行
# 也因為 X2 == ""4"" 柱體的同時有「斜線填色」和「顏色填色」
# 所以 legend() 一樣要畫兩次
# 第一次負責文字、線框、顏色填色
legend(
    ""right"",
    legend = c(""1"", ""2"", ""3"", ""4""),
    fill = c(0,3,0,""yellow""),
    title = ""Row name (dat$x2)"",
    text.width = 5.5,
    box.lwd = 1, col = c(1,1,1,1),
    inset=c(-0.9,0)
)

# 第二次負責 X2 == ""4"" 的斜線填色就好
# 重覆的東西都不要再畫
# 注意兩次畫 legend 要完全重疊才會成功
# 因此我定了 text.width 之類看似多餘的參數
legend(
    ""right"",
    legend = c("""", """", """", """"),
    fill = c(0,0,1,1),
    border = c(0,0,0,0),
    density = c(0,0,25,15), angle = c(NULL,NULL,45,135),
    title = """",
    text.width = 5.5,
    box.lwd = 0, col = c(0,0,0,0),
    inset=c(-0.9,0)
)

# 畫個框框
box()







[關鍵字]: 柱狀圖 線條填色 外部圖示

--","R_Language"
"1764","M.1450199093.A.5D7","LinNine","問題","Re: 檔名append",2015-12-16 01:04:50,NA,NA,"※ 引述《lambking (BB)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 有多個檔案 每個檔案的格式皆相同: 例：: >fread('aa.csv'): name     id     amount: sam      001      2: >fread('bb.csv'): name     id     amount: tom      007      5: 想在每個檔案中增加一個欄位紀錄其檔名: ex:: name     id     amount   file: sam      001      2       aa: ...: ...先把檔案位置設為filepath, 然後透過list.files找出所有的檔案並讀入

把分散的表先mutate出一欄檔名 再bind_rows到Full data.frame

library(magrittr)
library(dplyr)

filepath = ""test/""
temp <- list.files(path = filepath, pattern = ""*.csv"")
filename <- temp %>% gsub(x = ., pattern = "".csv"", """")

for(i in 1:length(filename)){
    assign( filename[i], read.csv(paste0(filepath, temp[i])))
}

FullDF <- data.frame()
for(i in 1:length(filename)){
    FullDF <- bind_rows(FullDF, filename[i] %>% get %>% mutate(file =
filename[i]))
filename[i]))
}

--","R_Language"
"1765","M.1450115698.A.4C0","lambking","問題","檔名append",2015-12-15 01:54:56,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有多個檔案 每個檔案的格式皆相同

例：

>fread('aa.csv')

name     id     amount
sam      001      2

>fread('bb.csv')

name     id     amount
tom      007      5

想在每個檔案中增加一個欄位紀錄其檔名

ex:

name     id     amount   file
sam      001      2       aa
...

--","R_Language"
"1766","M.1449893072.A.5D8","ritajen","問題","關於蒙地卡羅統計模擬",2015-12-12 12:04:30,NA,NA,"[問題類型]
我想用R做統計模擬，看看重複試驗後的信賴區間是否名符其實

[軟體熟悉程度]
新手

[問題敘述]
已知期望值、標準差隨機抽取n個樣本後，重複1000，想檢查其95%的覆蓋率是否屬實，這可以使用for迴圈得到解，我的問題是如果我的抽取樣本數變成不是固定的，如:
5,10,15,20,…,95,100個樣本，這樣我是可以利用""function""得到結果嗎?  如果是以下是我目前的程式，但結果輸出後系統出現警示
""In r95[i] <- mean(x) + qnorm(0.975) * sqrt(sigma^2/n) :
  被替換的項目不是替換值長度的倍數""
我猜測是function有問題，不過不曉得應該如何解決?
再者，我如果要將結果畫成圖橫軸為sample size，縱軸為覆蓋率，是否應該利用plot的方式進行?
謝謝

[程式範例]
rm(list = ls())
mu <- 7; sigma <- 2; n <- seq(from=5,to=100,by=5); no.rep <- 1000

l95 <- rep(NA,no.rep)
r95 <- rep(NA,no.rep)
l99 <- rep(NA,no.rep)
r99 <- rep(NA,no.rep)
final=function(n){

for(i in 1:no.rep){         #重複1000次
  print(i)
  set.seed(i)
  x <- rnorm(n,mu,sigma)
  l95[i] <- mean(x)-qnorm(0.975)*sqrt(sigma^2/n)
  r95[i] <- mean(x)+qnorm(0.975)*sqrt(sigma^2/n)
  l99[i] <- mean(x)-qnorm(0.995)*sqrt(sigma^2/n)
  r99[i] <- mean(x)+qnorm(0.995)*sqrt(sigma^2/n)
}
mean((l95<=mu) & (mu<=r95))   # 檢查覆蓋率(coverage)
mean((l99<=mu) & (mu<=r99))

}

final(seq(from=5,to=100,by=5))

--
Sent from my Windows

--","R_Language"
"1767","M.1449852011.A.1EC","Edster","問題","截距為常數(不為零)的迴歸",2015-12-12 00:40:08,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:開發者(有撰寫R 的套件經驗)[問題敘述]:

在 stat::lm 中, 若是要設定截距為零可以這樣設定

lm(y~x+0, data=data.frame(x,y))

但是如果我的截距為常數項, 但不為零. 請問要怎麼寫呢？

難道是

lm(y~x+0, data=data.frame(x,y+a))

a 為已知常數項.

關鍵字regression; lm; 已知截距.--","R_Language"
"1768","M.1449810694.A.BB5","cb1040","問題","load packages問題",2015-12-11 13:11:30,NA,NA,"[程度]: 新手

[問題敘述]: 我總共有兩個問題

1.[更新]
後來發現是在我的OSX上 (老闆說在他的電腦上操作都很正常)
methyAnalysis及rgl這兩個都無法使用biocLite來更新
尤其rgl一直重複在下載舊版本，最後用R自己的Packages Installer更新
有人知道為什麼會這樣嗎??

------------------------------------

我想用R做DNA甲基化分析，但是無法load packages
這次涉及兩個packages : ""methyAnalysis"" 及 ""rgl""
但主要是卡在rgl的安裝上，詳細結果在程式範例
試過兩個方法但都沒效
A.兩個都移除，兩個一起重新安裝
B.兩個都移除，只安裝methyAnalysis，加上""dep=TRUE"" argument

2.
因為不是學程式的，遇到這種問題我都非常困擾
像是traceback的結果，我看不懂
想請問板上大大推薦如何學習這種基礎
直接找精華區的資訊來啃嗎?


[程式範例]:http://pastie.org/10624510[環境敘述]:http://pastie.org/10624511[關鍵字]:
methyAnalysis, rgl,

--","R_Language"
"1769","M.1449672173.A.E60","girl5566","問題","如何找出矩形旁最近的兩個橢圓!?",2015-12-09 22:42:50,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

平面上有多個矩形和多個橢圓，彼此皆不重合，想求一矩形左邊最近的橢圓

和右邊最近的橢圓

R裡面有多邊形和多邊形直接求距離的package嗎??

還是這種問題直接用X軸來看就可以了!?

[程式範例]:

[環境敘述]:

R3.2.2 win7 64bit

[關鍵字]:


--","R_Language"
"1770","M.1449671470.A.AC4","banyhong","問題","Re: 如何判斷橢圓與矩形是否重疊?",2015-12-09 22:31:08,NA,NA,"※ 引述《girl5566 (5566520)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 目前有很多個橢圓形和矩形，想濾掉橢圓形與矩形相重合的矩形，如代碼中的藍色矩形: 不知道有什麼好方法可以做這件事情呢!?: [程式範例]:: d <- data.frame(x = c(8,5,2,5), y = c(5,9,5,1)): plot(d,:      xlim=c(1, 10),:      ylim=c(1,20)): bb <- data.frame(x = 1:10,y = 10:19): points(bb,col=""blue""): theta <- seq(0, 2 * pi, length=(30)): x <- 100 + 50 * cos(theta): y <- 300 + 100 * sin(theta): plot(x, y, xlim=c(1, 500),:      ylim=c(1,500),type = ""l""): i <- 4*(0:10): rect(80, 280, 120, 320, col = ""blue""): rect(380, 280, 420, 320, col = ""red""): [環境敘述]::: R 3.2.2 win7 64bit: [關鍵字]::

如果你想問的是，用數學的角度判斷是否在橢圓內部

橢圓的方程式是 x^2 / a^2 + y^2 / b^2 < 1

e1 <- function(c) return((c[1]-100)^2/50^2 + (c[2]-300)^2/100^2 < 1)

# 這是矩形的四個角座標
r1 <- matrix(c(80,80,120,120,280,320,280,320),4)
#      [,1] [,2]
# [1,]   80  280
# [2,]   80  320
# [3,]  120  280
# [4,]  120  320

apply(r1, 1, e1)
# [1] TRUE TRUE TRUE TRUE

這裡要看你的「重合」是指四個角都在內部，或只有一個在就算

--","R_Language"
"1771","M.1449577383.A.555","girl5566","問題","如何判斷橢圓與矩形是否重疊?",2015-12-08 20:23:01,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

目前有很多個橢圓形和矩形，想濾掉橢圓形與矩形相重合的矩形，如代碼中的藍色矩形

不知道有什麼好方法可以做這件事情呢!?

[程式範例]:

d <- data.frame(x = c(8,5,2,5), y = c(5,9,5,1))
plot(d,
     xlim=c(1, 10),
     ylim=c(1,20))
bb <- data.frame(x = 1:10,y = 10:19)
points(bb,col=""blue"")
theta <- seq(0, 2 * pi, length=(30))
x <- 100 + 50 * cos(theta)
y <- 300 + 100 * sin(theta)
plot(x, y, xlim=c(1, 500),
     ylim=c(1,500),type = ""l"")
i <- 4*(0:10)
rect(80, 280, 120, 320, col = ""blue"")
rect(380, 280, 420, 320, col = ""red"")


[環境敘述]:R 3.2.2win7 64bit

[關鍵字]:--","R_Language"
"1772","M.1449563311.A.901","celestialgod","問題","Re: 比對後產生新欄位 與 值",2015-12-08 16:28:29,NA,NA,"※ 引述《psinqoo (零度空間)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]::: 我想問: 表一比對表二後，產生新欄位，並貼上值 或 Y / N: 我用 merge 然後，又修修剪剪貼貼，似乎應該不是這樣: 用SQL是可以做，但我想從SQL撈資料後，在R上面做: 表一              表二: 代號   編碼       代號   編碼: A      02123      C      76545: D      34567      D      34567: E      34871      E      34871: E      34871: B      12345: C      76545: D      34567: E      34871: F      32111: G      98123: H      45694: C      76545: D      34567: E      34871: F      32111: F      32111: G      98123: H      45694: 變成這樣: 代號   編碼       比對: A      02123      N: D      34567      Y: E      34871      Y: E      34871      Y: B      12345      N: C      76545      Y: D      34567      Y: E      34871      Y: F      32111      N: G      98123      N: H      45694      N: C      76545      Y: D      34567      Y: E      34871      Y: F      32111      N: F      32111      N: G      98123      N: H      45694      N:: [程式範例]::: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題:: [環境敘述]::
:: [關鍵字]:: 合併: 比對: match: merge:
:

沒有其他column下這樣就可以搞定了：

library(dplyr)
df_A = data.frame(code = sample(LETTERS[1:10], 100, TRUE),
  ID = sample(1:(1e5-1), 100, TRUE))
df_B = df_A[1:5,]
out = bind_rows(df_A, df_B) %>% mutate(check = duplicated(., fromLast =TRUE),
  check2 = duplicated(.)) %>% filter(!check2) %>% select(-check2)

有其他column的話就擷取要比對的部分，然後做出上面的out，取out$check併回去

--

--","R_Language"
"1773","M.1449562262.A.459","psinqoo","問題","比對後產生新欄位 與 值",2015-12-08 16:10:58,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:我想問表一比對表二後，產生新欄位，並貼上值 或 Y / N我用 merge 然後，又修修剪剪貼貼，似乎應該不是這樣用SQL是可以做，但我想從SQL撈資料後，在R上面做表一              表二代號   編碼       代號   編碼A      02123      C      76545D      34567      D      34567E      34871      E      34871E      34871B      12345C      76545D      34567E      34871F      32111G      98123H      45694C      76545D      34567E      34871F      32111F      32111G      98123H      45694變成這樣代號   編碼       比對A      02123      ND      34567      YE      34871      YE      34871      YB      12345      NC      76545      YD      34567      YE      34871      YF      32111      NG      98123      NH      45694      NC      76545      YD      34567      YE      34871      YF      32111      NF      32111      NG      98123      NH      45694      N[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[環境敘述]:[關鍵字]:
合併
比對
match
merge--

--","R_Language"
"1774","M.1449543618.A.D94","celestialgod","問題","Re: filled.contour plot",2015-12-08 11:00:15,NA,NA,"※ 引述《dreler1 (....)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): 使用 filled.contour plot，: filled.contour(lon_3, lat, annual_data_LTO_3,:                plot.axes={axis(1,at=seq(-180,180,by=30),:                           labels=seq(-180,180,by=30));:                           axis(2,at=seq(-90,90,by=30),:                           labels=seq(-90,90,by=30));:                           par(usr=c(-180,180,-90,90));map(add=T)},:                xlab=""LON"",ylab=""LAT"",:                key.title = title(main = ""absdiff \n O3 \n (ppbv)""),:                key.axes = axis(4,at=seq(0.,0.6,by=0.1),:                           labels=seq(0.,0.6,by=0.1))): 例如說我有三張圖 z range = 0-0.6, 0-0.8, 0-1.2: 我要怎麼讓 color bar 的 min: max 還有 間距一樣: 我嘗試使用 key.axes 感覺好像不對: 使用 nlevel 又一直出錯，看不太懂怎麼寫: 感謝xy <- expand.grid(1:20, 1:20)
z1 <- matrix(xy[,1] + xy[,2], 20)
z4 <- matrix(2*xy[,1] + 2*xy[,2], 20)

filled.contour(x = 1:20, y = 1:20, z = z1, zlim = c(0, 80))
filled.contour(x = 1:20, y = 1:20, z = z2, zlim = c(0, 80))

--

--","R_Language"
"1775","M.1449521531.A.8AF","dreler1","問題","filled.contour plot",2015-12-08 04:52:09,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

使用 filled.contour plot，

filled.contour(lon_3, lat, annual_data_LTO_3,
               plot.axes={axis(1,at=seq(-180,180,by=30),
                          labels=seq(-180,180,by=30));
                          axis(2,at=seq(-90,90,by=30),
                          labels=seq(-90,90,by=30));
                          par(usr=c(-180,180,-90,90));map(add=T)},
               xlab=""LON"",ylab=""LAT"",
               key.title = title(main = ""absdiff \n O3 \n (ppbv)""),
               key.axes = axis(4,at=seq(0.,0.6,by=0.1),
                          labels=seq(0.,0.6,by=0.1)))

例如說我有三張圖 z range = 0-0.6, 0-0.8, 0-1.2

我要怎麼讓 color bar 的 min: max 還有 間距一樣
我嘗試使用 key.axes 感覺好像不對

使用 nlevel 又一直出錯，看不太懂怎麼寫

感謝



--","R_Language"
"1776","M.1449329773.A.E4F","celestialgod","問題","Re: 表格問題",2015-12-05 23:36:10,NA,NA,"※ 引述《qaz5746986 (雲之痕)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請教各位前輩，如想把r內建的iris資料集，計算出specis三個花種類別之下: 其餘4個連續型變數的mean  var 並做成一大張表格，該怎用迴圈寫出來較簡潔呢?: 我只會用tapply一個一個算再bind起來...請各位前輩教導最簡單的寫法，其他還有by, aggregate之類的
funs = list(mean, sd, var, min, median, max)
MM = matrix(NA, 3, (ncol(iris)-1)*length(funs))
for (i in seq_along(funs))
  for (j in 1:(ncol(iris)-1))
    MM[,(i-1)*(ncol(iris)-1)+j] = tapply(iris[,j], iris[,5], funs[[i]])


最好的方式：

library(dplyr)
iris %>% group_by(Species) %>%
  summarise_each(funs(mean, sd, var, min, median, max))


--","R_Language"
"1777","M.1449328749.A.3C9","qaz5746986","問題","表格問題",2015-12-05 23:19:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
請教各位前輩，如想把r內建的iris資料集，計算出specis三個花種類別之下

其餘4個連續型變數的mean  var 並做成一大張表格，該怎用迴圈寫出來較簡潔呢?

我只會用tapply一個一個算再bind起來...請各位前輩教導

--","R_Language"
"1778","M.1449316677.A.444","celestialgod","問題","Re: 利用newton-raphson method 求迴歸係數",2015-12-05 19:57:54,NA,NA,"※ 引述《ritajen (asdfge)》之銘言：: ※ 引述《celestialgod (天)》之銘言：: : 我懶得推文了...: : 問題如下：: : 1. 你知道logistic的MLE怎麼算嗎？: : 2. 你有了牛頓法的程式，但是你知道f3放什麼？x0放什麼嗎？: : 3. 我看不懂你創的矩陣，[Y-pi1]是從哪堥茠滿H: : 4. 從你的敘述裡面，似乎都對newton這個函數不熟悉，你要怎麼跑這個程式？: : 5. 你知道R可以直接用glm求logistic regression的迴歸係數嗎？: 我知道R裡面可以直接算唷，不過規定不可以使用內建函數。: 然後我知道MLE的求法，求殘差到回歸線的最小平方和。^^^^^^^^^^^^^^^^^^^^^^^^^^

logistic的求法不完全是這樣...

你的Y是0 or 1，此時殘差並沒有太大的意義

logistic採取的是iterative reweighted least-square的方法

weighted least-square應該聽過吧？

平常的least-square 對每一個樣本在做加權的動作

logistic regression的Likelihood求出來之後

透過微分，可以得到

hessian 類似  X^TWX

gradient 是 X^T(y-pi) 的樣子

pi = P(Y = 1 | X_i) 換成中文，就是給定X_i時，Y=1的機率

最後透過newton method做疊代就可以得到結果了~~

因此，你對logistic求解的過程不甚熟悉

所以不知道怎麼利用newton這個函數

問題不是問的不好，我只是透過問題去了解你認識的程度，才方便做回答而已

我的文字可能比較生硬，如有得罪，還請多多包涵

最後，你可以google看看 logistic regression MLE 應該可以找到相關資訊: f3的話我的理解是一個包刮{gradient,hessian}的函數,: 我了解這兩個值需要利用矩陣相乘而得。: [Y-pi](這是提示給可以利用的矩陣)，至於newton這個函數我是不熟沒有錯，因為剛開始接觸又沒有數理的背景，抱歉問了不好問題。: 因為真的想了很多天還是無從下手，所以才想來請益各位，問題問得不好抱歉。最後的程式：http://pastebin.com/hSJq1Enr--","R_Language"
"1779","M.1449315949.A.E44","ritajen","問題","Re: 利用newton-raphson method 求迴歸係數",2015-12-05 19:45:47,NA,NA,"※ 引述《celestialgod (天)》之銘言：: 我懶得推文了...: 問題如下：: 1. 你知道logistic的MLE怎麼算嗎？: 2. 你有了牛頓法的程式，但是你知道f3放什麼？x0放什麼嗎？: 3. 我看不懂你創的矩陣，[Y-pi1]是從哪堥茠滿H: 4. 從你的敘述裡面，似乎都對newton這個函數不熟悉，你要怎麼跑這個程式？: 5. 你知道R可以直接用glm求logistic regression的迴歸係數嗎？: ※ 引述《ritajen (asdfge)》之銘言：: : 如題，利用牛頓法求logistic regression迴歸係數的最大概似估計值，: : 目前我有牛頓法的雛型，: : rm(list = ls()): : newton <- function(f3, x0, tol = 1e-9, n.max = 100) {: :   x <- x0: :   f3.x <- f3(x): :   n <- 0: :   while ((max(abs(f3.x[[1]])) > tol) & (n < n.max)) {: :     x <- x - solve(f3.x[[2]]) %*% f3.x[[1]]: :     f3.x <- f3(x): :     n <- n + 1: :   }: :   if (n == n.max) {: :     cat('newton failed to converge\n'): :   } else {: :     return(x): :   }: : }: : 以下是我的data，我目前了解需先創立一個新的矩陣: : X=[1 gpa gre] (共有n行是一個n*3的矩陣): : 再創造一個: : [Y-pi1](共有n行是一個n*1的矩陣，其中pi是機率): : 但這個地方我不太明白pi要是多少?: : 是利用上面所創作出來的矩陣相乘得到f3，在代迴上述求解嗎?: : 這樣解會是一個矩陣? (迴歸係數): : 麻煩厲害的人求解 感謝!我知道R裡面可以直接算唷，不過規定不可以使用內建函數。
然後我知道MLE的求法，求殘差到回歸線的最小平方和。
f3的話我的理解是一個包刮{gradient,hessian}的函數,
我了解這兩個值需要利用矩陣相乘而得。
[Y-pi](這是提示給可以利用的矩陣)，至於newton這個函數我是不熟沒有錯，因為剛開始接觸又沒有數理的背景，抱歉問了不好問題。
因為真的想了很多天還是無從下手，所以才想來請益各位，問題問得不好抱歉。

--
Sent from my Windows

--","R_Language"
"1780","M.1449313809.A.BBC","celestialgod","問題","Re: 利用newton-raphson method 求迴歸係數",2015-12-05 19:10:06,NA,NA,"我懶得推文了...

問題如下：

1. 你知道logistic的MLE怎麼算嗎？

2. 你有了牛頓法的程式，但是你知道f3放什麼？x0放什麼嗎？

3. 我看不懂你創的矩陣，[Y-pi1]是從哪堥茠滿H

4. 從你的敘述裡面，似乎都對newton這個函數不熟悉，你要怎麼跑這個程式？

5. 你知道R可以直接用glm求logistic regression的迴歸係數嗎？※ 引述《ritajen (asdfge)》之銘言：: 如題，利用牛頓法求logistic regression迴歸係數的最大概似估計值，: 目前我有牛頓法的雛型，: rm(list = ls()): newton <- function(f3, x0, tol = 1e-9, n.max = 100) {:   x <- x0:   f3.x <- f3(x):   n <- 0:   while ((max(abs(f3.x[[1]])) > tol) & (n < n.max)) {:     x <- x - solve(f3.x[[2]]) %*% f3.x[[1]]:     f3.x <- f3(x):     n <- n + 1:   }:   if (n == n.max) {:     cat('newton failed to converge\n'):   } else {:     return(x):   }: }: 以下是我的data，我目前了解需先創立一個新的矩陣: X=[1 gpa gre] (共有n行是一個n*3的矩陣): 再創造一個: [Y-pi1](共有n行是一個n*1的矩陣，其中pi是機率): 但這個地方我不太明白pi要是多少?: 是利用上面所創作出來的矩陣相乘得到f3，在代迴上述求解嗎?: 這樣解會是一個矩陣? (迴歸係數): 麻煩厲害的人求解 感謝!--","R_Language"
"1781","M.1449310298.A.792","ritajen","問題","利用newton-raphson method 求迴歸係數",2015-12-05 18:11:35,NA,NA,"如題，利用牛頓法求logistic regression迴歸係數的最大概似估計值，
目前我有牛頓法的雛型，
rm(list = ls())
newton <- function(f3, x0, tol = 1e-9, n.max = 100) {
  x <- x0
  f3.x <- f3(x)
  n <- 0
  while ((max(abs(f3.x[[1]])) > tol) & (n < n.max)) {
    x <- x - solve(f3.x[[2]]) %*% f3.x[[1]]
    f3.x <- f3(x)
    n <- n + 1
  }
  if (n == n.max) {
    cat('newton failed to converge\n')
  } else {
    return(x)
  }
}


以下是我的data，我目前了解需先創立一個新的矩陣
X=[1 gpa gre] (共有n行是一個n*3的矩陣)
再創造一個
[Y-pi1](共有n行是一個n*1的矩陣，其中pi是機率)
但這個地方我不太明白pi要是多少?

是利用上面所創作出來的矩陣相乘得到f3，在代迴上述求解嗎?
這樣解會是一個矩陣? (迴歸係數)

麻煩厲害的人求解 感謝!

<data> y是admit x是gre、gpa
ID      admit   gre     gpa
1       0       380     3.61
2       1       660     3.67
3       1       800     4
4       1       640     3.19
5       0       520     2.93
6       1       760     3
7       1       560     2.98
8       0       400     3.08
9       1       540     3.39
10      0       700     3.92
11      0       800     4
12      0       440     3.22
13      1       760     4
14      0       700     3.08
15      1       700     4
16      0       480     3.44
17      0       780     3.87
18      0       360     2.56
19      0       800     3.75
20      1       540     3.81
21      0       500     3.17
22      1       660     3.63
23      0       600     2.82
24      0       680     3.19
25      1       760     3.35
26      1       800     3.66
27      1       620     3.61
28      1       520     3.74
29      1       780     3.22
30      0       520     3.29
31      0       540     3.78
32      0       760     3.35
33      0       600     3.4
34      1       800     4
35      0       360     3.14
36      0       400     3.05
37      0       580     3.25
38      0       520     2.9
39      1       500     3.13
40      1       520     2.68
41      0       560     2.42
42      1       580     3.32
43      1       600     3.15
44      0       500     3.31
45      0       700     2.94
46      1       460     3.45
47      1       580     3.46
48      0       500     2.97
49      0       440     2.48
50      0       400     3.35

--
Sent from my Windows

--","R_Language"
"1782","M.1449291455.A.EF9","buzz20374","問題","truehist和hist的關係",2015-12-05 12:57:31,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別)[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想請教一下，truehist和hist指令之間的關係。

我看了R的?truehist，但是我還是用不清楚它們之間的差別在哪裡。

我覺得hist(data,freq=FALSE)和truehist(data)是概念一樣的東西。

那為什麼又需要truehist呢?

truehist (a density estimate of total area 1)



而書上的兩個例子，

library(MASS)
attach(faithful)
par(mfrow=c(1,2))
hist(eruptions,freq=FALSE,main="""",col=27)
truehist(eruptions,col=27)

比較兩個圖會有差別。http://imgur.com/GlaKax5所以我想請教，truehist和hist的區別和用法時機，謝謝。

--","R_Language"
"1783","M.1449108543.A.962","Udyr","問題","比對",2015-12-03 10:09:01,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:資料有兩個table其中一個為> aaid1     id2     id3    id4    id51       a        b       c       d       e2       c        a       f        g       h3       b        a       g        e       d…>bbid   score1    a       12    b       23    c       34    d       45    e       5...想要比對兩個table對aa中的每一列計算其相對的中位數例如aa[1,]a      b     c     d    e對應         1      2     3     4    5中位數為3--","R_Language"
"1784","M.1448992439.A.9FA","andrew43","問題","Re: 取出Residual再跑一次Regression",2015-12-02 01:53:56,NA,NA,"當你建立 lm 物件時，該物件會保留有參與的資料內容。
y  <- c(NA,1,2,3, 4,5, 6)
x1 <- c( 1,2,2,2, 2,3,NA)
x2 <- c( 3,5,3,4,NA,3 ,2)
m <- lm(y ~ x1 + x2)
m$model

  y x1 x2
2 1  2  5
3 2  2  3
4 3  2  4
6 5  3  3

可以看出實際使用的資料只有 lm物件$model 的內容。
這樣你即可以檢查了。※ 引述《developme223 (allen)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的:       程式碼：: model.1 <- lm(TAC ~ 0 +TA +REC +PPE ,data=merge.data.3): model.2 <- lm(merge.data.3$RIR ~ model.1$residual): 其中，: merge.data.3 大概資料型態：: Code  RIR  TAC  TA   REC PPE: 1      20  200  0.5  .   .: 2      30  .    .    .   .: .: .: .: 533     .  .    .    .   .:     先跑一個簡單線性回歸模型(model.1)，取出此模型之殘差，: 再跑一次簡單線性回歸(model.2)，但此時殘差(model.1$residual): 的排列與原先的data.frame不同(無法執行，跑出Variable lengths differ): 有嘗試用cbind與data.frame重組資料，但好像也無法解決，想請教各位高手: 。: [關鍵字]:--","R_Language"
"1785","M.1448981991.A.AB5","girl5566","問題","小波轉換函式庫用法",2015-12-01 22:59:47,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
想將time series 分成四、五個波形，來進行小波分析

目前僅有看到python有 example code R僅找到相關函式庫  但還不太清楚要如何使用

想要的結果與Python相似

[程式範例]:

Pythonhttp://codex.wiki/question/1128209-6565R waveletshttp://wenku.baidu.com/view/cd757ded6294dd88d0d26ba8.html[環境敘述]:

R 3.2.2

[關鍵字]:

wavelet

--","R_Language"
"1786","M.1448962118.A.B24","developme223","問題","取出Residual再跑一次Regression",2015-12-01 17:28:36,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的程式碼：
model.1 <- lm(TAC ~ 0 +TA +REC +PPE ,data=merge.data.3)
model.2 <- lm(merge.data.3$RIR ~ model.1$residual)

其中，
merge.data.3 大概資料型態：

Code  RIR  TAC  TA   REC PPE
1      20  200  0.5  .   .
2      30  .    .    .   .
.
.
.
533     .  .    .    .   .

    先跑一個簡單線性回歸模型(model.1)，取出此模型之殘差，
再跑一次簡單線性回歸(model.2)，但此時殘差(model.1$residual)
的排列與原先的data.frame不同(無法執行，跑出Variable lengths differ)
有嘗試用cbind與data.frame重組資料，但好像也無法解決，想請教各位高手
。




[關鍵字]:

--","R_Language"
"1787","M.1448940603.A.3A8","celestialgod","徵人","Fw: 中研院統計所徵研究助理、博士後研究",2015-12-01 11:30:01,NA,NA,"※ [本文轉錄自 Statistics 看板 #1MNHEukn ]作者: celestialgod (天) 看板: Statistics
標題: [徵人] 中研院統計所徵研究助理、博士後研究
時間: Tue Dec  1 11:27:48 2015


中研院統計所丘政民老師徵專、兼任研究助理及博士後研究，詳細內容如下：工作內容：協助研究計畫之進行 (Big Data Analytics、Functional/Longitudinal Data Analysis
  等)。應徵資格：一、專、兼任研究助理1. 國內外統計、數學、資訊相關系所畢業，具碩士學位或在學碩博士研究生
   (研發替代役可); 對統計科學、機器學習與大數據分析有興趣者。
2. 熟悉統計軟體且具程式設計能力 (如MATLAB、R、Ｃ/C++等)。二、博士後研究1. 具國內外統計相關博士學位(研發替代役可)；具獨立研究能力者。
2. 熟悉統計軟體且具程式設計能力 (如MATLAB、R、Ｃ/C++等)。應備文件 :履歷、自傳與生涯規劃、成績單影本、論文摘要、推薦信。工作薪資：依科技部或中研院支薪標準（月薪），享勞健保。工作地點：台北巿南港區115研究院路2段128號 中央研究院統計科學研究所聯絡方式：聯絡人員：陳慶全
聯絡地址：台北巿南港區115研究院路2段128號 中央研究院統計科學研究所
聯絡電話：(02) 27835611 轉 146
電子信箱：[email<U+00A0>protected];[email<U+00A0>protected];
截止時間：104年12月31日備註事項：申請資料電子檔逕寄聯絡人； 初選符合者，通知面談時間。

--","R_Language"
"1788","M.1448884370.A.260","tHEiPHoNe","問題","DF轉換成不同長度的向量",2015-11-30 19:52:48,NA,NA,"有一組Data.frame
其中id為人
route為路徑

S user 依序行走路徑為 a -> b -> c -> d -> c -> a -> e
G user 依序行走路徑為 a -> b -> a -> c -> e

原始紀錄格式如下

ID route
S, a
S, b
S, c
S, d
S, c
S, a
S, e
G, a
G, b
G, a
G, c
G, e
H, a
H, b
H, c
H, e
J, a
J, c
J, a
J, c
J, e
K, a
K, b
K, a
K, e


想轉成vector
如下

c(
""S,a,b,c,d,c,a,e"",
""G,a,b,a,c,e"",
""H,a,b,c,e"",
""J,a,c,a,c,e"",
""K,a,b,a,e""
)

請問該如何處理這一類型的轉換
謝謝

--","R_Language"
"1789","M.1448856048.A.139","aee36900","問題","shiny使用迴圈跑多組模型並依序輸出",2015-11-30 12:00:45,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:想要使用shiny跑多組不同參數設定的模型 然後layoutserver端的output不知道如何使用迴圈代替[程式範例]:程式有做些簡化ui的設計如下library(shiny)shinyUI(fluidPage(headerPanel(""model""),sidebarLayout(sidebarPanel(selectInput(""city"", ""choice a city:"",list(""...""))submitButton(""Update View"")),mainPanel(splitLayout(plotOutput(""ns_plot1""),plotOutput(""ns_plot2""),plotOutput(""ns_plot3""),plotOutput(""ns_plot4""),plotOutput(""ns_plot5""))))))server的設計如下#由前端接收參數當作SQL的條件 然後去impala撈資料#接著在renderPlot中 跑模型並畫出圖形行輸出至前端library(shiny)library(RImpala)shinyServer(function(input, output) {datainput <- reactive({sql_query <- paste(...)rimpala.init()rimpala.connect()impala_dataset <-rimpala.query(sql_query)rimpala.close()m2 <- impala_dataset})i <- 1while (i<6){output$ns_plot(i) <- renderPlot({m2 <- datainput()cb.ns <- crossbasis(..., argvar=list(fun=""ns"",df=(i)),...)model.ns  <- glm(visits ~ cb.ns + dow,family=quasipoisson(), m2)pred.ns  <- crosspred(cb.ns ,model.ns )plot(predns, xlab=""air factors"", zlab=""RR"", theta=200, phi=40, lphi=30)})}})[環境敘述]:R version 3.2.1 (2015-06-18)Platform: x86_64-redhat-linux-gnu (64-bit)Running under: CentOS release 6.7 (Final)[關鍵字]:shiny loop polt splitLayout選擇性，也許未來有用--","R_Language"
"1790","M.1448613128.A.E59","locka","問題","用cut對應時辰",2015-11-27 16:32:04,NA,NA,"各位好，也許這是一個笨問題QQ
先謝謝各位回答。

假設我有一個欄位hr，紀錄從0-23的數字，也就是小時。
現在想要把不同的hr，對應到不同的時辰。
判斷規則為取下限不取上限，
也就是1對應到丑時而不是子時，13對應到未時而不是午時...etc

我的做法是用cut
cut(hr, c(0,1,3,5,7,9,11,13,15,17,19,21,23,24), c(""子"",""丑"",""寅"",""卯"",""辰"",""巳
"",""午"",""未"",""申"",""酉"",""戌"",""亥"",""子""),right=FALSE)

因為有23-1的問題，所以我的做法是把它切成0-1、23-24，分開來指定為子時。
可是這樣會有錯誤訊息：
Warning message:
In `levels<-`(`*tmp*`, value = if (nl ==nL) as.character(labels,  :
  duplicated levels in factors are deprecated

不曉得有沒有其他建議的做法?

謝謝大家。

[程式範例]:http://ideone.com/w5FX6F--","R_Language"
"1791","M.1448606499.A.507","Neisseria","問題","RMySQL 無法連線",2015-11-27 14:41:36,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:OS: Debian GNU/Linux Jessie (8.0)MySQL 版本：MariaDB 10.0.22我想用 R 連接到 MySQL 資料庫，卻出現以下錯誤訊息：Failed to connect to database: Error: Can't connect to local MySQL serverthrough socket '/tmp/mysql.sock'已排除資料庫端的問題，我自已用 MariaDB 的 jdbc driver 可以連線另外，我在自已的系統內，找不到 mysql.sock 這個檔案要透過其他的 package 來連線？[程式範例]:library('RMySQL')envValue <- Sys.getenv(c(""MIRNA_DB_USERNAME"", ""MIRNA_DB_PASSWORD"",""MIRNA_DB"", ""MIRNA_DB_HOST""))mydb <- dbConnect(RMySQL::MySQL(),user=envValue['MIRNA_DB_USERNAME'],password=envValue['MIRNA_DB_PASSWORD'],dbname=envValue['MIRNA_DB'],host=envValue['MIRNA_DB_HOST'])[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Debian GNU/Linux 8 (jessie)locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] RMySQL_0.10.7 DBI_0.3.1loaded via a namespace (and not attached):[1] tools_3.2.2[關鍵字]:MySQL--","R_Language"
"1792","M.1448509036.A.FDB","ching0629","問題","R裡面實際數值與四則運算法?",2015-11-26 11:37:13,NA,NA,"[問題類型]:


[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
這個問題很奇怪，我是在使用sample函數時發現的。

簡單來說是R在numeric以及integer的轉換上面似乎不是這麼簡單。

我把問題簡單呈現如下面的程式碼，而這個bug似乎不常出現(但也非罕見)，有時候會出錯有時候又不會

[程式範例]:> (1-0.9)*100[1] 10> as.integer((1-0.9)*100)[1] 9> as.integer((1-0.8)*100)[1] 19> as.integer((1-0.7)*100)[1] 30

[環境敘述]:

R 3.2.2

[關鍵字]:

四則運算; 運算; 整數; 數值

--","R_Language"
"1793","M.1448187696.A.91F","cb1040","問題","""=="" operator問題",2015-11-22 18:21:32,NA,NA,"[問題類型]: 應該算程式諮詢吧

[軟體熟悉度]: 新手

[問題敘述]:
看一本書自學Ｒ，程式碼很簡單，見下方連結
其中遇到與 ""=="" operator有關的問題

此書範例中，叫讀者用""%in%""，不要用""==""，因為
id==c(""A"",""B"")的意思等同id==rep(c(""A"",""B""),times=6

但R help或網站大多只說明""=="" 是 ""exactly equal to""的意思
所以我不太了解為什麼會是這個結果

(另外我也不懂為什麼直接用id==rep(c(.........產生的警告訊息是什麼意思，
希望能幫忙解答，感謝)


[程式範例]:
直接上連結http://pastie.org/10573577[環境敘述]:

R version 3.2.2 (2015-08-14)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.10.5 (Yosemite)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.2


[關鍵字]:r , == , operator, rep , %in%

--","R_Language"
"1794","M.1448167630.A.82D","JX660",NA,"Re: 群集分析圖判斷各群並分別存檔",2015-11-22 12:47:07,NA,NA,"※ 引述《sinclairJ (KEEP MOVING FORWARD)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 在群集分析完成後 會得到一個圖 像下面這樣: https://www.dropbox.com/s/3pylrxdjsdwouw3/hc1.png?dl=0: 但看物件裡的資訊似乎只能查到order (圖中由左至右的資料順序): 再來是如果資料太多 分群圖也會雜在一起 要用order判斷停損的分群位置也不好判斷: 試過幾個其他分群的套件 似乎也都有這個問題: 之前這部分都是用人工肉眼判斷= =""但現在因為要加速分析的流程: 希望在得到分群圖後 就能順便把同群的樣本存成一個檔案輸出: (我分群數的切法就是切最長的那條線 如下圖 我就會把樣本分成三群): https://www.dropbox.com/s/wqjiiwja7b3nv2g/hc2.png?dl=0: [程式範例]:: hc=hclust(dist(iris[,-5])): plot(hc): hc$order #names(hc): [1] 108 131 103 126 130 119 106 123 118 132 110 136 141 145 125 121 144 101: 137 149 116 111 148 113 140 142 146 109 104 117...: 感謝各位先進前輩提點下面我用一樣的資料來做

Data<- iris[,-5]
hc<- hclust(dist(Data))

決定集群數量方法有點麻煩
我自己從hclust指令本身提供的資訊
是找不出最長的那條線會落在那個集群數 (不看圖的情況下)
可能要問其他板友

plot( as.dendrogram(hc), leaflab = ""none"" )
rect.hclust(hc,3)

上述兩行是畫圖決定集群數
第一個指令是畫去掉label的圖
數量一多標碼根本看不出來 直接去掉
第二個指令是標出集群位置 個人覺得蠻方便的


如果不用最長那條線去決定
我自己用過的方法是 Gap Statistic

library(clusterGenomics)
Gaps<- gap( as.matrix(Data) ,Kmax=5)

在clusterGenomics這個package裡面可以找到現成的指令
取Gap的建議值 決定集群數

N<- Gaps$hatK
Data$Cluster<- factor( cutree(hc,N) )
List<- split( Data, Data$Cluster )

在這裡 Gap的建議值是3 與看圖是相同的
接著用cutree這個指令去列出各觀察質屬於哪個集群
並將結果存成其中一個factor變數
再用split指令 處理成一個包含不同集群資料集的list

最後用迴圈存成多個資料集

for ( i in 1 : N ){
write.csv(
        List[[i]] ,
        file =
                paste(""Dataset_"",names(List)[i],"".csv"",sep="""") )
}

結果如下

dir()
[1] ""Dataset_1.csv"" ""Dataset_2.csv"" ""Dataset_3.csv""

原po 參考看看

--","R_Language"
"1795","M.1448157872.A.10B","allen1985","問題","Re: 想用R寫一個統計回歸分析的程式",2015-11-22 10:04:28,NA,NA,"首先 這標題可能有誤 我的理解這問題跟迴歸沒有關係

如果我的理解沒有錯

題目是: 現在有一組資料是10條繩子的長度

        那麼想了解繩子的長度應該是什麼統計分配呢

        是不是常態分配 or 指數分配 or Poisson分配

我猜 原po想做的事情是 隨機產生10組數據從上述的分配

然後看看是否跟繩子長度的分配一樣

如果到這邊 我的理解還是對的 原po可以往下看

1. 請先了解生成隨機變數的指令 請google一下

   例如 rnorm(10,10,90) 跟你的敘述差距很大很大

   只有第一個10是對的 產生10筆資料

   還有 dunif 跟 runif 的差別等等 總之 三個指令都誤用了

2. 回到問題 如果沒有學過很多檢定方式 例如  Kolmogorov–Smirnov test

   建議的做法是 畫直方圖 如果某一組隨機生成的數據 長相跟繩子長度類似

   那麼我想你就接近答案了

3. 跟第一點相關 產生隨機變數的指令 有些參數需要輸入

   一個簡單的做法 利用資料去算出這些參數

   例如 sample mean and sample variance

   其實 在算出這些值之後 也可以利用這些值刪除某些不太可能的分配

   舉例來說 Poisson distribution 的特性是什麼 mean = variance?

4. 最後 想要做任何分析之前 請把統計課本再拿出來翻一下

   瞭解一下其意義 再來實際做分析

   就我看來 T-test 迴歸 在這裡毫無用處 不知道為什麼你會提到

===========================分隔線========================

Sorry 這篇回文跟R沒什麼關係

小弟我實在不敢在這版上回R相關指令問題

版上神人太多了

如果版主覺得不適合 可以刪文

謝謝※ 引述《eegame (yu)》之銘言：: 初學者（兩個月） R是第一個程式語言: 不知道各位前輩有沒做過類似的程式: ！！！假設！！！: 想用R統計10條繩子的長度: 再根據統計特性的率隨機產生10組數據: 程式如下: G <- 10 #10組數據: rowname <- c(1:G) #Y軸名稱: colname <- c(""c1"",""c2"",""c3"",""c4"") #X軸名稱: F <- matrix(,nrow=G,ncol=4,dimnames=list(rowname,colname))?: #開一個10*4的矩陣並以rowname和colname: F[1,""c1""] <- 19: F[2,""c1""] <- 59: F[3,""c1""] <- 48: F[4,""c1""] <- 23: F[5,""c1""] <- 31: F[6,""c1""] <- 48: F[7,""c1""] <- 56: F[8,""c1""] <- 60: F[9,""c1""] <- 74: F[10,""c1""] <- 83: #在矩陣c1的位置放入這10條繩子的調查數據: #假設1符合常態分布: F[,""c2""] <- rnorm(10,10,90)?: #在矩陣c2的位置放入根據常態分佈的機率隨機產生一組新的數據介於10~90之間的10筆數: 據: #假設2符合均勻分布: F[,""c3""] <- dunif(10,10,90): #在矩陣c3的位置放入根據均勻分佈的機率隨機產生一組新的數據介於10~90之間的10筆數: 據: #假設3符合Poisson distribution分布: F[,""c4""] <- dpois(10, lambda=1): #在矩陣c4的位置放入根據Poisson distribution分布的機率隨機產生一組新的數據介於1: 0~90之間的10筆數據: #結果如下: F:      c1                 c2         c3                     c4: 1? 19 -70.255568 0.0125 1.013777e-07: 2? 59     9.346476 0.0125 1.013777e-07: 3? 48? -2.139539 0.0125 1.013777e-07: 4? 23 -33.231206 0.0125 1.013777e-07: 5? 31? 72.630937 0.0125 1.013777e-07: 6? 48? -6.032507 0.0125 1.013777e-07: 7? 56? -8.420308 0.0125 1.013777e-07: 8? 60 -69.542557 0.0125 1.013777e-07: 9? 74? 12.044775 0.0125 1.013777e-07: 10 83 -13.474063 0.0125 1.013777e-07: 問題1.我函數的指令是不是給的不對導致c2 c3 c4的結果錯誤?: 問題2.關於隨機分布的應用 如何做到根據統計特性產生結果?: 問題3.關於數據統計特性如何檢定比較符合 常態分布 均勻分布 負指數分布等等的分布: 特性? 是用卡方檢定 T-test檢定? 還是用數值回歸???: 這兩個月沒有看到類似的文章: 麻煩各位前輩指點迷津: 拜託 拜託--","R_Language"
"1796","M.1448114634.A.015","DrRd","問題","shiny updateSelectInput",2015-11-21 22:03:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
這個程式主要要
1．上傳檔案
2．按上傳檔案的column名稱做變項名稱
3．把變項名稱做為selectInput的選項
4．以selectInput選擇要使用的變項


[程式範例]:https://gist.github.com/4a9d6b27bde066c72258目前我可以成功上傳檔案，但是無法成功把上傳檔案的標題列作為要選擇的選項

看了shiny網頁的範例還是不太能掌握該怎麼使用updateSelectInput

[環境敘述]:
R version 3.2.2 (2015-08-14)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
Running under: OS X 10.11.1 (El Capitan)

shiny_0.12.2
[關鍵字]:選擇性，也許未來有用--","R_Language"
"1797","M.1448074384.A.40E","sinclairJ",NA,"群集分析圖判斷各群並分別存檔",2015-11-21 10:53:01,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:在群集分析完成後 會得到一個圖 像下面這樣https://www.dropbox.com/s/3pylrxdjsdwouw3/hc1.png?dl=0但看物件裡的資訊似乎只能查到order (圖中由左至右的資料順序)再來是如果資料太多 分群圖也會雜在一起 要用order判斷停損的分群位置也不好判斷試過幾個其他分群的套件 似乎也都有這個問題之前這部分都是用人工肉眼判斷= =""但現在因為要加速分析的流程希望在得到分群圖後 就能順便把同群的樣本存成一個檔案輸出(我分群數的切法就是切最長的那條線 如下圖 我就會把樣本分成三群)https://www.dropbox.com/s/wqjiiwja7b3nv2g/hc2.png?dl=0[程式範例]:hc=hclust(dist(iris[,-5]))plot(hc)hc$order #names(hc)>[1] 108 131 103 126 130 119 106 123 118 132 110 136 141 145 125 121 144 101137 149 116 111 148 113 140 142 146 109 104 117...感謝各位先進前輩提點--","R_Language"
"1798","M.1448000644.A.095","eegame","問題","想用R寫一個統計回歸分析的程式",2015-11-20 14:24:02,NA,NA,"初學者（兩個月） R是第一個程式語言
不知道各位前輩有沒做過類似的程式
！！！假設！！！
想用R統計10條繩子的長度
再根據統計特性的率隨機產生10組數據
程式如下
G <- 10 #10組數據
rowname <- c(1:G) #Y軸名稱
colname <- c(""c1"",""c2"",""c3"",""c4"") #X軸名稱
F <- matrix(,nrow=G,ncol=4,dimnames=list(rowname,colname))?
#開一個10*4的矩陣並以rowname和colname
F[1,""c1""] <- 19
F[2,""c1""] <- 59
F[3,""c1""] <- 48
F[4,""c1""] <- 23
F[5,""c1""] <- 31
F[6,""c1""] <- 48
F[7,""c1""] <- 56
F[8,""c1""] <- 60
F[9,""c1""] <- 74
F[10,""c1""] <- 83
#在矩陣c1的位置放入這10條繩子的調查數據

#假設1符合常態分布
F[,""c2""] <- rnorm(10,10,90)?
#在矩陣c2的位置放入根據常態分佈的機率隨機產生一組新的數據介於10~90之間的10筆數
據

#假設2符合均勻分布
F[,""c3""] <- dunif(10,10,90)
#在矩陣c3的位置放入根據均勻分佈的機率隨機產生一組新的數據介於10~90之間的10筆數
據

#假設3符合Poisson distribution分布
F[,""c4""] <- dpois(10, lambda=1)
#在矩陣c4的位置放入根據Poisson distribution分布的機率隨機產生一組新的數據介於1
0~90之間的10筆數據

#結果如下
F
     c1                 c2         c3                     c4
1? 19 -70.255568 0.0125 1.013777e-07
2? 59     9.346476 0.0125 1.013777e-07
3? 48? -2.139539 0.0125 1.013777e-07
4? 23 -33.231206 0.0125 1.013777e-07
5? 31? 72.630937 0.0125 1.013777e-07
6? 48? -6.032507 0.0125 1.013777e-07
7? 56? -8.420308 0.0125 1.013777e-07
8? 60 -69.542557 0.0125 1.013777e-07
9? 74? 12.044775 0.0125 1.013777e-07
10 83 -13.474063 0.0125 1.013777e-07

問題1.我函數的指令是不是給的不對導致c2 c3 c4的結果錯誤?
問題2.關於隨機分布的應用 如何做到根據統計特性產生結果?
問題3.關於數據統計特性如何檢定比較符合 常態分布 均勻分布 負指數分布等等的分布
特性? 是用卡方檢定 T-test檢定? 還是用數值回歸???

這兩個月沒有看到類似的文章
麻煩各位前輩指點迷津
拜託 拜託


--","R_Language"
"1799","M.1447919243.A.1D2","pttchiung","問題","關於找解 小數位的問題",2015-11-19 15:47:20,NA,NA,"想問一下，在R裡的數值分析解(ex.nloptr)，我要怎麼設定讓他找到的解小數位數不要這麼多呢?
因為它內設似乎有到第7位，但是太精確他會找非常久，我想說我想說只要找到小數第二位之類的，這樣會比較快，可是找不到設定的地方..
希望大大們可以幫我解決><
謝謝~

--","R_Language"
"1800","M.1447904741.A.5E4","JJabrams","問題","fread 和 未讀取資料狀態下檢查資料",2015-11-19 11:45:38,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:用R讀取大概1.5億筆5G的csv資料(5 variables)理論上資料應該是完整沒有missing value想要用fread讀取csv檔，卻遇到下列error:> raw_data <- fread('all_data.csv')Read 35.1% of 151308116 rowsError in fread(""all_data.csv"") :Expected sep (',') but new line or EOF ends field 1 on line 55828616 whenreading data: 58改用 read.csv 就可以順利讀取 (只是花了好久的時間......)想請問:1. 為什麼fread讀不進來?2. 有沒有辦法在不讀取資料的狀態下, 直接去檢查 line 55828616 這邊的資料有沒有破損?謝謝大家!![關鍵字]:dplyr,fread--","R_Language"
"1801","M.1447846663.A.E01","Edster","問題","Re: list比對",2015-11-18 19:37:40,NA,NA,"請參見, 懶得generate data. 應該不會太慢. 至少不用一個個比對.

library(magrittr)

X=list()
X[[1]]= ""1,2,3,4,5,6,7,8,9,19""
X[[2]]= ""1,3,4,6,8,9,10,15,17,18""
X[[3]]= ""4,5,7,11,20,24,25,27,28,29,39""

X = lapply(X, function(x){as.integer(strsplit(x, "","")[[1]])});
Y = unlist(X) %>% unique %>% sort
Z = matrix(NA, nrow=length(X), ncol=max(Y), dimnames=list(1:length(X),
1:max(Y)))
Count=numeric(length(X))

for(i in 1:length(X))
  for(j in 1:10)
    Z[i,X[[i]][j]] = 1

for(i in 1:length(X)){
  p = Z[, names(na.omit(Z[i,]))] %>% rowSums(., na.rm=T)
  Count[i] = length(p[p>5])
 }

--","R_Language"
"1802","M.1447825217.A.A04","Udyr","問題","list比對",2015-11-18 13:40:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:


資料的形式如下

[1] ""1,2,3,4,5,6,7,8,9,19""
[2] ""1,3,4,6,8,9,10,15,17,18""
[3] ""4,5,7,11,20,24,25,27,28,29,39""
...    ...


每一個list中有10個element
想對每個list找到與其至少5個element相同的list數目作為 count

若只有上面的資料，list 1 的count=1
（其他list中只有1個list中的相同element數到達5個以上）

在資料量很大的情況下 不知道有沒有比較好的作法



















--","R_Language"
"1803","M.1447818338.A.6DC","celestialgod","問題","Re: 非等長樣本拆分",2015-11-18 11:45:35,NA,NA,"用矩陣想一下就可以搞定了~~ 不用想得太複雜XD

樣本太大，再考慮其他做法吧，不然一般情況下，matrix + for滿快的

(#1LkRShkm (R_Language))

我有想到用apply做，可是速度還是太慢XD，最好的方式還是用matrix + for~~

library(magrittr)
dat = read.csv(""simul1.csv"", header = TRUE) %>% as.matrix
out = replicate(3, matrix(NA, nrow(dat), max(dat[,1]) + 1), simplify = FALSE)
for (i in 1:nrow(dat))
{
  for (k in 1:3)
    out[[k]][i, 1:(dat[i,1]+1)] = c(dat[i,1], dat[i,
      ((k-1)*dat[i,1]+1):(k*dat[i,1])])
}

for (k in 1:3)
  out[[k]] %>% set_colnames(c('length', paste0('V', 1:(ncol(.)-1)))) %>%
    write.csv(paste0('outData_', k, '.csv'))※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 每一列為一樣本 每個樣本有些非等長: 一樣本裡有三條時間序列 （長度為length）: 我要把每個樣本的三條序列分開: 之後再把每樣本的全部第一條序列存成csv: 每樣本的第二條序列也存成csv: 第三條也是 ，所以共會輸出三個檔案: [範例示意]:: Data length v1 v2 v3 v4 v5 v6: 1            2      5   4   3    1   2   1: 2            1      4   3   2: 3            2      1   2   6    8   7   1:  ps. 以Data1 來說明: 5,4就是第一條時間序列，3,1是第二條...以此類推, v為時間點，每個樣本時間點非等長:  csv1:: Data length v1 v2: 1        2         5   4: 2        1         4: 3        2         1   2: csv2:: Data length v1 v2: 1        2          3   1: 2        1          3: 3        2          6   8: csv3: Data length v1 v2: 1        2          2   1: 2        1          2: 3        2          7   1: 資料連結:: https://www.dropbox.com/s/mwzfou8m22bb1jm/simul1.csv?dl=0: 感謝各位前輩指導--

--","R_Language"
"1804","M.1447816057.A.46C","sinclairJ","問題","非等長樣本拆分",2015-11-18 11:07:32,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
每一列為一樣本 每個樣本有些非等長
一樣本裡有三條時間序列 （長度為length）
我要把每個樣本的三條序列分開
之後再把每樣本的全部第一條序列存成csv
每樣本的第二條序列也存成csv
第三條也是 ，所以共會輸出三個檔案

[範例示意]:

Data length v1 v2 v3 v4 v5 v6
1            2      5   4   3    1   2   1
2            1      4   3   2
3            2      1   2   6    8   7   1

 ps. 以Data1 來說明
5,4就是第一條時間序列，3,1是第二條...以此類推, v為時間點，每個樣本時間點非等長
 csv1:
Data length v1 v2
1        2         5   4
2        1         4
3        2         1   2

csv2:
Data length v1 v2
1        2          3   1
2        1          3
3        2          6   8

csv3
Data length v1 v2
1        2          2   1
2        1          2
3        2          7   1

資料連結:https://www.dropbox.com/s/mwzfou8m22bb1jm/simul1.csv?dl=0感謝各位前輩指導

--","R_Language"
"1805","M.1447769248.A.00E","celestialgod","問題","Re: 用*apply或dplyr::do批次跑ANOVA",2015-11-17 22:07:25,NA,NA,"※ 引述《helixc (@_2;)》之銘言：: [問題敘述]:: 手上有一筆資料，基本上要看在四個不同樣區(site)當中，物種種類(SpeciesType): 如何影響某個值(n)，資料如：http://pastebin.com/qyLga5Za ，要跑ANOVA和TukeyHSD。: 要用工人智慧自己寫一樣的程式碼四次目前是做得到的，但總想找到更聰明的方法。: 理想上想要寫個程式一次把重要的統計欄位(如F-value, P-value...etc)整理出來。: 看了各種資料，知道在R當中各種*apply是向量化處裡資料重要的指令，: 我想做的工作理論上可以用*apply實現。: 但目前只對基礎的apply比較熟悉，sapply/lapply今天摸一摸才比較懂，: 而tapply/mapply還還沒有機會用過。: 在股狗的過程當中也發現dplyr::do也可以做類似的工作，也查到了Wush978的簡略介紹，: 但用一用還是有點卡住...是因為dplyr::do只能處裡data.frame的關係嗎？: *apply或dplyr::do的參考資料都是這個網頁 http://goo.gl/WYJXtC: [程式範例]:目前我覺得這種最漂亮還是用map XD (PS: map其實就是lapply而已)

library(data.table)
library(magrittr)
library(purrr)
dat = fread('test.txt')
models = split(dat, dat$site) %>% map(~aov(n~SpeciesType, .))
AOVtables = models %>% map(~summary(.)) %>%
  map(~na.omit(c(.[[1]][['F value']], .[[1]][['Pr(>F)']]))) %>%
  do.call(rbind, .) %>% set_colnames(c(""F"", ""p.value""))
TukeyHSDtables = models %>% map(~TukeyHSD(.)$SpeciesType): 3. 改用dplyr::do來寫，用aov，但怎麼寫都會吐錯誤訊息...: data<-data %>% group_by(site): models <-data %>% do(mdls=aov(n~SpeciesType, data=.)): models %>% rowwise %>% do(data.frame(summary(.$mdls))): 錯誤訊息：: Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors =: stringsAsFactors) :  cannot coerce class ""c(""summary.aov"", ""listof"")"" to: a data.frame我個人不太愛用do，我的使用經驗上，do在很多時候會很慢

之前遇到的案例：

set.seed(100)
library(plyr)
library(dplyr)
N = 1e7
dat = data.frame(V1 = rnorm(N), V2 = rbinom(N, 4, .2),
  V3 = rbinom(N, 3, .1), V4 = rbinom(N, 5, .2))

st = proc.time()
out1 = dat %>% group_by(V2, V3, V4) %>% arrange(V1) %>% do(head(., n = 1))
proc.time() - st
#   user  system elapsed
#  20.06    0.11   20.17

st = proc.time()
out2 = ddply(dat, .(V2, V3, V4), function(x) x[which.min(x$V1),])
proc.time() - st
#   user  system elapsed
#   1.90    0.45    2.35

st = proc.time()
out3 = dat %>% group_by(V2, V3, V4) %>% filter(rank(V1) == 1)
proc.time() - st
#   user  system elapsed
#   3.30    0.08    3.39

all.equal(out1, out2 %>% arrange(V2, V3, V4)) # TRUE
all.equal(out1, out3 %>% arrange(V2, V3, V4)) # TRUE

--

--","R_Language"
"1806","M.1447748638.A.996","helixc","問題","用*apply或dplyr::do批次跑ANOVA",2015-11-17 16:23:55,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:會GOOGLE然後依樣畫葫蘆寫分析程式[問題敘述]:

手上有一筆資料，基本上要看在四個不同樣區(site)當中，物種種類(SpeciesType)
如何影響某個值(n)，資料如：http://pastebin.com/qyLga5Za，要跑ANOVA和TukeyHSD。

要用工人智慧自己寫一樣的程式碼四次目前是做得到的，但總想找到更聰明的方法。
理想上想要寫個程式一次把重要的統計欄位(如F-value, P-value...etc)整理出來。

看了各種資料，知道在R當中各種*apply是向量化處裡資料重要的指令，
我想做的工作理論上可以用*apply實現。
但目前只對基礎的apply比較熟悉，sapply/lapply今天摸一摸才比較懂，
而tapply/mapply還還沒有機會用過。

在股狗的過程當中也發現dplyr::do也可以做類似的工作，也查到了Wush978的簡略介紹，
但用一用還是有點卡住...是因為dplyr::do只能處裡data.frame的關係嗎？

*apply或dplyr::do的參考資料都是這個網頁http://goo.gl/WYJXtC[程式範例]:

1.用*apply的傳統方法，可以把aov塞進去。網頁用的是sapply，我改成lapply。
  可以跑ANOVA還有TukeyHSD沒有問題

models <- lapply(unique((data$site)),
      function(ste)
      {aov(n~SpeciesType,data=data,subset=(site==ste))})
lapply(models,summary) # to summarize all the models
lapply(models,TukeyHSD)


2. 改用dplyr::do來寫，用lm的方法來寫沒問題，但缺點是不能直接套用TukeyHSD

data<-data %>% group_by(site)
models <-data %>% do(mdls= lm(n~SpeciesType, data=.))
models %>% rowwise %>% do(data.frame(anova(.$mdls)))

3. 改用dplyr::do來寫，用aov，但怎麼寫都會吐錯誤訊息...

data<-data %>% group_by(site)
models <-data %>% do(mdls=aov(n~SpeciesType, data=.))
models %>% rowwise %>% do(data.frame(summary(.$mdls)))

錯誤訊息：
Error in as.data.frame.default(x[[i]], optional = TRUE, stringsAsFactors =
stringsAsFactors) :  cannot coerce class ""c(""summary.aov"", ""listof"")"" to
a data.frame

[環境敘述]:
R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] tidyr_0.2.0   readxl_0.1.0  ggplot2_1.0.1 dplyr_0.4.2   plyr_1.8.3

loaded via a namespace (and not attached):
 [1] Rcpp_0.11.6      knitr_1.10.5     magrittr_1.5     MASS_7.3-41
 munsell_0.4.2
 [6] colorspace_1.2-6 R6_2.0.1         stringr_1.0.0    tools_3.2.1
 parallel_3.2.1
[11] grid_3.2.1       gtable_0.1.2     DBI_0.3.1        htmltools_0.2.6
 yaml_2.1.13
[16] lazyeval_0.1.10  assertthat_0.1   digest_0.6.8     reshape2_1.4.1
rmarkdown_0.7
[21] labeling_0.3     stringi_0.5-2    scales_0.2.5     proto_0.3-10

[關鍵字]:*apply, dplyr::do--","R_Language"
"1807","M.1447745780.A.67E","developme223","問題","時間序列資料 求中位數與標準差",2015-11-17 15:36:18,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的Code   date         close_price
3052   2012/5/21        50
3052   2012/5/22        43
3052   2012/5/23        44
3052   2012/5/24        51
3041   2012/8/21        17
3041   2012/8/22        16
3041   2012/8/23        21
.
.
.
5521   2014/5/22        22
5521   2014/5/23        21
5521   2014/5/24        20
8011   2015/5/01        102
8011   2015/5/02        103


我的資料大概長成上面的型態，Code為公司代碼(每間公司資料長短皆不同)

想請問各位如果要算每個Code的Close_price之中位數及標準差，要怎麼做呢?


[程式範例]:[環境敘述]:版本：R i386 3.2.2[關鍵字]:median、tapply--","R_Language"
"1808","M.1447686004.A.B69","Wush978","問題","Re: 關於switch選擇",2015-11-16 23:00:01,NA,NA,"※ 引述《laputaca (離歌笑)》之銘言：: [問題敘述]:: 在function裡面使用switch時: [程式範例]:: 比如說我想要: 當fruit=apple: x=x[,2]: y=y[,2]: fruit=grape: x=x[,3]: y=y[,3]: 則寫成程式: data = function(x, fruit): {:     switch(fruit, apple=????:                   grape=????這個地方完全就不知道怎麼打... ): }: if else又只能用在數字...: 還是說除了switch之外，有其他[名詞]條件選擇的指令呢?: 感謝各位大大可以用 `{`

switch(fruit,
       ""apple"" = {
         # do what you want
       },
       ""grape"" = {
         # do what you want
       })

--","R_Language"
"1809","M.1447685804.A.408","tony255034","問題","csv如何轉置(transform)?",2015-11-16 22:56:42,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想將csv整個轉置，csv有點大(約1000000列 X 50欄)，想轉成(50列 X 1000000欄)

所以無法用EXCEL轉置，目前是以data.frame的方式讀取csv，轉置後想再輸出

簡例

NAME  SUBJECT  SCORE
tony  chinese   20
tony  english   30
sam   chinese   30
sam   english   20

想轉成

name    tony       tony     sam      sam
subject chinese    english  chinese  english
score   20         30       30       20


[程式範例]:
目前只有想到用matrix，但是結果跟我想的差很多

mydata = matrix(read.csv(""mydata.csv""))

ta <- t(mydata)

write.csv(ta,""newdata.csv"")

[環境敘述]:
R3.2.2 win7 32bit

[關鍵字]:

transform

--","R_Language"
"1810","M.1447685755.A.212","laputaca","問題","關於switch選擇",2015-11-16 22:55:51,NA,NA,"[問題敘述]:

在function裡面使用switch時

[程式範例]:

比如說我想要
當fruit=apple
x=x[,2]
y=y[,2]

fruit=grape
x=x[,3]
y=y[,3]

則寫成程式

data = function(x, fruit)
{
    switch(fruit, apple=????
                  grape=????這個地方完全就不知道怎麼打... )


}

if else又只能用在數字...

還是說除了switch之外，有其他[名詞]條件選擇的指令呢?

感謝各位大大

--","R_Language"
"1811","M.1447683861.A.A9F","Edster","問題","quantile, 如何將預設值全部改掉呢？",2015-11-16 22:24:18,NA,NA,"我de了數天的bug,
終於找到程式結果不如預期的原因(時間就在debug中度過).
是quantile非常吃樣本個數, 雖然原先就知道, 但以為這是個小事
哪知當樣本數小於20跟大於20時.
同一組樣本算出來的95%卻落差非常多.
舉例來說, 我的資料如下.

x17 = c(-95.290065, -94.676170, -94.042493, -93.766582, -93.281851,
        -92.621728, -92.275779, -91.985500, -86.475105, -80.372520,
        -80.040033, -78.674849, -68.573205, -60.486220, -57.897714,
         -4.204705, 119.349514)

x31 =  c(-95.747361, -94.438780, -94.198810, -93.922347, -93.881117,
         -93.788013, -93.658992, -93.609898, -93.599487, -93.599094,
         -93.533554, -93.517688, -93.478389, -93.475430, -93.364654,
         -93.048528, -92.872143, -92.533137, -90.225752, -89.077365,
         -84.827016, -84.166512, -69.243811, -68.747692, -65.920400,
         -62.867256, -56.184730, -48.477508,   9.279569,  10.153318,
         264.201379)

x17 = rep(x17, 17); x31 = rep(x31, 31)
quantile(x17, 0.95, type=6); quantile(x17, 0.95, type=7)
quantile(x31, 0.95, type=6); quantile(x31, 0.95, type=7)

quantile的default是type=7 (R的預設值)
現在我想讓這個type在這整隻程式裡全部改成type=6
(matlab & spss 都用這個, 也是我比較希望的算法.)

請問有什麼方法可以讓我電腦裡的關於quantile的type全改成type=6
一個個改也是可以, 只是這隻程式用到太多次quantile, 有的還寫在aggregate裡面.
怕會漏掉.

感謝.


--","R_Language"
"1812","M.1447636490.A.BCB","celestialgod","問題","Re: 計算累積機率",2015-11-16 09:14:46,NA,NA,"library(dplyr)
library(magrittr)
## data generation
numUsers  = 1e5
numLevels = 5
userLevels = numUsers %>% replicate(1:sample(1:numLevels, 1),
  simplify = FALSE)
df = lapply(1:numUsers, function(i) cbind(i, userLevels[[i]])) %>%
  do.call(rbind, .) %>% data.frame %>% tbl_df %>%
  set_names(c(""user"", ""level""))
# The number of rows of df is 299,541 in my case

## solution
st = proc.time()
maxUserID = max(df$user)
out = df %>% group_by(level) %>%
  summarise(cum.prob = sum(user %in% 1:maxUserID) / maxUserID)
# Source: local data frame [5 x 2]
#
#   level cum.prob
# 1     1  1.00000
# 2     2  0.80032
# 3     3  0.59995
# 4     4  0.39829
# 5     5  0.19685
proc.time() - st
#   user  system elapsed
#   0.38    0.00    0.38

user不是數字沒有編號的話，建議改成這樣：

uniUserID = unique(df$user)
out = df %>% group_by(level) %>%
  summarise(cum.prob = sum(user %in% uniUserID) / length(uniUserID))※ 引述《Udyr (Udyr)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 資料的格式如下: user     level: 1        1: 1        2: 1        3: 1        4: 1        5: 2        1: 2        2: 2        3: 3        1: 3        2: 3        3: 3        4: 4        1: 4        2: 5        1: 5        2: 5        3: 5        4: 5        5: 其中level的最大值為5: 想對level計算累積機率（有多少比例的user達到某一個特定的level）: 以上面的資料  想得到的結果為: level         5      4      3      2     1: cum.prob      0.4    0.6    0.8    1     1: 請問在資料量很大的情況下: 有沒有推薦較有效率的方法--

--","R_Language"
"1813","M.1447605812.A.881","Udyr","問題","計算累積機率",2015-11-16 00:43:30,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

資料的格式如下

user     level
1        1
1        2
1        3
1        4
1        5
2        1
2        2
2        3
3        1
3        2
3        3
3        4
4        1
4        2
5        1
5        2
5        3
5        4
5        5

其中level的最大值為5
想對level計算累積機率（有多少比例的user達到某一個特定的level）
以上面的資料  想得到的結果為

level         5      4      3      2     1
cum.prob      0.4    0.6    0.8    1     1


請問在資料量很大的情況下
有沒有推薦較有效率的方法



--","R_Language"
"1814","M.1447599655.A.E98","elegantnight","問題","投影尋蹤相關問題",2015-11-15 23:00:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

不好意思打擾，我有個台灣去北京大學唸書的朋友，遇到一份需要使用R的作業，希望可以
請大家幫忙 >""< 他是第一次寫R的新手，完全不知道該怎麼處理，
所以希望可以得到一點建議或是方向，謝謝大家！
問題如下：


4. 探索性<U+6570>据分析部分
在loan data中，自<U+9009>合适的定量<U+53D8>量，通<U+8FC7>投影<U+5BFB><U+8E2A><U+6765>研究影<U+54CD>grade的因素。要求：
（1）指出你所<U+9009><U+62E9>的投影指<U+6807>，并<U+8BF4>明理由；
（2）<U+7ED9>出投影向量，你是否能通<U+8FC7>投影向量<U+8BF4>明哪些<U+53D8>量<U+5BF9>grade的影<U+54CD>比<U+8F83>大？
（3）在投影<U+7ED3>果中，<U+5BF9>不同grade的<U+6837>本<U+70B9><U+8FDB>行染色，<U+8BF4>明投影<U+7ED3>果是否能<U+591F>反<U+5E94>grade<U+53D8>量的分<U+7EC4>情<U+51B5>
（4）<U+6570>据中是否存在特异<U+70B9>？如果有，<U+8BF7>指出<U+6765>。
會需要用到REPPlab中的函數

3. <U+7EDF><U+8BA1>制<U+56FE>部分
在loan data中，自<U+9009>合适的<U+53D8>量，<U+7ED8>制以下<U+56FE>形：
（1）分面的<U+98CE>玫瑰<U+56FE>，玫瑰<U+53F6>片的<U+989C>色至少三种；
（2）某一<U+4E2A><U+8FDE><U+7EED>型<U+53D8>量的分布直方<U+56FE>，并加入<U+62DF>合分布<U+7EBF>，直方<U+56FE>的<U+7EC4>距和<U+7EC4><U+6570>自己<U+8BBE>定
（不要使用默<U+8BA4>的），并且每<U+4E2A>柱子里面填上相<U+5E94>的<U+7EC4>的<U+9891><U+6570>，整<U+4E2A><U+56FE>片加上一<U+4E2A><U+84DD>色的
外框，并且<U+56FE>的底色<U+4E3A>深色，柱子<U+4E3A><U+6D45>色；
（3）某<U+4E24><U+4E2A><U+8FDE><U+7EED>型<U+53D8>量的密度<U+56FE>，并且在<U+56FE>中找出一<U+4E2A>部分加上一<U+4E2A>方框与其他部分<U+533A>
<U+522B><U+5F00><U+6765>（比如<U+8BF4>，密度最高或者最低的<U+533A>域，用一<U+4E2A>矩形的方框加以<U+6807>示）；
（4）挑<U+9009>多<U+4E2A><U+8FDE><U+7EED>型<U+53D8>量，<U+8FDB>行聚<U+7C7B>，并且<U+7ED8>制相<U+5E94>的<U+70ED><U+56FE>（可以不用全部<U+6837>本）。
要求：以上所有<U+56FE>表都要求有<U+56FE>表名<U+79F0>、<U+56FE>例、行<U+6807><U+9898>、列<U+6807><U+9898>等要素。

data 如下：https://www.dropbox.com/s/t7madvx8dmj4ai6/LoanStats3d.csv.zip?dl=0因為我也完全不會R,但是朋友希望我可以幫他問問看，如果有不洽當的地方，
再麻煩跟我說，我會自己刪文，拜託大家了，謝謝！ >""<

--","R_Language"
"1815","M.1447599481.A.855","loser113","問題","計算線性方程錯誤",2015-11-15 22:57:59,NA,NA,"我用 slove(A,b) 計算 A=nxn矩陣 =b 時 我的解不該出現負值

x1~xn >0

n最多到7千多

code檢查多遍無誤

發現在結尾Xn和前幾個Xk 解出數值小於10^-17  (|Xk|<10^-17)

就會有可能是負值 (像Xk=-2.357...*10^-25)

R在做計算的時候 有可能有這種誤差嗎謝謝

--","R_Language"
"1816","M.1447568201.A.2D7","celestialgod","問題","Re: 資料轉換",2015-11-15 14:16:38,NA,NA,"關於使用迴圈，我有一點想法可以參考看看

最下方補上不用for-loop的方法

# data generation
set.seed(300)
N = 100
df = data.frame(x = sample(1:100, N, TRUE), y = runif(N),
  z = sample(0:1, N, TRUE, prob = c(0.4, 0.6)))
# 計算重複的長度，已取得我需要preallocate多大的矩陣
zLength = rle(df$z)$lengths
# zLength:
# [1]  4  3  1  1  2  1  2  1  1  2  2  1  4  3  1  1  2  1  1  2  1  3  1  2
# [25] 1  3  1  3  1  2  2  2  1  2  1  2  2  5  4  2 10  3  2  1  1  2  2  2
# 超過五的部分都要多加一行
outRow = length(zLength) + zLength[zLength > 5] %/% 5 +
  as.numeric(zLength[(zLength > 5)] %% 5 > 0) - sum(zLength > 5)
# outRow:
# [1] 49 (只有一個超過5，只需要多一行)
# create output matrix and preallocate
outMat = matrix(NA, outRow, 5)

# 上一個值
lastValue = 1 - df$z[1]
j = 0 # row編號
k = 0 # col編號
rowNamesVec = vector('numeric', outRow) # 存rownames
for (i in 1:nrow(df))
{
  if (df$z[i] != lastValue) # 如果跟上一個值不相同就跑這塊
  {
    j = j + 1 # 移到下一個row
    k = 1     # col回到1 (新的row)
    outMat[j, k] = df$x[i]   # assign進去output的matrix
    lastValue = df$z[i]      # 把這次的z存起來做下一次的判斷
    rowNamesVec[j] = df$z[i] # 存下這次的z以assign rownames
  }
  else # 如果跟上一個值相同就跑這塊
  {
    k = k + 1 # 移到下一個column
    if (k > 5) # 如果k超過五就移到下一個row 並且存進rownames
    {
      j = j + 1
      k = 1
      rowNamesVec[j] = df$z[i]
    }
    outMat[j, k] = df$x[i] # assign進去output的matrix
  }
}
rownames(outMat) = rowNamesVec # 賦予rownames

outMat結果：

  [,1] [,2] [,3] [,4] [,5]
0   92   77   81   74   NA
1   69    2   76   NA   NA
0   50   NA   NA   NA   NA
1   47   NA   NA   NA   NA
0   91   95   NA   NA   NA
1   32   NA   NA   NA   NA
0   80   59   NA   NA   NA
1   66   NA   NA   NA   NA
0   99   NA   NA   NA   NA
1   89   67   NA   NA   NA
0   64   51   NA   NA   NA
1   99   NA   NA   NA   NA
0   50   47    7   10   NA
1    3   53   90   NA   NA
0   70   NA   NA   NA   NA
1   23   NA   NA   NA   NA
0   52   72   NA   NA   NA
1   93   NA   NA   NA   NA
0   39   NA   NA   NA   NA
1   10   46   NA   NA   NA
0   40   NA   NA   NA   NA
1   76   62   78   NA   NA
0   37   NA   NA   NA   NA
1    1   74   NA   NA   NA
0   88   NA   NA   NA   NA
1   38   87   56   NA   NA
0   35   NA   NA   NA   NA
1   13   75   38   NA   NA
0   80   NA   NA   NA   NA
1   60  100   NA   NA   NA
0   91   59   NA   NA   NA
1   47   89   NA   NA   NA
0   86   NA   NA   NA   NA
1    5   37   NA   NA   NA
0   63   NA   NA   NA   NA
1   65   30   NA   NA   NA
0   22   60   NA   NA   NA
1   44   52   79   78   64
0   86   25    7   51   NA
1   31   42   NA   NA   NA
0   92   13   68   82   19
0   21   95   42   24   66
1   67   91   44   NA   NA
0   92   31   NA   NA   NA
1   84   NA   NA   NA   NA
0   52   NA   NA   NA   NA
1   75   40   NA   NA   NA
0   68   17   NA   NA   NA
1   60   20   NA   NA   NA

## no for loop
continueLength = rle(df$z)$lengths
splitGroup = rep(1:length(continueLength), continueLength)
outMat = lapply(split(df, splitGroup), function(subdf){
  if (length(subdf$x) <= 5)
    c(subdf$x, rep(NA, 5 - length(subdf$x)))
  else
  {
    numRows = length(subdf$x) %/% 5 + as.numeric(length(subdf$x) %% 5 > 0)
    NAnum = 5 - length(subdf$x)%%5
    matrix(c(subdf$x,rep(NA,NAnum)), numRows, 5, byrow = TRUE)
  }
})
outMat = do.call(rbind, outMat)
rownames(outMat)[nchar(rownames(outMat)) != 0] = rle(df$z)$values※ 引述《Rose9305 (台產零零柒)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 資料轉換: 我有個資料csv檔，裡面內容大概如下 :: x    y      z: 55   0.2    1: 44   0.6    1: 78   0.7    0: 46   0.8    0: 98   0.9    1: 47   0.4    1: 46   0.5    1: 想(限)用 ''for 迴圈''轉換成只取x,z並以z重排x，如下:: 1   55  44: 0   78  46: 1   98  47  46: 把 z=1 排成一列，一遇到 z=0 又排成一列，再讀到1又排成一列這樣下去: 不知道要如何用for迴圈來把資料轉換成上述。: 抱歉，再問下因實際DATA比較多，因此可以每列只列5個值然後換下一行嗎?: 一樣用1,0排，: 像是  1  55  44  67  78  46:       1  47  48  99  78  16:       0  48  49  77  66  55:       1  76  78  79  88  99    這樣排列呢??--

--","R_Language"
"1817","M.1447563863.A.975","obarisk","問題","Re: 資料轉換",2015-11-15 13:04:20,NA,NA,"不想用 for

library(magrittr)

# 不肯定 da 是一個 tbl_df 有沒有問題，da 是一個 data.frame 不會有問題

z2 <- da[, 'z'] %>% {.[ 1:length(.)-1 ] != .[ 2:length(.) ]} %>% c(T, .) %>%
  cumsum

tapply(da[, 'x'], z2, simplify=F)※ 引述《Rose9305 (台產零零柒)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 資料轉換: 我有個資料csv檔，裡面內容大概如下 :: x    y      z: 55   0.2    1: 44   0.6    1: 78   0.7    0: 46   0.8    0: 98   0.9    1: 47   0.4    1: 46   0.5    1: 想(限)用 ''for 迴圈''轉換成只取x,z並以z重排x，如下:: 1   55  44: 0   78  46: 1   98  47  46: 把 z=1 排成一列，一遇到 z=0 又排成一列，再讀到1又排成一列這樣下去: 不知道要如何用for迴圈來把資料轉換成上述。--","R_Language"
"1818","M.1447552366.A.C66","Neisseria","問題","改善這隻龜速的 image filtering 程式",2015-11-15 09:52:43,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:image filtering 是指透過某些處理，對影像<U+7523>生某種效果，例如：銳利化、模糊化、突起 (emboss) 等實際處理時，會以一個 convolution kernel 對圖像上的每一個像素逐一處理例如：一個 3x3 的 matrix，和 3x3 個像素的色彩值分別相乘再將結果指定到另一個圖檔相對應的點可以參考 http://apple.co/1OLL8kt 有圖解比較清楚我想用 R 練習 image filtering，但只會用龜速的 for loop，希望大大們能提供優雅快速的解法。[程式範例]:https://pastebin.com/Pfsfr8QF[環境敘述]:> sessionInfo()R version 3.2.2 (2015-08-14)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Debian GNU/Linux 8 (jessie)locale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=CLC_TIME=zh_TW.UTF-8[4] LC_COLLATE=zh_TW.UTF-8     LC_MONETARY=zh_TW.UTF-8LC_MESSAGES=zh_TW.UTF-8[7] LC_PAPER=zh_TW.UTF-8       LC_NAME=CLC_ADDRESS=C[10] LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] png_0.1-7loaded via a namespace (and not attached):[1] tools_3.2.2[關鍵字]:image filtering--","R_Language"
"1819","M.1447528193.A.8A4","OGCKM","問題","Re: 資料轉換",2015-11-15 03:09:51,NA,NA,"※ 引述《Rose9305 (台產零零柒)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 資料轉換: 我有個資料csv檔，裡面內容大概如下 :: x    y      z: 55   0.2    1: 44   0.6    1: 78   0.7    0: 46   0.8    0: 98   0.9    1: 47   0.4    1: 46   0.5    1: 想(限)用 ''for 迴圈''轉換成只取x,z並以z重排x，如下:: 1   55  44: 0   78  46: 1   98  47  46: 把 z=1 排成一列，一遇到 z=0 又排成一列，再讀到1又排成一列這樣下去: 不知道要如何用for迴圈來把資料轉換成上述。剛好看到這個問題蠻有趣的!順便加了兩筆record來測試

x   y   z
13 0.43 0
33 0.33 1

暴力解法, 直接實作你的邏輯,

目前想不到其他解法,感覺可以用建立指標的方式來判斷資料輸出,

如果其他版友有其他想法或指正歡迎討論!


path = ""your_data_path""
data=read.csv(path)
a=NULL
for(i in 1:nrow(data)){
    x = data[i,1]
    z = data[i,3]#inintialize
    if(is.null(a)){
        a = c(z,x)
        if(is.na(data[i+1,3])||data[i+1,3]!=a[1]){
            print(a)
            a = NULL #return
        }
    }
    else if(a[1]==1){
      a = c(a,x)
      if(is.na(data[i+1,3])||data[i+1,3]!=1){
          print(a)
          a = NULL #return
      }
    }
    else if(a[1]==0){
        a = c(a,x)
        if(is.na(data[i+1,3])||data[i+1,3]!=0){
            print(a)
            a = NULL #return
        }
    }
}

##output:
##append some test data after sample
## [1]  1 55 44
## [1]  0 78 46
## [1]  1 98 47 46
## [1]  0 13
## [1]  1 33



--","R_Language"
"1820","M.1447515005.A.A53","Rose9305","問題","資料轉換",2015-11-14 23:30:03,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

資料轉換

我有個資料csv檔，裡面內容大概如下 :

x    y      z

55   0.2    1

44   0.6    1

78   0.7    0

46   0.8    0

98   0.9    1

47   0.4    1

46   0.5    1

想(限)用 ''for 迴圈''轉換成只取x,z並以z重排x，如下:

1   55  44
0   78  46
1   98  47  46

把 z=1 排成一列，一遇到 z=0 又排成一列，再讀到1又排成一列這樣下去

不知道要如何用for迴圈來把資料轉換成上述。

抱歉，再問下因實際DATA比較多，因此可以每列只列5個值然後換下一行嗎?

一樣用1,0排，

像是  1  55  44  67  78  46
      1  47  48  99  78  16
      0  48  49  77  66  55
      1  76  78  79  88  99    這樣排列呢??
--","R_Language"
"1821","M.1447505179.A.698","laputaca","問題","function的輸出",2015-11-14 20:46:15,NA,NA,"[問題敘述]:
在使用function()的時候，我想要輸出兩個答案
比如說：

[程式範例]:

z=function(x,y){
a=x+y
b=x-y
a
b}

z(1,2)
我本來以為會出現兩個答案
一個是3
一個是-1

可是他似乎只會顯示最後一個
-1 這樣

請問各位大大我需要怎麼修改才能讓他同時顯示出兩個結果呢?

--","R_Language"
"1822","M.1447472824.A.D25","Wush978","問題","Re: 除了RStudio 還有其他的IDE?",2015-11-14 11:47:01,NA,NA,"我推一個和Rstudio互補的： jupyter irkernel

缺點：

- 沒有查詢文件的功能

所以平時使用還是以rstudio為主

優點：

- 可以互動式的撰寫如同 .Rmd 的文件

跑實驗的時候，比Rstudio方便太多了。

寫好程式就跑，有bug就修，跑成功就保存該chunk，

中間可以穿插latex，寫好一段就保存一段。

每次修改都是以一個段落為單位。

反觀Rstudio每次都要重跑整個.Rmd。雖然有cache，但是就是差jupyter一大截

內部報告用這套，目前我個人評價是勝過Rstudio，

但是因為缺點很明顯，也無法取代Rstudio，算是兩者互補的工具※ 引述《rn940111 (派大星)》之銘言：: [問題類型]::: 意見調查(我對R 有個很棒的想法，想問問大家的意見):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 在使用RStudio上，我想大家應該都算是蠻滿意的XD，但除此之外: 其他程式語言也有相應的IDE，: 最近為了避免麻煩，把LaTeX跟Python整合到Sublime Text上: 以上兩種都不少人在討論，畢竟在Sublime Text上，這三個的編譯舒適度都還不錯: 並且日後有可能需要用一些AngularJS/CSS，所以盡量把東西都綁在一起了。: 但似乎很少見到有人在討論R在其他IDE的表現？通常只會見到RStudio?: 所以好奇想問問看除了RStudio之外還有沒有其他IDE?: 或者在Sublime Text 上有人用過R的呢∼？--","R_Language"
"1823","M.1447472276.A.34C","Neisseria","問題","Re: 除了RStudio 還有其他的IDE?",2015-11-14 11:37:53,NA,NA,"剛試了幾個

- Eclipse 的 statET for R
- IntelliJ IDEA 的 R4IntelliJ
- Emacs 的 ESS

都和 RStudio 有一段不小的差距

其中 ESS 算比較可以用，但是沒有方便多少，只是有個編輯器可以打 R script
其他比起直接用 R console 方便不了太多

statET for R 更慘，啟動慢，設定複雜，完全沒有繼續使用的動力

IntelliJ IDEA 本身還不錯用，但是 R4IntelliJ 這個套件還不成熟
目前可以當做不支援

因為 R software 還蠻注重互動功能，RStudio 這點做得很好
大部分情形下也是免費的，還算蠻佛的，應該不太需要找別的 IDE※ 引述《rn940111 (派大星)》之銘言：: [問題類型]::: 意見調查(我對R 有個很棒的想法，想問問大家的意見):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 在使用RStudio上，我想大家應該都算是蠻滿意的XD，但除此之外: 其他程式語言也有相應的IDE，: 最近為了避免麻煩，把LaTeX跟Python整合到Sublime Text上: 以上兩種都不少人在討論，畢竟在Sublime Text上，這三個的編譯舒適度都還不錯: 並且日後有可能需要用一些AngularJS/CSS，所以盡量把東西都綁在一起了。: 但似乎很少見到有人在討論R在其他IDE的表現？通常只會見到RStudio?: 所以好奇想問問看除了RStudio之外還有沒有其他IDE?: 或者在Sublime Text 上有人用過R的呢∼？--","R_Language"
"1824","M.1447449902.A.17C","rn940111","問題","除了RStudio 還有其他的IDE?",2015-11-14 05:24:57,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的在使用RStudio上，我想大家應該都算是蠻滿意的XD，但除此之外
其他程式語言也有相應的IDE，
最近為了避免麻煩，把LaTeX跟Python整合到Sublime Text上
以上兩種都不少人在討論，畢竟在Sublime Text上，這三個的編譯舒適度都還不錯
並且日後有可能需要用一些AngularJS/CSS，所以盡量把東西都綁在一起了。

但似乎很少見到有人在討論R在其他IDE的表現？通常只會見到RStudio?
所以好奇想問問看除了RStudio之外還有沒有其他IDE?
或者在Sublime Text 上有人用過R的呢∼？

--","R_Language"
"1825","M.1447435261.A.79B","Wush978","心得","中文編碼處理",2015-11-14 01:20:57,NA,NA,"[關鍵字]: R, Encoding

[重點摘要]:

上個月我在台大授課時撰寫了一份swirl 教材：https://github.com/wush978/DataScienceAndR其中 RBasic-07-Loading-Dataset 寫了目前我知道的數個R 處理Encoding的方法。

由於坊間比較少解決載入中文資料的R 教材，

而且我今天晚上才剛更新這門課程的內容，需要有網友幫忙測測看相容性。

所以希望有任何想了解如何解決中文資料編碼問題的網友，可以一邊學，一邊幫我測。

以下列出教材中有提到的部分：

1. file + 參數 encoding
    - 在windows上遇到如UTF-16仍然會出錯
2. readBin + stringi::stri_encode + textConnection + 參數 encoding
    - 目前可以解決我手上所有中文的狀況，但是效能稍差

有興趣幫忙測試的網友，

請依照README的只是安裝課程之後，直接進入RBasic-07-Loading-Dataset進行課程。

有任何問題或feedback(安裝看不懂、解釋看不懂、電腦爆炸...）

歡迎截圖貼到https://github.com/wush978/DataScienceAndR/issues開issue給我

先謝謝各位




--","R_Language"
"1826","M.1447367943.A.CF4","andrew43","問題","Re: 如何只留下時間最新的資料!?",2015-11-13 06:39:00,NA,NA,"這是讓新手方便的教學文

# 讀資料
dat <- read.csv(textConnection(""DATE,NAME,VALUE
2015/11/12 8:01,tony,32
2015/11/12 9:02,tony,34
2015/11/12 8:03,sam,32
2015/11/12 9:04,sam,34""),
colClasses=c(""character"",""character"",""numeric""))

# 把 DATE 轉成 POSIXlt 時間日期物件，之後才能對它排序比大小
dat$DATETIME <- strptime(dat$DATE, format = ""%Y/%m/%d %H:%M"")
# 求以 DATETIME 做遞減排序的順序
reorder <- order(dat$DATETIME, decreasing=T)
# 排序後的 dat
dat[reorder, ]
# 所有資料最新的那一列
dat[reorder[1], ]

# 知道上面的道理後，對 dat 按 NAME 進行處理
dat1 <- by(
  dat,
  dat$NAME,        # 按 dat$NAME 分組處理
  function(x){
    # 取出各組內按 DATETIME 遞減排序後的第一名那列
    x[order(x$DATETIME, decreasing=T)[1], ]
  }
)
# dat1 是個 list，可以看看 dat1[[1]] 和 dat1$sam 和 dat1$tony 是什麼

# 最後 rbind 拚起來
do.call(""rbind"", dat1)※ 引述《tony255034 (5245566)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想請問要如何將除了時間最新的資料留下來呢?: 原始資料: DATE              NAME  VALUE: 2015/11/12 8:00   tony    32: 2015/11/12 9:00   tony    34: 2015/11/12 8:00   sam     32: 2015/11/12 9:00   sam     34: 過濾後資料: DATE              NAME  VALUE: 2015/11/12 9:00   tony   34: 2015/11/12 9:00   sam    34: [程式範例]:: 尚無，不知如何處理這種資料: [環境敘述]:: R3.2.2 Win7 32bit: [關鍵字]:--","R_Language"
"1827","M.1447334850.A.097","celestialgod","問題","Re: 如何只留下時間最新的資料!?",2015-11-12 21:27:26,NA,NA,"※ 引述《tony255034 (5245566)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想請問要如何將除了時間最新的資料留下來呢?: 原始資料: DATE              NAME  VALUE: 2015/11/12 8:00   tony    32: 2015/11/12 9:00   tony    34: 2015/11/12 8:00   sam     32: 2015/11/12 9:00   sam     34: 過濾後資料: DATE              NAME  VALUE: 2015/11/12 9:00   tony   34: 2015/11/12 9:00   sam    34最近FB才有人問我類似的問題，不過他要留最舊的XD

library(dplyr)
dat = data.frame(DATE = strftime(c(""2015/11/12 08:00"", ""2015/11/12 09:00"",
  ""2015/11/12 08:00"", ""2015/11/12 09:00"", ""2015/11/12 10:00""),
  format  = ""%y/%m/%d %H:%M""), NAME = c(""tony"", ""tony"", ""tony"",""sam"", ""sam""),
  VALUE = c(32, 34, 36, 37, 38))
dat %>% group_by(NAME) %>% mutate(dateOrder = rank(DATE)) %>%
  filter(dateOrder == max(dateOrder)) %>% select(-dateOrder)

# Source: local data frame [2 x 3]
# Groups: NAME
#
#             DATE NAME VALUE
# 1 15/11/12 09:00 tony    34
# 2 15/11/12 10:00  sam    38


--","R_Language"
"1828","M.1447333827.A.CAA","tony255034","問題","如何只留下時間最新的資料!?",2015-11-12 21:10:24,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想請問要如何將除了時間最新的資料留下來呢?

原始資料

DATE              NAME  VALUE

2015/11/12 8:00   tony    32

2015/11/12 9:00   tony    34

2015/11/12 8:00   sam     32

2015/11/12 9:00   sam     34

過濾後資料

DATE              NAME  VALUE

2015/11/12 9:00   tony   34

2015/11/12 9:00   sam    34
[程式範例]:

尚無，不知如何處理這種資料

[環境敘述]:

R3.2.2 Win7 32bit

[關鍵字]:

--","R_Language"
"1829","M.1447318673.A.A80","laputaca","問題","抽取矩陣資料",2015-11-12 16:57:50,NA,NA,"[問題類型]:
我要抽取矩陣中的某筆資料

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

比如說今天有一個矩陣X

      數量
apple   1
orange  2
grape   3

我只想抽取orange的數量，可是如果不用 X[2, 1]這樣的寫法

有其他的辦法嗎?

試過X$orange似乎無法，$一次就是抽1行這樣 0.0...

還是我哪邊有誤會XDD

求救~



--","R_Language"
"1830","M.1447313577.A.98B","elone","問題","facet_wrap ",2015-11-12 15:32:55,NA,NA,"as title  今天我們想要用 ggplot 畫直方圖

  我們會用如下所示

  p <- ggplot(NW, aes(x=RT, y= ..count..)) + geom_histogram(bandwitdh = 20)

  再來，假設NW 裡面有20個人

  我們可以用

  p + facet_wrap(~ Subject, nrow = 5, ncol = 4)


  但是現在有一個問題， 使用 facet_wrap 一定要切的>= subject個數

  但是這樣整個圖會變很小很不清楚


  因此，想要問說 有沒有什麼方式 可以

   ex 我自己控制每一張圖 放幾個人的直方圖之類的

   這樣也許日後可以依照自己的需求去分組來秀data

  謝謝大家 @@

--","R_Language"
"1831","M.1447263198.A.C98","andrew43","問題","Re: 用apply函數依比例抽樣 (sample())",2015-11-12 01:33:14,NA,NA,"dat <- data.frame(
        V1=c(1,3,4,NA,NA,NA,NA,NA,NA),
        V2=c(2,5,6,8,9,12,NA,NA,NA),
        V3=c(7,10,11,20,23,38,40,41,50)
)

apply(dat, 2, function(x, ratio = 1/3){
        # 本欄哪些不是 NA
        thisCol.is.not.NA <- !is.na(x)
        # 本欄可抽幾次
        thisCol.length <- round(sum(thisCol.is.not.NA) * ratio)
        # 把抽出的傳出去
        return(sample(x[thisCol.is.not.NA], thisCol.length))
})

其實和 C 板主寫的是一樣的，幫填註解而已。※ 引述《gbd37 (有夠瞎)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想要使用apply函數來抽樣，依""比例""抽每行裡所含有的數: 範例是我舉例的資料，第一行只有3個數字，第二行6個，第三行9個: 我想依1/3的比例在第一行抽1個數字，第二行抽2個，第三行抽3個: 但就在size那格我不知道該怎麼打，麻煩指導: 謝謝: [程式範例]:: http://pastie.org/10548085: [關鍵字]:: apply sample--","R_Language"
"1832","M.1447255316.A.52E","thephone","問題","dcast整理表格後,空值的處理",2015-11-11 23:21:53,NA,NA,"手中有一筆消費數據
消費者 消費金額
Ａ     170
Ａ     230
Ａ     490
Ａ     490
Ａ     490
Ｂ     610
Ｂ     459
Ｃ     300
Ｃ     211
Ｃ     200

依照消費金額區間切割
分別count不同區間的次數
如下
消費者 below100 100 200 300 400 500 600 700 ...30000
Ａ           0   1   1   0   3   0   0   0       0
Ｂ           0   0   0   0   1   0   1   0       0
Ｃ           0   0   2   1   0   0   0   0       0

我的方法是將消費金額除100取整數
再用dcast(消費者~消費金額)
但是有些金額區間是空值（像上例中500的這個區間,不存在任何一位消費者）
dcast無法補0
想要讓col有連續
有其他建議的方法嗎？
謝謝

--","R_Language"
"1833","M.1447145198.A.970","gbd37","問題","用apply函數依比例抽樣 (sample())",2015-11-10 16:46:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想要使用apply函數來抽樣，依""比例""抽每行裡所含有的數

範例是我舉例的資料，第一行只有3個數字，第二行6個，第三行9個

我想依1/3的比例在第一行抽1個數字，第二行抽2個，第三行抽3個

但就在size那格我不知道該怎麼打，麻煩指導

謝謝

[程式範例]:http://pastie.org/10548085[關鍵字]:
apply sample

--","R_Language"
"1834","M.1447128675.A.8D8","yaohwei","問題","共變異數矩陣合併",2015-11-10 12:11:12,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
如果有多個共變異數矩陣(假設兩個)
input1:
  c1 c2 c3
r1 1  2  4
r2 3  5  3
r3 4  5  2

input2:
  c1 c2
r1 1  3
r2 2  5

如何合併成
output:
  c1 c2 c3 c4 c5
r1 1  2  4  0  0
r2 3  5  3  0  0
r3 4  5  2  0  0
r4 0  0  0  1  3
r5 0  0  0  2  5

小弟先謝謝各位高手回覆  感激不盡

--","R_Language"
"1835","M.1447060378.A.A30","cb1040","問題","bioinformatics,multiple sequence align",2015-11-09 17:12:54,NA,NA,"[程式諮詢] Bioinformatics的XStringset格式轉換

[入門]
2010修課玩過VBA，不過之後就沒了直到今日，也算新手吧
此版首po,請前輩們指教

[問題敘述]:
小弟我剛踏入bioinformatics，用Bioinfomatics with R cookbook 自學中
在MSA, Multiple Sequence Alignment部分，
使用下面這個package時卡關了
muscle, (multiple sequence comparison by log-expectation)

我的問題是:
如何轉換XStringset格式，且是多筆資料轉換
(有查詢Biostrings 中AAString功能，但仍不知道如何使用)


[程式範例]
這是原書步驟http://imgur.com/eFWyDjkhttp://imgur.com/94zPqQQ這是會用到的fasta檔案http://tinyurl.com/q6kjpru以下是我的內容
pastie版 (第一次使用，還不熟，請見諒)http://pastie.org/10540288自己截圖版http://imgur.com/ecLpoF1http://imgur.com/4BqdEnghttp://imgur.com/rT9PEqr(後面是其他物種的序列，共十種，我就不貼了)http://imgur.com/0WvRNXJ因為教材有點年份，code有些出入
例如install.packages(""muscle"")會找不到東西
或是沒有muscle::read.fasta這個功能

這埵A說一次我的問題
有查詢Biostrings 中 XStringset、AAString功能，但仍不會使用
想請問: 如何將多筆資料轉換成XStringset格式


[環境敘述]:
直接截圖http://imgur.com/u42f95X[關鍵字]: R, muscle, Biostrings, multiple sequence alignment, XStringset

--","R_Language"
"1836","M.1446953151.A.8D8","Wush978","分享","Rcpp 中如何儲存和讀取C++物件",2015-11-08 11:25:46,NA,NA,"[關鍵字]: R, Rcpp, Serialization

[出處]:http://gallery.rcpp.org/articles/rcpp-serialization/[重點摘要]:

昨天投到Rcpp Gallery的文章。Dirk 人很好，而且我也因此發現

// [[Rcpp::plugins(""cpp11"")]]

的用法 Orz...


--","R_Language"
"1837","M.1446878504.A.399","Wush978","情報","GSOC 2016",2015-11-07 14:41:40,NA,NA,"[關鍵字]: R, 套件開發

[出處]:https://github.com/rstats-gsoc/gsoc2016[重點摘要]:

想要貢獻R 又想賺點零用錢的同學，可以關注一下這個專頁。

2016年的Google Summer Code已經開始規劃囉！

--","R_Language"
"1838","M.1446790865.A.50F","CKPILOT","問題","Re: 比對兩個list",2015-11-06 14:21:01,NA,NA,"#BAD example: without memory preallocation
intersection <- names(a.list)[names(a.list) %in% names(b.list)]
result <- as.list(NULL)
for(i in intersection){
  result[[i]] <- sum(table(a.list[[i]][a.list[[i]] %in% b.list[[i]]]))
}

#Fixed:
intersection <- names(a.list)[names(a.list) %in% names(b.list)]
result <- vector(""list"", length(intersection))
names(result) <- intersection
for(i in intersection){
  result[[i]] <- sum(table(a.list[[i]][a.list[[i]] %in% b.list[[i]]]))
  #cat(tracemem(result), '\n')
}

--","R_Language"
"1839","M.1446787506.A.051","Chris7462","問題","postscript 產生的 eps 圖檔",2015-11-06 13:25:03,NA,NA,"[問題類型]:經驗諮詢[軟體熟悉度]:使用者[問題敘述]:
通常 eps 檔的 bounding box 數值的前面兩位數字會是 0 ，像這樣子
%%BoundingBox:   0   0 487 399

可是用 R 的 postscript 產生的 eps 檔的 bounding box 前面兩位數卻不會是 0
%%BoundingBox:  41 153 571 639

這樣圖檔在系統下顯示會是正常的，可是當放進 LaTeX 編譯後位置卻會跑掉，像下面這樣http://imgur.com/o4ujRcW我可以修改 bounding box 的值，把前兩位改為 0，這樣可以調整回正確的位置，
可是同時也會造成 eps 圖檔有多餘的空白，排版上很不美觀。

我知道可以把 eps 轉成 pdf 或其他格式再放進 LaTeX 內，不過因為工作上的需要，
必須使用 eps 檔。想請問有沒有什麼辦法可以修正這個問題？

P.S: 我已經試過 gs, epstool, ps2epsi 這幾個工具來調整 bounding box ，
     想請問有沒有什麼方法，可以不用手動去調整 bounding box。

[環境敘述]:
Ubuntu 15.10, R 3.2.2, TeX Live 2015 3.14159265-2.6-1.40.16

--","R_Language"
"1840","M.1446739230.A.4F1","celestialgod","問題","Re: 比對兩個list",2015-11-06 00:00:27,NA,NA,"※ 引述《angela79979 (mini)》之銘言：: [問題敘述]:: 有兩個list : a.list  ,   b.list: >head(a.list): $'1': [1] 3 4 5 8 15: $'3': [1] 2 3 6 9 12 14: ...: >head(b.list): $'2': [1] 2 3 5 13 24: $'1': [1] 2 3 5 6 7 8 9 12: ...: 想比較a.list和b.list中 相同編號的list的重複element個數: 例如:: similarity<-sum(table(a.list$'1'[a.list$'1' %in% b.list$'1'])): 欲對每一個編號的list都作去最比對: 但使用loop卻沒辦法對a.list$'i' 或 b.list$'i'作迴圈: 想請問有沒有其他的方法## data generating - assume no duplicated names and element
library(magrittr)
list_1 = replicate(50, rbinom(1, 15, .5) %>% sample(1:20, .) %>%
  sort, simplify = FALSE) %>%
    set_names(sample(1:50, 50) %>% as.character)
list_2 = replicate(50, rbinom(1, 15, .5) %>% sample(1:20, .) %>%
  sort, simplify = FALSE) %>%
    set_names(sample(1:50, 50) %>% as.character)

## method 1 - using for
intersectNames = intersect(names(list_1), names(list_2)) %>% sort
similarity = vector('numeric', length(intersectNames)) %>%
  set_names(as.character(intersectNames))
for (i in seq_along(intersectNames))
  similarity[i] = sum(list_1[[intersectNames[i]]] %in%
    list_2[[intersectNames[i]]])
print(head(similarity))
# 1 10 11 12 13 14
# 1  2  4  1  3  1

## method 2 - using map2 (or mapply)
library(purrr)
intersectNames = intersect(names(list_1), names(list_2)) %>% sort
similarity = map2(list_1[intersectNames], list_2[intersectNames],
  ~ sum(.x %in% .y)) %>% do.call(c, .) %>% set_names(intersectNames)
print(head(similarity))
# 1 10 11 12 13 14
# 1  2  4  1  3  1

PS: 其實map2就是mapply... 只是

function(x,y) sum(x %in% y)

改成

~ sum(.x %in% .y)

--","R_Language"
"1841","M.1446737658.A.388","angela79979","問題","比對兩個list",2015-11-05 23:34:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有兩個list : a.list  ,   b.list

>head(a.list)
$'1'
[1] 3 4 5 8 15

$'3'
[1] 2 3 6 9 12 14

...

>head(b.list)
$'2'
[1] 2 3 5 13 24

$'1'
[1] 2 3 5 6 7 8 9 12

...

想比較a.list和b.list中 相同編號的list的重複element個數

例如:

similarity<-sum(table(a.list$'1'[a.list$'1' %in% b.list$'1']))


欲對每一個編號的list都作去最比對

但使用loop卻沒辦法對a.list$'i' 或 b.list$'i'作迴圈

想請問有沒有其他的方法


--","R_Language"
"1842","M.1446696858.A.705","celestialgod","問題","Re: 依照條件,計算欄位,合併欄位",2015-11-05 12:14:15,NA,NA,"直接用dplyr解決吧

可以參考z-4-14的資料整理套件系列文 或是在板上/dplyr

library(dplyr)※ 引述《JJabrams (JJ)》之銘言：: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我在計算大量資料, 但是不知道如何使用: 舉例::   S020    S025 A029 Freq: 1 1995 8401995    0  863: 3 1995 8401995    1  679: 2 1999 8401999   99  456: 4 1999 8401999    1  744: 希望可以在A029旁邊依照A029的值，增加他的權重ex: (我不知道要怎麼不用for迴圈的方式直接在column寫function並增加欄位):   S020    S025 A029 Weight  Freq: 1 1995 8401995    0    0.5   863: 3 1995 8401995    1      2   679: 2 1999 8401999   99      0   456: 4 1999 8401999    1      2   744以下DT表示你該問題的資料，class建議用data.table，可以避免複製問題

DT %>% mutate(Weight = weight_cal_func(~~))

想要按照想要的順序就自己調換一下

DT %>% mutate(Weight = weight_cal_func(~~)) %>%
  select(S020, S025, A029, Weight, Freq)

或是

dt_names = names(DT)
dt_names = c(dt_names[1:3], ""Weight"", dt_names[4])
DT %>% mutate(Weight = weight_cal_func(~~)) %>%
  select_(dots = dt_names): 然後希望可以計算 Weight * Freq的值: (這個我知道可以用data table的 dt[,value:= Freq * Weight] 解):   S020    S025 A029 Weight Freq Value: 1 1995 8401995    0    0.5  863 431.5: 3 1995 8401995    1      2  679  1358: 2 1999 8401999   99      0  456     0: 4 1999 8401999    1      2  744  1488DT %>% mutate(Value = Freq * Weight): 最後依照 S020的年份作加總,並只選需要的欄位:   S020    S025  Freq  Value: 1 1995 8401995  1542 1789.5: 4 1999 8401999  1200   1488DT %>% group_by(S020) %>% summarise(Freq = sum(Freq),
  Value = sum(Value), S025 = unique(S025))


後記：

原來是斜對面的捧U阿XDD，你好你好

--","R_Language"
"1843","M.1446696287.A.E23","JJabrams","問題","依照條件,計算欄位,合併欄位",2015-11-05 12:04:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我在計算大量資料, 但是不知道如何使用
舉例:

  S020    S025 A029 Freq
1 1995 8401995    0  863
3 1995 8401995    1  679
2 1999 8401999   99  456
4 1999 8401999    1  744

希望可以在A029旁邊依照A029的值，增加他的權重ex
(我不知道要怎麼不用for迴圈的方式直接在column寫function並增加欄位)

  S020    S025 A029 Weight  Freq
1 1995 8401995    0    0.5   863
3 1995 8401995    1      2   679
2 1999 8401999   99      0   456
4 1999 8401999    1      2   744

然後希望可以計算 Weight * Freq的值
(這個我知道可以用data table的 dt[,value:= Freq * Weight] 解)

  S020    S025 A029 Weight Freq Value
1 1995 8401995    0    0.5  863 431.5
3 1995 8401995    1      2  679  1358
2 1999 8401999   99      0  456     0
4 1999 8401999    1      2  744  1488

最後依照 S020的年份作加總,並只選需要的欄位

  S020    S025  Freq  Value
1 1995 8401995  1542 1789.5
4 1999 8401999  1200   1488

希望高手可以幫忙一下!!
謝謝!!


[關鍵字]:欄位條件計算--","R_Language"
"1844","M.1446686257.A.B72","showfeb","問題","Re: 質因數分解",2015-11-05 09:17:35,NA,NA,"利用recursive function求解

fn=function(k){
  if(k%%1!=0|k<=1) return(k)
  i=2
  repeat{
    if(k%%i==0) {
      return(c(i,fn(k%/%i)))
    }
    if(i==k) return(k)
    i=i+1
  }
}
fn(k=12345678)
system.time(fn(k=2^11*3^6*47))※ 引述《taurusrob (taurusrob)》之銘言：: 供你參考：: factorizePrime <- function(num){:     isPrime <-function(num){:         return(sum(num %% 1:floor(sqrt(num)) == 0) <= 1):     }:     FindMidTwo <- function(num){:         left <- max(which(num %% 1:floor(sqrt(num)) == 0)):         return(c(left, num/left)):     }:     primeGroup <- FindMidTwo(num):     repeat{:         if(all(sapply(primeGroup, isPrime))) break:         keep <- sapply(primeGroup, isPrime):         primeGroup <- c(primeGroup[keep], as.vector(sapply(primeGroup[!keep],:                 FindMidTwo))):     }:     return(table(primeGroup)): }: ※ 引述《celestialgod (天)》之銘言：: : PS: 希望你這個不是作業，作業要自己做XD: : primefactor <- function(num){: :   p <- which(num %% 1:num == 0): :   isPrime <- function(num){: :     return(sum(num %% 1:num == 0) == 2): :   }: :   p <- p[sapply(p, isPrime)]: :   e <- vector('numeric', length(p)): :   for (i in 1:length(p)): :   {: :     repeat{: :       if (num %% p[i]^e[i] != 0): :         break: :       e[i] = e[i] + 1: :     }: :   }: :   return(list('pfactor'=p, 'multi'=e - 1)): : }: : st = proc.time(): : primefactor(12345678): : # $pfactor: : # [1]     2     3    47 14593: : #: : # $multi: : # [1] 1 2 1 1: : proc.time() - st: : #   user  system elapsed: : #  20.53    5.54   26.29: : env: [email<U+00A0>protected] machine with RRO-3.2.2 in windows 7 SP1: : 在p <- which(num %% 1:num == 0)跟isPrime這兩步時要小心記憶體會被用完: : 如果擔心的話可以拆分成repeat去做: : 例如：: : num = 12345678: : p = vector('numeric', 1000): : k = 1: : step_p = 100000: : repeat{: :   tmp = which(num %% k:(k+step_p) == 0): :   if (length(tmp) > 0): :     p[(sum(p!=0)+1):(sum(p!=0)+length(tmp))] = tmp + k - 1: :   if (k > num) break: :   k = k + step_p: : }: : p = p[p!=0]: : #              1        2        3        6        9       18       47: : #             94      141      282      423      846    14593    29186: : #          43779    87558   131337   262674   685871  1371742  2057613: : #        4115226  6172839 12345678: : 給一個更快的方法(直接用向量化去做)：: : primefactorFast <- function(num){: :   p <- which(num %% 1:num == 0): :   isPrime <- function(num){: :     return(sum(num %% 1:num == 0) == 2): :   }: :   p <- p[sapply(p, isPrime)]: :   e <- vector('numeric', length(p)): :   e_basic <- 1: :   step_e <- 3: :   subset_e <- 1:length(p): :   repeat{: :     m = num %% sweep(matrix(replicate(step_e, p[subset_e]),: :       length(p[subset_e])), 2, e_basic:(e_basic + step_e - 1), '^') == 0: :     e[subset_e] = e[subset_e] + rowSums(m): :     e_basic = e_basic + step_e: :     subset_e = which(apply(m,1,all)): :     if (is.null(subset_e) || length(subset_e) == 0): :       break: :   }: :   return(list('pfactor'=p, 'multi'=e)): : }: : st = proc.time(): : primefactorFast(12345678): : # $pfactor: : # [1]     2     3    47 14593: : #: : # $multi: : # [1] 1 2 1 1: : proc.time() - st: : #   user  system elapsed: : #   0.06    0.00    0.06: : PS: 更動step_e可以得到更好的效能: : final version: http://pastebin.com/zkD3N2kp: : test 2^11*3^6*47 (10^7.8) 只需要6.5秒--","R_Language"
"1845","M.1446664275.A.649","ror","問題","Re: 資料讀入",2015-11-05 03:11:13,NA,NA,"※ 引述《Udyr (Udyr)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想用R讀入資料: ""1,2,3,4"": ""5,6,7,8"": ...: 想得到一個data frame的結果, 如: 1  2  3  4: 5  6  7  8: 但用read.table, sep="",""的結果是同一行屬於同一個variable: 不知道有沒有其他方法能夠將資料讀入為每一行有4個variable因為不清楚你的來源.格式

如果是外部讀入csv檔
data = read.table(你的檔案)
類似
        A
1 1,2,3,4
2 5,6,7,8

data = t(as.data.frame(apply(data,1,strsplit,split="","")))

result
     [,1] [,2] [,3] [,4]
V1   ""1""  ""2""  ""3""  ""4""
V1.1 ""5""  ""6""  ""7""  ""8""


如果是讀入list
直接用
do.call(rbind, strsplit(data, ','))


不介意package

library(tidyr)
separate(data, A, paste0(""A"", 1:4), ',')

  A1 A2 A3 A4
1  1  2  3  4
2  5  6  7  8


--","R_Language"
"1846","M.1446660699.A.794","taurusrob","問題","Re: 質因數分解",2015-11-05 02:11:37,NA,NA,"供你參考：

factorizePrime <- function(num){

    isPrime <-function(num){
        return(sum(num %% 1:floor(sqrt(num)) == 0) <= 1)
    }

    FindMidTwo <- function(num){
        left <- max(which(num %% 1:floor(sqrt(num)) == 0))
        return(c(left, num/left))
    }

    primeGroup <- FindMidTwo(num)

    repeat{
        if(all(sapply(primeGroup, isPrime))) break
        keep <- sapply(primeGroup, isPrime)
        primeGroup <- c(primeGroup[keep], as.vector(sapply(primeGroup[!keep],
                FindMidTwo)))
    }

    return(table(primeGroup))
}※ 引述《celestialgod (天)》之銘言：: PS: 希望你這個不是作業，作業要自己做XD: primefactor <- function(num){:   p <- which(num %% 1:num == 0):   isPrime <- function(num){:     return(sum(num %% 1:num == 0) == 2):   }:   p <- p[sapply(p, isPrime)]:   e <- vector('numeric', length(p)):   for (i in 1:length(p)):   {:     repeat{:       if (num %% p[i]^e[i] != 0):         break:       e[i] = e[i] + 1:     }:   }:   return(list('pfactor'=p, 'multi'=e - 1)): }: st = proc.time(): primefactor(12345678): # $pfactor: # [1]     2     3    47 14593: #: # $multi: # [1] 1 2 1 1: proc.time() - st: #   user  system elapsed: #  20.53    5.54   26.29: env: [email<U+00A0>protected] machine with RRO-3.2.2 in windows 7 SP1: 在p <- which(num %% 1:num == 0)跟isPrime這兩步時要小心記憶體會被用完: 如果擔心的話可以拆分成repeat去做: 例如：: num = 12345678: p = vector('numeric', 1000): k = 1: step_p = 100000: repeat{:   tmp = which(num %% k:(k+step_p) == 0):   if (length(tmp) > 0):     p[(sum(p!=0)+1):(sum(p!=0)+length(tmp))] = tmp + k - 1:   if (k > num) break:   k = k + step_p: }: p = p[p!=0]: #              1        2        3        6        9       18       47: #             94      141      282      423      846    14593    29186: #          43779    87558   131337   262674   685871  1371742  2057613: #        4115226  6172839 12345678: 給一個更快的方法(直接用向量化去做)：: primefactorFast <- function(num){:   p <- which(num %% 1:num == 0):   isPrime <- function(num){:     return(sum(num %% 1:num == 0) == 2):   }:   p <- p[sapply(p, isPrime)]:   e <- vector('numeric', length(p)):   e_basic <- 1:   step_e <- 3:   subset_e <- 1:length(p):   repeat{:     m = num %% sweep(matrix(replicate(step_e, p[subset_e]),:       length(p[subset_e])), 2, e_basic:(e_basic + step_e - 1), '^') == 0:     e[subset_e] = e[subset_e] + rowSums(m):     e_basic = e_basic + step_e:     subset_e = which(apply(m,1,all)):     if (is.null(subset_e) || length(subset_e) == 0):       break:   }:   return(list('pfactor'=p, 'multi'=e)): }: st = proc.time(): primefactorFast(12345678): # $pfactor: # [1]     2     3    47 14593: #: # $multi: # [1] 1 2 1 1: proc.time() - st: #   user  system elapsed: #   0.06    0.00    0.06: PS: 更動step_e可以得到更好的效能: final version: http://pastebin.com/zkD3N2kp: test 2^11*3^6*47 (10^7.8) 只需要6.5秒: ※ 引述《haolihy (好厲害)》之銘言：: : [問題類型]:: : 效能諮詢(我想讓R 跑更快): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 質因數分解: : [程式範例]:: : 想寫一個程式對正整數n作質因數分解: : 目標是n<10^8 可以1min跑完: : 我的程式大概要6~7min 改進空間應該很大: : 而太慢的主因應該是列出<n質數表的程式太慢: : 請大家賜教: : 質數表的程式:: : primeY <- function(num){: :   sqnum <- floor(sqrt(num)): :   x <- c(2:num): :   y <- c(): :   repeat{: :     if(x[1] > sqnum) break: :     y <- c(y, x[1]): :     x <- x[x %% x[1] != 0]: :   }: :   return(c(y,x)): : }: : 質因數分解的程式:: : primefactor <- function(num){: :   p <- primeY(num)[which(num %% primeY(num) == 0)]: :   q <- c(): :   e <- c(): :   for(i in 1:length(p)){: :     e[i] <- 1: :     q[i] <- num / p[i]: :     repeat{: :       if(q[i] %% p[i] != 0) break: :       e[i] <- e[i] + 1: :       q[i] <- q[i] / p[i]: :        }: :   }: :   return(list('pfactor'=p,: :               'multi'=e)): : }: : [環境敘述]:: : R 3.2.2--","R_Language"
"1847","M.1446652668.A.1AF","Udyr","問題","資料讀入",2015-11-04 23:57:45,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
想用R讀入資料
""1,2,3,4""
""5,6,7,8""
...

想得到一個data frame的結果, 如

1  2  3  4
5  6  7  8

但用read.table, sep="",""的結果是同一行屬於同一個variable
不知道有沒有其他方法能夠將資料讀入為每一行有4個variable


--","R_Language"
"1848","M.1446631193.A.0DC","celestialgod","問題","Re: 質因數分解",2015-11-04 17:59:51,NA,NA,"PS: 希望你這個不是作業，作業要自己做XD

primefactor <- function(num){
  p <- which(num %% 1:num == 0)
  isPrime <- function(num){
    return(sum(num %% 1:num == 0) == 2)
  }
  p <- p[sapply(p, isPrime)]
  e <- vector('numeric', length(p))
  for (i in 1:length(p))
  {
    repeat{
      if (num %% p[i]^e[i] != 0)
        break
      e[i] = e[i] + 1
    }
  }
  return(list('pfactor'=p, 'multi'=e - 1))
}
st = proc.time()
primefactor(12345678)
# $pfactor
# [1]     2     3    47 14593
#
# $multi
# [1] 1 2 1 1
proc.time() - st
#   user  system elapsed
#  20.53    5.54   26.29

env:[email<U+00A0>protected]machine with RRO-3.2.2 in windows 7 SP1

在p <- which(num %% 1:num == 0)跟isPrime這兩步時要小心記憶體會被用完

如果擔心的話可以拆分成repeat去做

例如：

num = 12345678
p = vector('numeric', 1000)
k = 1
step_p = 100000
repeat{
  tmp = which(num %% k:(k+step_p) == 0)
  if (length(tmp) > 0)
    p[(sum(p!=0)+1):(sum(p!=0)+length(tmp))] = tmp + k - 1
  if (k > num) break
  k = k + step_p
}
p = p[p!=0]
#              1        2        3        6        9       18       47
#             94      141      282      423      846    14593    29186
#          43779    87558   131337   262674   685871  1371742  2057613
#        4115226  6172839 12345678


給一個更快的方法(直接用向量化去做)：

primefactorFast <- function(num){
  p <- which(num %% 1:num == 0)
  isPrime <- function(num){
    return(sum(num %% 1:num == 0) == 2)
  }
  p <- p[sapply(p, isPrime)]
  e <- vector('numeric', length(p))
  e_basic <- 1
  step_e <- 3
  subset_e <- 1:length(p)
  repeat{
    m = num %% sweep(matrix(replicate(step_e, p[subset_e]),
      length(p[subset_e])), 2, e_basic:(e_basic + step_e - 1), '^') == 0
    e[subset_e] = e[subset_e] + rowSums(m)
    e_basic = e_basic + step_e
    subset_e = which(apply(m,1,all))
    if (is.null(subset_e) || length(subset_e) == 0)
      break
  }
  return(list('pfactor'=p, 'multi'=e))
}
st = proc.time()
primefactorFast(12345678)
# $pfactor
# [1]     2     3    47 14593
#
# $multi
# [1] 1 2 1 1
proc.time() - st
#   user  system elapsed
#   0.06    0.00    0.06

PS: 更動step_e可以得到更好的效能

final version:http://pastebin.com/zkD3N2kptest 2^11*3^6*47 (10^7.8) 只需要6.5秒※ 引述《haolihy (好厲害)》之銘言：: [問題類型]:: 效能諮詢(我想讓R 跑更快): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 質因數分解: [程式範例]:: 想寫一個程式對正整數n作質因數分解: 目標是n<10^8 可以1min跑完: 我的程式大概要6~7min 改進空間應該很大: 而太慢的主因應該是列出<n質數表的程式太慢: 請大家賜教: 質數表的程式:: primeY <- function(num){:   sqnum <- floor(sqrt(num)):   x <- c(2:num):   y <- c():   repeat{:     if(x[1] > sqnum) break:     y <- c(y, x[1]):     x <- x[x %% x[1] != 0]:   }:   return(c(y,x)): }: 質因數分解的程式:: primefactor <- function(num){:   p <- primeY(num)[which(num %% primeY(num) == 0)]:   q <- c():   e <- c():   for(i in 1:length(p)){:     e[i] <- 1:     q[i] <- num / p[i]:     repeat{:       if(q[i] %% p[i] != 0) break:       e[i] <- e[i] + 1:       q[i] <- q[i] / p[i]:        }:   }:   return(list('pfactor'=p,:               'multi'=e)): }: [環境敘述]:: R 3.2.2--","R_Language"
"1849","M.1446628646.A.D6C","haolihy","問題","質因數分解",2015-11-04 17:17:24,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
質因數分解

[程式範例]:

想寫一個程式對正整數n作質因數分解

目標是n<10^8 可以1min跑完

我的程式大概要6~7min 改進空間應該很大

而太慢的主因應該是列出<n質數表的程式太慢

請大家賜教

質數表的程式:

primeY <- function(num){
  sqnum <- floor(sqrt(num))
  x <- c(2:num)
  y <- c()
  repeat{
    if(x[1] > sqnum) break
    y <- c(y, x[1])
    x <- x[x %% x[1] != 0]
  }
  return(c(y,x))
}

質因數分解的程式:
primefactor <- function(num){
  p <- primeY(num)[which(num %% primeY(num) == 0)]
  q <- c()
  e <- c()
  for(i in 1:length(p)){
    e[i] <- 1
    q[i] <- num / p[i]
    repeat{
      if(q[i] %% p[i] != 0) break
      e[i] <- e[i] + 1
      q[i] <- q[i] / p[i]
       }
  }
  return(list('pfactor'=p,
              'multi'=e))
}


[環境敘述]:
R 3.2.2

--","R_Language"
"1850","M.1446624395.A.17D","eegame","問題","ggplot極座標投影圖",2015-11-04 16:06:32,NA,NA,"[問題類型]:

感謝先前大家的指點
圖出來了
進入ggplot圖片的排版

[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
目前已用ggplot把圖畫出來了
但是細部的分區圖上是把圓分成8個區塊
我想要分成四等分就好
圓的部份圖中是四個圈圈
還可以增加或減少嗎
背景想要白色
線條想要粗一點

[程式範例]:http://i.imgur.com/jI0ymuz.jpg--","R_Language"
"1851","M.1446515961.A.B0E","alanfengjkl","問題","ggplot2雙軸",2015-11-03 09:59:19,NA,NA,"我有兩筆數據想畫在同一張圖上
一個呈現在左軸一個右軸
請問怎麼寫??


--posted frombbs reader hybridon myHTC_M910x--","R_Language"
"1852","M.1446513189.A.3AE","celestialgod","分享","don't use aggregate",2015-11-03 09:12:25,NA,NA,"[關鍵字]:

do not use aggregate

[出處]:http://www.r-bloggers.com/dont-use-statsaggregate/[重點摘要]:

Most base R code has problems if there are extra attributes on a numeric
array. So R-stat code tends to have a habit of dropping attributes when it
can. it is odd that the class() is kept (which itself an attribute style
structure) and the timezone is lost, but R is full of hand-specified corner
cases.

所以aggregate會把其他多於的attributes丟掉...

很多事情又要重來一次，例如date的格式之類的

總之，此篇作者非常不推薦aggregate

建議大家愛惜自己生命，使用dplyr XDD


--","R_Language"
"1853","M.1446495492.A.7CB","babysian7","問題","dataframe include date with caret",2015-11-03 04:18:09,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門

[問題敘述]:

我有一個dataframe，裡面包含日期變數，
'data.frame':   1000 obs. of  49 variables:
 $ estate_Post          : int  10069 10065 10044 10044 10044 10045 10044
10045 10044 10045 ...
 $ estate_TransType     : int  3 1 4 2 4 4 4 4 4 4 ...
 $ estate_LandArea      : num  15.54 47.3 20.89 1.99 23.98 ...
 $ estate_ZoneUse       : int  2 2 3 3 3 3 3 3 3 3 ...
 $ estate_TransDate     : Date, format: ""1989-03-01"" ""1998-01-01""
""2015-01-01"" ""2015-01-01"" ...
 $ estate_Land          : int  1 1 1 0 1 1 1 1 1 1 ...
 $ estate_House         : int  1 0 1 0 1 1 1 1 1 1 ...
 $ estate_ParkingLot    : int  0 0 2 2 2 1 3 3 4 3 ...
 $ estate_TransFloor    : int  5 -99 17 -4 11 6 6 5 15 5 ...
 $ estate_TotalFloor    : int  5 -99 31 31 31 31 31 31 31 31 ...
 $ estate_HouseType     : int  1 12 2 12 2 2 2 2 2 2 ...
 $ estate_HouseUse      : int  1 -99 1 3 1 1 1 1 1 1 ...
 $ estate_HouseMaterials: int  5 -99 13 13 13 13 13 13 13 13 ...
 $ estate_HouseDate     : Date, format: ""1967-05-19"" NA ""2013-11-29""
""2013-11-29"" ...
 $ estate_HouseArea     : num  35.1 0 442.7 62.1 507.1 ...
 $ estate_HouseRoom_1   : int  1 0 5 0 5 4 4 4 3 4 ...
 $ estate_HouseRoom_2   : int  1 0 2 0 2 2 2 2 2 2 ...
 $ estate_HouseRoom_3   : int  1 0 6 0 6 3 3 3 3 3 ...
 $ estate_HouseRoom_4   : int  1 1 1 1 1 1 1 1 1 1 ...
 $ estate_Guards        : int  2 2 2 2 2 2 2 2 2 2 ...
 $ estate_Price         : int  3535 54299 164882 -99 195808 181428 174799
175356 190717 165250 ...
 $ estate_ParkingType   : int  -99 -99 3 4 3 4 4 4 4 4 ...
 $ estate_ParkingArea   : num  0 0 13.2 32.2 27.5 ...
 $ estate_ParkingPrice  : int  0 0 0 5600000 0 0 0 0 8400000 0 ...
 $ estate_Lng           : num  122 122 122 122 122 ...
 $ estate_Lat           : num  25 25 25 25 25 ...
 $ Aport_Distance       : num  7.3 6.7 5.3 5.3 5.3 5.3 5.3 5.3 5.3 5.3 ...
 $ ParkB_Distance       : num  0.29 0.785 0.214 0.217 0.215 ...
 $ Univ_Distance        : num  1.7 1 1 1 1 1 1 1 1 1 ...
 $ ParkR_Distance       : num  1.4 2 1.7 1.7 1.7 1.6 1.7 1.7 1.7 1.6 ...
 $ MRT_StationDistance  : num  0.914 0.327 0.403 0.401 0.402 ...
 $ MRT_LineDistance     : num  999 999 999 999 999 999 999 999 999 999 ...
 $ Fway_EntranceDistance: int  999 999 999 999 999 999 999 999 999 999 ...
 $ Fway_LineDistance    : int  999 999 999 999 999 999 999 999 999 999 ...
 $ TRA_StationDistance  : num  1 1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 ...
 $ THSR_StationDistance : num  3.1 2.5 1.1 1.1 1.1 1.1 1.1 1.1 1.1 1.1 ...
 $ River_Distance       : num  999 1.84 1.49 1.48 1.49 ...
 $ Schools_Distance     : num  0.2 0.2 0.7 0.7 0.7 0.8 0.7 0.7 0.7 0.8 ...
 $ Lib_Distance         : num  0.8 0.9 1.2 1.2 1.2 1.2 1.2 1.2 1.2 1.2 ...
 $ Sport_Distance       : num  2.4 1.8 0.9 0.9 0.9 0.8 0.9 0.9 0.9 0.8 ...
 $ ParkS_Distance       : num  0.6 1 0.6 0.6 0.6 0.7 0.6 0.6 0.6 0.7 ...
 $ Hyper_Distance       : num  1.3 0.6 1.2 1.2 1.2 1.1 1.2 1.2 1.2 1.1 ...
 $ Shop_Distance        : num  1.7 1 0.5 0.5 0.5 0.4 0.5 0.5 0.5 0.4 ...
 $ Post_Distance        : num  0.5 0.2 0.5 0.5 0.5 0.4 0.5 0.5 0.5 0.4 ...
 $ Hosp_Distance        : num  0.7 0.4 0.9 0.9 0.9 0.8 0.9 0.9 0.9 0.8 ...
 $ Gas_Distance         : num  0.5 0.4 1.4 1.4 1.4 1.4 1.4 1.5 1.4 1.4 ...
 $ Incin_Distance       : num  10.9 10.2 8.9 8.9 8.9 8.9 8.9 8.9 8.9 8.9 ...
 $ Mort_Distance        : num  6.3 5.7 4.3 4.3 4.3 4.3 4.3 4.3 4.3 4.3 ...
 $ estate_TotalPrice    : num  124117 2568347 73000000 5600000 99300000 ...

當我將日期變數寫成as.Date後，在挑選參數時會有錯誤訊息
Error in { :
  task 1 failed - ""rfe is expecting 48 importance values but only has 46""
In addition: Warning messages:
1: In predict.lm(object, x) :
prediction from a rank-deficient fit may be misleading

請問我該怎麼改才好

[程式範例]:
library(mlbench)
library(caret)
library(maps)
library(rgdal)
library(raster)
library(sp)
library(spdep)
library(GWmodel)
library(e1071)
library(plyr)
library(kernlab)
library(zoo)

mydata <-
read.csv(""E:/SupportVectorRegression/Realestatedata_1000_delete_date.csv"",
header=TRUE)

mydata$estate_TransDate<-as.Date(paste(mydata$estate_TransDate,1,sep=""-""),format=""%Y-%m-%d"")
mydata$estate_HouseDate<-as.Date(mydata$estate_HouseDate,format=""%Y-%m-%d"")
rfectrl <- rfeControl(functions=lmFuncs,
method=""cv"",number=10,verbose=TRUE,returnResamp = ""final"")
results <- rfe(mydata[,1:4],mydata[,49],sizes =
c(1:49),rfeControl=rfectrl,method = ""svmRadial"")
#metric = ""Rsquared""

print(results)
predictors(results)
plot(results, type=c(""g"", ""o""))


[環境敘述]:
R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)

[關鍵字]:
caret、dataframe、date

--","R_Language"
"1854","M.1446473590.A.F9D","celestialgod","問題","Re: 資料加總和參照",2015-11-02 22:13:08,NA,NA,"dat = data.frame(ID = sample(LETTERS[1:5], 20, TRUE),
  bal = sample(0:200, 20, TRUE), date = sample(c(0, 2013:2015), 20, TRUE))

# normal method
dat2 = subset(dat, dat$date != 0)
out = cbind(tapply(dat$bal, dat$ID, sum), tapply(dat2$date, dat2$ID, min))
data.frame(ID = rownames(out), bal = out[,1], date = out[,2])
#   ID bal date
# A  A 232 2013
# B  B  55 2013
# C  C 868 2013
# D  D 346 2013
# E  E 470 2013

## 注意，這裡如果有ID的年份只有0會出錯!! 會在cbind時出現長度不同~~~
##     這裡或許有人會有更漂亮的解法XD

## 比較好的方式還是透過dplyr吧

# dplyr
library(dplyr)
dat %>% group_by(ID) %>%
  summarise(bal = sum(bal), date = min(date[date > 0]))
#   ID bal date
# 1  A 232 2013
# 2  B  55 2013
# 3  C 868 2013
# 4  D 346 2013
# 5  E 470 2013※ 引述《rubyjay (佩佩~)》之銘言：: [問題敘述]:: 資料為:  ID   bal   date:   A    10   2015:   A    30      0:   A   100   2014:   B     0   2013:   B   100      0:   .     .      .:   .     .      .:   .     .      .: 想要整理成：:  ID   bal   date:   A   140   2014:   B   100   2013:   .     .      .:   .     .      .:   .     .      .: 也就是根據同一個ID，bal加總，date取不為0的最小值~: [程式範例]::: 因很久沒碰，: 今天先用了: aggregate(bal~ID,data,sum): 這樣子可以得到同一個ID，金額(bal)加總，但日期時(date)的部分不知道怎麼處理。: 有想說不然就先替除date為0的，然後再用aggregate(date~ID,data,min)，: 但是因為最後我還是要把他和bal放一起去做分類。: 大部分參考下列網頁摸索出來的~: https://stat.ethz.ch/R-manual/R-devel/library/stats/html/aggregate.html: 因為以前大多用R跑模擬，用來分析資料的比較少，原本都用excel，: 只是資料大(10萬筆以上)，受不了excel了~(excel常用樞紐和vlookup)--","R_Language"
"1855","M.1446473224.A.931","rubyjay","問題","資料加總和參照",2015-11-02 22:06:58,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
資料為
 ID   bal   date
  A    10   2015
  A    30      0
  A   100   2014
  B     0   2013
  B   100      0
  .     .      .
  .     .      .
  .     .      .

想要整理成：
 ID   bal   date
  A   140   2014
  B   100   2013
  .     .      .
  .     .      .
  .     .      .

也就是根據同一個ID，bal加總，date取不為0的最小值~



[程式範例]:因很久沒碰，今天先用了aggregate(bal~ID,data,sum)這樣子可以得到同一個ID，金額(bal)加總，但日期時(date)的部分不知道怎麼處理。有想說不然就先替除date為0的，然後再用aggregate(date~ID,data,min)，但是因為最後我還是要把他和bal放一起去做分類。大部分參考下列網頁摸索出來的~https://stat.ethz.ch/R-manual/R-devel/library/stats/html/aggregate.html因為以前大多用R跑模擬，用來分析資料的比較少，原本都用excel，只是資料大(10萬筆以上)，受不了excel了~(excel常用樞紐和vlookup)[環境敘述]:麻煩各位大大了~[關鍵字]:選擇性，也許未來有用--","R_Language"
"1856","M.1446454836.A.846","sky84911","問題","回歸直線",2015-11-02 17:00:33,NA,NA,"請問一下為何abline(lm)後還是沒有出現回歸直線？？
謝謝http://i.imgur.com/MecuXjS.jpg--","R_Language"
"1857","M.1446441482.A.931","celestialgod","問題","Re: 如何避免大量lm物件影響速度",2015-11-02 13:17:57,NA,NA,"※ 引述《ror (回血375)》之銘言：: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 各位前輩好: 想請教一個問題: 目前我手上有大概幾百萬(快到千萬)組資料 一組資料是兩筆內容: 現在要對每一組資料跑lm()回歸後 取出相關係數與P-value 等等資訊: 但因為要跑的量實在是太大量了 導致速度很慢 已經使用parallel: 目前寫法是 loop-> lm() ->summary-> 取出value: 想請問是否有方式避免重複宣告lm()物件 ...或是其他可以提升速度的方式: 感謝 Orz以下可能跟原PO的問題關係小了一點XD

我提供一個利用RcppArmadillo and RcppParallel做

leave-one-out cross validation (LOOCV) 的例子

十萬個樣本做LOOCV:

程式：http://pastebin.com/4JK6VSd7在我的電腦上跑一次花了173.79秒 (平均一次 0.17 milliseconds)

這個應該遠比用R的迴圈快很多...

記憶體使用的部分也保持在300MB以下，基本上不太會用到太多記憶體做暫存


給一個簡單的比較：

mses = vector('numeric', N)
st = proc.time()
for (i in 1:N){
  coef_lm = coef(lm.fit(cbind(1, X[-i,]), y[-i]))
  mses[i] = y[i] - c(1, X[i,]) %*% coef_lm
}
proc.time() - st

上面的程式在N = 5000大概花10秒，Rcpp的版本只需要0.3秒



題外話，Rcpp真的值得一學，如果想要直接使用R的BLAS可以考慮RcppArmadillo

如果覺得內建的BLAS太慢可以考用RcppEigen (他本身的BLAS也算是夠快的)

不過最簡單的方式就是用RRO，或是在linux/mac上也可以考慮openblas

最後再搭配RcppParallel就可以得到很大的加速了XDD

PS: 裡面有一段程式是避免RcppParallel跟RRO使用的MKL用到過多的thread

    而造成速度的拖累，所以寫了一段去減少MKL使用的thread

    在有超執行緒(HT)的電腦上，MKL會用2個，其餘則是使用1個thread

PS2: RRO是Revolution R Open


最後，原PO的問題也並不複雜，相關係數跟p-value可以分別透過

RcppArmadillo:::cor跟Rcpp:::pt做處理，如果有任何問題，歡迎討論XD

Rcpp:::pt用法：http://stackoverflow.com/questions/20144528/how-use-correctly-rcpppt補充，如果要用K-fold可以用下面的函數去生成cvIndex:

(剛好有現成的，順便分享XD)

好讀版：http://pastebin.com/RhJx3kLsuvec cvfold_index_f(const uword n, const uword fold)
{
  uword fold_n = n / fold, rem = n - fold_n * fold;
  uvec tmp_vec = linspace<uvec>(0, fold - 1, fold),
    index = vectorise(repmat(tmp_vec, fold_n, 1));
  if (rem > 0)
    index = join_cols(index, index.head(rem));

  // random permutation
  int j;
  for (int i = 0; i < n; i++)
  {
    j = as_scalar(randi<uvec>(1, distr_param(i, n - 1)));
    index.swap_rows(i, j);
  }
  return index;
}

--","R_Language"
"1858","M.1446383300.A.5BD","sky84911","問題","畫摺線圖",2015-11-01 21:08:17,NA,NA,"各位好
在下因為修統計學的關係，
開始接觸R語言，
只是老師沒有仔細講解的關係
即使有指令還是不是很清楚，
想問一下 該如何讀取如下列的csv檔畫摺線圖？
因為有三欄  年和月 和溫差
不知道該如何打x軸的指令http://i.imgur.com/eNmuxwW.jpg謝謝

--","R_Language"
"1859","M.1446382852.A.422","ror","問題","如何避免大量lm物件影響速度",2015-11-01 21:00:49,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的各位前輩好
想請教一個問題
目前我手上有大概幾百萬(快到千萬)組資料 一組資料是兩筆內容
現在要對每一組資料跑lm()回歸後 取出相關係數與P-value 等等資訊

但因為要跑的量實在是太大量了 導致速度很慢 已經使用parallel
目前寫法是 loop-> lm() ->summary-> 取出value
想請問是否有方式避免重複宣告lm()物件 ...或是其他可以提升速度的方式

感謝 Orz


--","R_Language"
"1860","M.1446295518.A.415","SleepyChink","問題","質數尋找",2015-10-31 20:45:16,NA,NA,"請問,
我的語法完成後
解果只有將2-200印出200次給我，並沒有順利顯示出質數，為何會這樣呢?
x <- seq(2,200,1)
i<-1
done<-FALSE
while(!done){

if(x[i]%%(2:(x[i]-1))!=0){
      print(x)

}



if(x[i]==200){
done<-TRUE
}
i<-i+1
}




--
Sent from my Windows

--","R_Language"
"1861","M.1446282396.A.84F","Edster","問題","Re: 請問while...done...until語法",2015-10-31 17:06:34,NA,NA,": x <- c(3600, 5000, 12000, NA, 1000, 2000, 600, 7500, 1800, 9000): ss<-0: i<-1: done<-FALSE: while(!done){: if(x[i]>1){: ss<-ss+1: }: if(is.na(x[i])==TRUE){: ss<-ss+0: }: if(x[i]==""NA""){: done<-TRUE: }: i<-i+1: }: 這個語法還是無法正確顯示出第幾筆是missing: 目前知道判斷是否為缺失值需要使用is.na(x)的語法，但不知道如何結合: 麻煩高手相救，謝謝# your method

x <- c(3600, 5000, 12000, NA, 1000, 2000, 600, 7500, 1800, 9000)
ss<-0
i<-1
done<-FALSE
while(!done){
  if(x[i]>1 & !is.na(x[i]>1)){
  }
  if(is.na(x[i])){
    done<-TRUE
  }
  ss = i
  i<-i+1
}
ss

想了一下你的bug, 在 if() 中只能吃TRUE or FALSE
例如 x[i] > 1 這是條件式, 但是若 x[i] 為 NA 則條件式失敗, 回傳 NA

舉例來說
if(TRUE) cat(""TRUE"",""\n"")
if(NA) cat(""Error"",""\n"")

這時要用
TRUE & NA; 不是 TRUE | NA; 請自行比較兩者差別


其他寫法

#
x = c(3600, 5000, 12000, NA, 1000, 2000, 600, 7500, 1800, 9000)

# method 1
na.action(na.omit(x))

# method 2
grep(""TRUE"", is.na(x))

# method 3
n = length(x); s = NULL
for(i in 1:n){
  if(is.na(x[i])) s = c(s, i)
}

# method 4
i = 1;
while(!is.na(x[i])){
  i = i + 1
  if(is.na(x[i])) cat(x[i],""\n"")
}

期中考到了, 我也來渡化眾生, 期望paper能accepted.

--","R_Language"
"1862","M.1446277299.A.DFA","ritajen","問題","如何將兩個plot圖呈現在同一個畫布上",2015-10-31 15:41:36,NA,NA,"如題，我應該如何將兩個plot圖畫在同一個畫布的左右兩側?
而不是第一圖被第二個圖覆蓋掉，只剩下最後一個?

謝謝

--
Sent from my Windows

--","R_Language"
"1863","M.1446274567.A.D83","SleepyChink","問題","Re: 請問while...done...until語法",2015-10-31 14:56:04,NA,NA,"※ 引述《SleepyChink (SleepyChink)》之銘言：: 請問我該如何使用while...done...until迴圈,語法找除第幾筆資料是missing讓他顯示出: 第幾筆?還有找出質數?: 我個人寫的語法執行後進入無限迴圈跑不停，麻煩各位高手幫忙了!: 十分感謝。x <- c(3600, 5000, 12000, NA, 1000, 2000, 600, 7500, 1800, 9000)
ss<-0
i<-1
done<-FALSE
while(!done){
if(x[i]>1){
ss<-ss+1
}
if(is.na(x[i])==TRUE){
ss<-ss+0
}


if(x[i]==""NA""){
done<-TRUE
}

i<-i+1
}



這個語法還是無法正確顯示出第幾筆是missing
目前知道判斷是否為缺失值需要使用is.na(x)的語法，但不知道如何結合
麻煩高手相救，謝謝

--
Sent from my Windows

--","R_Language"
"1864","M.1446232262.A.E0F","SleepyChink","問題","請問while...done...until語法",2015-10-31 03:11:00,NA,NA,"請問我該如何使用while...done...until迴圈,語法找除第幾筆資料是missing讓他顯示出
第幾筆?還有找出質數?

我個人寫的語法執行後進入無限迴圈跑不停，麻煩各位高手幫忙了!
十分感謝。



--
Sent from my Android

--","R_Language"
"1865","M.1446220015.A.909","Edster","問題","Re: 如何在座標上抓出特定範圍的資料",2015-10-30 23:46:53,NA,NA,"library(sp)
data(meuse.grid)
coordinates(meuse.grid) <- ~x+y
plot(meuse.grid)

XY = coordinates(meuse.grid)
xy = XY[sample(nrow(XY),10),]

library(magrittr)
ExtractbyCircle = function(xy, XY, con){
  d = as.matrix(dist(rbind(xy, XY)))[-1,1] %>% set_names(1:nrow(XY))
  s = d[d<=con]
  return(as.integer(names(s)))
}

SS = list()
for(i in 1:nrow(xy)){
  SS[[i]] = ExtractbyCircle(xy=xy[i,], XY=XY, con = 100)
}

str(SS)
XY[SS[[1]],]※ 引述《celestialgod (天)》之銘言：: 示例如下，自行延伸：: library(pracma): # circle: circleFunc = function(r, x0 = 0, y0 = 0, n.split = 1000){:   cbind(r*cos(seq(0, 2*pi, length.out = n.split)) + x0,:     r*sin(seq(0, 2*pi, length.out = n.split)) + y0): }: squreArea = matrix(runif(1000), 100): circlePoints = circleFunc(0.5, 0.5, 0.5): inCicle = inpolygon(squreArea[,1], squreArea[,2],:   circlePoints[,1], circlePoints[,2]): plot(squreArea[,1], squreArea[,2],:   xlim = c(0,1), ylim = c(0,1), xlab = ""x"", ylab = ""y""): lines(circlePoints[,1], circlePoints[,2], col = ""blue""): points(squreArea[inCicle,1], squreArea[inCicle,2], col = ""red""): http://i.imgur.com/H1vyxBa.png: 我之前是365萬個點，是用Rcpp逐點處理的 (距離矩陣要開滿大的滿麻煩的): 如果點不多的話，用inpolygon很快XD: ※ 引述《allen63521 (GoGoPadres)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]: 想要分析位在某些目標附近的資料: : 手上有一筆關於不動產成交的資料，內容包含成交價格、坪數、該房屋位置的橫、縱座標: : 我想要用散佈圖把所有data的橫、縱座標在平面座標上排出來，並且把幾個目標定位在座標上，去討論這幾個目標附近（可能是一個圓或是矩形範圍內）的房屋成交價: : 目前的想法是：: : 如果想討論的範圍是圓，可以對""該目標跟所有data""去算點和點之間的距離: : 再從所有算出來的距離中挑比較近（抓某個比例）的那些房子出來觀察: : 但這個方法在目標不只有一個的時候可能就會變得比較麻煩，因為要把""每個目標""和""每棟房子""的組合都算過: : 想要請問有沒有可能做到：: : 以每個目標為圓心，設定一個圓（先不考慮怎麼決定半徑大小），讓系統去判定有哪些房子是落在這些範圍裡面的，就可以直接把他們抓出來看: : [關鍵字]:: : 範圍內的資料--","R_Language"
"1866","M.1446217622.A.D0E","celestialgod","問題","Re: 如何在座標上抓出特定範圍的資料",2015-10-30 23:06:59,NA,NA,"示例如下，自行延伸：

library(pracma)
# circle
circleFunc = function(r, x0 = 0, y0 = 0, n.split = 1000){
  cbind(r*cos(seq(0, 2*pi, length.out = n.split)) + x0,
    r*sin(seq(0, 2*pi, length.out = n.split)) + y0)
}
squreArea = matrix(runif(1000), 100)
circlePoints = circleFunc(0.5, 0.5, 0.5)
inCicle = inpolygon(squreArea[,1], squreArea[,2],
  circlePoints[,1], circlePoints[,2])
plot(squreArea[,1], squreArea[,2],
  xlim = c(0,1), ylim = c(0,1), xlab = ""x"", ylab = ""y"")
lines(circlePoints[,1], circlePoints[,2], col = ""blue"")
points(squreArea[inCicle,1], squreArea[inCicle,2], col = ""red"")http://i.imgur.com/H1vyxBa.png我之前是365萬個點，是用Rcpp逐點處理的 (距離矩陣要開滿大的滿麻煩的)

如果點不多的話，用inpolygon很快XD※ 引述《allen63521 (GoGoPadres)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]: 想要分析位在某些目標附近的資料: 手上有一筆關於不動產成交的資料，內容包含成交價格、坪數、該房屋位置的橫、縱座標: 我想要用散佈圖把所有data的橫、縱座標在平面座標上排出來，並且把幾個目標定位在座標上，去討論這幾個目標附近（可能是一個圓或是矩形範圍內）的房屋成交價: 目前的想法是：: 如果想討論的範圍是圓，可以對""該目標跟所有data""去算點和點之間的距離: 再從所有算出來的距離中挑比較近（抓某個比例）的那些房子出來觀察: 但這個方法在目標不只有一個的時候可能就會變得比較麻煩，因為要把""每個目標""和""每棟房子""的組合都算過: 想要請問有沒有可能做到：: 以每個目標為圓心，設定一個圓（先不考慮怎麼決定半徑大小），讓系統去判定有哪些房子是落在這些範圍裡面的，就可以直接把他們抓出來看: [關鍵字]:: 範圍內的資料--","R_Language"
"1867","M.1446215593.A.49C","allen63521","問題","如何在座標上抓出特定範圍的資料",2015-10-30 22:32:54,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]: 想要分析位在某些目標附近的資料


手上有一筆關於不動產成交的資料，內容包含成交價格、坪數、該房屋位置的橫、縱座標

我想要用散佈圖把所有data的橫、縱座標在平面座標上排出來，並且把幾個目標定位在座標上，去討論這幾個目標附近（可能是一個圓或是矩形範圍內）的房屋成交價




目前的想法是：

如果想討論的範圍是圓，可以對""該目標跟所有data""去算點和點之間的距離

再從所有算出來的距離中挑比較近（抓某個比例）的那些房子出來觀察

但這個方法在目標不只有一個的時候可能就會變得比較麻煩，因為要把""每個目標""和""每棟房子""的組合都算過




想要請問有沒有可能做到：

以每個目標為圓心，設定一個圓（先不考慮怎麼決定半徑大小），讓系統去判定有哪些房子是落在這些範圍裡面的，就可以直接把他們抓出來看




[關鍵字]:

範圍內的資料

--","R_Language"
"1868","M.1446189724.A.805","locka","問題","抓取中文字串",2015-10-30 15:22:00,NA,NA,"各位大大午安：


我今天有一組中文的資料，例如：

location <- as.factor(c(""彰化縣溪州鄉高速公路"", ""澎湖縣馬公市關帝廟前""...))

想要請教該怎麼做我才可以只取出每個字串的""前三個字""呢?


我想到的方式是用grep,可惜遇到中文就失敗了...

以下是我失敗的指令:
city <- grep(""\\D"", location, value=TRUE, perl=TRUE)

有查到似乎regular expression比對中文可以用 [u4e00-\u9a05]
可是不是很清楚該如何使用...


可以提供一些意見嗎？或是其實根本是我用錯方法了？謝謝！

參考程式碼：https://ideone.com/ccOlwz[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[環境敘述]:R version 3.2.2 (2015-08-14)Platform: i386-w64-mingw32/i386 (32-bit)Running under: Windows 7 x64 (build 7601) Service Pack 1--","R_Language"
"1869","M.1446188562.A.50A","loser113","問題","指令 solve 原理?",2015-10-30 15:02:40,NA,NA,"請問 solve 是用甚麼原理解線性方成

測試過幾種數值方法 感覺不是

有些發散 solve 還是能解出來

--","R_Language"
"1870","M.1446047725.A.106","qhair","問題","Re: 21點",2015-10-28 23:55:14,NA,NA,"同學作業要自己做喔
老師會不定期來查水表
誰作業跟這篇一樣就GG了
希望這學期不用動用程式碼比對工具

P.S. 老師已備份這篇

--","R_Language"
"1871","M.1445955538.A.A1E","elone","問題","ggplot 原點位置",2015-10-27 22:18:56,NA,NA,"as title

  最近在畫data 都是用 ggplot 來畫

  但是今天被boss 硬是挑了一個問題



  但是boss 說0就是0 就應該是放在 x y 軸交叉的位置


  也就是 紅字的地方

  =___________=


  但是我看了很多ggplot 的文件，也條了一整晚，但是 y軸的零永遠都不會出現在

  座標軸交叉的那個位置


   ^
   |
   |___>
  0


  救命啊 QAQ ...


  (推文者要求刪推文) ~~

--","R_Language"
"1872","M.1445935959.A.58B","gbd37","問題","Re: dendextend package使用問題",2015-10-27 16:52:37,NA,NA,"再請教這題範例的相關問題，同個圖繼續討論

現在想切dend在高度4時的圖匯出圖檔

我的code:

for(i in 1:3)
pdf(paste0('test',i,'.pdf'))
plot(cut(dend,h = 4)$lower[[i]])
dev.off()

想用for迴圈一次存多張圖，但存出來的圖卻不能打開

為啥....※ 引述《celestialgod (天)》之銘言：: ※ 引述《gbd37 (有夠瞎)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 我想把圖中的setosa(25)、versicolor(82)的(25)、(82)那些消除掉: : 僅剩下setosa、virginca、versicolor: : 以方便我再跑我的DATA容易視覺判斷 謝謝Orz: : [程式範例]:: : 網址裡的: : The 3 clusters from the “complete” method: : vs the real species category的CODE與圖: : http://tinyurl.com/nr3g5jc: : [關鍵字]:dendextend、Hierarchical cluster--","R_Language"
"1873","M.1445935732.A.2D7","Edster","問題","搜索並讀取 zip 中的檔案",2015-10-27 16:48:49,NA,NA,"[問題敘述]:
我想用搜索 zip 中的檔案, 並依照我要的條件篩選讀取.

[程式範例]:

一個 zip 中有資料夾abc, 有多個csv file
read.csv(unz(""abc.zip"", ""abc/abc.csv""))
read.csv(unz(""abc.zip"", ""abc/def.csv""))

我要怎樣讀取這個 zip 中的檔案清單呢？

[關鍵字]:

zip file allocate

--","R_Language"
"1874","M.1445927199.A.B2E","celestialgod","問題","Re: dendextend package使用問題",2015-10-27 14:26:37,NA,NA,"※ 引述《gbd37 (有夠瞎)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我想把圖中的setosa(25)、versicolor(82)的(25)、(82)那些消除掉: 僅剩下setosa、virginca、versicolor: 以方便我再跑我的DATA容易視覺判斷 謝謝Orz: [程式範例]:: 網址裡的: The 3 clusters from the “complete” method: vs the real species category的CODE與圖: http://tinyurl.com/nr3g5jc: [關鍵字]:dendextend、Hierarchical cluster你可以試試看 getAnywhere(""plot.dendrogram"")

可以看到input

function (x, type = c(""rectangle"", ""triangle""), center = FALSE,
    edge.root = is.leaf(x) || !is.null(attr(x, ""edgetext"")),
    nodePar = NULL, edgePar = list(), leaflab = c(""perpendicular"",
        ""textlike"", ""none""), dLeaf = NULL, xlab = """", ylab = """",
    xaxt = ""n"", yaxt = ""s"", horiz = FALSE, frame.plot = FALSE,
    xlim, ylim, ...)

要改的話就只有leaflab

只是選項式的，所以你只能用""perpendicular"", ""textlike"", ""none""其中一種

我試過無法自己修改

FYI

更多關於怎麼找source code 往上找我的文章吧~~~

--","R_Language"
"1875","M.1445926193.A.4F3","gbd37","問題","dendextend package使用問題",2015-10-27 14:09:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我想把圖中的setosa(25)、versicolor(82)的(25)、(82)那些消除掉

僅剩下setosa、virginca、versicolor

以方便我再跑我的DATA容易視覺判斷 謝謝Orz

[程式範例]:

網址裡的

The 3 clusters from the “complete” method

vs the real species category的CODE與圖http://tinyurl.com/nr3g5jc[關鍵字]:dendextend、Hierarchical cluster

--","R_Language"
"1876","M.1445868193.A.526","celestialgod","問題","Re: 21點",2015-10-26 22:03:11,NA,NA,"※ 引述《cano7127 (頭兒)》之銘言：: 程式諮詢: (做21點的遊戲): [軟體熟悉度]:: 新手: [問題敘述]:: 電腦對電腦玩，目前卡在: sample(52): cards<-sample(52): num<-cards%%13: num: (52\13的餘數分配數字): 要怎麼分配花色跟數字: 其實可以說根本還沒開始: 有人可以指點方向嗎?: 謝謝get_num = function(cards){
  factor(cards %% 13, levels = 0:12, labels = c(1:10, ""J"", ""Q"", ""K""))
}
get_suit = function(cards){
  factor((cards-1) %/% 13, levels = 0:3,
      labels = c(""spade"", ""heart"", ""diamend"",""club""))
}

desk = sample(1:52)
n_player = 2
num_cards_out = 0
player_cards = vector('list', n_player)
for (i in 1:n_player)
{
  player_cards[[i]] = data.frame(
    suit = get_suit(desk[(num_cards_out+1):(num_cards_out+2)]),
    num = get_num(desk[(num_cards_out+1):(num_cards_out+2)])
  )
  num_cards_out = num_cards_out + 2
}
calculate_points = function(cards){
  ## 計算點數
}


for (i in 1:n_player)
{
  while (calculate_points(player_cards[[i]]) < 21 && somerules)
  {
    # 發牌給玩家
  }
}

# 最後比大小...

--","R_Language"
"1877","M.1445866999.A.D0B","cano7127","問題","21點",2015-10-26 21:43:17,NA,NA,"程式諮詢
(做21點的遊戲)

[軟體熟悉度]:
新手

[問題敘述]:

電腦對電腦玩，目前卡在

sample(52)

cards<-sample(52)

num<-cards%%13
num

(52\13的餘數分配數字)

要怎麼分配花色跟數字

其實可以說根本還沒開始

有人可以指點方向嗎?

謝謝

--","R_Language"
"1878","M.1445821446.A.AAD","celestialgod","問題","Re: optim function",2015-10-26 09:04:01,NA,NA,"※ 引述《buzz20374 ()》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 想請教optim function的問題。?optim裡面的一個例子:: ## Rosenbrock Banana function: fr<-function(x){:     x1<-x[1]:     x2<-x[2]:     100*(x2-x1*x1)^2+(1-x1)^2: }: optim(c(-1.2,2),fr): 這裡我就想了很久，不太懂，: 第一個argument是par:initial values for the parameters to be optimized over你要先把fr看懂，他的x是向量

從裡面可以看得出來為長度二的向量，

x[1], x[2]分別assign到x1, x2

c(-1.2,2)是x1跟x2的初始值: 但我不太懂 c(-1.2,2)代表要找值的區間嗎?: 跑出來的結果也看不太懂:: >optim(c(-1.2,2),fr): $par: [1] 1.000260 1.000506最小值的解: $value: [1] 8.825241e-08最小值: $counts: function gradient:      195       NAnumber of function evaluation (fr的執行次數)

gradient 你沒提供所以沒有值: $convergence: [1] 0收斂情況編碼，詳細的在optim下方: $message: NULL如果非0，通常都有一些相關訊息

--","R_Language"
"1879","M.1445817162.A.A47","buzz20374","問題","optim function",2015-10-26 07:52:37,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的想請教optim function的問題。?optim裡面的一個例子:

## Rosenbrock Banana function
fr<-function(x){
    x1<-x[1]
    x2<-x[2]
    100*(x2-x1*x1)^2+(1-x1)^2
}

optim(c(-1.2,2),fr)

這裡我就想了很久，不太懂，

第一個argument是par:initial values for the parameters to be optimized over

但我不太懂 c(-1.2,2)代表要找值的區間嗎?

跑出來的結果也看不太懂:

>optim(c(-1.2,2),fr)

$par
[1] 1.000260 1.000506

$value
[1] 8.825241e-08

$counts
function gradient
     195       NA

$convergence
[1] 0

$message
NULL




--","R_Language"
"1880","M.1445581499.A.A1C","celestialgod","問題","Re: 畫圖基本問題",2015-10-23 14:24:55,NA,NA,"※ 引述《spiderway (spiderway)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我有兩筆資料兩個都長像這樣: 1 449 403 723 334 923 1040 1029 983 1 286 358 514 406 734 713 970 927: 1是界線，不用理他，後面有八筆數值。: 想畫圖成這樣:http://imgur.com/qweQ8ee: 兩欄就是兩筆: 列:每一格要分成八格小格，分別放每組的八個數值: 第一欄有點像這樣:: 449 403  723  334: 923 1040 1029 983: 286 358 514 406: 734 713 970 927: 小魯第一次問問題，身邊也沒人可以問，拜託各位幫忙: 我之前是有用過ggplot的polygon去畫過類似格子的圖: 但是因為要設定每一格的ID和x,y軸，會有個問題是: 一個格子有四個座標，value就會重複4次一樣的，改的時候四個都要改: 經驗不足，想不太到方法，請協大大們協助，謝謝。: [環境敘述]:: R version 3.1.3 (2015-03-09): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 7 x64 (build 7601) Service Pack 1: [關鍵字]:ggplot,plot我不知道ggplot2可不可以這樣畫

我以前要畫這種圖都用lattice的levelplot

library(lattice)
mats = replicate(4, abs(matrix(runif(8),2))*1000, simplify = FALSE)

mat = cbind(rbind(mats[[1]], NA, mats[[2]]), NA, rbind(mats[[3]], NA,
mats[[4]]))
DT = expand.grid(seq(0.5, 0.5 + ncol(mat) - 1, by = 1), seq(0.5, 0.5 +
nrow(mat) - 1, by = 1))
DT$val = as.vector(t(mat))
levelplot(val ~ Var1 + Var2, DT, col.regions = c(""white"",
rev(rainbow(30)[1:20])))

大概長這樣：http://i.imgur.com/aDbBNNy.png--","R_Language"
"1881","M.1445579669.A.89D","spiderway","問題","畫圖基本問題",2015-10-23 13:54:22,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我有兩筆資料兩個都長像這樣
1 449 403 723 334 923 1040 1029 983 1 286 358 514 406 734 713 970 927
1是界線，不用理他，後面有八筆數值。

想畫圖成這樣:http://imgur.com/qweQ8ee兩欄就是兩筆
列:每一格要分成八格小格，分別放每組的八個數值
第一欄有點像這樣:

449 403  723  334
923 1040 1029 983

286 358 514 406
734 713 970 927

小魯第一次問問題，身邊也沒人可以問，拜託各位幫忙
我之前是有用過ggplot的polygon去畫過類似格子的圖
但是因為要設定每一格的ID和x,y軸，會有個問題是
一個格子有四個座標，value就會重複4次一樣的，改的時候四個都要改
經驗不足，想不太到方法，請協大大們協助，謝謝。

[環境敘述]:
R version 3.1.3 (2015-03-09)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

[關鍵字]:ggplot,plot

--
Sent from my ibon.

--","R_Language"
"1882","M.1445476229.A.C5A","celestialgod","問題","Re: for 迴圈的平行運算",2015-10-22 09:10:25,NA,NA,"snow跟parallel要你自己弄cluster去跑

snowfall提供相對簡單的環境，可以嘗試一下

library(snowfall)
library(parallel)
inputs <- 1:256
wn = seq(0.25,1,0.05)
wn1 = seq(0.3,1,0.05)

processInput <- function(v) {
  sum(v)
}
inputs <- as.matrix(expand.grid(wn,wn1))
numCores <- detectCores()
sfInit(TRUE, numCores)
# sfExport(""variableName"")  # you may need this
# shLibrary(""packageName"") # you may need this
sfApply(inputs,1, processInput)
sfStop()※ 引述《tony255034 (5245566)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 目前有一個數學模型，每次要跑20秒，懲罰係數大約為16*16種組合: 想利用版上所說的RMPI來優化程式，但我是用雙for迴圈來代入懲罰係數的: 目前是想平行運算各組合，將各組合結果儲存到一個陣列，: 再去找出最小的AIC: [程式範例]:: wn = seq(0.25,1,0.05): wn1 = seq(0.25,1,0.05): AIC0 = 10^6: for(i in 1:length(wn)){:    for(j in 1:length(wn1)){:        list[AIC,BIC] = Model(wn[i],wn1[j]);:        if(AIC < AIC0){:            finalAIC = AIC:            finalBIC = BIC:        }:    }: }: [環境敘述]:: Win7 32bit R3.2.2: [關鍵字]:: Parallel Computing、RMPI--","R_Language"
"1883","M.1445436879.A.B61","mymiss312","問題","RODBC編碼問題詢問",2015-10-21 22:14:37,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

Oracle資料庫(編碼為big5)中所撈取的資料有中文內容，皆會變成亂碼，

有嘗試用DBMSencoding

[程式範例]:

con <- odbcConnect(dsn, uid = """", pwd = """", DBMSencoding=""big5"")

[環境敘述]:

Win7 64bit R 3.2.2

[關鍵字]:

RODBC、Encoding

--","R_Language"
"1884","M.1445435588.A.6DD","boy255034","問題","X11()儲存圖片問題",2015-10-21 21:53:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

已在X11()中放入有多個plot，想對他進行儲存圖片的動作

[程式範例]:

X11()

for(i in 1:4){
   plot(1:15,1:15,ylim=c(0.05,1.05),pch=16,ylab=""Cor"",xlab=""Index"",main=paste(
       ""test"",i))
}

[環境敘述]:

Win7 64bit R 3.1.2

[關鍵字]:

X11、plot

--","R_Language"
"1885","M.1445428297.A.5AF","tony255034","問題","for 迴圈的平行運算",2015-10-21 19:51:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

目前有一個數學模型，每次要跑20秒，懲罰係數大約為16*16種組合

想利用版上所說的RMPI來優化程式，但我是用雙for迴圈來代入懲罰係數的

目前是想平行運算各組合，將各組合結果儲存到一個陣列，

再去找出最小的AIC

[程式範例]:

wn = seq(0.25,1,0.05)

wn1 = seq(0.25,1,0.05)

AIC0 = 10^6

for(i in 1:length(wn)){
   for(j in 1:length(wn1)){
       list[AIC,BIC] = Model(wn[i],wn1[j]);
       if(AIC < AIC0){
           finalAIC = AIC
           finalBIC = BIC
       }
   }
}

[環境敘述]:

Win7 32bit R3.2.2

[關鍵字]:

Parallel Computing、RMPI

--","R_Language"
"1886","M.1445408012.A.7E1","swedrf0112","問題","Re: Shiny 使用javascript抓螢幕解析度",2015-10-21 14:13:30,NA,NA,"找到解決辦法了，原因應該是要告訴 JavaScript Shiny已經準備好了，
  所以要將UI.R的 script 修改為以下即可。

  tags$script('
      $(document).on(""shiny:connected"",function(e){
        var Width = window.screen.width;
        Shiny.onInputChange(""MonitorWidth"",Width);})
     ')※ 引述《swedrf0112 (M)》之銘言：: [問題類型]:程式諮詢: [軟體熟悉度]:入門: [問題敘述]::         想要找出使用者目前的解析度，:         因此使用 JavaScript 的 window.screen.width ，:         想將他傳進 Shiny 中變成一個MonitorWidth 變數，:         看了以下的參考連結，使用 Shiny.onInputChange 函數，:         會一直在 renderPrint 傳出 NULL的結果。:         http://tinyurl.com/ptsgpsq: [程式範例]:: shinyUI( bootstrapPage(:   tags$script(':       var Width = window.screen.width;:       Shiny.onInputChange(""MonitorWidth"", Width);:   '):   ,verbatimTextOutput(""results""): )): shinyServer(function(input, output, session) {:     output$results = renderPrint({:         input$MonitorWidth:     }): }): [環境敘述]:: [關鍵字]:Shiny JavaScript--","R_Language"
"1887","M.1445334133.A.950","swedrf0112","問題","Shiny 使用javascript抓螢幕解析度",2015-10-20 17:42:09,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:

        想要找出使用者目前的解析度，
        因此使用 JavaScript 的 window.screen.width ，
        想將他傳進 Shiny 中變成一個MonitorWidth 變數，
        看了以下的參考連結，使用 Shiny.onInputChange 函數，
        會一直在 renderPrint 傳出 NULL的結果。http://tinyurl.com/ptsgpsq[程式範例]:


shinyUI( bootstrapPage(

  tags$script('
      var Width = window.screen.width;
      Shiny.onInputChange(""MonitorWidth"", Width);
  ')

  ,verbatimTextOutput(""results"")

))

shinyServer(function(input, output, session) {

    output$results = renderPrint({
        input$MonitorWidth
    })

})

[環境敘述]:

[關鍵字]:Shiny JavaScript


--","R_Language"
"1888","M.1445313523.A.E19","celestialgod","問題","Re: 資料重新排序",2015-10-20 11:58:40,NA,NA,"※ 引述《CKAXI (我不在...)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我有一筆資料，想依照特定的變項重新排列: 原始：: fname   lname   item1   item3   id      item2   pid     item4   item5: Jada    W       4       5       258     3       NA      NA      NA: John    W       3       4       123     2       989     5       2: Tana    W       4       3       321     5       NA      NA      NA: Brooke  G       2       4       NA      NA      654     3       4: Ella    W       3       5       NA      NA      456     4       2: Johnna  B       3       4       NA      NA      369     4       3: 想排成：: fname   lname   id      pid     item1   item2   item3   item4   item5: Jada    W       258     NA      4       3       5       NA      NA: John    W       123     989     3       2       4       5       2: Tana    W       321     NA      4       5       3       NA      NA: Brooke  G       NA      654     2       NA      4       3       4: Ella    W       NA      456     3       NA      5       4       2: Johnna  B       NA      369     3       NA      4       4       3: [程式範例]::: 請問一下是否是使用""order""這個功能？麻煩版上高手提供提示，謝謝不知道你是不是說這樣：

df = read.table(textConnection(""
fname   lname   item1   item3   id      item2   pid     item4   item5
Jada    W       4       5       258     3       NA      NA      NA
John    W       3       4       123     2       989     5       2
Tana    W       4       3       321     5       NA      NA      NA
Brooke  G       2       4       NA      NA      654     3       4
Ella    W       3       5       NA      NA      456     4       2
Johnna  B       3       4       NA      NA      369     4       3""),
header=TRUE)

df[order(names(df))]

   fname  id item1 item2 item3 item4 item5 lname pid
1   Jada 258     4     3     5    NA    NA     W  NA
2   John 123     3     2     4     5     2     W 989
3   Tana 321     4     5     3    NA    NA     W  NA
4 Brooke  NA     2    NA     4     3     4     G 654
5   Ella  NA     3    NA     5     4     2     W 456
6 Johnna  NA     3    NA     4     4     3     B 369

我一般還是會建議用dplyr

library(dplyr)
df %>% select(lname, id, pid, starts_with('item'))

  lname  id pid item1 item3 item2 item4 item5
1     W 258  NA     4     5     3    NA    NA
2     W 123 989     3     4     2     5     2
3     W 321  NA     4     3     5    NA    NA
4     G  NA 654     2     4    NA     3     4
5     W  NA 456     3     5    NA     4     2
6     B  NA 369     3     4    NA     4     3

FYI

--","R_Language"
"1889","M.1445312742.A.E05","morefunmba","問題","0/1 dataframe可不可以分群?",2015-10-20 11:45:39,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的有一組dataset是國際合作的資料
都是0/1資料
ID表示個人
V1...V13表示合作的動機(複選題)
也就是這是一個個人跟合作動機的資料

ID      V1      V2      V3      V4      .....
A       0       1       1       0
B       1       0       0       1
C       1       1       1       0
D       0       0       1       1
E       0       0       1       0
.....


我想用分群的方式知道個人是否可以依據不同的動機被分群

但稍微爬文之後發現不管是Ward法或k-mean法都沒有辦法使用0/1資料
(好像是因為mead跟SD會有問題，就算不出距離)

有沒有其他分群的方式可以知道ABCDE....會被歸在哪一群?

卡關很久了...

我是用R-Studio最新版..

--","R_Language"
"1890","M.1445307709.A.0A0","CKAXI","問題","資料重新排序",2015-10-20 10:21:46,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我有一筆資料，想依照特定的變項重新排列

原始：
fname   lname   item1   item3   id      item2   pid     item4   item5
Jada    W       4       5       258     3       NA      NA      NA
John    W       3       4       123     2       989     5       2
Tana    W       4       3       321     5       NA      NA      NA
Brooke  G       2       4       NA      NA      654     3       4
Ella    W       3       5       NA      NA      456     4       2
Johnna  B       3       4       NA      NA      369     4       3

想排成：
fname   lname   id      pid     item1   item2   item3   item4   item5
Jada    W       258     NA      4       3       5       NA      NA
John    W       123     989     3       2       4       5       2
Tana    W       321     NA      4       5       3       NA      NA
Brooke  G       NA      654     2       NA      4       3       4
Ella    W       NA      456     3       NA      5       4       2
Johnna  B       NA      369     3       NA      4       4       3


[程式範例]:請問一下是否是使用""order""這個功能？麻煩版上高手提供提示，謝謝--","R_Language"
"1891","M.1445174468.A.822","Wush978","情報","Taiwan R User Group 三週年慶",2015-10-18 21:21:05,NA,NA,"報名網址：http://www.meetup.com/Taiwan-R/events/225968153/MLDM Monday 三歲了！

三年來，每逢週一，總有一群熱愛數據的傻子，不畏風雨地彼此分享、討論，各種各式各
樣有關資料的主題。在分享跟討論的過程中，也孕育了許許多多新的專案、講者，甚至是
完整的 R 教程－Taiwan R User Group 的 Officer 們衷心的感謝所有參與 MLDM
Monday 的講者，更感謝所有坐在台下的聽眾們，謝謝你們一路以來的支持！（酸宗痛？
）

第三年的週年慶，除了讓我們來回顧一下這一年來社群的發展及展望以外，特別安排了一
個讓大家在平常看似嚴肅（？）的議程之中，可以放鬆一下的活動－殘酷擂台閃電秀！

覺得講者在台上講的內容好難、聽不懂嗎？
想要跟大家分享自己平常玩資料的心得，卻覺得上台好緊張？
週年慶的今天！只要台上講者講的內容讓你聽不懂，就可以把他轟下台！
挑戰講得簡簡單單！募集分享「連猴子都聽得懂」的勇者！
歡迎大家當天報名我們的週年慶閃電講喔！

週年慶議程：
19:30 - 19:45 週年回顧（c3h3）
19:45 - 21:00 「我聽不懂！」殘酷擂台閃電講（Wush）

--","R_Language"
"1892","M.1445150358.A.632","trumulertrml","問題","計算個數",2015-10-18 14:39:16,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:應該是個很簡單的問題

1. 我有一個由""TRUE""跟""FALSE""兩種元素構成的matrix(m*n)

我想要計算這個matrix的每一列有幾個""TRUE""

也就是說我希望能得出m個數字，分別是每一列中""TRUE""的個數

2. 要算的是m*n的matrix中，每一列的最大值

也就是希望得出m個數字
[程式範例]:[環境敘述]:[關鍵字]:--","R_Language"
"1893","M.1445140452.A.B0C","Edster",NA,"read.csv 中 stringsAsFactors 擅自更動文字",2015-10-18 11:54:10,NA,NA,"剛剛在debug過程中，突然發現

base::read.csv(x, stringsAsFactors = TRUE)

對負數讀取會有不同的結果

一串應該是 numeric 的正數，其中或有一些負數與NA。

當 stringsAsFactors = TRUE

讀入的結果應該是 -0.4 會變成 (0.4) 然後文字型態會變成 character

必須用

base::read.csv(x, as.is=TRUE, stringsAsFactors = TRUE)

有人知道為何如此設計？

and, 有沒有辦法讓 base::read.table 中的 as.is 直接永久設定成 TRUE

--","R_Language"
"1894","M.1444922929.A.12F","MADNUG","問題","dplyr的小問題",2015-10-15 23:28:45,NA,NA,"[問題敘述]:
剛剛回去看一下dplyr的introduction
裡面有個小範例，若用forward-pipe operator就會出錯
搞不懂為啥，上來諮詢一下

[程式範例]:#Example in Introductionlibrary(nycflights13)library(dplyr)by_tailnum <- group_by(flights, tailnum)delay1 <- summarise(by_tailnum,count = n(),dist = mean(distance, na.rm = TRUE),delay = mean(arr_delay, na.rm = TRUE))filter(delay1, count > 20, dist < 2000)#Using forward-pipelibrary(magrittr)delay2 = flights %>% group_by(tailnum) %>%summarise(conut = n(),dist = mean(distance,na.rm=TRUE),delay = mean(arr_delay,na.rm = TRUE))filter(delay2, count > 20, dist < 2000)#Error: comparison (6) is possible only for atomic and list typesidentical(delay1,delay2)[1] FALSE請問為什麼兩種指令下出來的結果會不一樣啊?
都是group_by之後summarise
只不過一個step-by-step，一個用foward-pipe operator
有前輩能解惑一下嗎?
感謝了


--
        唔∼        ?    呃∼
    ○             ─○○
  _仄_○         √_/￣\
(欲拒還迎)    (排山倒海)

--","R_Language"
"1895","M.1444901630.A.479","celestialgod","問題","Re: 使用套件中的指令時，能看到原始碼嗎？",2015-10-15 17:33:47,NA,NA,"回一篇有點久的文章

我最近在advanced R 看到pryr的使用 可以看到c source code

就想說分享一下，剛好有這篇，就直接在這篇上延伸了

1. 找function對應的套件以及source code

getAnywhere 可以幫助你把很多東西找到

像是 我輸入  getAnywhere('lm')

會跑出這樣的訊息：

A single object matching ‘lm’ was found
It was found in the following places
  package:stats
  namespace:stats
with value

function (formula, data, subset, weights, na.action, method = ""qr"",
    model = TRUE, x = FALSE, y = FALSE, qr = TRUE, singular.ok = TRUE,
    contrasts = NULL, offset, ...)
{
   blah blah

我就可以直接在裡面看到程式了

但是在裡頭的子程式呢？

一樣透過getAnywhere可以辦到

像是你可以在lm的source code看到

lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...)

或是

lm.wfit(x, y, w, offset = offset, singular.ok = singular.ok, ...)

這時候 你一樣輸入 getAnywhere('lm.wfit')

你就可以看到對應的code了

你可以會想說很多人都會教我直接打function name

那樣不是比較快，不用多記一個函數

但是有些函數 你沒有輸入對應的namespace從裡面找是不會跑出來的

舉例來說：

library(plyr)
splitter_d # you will get nothing
getAnywhere('splitter_d') # you will see the following information

A single object matching ‘splitter_d’ was found
It was found in the following places
 namespace:plyr
with value

function (data, .variables = NULL, drop = TRUE)
{
   blah blah


在多數情況下，這種方式比較簡單方便

你也不用去查說你要找的函數在哪一個package裡頭

提到同名含數於不同package的情況

就還要提到getAnywhere的好處

有用dplyr的人 都知道在載入dplyr時會跑出這個

Attaching package: ‘dplyr’

The following objects are masked from ‘package:stats’:

    filter, lag

The following objects are masked from ‘package:base’:

    intersect, setdiff, setequal, union

這意思就是 package:stats裡頭有函數也叫做filter跟lag (下面那行同理)

dplyr的載入，會把同名函數蓋過去

這時候dplyr:::lag就取代了stats:::lag

你在使用時，除非你特別註明是用stats:::lag

否則都會使用dplyr:::lag

有點離題，回到getAnywhere

我們透過getAnywhere還可以查到不同package的同名函數有哪些

輸入  getAnywhere('lag') 會看到下列訊息

2 differing objects matching ‘lag’ were found
in the following places
  package:dplyr
  package:stats

你就知道lag有兩個套件同時都有

而且你如果要看source code可以透過 []來看

getAnywhere('lag')[1]會跳出 dplyr的

而 getAnywhere('lag')[2]會跳出 stats的

順序就跟你getAnywhere出現的一樣

2. .C, .Call, .Fortran那些是什麼

如果常看source code的話

會發現R function裡面 會出現

.C, .Call, .Fortran, .External, .Internal, or .Primitive

這幾種，這些都是已經被編譯(compile)過了，然後直接載入到R session中

而透過 pryr:::show_c_source 你可以看到 .Internal, or .Primitive

例如，輸入 getAnywhere('+')

你會得到下列資訊

A single object matching ‘+’ was found
It was found in the following places
  package:base
  namespace:base
with value

function (e1, e2)  .Primitive(""+"")

這時候用pryr就可以看到 ""+""的c source code

library(pryr)
show_c_source(.Primitive(""+""))

然後會跳出  + is implemented by do_arith with op = PLUSOP

告訴你 + 是透過do_arith執行的

同時連到一個github的網站

然後給你兩個搜尋結果

1. wch/r-source – arithmetic.c

2. wch/r-source – names.c

你可以看到在第一個裡面會看到 do_arith這個關鍵字被反白了

點arithmetic.c進去看看 就可以找到下面這個：

(快一點的方法就直接CTRL+F 輸入do_arith <- 你可以再R視窗裡面看到這個名字)

SEXP attribute_hidden do_arith(SEXP call, SEXP op, SEXP args, SEXP env)
{
    SEXP ans, arg1, arg2;
    int argc;

    if (args == R_NilValue)
        argc = 0;
    else if (CDR(args) == R_NilValue)
        argc = 1;
    else if (CDDR(args) == R_NilValue)
        argc = 2;
    else
        argc = length(args);
    arg1 = CAR(args);
    arg2 = CADR(args);

    blah blah


讓我們再換一個例子

輸入 getAnywhere('table')

在最後幾行的地方，你會看到

y <- array(tabulate(bin, pd), dims, dimnames = dn)

我們在一次  getAnywhere('tabulate')

就會發現 我們找到 .Internal了

在最後一行的地方 .Internal(tabulate(bin, nbins))

透過pryr的show_c_source(.Internal(tabulate(bin, nbins)))

一樣會連到一個網頁

給你兩個搜尋結果

1. wch/r-source – util.c

2. wch/r-source – names.c

你可以在第一個結果裡面看到 do_tabulate 被反白了

所以你可以點進去 然後CTRL+F搜尋 do_tabulate

(記得點util.c 點前面是連到該套件的github位置)

就可以跟我一樣看到

SEXP attribute_hidden do_tabulate(SEXP call, SEXP op, SEXP args, SEXP rho)
{
    checkArity(op, args);
    SEXP in = CAR(args), nbin = CADR(args);
    if (TYPEOF(in) != INTSXP)  error(""invalid input"");
    R_xlen_t n = XLENGTH(in);
    /* FIXME: could in principle be a long vector */
    int nb = asInteger(nbin);
    if (nb == NA_INTEGER || nb < 0)
        error(_(""invalid '%s' argument""), ""nbin"");
    SEXP ans = allocVector(INTSXP, nb);
    int *x = INTEGER(in), *y = INTEGER(ans);
    if (nb) memset(y, 0, nb * sizeof(int));
    for(R_xlen_t i = 0 ; i < n ; i++)
        if (x[i] != NA_INTEGER && x[i] > 0 && x[i] <= nb) y[x[i] - 1]++;
    return ans;
}

3. UseMethods是什麼

你可以在getAnywhere('predict')中發現它

提到methods，就會比較複雜一點了，在耐著點性子看完吧~~


R也有所謂的object-oriented system (以下簡稱 OO system)

OO應該很多人會在C++裡面看到

就是我可以定義 class (類別)

然後去定義 對應的 methods (方法)

在透過 class 創立 objects 去使用這些方法

這樣可以達到code 重新再利用的功能

也可以避免過多的輸入判定的問題 以及

要重複創見各種不同名字的function以對應不同的情況

(OO的好處 我只有大概的概念，更詳細可能請其他大大補充)

可以直接透過對應的class

舉例來說 predict可以用在各式各樣的model結果

就是透過class來決定input是誰

getAnywhere('predict') 會出現 UseMethod(""predict"")

我們可以來看看lm出來物件的class是什麼

x <- rnorm(100)
y <- 1 + 2 * x + rnorm(100)
fit <- lm(y ~ x)
class(fit) # 透過這個check fit的class
# [1] ""lm""

你就會看到fit具有lm class

這時候就可以看predict運用於lm時的方法了

用 function name 然後 加上一個 .  再加上class的名字通常就可以看到source code

其他情況，我等等在補充

輸入 getAnywhere('predict.lm') 就會看到下列資訊

A single object matching ‘predict.lm’ was found
It was found in the following places
  package:stats
  registered S3 method for predict from namespace stats
  namespace:stats
with value

function (object, newdata, se.fit = FALSE, scale = NULL, df = Inf,
    interval = c(""none"", ""confidence"", ""prediction""), level = 0.95,
    type = c(""response"", ""terms""), terms = NULL, na.action = na.pass,
    pred.var = res.var/weights, weights = 1, ...)
{
  blah blah

同理可證，試試看找出glm出來的物件class然後再找predict看看

再來，我們試試看 fitted這個函數

輸入 getAnywhere('fitted')

你會看到他一樣有 UseMethod

A single object matching ‘fitted’ was found
It was found in the following places
  package:stats
  namespace:stats
with value

function (object, ...)
UseMethod(""fitted"")
<bytecode: 0x0000000014eea978>
<environment: namespace:stats>

你輸入getAnywhere('fitted.lm')

會得到no object named ‘fitted.lm’ was found

那這樣是不是就看不到fitted.lm的source code了？

答案：不是，其實有時候他會有預設方法

可以讓很多東西都透過預設方法就好

我就不用獨立寫一個對應的方法了

因此，你可以先用methods來確定他是不是有預設方法

輸入  methods('fitted') 會看到就有fitted.default了

然後沒有對應lm的方法，因此fitted(fit)就會用default的方法了

methods('fitted')
[1] fitted.default*       fitted.isoreg*        fitted.kmeans*
fitted.nls*           fitted.smooth.spline*

最後輸入 getAnywhere('fitted.default')

就可以看到fitted怎麼樣把lm的fitted value叫出來

A single object matching ‘fitted.default’ was found
It was found in the following places
  registered S3 method for fitted from namespace stats
  namespace:stats
with value

function (object, ...)
{
    xx <- if (""fitted.values"" %in% names(object))
        object$fitted.values
    else object$fitted
    napredict(object$na.action, xx)
}
<bytecode: 0x0000000017242a58>
<environment: namespace:stats>

然後，R的OO system不只有我們看到的這個

我們現在看到的是所謂的S3，其他還有S4, Reference classes (RC)等

那S4跟RC就請移駕到advanced R的網站一窺究竟吧

連結：http://adv-r.had.co.nz/OO-essentials.htmlS4跟RC都有對應找方法的函數也可以透過getAnywhere去看source code

像是最常看到的S4就是Matrix這個套件

你也同樣可以getAnywhere('Matrix') 看到下列資訊

A single object matching ‘Matrix’ was found
It was found in the following places
  package:Matrix
  namespace:Matrix
with value

function (data = NA, nrow = 1, ncol = 1, byrow = FALSE, dimnames = NULL,
    sparse = NULL, doDiag = TRUE, forceCheck = FALSE)
{
  blah blah


然後

沒了

謝謝您的欣賞XDD: [問題敘述]:: 各位前輩好，之前有在版上詢問過如何透過R產生作假的答題反應。: 這次問的感覺是一個更沒有sense的問題，就是如標題所示：: 我們在啟用package中的指令，幫我們估計時，: 有辦法看到當初開法者所撰寫的語法嗎？如估算的公式是怎麼寫的.....: 有問過系上的學長，他說套件的網址通常都會有相關資訊，: 但無奈不曉得是我眼殘，就是找不到。: 之所以想知道，是想瞭解公式這麼寫的，以及有時候會需要適當修改。: 麻煩前輩提供相關資訊了，謝謝~--","R_Language"
"1896","M.1444897369.A.7A8","ruisme","問題","maptools安裝問題",2015-10-15 16:22:46,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
如標題所述，因為學校課程需要，老師提供安裝maptools的方法，我輸入之後電腦要求

選擇安裝來源，我選擇0-Cloud 安裝，安裝完畢後輸入library(maptools)，R說找不到

這個東西，而且後續的所有動作都無法進行，可是上面明明已經回報安裝完成啊?

是不是安裝位置跟讀取位置不同呢?

附圖為安裝頁面http://tinyurl.com/nkrvnve麻煩有安裝過的大大替我解個惑  謝謝!!

[環境敘述]:
Rx64 3.1.3


[關鍵字]:

--","R_Language"
"1897","M.1444875424.A.8E3","celestialgod","問題","Re: 找出向量的轉折處回傳index",2015-10-15 10:17:01,NA,NA,"※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 問題：找出向量的三個轉折處然後回傳此三個index及該值: 問題說明：如果今有一向量:           v=c(1,2,3,4,5,6,7,6,5,4,3,2,1,2,3,4,5,6,7,6,5):                           *           *           *:           我希望能回傳index=7,13,19 value=7,1,7: 目前想到的解決方法就是用後面的數字減前面的數字 然後看哪個index出現負值: 但這個方法好像只能偵測一向量1index: 對於要找出一向量3index 還沒想到該怎麼做: 有勞各位前輩指導解惑 感謝~其實想到diff跟出現小於0已經快得到答案了XD

最後就是比看看跟前面是不是一樣是負的

v=c(1,2,3,4,5,6,7,6,5,4,3,2,1,2,3,4,5,6,7,6,5)
tmp = diff(v) < 0
(index = which(tmp[-1L] != tmp[-length(tmp)]) + 1)
# 7 13 19
# 不加1就是轉折前的點
(value = v[index])
# 7 1 7

PS: (a = 5) 等於是  a = 5;print(a)

PS2: 這從rle延伸出來的想法，多看看source code有助身心健康!?

use pipe operator to do this:

library(magrittr)
index = v %>% diff %>% is_less_than(0) %>% {
    .[-1L] != .[-length(.)]
  } %>% which %>% add(1)
value = v[index]


update:

index = which(diff(diff(v)) != 0 ) + 1
value = v[index]


--","R_Language"
"1898","M.1444874587.A.6E7","sinclairJ","問題","找出向量的轉折處回傳index",2015-10-15 10:03:05,NA,NA,"問題：找出向量的三個轉折處然後回傳此三個index及該值
問題說明：如果今有一向量
          v=c(1,2,3,4,5,6,7,6,5,4,3,2,1,2,3,4,5,6,7,6,5)
                          *           *           *

          我希望能回傳index=7,13,19 value=7,1,7

目前想到的解決方法就是用後面的數字減前面的數字 然後看哪個index出現負值
但這個方法好像只能偵測一向量1index
對於要找出一向量3index 還沒想到該怎麼做

有勞各位前輩指導解惑 感謝~

--","R_Language"
"1899","M.1444801404.A.806","celestialgod","問題","Re: 有關時間序列資料計算DTW問題",2015-10-14 13:43:22,NA,NA,"笨方法：

每一種長度的距離都算一次，存進distMatrix裡面

不知道怎麼加速(攤手

library(dtw)
test=read.csv(""C:\\Users\\user_148\\Downloads\\test.csv"", header = FALSE)
test = as.matrix(test)
dtw_f = function(i, j){
  dtw(test[!is.na(test[,i]), i],test[!is.na(test[,j]),j])$distance
}
loc_mat = as.matrix(expand.grid(1:ncol(test.fr), 1:ncol(test.fr)))
distMatrix = mapply(function(x,y) dtw_f(x,y), loc_mat[,1], loc_mat[,2])
dim(distMatrix) = rep(ncol(test), 2)※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 資料檔：https://www.dropbox.com/s/3wh4o9c0l5pplwq/test.csv?dl=0: 資料檔說明：資料檔維度為60*99，有99條時間序列:             (每條時間序列長度不一，長度最長為60(可視為60個單位時間點)): 問題描述：因現實資料的關係，有些時間序列會有NA值:        但查過文獻之後，這不影響分析:        小弟主要要做的分析是1 by 1計算這些時間序列的相似性:        (而DTW就是一種可以計算兩條序列不等長(也可等長)的相似性之計算距離方法):        而得出99*99的距離矩陣之後 再對距離矩陣做資料探勘中的分群: 問題：因時間序列有NA值，所以不太能用自動化的方式一次完成99*99分析:       小弟原本的程式碼如下:       test=read.csv("""") #讀檔:       library(dtw):       DtstMatrix=dist(test,method=""DTW"") #執行這行會出現錯誤:       所以小弟用比較笨的方法，用眼睛一條一條看，然把NA的值取出來再做計算:       小弟此時的程式碼如下:       eg1.如果要計算等長的序列:       d1=dtw(test[,5],test[,6]) #以計算第5與第6條序列相似性為例:        d1$distance  #看兩條序列的距離，越小表示越相似:       eg2.如果要計算不等長的序列:       d2=dtw(test[,5],test[c(1:45),7]) #以計算第5與第7條序列相似性為例: 不過小弟要每條序列都與每條序列做一次計算然後得出99*99的距離矩陣: 距離矩陣示意圖如下（28*28為例）: http://i.imgur.com/Tp5we4U.jpg: 不知道各位前輩有沒有什麼較方便的方法可以教導小弟一下--","R_Language"
"1900","M.1444794197.A.74F","sinclairJ","問題","有關時間序列資料計算DTW問題",2015-10-14 11:43:13,NA,NA,"資料檔：https://www.dropbox.com/s/3wh4o9c0l5pplwq/test.csv?dl=0資料檔說明：資料檔維度為60*99，有99條時間序列
            (每條時間序列長度不一，長度最長為60(可視為60個單位時間點))

問題描述：因現實資料的關係，有些時間序列會有NA值
       但查過文獻之後，這不影響分析
       小弟主要要做的分析是1 by 1計算這些時間序列的相似性
       (而DTW就是一種可以計算兩條序列不等長(也可等長)的相似性之計算距離方法)
       而得出99*99的距離矩陣之後 再對距離矩陣做資料探勘中的分群

問題：因時間序列有NA值，所以不太能用自動化的方式一次完成99*99分析
      小弟原本的程式碼如下
      test=read.csv("""") #讀檔
      library(dtw)
      DtstMatrix=dist(test,method=""DTW"") #執行這行會出現錯誤

      所以小弟用比較笨的方法，用眼睛一條一條看，然把NA的值取出來再做計算
      小弟此時的程式碼如下
      eg1.如果要計算等長的序列
      d1=dtw(test[,5],test[,6]) #以計算第5與第6條序列相似性為例
       d1$distance  #看兩條序列的距離，越小表示越相似

      eg2.如果要計算不等長的序列
      d2=dtw(test[,5],test[c(1:45),7]) #以計算第5與第7條序列相似性為例

不過小弟要每條序列都與每條序列做一次計算然後得出99*99的距離矩陣
距離矩陣示意圖如下（28*28為例）http://i.imgur.com/Tp5we4U.jpg不知道各位前輩有沒有什麼較方便的方法可以教導小弟一下


--","R_Language"
"1901","M.1444736416.A.E06","celestialgod","分享","purrr map例子以*apply重寫比較",2015-10-13 19:40:10,NA,NA,"今天在寫map的時候，一直在想，我根本就是在寫lapply (or say plyr:::llply)

(purrr的map多支援了magrittr的運算(主要是.的運用))

我在想有沒有人做過類似比較

在網路上找到一篇文章

他做了一個benchmark

速度上幾乎差不多

有興趣可以點下方網址查看http://tinyurl.com/p8bot26--","R_Language"
"1902","M.1444724507.A.2BF","celestialgod","問題","Re: merge 3 tables with summing common var",2015-10-13 16:21:44,NA,NA,"※ 引述《celestialgod (天)》之銘言：: ※ 引述《celestialgod (天)》之銘言：: : 簡短但是慢很多，提供參考XD: : 你的方法在我i5第一代電腦上測試，大概是0.36秒，下面最快方法大概是2.9秒: : 我測了一下，主要是在group_by做和的時候比較慢: : library(plyr): : library(dplyr): : library(tidyr): : library(data.table): : # rbind.fill是參考參考網址的: 原本這裡會出問題，稍微修改之後就正常了，可是速度會驟降: t = proc.time(): wide_table = rbind.fill(list(x, y, z)) %>% tbl_dt(FALSE): # 這行是錯的，會出現NA+NA+NA = 0的情況: # sum_without_na = function(x) sum(x, na.rm = TRUE): sum_without_na = function(x) ifelse(all(is.na(x)), NA_integer_,:   sum(x, na.rm = TRUE)): out = wide_table %>% group_by(SP) %>% summarise_each(funs(sum_without_na)): proc.time() - t # 8.66 seconds: : # 參考下面網址的: : t = proc.time(): : wide_table = rbind.fill(list(x, y, z)) %>% tbl_dt(FALSE): : out2 = ddply(wide_table, .(SP), function(x) colSums(x, na.rm = TRUE)): : proc.time() - t # 50 seconds: : # 利用tidyr做的，感覺很費工~""~: : t = proc.time(): : out3 = list(x, y, z) %>% llply(function(x){: :   gather(x, variable, values, -SP) %>%: :     mutate(variable = as.character(variable)): :   }) %>% bind_rows %>% group_by(SP, variable) %>%: :   summarise(values = sum(values)) %>%: :   spread(variable, values): : proc.time() - t # 3.9 seconds: : 參考網址：http://tinyurl.com/o7gbeej上一篇的內容：

我把cy大的code改成dplyr

然後另外多一寫一個Rcpp 去做aggregate的動作 (完整程式後面有連結)

把要加總的data.frame個別抓出來加總

原本想說可以很精簡的方式完成

最後發現我寫得很複雜(嘆氣

程式：http://pastebin.com/Q7XEpTnb本篇：

我終於毫無懸念的找到比較快又不會太複雜的方法....

感謝Edster大大提供了rowSums的想法，進而有了這一個方法

因為這個用了purrr，所以就另開了一篇文章...

增加30％的速度左右，因為是一次merge，而非兩兩merge

再補一個測試數據：

在多一個data.table w

w <- matrix(sample(2e6), 1e5) %>% data.table() %>%
     setnames(1:20,sample(LETTERS,20)) %>% .[,SP:=seq_len(nrow(.))]

cy大的方法
   user  system elapsed
   0.76    0.09    0.87

上一篇Rpp的方法
   user  system elapsed
   0.98    0.05    1.03

rbind.fill with group_by, summarise
   user  system elapsed
   9.06    0.04    9.22

tidyr
    user  system elapsed
    2.16    0.27    2.48

本篇
    user  system elapsed
    0.31    0.05    0.36

果然一起做之後，比較不會隨著兩兩merge次數變多，而效率drop down過快

如同do.call 跟 Reduce......

好讀版：http://pastebin.com/VZisufKC10/14 00:45新增

加一個Rcpp版本:http://pastebin.com/ZhhiV6VSuser  system elapsed
    1.46    0.11    1.57

速度瓶頸在處理兩兩相加，跳過NA的地方
(我如果直接用armadillo的vector相加只要0.13秒)

這裡只要處理好，cpp應該可以加速不少

10/14 01:23新增

應該是最後一個版本了XDD

最後用RcppArmadillo實現NA相加

    user  system elapsed
    0.04    0.03    0.12

程式：http://pastebin.com/piu2Qxcd我覺得這已經很快很快了XDD

沒研究下去的必要了~~~

10/14 02:20

以上結果都是在我i5-760的電腦上執行的結果

最後給整合版本的程式:http://pastebin.com/HthDsLnz最後程式都以整合版本為主

整合版本程式是在[email<U+00A0>protected]電腦上跑的結果

i7電腦的session information 如下：

Revolution R Open 3.2.2
Default CRAN mirror snapshot taken on 2015-08-27
The enhanced R distribution from Revolution Analytics
Visit mran.revolutionanalytics.com/open for information
about additional features.

Multithreaded BLAS/LAPACK libraries detected. Using 4 cores for math
algorithms.

R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] RcppArmadillo_0.5.400.2.0 Rcpp_0.12.0
[3] magrittr_1.5              purrr_0.1.0
[5] tidyr_0.2.0               dplyr_0.4.2
[7] plyr_1.8.3                data.table_1.9.4
[9] RevoUtilsMath_3.2.2

loaded via a namespace (and not attached):
 [1] assertthat_0.1  chron_2.3-47    R6_2.1.1        DBI_0.3.1
 [5] stringi_0.5-5   lazyeval_0.1.10 reshape2_1.4.1  tools_3.2.2
 [9] stringr_1.0.0   parallel_3.2.2

--","R_Language"
"1903","M.1444722039.A.6EB","memphis","問題","Re: merge 3 tables with summing common var",2015-10-13 15:40:37,NA,NA,"速度看起來還好? 還是我搞錯cywhale想要做的是什麼?

library(data.table)
library(dplyr)

# testing data, assuming merge by key = ""SP""
set.seed(NULL)
x <- matrix(sample(1e6), 1e5) %>% data.table() %>%
     setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]
y <- matrix(sample(1e5), 1e4) %>% data.table() %>%
     setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]
z <- matrix(sample(4e5), 2e4) %>% data.table() %>%
     setnames(1:20,sample(LETTERS,20)) %>% .[,SP:=seq_len(nrow(.))]



###### mycode

t = proc.time()

xyz <- x %>% full_join(y, by='SP') %>% full_join(z, by='SP') %>%
as.data.table()

mut_list <- unique(substr(names(xyz)[grep('.', names(xyz), fix=T)],1,1))
for(i in 1:length(mut_list)){
    mycols <- grep(mut_list[i], names(xyz), fix=T)
    xyz[,mySum := rowSums(.SD), .SDcols=mycols]
    xyz[,(mycols):= NULL]
    names(xyz)[names(xyz)==""mySum""] <- mut_list[i]
    cat(paste0(mut_list[i]),""\n"")
}

proc.time() - t※ 引述《cywhale (cywhale)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: 好像在哪曾看過較簡易的寫法或function，但一時想不起，也沒找到，寫了比較複雜的: code，想請問是否有更快或更簡易的方式做到: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: Merge some data tables by the same key, 但若有相同的variables則合併時要相加，: 不管NA，data tables彼此間的行、列數均不同: [程式範例]::
:: library(data.table): library(dplyr): # testing data, assuming merge by key = ""SP"": set.seed(NULL): x <- matrix(sample(1e6), 1e5) %>% data.table() %>%:      setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]: y <- matrix(sample(1e5), 1e4) %>% data.table() %>%:      setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]: z <- matrix(sample(4e5), 2e4) %>% data.table() %>%:      setnames(1:20,sample(LETTERS,20)) %>% .[,SP:=seq_len(nrow(.))]: # function.. try to write Rcpp function..: require(Rcpp): cppFunction('NumericVector addv(NumericVector x, NumericVector y) {:             NumericVector out(x.size());:             NumericVector::iterator x_it,y_it,out_it;:             for (x_it = x.begin(), y_it=y.begin(), out_it = out.begin();:                  x_it != x.end(); ++x_it, ++y_it, ++out_it) {:               if (ISNA(*x_it)) {:                 *out_it = *y_it;:               } else if (ISNA(*y_it)) {:                 *out_it = *x_it;:               } else {:                 *out_it = *x_it + *y_it;:               }:             }:             return out;}'): ### merge two data.table with different columns/rows,: ### and summing identical column names: outer_join2 <- function (df1,df2,byNames) {:   tt=intersect(colnames(df1)[-match(byNames,colnames(df1))],:                colnames(df2)[-match(byNames,colnames(df2))]):   df <- merge(df2,df1[,-tt,with=F],by=byNames,all=T):   dt <- merge(df2[,-tt,with=F],df1[,c(byNames,tt),with=F],by=byNames,all=T) %>%:         .[,tt,with=F]:   for (j in colnames(dt)) {set(df,j=j,value=addv(df[[j]],dt[[j]]))}:   return (df): }: # get results, 參考c大 #1LaHm_aH (R_Language): system.time(Reduce(function(x, y) outer_join2(x, y, byNames=""SP""), list(x,y,z))): 用了較多行code來完成這件事，速度上似乎還可以，但不確定是否有更好的寫法？謝謝！: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"1904","M.1444659636.A.249","Edster","問題","Re: merge 3 tables with summing common var",2015-10-12 22:20:34,NA,NA,"不會複雜的寫法，簡單一點就好，好懂好維護，雖然merge爆慢。
只會這樣(原本想用do.call, 結果不能設定 do.call(merge, data, all = T).
看哪位兄臺能教教 do.call 之中如何設定""what""其餘的參數

a=cbind(""A""=sample(1:100,5), ""B""=sample(1:50,5), ""a""=rnorm(5), ""e""=rnorm(5))
b=cbind(""A""=sample(1:100,10),""B""=sample(1:50,10),""b""=rnorm(10),""e""=rnorm(10))
c=cbind(""A""=sample(1:100,15),""B""=sample(1:50,15),""c""=rnorm(15),""e""=rnorm(15))
d=cbind(""A""=sample(1:100,20),""B""=sample(1:50,20),""d""=rnorm(20),""e""=rnorm(20))

L = list(a,b,c,d)
merge(L[[1]],L[[2]],by=c(""A""))
merge(L[[1]],L[[2]],by=c(""A"",""B""))
merge(L[[1]],L[[2]],by=c(""A"",""B""),all=T)

MultiMerge = function(L, by){
  M=L[[1]]
  for(i in 2:length(L))
    M = merge(M,L[[i]],by=by,all=T)
  return(M)
}
M=MultiMerge(L,by=c(""A"",""B""))

dataCol = c(""e."")
M = data.frame(M[,-grep(dataCol, colnames(M))],
               m = rowSums(M[,grep(dataCol, colnames(M))], na.rm=T))


抱歉我一開始誤會了，原樓主還需要把相同變數名稱的列在固定欄位相加。
不過對我來說那已經不叫merge，在我的領域呢，這叫做update

比如說兩張 raster 地圖(extent並不相同)套疊並相加。

如果你的A, B兩欄是唯一的，例如地圖的座標，
用match在數個data.frame中找對應更快。

--","R_Language"
"1905","M.1444656133.A.244","tony255034","問題","Error: Duplicate identifiers for rows",2015-10-12 21:22:10,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:

使用tidyr的spread進行ROW TO COLUMN時，出現Error:Duplicate identifers for rows

有些case可以執行但有些會出現這個錯誤

不知道這個情形要如何debug

(資料筆數非常多，是否應找有無重複的!?  不太知道要如何找有無重複的?!)

[程式範例]:

spread(d,factor,num)

[環境敘述]:Win7 32bit R3.2.2[關鍵字]:tidyr、spread--","R_Language"
"1906","M.1444654393.A.13F","tony255034","問題","summarise後如何保留其他欄位?",2015-10-12 20:53:10,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:

想先將多個欄位進行group by後再進行summarise，此外亦想保留其他欄位

如：(以下資料為舉例)

school  class  buliding sex name     score
  a       1       b_A    M  Tony      100
  a       2       b_A    M  Sam        90
  b       4       b_B    F  Lily       80
  b       4       b_B    F  Claire     70
  c       5       b_C    M  Jack       60
  c       5       b_C    F  Jennis     50

[程式範例]:

d2 <- group_by(d1,school,buliding)

d1 <- summarise(d2,score = max(score))

[環境敘述]:

Win7 32bit R3.2.2
[關鍵字]:

dplyr、group_by、summarise

--","R_Language"
"1907","M.1444642584.A.E62","celestialgod","問題","Re: merge 3 tables with summing common var",2015-10-12 17:36:21,NA,NA,"※ 引述《cywhale (cywhale)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: 好像在哪曾看過較簡易的寫法或function，但一時想不起，也沒找到，寫了比較複雜的: code，想請問是否有更快或更簡易的方式做到: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: Merge some data tables by the same key, 但若有相同的variables則合併時要相加，: 不管NA，data tables彼此間的行、列數均不同: [程式範例]::
:: library(data.table): library(dplyr): # testing data, assuming merge by key = ""SP"": set.seed(NULL): x <- matrix(sample(1e6), 1e5) %>% data.table() %>%:      setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]: y <- matrix(sample(1e5), 1e4) %>% data.table() %>%:      setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]: z <- matrix(sample(4e5), 2e4) %>% data.table() %>%:      setnames(1:20,sample(LETTERS,20)) %>% .[,SP:=seq_len(nrow(.))]: # function.. try to write Rcpp function..: require(Rcpp): cppFunction('NumericVector addv(NumericVector x, NumericVector y) {:             NumericVector out(x.size());:             NumericVector::iterator x_it,y_it,out_it;:             for (x_it = x.begin(), y_it=y.begin(), out_it = out.begin();:                  x_it != x.end(); ++x_it, ++y_it, ++out_it) {:               if (ISNA(*x_it)) {:                 *out_it = *y_it;:               } else if (ISNA(*y_it)) {:                 *out_it = *x_it;:               } else {:                 *out_it = *x_it + *y_it;:               }:             }:             return out;}'): ### merge two data.table with different columns/rows,: ### and summing identical column names: outer_join2 <- function (df1,df2,byNames) {:   tt=intersect(colnames(df1)[-match(byNames,colnames(df1))],:                colnames(df2)[-match(byNames,colnames(df2))]):   df <- merge(df2,df1[,-tt,with=F],by=byNames,all=T):   dt <- merge(df2[,-tt,with=F],df1[,c(byNames,tt),with=F],by=byNames,all=T) %>%:         .[,tt,with=F]:   for (j in colnames(dt)) {set(df,j=j,value=addv(df[[j]],dt[[j]]))}:   return (df): }: # get results, 參考c大 #1LaHm_aH (R_Language): system.time(Reduce(function(x, y) outer_join2(x, y, byNames=""SP""), list(x,y,z))): 用了較多行code來完成這件事，速度上似乎還可以，但不確定是否有更好的寫法？謝謝！: [關鍵字]::: 選擇性，也許未來有用:

簡短但是慢很多，提供參考XD

你的方法在我i5第一代電腦上測試，大概是0.36秒，下面最快方法大概是2.9秒

我測了一下，主要是在group_by做和的時候比較慢

library(plyr)
library(dplyr)
library(tidyr)
library(data.table)

# rbind.fill是參考參考網址的
t = proc.time()
wide_table = rbind.fill(list(x, y, z)) %>% tbl_dt(FALSE)
# 這行是錯的，會出現NA+NA+NA = 0的情況
# sum_without_na = function(x) sum(x, na.rm = TRUE)
sum_without_na = function(x) ifelse(all(is.na(x)), NA_integer_,
  sum(x, na.rm = TRUE))
out = wide_table %>% group_by(SP) %>% summarise_each(funs(sum_without_na))
proc.time() - t # 2.9 seconds

# 參考下面網址的
t = proc.time()
wide_table = rbind.fill(list(x, y, z)) %>% tbl_dt(FALSE)
out2 = ddply(wide_table, .(SP), function(x) colSums(x, na.rm = TRUE))
proc.time() - t # 50 seconds

# 利用tidyr做的，感覺很費工~""~
t = proc.time()
out3 = list(x, y, z) %>% llply(function(x){
  gather(x, variable, values, -SP) %>%
    mutate(variable = as.character(variable))
  }) %>% bind_rows %>% group_by(SP, variable) %>%
  summarise(values = sum(values)) %>%
  spread(variable, values)
proc.time() - t # 3.9 seconds

參考網址：http://tinyurl.com/o7gbeej--","R_Language"
"1908","M.1444640089.A.EE0","cywhale","問題","merge 3 tables with summing common var",2015-10-12 16:54:47,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)好像在哪曾看過較簡易的寫法或function，但一時想不起，也沒找到，寫了比較複雜的
code，想請問是否有更快或更簡易的方式做到


[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的Merge some data tables by the same key, 但若有相同的variables則合併時要相加，
不管NA，data tables彼此間的行、列數均不同

[程式範例]:library(data.table)
library(dplyr)

# testing data, assuming merge by key = ""SP""
set.seed(NULL)
x <- matrix(sample(1e6), 1e5) %>% data.table() %>%
     setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]
y <- matrix(sample(1e5), 1e4) %>% data.table() %>%
     setnames(1:10,sample(LETTERS,10)) %>% .[,SP:=seq_len(nrow(.))]
z <- matrix(sample(4e5), 2e4) %>% data.table() %>%
     setnames(1:20,sample(LETTERS,20)) %>% .[,SP:=seq_len(nrow(.))]

# function.. try to write Rcpp function..
require(Rcpp)

cppFunction('NumericVector addv(NumericVector x, NumericVector y) {
            NumericVector out(x.size());
            NumericVector::iterator x_it,y_it,out_it;

            for (x_it = x.begin(), y_it=y.begin(), out_it = out.begin();
                 x_it != x.end(); ++x_it, ++y_it, ++out_it) {
              if (ISNA(*x_it)) {
                *out_it = *y_it;
              } else if (ISNA(*y_it)) {
                *out_it = *x_it;
              } else {
                *out_it = *x_it + *y_it;
              }
            }
            return out;}')

### merge two data.table with different columns/rows,
### and summing identical column names

outer_join2 <- function (df1,df2,byNames) {
  tt=intersect(colnames(df1)[-match(byNames,colnames(df1))],
               colnames(df2)[-match(byNames,colnames(df2))])

  df <- merge(df2,df1[,-tt,with=F],by=byNames,all=T)
  dt <- merge(df2[,-tt,with=F],df1[,c(byNames,tt),with=F],by=byNames,all=T) %>%
        .[,tt,with=F]

  for (j in colnames(dt)) {set(df,j=j,value=addv(df[[j]],dt[[j]]))}
  return (df)
}

# get results, 參考c大#1LaHm_aH (R_Language)system.time(Reduce(function(x, y) outer_join2(x, y, byNames=""SP""), list(x,y,z)))

用了較多行code來完成這件事，速度上似乎還可以，但不確定是否有更好的寫法？謝謝！







[關鍵字]:選擇性，也許未來有用--","R_Language"
"1909","M.1444639198.A.782","celestialgod","問題","Re: 遺失值的問題",2015-10-12 16:39:55,NA,NA,"※ 引述《morefunmba (開心一點)》之銘言：: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我有約100個國家，12個變數的資料集: 大概就是:         變數1   變數2   變數3.....: ID1     2.4     3.1     1.2: ID2     NA      2.5     4.8: ID3     2.2     5       NA: ID4     1.5     NA      0.9: ....: 我預計會做基本統計量: Cluster: Factor analysis: 我的問題是，那些NA該怎麼用該變數的平均數取代: 因為找到的程式範本都是將缺失值去除: 沒有找到用平均數取代的: 謝謝簡單的寫法：

dat = data.frame(V1 = c(2.4,NA,2.2,1.5), V2 = c(3.1,2.5,5,NA),
    V3 = c(1.2,4.8,NA,0.9))
dat_na = lapply(dat, function(x){ x[is.na(x)] = mean(x, na.rm=T); x})
dat_na = as.data.frame(dat_na)

因為data.frame也是一個list 所以用lapply

對每一個column做取代NA為mean的動作

最後再轉回去變成data.frame


如果有categorical的資料，就要額外把numeric部分抓出來

這時候用plyr的numcolwise會比較快

既然都用了plyr，就可以搭配mapvalues把全部的NA取代成平均值

程式就會變的很漂亮（灑花

library(plyr)
dat = data.frame(V1 = c(2.4,NA,2.2,1.5), V2 = c(3.1,2.5,5,NA),
    V3 = c(1.2,4.8,NA,0.9), V4 = LETTERS[1:4])
dat_na = numcolwise(function(x) mapvalues(x, NA, mean(x, na.rm=T)))(dat)

但是這樣名目資料就黃鶴一去不復返了...

我們就要另外把名目資料抓出來在bind一次了，如下：

dat_na = data.frame(numcolwise(function(x) mapvalues(x, NA,
    mean(x, na.rm=T)))(dat), catcolwise(function(x) x)(dat))


dplyr試做：

library(dplyr)
namesWorking = names(dat)[sapply(dat, class)==""numeric""]
cmd = paste0(""plyr:::mapvalues("", namesWorking, "", NA, mean("",
    namesWorking, "", na.rm=T))"")
dat_na = mutate_(dat, .dots= setNames(lapply(cmd, lazyeval:::interp),
  namesWorking))

plyr的方法易讀，dplyr的方法有點tricky，一般R的解法易寫但慢，自己取捨吧QQ

歡迎提供其他寫法XD

--","R_Language"
"1910","M.1444638653.A.4A5","morefunmba","問題","遺失值的問題",2015-10-12 16:30:51,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有約100個國家，12個變數的資料集
大概就是
        變數1   變數2   變數3.....
ID1     2.4     3.1     1.2
ID2     NA      2.5     4.8
ID3     2.2     5       NA
ID4     1.5     NA      0.9
....

我預計會做基本統計量
Cluster
Factor analysis

我的問題是，那些NA該怎麼用該變數的平均數取代
因為找到的程式範本都是將缺失值去除
沒有找到用平均數取代的

謝謝

--","R_Language"
"1911","M.1444632854.A.6CD","gbd37","問題","select、filter函數中輸入字串問題(dplyr)",2015-10-12 14:54:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一筆資料，經過我整理過後，得一data.frame(名稱是data)

其中data一行中是字串，其行名稱是""name""

eg:""AA""、""AB""、""ZC""...等很多


我想運用這些字串去select另一data.frame(名稱data1)

欲想做:select(data1,data$name)

但這樣是ERROR

目前我只會colnames(data) 出現一堆""AA""、""AB""、""ZC""...後

再貼去select(data1,AA,AB,ZC,....) 但覺得這樣好慢

想請教更便利且快速的方法 謝謝


[關鍵字]:select dplyr filter


--","R_Language"
"1912","M.1444578927.A.8B2","OGCKM","問題","Re: 詢問.colSums的用法",2015-10-11 23:55:25,NA,NA,"※ 引述《a78998042a (Benjimine)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 不懂.colSums的用法: [程式範例]::  x = y = 1:10:  temp.m = outer(x, y, function(x, y) x+y):  c[1:3, 1:2]:      [,1]  [,2]: [1,]    2     3: [2,]    3     4: [3,]    4     5:  .colSums(temp.m, 3, 2): [1] 9 18: #原本我以為答案會是 9 12: #但結果不是，.colSums 後面兩個參數是維度，不知道該怎麼用: #有人知道他設定的方法嗎? 感謝!.colSums剛剛試了一下 是以從你產生的那個矩陣的第一列

要加幾次做一欄加總


舉例你產生的矩陣

第一列是  2 3 4 5 6 7 8 9 10 11

你的 .colSums(temp.m, 3,2)

3 指的是 取三個相加做為一欄加總

2 指的是 取兩欄

所以結果是 2 + 3 + 4 = 9  (前三個當第一欄)

           5 + 6 + 7 = 18 (後三個當第二欄)

你可以測試其他數值填入

例如: .colSums(temp.m, 4,2) 他就會取四個數當一組作為一欄

      就變成 2 + 3 + 4 + 5 = 14  第一欄

             6 + 7 + 8 + 9 = 30  第二欄

那也可以再崩潰一點測試: .colSums(temp.m, 8,2)

那他就是從第一列開始取8個元素 不夠取下一列

           2 + 3 + 4 + 5 + 6 + 7 + 8 + 9 = 44

           10 + 11 + 3 + 4 + 5 + 6 + 7 + 8 = 54

    (10,11這邊還在第一列) (3...開始就是開始取第二列元素)

以上大概是這個函數的用法

至於你問的 temp.m[1:3,1:2] 產生出來的 跟那個函數沒關係

你應該直接用colSums 前面不要加 "".""

code:

colSums(temp.m[1:3,1:2])

就可以得到你想要的結果 9 12






--","R_Language"
"1913","M.1444576010.A.B79","a78998042a","問題","詢問.colSums的用法",2015-10-11 23:06:47,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
不懂.colSums的用法

[程式範例]:
 x = y = 1:10
 temp.m = outer(x, y, function(x, y) x+y)
 c[1:3, 1:2]

     [,1]  [,2]
[1,]    2     3
[2,]    3     4
[3,]    4     5

 .colSums(temp.m, 3, 2)
[1] 9 18

#原本我以為答案會是 9 12
#但結果不是，.colSums 後面兩個參數是維度，不知道該怎麼用
#有人知道他設定的方法嗎? 感謝!



--","R_Language"
"1914","M.1444552863.A.DFE","w2a3n4g5","問題","如何設定pchisq輸出的最小值",2015-10-11 16:41:00,NA,NA,"[問題敘述]:
如題！

小弟我今天在寫適合度檢定，

但檢定統計量的值非常大，我將此值

寫成pvalue<-1-pchisq(800,df=3)

但我得出來的直永遠都是0

我測試pchisq這個函數後發現他最多只會顯示到1E-16

再小就出不來了，用format或options都無法！

所以想知道怎樣可以讓它顯示出來

比如說顯示pchisq(100,3)

出來就是零！可是我想知道他到底是多小就算是1E-100也好！

麻煩各位了

--","R_Language"
"1915","M.1444548319.A.E1D","celestialgod","問題","Re: 關於by()",2015-10-11 15:25:16,NA,NA,"※ 引述《genki358 (Dark Joker)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 問題一:: 照著R in Action第134頁執行下列程式碼時，會出現錯誤訊息。: vars <- mtcars[c(""mpg"",""hp"",""wt"")]: dstats <- function(x)(c(mean=mean(x),sd=sd(x))): by(mtcars[vars],mtcars$am,dstats):      (list) object cannot coerced to type 'double': In addition:Warning message:: In mean.default(x):argument is not numeric or logical:returning NAvars <- mtcars[c(""mpg"",""hp"",""wt"")]
dstats <- function(x) cbind(mean=lapply(x, mean),sd=lapply(x,sd))
by(vars,mtcars$am,dstats)

你by的對象是一個data.frame (also is a list)

所以你第三個要放 對list or data.frame的運算方程式，因此用lapply才對

PS: 書上的寫法可能是以前版本的R才支援，現在可能已經被換成錯誤了


題外話：

建議學習用dplyr，在資料處理上面會比較簡單

by, aggregate都沒想像中好用，而且速度真的很慢，還不直覺XD

像是這個例子，在dplyr裡面就是先選我要的處理的四個變數(mpg, hp, wt, am)

我要以am做為group，然後其他的每一個變數求mean跟sd

library(dplyr)
mtcars %>% select(mpg, hp, wt, am) %>% group_by(am) %>%
  summarise_each(funs(mean, sd))

# Source: local data frame [2 x 7]

#   am mpg_mean  hp_mean  wt_mean   mpg_sd    hp_sd     wt_sd
# 1  0 17.14737 160.2632 3.768895 3.833966 53.90820 0.7774001
# 2  1 24.39231 126.8462 2.411000 6.166504 84.06232 0.6169816: 問題二:: 設定常用package時，在WIN8按下SAVE存檔時，會發生存取被拒的訊息(WIN7不會): C:\Program Files\R\R-3.1.2\etc\Rprofile.site: .First=function(): {:  library(reshape):  ...: }這是windows 8 權限問題

你可以把R的資料夾右鍵設定為使用者有所有權現

詳細可以GOOGLE一下 使用者 資料夾 所有權限

--","R_Language"
"1916","M.1444547145.A.B3D","genki358","問題","關於by()",2015-10-11 15:05:43,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

問題一:
照著R in Action第134頁執行下列程式碼時，會出現錯誤訊息。
vars <- mtcars[c(""mpg"",""hp"",""wt"")]
dstats <- function(x)(c(mean=mean(x),sd=sd(x)))
by(mtcars[vars],mtcars$am,dstats)

>>> Error in is.data.frame(x):
     (list) object cannot coerced to type 'double'

In addition:Warning message:
In mean.default(x):argument is not numeric or logical:returning NA

問題二:
設定常用package時，在WIN8按下SAVE存檔時，會發生存取被拒的訊息(WIN7不會)
C:\Program Files\R\R-3.1.2\etc\Rprofile.site

.First=function()
{
 library(reshape)
 ...
}

--","R_Language"
"1917","M.1444543222.A.B55","celestialgod","問題","Re: 出現警告訊息會有影響嗎?",2015-10-11 14:00:19,NA,NA,"※ 引述《PhysicsBoy (翟南)》之銘言：: [問題敘述]:: 執行程式時出現""警告訊息"": 而內容是""被替換的項目不是替換值長度的倍數"": 所以想請問這樣會有影響嗎?: 小弟測試了一下似乎沒影響結果: 所以想請版上大大經驗分享最主要是警告使用者這樣的問題：

A = 1:5
B = 1:3
A + B

你的例子剛好是 20 (長度1) + sample(1:5) (長度5)

最終長度取決於第一個，所以結果不會有問題

但你的例子可以避免，透過  20 + sample(1:5, 1)

不過我上面的例子就無法透過其他方法避免警告發生

除非明定說你要怎樣長度的output

例如：

你要長度3的：  A(1:3) + B

你要長度5的：  A + rep(B,2,length.out=5)

這樣都可以避免警告發生


警告通常是告知使用者這樣做可能跟預期的結果不同

像上方，我可能以為 長度3 + 長度5 最後是長度3

類似這種情況，會透過警告來告知使用者

不知道這樣有沒有解釋得比較清楚

--","R_Language"
"1918","M.1444537626.A.775","PhysicsBoy","問題","出現警告訊息會有影響嗎?",2015-10-11 12:27:02,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:執行程式時出現""警告訊息""而內容是""被替換的項目不是替換值長度的倍數""所以想請問這樣會有影響嗎?小弟測試了一下似乎沒影響結果所以想請版上大大經驗分享[程式範例]:用一個簡單的範例舉例a = 0a[2] = 20+sample(1:5)接著就會出現警告訊息和告知被替換的項目不是替換值長度的倍數但執行結果就會如下是正確的結果> a[1]  0 24--離開你的視線~讓情緒完完整整的宣洩~我想今夜就這樣吧~反正孤獨也無所謂~--","R_Language"
"1919","M.1444298495.A.6EB","andrew43","問題","Re: 隨機刪除每列資料上的幾個欄（cell）",2015-10-08 18:01:26,NA,NA,"# 製造假資料
n.row <- 200 ; n.col <- 50
mat <- matrix(1 : (n.row * n.col), n.row, byrow = T)

# matrix 轉 list
x <- split(mat, rep(1:n.row, n.col))

# 利用 lapply() 逐列工作
# 工作內容是在 1:n.col 中抽 round(Uniform(20,40)) 個數字
# 沒抽中的就不要了
# 回傳還是個 list
lapply(x, function(k){
        k[sample(1:50, round(runif(1,1,20)))]
})※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 實際資料為200列*50欄: 要對每列資料隨機刪除該列的幾個欄: 例如將第一列（筆）資料的第5,34,41欄刪除: 將第二列（筆）資料的第4,25,36,49,50欄刪除: 將第三列（筆）資料的第28,39欄刪除....到第兩百列: 每列（筆）資料刪除的欄數目和位置都是隨機的，因此每列（筆）都不一樣，所以最後20: 0筆資料，其每筆所剩的欄位都會不太一樣: （刪掉的欄位也不用na取代）: 這邊有個示意圖舉例: （刪除前:3*10維度）: 20,14,63,15,74,95,25,10,41,12: 25,47,80,96,15,44,08,35,18,30: 18,36,59,54,14,22,70,98,13,24: （刪除後希望變這樣）: 20,14,15,74,95,10,41: 25,80,96,15,44,08,18,30: 18,59,54,14,70,24: 謝謝各位前輩的指導: 小弟感激不進: 若問題描述的不夠清楚我再補充--","R_Language"
"1920","M.1444297906.A.0B6","celestialgod","問題","Re: 大筆data frame資料的處理",2015-10-08 17:51:44,NA,NA,"library(plyr)
library(dplyr)
library(data.table)
library(magrittr)

set.seed(10)
tmp = llply(LETTERS[1:4], function(x) paste0(x, 1:40))
out = expand.grid(tmp[[1]], tmp[[2]], tmp[[3]], tmp[[4]]) %>% tbl_dt()
out %<>% .[rep(1:nrow(.), sample(1:5, nrow(.), TRUE)), ] %>% mutate(Value =
runif(nrow(.)))
dim(out) # 7677529       5
s = proc.time()
res = out %>% group_by(Var1, Var2, Var3, Var4) %>%
  summarise(num_rep = length(Value), value = mean(Value)) %>%
  filter(num_rep > 1)
proc.time() - s
#   user  system elapsed
#   3.23    0.11    3.66

結論：七百六十七萬列 三秒

收工了※ 引述《Godkin (山裡的人)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 將data frame當中重複出現二次以上的資料抓出，並求取某個欄位的平均值: 我有一個含有接近四百萬比資料的data frame, 格式大概長這個樣子: ID1     ID2     Name1   Name2   Value: -------------------------------------: m001    g001     mm1      gg1    0.5: m001    g001     mm1      gg1    0.6: m002    g001     mm2      gg1    0.3: m002    g002     mm2      gg2    0.5: m002    g002     mm2      gg2    0.7: m002    g002     mm2      gg2    0.2: m003    g002     mm3      gg2    0.1: ....    ....     ....     ...    ...: ------------------------------------: 我想把當中重複出現二次以上的資料抓出來，並計算value欄位的平均: 使得資料變成下面這個樣子: ID1     ID2     Name1   Name2   Value: -------------------------------------: m001    g001     mm1      gg1    0.55: m002    g002     mm2      gg2    0.47: ....    ....    ....    ....     ....: -------------------------------------: 用過for loop + aggregate, foreach + doParallel以及用Rcpp寫for loop: 的方式去處理過，但是實在是相當慢，foreach+doParallel跟Rcpp for的版本: 幾乎都跑了接近快12小時, 不知道版上的各位大大有沒有什麼好的建議?:: [環境敘述]::: 請提供 sessionInfo() 的輸出結果，: 裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，: 讓版友更容易找出錯誤:: [關鍵字]::: data frame, subsetting:

--","R_Language"
"1921","M.1444295729.A.DD1","Godkin","問題","大筆data frame資料的處理",2015-10-08 17:15:26,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:將data frame當中重複出現二次以上的資料抓出，並求取某個欄位的平均值我有一個含有接近四百萬比資料的data frame, 格式大概長這個樣子ID1     ID2     Name1   Name2   Value-------------------------------------m001    g001     mm1      gg1    0.5m001    g001     mm1      gg1    0.6m002    g001     mm2      gg1    0.3m002    g002     mm2      gg2    0.5m002    g002     mm2      gg2    0.7m002    g002     mm2      gg2    0.2m003    g002     mm3      gg2    0.1....    ....     ....     ...    ...------------------------------------我想把當中重複出現二次以上的資料抓出來，並計算value欄位的平均使得資料變成下面這個樣子ID1     ID2     Name1   Name2   Value-------------------------------------m001    g001     mm1      gg1    0.55m002    g002     mm2      gg2    0.47....    ....    ....    ....     ....-------------------------------------用過for loop + aggregate, foreach + doParallel以及用Rcpp寫for loop的方式去處理過，但是實在是相當慢，foreach+doParallel跟Rcpp for的版本幾乎都跑了接近快12小時, 不知道版上的各位大大有沒有什麼好的建議?[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:data frame, subsetting--","R_Language"
"1922","M.1444291590.A.893","celestialgod","問題","Re: 隨機刪除每列資料上的幾個欄（cell）",2015-10-08 16:06:28,NA,NA,"nr = 200
nc = 50
maxNumDelete = 10
dat = matrix(sample(1:100, nr*nc, TRUE), nr)
colDelete = replicate(nr, sample(1:nc, sample(1:maxNumDelete, 1)))
sapply(1:nr, function(i){
  paste(dat[i, colDelete[[i]]], collapse = "","")
})※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 實際資料為200列*50欄: 要對每列資料隨機刪除該列的幾個欄: 例如將第一列（筆）資料的第5,34,41欄刪除: 將第二列（筆）資料的第4,25,36,49,50欄刪除: 將第三列（筆）資料的第28,39欄刪除....到第兩百列: 每列（筆）資料刪除的欄數目和位置都是隨機的，因此每列（筆）都不一樣，所以最後20: 0筆資料，其每筆所剩的欄位都會不太一樣: （刪掉的欄位也不用na取代）: 這邊有個示意圖舉例: （刪除前:3*10維度）: 20,14,63,15,74,95,25,10,41,12: 25,47,80,96,15,44,08,35,18,30: 18,36,59,54,14,22,70,98,13,24: （刪除後希望變這樣）: 20,14,15,74,95,10,41: 25,80,96,15,44,08,18,30: 18,59,54,14,70,24: 謝謝各位前輩的指導: 小弟感激不進: 若問題描述的不夠清楚我再補充--","R_Language"
"1923","M.1444287113.A.E3F","sinclairJ","問題","隨機刪除每列資料上的幾個欄（cell）",2015-10-08 14:51:50,NA,NA,"實際資料為200列*50欄
要對每列資料隨機刪除該列的幾個欄
例如將第一列（筆）資料的第5,34,41欄刪除
將第二列（筆）資料的第4,25,36,49,50欄刪除
將第三列（筆）資料的第28,39欄刪除....到第兩百列

每列（筆）資料刪除的欄數目和位置都是隨機的，因此每列（筆）都不一樣，所以最後20
0筆資料，其每筆所剩的欄位都會不太一樣
（刪掉的欄位也不用na取代）

這邊有個示意圖舉例
（刪除前:3*10維度）
20,14,63,15,74,95,25,10,41,12
25,47,80,96,15,44,08,35,18,30
18,36,59,54,14,22,70,98,13,24

（刪除後希望變這樣）
20,14,15,74,95,10,41
25,80,96,15,44,08,18,30
18,59,54,14,70,24

謝謝各位前輩的指導
小弟感激不進
若問題描述的不夠清楚我再補充


--
Sent from my Android

--","R_Language"
"1924","M.1444286964.A.19E","criky","問題","編流水號的問題",2015-10-08 14:49:21,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
將資料編流水號

[程式範例]:
library(dplyr)
library(data.table)
library(magrittr)
cid.tmp<-paste(base2$schoolid,base2$programme,base2$class)
dat = data.table(id = cid.tmp)
dat %>% mutate(cid = as.integer(factor(cid.tmp))) %>% group_by(cid.tmp) %>%
mutate(cid.n = 1:length(cid.tmp))

以上code是修改自c板主回覆recode文章的回答，
可以執行，但有個問題，cid是我要的流水號，
但它的順序和我資料的順序不一樣，程式做了sort的動作，
後面資料會有id是100301開頭的，cid=1
但我希望cid從第1行的資料，不要排序，直接從1編流水號~

執行結果output如下：

    ""id""            ""cid""""cid.n""
""1"" ""10301 高三 孝班"" 6 1
""2"" ""10301 高三 孝班"" 6 2
""3"" ""10301 高三 孝班"" 6 3
""4"" ""10301 高三 孝班"" 6 4
""5"" ""10301 高三 和班"" 7 1
""6"" ""10301 高三 和班"" 7 2
""7"" ""10301 高三 和班"" 7 3
""8"" ""10301 高三 和班"" 7 4
""9"" ""10301 高三 問班"" 8 1
""10"" ""10301 高三 問班"" 8 2
""11"" ""10301 高三 問班"" 8 3
""12"" ""10301 高三 問班"" 8 4
""13"" ""10301 高三 問班"" 8 5
""14"" ""10301 高三 問班"" 8 6
""15"" ""10301 高三 問班"" 8 7
""16"" ""11316 普通科 普三和"" 19 1
""17"" ""11316 普通科 普三和"" 19 2
""18"" ""11316 普通科 普三和"" 19 3

--","R_Language"
"1925","M.1444149736.A.CED","celestialgod","分享","Re: dplyr::group_by的進階應用",2015-10-07 00:42:13,NA,NA,"還記得之前Hadley發的purrr嗎？

裡面的function也可以協助完成這種指令

library(data.table)
library(dplyr)
library(purrr)
library(magrittr)
library(binom)

N = 200
DT = data.table(廣告 = paste0(""廣告"", sample(LETTERS[1:4], N, TRUE)),
  網站 = paste0(""網站"", sample(LETTERS[1:4], N, TRUE)),
  點擊數 = sample(1:20, N, TRUE))

# W大的do + group_by
filter(DT, 網站 == ""網站A"") %>%
  group_by(廣告) %>%
  do(binom.confint(sum(.$點擊), length(.$點擊), methods = ""exact""))

# purrr的map
filter(DT, 網站 == ""網站A"") %>% split(.$廣告) %>%
  map(~binom.confint(sum(.$點擊), length(.$點擊), methods = ""exact"")) %>%
  bind_rows※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: R, dplyr, data manipulation: [出處]: https://wush.ghost.io/dplyr_group_by/: [重點摘要]:: 一個能更有彈性的使用dplyr::group_by做資料整理的小撇步：: dplyr::do: 內文中會簡單介紹dplyr::do的運作。--","R_Language"
"1926","M.1444062721.A.0B8","Wush978","分享","dplyr::group_by的進階應用",2015-10-06 00:31:29,NA,NA,"[關鍵字]: R, dplyr, data manipulation

[出處]:https://wush.ghost.io/dplyr_group_by/[重點摘要]:

一個能更有彈性的使用dplyr::group_by做資料整理的小撇步：

dplyr::do

內文中會簡單介紹dplyr::do的運作。

--","R_Language"
"1927","M.1444027929.A.FAD","blueevil","問題","依照消費狀況分類",2015-10-05 14:52:03,NA,NA,"[問題類型]:
我可以分類成功,想請問有比較簡潔的方法嗎？或別的方法？謝謝分享！


[問題敘述]:
要將消費者依照消費年份的狀態分成三類：回購顧客,新增顧客,流失顧客

[程式範例]:http://ideone.com/RJ4ixknumber=50
data <- matrix(nrow = number, ncol = 3 )
colnames(data) <- c(""ID"",  ""Shop_year"", ""Region"")
set.seed(1)
data[,1] <- c(sample(1:25, size=number, replace = T) )#ID

data[,2] <- c(sample(c(""year2013"",""year2014"",""year2015""), size=number, replace= T, prob = c(0.1, 0.3, 0.6) ) )
data[,3] <- c(sample(c(""北區一"",""北區二"",""北區三""), size = number,
                     replace = T, prob = c(0.5,0.3,0.2) ))
data <- data.frame(data)

library(reshape2)
library(reshape)
library(dplyr)
result<- cast(data, ID~Shop_year,value=c(""Region""))

##分類成三組
data_new <- filter(result, year2015 !=0 & year2014 == 0)
data_new$level <- ""新增""
data_lost <- filter(result, year2015 == 0)
data_lost$level <- ""流失""
data_now <- filter(result, year2015 != 0 & year2014 !=0)
data_now$level <- ""回購""

##合併檔案
data_combine <- rbind.data.frame(data_now, data_new, data_lost)
## 新增分組資料到原始檔案
data_final <- merge(data, data_combine)



--","R_Language"
"1928","M.1444026530.A.83A","genki358","問題","masked from",2015-10-05 14:28:47,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
開啟RStudio時，Console都會出現下列紅字訊息，是什麼狀況呢?

Attaching package:'R.matlab'
The following objects are masked from 'package:base':
        getoption, isopen

Attaching package:'Hmisc'
The following objects are masked from 'package:base':
        format.pval,round.POSIXt,trunc.POSIXt,units

--","R_Language"
"1929","M.1443859641.A.7AB","ruisme","問題","2次函數簡單計算",2015-10-03 16:07:17,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:
大家好，我是剛學R的初心者

題目是統計常遇到的不同x值域，對應不同y的計算。目前遇到的問題是：
為什麼R不能先列計算式，再給定x值去計算y，一定要先給定x值才能開始列條件式
以下是簡單範例：


[程式範例]:
題目：y=|2*x,x>2
        |x/2,x<=2
x為1.5及3.5時y之值

我列出的解：
>x <- 1.5
>if (x>2) y<-2*x else y<-x/2
>y

>x<-3.5
>if (x>2) y<-2*x else y<-x/2  (我還必須要重打才行)
>y

所以算是有兩個問題，問題1是為什麼要先定義x，問題2是為什麼條件要定義兩次


程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[環境敘述]:

[關鍵字]:四則運算

請給予指教，非常感謝

--","R_Language"
"1930","M.1443815027.A.C16","memphis","問題","multiple table rbind or union in sql",2015-10-03 03:43:45,NA,NA,"如果資料在MySQL裡 用年份分開存成不同table

大家覺得

在SQL裡 union all 再拉回 R

還是用 parLapply 一個個查完再 rbind_all 比較快?

這問題可大可小...我想

資料是不是良好的分散在不同硬碟上?

開多線是不是比單線快? 可不可以把頻寬榨乾?

可能都會影響結果

問問大家有沒有經驗?

===
ref:http://stackoverflow.com/questions/4761073/--","R_Language"
"1931","M.1443780363.A.BAE","kpwada","問題","已解決-rstudio server安裝套件狀況",2015-10-02 18:05:58,NA,NA,"[問題類型]:ｒｓｔｕｄｉｏ　ｓｅｒｖｅｒ安裝套件包出現狀況[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
在ｒｓｔｕｄｉｏ的ｃｏｎｓｏｌｅ中輸入> options(repos = ""http://taiwanrusergroup.github.io/R"")> local({+     install.packages('DSC2015R')
+     pkgs.remote <- available.packages()
+     pkgs.local <- installed.packages()
+     pkgs <- intersect(rownames(pkgs.remote), rownames(pkgs.local))
+     pkgs.outdated <- package_version(pkgs.local[pkgs, ""Version""]) != package_version(pkgs.remote[pkgs, ""Version""])
+     if (sum(pkgs.outdated) > 0) install.packages(names(which(pkgs.outdated)))
+ })

回應為
Installing package into ‘/usr/local/lib/R/site-library’
(as ‘lib’ is unspecified)
Warning in install.packages :
  'lib = ""/usr/local/lib/R/site-library""' is not writable
Would you like to use a personal library instead? (y/n)
輸入y
會裝到home/R/x86_64-pc-linux-gnu-library/3.2/

輸入
library(DSC2015R)
回應
Error in library(DSC2015R) : there is no package called ‘DSC2015R’

--------------------
找到處理寫入site-library的碼

    # edd 03 Apr 2003  cf Section 10.1.2 of Debian Policy
    if [ ! -e /usr/local/lib/R ]; then
      if mkdir /usr/local/lib/R 2>/dev/null; then
        chown root:staff /usr/local/lib/R
        chmod 2775 /usr/local/lib/R
      fi
    fi
    if [ ! -e /usr/local/lib/R/site-library ]; then
      if mkdir /usr/local/lib/R/site-library 2>/dev/null; then
        chown root:staff /usr/local/lib/R/site-library
        chmod 2775 /usr/local/lib/R/site-library
      fi
    fi

懷疑：
我直接使用ubuntu帳號登入rs，而沒有新增一個可以使用的group到.conf裡面


[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-pc-linux-gnu (64-bit)Running under: Ubuntu 14.04.3 LTSlocale:[1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C               LC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8[5] LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8    LC_PAPER=zh_TW.UTF-8       LC_NAME=C[9] LC_ADDRESS=C               LC_TELEPHONE=C             LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=Cattached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] tools_3.2.2----------------/etc/rstudio/rserver.confrsession-ld-library-path=/usr/local/lib/R----------------/etc/rstudio/rsession.confsession-timeout-minutes=30r-cran-repos=http://ftp.yzu.edu.tw/CRAN/r-libs-user=~/R/packages[關鍵字]:ｒｓｔｕｄｉｏ　ｓｅｒｖｅｒ，套件安裝--","R_Language"
"1932","M.1443765922.A.4AB","celestialgod","情報","Hadley新套件 purrr",2015-10-02 14:05:19,NA,NA,"[關鍵字]: Hadley, purrr

[出處]:http://www.r-bloggers.com/purrr-0-1-0/https://github.com/hadley/purrr[重點摘要]:

Installation:

Get the released version from CRAN:

install.packages(""purrr"")
Or the development version from github with:

# install.packages(""devtools"")
devtools::install_github(""hadley/purrr"")


example:

library(purrr)

mtcars %>%
  split(.$cyl) %>%
  map(~ lm(mpg ~ wt, data = .)) %>%
  map(summary) %>%
  map_dbl(""r.squared"")

#         4         6         8
# 0.5086326 0.4645102 0.4229655

# 依照cyl不同做不同的回歸，print每一個模型的R^2

更多例子請參考上方連結

r-blogger那篇的Purrr and dplyr

那個cv code變的很漂亮XD dplyr不足的地方都被補足了！

有空要來做新的教學了XDD

--","R_Language"
"1933","M.1443733181.A.566","MADNUG","問題","Re: sapply用在整個data.fram(平行運算)",2015-10-02 04:59:35,NA,NA,"後來參考了celestialgod大這篇的範例#1Hocf0cY (R_Language)改用snowfall進行平行運算
速度大大大大大幅提升，真是太神奇了!
程式更新如下http://pastebin.com/avAHvyhd雖然還是寫得有點不明不白的= =
不過總算把速度提升到只花不到150秒
之前至少要15分鐘
看到task manager裡面好多r session把CPU佔滿滿
就覺得過癮

另外發現吃效能的其實不在lm，而是step，
可能還要再看看有沒有更好的方法可以取代掉這函數※ 引述《MADNUG (就是比你長)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [問題敘述]:: 最近在用cross-validation來model selection: 在目前的樣本隨機抽取(with replacement)N筆後配適模型: 上述步驟重複100次，: 接著N改為N+5，再重複100次，如此N+5k一直做下去: 目前是用for-loop: 但覺得跑得好慢: 於是在想說不知是否能用apply族的函數: 但看了說明，大多是對data.fram的每個欄執行function: 好像沒發現有對整個data.fram執行function: 故上來請教一下: 有想過不然創建個維度100的LIST，每個LIST都是一整個data.fram: 不過還沒試不知道可不可行= =: [程式範例]::: http://pastebin.com/avAHvyhd:: [環境敘述]::: R version 3.2.2 (2015-08-14): Platform: x86_64-w64-mingw32/x64 (64-bit): Running under: Windows 8 x64 (build 9200):: [關鍵字]::: 選擇性，也許未來有用:

--
        唔∼        ?    呃∼
    ○             ─○○
  _仄_○         √_/￣\
(欲拒還迎)    (排山倒海)

--","R_Language"
"1934","M.1443706294.A.C6B","tony255034","問題","行轉列的方式",2015-10-01 21:31:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
*[1;30;40m
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的所附的程式碼有成功將上面的格式轉為下面的格式

但想請教的是dylpr或R的語法中有沒有更簡潔撰寫的方式呢?

    name  sex score1 score2 score3
1  sally   f   100     23     24
2  tony    m    52     32     45
3  sam     m    65     42     34

轉成
    name  sex  score    value
1  sally   f   score1    100
2  sally   f   score2     23
3  sally   f   score3     24
4  tony    m   score1     52
5  tony    m   score2     32
6  tony    m   score3     45
7  sam     m   score1     65
8  sam     m   score2     42
9  sam     m   score3     34

[程式範例]:

d1 <- data.frame(d[1:2])
d1 <- d1[rep(seq_len(nrow(d1)), each=3)]
col <- str_pad(c(1:3),2,""left"",'0')
d1 <- mutate(d1, SCORE = rep(col,length(d[[1]])))

d2 <- data.frame(t(d[3:5]),stringsAsFactors = FALSE)
temp <- stack(d2)
temp[2] <- NULL
d1 <- cbind(d1,temp)

[環境敘述]:

win7 32bit 4G R 3.1.2

[關鍵字]:

Column to Row, dplyr

--","R_Language"
"1935","M.1443680429.A.4D9","babysian7","問題","lat、lon as a feature",2015-10-01 14:20:26,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
*這是我第一次在PTT PO文，如有那裡沒有注意到的地方，煩請各位先進包涵!*

我的論文是有關房價預測，用的模型是Support Vector Regrssion，
並使用caret去做feature selection。

我的dataframe裡面有lat、lon、houseprice，
      estate_Lat estate_Lon estate_TotolPrice
[1, ] 25.02862    121.5059    124117
[2, ] 25.03377    121.5089    2568347
[3, ] 25.04346    121.512     73000000
[4, ] 25.04348    121.512     5600000
[5, ] 25.04346    121.512     99300000

問題一：
老師希望我將lat、lon兩個欄位一起當作一個x的變數來看，
那y就是houseprice，
因為我語法不是很熟，想跟各位先進詢問這邊怎麼寫？

*也先跟各位先進感謝*

[程式範例]:
#set.seed(7)

library(mlbench)
library(caret)


mydata <- read.csv(""D:/SupportVectorRegression/Origin/TestDatasetR_1000.csv"",
header=TRUE)



location = data.frame(mydata[, c(""estate_Lng"", ""estate_Lat"")])


rfectrl <- rfeControl(functions=lmFuncs, method=""cv"", number=10,
repeats=3,verbose=TRUE,returnResamp = ""final"")
results <- rfe(location~., mydata$estate_TotalPrice,rfeControl=rfectrl,method =
""svmRadial"",metric = ""Rsquared"")

print(results)

predictors(results)

plot(results, type=c(""g"", ""o""))


[環境敘述]:
RStudio 3.2.2

[關鍵字]:

dataframe、caret、latlon、predict

--","R_Language"
"1936","M.1443616001.A.654","MADNUG","問題","sapply應用在整個data.fram",2015-09-30 20:26:36,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[問題敘述]:
最近在用cross-validation來model selection
在目前的樣本隨機抽取(with replacement)N筆後配適模型
上述步驟重複100次，
接著N改為N+5，再重複100次，如此N+5k一直做下去

目前是用for-loop
但覺得跑得好慢
於是在想說不知是否能用apply族的函數
但看了說明，大多是對data.fram的每個欄執行function
好像沒發現有對整個data.fram執行function
故上來請教一下

有想過不然創建個維度100的LIST，每個LIST都是一整個data.fram
不過還沒試不知道可不可行= =

[程式範例]:http://pastebin.com/avAHvyhd[環境敘述]:R version 3.2.2 (2015-08-14)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 8 x64 (build 9200)[關鍵字]:選擇性，也許未來有用--
  ○    啊∼     ○○ 咿∼      ○ 喔∼         嗯∼
 ㄥ︹○         ︽〕         ○\︿            ○
    》          ＼︿         ○︿/︿        ○≦\_
(十面埋伏)    (針鋒相對)    (腹背受敵)    (騰雲駕霧)

--","R_Language"
"1937","M.1443527099.A.A87","Wush978","心得","利用雲端服務，建構R 的自動測試系統",2015-09-29 19:44:56,NA,NA,"[關鍵字]: R,  軟體工程

[重點摘要]:

等下晚上8:00，我會開始介紹一些使用雲端服務系統來自動測試R 套件的心得

有興趣的朋友可以一起來觀賞，並且利用Q&A 來問問題。

事後Youtube錄影:http://www.youtube.com/watch?v=w-oD2MqNcl4--","R_Language"
"1938","M.1443454415.A.F8B","genki358","問題","時間函數",2015-09-28 23:33:32,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
如果讀進來的資料為chr""2012/1/1...""及chr""13:00:00...""共兩欄，
其中將第一欄已用as.Date()轉成日期格式，第二欄則用strptime轉為時間格式，

問題一:
strptime似乎會將第二欄自動加上系統今天日期，但想要的是資料原始日期。

問題二:
如果想將2012/1/1~2015/8/30每天的13:00-18:0另新設為下午，18:00-23:00另新設為晚上
，要用什麼時間函數才能從strptime取出hh:mm:ss並且將下午晚上都設為factor?

有沒有哪位大大可以幫忙解決這個問題?








--","R_Language"
"1939","M.1443421398.A.F51","gbd37","問題","rjava package灌失敗",2015-09-28 14:23:16,NA,NA,"[問題敘述]:
我想使用xlsx套件，灌完xlsx套件要開啟時都說rjava套件錯誤的訊息

我也爬一下文

說要灌好JAVA在JAVA_HOME資料夾放DLL檔的我有試了

但不確定我是不是做對了= =

想請問灌rjava還要注意哪些或是有沒有步驟教學

[環境敘述]:
電腦OS是WIN8.1 61位元

R:
$platform
[1] ""x86_64-w64-mingw32""

$version.string
[1] ""R version 3.2.2 (2015-08-14)""

JAVA:32位元(這個我就不懂了，為啥會自動幫我灌32位元的?)

[關鍵字]:rjava xlsx


--","R_Language"
"1940","M.1443055280.A.BAA","psinqoo","問題","linux R 連結 MS SQL",2015-09-24 08:41:16,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的請教板上大大

我有一台 LINUX 系統 (CENTOS 7)  R

想連結另一台主機SQL資料庫 撈裡面的資料

(IP 密碼 PORT 都已知)

 該如何去設定?




[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:

RODBC

LINUX

SQL選擇性，也許未來有用--







--","R_Language"
"1941","M.1443017967.A.F1F","tony255034","問題","ROracle使用方式",2015-09-23 22:19:25,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
新手

[問題敘述]:
ROracle連接時出現Error in oci.Connect(.oci.drv(),username = username,

password = password,: ORA-24315:illegal attribute type)

[程式範例]:
drv <- dbDriver(""Oracle"")

# Create the connection string

host <- ""IP""

port <- 1521

sid <- ""orff""
connect.string <- paste(
 ""(DESCRIPTION="",
 ""(ADDRESS=(PROTOCOL=tcp)(HOST="", host, "")(PORT="", port, ""))"",
 ""(CONNECT_DATA=(SID="", sid, "")))"", sep = """")
con <- dbConnect(drv, username = ""scott"",
 password = ""tiger"",dbname=connect.string)

[環境敘述]:

win7 64bit R 3.0.0~3.2.2皆有試過

有同學使用R2.1-5.1在別台電腦成功連結，也依照他的方法下載Oracle Instant Client

並對其解壓縮，再設定環境變數

以上帳號、密碼、IP皆為假設  但有確認連接時設定無誤

[關鍵字]:

ROracle、Database

--","R_Language"
"1942","M.1442932078.A.C4D","Wush978","情報","Hadley Wickham: 一個改變了R的人",2015-09-22 22:27:55,NA,NA,"[關鍵字]: R

[出處]:http://cos.name/2015/09/hadley-wickham-the-man-who-revolutionized-r/[重點摘要]:

來看看一篇介紹Hadley Wickham的文章。

我也是衷心認為，Hadley是當代對R最有影響的人。


--","R_Language"
"1943","M.1442893648.A.440","aee36900","問題","DATA FRAME 迴圈資料處裡",2015-09-22 11:47:25,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的要處理data fram裡面的資料
例子如下
no value       no  value
1  18          1   18
2  0           2   9     (18+0)/2
3  0    ---->  3   4.5   (9+0)/2
4  0           4   12.25 (4.5+20)/2
5  20          5   20

遇到0值時 則拿前一筆與後一筆平均 填入,依序往下處理
請問這樣的for迴圈該如何表示?

[環境敘述]:R version 3.1.3 (2015-03-09)Platform: x86_64-redhat-linux-gnu (64-bit)Running under: CentOS release 6.5 (Final)[關鍵字]:data frame, for迴圈

--

--","R_Language"
"1944","M.1442824361.A.BC1","andrew43","問題","Re: Recode寫法",2015-09-21 16:32:37,NA,NA,"id <- c(2,4,567,3,3,324,2,1,2)
id2.factor <- factor(id, labels=1:length(unique(id)))
id2.character <- as.character(id2.factor)
id2.numeric <- as.numeric(id2.factor)※ 引述《criky (立業成家)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 若有一欄位id，R要怎麼編出id的流水號？: id →  id2: 1122   1: 1122   1: 1133   2: 1133   2: 1133   2: 2255   3: 2255   3: 2255   3: 2255   3: 4444   4: 4444   4: 5555   5--","R_Language"
"1945","M.1442818590.A.200","celestialgod","問題","Re: Recode寫法",2015-09-21 14:56:26,NA,NA,"※ 引述《criky (立業成家)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 若有一欄位id，R要怎麼編出id的流水號？: id →  id2: 1122   1: 1122   1: 1133   2: 1133   2: 1133   2: 2255   3: 2255   3: 2255   3: 2255   3: 4444   4: 4444   4: 5555   5id = c(""1122"", ""1122"", ""1133"", ""1133"", ""1133"", ""2255"", ""2255"", ""2255"",
  ""4444"", ""4444"", ""5555"")
tmp = rle(id)
tmp$values = 1:length(tmp$values)
inverse.rle(tmp)
#  [1] 1 1 2 2 2 3 3 3 4 4 5

--","R_Language"
"1946","M.1442817680.A.192","criky","問題","Recode寫法",2015-09-21 14:41:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
若有一欄位id，R要怎麼編出id2的流水號？
再請問如何編出id3的累積個數？

id →  id2 → id3
1122   1        1
1122   1        2
1133   2        1
1133   2        2
1133   2        3
2255   3        1
2255   3        2
2255   3        3
2255   3        4
4444   4        1
4444   4        2
5555   5        1

--阿.阿..>///<YOOOOO~我們...ˊ嗚~ˊ□□□ˊ□□   □真的只是...□□□□□□□□□□□□ □□□□□□□□□   □俄羅斯方塊...ξhsiao335.--","R_Language"
"1947","M.1442814301.A.861","celestialgod","問題","Re: 符合條件就跑出colunm names",2015-09-21 13:44:57,NA,NA,"※ 引述《gbd37 (有夠瞎)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 有個data.frame，我想找出data中有沒有1過多或是0過多的情況發生，: 目前CODE範例是取0.7百分位數&FREQ>5當門檻: 我想OUTPUT出column names與範例程式碼output的結果: 且沒有符合的條件不print出<0 rows> (or 0-length row.names):    期望OUTPUT出 ::        Var1 Freq column column.name:      1    0    7      1           A:        Var1 Freq column column.name:      2    1    7      3           C:        Var1 Freq column column.name:      2    1    6      4           D:        Var1 Freq column column.name:      2    1    6      5           E:   的結果，儲存一個新的data.frame我把重點用紅色圈起來了

主要就是在裡面做一個邏輯值的判斷就可以解決這個問題

library(data.table)
library(plyr)
library(dplyr)
library(magrittr)
set.seed(100)
dat = data_frame(A=sample(c(0,1), 10, replace = TRUE),
  B=sample(c(0,1), 10, replace = TRUE),
  C=sample(c(0,1), 10, replace = TRUE),
  D=sample(c(0,1), 10, replace = TRUE),
  E=sample(c(0,1), 10, replace = TRUE))

dat %>% llply(function(x){
        tmp = table(x) %>% {.[-which(. <= quantile(., 0.7))]}if (is.null(tmp) || length(tmp) == 0)tmp = rep(NA, 2)elsetmp %<>% c(as.numeric(names(.)), .)tmp
}) %>% do.call(rbind,.) %>% data.table(keep.rownames=TRUE) %>%
  setnames(c(""columnName"", ""Var"", ""Freq"")) %>% na.omit %>%
  mutate(column = match(columnName, names(dat)))

#    columnName Var Freq column
# 1:          A   0    7      1
# 2:          C   1    7      3
# 3:          D   1    6      4
# 4:          E   1    6      5

llply改成laply就沒有column name一併output

只能自己在手動加上去

所以我才沒用laply

不然這個用laply直接出來就是matrix了

--","R_Language"
"1948","M.1442805823.A.C4B","gbd37","問題","符合條件就跑出colunm names",2015-09-21 11:23:39,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有個data.frame，我想找出data中有沒有1過多或是0過多的情況發生，

目前CODE範例是取0.7百分位數&FREQ>5當門檻

我想OUTPUT出column names與範例程式碼output的結果

且沒有符合的條件不print出<0 rows> (or 0-length row.names)

   期望OUTPUT出 :

       Var1 Freq column column.name
     1    0    7      1           A
       Var1 Freq column column.name
     2    1    7      3           C
       Var1 Freq column column.name
     2    1    6      4           D
       Var1 Freq column column.name
     2    1    6      5           E

  的結果，儲存一個新的data.frame

[程式範例]:

程式碼可貼於以下網站：http://pastie.org/10434961[關鍵字]:print column names


--","R_Language"
"1949","M.1442724954.A.825","buzz20374","問題","R的for迴圈使用",2015-09-20 12:55:49,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別)[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想要把一些類似的指令用for迴圈寫出來。

原來的圖是N(0,1)分配
text(1,0,""+\\*s"",vfont=c(""serif"",""plain""))
text(2,0,""+\\*s"",vfont=c(""serif"",""plain""))
text(3,0,""+\\*s"",vfont=c(""serif"",""plain""))

我想到的方法是用for迴圈

i<-0
z<-numeric(3)
for(i in 1:3)
{
z[i]<-i
}

這裡我就不知道要怎麼把text(...)放進去

我試了

i<-0
z<-numeric(3)
for(i in 1:3)
{
z[i]<-i
text(z[i],0,""+z[i]\\*s"",vfont=c(""serif"",""plain""))
}

可是答案只會在圖形上相應點出現+z[i]sigma +z[i]sigma +z[i]sigma

不是我要的+1 sigma +2 sigma +3 sigma

但是圖形上相應點座標(z[i],0)有讀進去


--","R_Language"
"1950","M.1442643478.A.38A","alanfengjkl","問題","R連TEJ",2015-09-19 14:17:56,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者

[問題敘述]:
想直接用R去連TEJ抓取資料，不用透過滑鼠點取，經過EXCEL讀資料


--","R_Language"
"1951","M.1442565554.A.BF6","celestialgod","問題","Re: gsub例子看不懂",2015-09-18 16:39:12,NA,NA,"※ 引述《buzz20374 ()》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]:: gsub有兩個例子看不太懂，也想了很久。: >text<-c(""arm"",""leg"",""head"",""foot"",""hand"",""hinding"",""elbow""): >gsub(""(\\w)(\\w*)"",""\\U\\1\\L\\2"",text,perl=TRUE): [1] ""Arm"" ""Leg"" ""Head"" ""Foot"" ""Hand"" ""Hindleg"" ""Elbow"": 完全看不懂，只知道把第一個字母換成大寫。: >gsub(""(\\w)"",""\\U\\1"",text,perl=TRUE): [1] ""ARM"" ""LEG"" ""HEAD"" ""FOOT"" ""HAND"" ""HINDLEG"" ""ELBOW"": 全部換成大寫。: 問題:: 1.(\\w) (\\w*) ""\\U\\1\\L\\2"" ""\\U\\1"" 是什麼?: 2.perl=TRUE 有什麼作用呢?這些是所謂的regular expression

\\w: A-Z, a-z, 0-9跟_

\\d: 0-9

\\U: upper case

\\1是 第一個括號的內容

更多內容你要找regular expression來看

我之前是看這篇：http://www.javaworld.com.tw/jute/post/view?bid=20&id=130126&sty=1&tpg=1&age=0另外網路上還有regular expression的教學

像是：http://ccckmit.wikidot.com/regularexpression還有R的官方文件https://stat.ethz.ch/R-manual/R-devel/library/base/html/regex.html--","R_Language"
"1952","M.1442565288.A.B91","buzz20374","問題","gsub例子看不懂",2015-09-18 16:34:45,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:

gsub有兩個例子看不太懂，也想了很久。

>text<-c(""arm"",""leg"",""head"",""foot"",""hand"",""hinding"",""elbow"")

>gsub(""(\\w)(\\w*)"",""\\U\\1\\L\\2"",text,perl=TRUE)

[1] ""Arm"" ""Leg"" ""Head"" ""Foot"" ""Hand"" ""Hindleg"" ""Elbow""

完全看不懂，只知道把第一個字母換成大寫。

>gsub(""(\\w)"",""\\U\\1"",text,perl=TRUE)

[1] ""ARM"" ""LEG"" ""HEAD"" ""FOOT"" ""HAND"" ""HINDLEG"" ""ELBOW""

全部換成大寫。


問題:

1.(\\w) (\\w*) ""\\U\\1\\L\\2"" ""\\U\\1"" 是什麼?

2.perl=TRUE 有什麼作用呢?






--","R_Language"
"1953","M.1442556372.A.24F","ardodo","問題","R-studio出現invalid multibyte character",2015-09-18 14:06:10,NA,NA,"各位版友好

我在R-studio中修改我的script並儲存後，出現了

invalid multibyte character in parser at line 1這個錯誤

當這個錯誤出現後，R-studio就會當機，無法執行任何指令，要關掉得開啟工作管理員

才能，google了一下推測應該是中文註解太多的關係，但是因為我有另外一個script

也有許多中文註解，但是卻沒有出現這個問題，想請問看看該如何解決？謝謝


sessionInfo：

R version 3.2.2 (2015-08-14)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

loaded via a namespace (and not attached):
[1] tools_3.2.2

R-studio是用最新的版本

--","R_Language"
"1954","M.1442382033.A.6E0","k5171","問題","系統計算上是獨特的: 互反條件數",2015-09-16 13:40:30,NA,NA,"[問題類型]:
程式諮詢



[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)



[問題敘述]:

我想用對蘋果公司的日報酬配適一個 GARCH(1,1) 模型，但是在跑 GARCH(1,1)
時出現了下列的錯誤「Error in solve.default(fit$hessian) :系統計算上是
獨特的:互反條件數=2.19055e-16」，不知道是哪裡有問題？煩請指教，謝謝。



[程式範例]:

library(quantmod)

# Fetching data of APPLE from Yahoo Finance
getSymbols(""AAPL"", from = ""2010-01-01"", to =""2014-12-31"")

dailyrtn <- diff(log(AAPL$AAPL.Adjusted)) # Calculate the adjusted daily log
return

dailyrtn1 <- dailyrtn[-1,] # Delete the 1st row in which is an NA
dailyrtn2 <- dailyrtn1^2

library(fGarch) # Load package

# Fit the GARCH(1,1)
m2 = garchFit(~arma(1,1) + garch(1,1), data = dailyrtn2, trace = F)

# 接著就出現了上述的錯誤訊息


[環境敘述]:
Win 7
R version 3.2.1



[關鍵字]:
GARCH



--","R_Language"
"1955","M.1442371798.A.0C3","celestialgod","問題","Re: 同一檔案內的資料合併",2015-09-16 10:49:55,NA,NA,"※ 引述《thea (釷)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 拿到一個資料，是逗號分隔的檔案: 資料類似如下: id,20140101: user,ABC001,1: user,ADE002,2: user,TEX001,3: event,ABC001,T,C: event,ADE002,P,RUR: event,TEX001,pej,C: id,20140201: user,ABC001,1: user,ADE002,2: user,TEX001,3: event,ABC001,T,C: event,ADE002,P,RUR: event,TEX001,pej,C: .: .: .: 也就是說，資料是以id為單位做切割，所以我需要整理成以下格式: (以event為資料角度，把id跟user資料加入event): id,event1,event2,event3,user: 20140101,ABC001,T,C,1: 20140101,ADE002,P,PUR,2: 20140101,TEX001,pej,C,3: 20140201,ABC001,T,C,1: 20140201,ADE002,P,PUR,2: 20140201,TEX001,pej,C,3: [程式範例]:: 直覺上應該是要用迴圈來處理？: 不過因為有一些對照(user跟event): 之前處理的格式都是比較整齊的csv/excel: 第一次遇到這種資料格式: 找了一些資料有點沒頭緒，所以上來請教T__T: 感謝！！src = 'id,20140101
user,ABC001,1
user,ADE002,2
user,TEX001,3
event,ABC001,T,C
event,ADE002,P,RUR
event,TEX001,pej,C
id,20140201
user,ABC001,1
user,ADE002,2
user,TEX001,3
event,ABC001,T,C
event,ADE002,P,RUR
event,TEX001,pej,C
id,20140301
user,ABC001,1
user,ADE002,2
user,TEX001,3
event,ABC001,T,C
event,ADE002,P,RUR
event,TEX001,pej,C'

lines = readLines(textConnection(src)) # 這裡可以直接用 readLines(filename)
splitList = strsplit(lines, "","")
len = sapply(splitList, length)
loc = which(len == 2)
loc = c(loc, length(len)+1)
dat = do.call(rbind, lapply(1:(length(loc)-1), function(i){
  len_sub = len[(loc[i]+1):(loc[i+1]-1)]
  id = splitList[[loc[i]]]
  user = do.call(rbind, splitList[loc[i]+which(len_sub==3)])
  event = do.call(rbind, splitList[loc[i]+which(len_sub==4)])
  cbind(id[2], event[,2:4], user[match(event[,2],user[,2]),3])
}))
dat
#      [,1]       [,2]     [,3]  [,4]  [,5]
# [1,] ""20140101"" ""ABC001"" ""T""   ""C""   ""1""
# [2,] ""20140101"" ""ADE002"" ""P""   ""RUR"" ""2""
# [3,] ""20140101"" ""TEX001"" ""pej"" ""C""   ""3""
# [4,] ""20140201"" ""ABC001"" ""T""   ""C""   ""1""
# [5,] ""20140201"" ""ADE002"" ""P""   ""RUR"" ""2""
# [6,] ""20140201"" ""TEX001"" ""pej"" ""C""   ""3""
# [7,] ""20140301"" ""ABC001"" ""T""   ""C""   ""1""
# [8,] ""20140301"" ""ADE002"" ""P""   ""RUR"" ""2""
# [9,] ""20140301"" ""TEX001"" ""pej"" ""C""   ""3""

--","R_Language"
"1956","M.1442365508.A.9AD","thea","問題","同一檔案內的資料轉換",2015-09-16 09:05:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
拿到一個資料，是逗號分隔的檔案
資料類似如下id,20140101user,ABC001,1
user,ADE002,2
user,TEX001,3
event,ABC001,T,C
event,ADE002,P,RUR
event,TEX001,pej,Cid,20140201user,ABC001,1
user,ADE002,2
user,TEX001,3
event,ABC001,T,C
event,ADE002,P,RUR
event,TEX001,pej,C
.
.
.


也就是說，資料是以id為單位做切割，所以我需要整理成以下格式
(以event為資料角度，把id跟user資料加入event)

id,event1,event2,event3,user
20140101,ABC001,T,C,1
20140101,ADE002,P,PUR,2
20140101,TEX001,pej,C,3
20140201,ABC001,T,C,1
20140201,ADE002,P,PUR,2
20140201,TEX001,pej,C,3



[程式範例]:
直覺上應該是要用迴圈來處理？
不過因為有一些對照(user跟event)
之前處理的格式都是比較整齊的csv/excel
第一次遇到這種資料格式

找了一些資料有點沒頭緒，所以上來請教T__T


感謝！！

--","R_Language"
"1957","M.1442362526.A.17E","celestialgod","問題","Re: 矩陣生成",2015-09-16 08:15:23,NA,NA,"要寫很多行QQ

# 第一種
nr = nc = 4
m = matrix(0, nr, nc)
m[row(m) == col(m)] = 2
m[1, 1] = 1
m[nrow(m), nrow(m)] = 1
m[row(m) == col(m) - 1] = -1
m[row(m) == col(m) + 1] = -1
m[1, 2] = 0
m[nrow(m), nrow(m)-1] = 0


# 第二種
nr = nc = 4
m = matrix(0, nr, nc)
m[row(m) == col(m)] = c(1, rep(2, nrow(m)-2), 1)
m[row(m) == col(m) - 1] = c(0, rep(-1, nrow(m)-2))
m[row(m) == col(m) + 1] = c(rep(-1, nrow(m)-2), 0)※ 引述《hankckdy (漢克ㄦ)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: Create a square matrix, say A, with entries aii = 2, i = 2, . . . , n 1,: a11 = ann = 1, ai,i+1 = ai,i-1 = -1 , and aij = 0 elsewhere.: 若寫成4x4的矩陣的話 看起來應該是像這樣:  1  0  0  0: -1  2 -1  0:  0 -1  2 -1:  0  0  0  1: 請問要如何以程式碼呈現呢?: 謝謝: 程式範例]:--","R_Language"
"1958","M.1442352493.A.AFD","hankckdy","問題","矩陣生成",2015-09-16 05:28:11,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
Create a square matrix, say A, with entries aii = 2, i = 2, . . . , n 1,
a11 = ann = 1, ai,i+1 = ai,i-1 = -1 , and aij = 0 elsewhere.

若寫成4x4的矩陣的話 看起來應該是像這樣

 1  0  0  0
-1  2 -1  0
 0 -1  2 -1
 0  0  0  1

請問要如何以程式碼呈現呢?
謝謝

程式範例]:

--","R_Language"
"1959","M.1442328556.A.75B","buzz20374","問題","boxplot notch意義",2015-09-15 22:49:10,NA,NA,"- 問題[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:


關於boxplot的nutch，我還是不太懂它的意思。

如果兩個缺口不重疊，則兩個median值不同。

notch=-+1.58IQR/sqrt(n)

問題1:缺口的範圍在哪(是只要包括在""<""的範圍內都算嗎?

問題2:原來箱型圖就看得出median值不同，為什麼還要特別用nutch?

問題3:為什麼notch的圖形在圖形的上或下處會有折疊的形狀，那代表甚麼意思?

我看了 the r book的書，可是這部分真的看不懂。



--","R_Language"
"1960","M.1442325572.A.8B0","celestialgod","問題","Re: data.frame資料處理",2015-09-15 21:59:29,NA,NA,"原問題：

想進一步請問
在一個data.frame中

No1消費者 有A B C D四種消費時間點

A1代表No1 在第一次消費時點的消費金額
A2 A3 A4 A5代表No1第一次消費時點的其他狀態(停留時間、點擊商品數量..等˙)

B1 代表No1 在第二次消費時點的消費金額
B2 B3 B4 B5代表No2第二次消費時點的其他狀態


欲拿掉消費金額<5的群組
(即判斷每個群組的第一位是否<5，若<5，則將其消費伴隨的狀態也移除)
剩餘的往左靠齊


No A1 A2 A3 A4 A5 | B1 B2 B3 B4 B5 | C1 C2 C3 C4 C5 | D1 D2 D3 D4 D5
1   5  6  3  2  1 | 10 11 12 13 14 |  1  1  2  3  4 |  5  5  5  5  9
2   1  2  3  4  5 |  1  1  1  1  1 |  5  8  7  6  5 |  5  3  2  1  0


第一位消費者的A1 B1 D1 >=5 則留下ABD三個群組
第二位消費者的C1 D1    >=5 則留下CD 兩個群組
靠右平移 成為以下table

                  |                |                |
No A1 A2 A3 A4 A5 | B1 B2 B3 B4 B5 | C1 C2 C3 C4 C5 | D1 D2 D3 D4 D5
1   5  6  3  2  1 | 10 11 12 13 14 |  5  5  5  5  9 |
2   5  8  7  6  5 |  5  3  2  1  0 |                |



我不清楚你原始的column name是否這麼regular...

我定義一個block就是相同名稱開頭的名稱，

例如： A1~A5這樣稱做一個block，B1~B5亦是一個block

我的目標就是根據block的第一個元素去把該block設定為0或是不是0

block設定成0之後就回到你原本的左移案子了~~


但是要執行這個基本上就是只能用eval了...

因為有太多column不可能，手動去處理這些column

因此，我給了兩個eval方式

一個是用mutate_，另一個是單純的eval

我個人是覺得單純的eval難寫滿多的

但是mutate_要需要相對多的東西才能累積出來...

所以我無法肯定哪一個方法比較好

我自己本身對於mutate_這函數跟lazyeval這個套件都沒有很熟悉

下面的程式提供參考


好讀的程式碼：http://pastebin.com/NCAvfmfPlibrary(data.table)
library(dplyr)
library(magrittr)
N = 10
T = 5
nItem = 4
m = matrix(rbinom(N*T*nItem, 15, 0.4), N)
dat = data.table(id = 1:nrow(m), m) %>%
  setnames(paste0(""V"",1:20), paste0(rep(LETTERS[1:nItem],,, T),
    rep(1:T, nItem)))

varChecking = names(dat)[grepl(""[A-Z]1"", names(dat))]
f = function(x) ifelse(x < 5, 0, x)
dat_out = mutate_each_(dat, funs(f), varChecking)

namesWorking = gsub(""([A-Z])1"", ""\\1"", varChecking)
varsWorking = paste0(rep(namesWorking,,,T-1), rep(2:T,nItem))

## method 1
cmd = paste0('ifelse(', rep(namesWorking,,,T-1), '1<5,0,', varsWorking, ')')
mutate_(dat_out, .dots= setNames(lapply(cmd, lazyeval:::interp), varsWorking))

## method 2
eval(parse(text = paste0('dat_out=mutate(dat_out,',
  paste0(varsWorking, '=ifelse(', rep(namesWorking,,,T-1), '1<5,0,',
    varsWorking, ')', collapse = "",""), ')')))


最後提供一個簡單的方法，但是我怕記憶會爆掉XD

varWorking = gsub('([A-Z])\\d', '\\1', names(dat)) %>%
  unique %>% setdiff('id')
llply(varWorking, function(x){
  tmp_dat = dat %>% select(starts_with(x))
  tmp_dat %<>% setnames(paste0(""V"", 1:ncol(tmp_dat)))
  f = function(x) ifelse(tmp_dat$V1 > 5, x, 0)
  tmp_dat %<>% mutate_each(funs(f)) %>%
    setnames(paste0(x, 1:ncol(tmp_dat)))
  tmp_dat
}) %>% bind_cols %>% tbl_dt %>% mutate(id = dat$id)


最後補一個執行時間

N = 20000; T = 10; nItem = 1000

method 1: 68.03
method 2: 66.75
method 3: 53.87

測試程式碼：http://pastebin.com/HbVzPh6D基本上，method 1跟method 2差不多，method 3用空間換時間

所以看你的data.frame大小跟你的記憶體來選適合你的方法吧

--","R_Language"
"1961","M.1442323700.A.B59","Wush978","心得","R處理大量的JSON資料(Streaming Style)",2015-09-15 21:28:17,NA,NA,"[關鍵字]: R, JSON, Streaming

[重點摘要]:

這陣子我接了一個案子，要幫忙[核桃運算](http://www.macrodatalab.com/#/)開發他們
產品BigObject Analytics的R Client。恰巧，他們的RESTful API在撈資料的時候，吐回
來的格式是[jsonlines](http://jsonlines.org/)：

```

{""Sepal.Length"":""5.1"",""Sepal.Width"":""3.5"",""Petal.Length"":""1.4"",""Petal.Width"":""0.2"",""Species"":""setosa""}

{""Sepal.Length"":""4.9"",""Sepal.Width"":""3.0"",""Petal.Length"":""1.4"",""Petal.Width"":""0.2"",""Species"":""setosa""}

{""Sepal.Length"":""4.7"",""Sepal.Width"":""3.2"",""Petal.Length"":""1.3"",""Petal.Width"":""0.2"",""Species"":""setosa""}

{""Sepal.Length"":""4.6"",""Sepal.Width"":""3.1"",""Petal.Length"":""1.5"",""Petal.Width"":""0.2"",""Species"":""setosa""}

{""Sepal.Length"":""5.0"",""Sepal.Width"":""3.6"",""Petal.Length"":""1.4"",""Petal.Width"":""0.2"",""Species"":""setosa""}

{""Sepal.Length"":""5.4"",""Sepal.Width"":""3.9"",""Petal.Length"":""1.7"",""Petal.Width"":""0.4"",""Species"":""setosa""}
```


由於負擔起底層Client的責任，這是我第一次要正面迎戰這樣的資料。以前我遇到這種資
料，都是先亂七八糟的解掉，反正當下能用就好了。但是在寫Client的時候，這樣的解決
方法是不能讓人滿意的！

###### 亂七八糟的解法：

```r
library(magrittr)
src # 剛剛的文字資料
strsplit(src, ""\n"") %>% sapply(fromJSON)
```

話說最近用`magrittr`的pipeline style寫程式碼真的上癮了，害我寫python的時候覺得
python更難用了... 而且還找不到這種pipeline style。抱歉扯遠了！

所以在<del>不能漏氣</del>驅使自己進步的動力下，我開始運用過去和JSON打交道的經
驗簡單研究一下，目前在R 之中，要如何漂亮的處理這類的資料。

### R中處理JSON的套件

相信碰過這個問題的朋友不在少數，而大家的想法大概都類似：找個套件把問題解決掉就
好啦！

但是處理JSON的套件在R裡面就有好幾個，這裡列出我用過的套件：

- [rjson](https://cran.r-project.org/web/packages/rjson/index.html)- [RJSONIO](https://cran.r-project.org/web/packages/RJSONIO/index.html)- [jsonlite](https://cran.r-project.org/web/packages/jsonlite/index.html)而三個套件都提供了`fromJSON`函數，而偏偏三個函數的`fromJSON`都不能用：

#### rjson

`rjson::fromJSON`只處理第一行，後面的資料就當成沒看到了。

```> rjson::fromJSON(src)$Sepal.Length
[1] ""5.1""

$Sepal.Width
[1] ""3.5""

$Petal.Length
[1] ""1.4""

$Petal.Width
[1] ""0.2""

$Species
[1] ""setosa""
```

#### RJSONIO

`RJSONIO::fromJSON`則回傳了意味不明的一個... 東西？

```> RJSONIO::fromJSON(src)# 中間太可怕了，已經刪掉
                                                                 Species

""setosa\""}{\""Sepal.Length\"":\""4.9\"",\""Sepal.Width\"":\""3.0\"",\""Petal.Length\"":\""1.4\"",\""Petal.Width\"":\""0.2\"",\""Species\"":\""setosa\""}{\""Sepal.Length\"":\""4.7\"",\""Sepal.Width\"":\""3.2\"",\""Petal.Length\"":\""1.3\"",\""Petal.Width\"":\""0.2\"",\""Species\"":\""setosa\""}{\""Sepal.Length\"":\""4.6\"",\""Sepal.Width\"":\""3.1\"",\""Petal.Length\"":\""1.5\"",\""Petal.Width\"":\""0.2\"",\""Species\"":\""setosa\""}{\""Sepal.Length\"":\""5.0\"",\""Sepal.Width\"":\""3.6\"",\""Petal.Length\"":\""1.4\"",\""Petal.Width\"":\""0.2\"",\""Species\"":\""setosa\""}{\""Sepal.Len
gth\"":\""5.4\"",\""Sepal.Width\"":\""3.9\"",\""Petal.Length\"":\""1.7\"",\""Petal.Width\"":\""0.4\"",\""Species\"":\""setosa""
```

由於太過驚嚇，所以我只好趕快檢查一下這東西到底是什麼：

```r> str(.Last.value)Named chr [1:5] ""5.1"" ""3.5"" ""1.4"" ""0.2"" ...
 - attr(*, ""names"")= chr [1:5] ""Sepal.Length"" ""Sepal.Width"" ""Petal.Length""
""Petal.Width"" ...
```

看起來是個... 長度五的向量??? 阿彌陀佛！

#### jsonlite

`jsonlite`則是直接噴錯，簡單明瞭！

```r> jsonlite::fromJSON(src)Error: parse error: trailing garbage
          h"":""0.2"",""Species"":""setosa""} {""Sepal.Length"":""4.9"",""Sepal.Wi
                     (right here) ------^
```

我其實比較喜歡這樣子的風格：凡是不能處理的資料就噴錯，不要像`rjson`一樣不噴錯
但是給<del>錯誤</del>不預期的結果。要是我沒注意到有掉資料，直接用到產品之中，
就...

### 革命尚未成功，同志仍需努力

由於這種jsonlines格式的資料是非常非常的常見，所以如果R 沒有處理這類函數的功能
，也太扯了吧！

所以於是我就看了一下這三個套件有沒有issues區可以討論，而目前看起來，只有
`jsonlite`有上github。但是簡單看一下目前有開的issues，居然沒有要求這個套件處理
jsonlines！這通常表示，問題可能已經被解決了...

離題一下，在造訪`jsonlite`套件的過程中，我也注意到原來`jsonlite`是`RJSONIO`的
繼承者阿！喵了一下Reverse Depends、Reverse Imports的套件名單，看來都和Hadley大
大那幫人有扯上關係（httr、curl）。

果然，我找到了作者Jeroen Ooms在今年useR!研討會的一份投影片：[Streaming Data
IO in R](https://jeroenooms.github.io/mongo-slides/#1)還熱騰騰的！

裡面提到的`stream_in`這個函數，看起來不但是我需要的，而且還提供給R使用者以
Streaming Style處理大量JSON物件的能力。引述Jeroen Ooms投影片的內容：

```r
# This doesn't work...
fromJSON(""hugefile.json"")
Error: cannot allocate vector of size 8.1 Gb
```

在處理大量數據時，如果電腦不夠力，記憶體不夠，大家都常常會看到這類錯誤。

而Streaming Style是許多R 使用者陌生，但是在記憶體不足時非常有用的一種技巧。透
過以下的Demo（也是取自Jeroen Ooms的投影片）：

```r
# Calculate delay for flights over 1000 miles
library(dplyr)
library(curl)
con <- gzcon(curl(""http://jeroenooms.github.io/data/nycflights13.json.gz""))output <- file(tmp <- tempfile(), open = ""wb"")
stream_in(con, function(df){
  df <- filter(df, distance > 1000)
  df <- mutate(df, delta = dep_delay - arr_delay)
  stream_out(df, output, verbose = FALSE)
})
close(output)
```

這段程式碼中，R 先透過`curl`拿到一個來自網路的`connection`，然後串接到`gzcon`
、`stream_in`、中間處理資料的邏輯，最後由`stream_out`輸出到硬碟上。

其實這類connection的操作，我也是學R過後好久才知道的。不熟悉的朋友可以想像一下
，上面的程式碼就是一段不停運作的生產線。

- `curl("""")`就是原料供應處，不斷把未加工的資料放到生產線上。
- `gzcon`，不斷的以[gzip](https://zh.wikipedia.org/zh-tw/Gzip)格式將生產線上的
資料解壓縮，再放回生產線上。
- `stream_in`再不斷的讀取生產線上的資料，依照JSON的格式做解釋，並且轉換成R物件
，放回生產線
- `function(df) { ... }`則把生產線上的R物件拿出來，做過濾，再放回生產線上
- `stream_out`則把生產線上的物件再以JSON的格式寫到硬碟之中

在組裝生產線的時候，除了定義各種操作之外，就是要安排順序。而R擁有許多的
`connection`相關的函數，都是吃一個`connection`，再吐出一個`connection`。這種設
計就是要讓使用者組裝生產線。

ps. 在軟體工程中，這是一種叫做[Decorator
Pattern](https://en.wikipedia.org/wiki/Decorator_pattern)的設計模式的範例。

因此，`curl`回傳一個`connection`，`gzcon`接過去處理、再來是`stream_in`... 以此
類推。用這種寫法寫出來的程式，不需要一次把所有資料裝到記憶體之中（這就是
`fromJSON`做的事情）。在資料爆炸的現代來說，這種技巧是窮人在機器記憶體不夠時，
還是能用高效率處理問題的一種方法。對於很多資工背景的朋友來說，這種技巧可能是很
基礎的吧！可是對於非資工背景出身的我來說，其實也是寫程式寫了好多年，才注意到這
種技術。

部落格好讀版：http://wush.ghost.io/r-jsonlines/--","R_Language"
"1962","M.1442301758.A.231","celestialgod","問題","Re: 資料選取",2015-09-15 15:22:35,NA,NA,"假設dat是你的data.frame

基本款：mena(dat$earnings[dat$state == 'CA'])

1. aggregate(earnings ~ state, data = dat)

2. mean(subset(dat, state=='CA')$earnings)

3. tapply(dat$eanings, dat$state, mean)

library(dplyr)

4. dat %>% filter(state=='CA') %>% summarise(mean(earnings))

5. dat %>% group_by(state) %>% summarise(mean(earnings))

.....

很多種方式XD※ 引述《hankckdy (漢克ㄦ)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我想要計算在CA的人賺的錢的平均數: 所以想選取在state類別以下的標示是CA的資料:   earnings   age   gender state    celebrity: 1      10000  26   male    ND        no: 2   10000000  18 female    CA       yes: 3      85000  39   male    NE        no: 4      75000  50 female    NC        no: 5      91500  61   male    DE        no: 6      49500  39 female    SD        no: 7     105000  31 female    HI        no: 8      30000  24   male    NM        no: 9      40000  24 female    MD        no: 10     23000  45   male    VA        no: .: .--","R_Language"
"1963","M.1442300871.A.98C","hankckdy","問題","資料選取",2015-09-15 15:07:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想要計算在CA的人賺的錢的平均數
所以想選取在state類別以下的標示是CA的資料
  earnings   age   gender state    celebrity
1      10000  26   male    ND        no
2   10000000  18 female    CA       yes
3      85000  39   male    NE        no
4      75000  50 female    NC        no
5      91500  61   male    DE        no
6      49500  39 female    SD        no
7     105000  31 female    HI        no
8      30000  24   male    NM        no
9      40000  24 female    MD        no
10     23000  45   male    VA        no
.
.
.
請問有辦法只抽取CA的人的earning的資料嗎?
該如何用程式碼呈現呢?
謝謝

[環境敘述]:

[關鍵字]:


--","R_Language"
"1964","M.1442145575.A.19B","celestialgod","問題","Re: data.frame中count資料",2015-09-13 19:59:31,NA,NA,"最簡單的版本：

mat = matrix(round(168*runif(500)), 5, 100)
maxValue = max(mat)
t(apply(mat, 1, function(x){
  out = rep(0, maxValue+1)
  m = table(x)
  out[match(names(m), 0:maxValue)] = m
  out
}))※ 引述《thephone (phone)》之銘言：: 每一個row代表人,column代表100次行為出現的時間: 想要計算每個人在不同時點累積出現的數量: 具體來講: 有一張table如下: No  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15...100: 1  11  11  15  18 114 162 168  13  16  16  24  24  24  28  28: 2  15  15  15  16  17  18  30  31  33  36  36  38  40  40  45: 3   3   3   3   3   4  42  43  43  45  45  45  46  46  47  48: 4   2   2   2   3   5  30  40  40  45  45  37  38  67  80  81: 5   3   3   3   3   5  37  37  40  41  42  42  42  43  44  80: 想轉換成另一張不同時間點累積出現次數的table: No 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ....168: 1                        2     1     1  2     1: 2                                    3  1  1  1: 3      4 1: 4    3 1   1: 5      4   1: 第一行的不同欄位代表時間，table中的數字即是在該時間累積出現次數: 對於資料處理的部分不熟: 希望有經驗的各位可以給一些提示: 謝謝--","R_Language"
"1965","M.1442145021.A.849","thephone","問題","data.frame中count資料",2015-09-13 19:50:18,NA,NA,"每一個row代表人,column代表100次行為出現的時間
想要計算每個人在不同時點累積出現的數量

具體來講
有一張table如下

No  1   2   3   4   5   6   7   8   9  10  11  12  13  14  15...100
1  11  11  15  18 114 162 168  13  16  16  24  24  24  28  28
2  15  15  15  16  17  18  30  31  33  36  36  38  40  40  45
3   3   3   3   3   4  42  43  43  45  45  45  46  46  47  48
4   2   2   2   3   5  30  40  40  45  45  37  38  67  80  81
5   3   3   3   3   5  37  37  40  41  42  42  42  43  44  80


想轉換成另一張不同時間點累積出現次數的table

No 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 ....168
1                        2     1     1  2     1　　
2                                    3  1  1  1
3      4 1
4    3 1   1
5      4   1
第一行的不同欄位代表時間，table中的數字即是在該時間累積出現次數



對於資料處理的部分不熟
希望有經驗的各位可以給一些提示
謝謝

--","R_Language"
"1966","M.1442133382.A.049","laputaca","問題","for迴圈",2015-09-13 16:36:18,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

Warning messages:

 In cbind(one, d, p) :
 number of rows of result is not a multiple of vector length (arg 2)

[程式範例]:

for (i in 1:5)
{

one <- rep(1, 1000)
d <- data[i:999+i,2]
p <- data[i:999+i,3]
X <- cbind(one, d, p)

}

看了老半天，實在看不出問題出在哪==...

還是說在data選擇時範圍堶惜ㄞ鄍 i:999+i ?

請求解惑!

--","R_Language"
"1967","M.1442051179.A.F73","thephone","問題","data.frame資料處理",2015-09-12 17:46:17,NA,NA,"[問題敘述]:

想把A資料中 >0 的欄位留下並合併
轉成另一張table,　空值補0

簡化後示意範例如下

No A B C D E F G
1  1 3 0 0 4 2 1
2  1 0 0 0 2 0 3
3  0 1 0 3 0 0 0
4  1 3 2 1 0 0 0
5  0 6 0 0 0 0 0
6  0 0 0 0 2 2 1

轉成另一個data.frame

No a b c d e f g
1  1 3 4 2 1 0 0
2  1 2 3 0 0 0 0
3  1 3 0 0 0 0 0
4  1 3 2 1 0 0 0
5  6 0 0 0 0 0 0
6  2 2 1 0 0 0 0

謝謝

--","R_Language"
"1968","M.1441899128.A.3B9","PhysicsBoy","問題","使用function的執行速度",2015-09-10 23:32:06,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
問題是關於運算速度的差異

1.在A function中又使用了B function作運算
  Ex.
      r = abs(diff(P[(t-(N+1)):(t-1)]))
      sum(r)/N

2.先執行B function，將結果以b儲存，在將b用A function作運算
  Ex.
      sum(abs(diff(P[(t-(N+1)):(t-1)])))/N


以上兩種寫法想請教一下，在執行的速度上會有很大的差異嗎?
小弟完整的程式中會是包更多個function
煩請大大們給予點建議，謝謝 ^^

[程式範例]:



--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"1969","M.1441876016.A.0CA","celestialgod","問題","Re: 關於sweep function",2015-09-10 17:06:53,NA,NA,"舉個例子

X = replicate(3, 1:5)
#      [,1] [,2] [,3]
# [1,]    1    1    1
# [2,]    2    2    2
# [3,]    3    3    3
# [4,]    4    4    4
# [5,]    5    5    5

# 先看最簡單的例子，每一列乘上1:3
sweep(X, 2, 1:3, '*')
#      [,1] [,2] [,3]
# [1,]    1    2    3
# [2,]    2    4    6
# [3,]    3    6    9
# [4,]    4    8   12
# [5,]    5   10   15

# 每一行乘上1:5
sweep(X, 1, 1:5, '*')
#      [,1] [,2] [,3]
# [1,]    1    1    1
# [2,]    4    4    4
# [3,]    9    9    9
# [4,]   16   16   16
# [5,]   25   25   25

所以第一個input是一個矩陣

第二個input是控制你要做行運算還是做列運算

行運算是1，列運算是2 這裡跟apply的方向不同，要注意

第三個就根據第二個輸入對應長度的向量

像是第二個是1，第三個的向量長度就要跟

第一個input的每一行的長度相同(也就是跟列數相同)

第四個input是有兩個input的function

你如果用'+', '-', '*', '/'都是 a+b, a-b, a*b, a/b等等

你也可以自己輸入自己的函數，例如：

sweep(X, 1, 1:5, function(a,b) a^2+a+b)
#      [,1] [,2] [,3]
# [1,]    3    3    3
# [2,]    8    8    8
# [3,]   15   15   15
# [4,]   24   24   24
# [5,]   35   35   35


拿第一個例子來做解析

其實他就是在做這種事情：

sweep(X, 2, 1:3, '*') == '*'(X, t(replicate(nrow(X), 1:3))  )
#      [,1] [,2] [,3]
# [1,] TRUE TRUE TRUE
# [2,] TRUE TRUE TRUE
# [3,] TRUE TRUE TRUE
# [4,] TRUE TRUE TRUE
# [5,] TRUE TRUE TRUE

其中的元素長這樣：

t(replicate(nrow(X), 1:3))
#      [,1] [,2] [,3]
# [1,]    1    2    3
# [2,]    1    2    3
# [3,]    1    2    3
# [4,]    1    2    3
# [5,]    1    2    3

只是sweep比replicate這個方法有效率※ 引述《buzz20374 ()》之銘言：: 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 在看　The R book　的　sweep function: 最後面的例子我看不太懂: sweep(matdata,1,1:10,function(a,b) b): sweep(matdata,2,1:4,function(a,b) b): http://i.imgur.com/d4brvD9.png: function(a,b) b　代表甚麼意思呢？--","R_Language"
"1970","M.1441862246.A.312","buzz20374","問題","關於sweep function",2015-09-10 13:17:22,NA,NA,"問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:在看　The R book　的　sweep function　

最後面的例子我看不太懂

sweep(matdata,1,1:10,function(a,b) b)

sweep(matdata,2,1:4,function(a,b) b)http://i.imgur.com/d4brvD9.pngfunction(a,b) b　代表甚麼意思呢？



--","R_Language"
"1971","M.1441793315.A.AD4","Edster","問題","依照作者找package",2015-09-09 18:08:32,NA,NA,"版大分享的許多整理資料好用的package,
例如
dplyr, magrittr, readr, readxl, reshape ...

這些package都是類似的作者群.
例如
Hadley Wickham在上面四個package有三個是第一作者, 另一個第二作者.
如果我想要找該作者其他的package，要怎麼找呢？
我不是只要找Hadley的，是要用來查其他author用的.

[關鍵字]:package, author--","R_Language"
"1972","M.1441717300.A.64F","celestialgod","問題","Re: ?aggregate example問題",2015-09-08 21:01:37,NA,NA,"# 我固定seed，方便可以重生例子

set.seed(100)
testDF = data.frame(values = sample(1:3, 10, TRUE),
  by1 = sample(LETTERS[1:5], 10, TRUE))
testDF
#    values by1
# 1       1   D
# 2       1   E
# 3       2   B
# 4       1   B
# 5       2   D
# 6       2   D
# 7       3   B
# 8       2   B
# 9       2   B
# 10      1   D

如果我要計算屬於各類別的個數：

aggregate(testDF, by = list(testDF$by1), FUN = length)
#   Group.1 values by1
# 1       B      5   5
# 2       D      4   4
# 3       E      1   1

但是寫這樣會把by1自己也算進來，可以考慮這樣寫：

aggregate(. ~ by1, data=testDF, FUN = length)
#   by1 values
# 1   B      5
# 2   D      4
# 3   E      1

例子的by1, by2要另立變數，是為了當引言，介紹這種方式。


如果我要計算屬於各類別的平均值：

aggregate(testDF$values, by = list(testDF$by1), FUN = mean)
#   Group.1   x
# 1       B 2.0
# 2       D 1.5
# 3       E 1.0

這個方法是為了避免by1都是字串而報錯

所以在aggregate的時候要把values另外拉出來

下面有更好的寫法：

aggregate(. ~ by1, data=testDF, FUN = mean)
#   by1 values
# 1   B    2.0
# 2   D    1.5
# 3   E    1.0

如果看懂了簡單的例子

再用一個複雜一點的，這時候看應該就簡單很多了：

set.seed(100)
testDF = data.frame(values = sample(1:3, 10, TRUE),
  values_2 = sample(1:4, 10, TRUE),
  by1 = sample(LETTERS[1:3], 10, TRUE),
  by2 = sample(LETTERS[1:3], 10, TRUE))
#    values values_2 by1 by2
# 1       1        3   B   B
# 2       1        4   C   C
# 3       2        2   B   B
# 4       1        2   C   C
# 5       2        4   B   C
# 6       2        3   A   C
# 7       3        1   C   A
# 8       2        2   C   B
# 9       2        2   B   C
# 10      1        3   A   A

aggregate(. ~ by1 + by2, data=testDF, FUN = length)
#   by1 by2 values values_2
# 1   A   A      1        1
# 2   C   A      1        1
# 3   B   B      2        2
# 4   C   B      1        1
# 5   A   C      1        1
# 6   B   C      2        2
# 7   C   C      2        2

aggregate(. ~ by1 + by2, data=testDF, FUN = mean)
#   by1 by2 values values_2
# 1   A   A    1.0      3.0
# 2   C   A    3.0      1.0
# 3   B   B    1.5      2.5
# 4   C   B    2.0      2.0
# 5   A   C    2.0      3.0
# 6   B   C    2.0      3.0
# 7   C   C    1.0      3.0

建議可以直接學dplyr 可以參考拙作#1LhpJCfB (R_Language)aggregate其實在dplyr就是group_by + summarise


最後補充一下：

不知道你有沒有學過tapply

其實aggregate是tapply的強化板

像是第一個例子 計算長度

tapply(testDF$values, list(testDF$by1), length)
# B D E
# 5 4 1

差別只是tapply出來是向量，aggregate是data.frame

而且aggregate可以直接用公式做計算，比較快※ 引述《buzz20374 ()》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: ?aggregate 中的一個example: ## example with character variables and NAs: testDF <- data.frame(v1 = c(1,3,5,7,8,3,5,NA,4,5,7,9),:                      v2 = c(11,33,55,77,88,33,55,NA,44,55,77,99) ): by1 <- c(""red"", ""blue"", 1, 2, NA, ""big"", 1, 2, ""red"", 1, NA, 12): by2 <- c(""wet"", ""dry"", 99, 95, NA, ""damp"", 95, 99, ""red"", 99, NA, NA): aggregate(x = testDF, by = list(by1, by2), FUN = ""mean""): 我研究了很久，還是想不懂。: http://imgur.com/GziYRRP: 像是 FUN=""mean"" 到底作用了甚麼?: 最後的執行的結果也看不懂。(?aggregate前面的例子會)--","R_Language"
"1973","M.1441715869.A.205","buzz20374","問題","?aggregate example問題",2015-09-08 20:37:44,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:?aggregate 中的一個example

## example with character variables and NAs
testDF <- data.frame(v1 = c(1,3,5,7,8,3,5,NA,4,5,7,9),
                     v2 = c(11,33,55,77,88,33,55,NA,44,55,77,99) )
by1 <- c(""red"", ""blue"", 1, 2, NA, ""big"", 1, 2, ""red"", 1, NA, 12)
by2 <- c(""wet"", ""dry"", 99, 95, NA, ""damp"", 95, 99, ""red"", 99, NA, NA)
aggregate(x = testDF, by = list(by1, by2), FUN = ""mean"")

我研究了很久，還是想不懂。http://imgur.com/GziYRRP像是 FUN=""mean"" 到底作用了甚麼?

最後的執行的結果也看不懂。(?aggregate前面的例子會)



--","R_Language"
"1974","M.1441686801.A.DF1","microcat","問題","R 讀取檔案",2015-09-08 12:33:18,NA,NA,"[問題類型]:資料讀取[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:原始資料型態為 txt 檔，內容如下：ID REF  CAR-po-exp-A-2014-A00Z-07Composite Element RR    ^2 normalized (CN2/CN1) collapsed by compoAAB2    1.219416667BBC1    -0.15225CCD1    2.193375DDE1    -0.21875EEF2    -0.148666667其實只需要兩個欄位！ID_REF     CAR-po-exp-A-2014-A00Z-07AAB2    1.219416667BBC1    -0.15225CCD1    2.193375DDE1    -0.21875EEF2    -0.148666667因為有兩百筆檔案要合併，但是在讀取資料的時候，會因為資料中第二列的型態而無法正常讀取，導致無法合併資料請問各位是否有合適的語法協助，謝謝[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：[環境敘述]:R 3.1.1[關鍵字]:


--","R_Language"
"1975","M.1441632207.A.9FC","celestialgod","程式","Fw: R執行function的時候可以中斷嗎?",2015-09-07 21:23:26,NA,NA,"※ [本文轉錄自 Statistics 看板 #1Ji5VVCH ]作者: ee012345 (死小孩) 看板: Statistics
標題: [程式] R執行function的時候可以中斷嗎?
時間: Mon Jun 30 02:15:56 2014

[軟體程式類別]:
R

[程式問題]:
有的時候function跑不完
想設定成超過某個時間後強制中斷(不是首動按esc)

[軟體熟悉度]:
高(1年以上)

[問題敘述]:
想設定function執行超過某個時間就中斷
求高手解答 <(_ _)>

[程式範例]:

--","R_Language"
"1976","M.1441616956.A.62A","psinqoo","問題","LINUX 安裝R 出問題",2015-09-07 17:09:12,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的可以 PING

su -c 'rpm -Uvhhttp://ftp.yzu.edu.tw/Linux/Fedora-EPEL/7/x86_64/e/epel-release-7-5.noarch.rpm'sudo yum update


One of the configured repositories failed (Unknown),
 and yum doesn't have enough cached data to continue. At this point the only
 safe thing yum can do is fail. There are a few ways to work ""fix"" this:

     1. Contact the upstream for the repository and get them to fix the
problem.

     2. Reconfigure the baseurl/etc. for the repository, to point to a working
        upstream. This is most often useful if you are using a newer
        distribution release than is supported by the repository (and the
        packages for the previous distribution release still work).

     3. Disable the repository, so yum won't use it by default. Yum will then
        just ignore the repository until you permanently enable it again or
use
        --enablerepo for temporary usage:

            yum-config-manager --disable <repoid>

     4. Configure the failing repository to be skipped, if it is unavailable.
        Note that yum will try to contact the repo. when it runs most
commands,
        so will have to try and fail each time (and thus. yum will be be much
        slower). If it is a very temporary problem though, this is often a
nice
        compromise:

            yum-config-manager --save
--setopt=<repoid>.skip_if_unavailable=true




[程式範例]:程式碼可貼於以下網站：[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:

R
centos 7選擇性，也許未來有用--

--","R_Language"
"1977","M.1441534924.A.7B9","john5601","問題","匯入txt讀檔問題",2015-09-06 18:21:52,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前是有大量的txt檔需要讀入跑分析，但發現一直有部份檔案是讀入不了的

抓出兩個檔案 一個讀入有問題 一個沒有 不知道能不能請大大們幫測試看看哪裡有問題

20150101_02_passtag.txt 是正常可讀入的
20150101_03_passtag.txt 是無法讀入的

我都是用 read.table(file = file1,encoding=""ASCII"",sep=""\t"")

編碼部分都測過沒有問題

無法讀入的檔案 若是我把 sep=""\t"" 去掉 變成以下這樣http://imgur.com/kIv06Ky正常讀入的檔案應該像這樣http://imgur.com/rjqeQBP文字檔連結:https://www.dropbox.com/sh/bjud8jbnqg2gpu8/AAAxmwEeUvTkAGKEJcWNHBe7a?dl=0[程式範例]:

簡單讀檔的程式碼http://pastebin.com/R4b93eht[環境敘述]:

R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1


[關鍵字]:

匯入檔案 txt 分隔符號

--","R_Language"
"1978","M.1441504520.A.726","liumang","問題","將CSV匯入至R時，X軸的數值會怪怪的",2015-09-06 09:55:16,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
大家好
小弟是今年剛晉升成為生命科學領域相關的菸酒生
因為實驗結果需要做圖
所以我就開始使用大學老師有提過的R來做圖

我的想法是先把數據全部打在EXCEL後
將其轉成為.csv檔
在import到R裡面去
利用R來做barplot
所以我以各種不同的濃度作為X軸
存活率作為Y軸
但是不知道為什麼
每每做出來的圖
X軸濃度的數值前面都還會有個X
例如假設我濃度是 3
那他就會顯示為X3
但如果我改用中文的話
就不會再出現X這個字

所以很苦惱......

[程式範例]:http://imgur.com/pveBV0C(點圖可以放大)

[環境敘述]:
R版本:3.2.2 x64
作業系統:Windows 10 x64

[關鍵字]:
csv 做圖 X軸

--
我不主動找妳
不是因為妳不重要
而是
我不知道自己在妳心中的地位
到底重不重要
May your love be with me...

--","R_Language"
"1979","M.1441355130.A.B23","aee36900","問題","Re: plot 3D圖如何標示最大值",2015-09-04 16:25:28,NA,NA,"感謝大大分享

新手還不太理解
熟悉了matrix的function
目前先使用 summary(pred.tmp$maxRRfit) 的方式
來得到最大的RR值以及lag day

先放棄在3D圖上標示@@※ 引述《celestialgod (天)》之銘言：: 如果要找最大值可以直接使用optim來做: 我直接base在andrew大大的程式上寫的....: findTheMax = optim(c(1,1),:   function(x) -predict(mod, data.frame(x=x[1],y=x[2]), type = ""response""),:   lower = c(1,1), upper = c(9,9)): findTheMax$par    # location of x,y: findTheMax$value  # maximum value of z: ※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：--

--","R_Language"
"1980","M.1441351341.A.975","buzz20374","問題","算data.frame的mean",2015-09-04 15:22:17,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的http://i.imgur.com/DkLuZ5N.png我想請問一下

為什麼我照著打結果ore.m都是NA

Warning message:
In mean.default(ore) : argument is not numeric or logical: returning NA

是不是data.frame的mean不能這樣取呢?

[程式範例]:ore<-data.frame(
x=c(67,54,72,64,39,22,58,43,46,34),
y=c(24,15,23,19,16,11,20,16,17,13)
)

ore.m<-mean(ore)
ore.m






--","R_Language"
"1981","M.1441264078.A.C24","SFMAndroid","問題","ODBC和read.odbc.ffdf",2015-09-03 15:07:55,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近需要讀一個約2,000,000*10的data

在Microsoft Access裡面

檔案類型是~.mdb

試過用sqlQuery(channel, ""select * from table_name"")

結果出現cannot allocate vector of size XX MB


後來找到ETLUtils pkg

但在讀檔案時顯示

read.odbc.ffdf 1..Error in as.POSIXlt.character(x, tz, ...) :
  character string is not in a standard unambiguous format


貌似是日期格式錯誤

但是不知道該如何修改

也沒有相關參數設定

想請問有沒有別的方法可以讀入這筆資料



[程式範例]:

代碼很短就直接貼了

library(RODBC)
library(ETLUtils)

channel <- odbcConnectAccess(""Myfile.mdb"")

Ldata <- read.odbc.ffdf(
          query = ""select * from mytable_name"",
          VERBOSE = TRUE)

[環境敘述]:

R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] ETLUtils_1.3        ff_2.2-13           bit_1.1-12          bigmemory.sri_0.1.3

loaded via a namespace (and not attached):
[1] tools_3.2.1

[關鍵字]:

ETLUtils, RODBC

--","R_Language"
"1982","M.1441216376.A.CD2","celestialgod","問題","Re: plot 3D圖如何標示最大值",2015-09-03 01:52:52,NA,NA,"如果要找最大值可以直接使用optim來做

我直接base在andrew大大的程式上寫的....

findTheMax = optim(c(1,1),
  function(x) -predict(mod, data.frame(x=x[1],y=x[2]), type = ""response""),
  lower = c(1,1), upper = c(9,9))
findTheMax$par    # location of x,y
findTheMax$value  # maximum value of z※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: ※ 引述《aee36900 (持久戰!!)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]:: : 練習dlnm模型: : 想要在3D圖形上將RR最大值的數值及對應的天數找出來: : 不知道有無function可以直接使用計算出來: : 圖形如下: : http://imgur.com/6IcvqCW: : [程式範例]:: : install.packages(""dlnm""): : library(dlnm): : cb3.pm <- crossbasis(chicagoNMMAPS$pm10, lag=1, argvar=list(fun=""lin"",cen=0),: : arglag=list(fun=""strata"")): : varknots <- equalknots(chicagoNMMAPS$temp,fun=""bs"",df=5,degree=2): : lagknots <- logknots(30, 3): : cb3.temp <- crossbasis(chicagoNMMAPS$temp, lag=30, argvar=list(fun=""bs"",knots=varknots,cen=21), arglag=list(knots=lagknots)): : model3 <- glm(death ~ cb3.pm + cb3.temp + ns(time, 7*14) + dow,family=quasipoisson(), chicagoNMMAPS): : pred3.temp <- crosspred(cb3.temp, model3, by=1): : plot(pred3.temp, xlab=""Temperature"", zlab=""RR"", theta=200, phi=40, lphi=30,: : main=""3D graph of temperature effect""): : [環境敘述]:: : R version 3.1.3 (2015-03-09): : Platform: x86_64-redhat-linux-gnu (64-bit): : Running under: CentOS release 6.5 (Final)--","R_Language"
"1983","M.1441213890.A.29C","andrew43","問題","Re: plot 3D圖如何標示最大值",2015-09-03 01:11:21,NA,NA,"不知道是不是答非所問，你跑看看。

# 建資料
dt.obs <- data.frame(
  x = c(3,5,2,1,2,3,8),
  y = c(1,6,4,9,4,2,3),
  z = c(3,26,9,9,9,5,25)
)

# 迴歸式
mod <- glm(z ~ x + y, data = dt.obs, family=quasipoisson)
summary(mod)

# 放網格和求預測值
library(plot3D)
grid.lines <- 20
M <- mesh(
  seq(1, 9, length.out = grid.lines),
  seq(1, 9, length.out = grid.lines)
)
dt.pred <- data.frame(
  x = as.vector(M$x),
  y = as.vector(M$y)
)
dt.pred$z <- predict(mod, dt.pred, type = ""response"")

# dt.pred 就是網格各點的資料
# 要找特別的 (x,y,z) 可以從這裡找找看

# 一號圖
scatter3D(dt.obs$x, dt.obs$y, dt.obs$z, surf = list(
  x = M$x, y = M$y,
  z = matrix(dt.pred$z, nrow = grid.lines),
  fit = predict(mod, type=""response"")))

dev.new()

# 二號圖
x <- M$x
y <- M$y
z <- matrix(dt.pred$z, nrow = grid.lines)
surf3D(x,y,z)※ 引述《aee36900 (持久戰!!)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 練習dlnm模型: 想要在3D圖形上將RR最大值的數值及對應的天數找出來: 不知道有無function可以直接使用計算出來: 圖形如下: http://imgur.com/6IcvqCW: [程式範例]::: install.packages(""dlnm""): library(dlnm): cb3.pm <- crossbasis(chicagoNMMAPS$pm10, lag=1, argvar=list(fun=""lin"",cen=0),: arglag=list(fun=""strata"")): varknots <- equalknots(chicagoNMMAPS$temp,fun=""bs"",df=5,degree=2): lagknots <- logknots(30, 3): cb3.temp <- crossbasis(chicagoNMMAPS$temp, lag=30, argvar=list(fun=""bs"",knots=varknots,cen=21), arglag=list(knots=lagknots)): model3 <- glm(death ~ cb3.pm + cb3.temp + ns(time, 7*14) + dow,family=quasipoisson(), chicagoNMMAPS): pred3.temp <- crosspred(cb3.temp, model3, by=1): plot(pred3.temp, xlab=""Temperature"", zlab=""RR"", theta=200, phi=40, lphi=30,: main=""3D graph of temperature effect""):: [環境敘述]::: R version 3.1.3 (2015-03-09): Platform: x86_64-redhat-linux-gnu (64-bit): Running under: CentOS release 6.5 (Final):

--","R_Language"
"1984","M.1441187409.A.8EF","celestialgod","問題","Re: .txt的資料匯入及行列轉換",2015-09-02 17:50:06,NA,NA,"※ 引述《milkdad (milkdad)》之銘言：: [問題敘述]:: 想匯入一個約100mb的.txt檔: 此檔案的“列”只有12筆 但“行”有約92萬筆: 因此想要做行列轉換 以利後續分析: 但天真如我卻發現連匯入資料都成問題:: [程式範例]::: 我是想直接用read.table的方式匯入 再用 t()來轉置 如下: datfile=paste(路徑, '檔案.txt', sep=''): data=read.table(datfile, header=TRUE,sep='\t'): 但到了這一步 R就一直轉了兩個小時 因此還沒試到行列轉換: 才想上來詢問 麻煩各位大大幫忙你要做轉置，假設你全部都是數值

我生成資料，試試看各種讀取器的效能...

先說結論，因為讀進來的型態是data.frame

所以R必須要確定每行每列個數相等

而且同一行要一樣型態

我覺得在這上面會花上一些時間

但是測試起來其實沒差很多

反而是讀入字串再轉換成相對的型態花了很長時間

因此，如果是這種案例，我建議用暴力法去做，快而簡單

因為暴力法做的話，checking部分就都沒有跑

你只需要確定自己input的檔案是regular就好

程式如下： (關於fread, magrittr請參考我的文章：資料整理套件介紹)

library(data.table)
library(readr)
library(stringr)
library(magrittr)

set.seed(200)
datOriginal = round(matrix(rnorm(5e5*12), 12), 4)
inputStr = str_c(apply(datOriginal, 1, str_c, collapse = ','),
  collapse = '\n')
datOriginal = t(datOriginal)

## the fastest way
st = proc.time()
tmp = readLines(textConnection(inputStr))
dat = do.call(cbind, strsplit(tmp, ',')) %>% {matrix(as.numeric(.), nrow(.))}
proc.time() - st
#   user  system elapsed
#  18.11    0.09   18.36
all.equal(dat, datOriginal) # TRUE

st = proc.time()
dat = t(as.matrix(fread(inputStr)))
proc.time() - st
#   user  system elapsed
#  40.92    0.10   41.41
all.equal(dat, datOriginal, check.attributes = FALSE) # TRUE

st = proc.time()
dat = read_csv(inputStr)
proc.time() - st
# 半小時跑不出來
all.equal(t(as.matrix(dat)), datOriginal)

st = proc.time()
dat = read.csv(inputStr)
proc.time() - st
# 半小時跑不出來
all.equal(t(as.matrix(dat)), datOriginal)

st = proc.time()
numCols = readLines(textConnection(inputStr), n = 1) %>%
  {nchar(.) - nchar(gsub(',', '', .)) + 1}
dat = fread(inputStr, colClasses = rep('character', numCols)) %>%
  {matrix(as.numeric(as.matrix(.)), ncol(.), byrow = TRUE)}
proc.time() - st
#   user  system elapsed
#  39.30    0.08   39.67
all.equal(dat, datOriginal) # TRUE

st = proc.time()
numCols = readLines(textConnection(inputStr), n = 1) %>%
  {nchar(.) - nchar(gsub(',', '', .)) + 1}
dat = read_csv(inputStr, col_types =
replicate(numCols,col_character(),simplify=FALSE)) %>%
  {matrix(as.numeric(as.matrix(.)), ncol(.), byrow = TRUE)}
proc.time() - st
# 一樣半小時沒出來...
all.equal(dat, datOriginal)


--","R_Language"
"1985","M.1441159158.A.BB8","aee36900","問題","plot 3D圖如何標示最大值",2015-09-02 09:59:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
練習dlnm模型
想要在3D圖形上將RR最大值的數值及對應的天數找出來
不知道有無function可以直接使用計算出來

圖形如下http://imgur.com/6IcvqCW[程式範例]:install.packages(""dlnm"")library(dlnm)cb3.pm <- crossbasis(chicagoNMMAPS$pm10, lag=1, argvar=list(fun=""lin"",cen=0),arglag=list(fun=""strata""))varknots <- equalknots(chicagoNMMAPS$temp,fun=""bs"",df=5,degree=2)lagknots <- logknots(30, 3)cb3.temp <- crossbasis(chicagoNMMAPS$temp, lag=30, argvar=list(fun=""bs"",knots=varknots,cen=21), arglag=list(knots=lagknots))model3 <- glm(death ~ cb3.pm + cb3.temp + ns(time, 7*14) + dow,family=quasipoisson(), chicagoNMMAPS)pred3.temp <- crosspred(cb3.temp, model3, by=1)plot(pred3.temp, xlab=""Temperature"", zlab=""RR"", theta=200, phi=40, lphi=30,main=""3D graph of temperature effect"")[環境敘述]:R version 3.1.3 (2015-03-09)Platform: x86_64-redhat-linux-gnu (64-bit)Running under: CentOS release 6.5 (Final)--

--","R_Language"
"1986","M.1441097416.A.919","DrRd","問題","亂數選取但不能連續",2015-09-01 16:50:14,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:從1~10中隨機抽取5個數，但不能出現三個以上的連續數字例如：不能抽出1、2、3，或者是3、4、5、6之類的目前想到是否可以檢查如果抽出來的數字如果有超過三個以上的連續數字就用sample重抽但是不知道如何檢查[程式範例]:無[環境敘述]:R 3.2[關鍵字]:隨機抽樣--","R_Language"
"1987","M.1441086807.A.EB3","milkdad","問題",".txt的資料匯入及行列轉換",2015-09-01 13:53:25,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:想匯入一個約100mb的.txt檔此檔案的“列”只有12筆 但“行”有約92萬筆因此想要做行列轉換 以利後續分析但天真如我卻發現連匯入資料都成問題[程式範例]:我是想直接用read.table的方式匯入 再用 t()來轉置 如下datfile=paste(路徑, '檔案.txt', sep='')data=read.table(datfile, header=TRUE,sep='\t')但到了這一步 R就一直轉了兩個小時 因此還沒試到行列轉換才想上來詢問 麻煩各位大大幫忙[環境敘述]:作業系統：OSX 10.9.5R版本：3.1.3[關鍵字]:資料匯入 行列轉換--","R_Language"
"1988","M.1441017799.A.E95","buzz20374","問題","r 基本問題",2015-08-31 18:43:15,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別)[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:最近開始學r，試著把簡單的題目用r算出來。x<-c(""BMW"",""Benz"",""BMW"",""Volvo"",""Benz"",""BMW"")table(x)如果我只想算BMW的次數，不要算其他車子出現的次數，請問我要怎麼去做? 試了一陣子試不太出來。--","R_Language"
"1989","M.1440998191.A.DD8","psinqoo","問題","Re: RStudio Server在Windows使用",2015-08-31 13:16:26,NA,NA,"※ 引述《naturalsmen (日日夜夜)》之銘言：: ※ 引述《naturalsmen (日日夜夜)》之銘言：: : $ sudo apt-get install r-base: : $ sudo apt-get install gdebi-core: : $ wget https://download2.rstudio.org/rstudio-server-0.99.473-amd64.deb: : $ sudo gdebi rstudio-server-0.99.473-amd64.deb: : 都ok 然後輸入: : $ ps -aux|grep rstudio-server: (刪光光): 自從小弟開始操作RStudio Server後: 除了一開始發現可以雲端使用的興奮感外: 就開始思考他的好處在哪: 由於自己不是IT背景 對Web上使用的見識和思考有限: 目前只知道以下限制: 1. 一台Linux一個使用者只能有一個帳號:    除非另外新增: 2. A電腦(RStudio Server設置處)開著才能讓其他人連線:    且限制在同網域、Windows不支援不用同網域~主機在美國一樣能連
    跟作業系統無關 Windows 一樣能連 Linux 上的
    記得開防火牆: 因為最近對RStudio Server很有興趣: 想知道有甚麼優點？: 最多人討論的還是""多人操作""和""可攜性"": 多人操作: 其實不是很理解: 是一群user一起操作""同一份Script""的意思嗎？: 或是同一個Project？: 但先不論分析上的連續性 每個人coding的習慣也都不同: 若照我的理解: 共同操作無論是對一份Script還是一個Project: 好像都不會有顯著的效率提升？: 可攜性: 好像是指""就算電腦沒有裝R(或RStudio) 只要有網路就能遠端操作"": 但是就我上面所提到的限制而言: 若想要操作R進行分析時: A電腦(伺服器)不在身邊也無法連接 還有限制同網域的問題: 既然如此 若想在""沒有裝R的電腦使用R""沒有網域問題~~
筆線能裝的記憶體有限: 勢必要將A電腦隨身攜帶(並確保有電 有網路): 才能讓其他裝置連接: 可是既然A電腦就已經有R了: 又何必多此一舉再用RStudio Server呢？: 雖然可以讓其他user連接: 但這就回到上面""多人操作""的問題了: 小弟覺得R能夠在雲端進行運算實在是很令人興奮的突破: 更不用說還有Shiny這個超強大的package: 詢問這些問題也是想讓自己更了解自己的分析工具: 希望版上的前輩能夠不吝解答小弟疑惑~使用手冊在這 請詳閱https://www.rstudio.com/products/rstudio/download-server/看完後應該能解答你七成問題

--

--","R_Language"
"1990","M.1440912193.A.588","bboybighead2","問題","如何將矩陣轉換成陣列",2015-08-30 13:23:07,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
想要將矩陣轉換成陣列的格式
例如這邊有3*3的矩陣，有ABC三間公司
    A    B    C
A   0    1    2
B   0    0    2
C   1    2    0

想要消除交易量0的資料並轉換成下列格式：

賣方 買方  交易量
A     B     1
A     C     2
B     C     2
C     A     1
C     B     2

不知道R有沒有相關套件可以使用，或是如何編寫這樣的程式，謝謝大家。

--","R_Language"
"1991","M.1440846466.A.74A","naturalsmen","問題","Re: RStudio Server在Windows使用",2015-08-29 19:07:43,NA,NA,"※ 引述《naturalsmen (日日夜夜)》之銘言：: $ sudo apt-get install r-base: $ sudo apt-get install gdebi-core: $ wget https://download2.rstudio.org/rstudio-server-0.99.473-amd64.deb: $ sudo gdebi rstudio-server-0.99.473-amd64.deb: 都ok 然後輸入: $ ps -aux|grep rstudio-server(刪光光)

自從小弟開始操作RStudio Server後

除了一開始發現可以雲端使用的興奮感外

就開始思考他的好處在哪

由於自己不是IT背景 對Web上使用的見識和思考有限

目前只知道以下限制

1. 一台Linux一個使用者只能有一個帳號

   除非另外新增

2. A電腦(RStudio Server設置處)開著才能讓其他人連線

   且限制在同網域、Windows不支援

因為最近對RStudio Server很有興趣

想知道有甚麼優點？

最多人討論的還是""多人操作""和""可攜性""多人操作其實不是很理解

是一群user一起操作""同一份Script""的意思嗎？

或是同一個Project？

但先不論分析上的連續性 每個人coding的習慣也都不同

若照我的理解

共同操作無論是對一份Script還是一個Project

好像都不會有顯著的效率提升？可攜性好像是指""就算電腦沒有裝R(或RStudio) 只要有網路就能遠端操作""

但是就我上面所提到的限制而言

若想要操作R進行分析時

A電腦(伺服器)不在身邊也無法連接 還有限制同網域的問題

既然如此 若想在""沒有裝R的電腦使用R""

勢必要將A電腦隨身攜帶(並確保有電 有網路)

才能讓其他裝置連接

可是既然A電腦就已經有R了

又何必多此一舉再用RStudio Server呢？

雖然可以讓其他user連接

但這就回到上面""多人操作""的問題了



小弟覺得R能夠在雲端進行運算實在是很令人興奮的突破

更不用說還有Shiny這個超強大的package

詢問這些問題也是想讓自己更了解自己的分析工具

希望版上的前輩能夠不吝解答小弟疑惑~

--","R_Language"
"1992","M.1440810668.A.527","evilove","問題","錯誤訊息不知哪裡出錯",2015-08-29 09:11:05,NA,NA,"我嘗試抓 web of science的資料，但是出現錯誤訊息，不曉得哪裡出問題？

謝謝
##################

wosurl<-""http://apps.webofknowledge.com.mutex.gmu.edu/full_record.do?product=MEDLINE&search_mode=AdvancedSearch&qid=3&SID=2CCAKeGnJ4AWExADGqh&page=1&doc=1""numdocs<-733
setwd(""C:\\Users\\R3\\Downloads\\wos"")

# loading library
library(stringr)

# dowloading the html code and parsing data
wosurl_str<-substr(wosurl, 1, (nchar(wosurl)-1))

for(k in 1:numdocs)
{
  print(paste(""--Record number: "",k,"" (out "",numdocs,"")--"",sep=''))
  url<-paste(wosurl_str,k,sep='')
  all_lines<-readLines(url)
  line<-all_lines[str_detect(all_lines,""UT=WOS:"")]
  line_str<-unlist(strsplit(str_extract(line,""UT=WOS:.+""),""&""))
  wosut<-sub('WOS:','',line_str[1])

  line<-all_lines[str_detect(all_lines,""NCBI_DB&PMID"")]
  line_str<-unlist(strsplit(str_extract(line,""PMID.+""),""&""))
  pmid<-line_str[1]

  data<-cbind(pmid,wosut)

  write.table(data,file='wosut.txt',row.names=F,col.names=F,append=T,sep="","")

write.table(all_lines,file=paste('wos',pmid,'.txt',sep=''),row.names=F,col.names=F,append=F)
}

# creating the search string for WoS
uts<-read.csv(file=""wosut.txt"",header=F,sep="","",fill=T)
uts<-subset(uts,uts[,2]!="""")
searchwos<-paste(uts[,2],collapse=' OR ')

write.table(searchwos,file='search.txt',row.names=F,col.names=F,append=F,quote=F)




錯誤訊息：> # creating the search string for WoS> uts<-read.csv(file=""wosut.txt"",header=F,sep="","",fill=T)Error in read.table(file = file, header = header, sep = sep, quote = quote,
 :
  no lines available in input> uts<-subset(uts,uts[,2]!="""")Error in subset(uts, uts[, 2] != """") : object 'uts' not found> searchwos<-paste(uts[,2],collapse=' OR ')Error in paste(uts[, 2], collapse = "" OR "") : object 'uts' not found
>
write.table(searchwos,file='search.txt',row.names=F,col.names=F,append=F,quote=F)
Error in is.data.frame(x) : object 'searchwos' not found
>

--","R_Language"
"1993","M.1440808740.A.C3A","buzz20374","問題","r語言 初學者問題",2015-08-29 08:38:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的最近開始讀原文書(The R Book)，有個很基本的問題想不太懂。https://imgur.com/CMK1WC0y<-4.3

z<-y[-1]

length(z)

[1] 0

請問 z<-y[-1] 代表甚麼意思?

我試了z<-y[0] z<-y[-2] 可是還是不懂



--","R_Language"
"1994","M.1440775567.A.8A3","celestialgod","程式","Fw: R 利用for做變數宣告",2015-08-28 23:26:06,NA,NA,"※ [本文轉錄自 Statistics 看板 #1IOLy9VR ]作者: Wush978 (拒看低質媒體) 看板: Statistics
標題: Re: [程式] R 利用for做變數宣告
時間: Sat Oct 19 00:17:02 2013※ 引述《robin112 (Robin)》之銘言：:   那請問如果我想開始使用y0~y9的話是要怎麼使用呢?:   例如:   boxplot(y0$x~y0$y):   boxplot(y1$x~y1$y):   ...:   boxplot(y9$x~y9$y)```
for(i in seq_along(list.x)) { # seq_along(list.x) 等同於 1:length(list.x)
  boxplot(list.x[[i]]$x ~ list.x[[i]]$y)
  locator(1) # 如果你想要點一下滑鼠再看下一張圖
  # saevPlot(...) 如果你想要把圖片輸出
}
```
這是你要的嗎？:   另外:   list.x為宣告一個空白list:   在for迴圈裡面的length(list.x)會隨著i跑嗎?:   有點想不透這一行這牽涉到一點R 的基礎資料結構知識。

大部份R 的物件，包含你上面提到的y0, y1, y0$x, y0$y, ...

都是「向量」

而R 都允許使用者透過`[`或`[[`來操作和編輯向量內容。

ex:

```r
a <- numeric(0) # 一個長度0的數值向量
a[5] <- pi
a
# [1]       NA       NA       NA       NA 3.141593
```

另外歡迎你開始學習使用list物件，list也是一種向量，而且是「R物件」的向量。

也就是說，所有的R物件都可以往裡面塞。

它非常強大。

```r
a <- list()
a[[1]] <- pi # numeric
a[[2]] <- 2L # integer
a[[3]] <- letters # character
a[[4]] <- TRUE # logical
a[[5]] <- Sys.time() # time
a[[6]] <- Sys.Date()
a[[7]] <- iris
a[[8]] <- function() { print(""this is a function"") }
a
a[[1]]
a[[2]]
...
a[[8]]() # 呼叫函數
```

list 也可以提供用字串當名字的方式來儲存或取出物件

```r
a <- list(a = 1, b = letters, c = Sys.time(), d = names)
# 直接定義長度為4的`list`, 並且取名字

a[[""a""]]
a[[""b""]]
a[[1]] # what is this?
```

學會使用list之後，就可以解決用回圈來取名字以及用回圈來access變數的需求。

後續若有純技術的問題，歡迎到R_Language板討論。:   謝謝指教: ※ 引述《BugEater (無庸)》之銘言：: : 試試下面這個應該可行: : z=paste(""y"",0:9,sep=""""): : ye=c(2000:2009): : list.x<-list(): : for ( i in 1:10 ): : {: : list.x[[length(list.x)+1]] <- x[year == ye[i],]: : }: : names(list.x)<-z: : attach(list.x)--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"1995","M.1440756944.A.1E4","celestialgod","程式","Fw: 請問如何看R中 Package 的程式碼",2015-08-28 18:15:42,NA,NA,"※ [本文轉錄自 Statistics 看板 #1GfWMcwv ]作者: Wush978 (拒看低質媒體) 看板: Statistics
標題: Re: [程式] 請問如何看R中 Package 的程式碼
時間: Fri Nov 16 17:21:39 2012※ 引述《henry7448 (P=MC)》之銘言：: 如標題: 想請問要如何能觀看R中Package的原始程式碼: 謝謝這裡列一下我知道的方法，

方法1:

如果該函數有被export到`R_GlobalEnv`,

那只要載入package後, 打函數名稱後，會在console印出函數內容

例：

```
library(inline)
cxxfunction
```

方法2:

有時候想要看某些沒有被export的函數內容時，需要加上namespace:

<package name>:::<function name>

例:

```
library(Rcpp)
SHLIB # Error: object 'SHLIB' not found
Rcpp:::SHLIB
```

方法3:

直接下載source code下來看

例：

```
download.packages(""Rcpp"", destdir=""."", type=""source"")
```

應該會下載一個 Rcpp-<版本>.tar.gz

解壓縮後找下面兩個資料夾看source code:

R // R code
src // C code

方法4:

有時候函數名稱只是一個方法，而根據物件的不同會套用不同的程式碼。

例如`plot`, 這種函數叫作""Generic Function""

這很麻煩，因為R目前有S3, S4兩種方式來套用這種函數。

舉例來說，我想要檢查以下這段程式碼中的`plot`的實際指令：


```
data(iris)
g <- lm(Sepal.Length~Sepal.Width,iris)
plot(g)
```

如果直接輸入`?plot`，只會看到Description寫說這是個Generic Function

所以我們需要先知道`g`的class是什麼

```
class(g) # [1] ""lm""
```

然後打

```
methods(plot)
```

可以看到`plot.lm`

這時候只要

```
plot.lm
```

就可以看到程式碼了

但是如果是想要看以下`plot`的程式碼，就更麻煩了：

```
data(iris)
plot(iris)
```

可以注意到`class(iris)`查到的是class: data.frame

而`methods(plot)`中的`plot.data.frame*`後面有個星號代表那是Non-visible function

有趣的是我可以輸入`?plot.data.frame`看到說明

說明的左上角指示這個指令是來自`graphics`這個package

所以只要輸入

```
graphics:::plot.data.frame
```

就可以看到原始碼



--","R_Language"
"1996","M.1440669367.A.2DC","naturalsmen","問題","RStudio Server在Windows使用",2015-08-27 17:55:58,NA,NA,"[問題類型]:

經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

如題 由於系統本身是Win8

但RStudio Server只支援Linux環境

就試著照網路上使用VirtualBox (Oracle的) 5.0.2版

再下載Ubuntu Server 14.04.3 amd64的iso檔

然後就是一直跑安裝...(略)

到Ubuntu設定完成

開始輸入一些指令(依照RStudio官網上指示)

官網連結：https://www.rstudio.com/products/rstudio/download-server/$ sudo apt-get install r-base

$ sudo apt-get install gdebi-core

$ wgethttps://download2.rstudio.org/rstudio-server-0.99.473-amd64.deb$ sudo gdebi rstudio-server-0.99.473-amd64.deb


都ok 然後輸入

$ ps -aux|grep rstudio-server

結果如下圖

之後就很開心的跑回chrome瀏覽器

輸入我的ip(用ifconfig查的)http://10.0.2.15:8787結果...就是下圖那樣了<囧>

搞了很久還是不知道問題在哪...

請問有沒有人可以指點一下小弟???


[程式範例]:


圖片：http://imgur.com/cymJsCe[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:

RStudio Server, VirtualBox

--","R_Language"
"1997","M.1440589128.A.FA8","Wush978","心得","readxl",2015-08-26 19:38:44,NA,NA,"[關鍵字]: R, excel

[重點摘要]:

今天透過中國的R 社群認識了這個套件： readxl

如果想要讀取excel的版友都可以試試看

--","R_Language"
"1998","M.1440586873.A.E8C","celestialgod","問題","Re: 排序不定欄位的matrix",2015-08-26 19:01:08,NA,NA,"※ 引述《Edster (Edster)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 開發者(有撰寫R 的套件經驗): [問題敘述]:: 假設一個 matrix 需要依照第一欄、第二欄、...、第N欄: 類似這樣, P就是要被排序的 matrix:   if(N == 2) P=P[order(P[,1], P[,2], decreasing=T),]:   if(N == 3) P=P[order(P[,1], P[,2], P[,3], decreasing=T),]:   if(N == 4) P=P[order(P[,1], P[,2], P[,3], P[,4], decreasing=T),]: 如果遇到不定欄位數量的，比如果遇到N=7，但一直寫到N=7又不能解決N=8的問題: 請問有什麼好方法呢？: [關鍵字]::: 排序matrix:

code:http://pastebin.com/zE0bQT3U這個應該就是直接排列每一列

matlab可以直接 sortrows(P)

不過R base的sort沒有排列rows的選項

所以只能自己來


我提供兩種解法

一種是利用eval去做成，直接用base的函數

另一種是我用quick sort algorithm去寫了一下sort rows

自行取用。

PS: 套件應該有排列rows的套件，懶得找XD

--","R_Language"
"1999","M.1440583432.A.0B8","Edster","問題","排序不定欄位的matrix",2015-08-26 18:03:50,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:

假設一個 matrix 需要依照第一欄、第二欄、...、第N欄

類似這樣, P就是要被排序的 matrix
  if(N == 2) P=P[order(P[,1], P[,2], decreasing=T),]
  if(N == 3) P=P[order(P[,1], P[,2], P[,3], decreasing=T),]
  if(N == 4) P=P[order(P[,1], P[,2], P[,3], P[,4], decreasing=T),]

如果遇到不定欄位數量的，比如果遇到N=7，但一直寫到N=7又不能解決N=8的問題
請問有什麼好方法呢？

[關鍵字]:排序matrix--","R_Language"
"2000","M.1440573613.A.EB2","remember69","問題","barchart圖合併",2015-08-26 15:20:10,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手,1個多月

[問題敘述]:

想將圖合併,目前在網路上找到的都是

windows(width = 4.5, height = 4.5, pointsize = 10)
old.par <- par(mfrow = c(2,3), mex = 0.6, mar = c(5, 4, 4, 2) + 0.1)
然後直接打
plot()
plot()
.
.
.
再
par(old.par)

我用其他的圖也是會併起來ex:pie(),itemFrequencyPlot()
但用barchart時卻無法

barchart(cmd70$CMD,horizontal = FALSE,xlab = ""CMD"",ylab=""click次數"")
barchart(cmd60$CMD,horizontal = FALSE,xlab = ""CMD"",ylab=""click次數"")
第二張圖會直接蓋過去,不會像用plot()會依序排好

想請問是barchart本身比較特殊無法合併,還是我哪個環節出了錯
有辦法可以解決嗎?謝謝~~~



[程式範例]:

[關鍵字]:

barchart,par

--","R_Language"
"2001","M.1440570439.A.67E","criky","問題","讀入資料的格式",2015-08-26 14:27:16,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
在資料欄位不一致時，用 read.table 會發生錯誤，
要怎麼解決呢？
例如以下資料：

1 1 2 3 4 5
2 1 2 3 4 5 6
3 1 2 3 4 5 6 7

可以用第1欄來辨別是第n種的資料，
但在讀資料時就發生錯誤了，
是不是一定要分開輸入資料呢？
謝謝--","R_Language"
"2002","M.1440552942.A.764","celestialgod","問題","Re: 資料切割問題請益",2015-08-26 09:35:38,NA,NA,"※ 引述《funny4875 (愛落紅塵心已死)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手,約1~2月: [問題敘述]:: data如下: Params1: android 4.4.2/TW/ver 1.5.6: android 5.0.2/TW/ver 1.5.6: android 5.0/TW/ver 1.5.6: iphone 8.4/EN/ver 1.6.0: .: .: .: .: 我想要抓出資料中兩個/內的語系ex:TW EN: 因為資料不對齊所以無法直接用substring去抓: 後來我用: data$Params1<- as.character(data$Params1): tt1 <- strsplit(data$Params1,""/""): sapply(tt1,head,2)[[2]]: > sapply(tt1,head,2)[[2]]: [1] ""TW"": 只有跑出一個""TW"",不知道為何?: 想問哪裡出了問題: 或是有更適合的function可以使用?: 謝謝~: [關鍵字]:: strsplit,資料切割試著用regular expression做吧

dat = c(""android 4.4.2/TW/ver 1.5.6"", ""android 5.0.2/TW/ver 1.5.6"",
  ""android 4.4.2/TW/ver 1.5.6"", ""iphone 8.4/EN/ver 1.6.0"")
gsub('/', '', regmatches(dat, regexpr(""/[A-Z]{2}/"", dat)))


strsplit也可以：

sapply(strsplit(dat, '/'), '[', 2)

or

do.call(rbind, strsplit(dat, '/'))[,2]


--","R_Language"
"2003","M.1440552455.A.19F","funny4875","問題","資料切割問題請益",2015-08-26 09:27:32,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手,約1~2月


[問題敘述]:

data如下

Params1
android 4.4.2/TW/ver 1.5.6
android 5.0.2/TW/ver 1.5.6
android 5.0/TW/ver 1.5.6
iphone 8.4/EN/ver 1.6.0
.
.
.
.


我想要抓出資料中兩個/內的語系ex:TW EN
因為資料不對齊所以無法直接用substring去抓

後來我用
data$Params1<- as.character(data$Params1)
tt1 <- strsplit(data$Params1,""/"")
sapply(tt1,head,2)[[2]]> sapply(tt1,head,2)[[2]][1] ""TW""

只有跑出一個""TW"",不知道為何?
想問哪裡出了問題
或是有更適合的function可以使用?



謝謝~




[關鍵字]:

strsplit,資料切割

--","R_Language"
"2004","M.1440524368.A.C7F","Wush978","心得","R套件在github上的CI服務",2015-08-26 01:39:24,NA,NA,"[關鍵字]:R, 套件, 測試

[重點摘要]:

好讀版：http://wush.ghost.io/r-package-ci-3os/R 目前在開發套件時，最多人使用的作業系統就是：

- Windows
- OS X
- Ubuntu

謎之音：Solaris... 聽說全世界只有那個人在用它跑R的作業系統

![](http://civicio.files.wordpress.com/2013/03/github.png?w=256&h=256)現在如果在[github](https://github.com)上做R套件的開發，已經可以免費的同時在三種作業系統上進行套件測試了。這樣就應該可以降低那個人的維護負擔吧！


## [Travis CI](https://travis-ci.org)![](https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQr5_uYoSD1fj38BNkC2PY5o1pG-8c-y8kBdDlv4VF2-itT2b8Q)Travis CI目前提供Ubuntu和OS X環境的測試。如果有Github帳號，要註冊Travis CI是非常簡單的。

### Ubuntu

Ubuntu上的測試可以參考[Building an R Project](http://docs.travis-ci.com/user/languages/r/)的說明文件。這部份要感謝許多R界的大大們的努力。


### OS X

在OS X上的測試是透過objective-c去改出來的。我fork了[wertion/r-travis-mac](https://github.com/wertion/r-travis-mac)，更新了R的版本，CRAN上只有放最新的binary。如果已經會寫`.travis.yml`的朋友，可以參考[FeatureHashing上給OS X測試的.travis.ci](https://github.com/wush978/FeatureHashing/blob/osx/.travis.yml)，應該很快就會上手了。

我這裡補充一些細節：

- 由於我沒有設定latex環境，所以`R_BUILD_ARGS`和`R_CHECK_ARGS`上都要放`--no-manual`
- [FeatureHashing](https://github.com/wush978/FeatureHashing)的vignette是透過Rmd寫的，不需要Latex，所以我沒有加`--no-vignette`。如果你的套件的vignette有用latex，可能就要自己再改這邊的測試參數了。

其他的部份，如果大家有問題，歡迎再問我。

## [AppVeyor](https://ci.appveyor.com/)![](https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRvktlDjDYG0-Z8cSbSmDiDrTDZ4n6aZT0jW_pRGm9Z9EImrVDfe2MXkg)這個CI服務提供Windows上的測試。只要有Github，要註冊也是非常簡單的。

### Windows

Windows上的測試也是需要透過[krlmlr/r-appveyor](https://github.com/krlmlr/r-appveyor)的專案來達成。

有興趣的讀者可以參考[FeatureHashing上給Windows測試的appveyor.yml](https://github.com/wush978/FeatureHashing/blob/master/appveyor.yml)，我覺得只要熟悉`.travis.yml`的語法的話，應該是不會感到陌生的。

這部份也許還有其他的功能，不過目前我就只有摸索到這了，有機會的話再做筆記。



--","R_Language"
"2005","M.1440377498.A.399","psinqoo","問題","列資料相同",2015-08-24 08:51:35,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的data如下

ID  name

A   KOE
C   JP
D   US
B   JP
A   KOE

A 兩筆相同

1.我想看 重複的資料
2.刪除重複的資料，保留一筆

ID  name  date

A   KOE   2015
C   JP    2011
D   US    2014
B   JP    2013
A   KOE   2015

如果是依日期判斷呢?





[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:

row

相同資料查詢與刪除選擇性，也許未來有用a <- c(rep(""A"", 3), rep(""B"", 3), rep(""C"",2))
b <- c(1,1,2,4,1,1,2,2)
df <-data.frame(a,b)

duplicated(df)
[1] FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE

 df[duplicated(df), ]
  a b
2 A 1
6 B 1
8 C 2

 df[!duplicated(df), ]
  a b
1 A 1
3 A 2
4 B 4
5 B 1
7 C 2











--

--","R_Language"
"2006","M.1440350507.A.3B7","Wush978","問題","Re: 經驗解構法EMD在R語言的使用",2015-08-24 01:21:45,NA,NA,"我只能講解一下我知道的部份※ 引述《tonylingugu (tonylingugu)》之銘言：: 文章分類提示:: - 問題: 關於經驗解構法Empirical Mode Decomposition在R language的使用:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:初學者，主要是完成老闆要求的事情，上網找尋solutions:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我要將一串時間序列依經驗解構法拆解不同的components，我在網路上有找到: 使用套件EMD的示範，但是我看不懂也不法模仿，所以想詢問是否有人做過類似的事情，: 或是提供可用之參考資料。: [程式範例]::: ####這是我在網路上找到的示範: ndata <- 3000: par(mfrow=c(1,1), mar=c(1,1,1,1))####但是這邊我不懂par()這個部分是在做什麼這是調整繪圖輸出的參數: tt2 <- seq(0, 9, length=ndata): xt2 <- sin(pi * tt2) + sin(2* pi * tt2) + +sin(6*pi*tt2) +0.5*tt2: plot(tt2, xt2, xlab="""", ylab="""", type=""l"", axes=FALSE); box(): tryimf <- extractimf(xt2, tt2, check=TRUE, boundary = ""periodic""): par(mfrow=c(3,1), mar=c(2,1,2,1)): try <- emd(xt2, tt2, boundary=""wave"")par(mfrow=c(3,1), mar=c(2,1,2,1)): ####這邊我看得出來他是使用xt2與tt2來做EMD，但是如果我只有一串數列: ####maybe就是S&P500index，我就不知道怎麼弄了。: ####因為我不知道xt2與tt2分別是什麼？我不懂EMD，所以這裡就PASS了: par(mfrow=c(try$nimf+1, 1), mar=c(2,1,2,1)): rangeimf <- range(try$imf): for(i in 1:try$nimf): plot(xt3, try$imf[,i], type=""l"", xlab="""",: ylab="""", ylim=rangeimf, main=: paste(i, ""-th IMF"", sep="""")): abline(h=0): plot(xt3, try$residue, xlab="""", ylab="""", main=""residue"", type=""l""): ####這邊我直接複製在R裡面他有顯現出EMD該有的樣子，但是我不知道range()這個部分: ####在做什麼？他後面又一個loop把IMF都找出來，但還是有幾個function我看不懂，: ####abline()跟paste()都不知道他在做什麼。:

range會算出最小值和最大值，這裡用range是為了調整畫圖的範圍，應該和EMD無關
abline是劃線的
paste是兜字串的
這些也都只是和畫出來的圖有關而已: [環境敘述]::: > sessionInfo(): R version 3.2.1 (2015-06-18): Platform: x86_64-apple-darwin13.4.0 (64-bit): Running under: OS X 10.10.4 (Yosemite): locale:: [1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8: attached base packages:: [1] grid      parallel  stats     graphics  grDevices utils     datasets  methods   base: other attached packages::  [1] hht_2.1.2      Quandl_2.6.1   quantmod_0.4-4 TTR_0.23-0     xts_0.9-7      zoo_1.7-12:  [7] EMD_1.5.7      locfit_1.5-9.1 fields_8.2-1   maps_2.3-11    spam_1.0-1     rugarch_1.3-4: loaded via a namespace (and not attached)::  [1] Rcpp_0.11.6                 rstudioapi_0.3.1            magrittr_1.5:  [4] misc3d_0.8-4                lattice_0.20-31             R6_2.1.0:  [7] Rsolnp_1.15                 stringr_1.0.0               httr_1.0.0: [10] tools_3.2.1                 SkewHyperbolic_0.3-2        GeneralizedHyperbolic_0.8-1: [13] spd_2.0-1                   KernSmooth_2.23-14          rgl_0.95.1201: [16] numDeriv_2014.2-1           Matrix_1.2-1                nloptr_1.0.4: [19] DistributionUtils_0.5-1     ks_1.9.4                    curl_0.9.1: [22] stringi_0.5-5               jsonlite_0.9.16             expm_0.99-1.1: [25] truncnorm_1.0-7             mvtnorm_1.0-2: [關鍵字]::: 謝謝各位！我研究這個研究好久了，還是做不出來。:

--","R_Language"
"2007","M.1440080383.A.2E6","tonylingugu","問題","經驗解構法EMD在R語言的使用",2015-08-20 22:19:41,NA,NA,"文章分類提示:
- 問題: 關於經驗解構法Empirical Mode Decomposition在R language的使用


[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:初學者，主要是完成老闆要求的事情，上網找尋solutions新手(沒寫過程式，R 是我的第一次)[問題敘述]:我要將一串時間序列依經驗解構法拆解不同的components，我在網路上有找到使用套件EMD的示範，但是我看不懂也不法模仿，所以想詢問是否有人做過類似的事情，或是提供可用之參考資料。[程式範例]:####這是我在網路上找到的示範ndata <- 3000par(mfrow=c(1,1), mar=c(1,1,1,1))####但是這邊我不懂par()這個部分是在做什麼tt2 <- seq(0, 9, length=ndata)xt2 <- sin(pi * tt2) + sin(2* pi * tt2) + +sin(6*pi*tt2) +0.5*tt2plot(tt2, xt2, xlab="""", ylab="""", type=""l"", axes=FALSE); box()tryimf <- extractimf(xt2, tt2, check=TRUE, boundary = ""periodic"")par(mfrow=c(3,1), mar=c(2,1,2,1))try <- emd(xt2, tt2, boundary=""wave"")par(mfrow=c(3,1), mar=c(2,1,2,1))####這邊我看得出來他是使用xt2與tt2來做EMD，但是如果我只有一串數列####maybe就是S&P500index，我就不知道怎麼弄了。####因為我不知道xt2與tt2分別是什麼？par(mfrow=c(try$nimf+1, 1), mar=c(2,1,2,1))rangeimf <- range(try$imf)for(i in 1:try$nimf)plot(xt3, try$imf[,i], type=""l"", xlab="""",ylab="""", ylim=rangeimf, main=paste(i, ""-th IMF"", sep=""""))abline(h=0)plot(xt3, try$residue, xlab="""", ylab="""", main=""residue"", type=""l"")####這邊我直接複製在R裡面他有顯現出EMD該有的樣子，但是我不知道range()這個部分####在做什麼？他後面又一個loop把IMF都找出來，但還是有幾個function我看不懂，####abline()跟paste()都不知道他在做什麼。[環境敘述]:> sessionInfo()R version 3.2.1 (2015-06-18)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.10.4 (Yosemite)locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] grid      parallel  stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] hht_2.1.2      Quandl_2.6.1   quantmod_0.4-4 TTR_0.23-0     xts_0.9-7      zoo_1.7-12[7] EMD_1.5.7      locfit_1.5-9.1 fields_8.2-1   maps_2.3-11    spam_1.0-1     rugarch_1.3-4loaded via a namespace (and not attached):[1] Rcpp_0.11.6                 rstudioapi_0.3.1            magrittr_1.5[4] misc3d_0.8-4                lattice_0.20-31             R6_2.1.0[7] Rsolnp_1.15                 stringr_1.0.0               httr_1.0.0[10] tools_3.2.1                 SkewHyperbolic_0.3-2        GeneralizedHyperbolic_0.8-1[13] spd_2.0-1                   KernSmooth_2.23-14          rgl_0.95.1201[16] numDeriv_2014.2-1           Matrix_1.2-1                nloptr_1.0.4[19] DistributionUtils_0.5-1     ks_1.9.4                    curl_0.9.1[22] stringi_0.5-5               jsonlite_0.9.16             expm_0.99-1.1[25] truncnorm_1.0-7             mvtnorm_1.0-2[關鍵字]:謝謝各位！我研究這個研究好久了，還是做不出來。--","R_Language"
"2008","M.1439908857.A.A29","abcggg","問題","關於文字探勘",2015-08-18 22:40:55,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好，最近剛接觸文字探勘
參考了陳嘉葳大大的文章：用R進行中文 text Mining
(http://goo.gl/3mTrDg)我也照做了一番，有些地方因為有更新所以有自己修改。

問題1：
在輸出TermDocumentMatrix時，出現了以下的樣子
不知道怎麼把\n弄掉，原本的文章也沒有長這樣。

                         Docs
Terms                    1 2 3 4 5
  一生\n志願             0 0 0 0 0
  一生\n味道             0 0 0 0 0
  一家\n嘴\n罐子         1 0 0 0 0
  一連串                 0 0 0 0 0
  人\n                   0 0 0 0 0
  人\n人\n人\n強者\n同學 0 0 0 0 0
  人\n人\n小學           0 0 0 0 0
  人\n人\n事\n課\n精神   0 0 0 0 0
  人\n人\n東西           0 0 0 0 0
  人\n山\n雙手           0 0 0 0 0

問題2：
輸出的文字雲長這樣http://i.imgur.com/W6Bo2Tk.png明明程式碼一樣，不知為何我的卻是方的，而且沒有很密集。
想知道問題出在哪。

問題3：
由於原文章只鎖定名詞
d.corpus <- tm_map(d.corpus[1:100], segmentCN, nature = TRUE)
d.corpus <- tm_map(d.corpus, function(sentence) {
    noun <- lapply(sentence, function(w) {
        w[names(w) == ""n""]
    })
    unlist(noun)
})
若所有詞性都想要，該怎麼做呢？
我有試做看看，卻在輸出tdm時得到error
Error in `[.simple_triplet_matrix`(tdm, 1:10, 1:5) :
  subscript out of bounds


[程式範例]:

大概的程式碼如下：
d.corpus0 <- Corpus(DirSource('doc'), list(language = NA)) #語料庫
d.corpus_clean <- tm_map(d.corpus0, removePunctuation)
d.corpus_clean <- tm_map(d.corpus_clean, removeNumbers)
d.corpus_clean <- tm_map(d.corpus_clean, function(word) {
  gsub(""[A-Za-z0-9]"", """", word)
})

d.corpus_seg <- tm_map(d.corpus_clean[1:100], segmentCN, nature = TRUE)
d.corpus_seg2 <- tm_map(d.corpus_seg, function(sentence) {
  noun <- lapply(sentence, function(w) {
    w[names(w) == ""n""]
  })
  unlist(noun)
})

#d.corpus_vec <- Corpus(VectorSource(d.corpus_seg)) #無法run

d.corpus_stop <- tm_map(d.corpus_seg2, removeWords, myStopWords)

#建立TermDocumentMatrix(自己修改過)
corpus_clean <- tm_map(d.corpus_stop, PlainTextDocument)
d.corpus_vec <- Corpus(VectorSource(corpus_clean))
tdm <- TermDocumentMatrix(d.corpus_vec, control = list(wordLengths = c(2,
Inf)))

#文字雲
m1 <- as.matrix(tdm)
v <- sort(rowSums(m1), decreasing = TRUE)
d <- data.frame(word = names(v), freq = v)
wordcloud(d$word, d$freq, min.freq = 2, random.order = F, ordered.colors = F,
          colors = rainbow(length(row.names(m1))))


這個問題已經困擾我好幾天，想了很久也找很多資料還是無解，才想說上來請各位高手解
答
小妹第一次在本版發文，若有任何不妥請多多包涵:)


[關鍵字]:文字探勘，text mining--","R_Language"
"2009","M.1439869190.A.024","remember69","問題","barchart問題請益",2015-08-18 11:39:48,NA,NA,"[問題類型]:
如題
[軟體熟悉度]:
新手~約1~2個月

[問題敘述]:

資料如下

uid  system  CMD
             0
             20
             30
             3030
             303090
             .
             .
             .


>barchart(data$CMD,horizontal=FALSE)

會出現直的長條圖,x軸排列依據會照CMD名稱由左至右

想請問要如何讓累積最多的CMD先出現?
然後由多至少向右排列

差不多像下面這種感覺

 1
 1  1
 1  1  1
 1  1  1  1
 1  1  1  1
 1  1  1  1 1
 1  1  1  1 1 1 1 1

40  20 30 50 ...
       CMD

我試過sort,但好像不能直接這樣用...



第二個問題""X軸各項名稱更改方向""

有沒有辦法讓CMD名稱在X軸是顯示直的或斜的?

因為CMD太多有些名稱又太長X軸會整個擠在一起甚至重疊

希望改成
0  2  3  4  3
   0  0  0  0
            3
            0

請各位高手幫小弟解惑一下(跪



--","R_Language"
"2010","M.1439745890.A.A6C","mikejhou","問題","計算多字詞的關聯並視覺化",2015-08-17 01:24:47,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
現在收集完需要分析的字詞
要建構出字詞與字詞間的關聯性，會以節點與連線的方式呈現。
假設關鍵字中Apple
Apple是節點
連線出去連結到的節點就是與之相關的關鍵字
像是iOS、iPhone、iPad等等

1.想了解有那些Package能夠做到文字關聯性分析的效果
2.那些Package可以把計算完的結果視覺化成節點與連線的樣式

[程式範例]:
自己還沒開始寫
但找到Normalized Google distance法
Normalized Google distance是用google的搜尋當基礎
資料量計算強度後會證明兩字關聯性
若兩者越接近0表示兩字關聯越強的方式計算
但不太知道還有沒有更精確的方法可以做做看

[環境敘述]:
目前抓取的字詞約800多筆
以CSV檔案的形式存取
由於小弟的目標是論文的關鍵字
所以同一篇論文使用的關鍵字會存在同一行




[關鍵字]:
字詞 計算文字關聯 視覺化(節點與連線)

--","R_Language"
"2011","M.1439734592.A.10B","Learn2015","問題","R Mapping - 國家地圖畫地理位置連接線",2015-08-16 22:16:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:各位大大好，我目前急迫性需要在一個國家地圖上畫出幾個城市的地理位置點以及畫出連接兩個地理位置的連接線，但線的部份一直無法成功畫出來，想在此請求幫忙我使用Shapefile裡的數據，已經將地圖和城市的代碼和地理位置畫出來。我程式裡有兩個csv檔案，A檔包含該國家的城市代碼以及地理位置(longitude, latitude)清單，B檔包含哪兩個連接點需要被連接起來的清單。因為Shapefile裡面的地理位置數據單位為UTM(Universal Transverse Mercator)coordinate system，我已在我的codes中將csv A檔的longtitude/latitude轉換為UTM 單位，城市點也畫出來了，run codes的時候也沒有bugs, 所以我懷疑的是我下面的codes最後一部份gcintermediate() 那邊可能有地理位置單位的問題以至系統無法找出UTMcoordinates畫連接線，但我已試非常多不同方法，依然無法畫出連接線，麻煩大大們的幫忙，會非常感激！這是目前的OUTPUT結果:https://www.dropbox.com/s/tvd1chw3e6tyy6y/paint.png?dl=0[程式]:# Load necessary packageslibrary(maps)library(sp)library(maptools)library(geosphere)library(rgdal)#library(ggmap)# Function that returns coordinates of a given locationgetCoords<-function(location,df){return(df[match(x=location,df[,""ResidentID2012""]),][,c(4,3)])}# Read in the ShapefileMap <-readShapeSpatial(""County.shp"")# Read CSV file containing coordinates and edgesfamilylocation2012<-read.csv(file=""CityLocation.csv"",sep="","",header=TRUE)networkconnection<-read.csv(file=""NodesConnection.csv"",sep="","",header=TRUE)# Plot the graph itselfplot(Map,lwd=0.01,bg=""#242424"",col=""#0000CD"")# Setting existing coordinate as lat-long systemcord.dec <- SpatialPoints(cbind(familylocation2012$Longitude,familylocation2012$Latitude), proj4string = CRS(""+proj=longlat""))# Transforming coordinate to UTM using EPSG=19938 for WGS=84, UTM Zone=35Ncord.UTM <- spTransform(cord.dec, CRS(""+init=epsg:3301""))# Plot the nodes on the graphpoints(cord.UTM, pch=16,cex=1.5, col = ""white"")# Label the nodestext(attr(cord.UTM, ""coords"")[,1], attr(cord.UTM, ""coords"")[,2],familylocation2012$ResidentID2012,cex=1,adj=0,pos=1,col=""#C2C2C2"")#Connet points and plot the linefor (j in 1:nrow(networkconnection)){plotLine(networkconnection[j,]$BEGINPOINT,networkconnection[j,]$ENDPOINT,familylocation2012)}# Plot a great circle from 'Begin' to 'Endpoint' names.plotLine<-function(BEGINPOINT,ENDPOINT,df){inter<-gcIntermediate(p1=getCoords(BEGINPOINT,df),p2=getCoords(ENDPOINT,df),n=50,addStartEnd=TRUE)lines(inter, col=""white"",cex=2,lwd=2)}[環境敘述]:> sessionInfo()R version 3.2.1 (2015-06-18)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_UnitedStates.1252    LC_MONETARY=English_United States.1252[4] LC_NUMERIC=C                           LC_TIME=English_UnitedStates.1252attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] rgdal_1.0-4     geosphere_1.4-3 maptools_0.8-36 maps_2.3-11sp_1.1-1loaded via a namespace (and not attached):[1] tools_3.2.1     foreign_0.8-63  grid_3.2.1      lattice_0.20-31> > sessionInfo()R version 3.2.1 (2015-06-18)Platform: x86_64-w64-mingw32/x64 (64-bit)Running under: Windows 8 x64 (build 9200)locale:[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_UnitedStates.1252    LC_MONETARY=English_United States.1252[4] LC_NUMERIC=C                           LC_TIME=English_UnitedStates.1252attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] rgdal_1.0-4     geosphere_1.4-3 maptools_0.8-36 maps_2.3-11sp_1.1-1loaded via a namespace (and not attached):[1] tools_3.2.1     foreign_0.8-63  grid_3.2.1      lattice_0.20-31>[關鍵字]Graphics, social network, R mapping--","R_Language"
"2012","M.1439686290.A.B89","celestialgod","問題","Re: 指定group",2015-08-16 08:51:27,NA,NA,"我不知道這樣有沒有快多少... 參考看看

library(data.table)  # setnames
library(plyr)        # dlply, laply, mapvalues
library(dplyr)       # mutate, summarise, group_by
library(magrittr)    # %>%, %$%

dt <- data.table(
  series = c(1,2,3,4,5,6,1,1,2,2,2,2,2),
  cate = c(2,3,4,2,2,5,1,2,2,3,4,4,4)
)

## method 1 (應該會較慢，而且程式比較醜)
maptable = dlply(dt, .(series), table) %>% laply(function(x){
  as.integer(colnames(x)[which.max(x)])
}) %>% cbind(as.integer(names(.)), .)
dt2 = dt %>% mutate(cate = mapvalues(series, maptable[,1], maptable[,2]))

## method 2
-maptable = dt %>% group_by(series, cate) %>% summarise(n()) %>%
  group_by(series) %>% summarise(maxCate = max(cate))
dt2 = dt %>% mutate(cate = mapvalues(series, maptable$series,
  maptable$maxCate))

## 把上面連在一起的版本 (沒有maptable這個暫存變數)
dt2 = dt %>% group_by(series, cate) %>% summarise(n()) %>%
  group_by(series) %>% summarise(maxCate = max(cate)) %>%
  setnames(""series"", ""maxSeries"") %$%
  mutate(dt, cate = mapvalues(series, maxSeries, maxCate)): 例如:       series cate:  [1,]      1    2:  [2,]      2    3:  [3,]      3    4:  [4,]      4    2:  [5,]      5    2:  [6,]      6    5:  [7,]      1    1:  [8,]      1    2:  [9,]      2    2: [10,]      2    3: [11,]      2    4: [12,]      2    4: [13,]      2    4: 在series中1出現三次,其cate分別為2,2,1   頻率最高的為2: 想將所有series為1的族群   其cate欄位接指定為2: 又例如 series中為2的族群  其cate 分別為 3,2,3,4,4,4 頻率最高的4: 想將所有series為2的族群 其cate欄位皆指定為4: 請問除了用for loop外有其他方法嗎?--","R_Language"
"2013","M.1439672309.A.25A","andrew43","問題","Re: 指定group",2015-08-16 04:58:26,NA,NA,"寫得很醜，但邏輯大概就是這樣。
裡面用了一些技巧，看懂之後歡迎學起來。
這都是內建的 funciton，應該直接用就可以了，但若是巨大資料就會很慢了。

dt <- data.frame(
  series = c(1,2,3,4,5,6,1,1,2,2,2,2,2),
  cate = c(2,3,4,2,2,5,1,2,2,3,4,4,4)
)

# 各 series 之下 cate 頻率最高的值之對應（若無最高者，之後會出警告）。
# 這一句如果看不懂，請想像成一個迴圈，每跑一次的對象是同一組series，
# 並找出頻率最高的 cate 是誰。
tab <- tapply(
  dt$cate,
  dt$series,
  function(x){
    rownames(table(x)[order(table(x), decreasing = T)])[1]
  }
)

# 這句只是建一個新的 dt。
dt.new <- data.frame(
  series = dt$series,
  cake = rep(NA, nrow(dt))
)


# 利用 dimnames(tab)[[1]] 和 tab[[i]] 來重建 dt.new，總共填 6 次。
# 看不懂的話把 i 用 1 或 2 去代入，再細看每個小部份。
for (i in 1:dim(tab)) {
  ans <- rep(
    as.numeric(tab[[i]]),
    length(dt.new[dt.new$series == dimnames(tab)[[1]][i], ]$cake)
  )
  dt.new[dt.new$series == dimnames(tab)[[1]][i], ]$cake <- ans
}※ 引述《lambking (BB)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 想將資料中的某欄位指定為其最常見的group名稱: 例如:       series cate:  [1,]      1    2:  [2,]      2    3:  [3,]      3    4:  [4,]      4    2:  [5,]      5    2:  [6,]      6    5:  [7,]      1    1:  [8,]      1    2:  [9,]      2    2: [10,]      2    3: [11,]      2    4: [12,]      2    4: [13,]      2    4: 在series中1出現三次,其cate分別為2,2,1   頻率最高的為2: 想將所有series為1的族群   其cate欄位接指定為4: 又例如 series中為2的族群  其cate 分別為 3,2,3,4,4,4 頻率最高的4: 想將所有series為2的族群 其cate欄位皆指定為4: 請問除了用for loop外有其他方法嗎?--","R_Language"
"2014","M.1439479526.A.843","Udyr","問題","order by number of elements in list",2015-08-13 23:25:24,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:資料為List 形式$`1`[1] 149 150 151$`2`[1] 178 188 197 210 211$`3`[1]  26  34  38  42上面資料中 第一個list 有3個element, 第二個list有5個 element 第三個list有4個想將其重新排列把資料中有最多elements的list 排在最前面 以decreasing的方式排列變成$`1`[1] 178 188 197 210 211$`2`[1]  26  34  38  42$`3`[1] 149 150 151請問有方法可以重新排列這樣的list 嗎?--","R_Language"
"2015","M.1439476846.A.0FE","gbd37","問題","ggplot用geom_line畫as.date格式問題",2015-08-13 22:40:42,NA,NA,"[問題類型]:ggplot畫時間格式

[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

CODE是自已想法，但剛好遇到一筆資料在三年內在都是12月沒有紀錄

所以PLOT出來線就沒有延伸到12月，只會上下對齊而已

我想要類似這種資料型態所畫出的圖讓線延伸到12月

這樣我一次PLOT很多資料就不用擔心有人是類似情形

或是大大們有個好的建議我可以怎麼寫ggplot的時間格式再麻煩指教



[程式範例]:http://pastie.org/10348612[環境敘述]:windows 8-R x64 3.2.1

[關鍵字]:ggplot as.Date

--","R_Language"
"2016","M.1439474385.A.8F3","psinqoo","問題","計算年齡",2015-08-13 21:59:41,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我從SQL 撈出資料 如下

ID   YEAR   BIRDAY       AGE   PRO
A    2011   1987-12-18         TW
B    2014   1999-10-13         JP
C    2010   1947-07-10         KO
D    2008   1954-05-24         CH
E    2011   1972-08-14         AU
F    2013   1980-11-12         US


寫SQL 計算我不會完全不想看 SQL

想用 R 計算

搜尋後 看了有國外寫~ 囧https://gist.github.com/mmparker/7254445我想請教 在 ID YEAR BIRDAY 後 生成 AGE 欄位 並計算數值

1.如果比對 SYSTEM TIME 該如何寫
2.如果給定年份例如 2015 寫法
我想過用切的算 但應該有更好的方法？
對了撈出 BIRDAY 是不是要轉格式？
如果用 fread  格式 讀入 class()  data.frame  data.table
也得轉格式？











[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：[環境敘述]:[關鍵字]:

eeptools

lubridate選擇性，也許未來有用--







--","R_Language"
"2017","M.1439342654.A.486","remember69",NA,"資料切割問題",2015-08-12 09:24:11,NA,NA,"(抱歉剛剛用到別人的帳號了...)

[熟悉程度]
新手,一兩個月

[問題敘述]:

手邊有個資料data1如下

uid   system   CMD     time
               0
               20
               2010
               201030
               0
               30
               3030
               .
               .
               .


想請問我如果要把CMD開頭是""20""的資料抽出來該如何抽?
(""20""包含20.2010.2020.201030...etc )

試過pmatch(),charmatch()但好像都不是
請各位高手解惑一下...

--","R_Language"
"2018","M.1439306275.A.E53","zxas10143",NA,"抽樣問題",2015-08-11 23:17:50,NA,NA,"入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

版上高手晚安

想跟各位請教一個單純的抽樣問題

我想從一個資料中一次抽出5個個案，共抽取100次

想像如下:

  x    y

  1    2

  2    40

  1    23

  4    20

  5    10
  .    .
  .    .
  .    .

亦即，雖然一次是抽出5個並抽取100次，但我仍希望他是以向下疊加的方式堆疊

我的語法是:

boot=matrix(replicate(100,sample_n(as,size=5,replace=T)))

單純抽一次的話是沒問題，不過大於1次後就會產生如下

          v1
  x.1    c(...)
  y.1    c(...)
  x.2    c(...)
  y.2    c(...)


請問我該如何解決這個問題呢?

(我有嚐試以矩陣的方式在其他軟體抽出https://gist.github.com/zxas10143/6494b24d80d9da44096f不過是用先把樣本放大的方式，再用類似agreegate的方法縮回來

但這種方法比較偏向是硬解，想從R這找尋比較快速的方法)

--","R_Language"
"2019","M.1439210301.A.8E8","Wush978","分享","Re: FeatureHashing",2015-08-10 20:38:17,NA,NA,"大家好，

這是我今天在雪梨R User Group報告的關於FeatureHashing的投影片

很多初學者跟我反應都聽得懂，

所以我決定轉上來，給板上有興趣了解：

1. FeatureHashing
2. Formula in R
3. Categorical Features in R

的版友參考，

投影片連結：http://www.slideshare.net/WushWu/introduction-of-feature-hashing※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: FeatureHashing, hashing trick, R: [出處]:: https://www.youtube.com/watch?v=CdMzHLrmpi8: 這是我在社群介紹CRAN的套件：FeatureHashing時的錄影: 在以預測為主的分析，處理大量資料時，: 如果有大量Categorical Variables，: 用這個套件可以讓寫code簡單很多（但是準確度會掉一點點）: 也可以當作一種randomized dimension reduction使用。: 歡迎有興趣的版友試用，有問題也歡迎找我交流。--","R_Language"
"2020","M.1439191952.A.CF9","celestialgod","問題","Re: 兩個變項合併為一",2015-08-10 15:32:29,NA,NA,"※ 引述《zxas10143 (~無言以對~)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉: 各位高手好: 小的想請教前輩們如何將變項X與變項Y合併為變項Z: 如下:: x  y   z(合併後): 1  NA  1: 2  NA  2: NA 5   5: 3  NA  3: NA 8   8: 用STATA的語言就是 egen z=rowfirst( x y ): 不知道R是怎麼做的呢?: 還煩請前輩們解惑五種方法任君挑選^^""

## naive method
dat = data.frame(x = c(1,2,NA,3,NA), y = c(NA,NA,5,NA,8))
dat$z = dat$x
dat$z[is.na(dat$x)] = dat$y[is.na(dat$x)]

## cool method
dat = data.frame(x = c(1,2,NA,3,NA), y = c(NA,NA,5,NA,8))
dat$z = ifelse(is.na(dat$x), dat$y, dat$x)

## more elegant
dat = data.frame(x = c(1,2,NA,3,NA), y = c(NA,NA,5,NA,8))
dat$z = with(dat, ifelse(is.na(x), y, x))

## tricky but helpful for three or more columns
dat = data.frame(x = c(1,2,NA,3,NA), y = c(NA,NA,5,NA,8))
dat$z = na.omit(c(unlist(t(dat))))

## only available for numeric columns
dat = data.frame(x = c(1,2,NA,3,NA), y = c(NA,NA,5,NA,8))
dat$z = rowSums(dat, TRUE)

benchmark:http://pastebin.com/z03vffti我一般都用2或3... 雖然看起來benchmark是比較沒效率XDDDD (但是都很快就是)

但是在dplyr中使用的話，比較方便

搭配data.table也比較不會有複製資料的問題

4跟5是我google到的方法，歡迎參考看看。

reference:http://tinyurl.com/nzjtxea--","R_Language"
"2021","M.1439190723.A.007","zxas10143","問題","兩個變項合併為一",2015-08-10 15:12:00,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉


各位高手好

小的想請教前輩們如何將變項X與變項Y合併為變項Z

如下:

x  y   z(合併後)

1  NA  1

2  NA  2

NA 5   5

3  NA  3

NA 8   8


用STATA的語言就是 egen z=rowfirst( x y )

不知道R是怎麼做的呢?

還煩請前輩們解惑

--","R_Language"
"2022","M.1439177335.A.663","remember69","問題","%in% 指令請益",2015-08-10 11:28:52,NA,NA,"[問題類型]:
如題

[軟體熟悉度]:
新手,接觸R約兩個月
[問題敘述]:
本人目前在練習data mining,手邊有個app click log的資料
格式如下
uid     system     command     DataTimes
1        ios       0           2013/5/7 10:44
1        ios       10          2013/5/7 10:45
2        android   0           2013/5/7 10:50
2        android   10          2013/5/7 10:51
3        ios       0           2013/5/7 10:58
3        ios       20          2013/5/7 10:59
.
.
.

想請問
因為我要把整筆資料操作次數過少的使用者清掉
於是我整理了一個uidlist
是click次數超過n次的uidlist

之後我做了下面這個指令

data1 <- data[data$uid %in% uidlist,]

點開data1確實留下click次數超過n的資料

但我後來輸入
barchart(data1$uid)
顯示出的長條圖中被移除的uid還是存在

有點像是

uid
1   ============
2   ====
3   =
4
5   ===================
6
7   ===
8   =
9   =======

   0       5        10
           Feq

像uid 4跟6明明被移掉了卻還是會顯示
不知道為何
想請問為什會這樣及如何確實移除?


如有描述不清楚或不完全,我會立即補充謝謝!!






[環境敘述]:
R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods
[7] base

other attached packages:
[1] lattice_0.20-31 arules_1.1-9    Matrix_1.2-1

loaded via a namespace (and not attached):
[1] tools_3.2.1 grid_3.2.1
[關鍵字]:


--","R_Language"
"2023","M.1439017753.A.5A1","SFMAndroid","問題","Re: r在excel中的自動化應用",2015-08-08 15:09:11,NA,NA,"※ 引述《SFMAndroid (安卓發送)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):

我是原PO~

今天颱風天剛好有時間嘗試原文大大們提供的方式

目前是在PATH新增Rscript路徑

然後用cmd呼叫是成功的

於是小弟後續又試了用Batch去call R程式

用了簡單的code試驗：

R的部分：
set.seed(100)

df <- data.frame(Normal=rnorm(100), Unif=runif(100, 0, 1))

getwd()

#~/我的路徑

write.csv(df, row.names=FALSE, file=""notes.csv"")

檔名為cmd.R


Batch檔：

cd /d ~/我的路徑

Rscript cmd.R


試驗後點擊.bat檔確實能夠輸出notes.csv

後來就想 是不是能搭配windows的工作排程讓他定時執行

於是在工作排程器那建立工作並設定「登入時執行」


可是問題來了...我無論是登出後再登入、重新開機再登入還是關機後重開都失敗@@

指定路徑中都沒有產生notes.csv的檔案

有大大知道是甚麼問題嗎？


不確定是不是應該在這裡問

想說還是跟R有關 在這裡問應該可以吧XD


--","R_Language"
"2024","M.1439006618.A.9B3","fifish89","問題","長度不同判斷天數",2015-08-08 12:03:36,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

a,b 都是天數
想知道以a的長度為基礎,是否有找到一個b是落在a的前2天
每個人都有不同的a和b, 且a,b長度每個人也都不同

以一個人為例：
set.seed(200)
a <- sort(sample(1:30,6))
a
# 17 18 19 21 29 30

b <- sort(sample(1:80,15))
b
# 8 10 12 19 22 28 31 35 40 41 44 48 49 57 63

比如說:
a[1] = 17,但在b中找不到落在a前兩天者(沒有15或16) ---> d[1] = 0
a[2] = 18,但在b中找不到落在a前兩天者(沒有16或17) ---> d[2] = 0
a[3] = 19,但在b中找不到落在a前兩天者(沒有17或18) ---> d[3] = 0
a[4] = 21,但在b中有找到落在a前兩天者(  有19或20) ---> d[4] = 1
a[5] = 29,但在b中有找到落在a前兩天者(  有27或28) ---> d[5] = 1
a[6] = 30,但在b中有找到落在a前兩天者(  有28或29) ---> d[6] = 1


希望輸出 :

ID  a  d
1  17  0
1  18  0
1  19  0
1  21  1
1  29  1
1  30  1
2   .  .
2   .  .


想了很久不知道要怎麼寫@@


--","R_Language"
"2025","M.1438968087.A.6C8","celestialgod","問題","Re: 應用迴圈於資料處理的效率",2015-08-08 01:21:24,NA,NA,"※ 引述《missingmini (just missing)》之銘言：: 感謝C大和W大指教，學了不少新東西，許多觀念也有茅塞頓開的感覺，真的非常感謝！: 有些東西還是有小疑問：: ==============================================================================: 1. C大用來取代我第4段程式的寫法如下: ## 4: tbl_right_ID = table(tbl_right$ID): tbl_right_ID[match(comm_ID$ID, names(tbl_right_ID))] %>% sum: 想問的是為什麼要先把tbl_right$ID建成一個table，然後在match裡面再取其names來用?為了去算comm_ID$ID在tbl_right_ID裡面出現幾次

所以只能先unique names再用match去找到對應的ID，然後總和

計算個別ID次數跟unique names的動作可以一起做就會變成table，然後再找對應ID做總和: 有沒有方法可以直接用tbl_right物件來操作?不太懂這個的目的是什麼

最簡單的方法應該是

sum(tbl_right$ID %in% comm_ID$ID)

那時候沒想到這個(攤手: ==============================================================================: 2. W大提到的迴圈測時程式: system.time({:     I = 0:     while (I < 1e7) {:         10:         I = I + 1:     }: }): 為什麼要有""10""這一行? 有什麼特殊作用? 我試過把該行comment out再執行，結果: 比原來快了 0.3 秒左右。一個例子，R的迴圈會受到東西影響

R就花了不少時間在直譯10這一行上面，所以才造成這種情形

連結裡面的範例是多加了很多()

--","R_Language"
"2026","M.1438964746.A.59F","missingmini","問題","Re: 應用迴圈於資料處理的效率",2015-08-08 00:25:43,NA,NA,"感謝C大和W大指教，學了不少新東西，許多觀念也有茅塞頓開的感覺，真的非常感謝！

有些東西還是有小疑問：
==============================================================================
1. C大用來取代我第4段程式的寫法如下

## 4
tbl_right_ID = table(tbl_right$ID)
tbl_right_ID[match(comm_ID$ID, names(tbl_right_ID))] %>% sum

想問的是為什麼要先把tbl_right$ID建成一個table，然後在match裡面再取其names來用?
有沒有方法可以直接用tbl_right物件來操作?
==============================================================================
2. W大提到的迴圈測時程式

system.time({
    I = 0
    while (I < 1e7) {
        10
        I = I + 1
    }
})

為什麼要有""10""這一行? 有什麼特殊作用? 我試過把該行comment out再執行，結果
比原來快了 0.3 秒左右。
==============================================================================

至於W大提到的討論loop的文章，我有空會仔細讀的，屆時再來跟大家分享心得。


最後，為了想知道R的迴圈跟C++的迴圈速度上的差異，做了個不是很嚴謹的小實驗

// C++ code
#include <stdio.h>
#include <sys/time.h>
int main(void)
{
    bool val_bool;
    struct timeval tp, tp2;

    val_bool = false;
    gettimeofday(&tp, NULL);
    for (int i = 0; i < 100000001; i++) {
        val_bool = !val_bool;
    }
    gettimeofday(&tp2, NULL);
    printf(""%ld microseconds elapsed\n"", tp2.tv_sec * 1000000 + tp2.tv_usec -
                                         (tp.tv_sec * 1000000 + tp.tv_usec));
    printf(""%s\n"", val_bool ? ""TRUE"" : ""FALSE"");

    return 0;
}

# R code
val_bool <- FALSE
ptm <- system.time({
  for (i in 1:100000001) {
    val_bool <- !val_bool
  }
})
print(ptm)
print(val_bool)

在我的電腦執行結果：

C++:
215609 microseconds elapsed
TRUE

R:
   user  system elapsed
 25.323   0.209  25.331
[1] TRUE

C++花了0.216秒，R則要25.33秒，差距超過100倍。

(註：C++ compile時要把optimization關掉，例如g++要加-O0 switch，否則compiler
是很聰明的，會直接把迴圈整個取消掉，直接給你!val_bool，費時 0 microsecond!)


--","R_Language"
"2027","M.1438938453.A.1C3","celestialgod","問題","Re: 資料堆疊",2015-08-07 17:07:29,NA,NA,"※ 引述《naturalsmen (日日夜夜)》之銘言：: ※ 引述《celestialgod (攸藍)》之銘言：: 恕刪: 借這篇問一下: 要怎麼避免spread後r自動排序的問題??: 如果spread(num, sth.)的num是包含>9的數字的名稱: 例如: student1~student10: r會自己把它排成student1 student10 student2 ... student9: 這樣的情況要怎麼解決??我有兩個笨方法，一個是重新排列columns，另一個是改名

另外還有一個好方法是factorize

好讀版：http://pastebin.com/BPWGgByilibrary(data.table)
library(dplyr)
library(tidyr)
library(magrittr)

DT = data.table(stu = paste0(""stu"", 1:20),
  X = rnorm(20), Y = rnorm(20)) %>%
  gather(cate, values, -stu)
DT %>% spread(stu, values) %>% tbl_dt(FALSE)
#   cate        stu1      stu10     stu11      stu12       stu13     stu14
# 1    X -0.08476976  0.5428922 1.9929332 -0.6145632 -0.06098296 -1.066283
# 2    Y  0.59710869 -1.0037766 0.3508158  0.4587201 -0.13639207  1.385517
# Variables not shown: stu15 (dbl), stu16 (dbl), stu17 (dbl), stu18 (dbl),
#   stu19 (dbl), stu2 (dbl), stu20 (dbl), stu3 (dbl), stu4 (dbl), stu5 (dbl),
#   stu6 (dbl), stu7 (dbl), stu8 (dbl), stu9 (dbl)

## factorize
DT = data.table(stu = paste0(""stu"", 1:20),
  X = rnorm(20), Y = rnorm(20)) %>%
  gather(cate, values, -stu)
DT %>% mutate(stu = factor(stu, levels = paste0(""stu"", 1:20))) %>%
  spread(stu, values) %>% tbl_dt(FALSE)
#   cate      stu1      stu2      stu3      stu4       stu5       stu6
# 1    X 1.6890231 -1.300332 -1.378376 -1.874321 0.54141060 -1.2848391
# 2    Y 0.2796895  1.635385  1.048334  0.424909 0.09111916 -0.4147811
# Variables not shown: stu7 (dbl), stu8 (dbl), stu9 (dbl), stu10 (dbl), stu11
#   (dbl), stu12 (dbl), stu13 (dbl), stu14 (dbl), stu15 (dbl), stu16 (dbl),
#   stu17 (dbl), stu18 (dbl), stu19 (dbl), stu20 (dbl)

## method 1 with select
DT_spread = DT %>% spread(stu, values)
sele_names = setdiff(names(DT_spread), paste0(""stu"", 1:20))
col_num = match(c(sele_names, paste0(""stu"", 1:20)), names(DT_spread))
DT_spread %>% select(col_num) %>% tbl_dt(FALSE)
#   cate      stu1      stu2      stu3      stu4       stu5       stu6
# 1    X 1.6890231 -1.300332 -1.378376 -1.874321 0.54141060 -1.2848391
# 2    Y 0.2796895  1.635385  1.048334  0.424909 0.09111916 -0.4147811
# Variables not shown: stu7 (dbl), stu8 (dbl), stu9 (dbl), stu10 (dbl), stu11
#   (dbl), stu12 (dbl), stu13 (dbl), stu14 (dbl), stu15 (dbl), stu16 (dbl),
#   stu17 (dbl), stu18 (dbl), stu19 (dbl), stu20 (dbl)


## method 2
DT %<>% mutate(stu_num = as.integer(gsub(""stu(\\d*)"", ""\\1"", stu)),
  stu = sprintf(""stu%02i"", stu_num)) %>% select(-stu_num)
DT %>% spread(stu, values) %>% tbl_dt(FALSE)
#   cate     stu01     stu02     stu03     stu04      stu05      stu06
# 1    X 1.6890231 -1.300332 -1.378376 -1.874321 0.54141060 -1.2848391
# 2    Y 0.2796895  1.635385  1.048334  0.424909 0.09111916 -0.4147811
# Variables not shown: stu07 (dbl), stu08 (dbl), stu09 (dbl), stu10 (dbl),
#   stu11 (dbl), stu12 (dbl), stu13 (dbl), stu14 (dbl), stu15 (dbl), stu16
#   (dbl), stu17 (dbl), stu18 (dbl), stu19 (dbl), stu20 (dbl)


--","R_Language"
"2028","M.1438936258.A.B10","naturalsmen","問題","Re: 資料堆疊",2015-08-07 16:30:55,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《SFMAndroid (安卓發送)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 最近在處理一筆資料 大概長這樣：: : user       web         code恕刪

借這篇問一下

要怎麼避免spread後r自動排序的問題??

如果spread(num, sth.)的num是包含>9的數字的名稱

例如: student1~student10

r會自己把它排成student1 student10 student2 ... student9

這樣的情況要怎麼解決??


--","R_Language"
"2029","M.1438934537.A.183","squallscer","問題","在R中執行shell script",2015-08-07 16:02:15,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

背景：
各位版上大大好！
小弟有一支shell script：塞入經緯度,會吐回所在地
因此小弟有一組經緯度資料,
想在R中透過此script按照經緯度轉換成所在地
（ex: 121.542627 25.03118 -> '台北市大安區'）

問題：
我不知道如何將下面經緯度位置改成向量的方式塞進system內
google一陣子還是找不到合適的答案,
目前只知道大概是利用
system(paste('sh xxxx.sh','121.542627','25.03118'), intern = T)
其中
xxx.sh 是shell script檔

因此來請教各位大大∼

如果有任何敘述不清的部分可以在跟我說！



[關鍵字]:

system, shell script


--","R_Language"
"2030","M.1438914924.A.0B0","celestialgod","分享","RcppParallel",2015-08-07 10:35:20,NA,NA,"[關鍵字]: Rcpp, parallel computing

[出處]:http://rcppcore.github.io/RcppParallel/#examples[重點摘要]:

RcppParallel provides a complete toolkit for creating portable,
high-performance parallel algorithms without requiring direct manipulation of
operating system threads. RcppParallel includes:

Intel Thread Building Blocks (v4.3), a C++ library for task parallelism with
a wide variety of parallel algorithms and data structures (Windows, OS X,
Linux, and Solaris x86 only).

TinyThread, a C++ library for portable use of operating system threads.

RVector and RMatrix wrapper classes for safe and convenient access to R data
structures in a multi-threaded environment.

High level parallel functions (parallelFor and parallelReduce) that use Intel
TBB as a back-end on systems that support it and TinyThread on other
platforms.


我自己試做了用RcppArmadillo配上RcppParallel：http://pastebin.com/KLwySJeyhttp://pastebin.com/PPhkVv6x(只有p小時會快，p變大會漸慢)

--","R_Language"
"2031","M.1438870998.A.A5B","celestialgod","問題","Re: 資料堆疊",2015-08-06 22:23:15,NA,NA,"※ 引述《SFMAndroid (安卓發送)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 最近在處理一筆資料 大概長這樣：: user       web         code: Shelly     yam         A1: Bruce      finance     A2: Shelly     yam         A1: Kate       finance     A2: Bruce      yam         A1: Bruce      google      A3: 希望能夠用堆疊(應該是堆疊吧)的方法讓資料變成這樣：: user     web      code1     code2: Shelly   yam      A1        A1: Bruce    finance  A2: Bruce    yam      A1: Bruce    google   A3: Kate     finance  A2其實跟#1Lmlfyuv (R_Language)問題一模一樣

程式我就直接搬過來了...

library(data.table) # 只用到fread
library(dplyr)      # 用到group_by, mutate, %>%
library(tidyr)      # 用到spread (可以用reshape2的dcast代替)

DT = fread(""user,web,code
Shelly,yam,A1
Bruce,finance,A2
Shelly,yam,A1
Kate,finance,A2
Bruce,yam,A1
Bruce,google,A3"")

DT %>% group_by(user, web) %>%
  mutate(code_name = paste0(""code_"", 1:n())) %>%
  spread(code_name, code, fill = """")
#     user     web code_1 code_2
# 1  Bruce finance     A2
# 2  Bruce  google     A3
# 3  Bruce     yam     A1
# 4   Kate finance     A2
# 5 Shelly     yam     A1     A1


--","R_Language"
"2032","M.1438870193.A.524","SFMAndroid","問題","資料堆疊",2015-08-06 22:09:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在處理一筆資料 大概長這樣：

user       web         code

Shelly     yam         A1

Bruce      finance     A2

Shelly     yam         A1

Kate       finance     A2

Bruce      yam         A1

Bruce      google      A3


希望能夠用堆疊(應該是堆疊吧)的方法讓資料變成這樣：

user     web      code1     code2

Shelly   yam      A1        A1

Bruce    finance  A2

Bruce    yam      A1

Bruce    google   A3

Kate     finance  A2


目前只有想到用for迴圈一層一層做

但是實際資料的user人數很多 web也很多

而且即使耗時費力的把for寫完

也只是每列一個data.frame

像這個例子就有5個 data.frame...

row的number不相等也是上網查到能用list做

但是最開始還要先把每個data.frame用list(df1, df2, ...)之後才能繼續

真實資料的df應該會有上百個吧@@

感覺這樣做超沒效率的

不知道有沒有大大能提供一些想法讓小弟參考

謝謝！！


[程式範例]:


[環境敘述]:

R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950


[關鍵字]:

堆疊

--","R_Language"
"2033","M.1438845962.A.DFF","ardodo","問題","文字探勘無法將中文的\n移除",2015-08-06 15:25:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:text mining無法將\n移除我參考了陳嘉葳的文章，照著他的作法作，但是我無法將中文的\n移除，利用

設定了stopwords後依然無法將\n給斷掉，請問該如何解決呢？

範例檔案在此↓https://drive.google.com/open?id=0Bz0IlJks1nIiUVktajFlc29PODA[程式範例]:http://pastebin.com/gaeXZX6w[sessionInfo]
R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] cluster_2.0.1      fpc_2.1-9          wordcloud_2.5
RColorBrewer_1.1-2 Rwordseg_0.2-1
[6] rJava_0.9-6        tmcn_0.1-4         tm_0.6-2
NLP_0.1-8

loaded via a namespace (and not attached):
 [1] flexmix_2.3-13    Rcpp_0.11.6       MASS_7.3-40       mclust_5.0.2
lattice_0.20-31
 [6] prabclus_2.2-6    tools_3.2.1       nnet_7.3-9        parallel_3.2.1
grid_3.2.1
[11] modeltools_0.2-21 class_7.3-12      trimcluster_0.1-2 kernlab_0.9-20
robustbase_0.92-5
[16] slam_0.1-32       DEoptimR_1.0-3    diptest_0.75-7    stats4_3.2.1
mvtnorm_1.0-3

--","R_Language"
"2034","M.1438841468.A.E39","celestialgod","問題","Re: 處理資料問題(pkg:dplyr)",2015-08-06 14:11:06,NA,NA,"※ 引述《psinqoo (零度空間)》之銘言：: 延伸問題: 正被搞暈中: RAW DATA長這樣好讀版：http://pastebin.com/tPH8i43plibrary(data.table)
library(reshape2)
library(dplyr)
library(tidyr)
library(magrittr)
dat = data.table(ID = rep(LETTERS[1:2], 4:3),
  location = c('TAI', 'JP', 'CH', 'KOE', 'JP', 'GOK', 'TA'),
  year = c(2012, 2013, 2014, 2011, 2011, 2015, 2012),
  sex = rep(c(""F"", ""M""), 4:3)): ID 地點 日期 性別: A  TAI  2012 F: A  JP   2013 F: A  CH   2014 F: A  KOE  2011 F: B  JP   2011 M: B  GOK  2015 M: B  TA   2012 M: 變成下面這樣: 第一種 形式: ID  地點一  地點二  地點三  地點四  性別: A   KOE     TAI      JP      CH      F: B   JP      TA       GOK             Mdat %>% group_by(ID, sex) %>%
  mutate(location_name = paste0(""location_"", 1:n())) %>%
  select(-year) %>% spread(location_name, location, fill = """")
#   ID sex location_1 location_2 location_3 location_4
# 1  A   F        TAI         JP         CH        KOE
# 2  B   M         JP        GOK         TA: 第二種: ID  2011 2012 2013 2014 2015  性別: A   KOE  TAI  JP   CH          F: B   JP   TA              GOK   Mdat %>% spread(year, location, fill="""")
## dcast.data.table(dat, ID + sex ~ year, value.var = ""location"")
#    ID sex 2011 2012 2013 2014 2015
# 1:  A   F  KOE  TAI   JP   CH
# 2:  B   M   JP   TA            GOK: 第三種: ID  地點           性別: A   KO,TAI,JP,CH    F: B   JP,TA,GOK       M## method 1
dat %>% spread(year, location, fill="""") %>%
  setnames(as.character(2011:2015), paste0(""year_"", 2011:2015)) %>%
  mutate(location = paste(year_2011, year_2012,year_2013,year_2014,year_2015,
    sep = "","")) %>%
  mutate(location = gsub(',+', ',',gsub(',$', '', location))) %>%
  select(ID, sex, location)
#    ID sex       location
# 1:  A   F  KOE,TAI,JP,CH
# 2:  B   M      JP,TA,GOK

## method 2 (little tricky)
dat3 = dat %>% mutate(ones = ""c1"") %>% select(-year) %>%
  dcast.data.table(ID + sex ~ ones,
    fun.aggregate = function(x){paste(x, collapse = ',')},
    value.var = ""location"") %>% setnames(""c1"", ""location"")
dat3
#    ID sex      location
# 1:  A   F TAI,JP,CH,KOE
# 2:  B   M     JP,GOK,TA

## 3 (method 2 with order of year)
# PS: output will be the same as method 1
dat3_2 = dat %>% mutate(ones = ""c1"") %>%
  arrange(ID, year) %>% select(-year) %>%
  dcast.data.table(ID + sex ~ ones,
    fun.aggregate = function(x){paste(x, collapse = ',')},
    value.var = ""location"") %>% setnames(""c1"", ""location"")
dat3_2
#    ID sex      location
# 1:  A   F KOE,TAI,JP,CH
# 2:  B   M     JP,TA,GOK

--","R_Language"
"2035","M.1438837719.A.809","psinqoo","問題","Re: 處理資料問題(pkg:dplyr)",2015-08-06 13:08:36,NA,NA,"延伸問題

正被搞暈中

RAW DATA長這樣

ID 地點 日期 性別
A  TAI  2012 F
A  JP   2013 F
A  CH   2014 F
A  KOE  2011 F

B  JP   2011 M
B  GOK  2015 M
B  TA   2012 M

變成下面這樣

第一種 形式

ID  地點一  地點二  地點三  地點四  性別
A   KOE     TAI      JP      CH      F
B   JP      TA       GOK             M


第二種

ID  2011 2012 2013 2014 2015  性別
A   KOE  TAI  JP   CH          F
B   JP   TA              GOK   M

第三種

ID  地點           性別
A   KO,TAI,JP,CH    F
B   JP,TA,GOK       M※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《gbd37 (有夠瞎)》之銘言：: : 軟體熟悉度:: : 入門: : [問題敘述]:: : x是原data的型態: : y是想用dplyr的套件去轉換成: : Fro1是No.那欄出現最多次的字串且n1是出現幾次: : Fro2是No.那欄出現第二多次的字串且n2是出現幾次: : 我試著用group_by summarise count都試不成功: : 抑或是也可以用別的套件來處理也OK 勞煩大大們指導: : [程式範例]:: : x <- data.frame(No.=c(rep('A01',3),rep('A02',3),rep('A03',3)),: :                 Fro=c('TPE','KOA','KOA','TAI','TAI',: :                 'TAI','KOA','TPE','TPE')): : y <- data.frame(No.=c('A01','A02','A03'),Fro1=c('KOA','TAI','TPE'),: :                 n1=c(2,3,2),Fro2=c('TPE','NA','KOA'),n2=c(1,'NA',1)): : [關鍵字]:dplyr: library(dplyr): # library(magrittr) # 可省略: x <- data.frame(No=c(rep('A01',3),rep('A02',3),rep('A03',3)),:   Fro=c('TPE','KOA','KOA','TAI','TAI','TAI','KOA','TPE','TPE'),:   stringsAsFactors = FALSE): x %>% group_by(No, Fro) %>% summarise(nFro = n()) %>%:   summarise(Fro1 = Fro[which.max(nFro)], n1 = max(nFro),:   Fro2 = ifelse(n() > 1, Fro[order(nFro) == n()-1], NA_character_),:   n2 = ifelse(n() > 1, nFro[order(nFro) == n()-1], NA)): 如果x的column是factor會有問題，這個你可以自己找出來: 結果：:    No Fro1 n1 Fro2 n2: 1 A01  KOA  2  TPE  1: 2 A02  TAI  3   NA NA: 3 A03  TPE  2  KOA  1: 補充，你有兩個一樣大的最大值會有問題: 那時候要怎麼解決就看資料使用人要怎麼改.... 這部分空間比較大--

--","R_Language"
"2036","M.1438782354.A.30C","sandychan","問題","packages""seqinr""無法使用",2015-08-05 21:45:52,NA,NA,"[軟體熟悉度]:
入門

[問題敘述]:
我想要使用read.fasta這個指令,所以要安裝seqinr這個package
那我之前的電腦可以使用這個package
但最近換了新筆電就無法使用,也試過將R的版本使用和以前一樣的也沒辦法

[程式範例]:> install.packages(""seqinr"")Warning in install.packages(""seqinr"") :
  'lib = ""C:/Program Files/R/R-3.2.1/library""' is not writable
嘗試 URL
'http://cran.csie.ntu.edu.tw/bin/windows/contrib/3.2/seqinr_3.1-3.zip'Content type 'application/zip' length 2467527 bytes (2.4 MB)
downloaded 2.4 MB

package ‘seqinr’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
        C:\Users\XX\AppData\Local\Temp\RtmpCG5Gut\downloaded_packages> library(seqinr)Error in library(seqinr) : there is no package called ‘seqinr’

[環境敘述]:
R version 3.2.1 (2015-06-18)


[關鍵字]:
seqinr


--","R_Language"
"2037","M.1438780409.A.83B","Udyr","問題","shiny hover 問題",2015-08-05 21:13:27,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
已用shiny畫出network structure 圖, 如下http://imgur.com/563lKHe想做hover 或是toolips 讓滑鼠移過某個節點時 可以顯示該節點的資訊
但看了plotOutput 中 hover_Id功能為顯示圖型中某點的x,y坐標值
想請問有沒有功能是讓hover_id可以顯示該節點的編號呢?


--","R_Language"
"2038","M.1438753696.A.036","ardodo","問題","Re: shiny renderUI使用請教",2015-08-05 13:48:14,NA,NA,"發現一個新的問題，因為我把資料略為修改了，我的seller D只有賣model==a31

以及model==b55這兩項產品

不確定是不是因為這樣的修改，我現在選擇input的model時，我的renderTable

沒辦法因為我選擇input的model而有所變動

我檢查過我沒有打錯程式，但是我也不知道問題在哪裡Orz|||

code在此：http://pastebin.com/MFc9NbXq，懇請指點，謝謝※ 引述《ardodo (米蟲)》之銘言：: [問題敘述]::: 使用renderUI製作可依input條件篩選的output table:: 各位版友好，又來請教shiny的問題了，這次主要的問題是renderUI: 我想要我的output table能根據我設計的input篩選而有正確的呈現，而且每一個: 篩選條件能彼此呼應: 如選擇了brand==a，model只剩下a11,a21,a31可選，若此時先選擇tax==y，則: model只剩下a11,a21可選，此時seller可選擇的條件為A與B可選: [code]: http://pastebin.com/PQJARZWm: [錯誤說明]: 1. 出現以下警告訊息：: Warning in run(timeoutMs) ::   is.na() applied to non-(list or vector) of type 'NULL': 2. 我的renderTable沒有出現: 懇請指點，謝謝大家--","R_Language"
"2039","M.1438698662.A.15C","celestialgod","問題","Re: 處理資料問題(pkg:dplyr)",2015-08-04 22:30:58,NA,NA,"※ 引述《gbd37 (有夠瞎)》之銘言：: 軟體熟悉度:: 入門: [問題敘述]:: x是原data的型態: y是想用dplyr的套件去轉換成: Fro1是No.那欄出現最多次的字串且n1是出現幾次: Fro2是No.那欄出現第二多次的字串且n2是出現幾次: 我試著用group_by summarise count都試不成功: 抑或是也可以用別的套件來處理也OK 勞煩大大們指導: [程式範例]:: x <- data.frame(No.=c(rep('A01',3),rep('A02',3),rep('A03',3)),:                 Fro=c('TPE','KOA','KOA','TAI','TAI',:                 'TAI','KOA','TPE','TPE')): y <- data.frame(No.=c('A01','A02','A03'),Fro1=c('KOA','TAI','TPE'),:                 n1=c(2,3,2),Fro2=c('TPE','NA','KOA'),n2=c(1,'NA',1)): [關鍵字]:dplyrlibrary(dplyr)
# library(magrittr) # 可省略
x <- data.frame(No=c(rep('A01',3),rep('A02',3),rep('A03',3)),
  Fro=c('TPE','KOA','KOA','TAI','TAI','TAI','KOA','TPE','TPE'),
  stringsAsFactors = FALSE)
x %>% group_by(No, Fro) %>% summarise(nFro = n()) %>%
  summarise(Fro1 = Fro[which.max(nFro)], n1 = max(nFro),
  Fro2 = ifelse(n() > 1, Fro[order(nFro) == n()-1], NA_character_),
  n2 = ifelse(n() > 1, nFro[order(nFro) == n()-1], NA))

如果x的column是factor會有問題，這個你可以自己找出來

結果：

   No Fro1 n1 Fro2 n2
1 A01  KOA  2  TPE  1
2 A02  TAI  3   NA NA
3 A03  TPE  2  KOA  1

補充，你有兩個一樣大的最大值會有問題

那時候要怎麼解決就看資料使用人要怎麼改.... 這部分空間比較大

--","R_Language"
"2040","M.1438698401.A.A59","Wush978","問題","Re: 應用迴圈於資料處理的效率",2015-08-04 22:26:37,NA,NA,":  因此我的問題如下：::  (1) R 的迴圈為何可以慢成這樣? 我知道有研究過底層的高手理解來龍去脈，但對於:      新手而言，有沒有什麼簡單的說法可以 give some insight?:: --","R_Language"
"2041","M.1438697493.A.F4B","gbd37","問題","處理資料問題(pkg:dplyr)",2015-08-04 22:11:30,NA,NA,"軟體熟悉度:
入門

[問題敘述]:
x是原data的型態

y是想用dplyr的套件去轉換成

Fro1是No.那欄出現最多次的字串且n1是出現幾次

Fro2是No.那欄出現第二多次的字串且n2是出現幾次

我試著用group_by summarise count都試不成功

抑或是也可以用別的套件來處理也OK 勞煩大大們指導

[程式範例]:
x <- data.frame(No.=c(rep('A01',3),rep('A02',3),rep('A03',3)),
                Fro=c('TPE','KOA','KOA','TAI','TAI',
                'TAI','KOA','TPE','TPE'))

y <- data.frame(No.=c('A01','A02','A03'),Fro1=c('KOA','TAI','TPE'),
                n1=c(2,3,2),Fro2=c('TPE','NA','KOA'),n2=c(1,'NA',1))

[關鍵字]:dplyr

--","R_Language"
"2042","M.1438689234.A.10D","celestialgod","問題","Re: 應用迴圈於資料處理的效率",2015-08-04 19:53:53,NA,NA,"※ 引述《missingmini (just missing)》之銘言：: [程式範例]:: 我有一個很大的 data.table 物件，名稱為 tbl_left，是由 fread 讀入文字檔案: 建立的，大小為 1821350 x 24。這 24 欄裡面其中一個叫做 ID，其型態為 character。: 另有一個較小的 data.table，名稱為 tbl_right，也是由 fread 建立的，大小為: 1289 x 24。這 24 欄裡面也有一個叫做 ID，型態也是 character。: 現在我執行 tbl_joined <- dplyr:::left_join(tbl_left, tbl_right, by = ""ID""): 產生一個新的物件 tbl_joined，發現它有 1821479 列，比原來 tbl_left 的 1821350: 還多了 129 列。研究了一下，發現是因為 tbl_right 裡面有些列的 ID 欄位有重覆的，: 所以 join 到 tbl_left 之後，會有多出來的列。: 為了找出究竟是哪些重覆的 ID 造成此結果，我做的步驟如下：: [1] 首先，用 distinct(select(tbl_right, ID)) 得到的結果有 1159 列，得知有:     1289 - 1159 = 130 列是重覆的: [2] 用以下程式:  right_ID <- select(tbl_right, ID):  right_ID_sorted <- sort(right_ID$ID):  right_ID_dup = rep("" "", 130) # create a character vector of length 130:  j = 1:  for (i in 1:(length(right_ID_sorted)-1)) {:    if (right_ID_sorted[i] == right_ID_sorted[i+1]) {:      right_ID_dup[j] <- right_ID_sorted[i]; j <- j+1:    }:  }:  如此得到的 right_ID_dup 就是所有在 tbl_right 中有重覆的 ID 值: [3] 再來要找出 right_ID_dup 裡面，又有哪些值同時存在 tbl_left$ID:     (所以才會被 join 進來)，用以下程式:  for (tgt_ID in right_ID_dup) {:    for (j in 1:length(tbl_left$ID)) {:      if (tgt_ID == tbl_left[j]$ID) cat(tgt_ID, ""\n""):    }:  }:  結果這程式跑得非常的慢！跑了兩個小時只印出兩個值，於是放棄此方法。:  上網搜尋，得到以下解法：:  tst <- c(unique(tbl_left$ID), unique(right_ID_dup)):  comm_ID <- tst[duplicated(tst)]:  此法很快就得出結果，comm_ID 長度為 87，所以現在知道有 87 個 ID 值，:  是同時存在 tbl_left 與 tbl_right 的。: [4] 最後，要找出這 87 個 ID 值，總共在 tbl_right 中出現了幾次，寫了以下程式:  occur_total <- 0:  for (elem in comm_ID) {:    occur <- 0:    for (j in 1:length(tbl_right$ID)) {:      if (elem == tbl_right[j]$ID) occur <- occur + 1:    }:    occur_total <- occur_total + occur:  }:  cat(""Total: "", occur_total, ""\n""):  結果印出 Total: 216:  所以總共的重覆次數為 216 - 87 = 129。可以解釋為何經過 join 之後，結果比:  原來的 tbl_left 多了 129 列。:  但是。。。這個程式跑得也有點慢，大概近 5 分鐘才跑完。我想原因跟 [3] 的程式:  是相同的，亦即是:  ==> R 的迴圈就是很慢！:  因此我的問題如下：:  (1) R 的迴圈為何可以慢成這樣? 我知道有研究過底層的高手理解來龍去脈，但對於:      新手而言，有沒有什麼簡單的說法可以 give some insight?:  (2) [4] 的程式有什麼替代解法可以跑得比較快的?:  (3) [2] 的程式雖然不慢，但我相信高手可以提出更快更適合 R 的寫法我不知道怎麼跟你解釋R的迴圈很慢

可是有時候迴圈還是很快的 (看前幾篇更改矩陣的值就快很多)

而且，R有很多方法可以避免迴圈，想辦法用vectorise的方法去做才會快

這個法門只能多認識一些R的基礎函數

看你的寫法大概不知道 %in%, match，所以才會逐個元素做比較

先從學習這兩個函數，把迴圈改回一層開始吧


下面是用較快的程式 (其實善用duplicated就可以解決這些問題)

([2]~[4]全部都改寫到我電腦(cpu:B970)不用1秒就跑出結果了...)

程式：http://pastebin.com/36PheyGS'%>%'跟duplicated的用法可以往前看我撰寫的相關文章

(duplicated在base跟data.table都有，我這裡都用data.table的method)

--","R_Language"
"2043","M.1438686610.A.4DE","missingmini","問題","test",2015-08-04 19:10:07,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:R 的迴圈真的是非常慢[程式範例]:
我有一個很大的 data.table 物件，名稱為 tbl_left，是由 fread 讀入文字檔案
建立的，大小為 1821350 x 24。這 24 欄裡面其中一個叫做 ID，其型態為 character。

另有一個較小的 data.table，名稱為 tbl_right，也是由 fread 建立的，大小為
1289 x 24。這 24 欄裡面也有一個叫做 ID，型態也是 character。

現在我執行 tbl_joined <- dplyr:::left_join(tbl_left, tbl_right, by = ""ID"")
產生一個新的物件 tbl_joined，發現它有 1821479 列，比原來 tbl_left 的 1821350
還多了 129 列。研究了一下，發現是因為 tbl_right 裡面有些列的 ID 欄位有重覆的，
所以 join 到 tbl_left 之後，會有多出來的列。

為了找出究竟是哪些重覆的 ID 造成此結果，我做的步驟如下：

[1] 首先，用 distinct(select(tbl_right, ID)) 得到的結果有 1159 列，得知有
    1289 - 1159 = 130 列是重覆的

[2] 用以下程式

 right_ID <- select(tbl_right, ID)
 right_ID_sorted <- sort(right_ID$ID)
 right_ID_dup = rep("" "", 130) # create a character vector of length 130
 j = 1
 for (i in 1:(length(right_ID_sorted)-1)) {
   if (right_ID_sorted[i] == right_ID_sorted[i+1]) {
     right_ID_dup[j] <- right_ID_sorted[i]; j <- j+1
   }
 }

 如此得到的 right_ID_dup 就是所有在 tbl_right 中有重覆的 ID 值

[3] 再來要找出 right_ID_dup 裡面，又有哪些值同時存在 tbl_left$ID
    (所以才會被 join 進來)，用以下程式

 for (tgt_ID in right_ID_dup) {
   for (j in 1:length(tbl_left$ID)) {
     if (tgt_ID == tbl_left[j]$ID) cat(tgt_ID, ""\n"")
   }
 }

 結果這程式跑得非常的慢！跑了兩個小時只印出兩個值，於是放棄此方法。
 上網搜尋，得到以下解法：

 tst <- c(unique(tbl_left$ID), unique(right_ID_dup))
 comm_ID <- tst[duplicated(tst)]

 此法很快就得出結果，comm_ID 長度為 87，所以現在知道有 87 個 ID 值，
 是同時存在 tbl_left 與 tbl_right 的。

[4] 最後，要找出這 87 個 ID 值，總共在 tbl_right 中出現了幾次，寫了以下程式

 occur_total <- 0
 for (elem in comm_ID) {
   occur <- 0
   for (j in 1:length(tbl_right$ID)) {
     if (elem == tbl_right[j]$ID) occur <- occur + 1
   }
   occur_total <- occur_total + occur
 }
 cat(""Total: "", occur_total, ""\n"")

 結果印出 Total: 216

 所以總共的重覆次數為 216 - 87 = 129。可以解釋為何經過 join 之後，結果比
 原來的 tbl_left 多了 129 列。

 但是。。。這個程式跑得也有點慢，大概近 5 分鐘才跑完。我想原因跟 [3] 的程式
 是相同的，亦即是

 ==> R 的迴圈就是很慢！


 因此我的問題如下：

 (1) R 的迴圈為何可以慢成這樣? 我知道有研究過底層的高手理解來龍去脈，但對於
     新手而言，有沒有什麼簡單的說法可以 give some insight?
 (2) [4] 的程式有什麼替代解法可以跑得比較快的?
 (3) [2] 的程式雖然不慢，但我相信高手可以提出更快更適合 R 的寫法


[環境敘述]:R version 3.2.1 (2015-06-18)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.10.4 (Yosemite)locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] dplyr_0.4.2      data.table_1.9.4 magrittr_1.5loaded via a namespace (and not attached):[1] lazyeval_0.1.10 R6_2.0.1        assertthat_0.1  plyr_1.8.3      parallel_3.2.1  DBI_0.3.1       tools_3.2.1     reshape2_1.4.1  Rcpp_0.11.6[10] stringi_0.5-5   stringr_1.0.0   chron_2.3-47[關鍵字]:迴圈、data.table、dplyr--","R_Language"
"2044","M.1438659386.A.DD3","zxas10143","問題","排序問題",2015-08-04 11:36:23,NA,NA,"各位先進好

有兩個小問題想請教版上的各位

我想用R來進行大樂透的抽獎與對<U+5968>

也就是抽出10000組完全不重複的彩券進行對<U+5968>

下行是抽樣(我先抽10組)

replicate(6, sample(c(1:49), size=10, replace=FALSE)

抽出後我想對這10組進行排序

但目前了解的排序似乎是要先指定特定的row才可

因為數量蠻大的，想請教是否有其他方法可以對這樣的矩陣進行排序呢

另一個問題就是，是否有辦法比較快速的方法對大量的變項命名，而非逐一命名


還煩請版上先進們解惑

--","R_Language"
"2045","M.1438587589.A.D43","ardodo","問題","shiny renderUI使用請教",2015-08-03 15:39:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:使用renderUI製作可依input條件篩選的output table各位版友好，又來請教shiny的問題了，這次主要的問題是renderUI

我想要我的output table能根據我設計的input篩選而有正確的呈現，而且每一個

篩選條件能彼此呼應

如選擇了brand==a，model只剩下a11,a21,a31可選，若此時先選擇tax==y，則

model只剩下a11,a21可選，此時seller可選擇的條件為A與B可選


[code]http://pastebin.com/PQJARZWm[錯誤說明]

1. 出現以下警告訊息：
Warning in run(timeoutMs) :
  is.na() applied to non-(list or vector) of type 'NULL'

2. 我的renderTable沒有出現

懇請指點，謝謝大家

--","R_Language"
"2046","M.1438527811.A.57F","sinclairJ","問題","依序比對變數產生新資料",2015-08-02 23:03:29,NA,NA,"問題一
[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)目前較懂得用packages做分析 但對於資料預處理還是不太熟悉
[問題敘述]:
我要怎麼找出該欄的最小三個值所對應之""列樣本""

[程式範例]:#資料產生sample1=sample(1:3,100,replace=T)sample2=sample(1:3,100,replace=T)sample3=sample(1:3,100,replace=T)sample4=sample(1:3,100,replace=T)sample5=sample(1:3,100,replace=T)data=as.data.frame(rbind(sample1,sample2,sample3,sample4,sample5))#轉成類別型資料for(i in 1:ncol(data)) data[,i]=as.factor(data[,i])#計算樣本與樣本間相似程度,m表示距離矩陣,數值越小表示越相似n=nrow(data)m=matrix(nrow=n,ncol=n)for(i in seq_len(n - 1))for(j in seq(i, n))m[j, i]=m[i, j]=sum(data[i,] != data[j,])#m的輸出會長這樣,其中col1代表sample1,以此類推col1   col2   col3   col4   col51    0      25     65     56     242   58       0     45     23     843   65      73      0     77     364   21      53     43      0     715   25      36     68     74     NA問題：我要找col1中最小的兩個值之樣本，也就是4和5，有什麼語法可供參考嗎?因為如果用which.min(data[,1])的話，只會得到4問題二[問題類型]:*[1;30;40m程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)*[m[軟體熟悉度]:*[1;30;40m請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)*[m[問題敘述]:*[1;30;40m請簡略描述你所要做的事情，或是這個程式的目的*[m現有三個樣本，每個樣本有100個變數，所以維度是3*100我想依序比對這三個樣本之變數來產生第四個樣本(圖示a)在產生的過程中 該變數以多數決的方式產生第四個樣本之變數(圖示b)若遇到無法以多數決的方式產生之情況(圖示c)就截至比對目前結果為止，找出三個樣本哪個與第四個樣本最接近並根據此樣本的值去產生該變數(說明d)a.V1  V2  V3  V4  V5  V6  V7  ... ...  V100sample1   1   3   2   3   1   3   2  ... ...     1sample2   3   2   1   3   2   1   3  ... ...     1sample3   1   3   2   3   1   3   1  ... ...     2sample4   1   3   2   3   1   3   2  ... ...     1b.(以V1為例)V1  V2  V3  V4  V5  V6  V7  ... ...  V100sample1 ""1""   3   2   3   1   3   2  ... ...     1sample2  3    2   1   3   2   1   3  ... ...     1sample3 ""1""   3   2   3   1   3   1  ... ...     2sample4  1    3   2   3   1   3   2  ... ...     1c.(以V7為例)V1  V2  V3  V4  V5  V6  V7  ... ...  V100sample1   1   3   2   3   1   3  ""2"" ... ...     1sample2   3   2   1   3   2   1  ""3"" ... ...     1sample3   1   3   2   3   1   3  ""1"" ... ...     2sample4   1   3   2   3   1   3   2  ... ...     1d.因為到V7卡住，所以先對Sample1到Sample4(V1~V6)算一次相似程度計算的方式與問題一相同，所以比對程序截至到V6，此時的距離矩陣為col1  col2  col3  col41   0     5      0    02   5     0      5    53   0     5      0    04   0     5      0    NA(情況1)從結果可知 第四個樣本(col4)與第一與第三個樣本較相似此時可根據第一與第三個樣本的V7，第四個樣本的V7可任意填入2或1(情況2)col1  col2  col3  col41   0     5      0    02   5     0      5    53   0     5      0   ""1""4   0     5      0    NA如果今天算出來的距離矩陣是這樣 就可以很確定第四個樣本的V7要填入2[程式範例]:sample1=sample(1:3,100,replace=T)sample2=sample(1:3,100,replace=T)sample3=sample(1:3,100,replace=T)data=as.data.frame(rbind(sample1,sample2,sample3))接下來就請各位前輩多多提點一下了~感謝幫忙--","R_Language"
"2047","M.1438338189.A.559","ardodo","討論","關於shiny的書",2015-07-31 18:23:07,NA,NA,"大家好，最近接觸了shiny，但是對於shiny的應用還不夠熟悉，我主要困惑的是

互動式選單與互動式圖表的設計

假定我現在有筆資料，欄位有：3大類的使用者、2中類的性別、身高

我想要設計出選擇3大類的使用者後，性別會依照使用者而有所限制。

看了許多網站的範例、github也還是有許多說明看不太懂，想要比較系統性的學習

不知道有沒有推薦的書單呢？

我有搜尋到一本書：Web Application With R Using Shinyhttp://www.books.com.tw/products/F013395406不知道版上有沒有人看過這本呢？或是有沒有推薦的書單呢？


--","R_Language"
"2048","M.1438332243.A.F22","psinqoo","問題","fread iconv",2015-07-31 16:43:58,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的用fread 讀入 含有中文字 產生亂碼
該如何用 iconv 轉
這段語法 該如何寫



[程式範例]:程式碼可貼於以下網站：[環境敘述]:

win7請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:
data.table
fread iconv選擇性，也許未來有用--







--","R_Language"
"2049","M.1438306316.A.71F","psinqoo","分享","Re: 在Ubuntu上架設能顯示中文的shiny-server",2015-07-31 09:31:51,NA,NA,"我試過這版本能跑出中文字，

但在CentOS7上 該怎麼修改?

然後 在 ubuntu 上 比較常遇到的就是
安裝 R package 時

ubuntu 常需要下載補足一些OOXX
才有辦法 下載 R package 使用※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: shiny, shiny-server, chinese, png device, fonts: 大家好，: 昨天我架設shiny-server時，發生圖中的中文無法正確顯示的問題。: 經過一陣摸索和google之後，發現相關的知識挺零碎的。: 我自己把問題切割成兩個面向：: 1. png device 在缺乏x11環境時導致的錯誤。這個在SO中有看到幾位大大的建議，:    原則上就是使用cairo: 2. 字型的缺乏，導致圖中的中文變成方塊。:    這部份的資料很少，我是跑去搜尋Ubuntu的套件資訊時才找到的，花了很大力氣。: 最後我將整個過程，從minimal ubuntu開始，到設定出能正確顯示中文的shiny-server，: 寫在 https://registry.hub.docker.com/u/wush978/tw-r-shiny/dockerfile/ 之中: 給大家（和未來的我）參考。--

--","R_Language"
"2050","M.1438268649.A.427","Neisseria","問題","輸出的 PS 圖檔會裁切到邊緣",2015-07-30 23:04:06,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過幾個小型 script)[問題敘述]:我有一個以 batch 方式執行，可以產生約十多個圖表的 script，原 script 作者是以互動式一次執行一小段的程式，我改成以 batch 執行。雖然圖有順利產出，但是有一部分圖會裁切到一些些，例：http://imgur.com/Z5BgkVJ （已轉換為 PNG 檔）雖然可以再後製修改，但希望有比較完整的原始圖檔[程式範例]:# Set device before each new graphpostscript(file = '06_noise_modeling.ps')# A sample graph-generating code.  Each graph use different codexrange <- range(c(0:15))yrange <- range(c(0:100))plot(xrange,yrange,type='n',xlab=""Mean Expression"",ylab=""C.V."")points(g1.mean,g1.cv,col=8,cex=0.5)points(g2.mean,g2.cv,col=8,cex=0.5)lines(lowess.g1,col=3,lwd=2)lines(lowess.g2,col=2,lwd=2)abline(h=0,lwd=2)noise.cut.off <- 3abline(v=noise.cut.off,lwd=2,lty=3)[環境敘述]:R version 3.2.1 (2015-06-18)Platform: x86_64-apple-darwin14.3.0 (64-bit)Running under: OS X 10.10.4 (Yosemite)[關鍵字]:device--","R_Language"
"2051","M.1438234411.A.BB0","celestialgod","問題","Re: 比對刪除欄位與逐步計算cell",2015-07-30 13:33:29,NA,NA,"code & benchmark:http://pastebin.com/9d4m2HDcfor再改矩陣時很快，所以建議使用for

如果你是data.frame的話，還是建議轉成data.table 避免不斷複製data.frame的問題

apply雖然在這好用，但矩陣還是比不上迴圈的速度※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 小弟目前原始資料表格示意如下: sample/col   col1   col2  col3  col4  col5: sample1        5      8     6     15    2: sample2       16      8    16     25    5: sample3        5     18     8     16    12:  統計量a      NA      7     10    15    30:  統計量b       6      9     NA     8     8: 問題一、請問要如何把統計量a或統計量b為NA的那欄刪除，會變這樣：: sample/col    col2   col4  col5: sample1         8     15    2: sample2         8     25    5: sample3        18     16    12:  統計量a        7     15    30:  統計量b        9     8     8: 問題二、再逐步計算每個cell裡面的值，會變這樣：: sample/col    col2                   col4           col5: sample1        (8-統計量a)/統計量b   (15-a)/b      (2-a)/b: sample2        (8-a)/b               (25-a)/b      (5-a)/b: sample3        (18-a)/b              (16-a)/b     (12-a)/b: 因實際資料有上百行與上百列，想請教各位前輩如何用迴圈實現這兩個問題，感謝--","R_Language"
"2052","M.1438224723.A.FC5","sinclairJ","問題","比對刪除欄位與逐步計算cell",2015-07-30 10:52:00,NA,NA,"小弟目前原始資料表格示意如下
sample/col   col1   col2  col3  col4  col5
sample1        5      8     6     15    2
sample2       16      8    16     25    5
sample3        5     18     8     16    12
 統計量a      NA      7     10    15    30
 統計量b       6      9     NA     8     8

問題一、請問要如何把統計量a或統計量b為NA的那欄刪除，會變這樣：
sample/col    col2   col4  col5
sample1         8     15    2
sample2         8     25    5
sample3        18     16    12
 統計量a        7     15    30
 統計量b        9     8     8

問題二、再逐步計算每個cell裡面的值，會變這樣：
sample/col    col2                   col4           col5
sample1        (8-統計量a)/統計量b   (15-a)/b      (2-a)/b
sample2        (8-a)/b               (25-a)/b      (5-a)/b
sample3        (18-a)/b              (16-a)/b     (12-a)/b

因實際資料有上百行與上百列，想請教各位前輩如何用迴圈實現這兩個問題，感謝

--","R_Language"
"2053","M.1438071657.A.65D","cywhale","問題","sendmailR/mailR on shiny server當掉",2015-07-28 16:20:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想在shiny server上讓client端的使用者可以寄送email給我..
不論是使用sendmailR or mailR套件，在win8.1 Rstudio(or run on browser)
執行shiny::runApp 按下apply_send這個actionbutton，都可以正確寄出、收到email
沒問題

但當我將整個shiny app 架在centos系統下的shiny server上時，
若使用sendmailR 套件，這個app其他功能都沒問題，但當按下apply_send這個
actionbutton就會掛掉

若使用mailR 套件，這個app變得無法執行，一開始就掛掉。錯誤訊息跟上面用
sendmailR掛掉時的訊息一樣，都是這樣的訊息視窗：

""The application unexpectedly exited

Diagostic information has been dumped to the JavaScript error console""

若在browser上按F12看console是否有錯誤訊息，則發現它在發生上述錯誤當掉後，又
重新執行server.R一開始library() 那些敘述，然後就hold住。

我在centos這個shiny server上過去跑過幾個app都沒問題，但這次遇到這樣的錯誤，
google了一些相關sendmailR or mailR網友問答，嘗試後仍然找不出問題根源。

我目前試著在centos上灌rstudio-desktop想一步步debug，但奇妙的是，也一直灌不起來
Orz..
不管是用 rpm -Uvh rstudio-0.99.467-x86_64.rpm
錯誤：相依性偵測失敗：
        libR.so()(64bit) 被 rstudio-0.99.467-1.x86_64 所需要
        libc.so.6(GLIBC_2.14)(64bit) 被 rstudio-0.99.467-1.x86_64 所需要
        libc.so.6(GLIBC_2.15)(64bit) 被 rstudio-0.99.467-1.x86_64 所需要
        libstdc++.so.6(GLIBCXX_3.4.15)(64bit) 被 rstudio-0.99.467-1.x86_64 所需

或者 install from git (follow steps:https://goo.gl/KmdIVu卡在 Qt5Webkit這個裝不起來
錯誤：
CMake Error at src/cpp/desktop/CMakeLists.txt:80 (find_package):
  By not providing ""FindQt5WebKit.cmake"" in CMAKE_MODULE_PATH this project
  has asked CMake to find a package configuration file provided by
  ""Qt5WebKit"", but CMake did not find one.

我還在持續嘗試中... 不知道有無先進，在這幾個問題癥結上，曾經有過嘗試，或遇過
類似的問題，可以指引一個可能可以試看看的方向...謝謝

以下是部分 sendmailR and mailR code in server.R，
這部分在win8.1環境下並無任何問題...

[程式範例]:...
library(rJava)
#library(sendmailR)
library(mailR)

observeEvent(input$apply_send,{
  if (input$apply_send == 0)
    return(NULL)

  ...
  isolate ({
#    sendmail(from=from,to=to,subject=subject,msg=body,
#             control=list(smtpServer=""ASPMX.L.GOOGLE.COM"",smtpPort=""25""))

    send.mail(from = from,
              to = to,
              subject=subject,
              body = input$apply_msg,
              smtp = list(host.name = ""aspmx.l.google.com"", port = 25),
              authenticate = FALSE, send = TRUE))
  })
})
[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤CentOS release 6.5 (Final)

sessionInfo()
R version 3.2.0 (2015-04-16)
Platform: x86_64-unknown-linux-gnu (64-bit)
Running under: CentOS release 6.5 (Final)

locale:
 [1] LC_CTYPE=zh_TW.UTF-8       LC_NUMERIC=C
 [3] LC_TIME=zh_TW.UTF-8        LC_COLLATE=zh_TW.UTF-8
 [5] LC_MONETARY=zh_TW.UTF-8    LC_MESSAGES=zh_TW.UTF-8
 [7] LC_PAPER=zh_TW.UTF-8       LC_NAME=C
 [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=zh_TW.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base


[關鍵字]:
shiny server, sendmailR, mailR, CentOS


--","R_Language"
"2054","M.1438062899.A.71E","sinclairJ","問題","同條折線圖上的點，不同顏色",2015-07-28 13:54:56,NA,NA,"如標題 我要如何讓同條線的某些點點有另外一種顏色?
plot參數看了好久，好像沒地方改
煩請各位前輩指教

x=rnorm(50,25,20)
plot(x,type=""o"",col=""blue"")http://i.imgur.com/KSrBTgj.jpg--
Sent from my Android

--","R_Language"
"2055","M.1437965677.A.A6F","celestialgod","問題","Re: 資料整理",2015-07-27 10:54:35,NA,NA,"※ 引述《Udyr (Udyr)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 資料形式為list: $`875523`: [1] ""A"" ""B"" ""E"" ""C"" ""D"" ""G"": $`881823`: [1] ""B"" ""D"" ""F"" ""E"": 想將資料整理為以下格式:            A    B    C    D    E   F    G: 875523     1    1    1    1    1   0    1: 881823     0    1    0    0    1   1    0A_list = list(LETTERS[c(1,2,5,3,4,7)], LETTERS[c(2,4,6,5)])
names(A_list) = c(""875523"", ""881823"")
all_levels = sort(unique(unlist(A_list)))
out = sapply(A_list, function(x) {
  tmp = rep(0, length(all_levels))
  tmp[match(x, all_levels)] = 1
  tmp
})
out = t(out)
colnames(out) = all_levels
out
##        A B C D E F G
## 875523 1 1 1 1 1 0 1
## 881823 0 1 0 1 1 1 0

## 如果A, B, C, ...不是只有一個，sapply內部要做更改
out = sapply(A_list, function(x) {
  x2 = tapply(rep(1,length(x)), x, sum)
  tmp = rep(0, length(all_levels))
  tmp[match(names(x2), all_levels)] = x2
  tmp
})


## method 2 (可以查看前面的資料整理套件介紹的系列文)
library(reshape2)
library(data.table)
library(plyr)
library(dplyr)
library(magrittr)
A_list = list(LETTERS[c(1,2,5,3,4,7)], LETTERS[c(2,4,6,5)])
names(A_list) = c(""875523"", ""881823"")
DT = llply(1:length(A_list), function(i){
  data.table(id = names(A_list)[i], level = A_list[[i]])
}) %>% bind_rows
DT %>% dcast(id ~ level)
##       id A B C D E F G
## 1 875523 1 1 1 1 1 0 1
## 2 881823 0 1 0 1 1 1 0

## use sparse matrix
library(Matrix)
A_list = list(LETTERS[c(1,2,5,3,4,7)], LETTERS[c(2,4,6,5)])
names(A_list) = c(""875523"", ""881823"")
all_levels = sort(unique(unlist(A_list)))
j_index = lapply(A_list, match, table = all_levels)
i_index = lapply(1:length(out), function(x) rep(x, length(out[[x]])))
i_index = as.integer(unlist(i_index)-1)
j_index = as.integer(unlist(j_index)-1)
out = new(""dgTMatrix"", i = i_index, j = j_index,
    x=rep(1,length(i_index)),
    Dim=c(length(A_list), length(all_levels)))

如果是all_levels無法配置足夠的記憶體的話

請使用迴圈用setdiff做人工的unique...

這裡沒考慮大於1的可能性，如果大於1需要比較複雜的運算

--","R_Language"
"2056","M.1437958092.A.291","Udyr","問題","資料整理",2015-07-27 08:48:09,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
請把以下不需要的部份刪除
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

資料形式為list
$`875523`
[1] ""A"" ""B"" ""E"" ""C"" ""D"" ""G""

$`881823`
[1] ""B"" ""D"" ""F"" ""E""

想將資料整理為以下格式

           A    B    C    D    E   F    G
875523     1    1    1    1    1   0    1
881823     0    1    0    0    1   1    0


--","R_Language"
"2057","M.1437916508.A.C27","celestialgod","心得","預分配記憶體的差異",2015-07-26 21:15:05,NA,NA,"其實一直想討論這個議題，只是遲遲沒有去寫這個

這次就想說來分享一下preallocated memory這件事

很多人會寫這樣的code:

A_list = list()
for (i in 1:N){
    A_list[[i]] = # give something
}

會直接給一個空的list然後開始塞東西

R裡面的list其實是一群pointer組成的向量

如果你沒有聽過pointer

你可當做""指示物""去引導到你要的東西

舉例來說：

List_1 <- list(a = 1:5, b = 2:4)

List_1就含有兩個pointer，指向a跟b的儲存位置

我們可以從tracemem來看到這點

tracemem回傳一個物件儲存在記憶體的位置

你可以透過這個去看物件有在記憶中被複製或被搬移等動作

我們來print out List_1的memory位置

cat(tracemem(List_1), '\n')
## <0000000015083EA8>

cat(tracemem(List_1[[1]]), '\n')
## <00000000060E97F0>

cat(tracemem(List_1[[2]]), '\n')
## <0000000015083EE0>

這樣可以看出tracemem(List_1)跟tracemem(List_1[[1]])的位置不同

如果list是沿著物件的大小去儲存

那麼我們應該看到List_1的位置跟List_1[[1]]的位置是重疊的

但是這裡顯示並非如此，因此，我們可以合理推斷

list是一群pointer組成的向量

以上如果你學過C++，應該對這個部分比較熟悉

如果不太熟悉，記得這個結果：list是一群pointer的向量


接著我們看如果我們給一個空的list

去做擴充list的動作會發生什麼事情

s1 = list()
cat(tracemem(s1), '\n')## <000000001523AB70>for (i in 1:3)
{
  s1[[i]] = rnorm(i)
  cat(tracemem(s1), '\n')
}## <00000000061DAC48>## <00000000067A55C8>## <000000000AC68AE8>這裡我們可以看到s1的位置不斷的被改變

代表說s1其實不斷搬移到不同位置上

那我們看看如果我們先設定好list大小的結果

s2 = vector('list', 3)
cat(tracemem(s2), '\n')<000000000AD48B58>for (i in 1:3)
{
  s2[[i]] = rnorm(i)
  cat(tracemem(s2), '\n')
  cat(tracemem(s2[[i]]), '\n')
}## <000000000AD48B58>## <000000000AD48B58>## <000000000AD48B58>我們可以看到完全沒有改變s2的位置，而s2沒有被搬移過

那麼沒有搬移告訴我們什麼事情？

沒有搬移就告訴我們不需要把位置上的東西做複製

不用做複製，那麼我們的操作就不會因為複製而變慢


我提供一個簡單的測試去測試有無preallocated memory的迴圈速度差異

f_without_preallocated <- function(){
  a <- list()
  for (i in 1:1e6){ a[[i]] <- rnorm(10) }
}

f_with_preallocated <- function(){
  a <- vector('list', 1e6)
  for (i in 1:1e6){ a[[i]] <- rnorm(10) }
}
library(rbenchmark)
benchmark(f_without_preallocated(), f_with_preallocated(),
  columns = c(""test"", ""replications"", ""elapsed"", ""relative""),
  order = ""relative"", replications = 20)##                       test replications elapsed relative## 2    f_with_preallocated()           20    5.92    1.000## 1 f_without_preallocated()           20  360.90   60.963可以看到差到快60倍的速度，因此，建議preallocate memory!!

我的環境：windows 7 64bit, RRO-3.2.0 (2015-04-16),[email<U+00A0>protected]list只是其中一個例子

我只是挑大家最常用到的case去做

還有一些案例像是：

MaxIter = 1e6
x = c()
i = 0
while (iter < MaxIter){
  i <- i + 1
  x <- c(x, i)
  if (## some condition)
    break
}

這種不斷增長vector x的方式也是十分的消耗記憶體複製的時間

這種不知道長度時最多人用的做法

但是其實可以換成下列這樣：

MaxIter = 1e6
x = rep(NA_real_, 10)
for (i in 1:MaxIter)
  x[i] <- i
  if (## some condition)
    break
}
x = x[!is.na(x)]

再給一個簡單的benchmark：

f_while_1 <- function(){
  MaxIter = 1e5
  x = c()
  i = 0
  while (iter < MaxIter){
    i <- i + 1
    x <- c(x, i)
    if (i > 5e4)
      break
  }
  x
}

f_while_2 <- function(){
  MaxIter = 1e5
  x = rep(NA_real_, MaxIter)  ## 註一
  for (i in 1:MaxIter)
    x[i] <- i
    if (i > 5e4)
      break
  }
  (x = x[!is.na(x)])
}
library(rbenchmark)
benchmark(f_while_1(), f_while_2(),
  columns = c(""test"", ""replications"", ""elapsed"", ""relative""),
  order = ""relative"", replications = 20)##          test replications elapsed relative## 2 f_while_2()           20    1.00     1.00## 1 f_while_1()           20   53.17    53.17可以看出平均消耗的時間可以差到53倍。


這些測試希望可以帶給大家一些東西，謝謝觀看此篇文章。

裡面還有一些操作的議題，像是向量化運算(vectorise)等，有機會再來討論

有興趣可以先去讀讀看R in a Nutshell第24章有提到相關的事情

(詳細資訊：R in a Nutshell, Joseph Adler, O'Reilly)


註一：NA有四種類型NA_integer_, NA_real_, NA_complex_ and NA_character_

分別是整數、帶小數的數、複數跟字元的NA類別

不同NA類別會給vector不同類型的儲存大小、儲存類型

給一個適當的NA也是一個好方法

另外，一般的NA是NA_character_


PS：

有些人會提到sapply, lapply會比較有效率：

但是其實sapply跟lapply只是有preallocate memory的動作

(sapply, lapply可能有其他優化，如果有人知道再麻煩告知我)

會比沒有preallocate memory的for-loop快而已

在你要同時進行多個list或是向量操作

還是建議用迴圈比較簡單做操作，因為時間根本不會差太多

在一些情況下，sapply跟lapply會更慢 (註二)

給一個簡單的例子：

N = 5e4
st <- proc.time()
a11 <- c()
a21 <- list()
a31 <- c()
for (i in 1:N){
  a11[i] <- i
  a21[[i]] <- cumsum(1:i)
  a31[i] <- sum(1:i)
}
proc.time() - st##   user  system elapsed##  12.70    0.02   12.75st <- proc.time()
a12 <- sapply(1:N, function(i)i)
a22 <- lapply(1:N, function(i) cumsum(1:i))
a32 <- lapply(1:N, function(i) sum(1:i))
proc.time() - st##   user  system elapsed##   7.57    0.02    9.93st <- proc.time()
a13 <- vector('numeric', N)
a23 <- vector('list', N)
a33 <- vector('numeric', N)
for (i in 1:N){
  a13[i] <- i
  a23[[i]] <- cumsum(1:i)
  a33[i] <- sum(1:i)
}
proc.time() - st##   user  system elapsed##   7.76    0.00    8.20這個結果顯示sapply最快，有preallocate memory的for-loop差不多

而沒有preallocate memory的for-loop最慢

但是這裡還有一件事要注意

就是sapply跟有preallocate memory的for-loop並非總是最快

有時候反而會比沒有preallocate memory的for-loop最慢

而且在記憶體相對少時

沒有preallocate memory的for-loop跑得出來結果

而sapply跟有preallocate memory的for-loop會跑不出來，因為記憶體不足

因此，在這方面需要去衡量你的運算是否需要消耗大量記憶體

如果是，那麼preallocate memory對你有弊無利

這方面需要經驗去判斷，但是我還是建議初學者多多使用preallocate memory



但是這裡有一個有趣的結果(完全超乎預期的結果)：

我把上面的程式碼做一點改變(下面我用紅色標註我做改變的地方)

N = 5e4
st <- proc.time()
a11 <- c()
a21 <- list()
a31 <- c()
for (i in 1:N){
  a11[i] <- i
  a21[[i]] <- rnorm(round(mean(a11)/10))
  a31[i] <- sum(a11)
}
proc.time() - st##   user  system elapsed##  12.87    0.11   12.98st <- proc.time()
a12 <- sapply(1:N, function(i)i)
a22 <- lapply(1:N, function(i) rnorm(round(mean(a12[1:i])/10)))
a32 <- sapply(1:N, function(i) sum(a12[1:i]))
proc.time() - stuser  system elapsed17.41    0.08   17.49st <- proc.time()
a13 <- vector('numeric', N)
a23 <- vector('list', N)
a33 <- vector('numeric', N)
for (i in 1:N){
  a13[i] <- i
  a23[[i]] <- rnorm(round(mean(a13[1:i])/10))
  a33[i] <- sum(a13[1:i])
}
proc.time() - stuser  system elapsed18.75    0.16   18.90如果你透過了外來變數來計算你其他的值

而且你的外生變數不斷的變化大小下

先生成好外生變數，再進行取子集的動作反而會更慢

這個結果，讓我滿意外的，我還沒有想過這個要怎麼解釋

可能看有沒有人可以幫忙回答這個問題


註二：

我有遇過這種情況，不過目前還不清楚出現的條件為何，

我的猜測是運算的複雜程度，我給一個我手邊有的測試：

(我只跑了三四次，都是lapply比較慢，有空的人可以跑跑看rbenchmark)


N = 1e4
st <- proc.time()
a12 <- lapply(1:N, function(i) replicate(10, rnorm(1000)))
b <- rnorm(10)
a22 <- lapply(1:N, function(i) a12[[i]] %*% b + rnorm(1000))
a32 <- lapply(1:N, function(i) lm(a22[[i]] ~ a12[[i]]))
a42 <- lapply(1:N, function(i) fitted(a32[[i]]))
a52 <- lapply(1:N, function(i) resid(a32[[i]]))
proc.time() - st##    user  system elapsed##   28.63    0.31   28.94st <- proc.time()
a13 <- vector('list', N)
a23 <- vector('list', N)
a33 <- vector('list', N)
a43 <- vector('list', N)
a53 <- vector('list', N)
b <- rnorm(10)
for (i in 1:N){
  a13[[i]] <- replicate(10, rnorm(1000))
  a23[[i]] <- a12[[i]] %*% b + rnorm(1000)
  a33[[i]] <- lm(a22[[i]] ~ a12[[i]])
  a43[[i]] <- fitted(a32[[i]])
  a53[[i]] <- resid(a32[[i]])
}
proc.time() - st##    user  system elapsed##    28.1     0.2    28.3[關鍵字]: preallocated memory


--","R_Language"
"2058","M.1437894791.A.4C4","celestialgod","問題","Re: 在shiny上以rCharts畫scatter plot",2015-07-26 15:13:08,NA,NA,"7/26 16:23更新：

後來測試成功，重點在於設定dom的名稱

code:http://pastebin.com/6c0gdc1YnPlot成功案例：http://tinyurl.com/ovuxmpt7/26 15:10寫的：

我跑是沒出現任何警告跟錯誤，我的環境列於下方：

而且有正常呈現，不過你的scatter_plot那個tab沒有圖就是> sessionInfo()R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] shiny_0.11.1  rCharts_0.4.5

loaded via a namespace (and not attached):
 [1] R6_2.0.1        plyr_1.8.2      htmltools_0.2.6 tools_3.2.0
 [5] whisker_0.3-2   yaml_2.1.13     Rcpp_0.11.5     RJSONIO_1.3-0
 [9] grid_3.2.0      digest_0.6.8    xtable_1.7-4    httpuv_1.3.2
[13] mime_0.3        lattice_0.20-31

測試code:http://pastebin.com/qxpRSm0y(我只是把ui.R跟server.R合併到function而已)※ 引述《ardodo (米蟲)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 版友好，我試著以rCharts在shiny上繪製iris的散布圖，但是畫不出來，不知道為什麼: code在此 http://pastebin.com/EkS2YxcC: 執行shiny後，會跳出以下的訊息：: Note: the specification for S3 class “AsIs” in package ‘jsonlite’ seems: equivalent to one from package ‘RJSONIO’: not turning on duplicate class: definitions for this class.: 懇請解答，感謝: 附上我的sessionInfo: other attached packages:: [1] rCharts_0.4.5 shiny_0.12.1: loaded via a namespace (and not attached)::  [1] Rcpp_0.11.6       lattice_0.20-31   digest_0.6.8      mime_0.3: grid_3.2.1:  [6] R6_2.1.0          plyr_1.8.3        xtable_1.7-4      jsonlite_0.9.16: rstudioapi_0.3.1: [11] whisker_0.3-2     RJSONIO_1.3-0     tools_3.2.1       httpuv_1.3.2: yaml_2.1.13: [16] rsconnect_0.4.1.2 htmltools_0.2.6--","R_Language"
"2059","M.1437893339.A.9C2","celestialgod","問題","Re: 隨機森林畫決策樹",2015-07-26 14:48:56,NA,NA,"※ 引述《SFMAndroid (安卓發送)》之銘言：: 承前篇: 目前成功用plot.getTree得到結果了: #code: library(tree): library(reprtree): library(plotrix): set.seed(100): jepg(""~//tree.jpeg"", width=1300, height=800): reprtree:::plot.getTree(rf, k=10, depth=0): dev.off()我看了一下，原作者好像寫死了那個部分的參數(cex = 0.8)

所以你需要用git clone把package download之後自己做一些修改

plor.reptree.R的 labelBG加上一個input, cex.label

boxed.labels裡面的cex引數原本等於0.8要改成  cex = cex.label

像下面這樣：

labelBG <- function(tr, cex.label = 0.8){
  ## 中間省略
  boxed.labels(xy$x[ind],xy$y[ind]+0.5*charht, rows[ind] , border=F,
    bg='white', cex=cex.label, xpad=0.5, ypad=1)
}

plot.getTree.R的plot.getTree加上一個input, cex.label

然後改倒數第三行的labelBG，改成labelBG(x, cex.label)

像這樣

plot.getTree <- function(rforest=NULL,tr=NULL,k=1, depth=0,main=NULL,
   cex.label = 0.8, ...){
## 中間省略
  labelBG(x, cex.label)
  labelYN(x)
  title(main=main)
}


你接下來這樣就可以work了

library(reprtree)
set.seed(100)
 data <- data.frame(y=sample(c(""好"", ""不好""), 100, replace=TRUE),
     x1=sample(c(""學生"", ""老師"", ""教官""), 100, replace=TRUE),
     x2=sample(c(""20歲以下"", ""20~30歲"", ""30歲以上""), 100, replace=TRUE))
rf <- randomForest(y~., data=data, ntree=10, proximity=TRUE)
reprtree:::plot.getTree(rf, k=10, depth=0, cex.label = 2)



--","R_Language"
"2060","M.1437888031.A.B6D","SFMAndroid","問題","Re: 隨機森林畫決策樹",2015-07-26 13:20:28,NA,NA,"承前篇

目前成功用plot.getTree得到結果了


#code
library(tree)
library(reprtree)
library(plotrix)
set.seed(100)
jepg(""~//tree.jpeg"", width=1300, height=800)
reprtree:::plot.getTree(rf, k=10, depth=0)
dev.off()

圖檔在最下面

但是有一個問題：中間節點的字太小@@

拉大後字又整個糊掉

小弟第一反應是用cex下去調 但結果只有葉節點的部分變大(0,1)那邊

cex.label又不能用

中間節點大小完全沒變...讀了作者的function設定

裡面沒看到相關參數  但有提到和text.tree

所以又跑去找text.tree的設定 不過還是沒找到方法


小弟的對繪圖參數不是很熟悉 希望有人能指點小弟一下

感激萬分http://imgur.com/VYNFlRb--","R_Language"
"2061","M.1437838387.A.FBC","ardodo","問題","在shiny上以rCharts畫scatter plot",2015-07-25 23:33:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

版友好，我試著以rCharts在shiny上繪製iris的散布圖，但是畫不出來，不知道為什麼

code在此http://pastebin.com/EkS2YxcC執行shiny後，會跳出以下的訊息：
Note: the specification for S3 class “AsIs” in package ‘jsonlite’ seems
equivalent to one from package ‘RJSONIO’: not turning on duplicate class
definitions for this class.

懇請解答，感謝


附上我的sessionInfo

other attached packages:
[1] rCharts_0.4.5 shiny_0.12.1

loaded via a namespace (and not attached):
 [1] Rcpp_0.11.6       lattice_0.20-31   digest_0.6.8      mime_0.3
grid_3.2.1
 [6] R6_2.1.0          plyr_1.8.3        xtable_1.7-4      jsonlite_0.9.16
rstudioapi_0.3.1
[11] whisker_0.3-2     RJSONIO_1.3-0     tools_3.2.1       httpuv_1.3.2
yaml_2.1.13
[16] rsconnect_0.4.1.2 htmltools_0.2.6

--","R_Language"
"2062","M.1437830114.A.120","SFMAndroid","問題","隨機森林",2015-07-25 21:15:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

如題

最近在用randomForest這個package做分類預測 y是binary variable

跑出結果後用getTree抓其中一顆決策樹出來

輸出大概就是

left daughter  right daughter  split var  split point  status  prediction

這樣

然後有幾點想請教版友：

1. getTree的split pint判斷 stack overflow有人說

   若split point是2.5 則<=2.5往左走 >2.5往右走

   但是若split var是factor的話呢？

   像是三個levels ""學生"" ""老師"" ""教官""

   若直接這樣getTree的話 split point那會變成亂數 ex. 3

   所以我後來試著給他數字  學生為1 老師為2 教官為3

   split point變成2.5 1.5之類

   但在解釋上說不過去 也無法套用stack overflow裡的人的邏輯

   若split var是年齡區間還可以解釋

   例如20歲以下為1 20~30歲是2 30歲以上是3

   split point為2.5時 我還能理解為<=2.5是30歲以下 >2.5是30歲以上

   當然 這是現階段的理解

   ex.

   set.seed(100)

   data <- data.frame(y=sample(c(""好"", ""不好""), 100, replace=TRUE),

          x1=sample(c(""學生"", ""老師"", ""教官""), 100, replace=TRUE),

          x2=sample(c(""20歲以下"", ""20~30歲"", ""30歲以上""), 100, replace=TRUE)
           )

   library(randomForest)

   rf <- randomForest(y~., data=data, ntree=10, proximity=TRUE)

   tree <- getTree(rf, labelVar=TRUE)

   然後tree的結果就如上面所述

   請問我究竟該如何理解這個結果呢？


   (2015/07/25 09:39)

   補充：根據?getTree得到split point的解釋是

   x1有3個類別 split point若為3 則是指(1,1,0)

   因為1*2^0+1*2^1+0*2^3=3

   然後學生和老師都歸類到左邊

   所以判斷依據是""是否為教官"" 否就丟到左邊這樣嗎？





2. 最後是畫圖的問題

   我在網路上找到一位網友自己寫了一個函式叫to.dendrogram

   程式附在下面

   但是畫出來的決策樹只有split point的名稱 ex.學生 教師

   可是我希望把split point也畫上去 ex. <=2.5, <=1.5等

   目前知道的繪圖有幾個package:rpart, tree之類

   但那都要用rpart或ctree來跑""一顆""決策樹

   然後再用package內的繪圖函式畫圖

   但是跟隨機森林的那10顆(ntree=10)決策數是不一樣的吧！

   不要求很精美的圖 主要是想修改網友的to.dendrogram的code

   弄成有split point的結果

   但是attr(rval, ""edgetext"")那邊一直搞不定@@

   或是這裡有大神能提供更好的解法

   感激不盡！！




總結一下問題

1. randomForest中getTree的split var為factor時 split point該如何判斷？

2. to.dendrogram的圖中 如何修改code才能把split point放上去？

這些問題困擾小弟好久了~""~

再次感謝


[程式範例]:http://pastie.org/10311492[系統環境]：

R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] tree_1.0-36         data.table_1.9.4    randomForest_4.6-10

loaded via a namespace (and not attached):
[1] magrittr_1.5   plyr_1.8.3     tools_3.2.1    reshape2_1.4.1 Rcpp_0.11.6
[6] stringi_0.5-5  stringr_1.0.0  chron_2.3-47




[關鍵字]:

randomForest 隨機森林 getTree

--","R_Language"
"2063","M.1437813750.A.05B","celestialgod","心得","資料整理套件介紹-終章 tidyr",2015-07-25 16:42:26,NA,NA,"本章是最後一章，主要介紹

1. data.table:::dcast.data.table

2. data.table:::melt

3. tidyr:::gather

4. tidyr:::spread

5. tidyr:::separate

這一章主要講述注重在資料的呈現方式 - 橫表跟直表的呈現

還有一些表格整合的問題

1. dcast.data.table

dcast提供直表加總的函數

學過統計的話，應該是contingency table (列聯表)

或是熟悉EXCEL，知道樞紐分析表，它其實就是樞紐分析表

Y就是列聯表中的列變數，X就是行變數

製作列聯表也可以說它的應用之一


這個function，需要先`require(reshape2)`

有人可能會問reshape2就有dcast為啥要用dcast.data.table

原因很簡單，因為dcast.data.table快更多！！

速度直接?dcast.data.table下面例子就有，直接來簡介怎麼用


第一個input是data.table，第二個是給一個公式

舉例來說，如果公式是 Y ~ X，Y的元素會展開在列，X就會在行

第三個input是加總函數，你如果有相同類別的X, Y

它會把相同類別的值用這個函數做加總，預設是length

先用一個簡單例子來說明

` R
  set.seed(100)
  DT = expand.grid(LETTERS[1:2], LETTERS[3:4]) %>% data.table %>%
    setnames(c(""col1"",""col2"")) %>% '['(rep(1:nrow(.), 2)) %>%
    '['(,values := rpois(8,2))
  DT
#    col1 col2 values
# 1:    A    C      1
# 2:    B    C      1
# 3:    A    D      2
# 4:    B    D      0
# 5:    A    C      2
# 6:    B    C      2
# 7:    A    D      3
# 8:    B    D      1

  dcast.data.table(DT, col1~col2)
#    col1 C D
# 1:    A 2 2
# 2:    B 2 2

  dcast.data.table(DT, col1~col2, sum)
#    col1 C D
# 1:    A 3 5
# 2:    B 3 1
`

產生資料的函數、operator，我們都講過了，往前找找看

我們專注到第一個dcast，dcast.data.table(DT, col1~col2)

可以看的出來 col1就在列，col2就在行展開，然後計算col1, col2有相同類別的length

第二個dcast就是把有相同的類別，把values做總和

但是，我們怎麼知道它加總的是values

它會告訴你自動找尋data.table，然後選定values做為加總的column

至於改法就是修改value.var這個input，舉例來說

` R
  DT[, values2 := rpois(8, 3)]
  dcast.data.table(DT, col1~col2, sum, value.var = ""values"")
#    col1 C D
# 1:    A 3 5
# 2:    B 3 1

  dcast.data.table(DT, col1~col2, sum, value.var = ""values2"")
#    col1 C D
# 1:    A 5 7
# 2:    B 3 9

  DT[, col3 := rep(LETTERS[5:6],,,4)]
  dcast.data.table(DT, col1+col2~col3, sum, value.var = ""values"")
#    col1 col2 E F
# 1:    A    C 1 2
# 2:    A    D 2 3
# 3:    B    C 1 2
# 4:    B    D 0 1
`

dcast.data.table說明到此


2. melt

dcast做直表加總，melt做橫表轉直表

舉個簡單的例子

我們有數個病人，每個病人有數個觀察值

表格紀錄的樣子是

id  O1  O2
P1  12  18
P2  13  15
..  ..  ..

我們想要轉成直表長這樣：

id  O  V
P1 O1 12
P1 O1 18
P2 O2 13
P2 O2 15
.. .. ..

那麼在R code可以這樣做：

` R
  (DT = data.table(id = paste0(""P"", 1:2), O1 = c(12,13), O2 = c(18,15)))
#    id O1 O2
# 1: P1 12 18
# 2: P2 13 15

  (DT_long = melt(DT, ""id"", variable.name = ""O"", value.name = ""V""))
#    id  O  V
# 1: P1 O1 12
# 2: P2 O1 13
# 3: P1 O2 18
# 4: P2 O2 15
`

melt的第一個input是data.table (註一)

第二個input是id.vars，也就是你要展開的變數名稱

第三個input是measure.vars，你要展開的變數名稱

前面例子未指定的情況下，就是全部的column


前面我還有用到variable.name 跟 value.name

variable.name是指定集合其他columns之後的column name

在前例就是把 O1, O2兩個columns集合之後的變數名稱，我改成了""O""

value.name是你集合其他columns之後那些變數值的column

在前例就是把 O1, O2兩個columns集合之後的變數值，我改成了""V""

註一：此指data.table:::melt，跟reshape2:::melt的差異部分

    請看data.table:::melt的help


我們再看一個複雜一點的例子

` R
  DT = data.table(ID1 = paste0(""ID1_"", 1:20),
    ID2 = sample(paste0(""ID2_"", 1:20)),
    O1 = rnorm(20), O2 = rnorm(20), O3 = rnorm(20))

## 以ID1跟ID2作為展開，其他column (O1 ~ O3)會疊成一個變數
## 還會有一個新類別去label後面的value來自哪一個變數
  melt(DT, c(""ID1"", ""ID2""), c(""O1"", ""O2"", ""O3""),
    variable.name = ""O"", value.name = ""V"")

## 以ID1作為展開，其他column (O1 ~ O3)會疊成一個變數
## 還會有一個新類別去label後面的value來自哪一個變數
  melt(DT, ""ID1"", c(""O1"", ""O2"", ""O3""),
    variable.name = ""O"", value.name = ""V"")

## 以ID1作為展開，其他column (O1 ~ O2)會疊成一個變數
## 還會有一個新類別去label後面的value來自哪一個變數
  melt(DT, ""ID1"", c(""O1"", ""O2""),
    variable.name = ""O"", value.name = ""V"")
`

3. gather

其實就是melt，只是比較好寫

我們把melt的例子改成用gather寫

只是melt一次到位的指令用gather寫之後

要用select跟filter做 (但是我覺得gather比較好寫)

` R
  (DT = data.table(id = paste0(""P"", 1:2), O1 = c(12,13), O2 = c(18,15)))
#    id O1 O2
# 1: P1 12 18
# 2: P2 13 15

  (DT_long = gather(DT, O, V, -id))
#    id  O  V
# 1: P1 O1 12
# 2: P2 O1 13
# 3: P1 O2 18
# 4: P2 O2 15

  DT = data.table(ID1 = paste0(""ID1_"", 1:20),
    ID2 = sample(paste0(""ID2_"", 1:20)),
    O1 = rnorm(20), O2 = rnorm(20), O3 = rnorm(20))
  gather(DT, O, V, -ID1, -ID2)
  gather(DT, O, V, -ID1, -ID2) %>% select(-ID2)
  gather(DT, O, V, -ID1, -ID2) %>% select(-ID2) %>% filter(O!=""O3"")
`

4. spread

提供gather的反向操作

` R
  DT = data.table(id = paste0(""P"", 1:2), O1 = c(12,13), O2 = c(18,15))
  DT_long = gather(DT, O, V, -id)
  DT_long %>% spread(O, V)
#    id O1 O2
# 1: P1 12 18
# 2: P2 13 15
`

5. separate

把特定column做strsplit，並設定成新的變數

一個簡單的例子

` R
  DT = data.table(x = paste0(sample(LETTERS, 5), "","", sample(LETTERS, 5)))
  DT %>% separate(x, paste0(""V"", 1:2))
`

這個函數要注意的是以下的程式是會出現錯誤的

` R
  DT = data.table(x = paste0(sample(LETTERS, 5), sample(LETTERS, 5)))
  DT %>% separate(x, paste0(""V"", 1:2))
`

separate無法分開沒有間隔字元的字串

你要分開這個只能做適當的轉換，像是：

` R
  DT = data.table(x = paste0(sample(LETTERS, 5), sample(LETTERS, 5)))
  DT %<>% mutate(x = gsub(""([A-Z])"", ""\\1, "", x))
  DT %>% separate(x, paste0(""V"", 1:3)) %>% select(-V3)
`

如果有人有更好的方法，麻煩告知我一下，謝謝


資料介紹套件就到這裡結束

有任何問題，歡迎在板上回文詢問，我有看到都會回覆

(麻煩盡量不要用私信，希望可以讓板眾一起看問題該怎麼解決)

有任何補充或是建議也歡迎推文或回文，感謝大家


我並沒有講到plyr的 a*ply, l*ply, d*ply, r*ply系列

其實他們跟apply, lapply, tapply, replicate相對應，只是output型式不同

如果未來有機會寫有關*ply系列函數時，我再好好介紹plyr


[關鍵字]: tidyr


--","R_Language"
"2064","M.1437791987.A.BB4","celestialgod","問題","Re: 如何畫abline於特定的區間上",2015-07-25 10:39:44,NA,NA,"熟知lattice的話，用它的panel function可以讓code變得很簡潔

而且寫起來也不會像是R內建的plot冗長

還提供groups繪圖的功能，不需要迴圈去做各個模型

範例如下：

library(data.table)
library(dplyr)
library(magrittr)
library(lattice)
library(ifultools)

dat = data.table(x = seq(0,2*pi,length=50), y = runif(50))
z = with(dat, linearSegmentation(x,y,n.fit = 10,angle.tolerance=15))
dat %<>% mutate(groups = cut(1:nrow(.), c(0, z, nrow(.)))) %>%
  mutate(groups = paste0(""group "", as.integer(groups)))

panel.partlmline = function(x, y, ..., identifier = ""plmline""){
    if (length(x) > 1)
    {
        coefs = coef(lm(as.numeric(y) ~ as.numeric(x)))
        panel.curve(coefs[1]+coefs[2]*x, min(x), max(x), ...)
    }
}
# 直接從panel.lmline下去做更改，要畫part line請愛用curve

xyplot(y ~ x, dat, type = ""b"", group = groups,
  panel = function(x, y, groups, subscripts, ...){
  panel.xyplot(x, y, groups = groups, subscripts = subscripts, ...)
  panel.abline(v = x[z], lty=2)
  panel.superpose(x, y, groups = groups, subscripts = subscripts, ...,
    panel.groups = ""panel.partlmline"", lwd = 2)
}, auto.key = list(points = FALSE, lines = TRUE, columns = 2))

圖長這樣：http://i.imgur.com/K2qoMPz.png-※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 如題  abline畫出的線都是占整個版面 如下圖: ppt.cc/Nivoy: 我要如何只畫特定的區間? 如下圖: ppt.cc/9HpS6: 目前的程式碼如下: #產生資料: x=runif(50): y=runif(50): #得知區間: library(ifultools): x <- seq(0,2*pi,length=50): y <- as.numeric(y): z <- linearSegmentation(x,y,n.fit = 10,angle.tolerance=15): plot(x,y,type=""o"", col=""blue""): abline(v=x[z], lty=2): #>z  [1]14 36 表示1-13個資料點做一次迴歸 14~35 36~50以此類推: #產生三個區間之資料: data=t(rbind(x,y)): data1=as.data.frame(data[c(1:13),]): data2=as.data.frame(data[c(14:35),]): data3=as.data.frame(data[c(36:50),]): #分別對三個區間做回歸: model1=lm(y~x,data1) #intercept=0.5041,slope=-0.00728: model2=lm(y~x,data2) #intercept=0.41374 ,slope=0.03807: model3=lm(y~x,data3) #intercept=1.6148 ,slope=-0.2295: #畫abline: abline(a=0.5041,b=-0.00728,col=""red"",lwd=2): abline(a=0.41374,b=0.003807,col=""green"",lwd=2): abline(a=1.6148,b=-0.2295,col=""blue"",lwd=2): 有請各位先進教導小弟一下~感謝!--","R_Language"
"2065","M.1437752254.A.987","andrew43","問題","Re: 如何畫abline於特定的區間上",2015-07-24 23:37:32,NA,NA,"按你的例子，幫你改寫一下。

# 建立資料
set.seed(1)
dt <- data.frame(
  x = runif(30),
  y = c(rnorm(10,1,0.2), rnorm(10,2,0.2), rnorm(10,3,0.2))
)

# 建三個迴歸式
lm.1 <- lm(y ~ x, data = dt[ 1:10, ])
lm.2 <- lm(y ~ x, data = dt[11:20, ])
lm.3 <- lm(y ~ x, data = dt[21:30, ])

# 1. 我希望迴歸線的 x 在 [0.2, 0.8]
# 2. 如果迴歸線是直線，predict 二個點即可；
#    如果是曲線，就 predict 很多點讓它看起來像曲線
dt.pd <- data.frame(x = c(0.2, 0.8))
y.pred.1 <- predict(lm.1, dt.pd)
y.pred.2 <- predict(lm.2, dt.pd)
y.pred.3 <- predict(lm.3, dt.pd)

# 畫圖
plot(NULL, xlim = c(0,1), ylim = c(0,4), xlab=""x"", ylab=""y"")

  # 畫點
  points(dt$x[ 1:10], dt$y[ 1:10], pch = 2)
  points(dt$x[11:20], dt$y[11:20], pch = 3)
  points(dt$x[21:30], dt$y[21:30], pch = 4)

  # 畫迴歸線，可以用 segments() 或 lines()
  # 以下我用 lines()
  lines(c(0.2, 0.8), y.pred.1, lty = 2)
  lines(c(0.2, 0.8), y.pred.2, lty = 3)
  lines(c(0.2, 0.8), y.pred.3, lty = 4)

  # 圖示
  legend(
    x = 0, y = 4,
    legend = c(""Gropu 1"", ""Gropu 2"", ""Gropu 3""),
    lty=c(2,3,4), pch=c(2,3,4)
  )※ 引述《sinclairJ (SunnyGymBoy)》之銘言：: 如題  abline畫出的線都是占整個版面 如下圖: ppt.cc/Nivoy: 我要如何只畫特定的區間? 如下圖: ppt.cc/9HpS6: 目前的程式碼如下: #產生資料: x=runif(50): y=runif(50): #得知區間: library(ifultools): x <- seq(0,2*pi,length=50): y <- as.numeric(y): z <- linearSegmentation(x,y,n.fit = 10,angle.tolerance=15): plot(x,y,type=""o"", col=""blue""): abline(v=x[z], lty=2): #>z  [1]14 36 表示1-13個資料點做一次迴歸 14~35 36~50以此類推: #產生三個區間之資料: data=t(rbind(x,y)): data1=as.data.frame(data[c(1:13),]): data2=as.data.frame(data[c(14:35),]): data3=as.data.frame(data[c(36:50),]): #分別對三個區間做回歸: model1=lm(y~x,data1) #intercept=0.5041,slope=-0.00728: model2=lm(y~x,data2) #intercept=0.41374 ,slope=0.03807: model3=lm(y~x,data3) #intercept=1.6148 ,slope=-0.2295: #畫abline: abline(a=0.5041,b=-0.00728,col=""red"",lwd=2): abline(a=0.41374,b=0.003807,col=""green"",lwd=2): abline(a=1.6148,b=-0.2295,col=""blue"",lwd=2): 有請各位先進教導小弟一下~感謝!--","R_Language"
"2066","M.1437750452.A.4B2","sinclairJ","問題","如何畫abline於特定的區間上",2015-07-24 23:07:29,NA,NA,"如題  abline畫出的線都是占整個版面 如下圖
ppt.cc/Nivoy
我要如何只畫特定的區間? 如下圖
ppt.cc/9HpS6

目前的程式碼如下
#產生資料
x=runif(50)
y=runif(50)

#得知區間
library(ifultools)
x <- seq(0,2*pi,length=50)
y <- as.numeric(y)
z <- linearSegmentation(x,y,n.fit = 10,angle.tolerance=15)
plot(x,y,type=""o"", col=""blue"")
abline(v=x[z], lty=2)
#>z  [1]14 36 表示1-13個資料點做一次迴歸 14~35 36~50以此類推

#產生三個區間之資料
data=t(rbind(x,y))
data1=as.data.frame(data[c(1:13),])
data2=as.data.frame(data[c(14:35),])
data3=as.data.frame(data[c(36:50),])

#分別對三個區間做回歸
model1=lm(y~x,data1)#intercept=0.5041,slope=-0.00728
model2=lm(y~x,data2)#intercept=0.41374 ,slope=0.03807
model3=lm(y~x,data3)#intercept=1.6148 ,slope=-0.2295

#畫abline
abline(a=0.5041,b=-0.00728,col=""red"",lwd=2)
abline(a=0.41374,b=0.003807,col=""green"",lwd=2)
abline(a=1.6148,b=-0.2295,col=""blue"",lwd=2)

有請各位先進教導小弟一下~感謝!

--","R_Language"
"2067","M.1437747798.A.112","gbd37","問題","怎麼用迴圈存多個ggplot圖",2015-07-24 22:23:14,NA,NA,"[軟體熟悉度]:
入門

[問題敘述]:
寫了一迴圈想存在指定資料夾，存多個ggplot的圖，想放在PPT上


[程式範例]:http://pastie.org/10309895只是打個範例，前面什麼的都不重要。
重點從第15行開始，範例是共有4群，我想分別畫出4群的圖
但照我這樣跑只會跑出最後一群的圖而已
我該如何修改，該成可以存四個圖形

抑或是有其他建議存多個ggplot圖形的code，什麼建議都好

虛心受教


[關鍵字]:
ggplot for

--","R_Language"
"2068","M.1437700465.A.072","celestialgod","問題","Re: 一維陣列相臨值取平均的實作",2015-07-24 09:14:22,NA,NA,"nxply <- function(x, n, FUN, na.rm = FALSE, ...){
  if (!is.vector(x))
    stop(""The input must be a vector."")
  if (na.rm)
    x = na.omit(x)
  if (length(n) == 1)
    n <- rep(n, 2)
  if (all(n == 0))
    return(sapply(x, function(y) FUN(y, ...)))
  if (sum(n)+1 > length(x))
    stop(""The number of proximity number is more than the length of vector."")
  ns <- sum(n)
  out <- vector('numeric', length(x))
  if (n[2] > 0)
    for (i in 1:n[2])
      out[i] <- FUN(head(x,n[1]+i), ...)
  if (n[1] > 0)
    for (i in 1:n[1])
      out[length(x)-i+1] <- FUN(tail(x,n[2]+i), ...)
  for (i in 1:(length(x)-ns))
    out[n[2]+i] <- FUN(x[i:(ns+i)], ...)
  return(out)
}
nxply(1:5, 0, mean)
nxply(1:5, 1, mean)
nxply(1:5, 1, sum)
nxply(1:5, 2, sum)
nxply(1:5, 2, quantile, p = 0.05)
nxply(1:5, 2, quantile, p = 0.05)
nxply(1:5, 2, min)
nxply(1:5, 2, max)
nxply(1:5, 3, sum)
nxply(1:5, c(0,1), sum)
nxply(1:5, c(1,0), sum)
locVec <- sample(c(TRUE, FALSE), 5, TRUE)
nxply(locVec, c(1,0), any)
nxply(locVec, 1, any)
nxply(LETTERS[1:5], c(0,1), paste0, collapse = """")
nxply(LETTERS[1:5], 1, paste0, collapse = """")


後來發現zoo:::rollapply有一樣的功能※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: [問題類型]: 程式諮詢: [軟體熟悉度]: 使用者: [問題敘述]: 想寫一個 function 自動求出相鄰元素之平均（或其它統計量）: 我想做出一個 funciton，可以做相鄰值的統計量或套用特定的 function。: 目前想到的參數有:   1. x: 來源 numeric vector:   2. n: 取幾個相鄰元素:   3. FUN: 想套用的統計量或 function: 我的第一個困難是，在頭和在尾的元素在取相鄰元素會有例外。: 例如 1:3 的第一個元素是 1，但它沒有上一個元素，: 所以就只能往之後的元素納入。: 如果是用 for loop，裡頭做例外處理，: 我還辦得到，但不知道有沒有更好的寫法。: 我的第二個困難是，我想寫成類似 R 中 *apply 系列的 FUN 的風格，: 但我不甚了解怎麼撰寫這類風格的 function。: 我猜是建出一個 list 再用 lapply 來延伸，不知道好不好？: 舉一個例好了: x <- 1:5: newFun(x, n, FUN) <- function{...}: newFun(x, 0, sum)  #回傳 1,    2,      3,      4,      5: newFun(x, 1, sum)  #回傳 3,    6,      9,     12,      9: #                        =1+2  =1+2+3  =2+3+4  =3+4+5  =4+5: newFun(x, 2, sum)  #回傳 6, 10, 15, 14, 12: newFun(x, 0, function(a){a+1})  #回傳 2,3,4,5,6: 如果有什麼想法，歡迎請提供線索給我即可，不用全刻出來沒關係。--","R_Language"
"2069","M.1437668910.A.2A0","andrew43","問題","一維陣列相臨值取平均的實作",2015-07-24 00:28:26,NA,NA,"[問題類型]: 程式諮詢
[軟體熟悉度]: 使用者
[問題敘述]: 想寫一個 function 自動求出相鄰元素之平均（或其它統計量）

我想做出一個 funciton，可以做相鄰值的統計量或套用特定的 function。
目前想到的參數有
  1. x: 來源 numeric vector
  2. n: 取幾個相鄰元素
  3. FUN: 想套用的統計量或 function

我的第一個困難是，在頭和在尾的元素在取相鄰元素會有例外。
例如 1:3 的第一個元素是 1，但它沒有上一個元素，
所以就只能往之後的元素納入。
如果是用 for loop，裡頭做例外處理，
我還辦得到，但不知道有沒有更好的寫法。

我的第二個困難是，我想寫成類似 R 中 *apply 系列的 FUN 的風格，
但我不甚了解怎麼撰寫這類風格的 function。
我猜是建出一個 list 再用 lapply 來延伸，不知道好不好？

舉一個例好了

x <- 1:5
newFun(x, n, FUN) <- function{...}

newFun(x, 0, sum)  #回傳 1,    2,      3,      4,      5
newFun(x, 1, sum)  #回傳 3,    6,      9,     12,      9
#                        =1+2  =1+2+3  =2+3+4  =3+4+5  =4+5
newFun(x, 2, sum)  #回傳 6, 10, 15, 14, 12

newFun(x, 0, function(a){a+1})  #回傳 2,3,4,5,6

如果有什麼想法，歡迎請提供線索給我即可，不用全刻出來沒關係。

--","R_Language"
"2070","M.1437667328.A.F9F","andrew43","問題","Re: 將文字內容歸類成特定類別",2015-07-24 00:02:05,NA,NA,"qdf <- data.frame(
  que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎"",
          ""有現貨嗎"",""多少錢"",""有故障嗎""),
  id = 1:8,
  group = NA
)

glist <- list()
glist$詢價 <- grep(""(多少)|錢"", qdf$que)
glist$供貨 <- grep(""(現貨)|貨"", qdf$que)
glist$故障 <- grep(""(故障)|(壞掉)"", qdf$que)
print(glist)

qdf$group[glist$詢價] <- ""詢價""
qdf$group[glist$供貨] <- ""供貨""
qdf$group[glist$故障] <- ""故障""
print(qdf)

我不是這方面的專家，只是試著找一個解法給你。
但請你注意一下，如果 glist 的結果會有重覆的列號，
也就是一個 case 可歸於超過一類，
那最後 qdf$group 的處理就不洽當了。

另外，string searching 我是靠 grep()，
但可能有更適合的辦法。※ 引述《ardodo (米蟲)》之銘言：: 謝謝a版主提供的解法，不過我想嘗試的是文字探勘的方式，我可能表達的不夠清楚Orz: 我想要的判斷方式如下：: 1. 看到""多少"" 或 ""錢""就判斷為""詢價"": 2. 看到""現貨"" 或 ""貨""就判斷為""供貨"": 3. 看到""故障""就判斷為""狀況"": 懇請回答，感謝: ※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: : # 你需要的應該就是 merge(): : qdf <- data.frame(: :   que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎"",: :           ""有現貨嗎"",""多少錢"",""有故障嗎""),: :   id = 1:8: : ): : # 建立對照表: : ref <- data.frame(: :   que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),: :   ans = c(""詢價"", ""供貨"", ""詢價"", ""供貨"", ""狀況""): : ): : # 合併: : merge(qdf, ref, by.x = ""que"", by.y = ""que""): : # 因為合併的對應欄位在 ref 和 qdf 都叫 ""que"": : # 所以可以簡化成: : merge(qdf, ref, by = ""que"")--","R_Language"
"2071","M.1437665909.A.D99","ardodo","問題","Re: 將文字內容歸類成特定類別",2015-07-23 23:38:27,NA,NA,"謝謝a版主提供的解法，不過我想嘗試的是文字探勘的方式，我可能表達的不夠清楚Orz

我想要的判斷方式如下：

1. 看到""多少"" 或 ""錢""就判斷為""詢價""

2. 看到""現貨"" 或 ""貨""就判斷為""供貨""

3. 看到""故障""就判斷為""狀況""

懇請回答，感謝※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: # 你需要的應該就是 merge(): qdf <- data.frame(:   que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎"",:           ""有現貨嗎"",""多少錢"",""有故障嗎""),:   id = 1:8: ): # 建立對照表: ref <- data.frame(:   que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),:   ans = c(""詢價"", ""供貨"", ""詢價"", ""供貨"", ""狀況""): ): # 合併: merge(qdf, ref, by.x = ""que"", by.y = ""que""): # 因為合併的對應欄位在 ref 和 qdf 都叫 ""que"": # 所以可以簡化成: merge(qdf, ref, by = ""que""): : 各位版友好，最近開始接觸文字探勘，對於文字探勘完全沒概念，在此請教一下：: : 下列是我的資料: : qdf=data.frame(: :    que=c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),: :    qtype=c("""","""","""","""",""""): : ): : 我想要根據我的問題，將問題判斷成三種狀況：""詢價""、""供貨""、""狀況""，: : 預期結果如下：: : que         qtype: : 賣多少       詢價: : 有現貨嗎     供貨: : 多少錢       詢價: : 有貨嗎       供貨: : 有故障嗎     狀況: : 請問我該怎麼做呢？--","R_Language"
"2072","M.1437663047.A.EB2","andrew43","問題","Re: 將文字內容歸類成特定類別",2015-07-23 22:50:44,NA,NA,"# 你需要的應該就是 merge()

qdf <- data.frame(
  que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎"",
          ""有現貨嗎"",""多少錢"",""有故障嗎""),
  id = 1:8
)

# 建立對照表
ref <- data.frame(
  que = c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),
  ans = c(""詢價"", ""供貨"", ""詢價"", ""供貨"", ""狀況"")
)

# 合併
merge(qdf, ref, by.x = ""que"", by.y = ""que"")

# 因為合併的對應欄位在 ref 和 qdf 都叫 ""que""
# 所以可以簡化成
merge(qdf, ref, by = ""que"")※ 引述《ardodo (米蟲)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品):: [問題描述]：: 各位版友好，最近開始接觸文字探勘，對於文字探勘完全沒概念，在此請教一下：: 下列是我的資料: qdf=data.frame(:    que=c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),:    qtype=c("""","""","""","""",""""): ): 我想要根據我的問題，將問題判斷成三種狀況：""詢價""、""供貨""、""狀況""，: 預期結果如下：: >qdf: que         qtype: 賣多少       詢價: 有現貨嗎     供貨: 多少錢       詢價: 有貨嗎       供貨: 有故障嗎     狀況: 請問我該怎麼做呢？--","R_Language"
"2073","M.1437647285.A.8A6","ardodo","問題","將文字內容歸類成特定類別",2015-07-23 18:28:02,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題描述]：

各位版友好，最近開始接觸文字探勘，對於文字探勘完全沒概念，在此請教一下：

下列是我的資料

qdf=data.frame(
   que=c(""賣多少"",""有現貨嗎"",""多少錢"",""有貨嗎"",""有故障嗎""),
   qtype=c("""","""","""","""","""")
)

我想要根據我的問題，將問題判斷成三種狀況：""詢價""、""供貨""、""狀況""，

預期結果如下：

>qdf
que         qtype
賣多少       詢價
有現貨嗎     供貨
多少錢       詢價
有貨嗎       供貨
有故障嗎     狀況

請問我該怎麼做呢？

--","R_Language"
"2074","M.1437620009.A.1B1","celestialgod","問題","Re: text mining 長詞優先",2015-07-23 10:53:26,NA,NA,"看一下 是不是你想要的

long = grep(""\\s"", names(v))
short = setdiff(1:length(v), long)
for (i in long)
{
  words = strsplit(names(v[i]), ""\\s"")[[1]]
  for (j in 1:length(words))
    v[short][names(v[short]) == words[j]] =
       v[short][names(v[short]) == words[j]] - v[i]
}

第二個迴圈可以用match做，並且省略short這個變數，這個你可以自己嘗試

code可以這樣改

long = grep(""\\s"", names(v))
for (i in long)
{
  words = strsplit(names(v[i]), ""\\s"")[[1]]
  loc = na.omit(match(words, names(v)))
  v[loc] = v[loc] - v[i]
}


不用迴圈的作法：

twoWords = do.call(rbind, strsplit(names(v[long]), ""\\s""))
s = tapply(rep(v[long],2), twoWords, sum)
loc = match(names(s), names(v))
v[loc] = v[loc] - s

你可以自己查看 s 跟 v[loc] 總數是有出入的

所以麻煩你確認一下你的雙詞跟單詞次數是否有誤


我後來想到你這個問題是

你雙詞會擷取前後，所以會有兩倍的單詞在雙詞中計入

你可能要自己去考慮這問題的解決方式※ 引述《john5601 (HTC ONE年不變)》之銘言：: 目前在作英文的文字探勘，已經可以分別算出單詞和雙詞的結果: 舉例 :: ""Information management"" 在文章中出現3次: ""Information""在文章中出現5次: ""management""在文章中出現6次: 但因為想要長詞優先，所以""management""和""Information""的次數要分別減3次: http://imgur.com/jAjrZxK: 以上為跑出的結果 不知道該如何達成這樣的作法: 懇請前輩大大指導: [程式範例]:: http://pastebin.com/27rXYuQp 程式碼--","R_Language"
"2075","M.1437617572.A.DC3","jklkj","問題","R讀mongodb",2015-07-23 10:12:49,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想問一下，目前我的資料庫是用MONGO的，然後我跑library(rmongodb)底下就出現WARNING!There are some quite big changes in this version of rmongodb.mongo.bson.to.list, mongo.bson.from.list (which are workhorses of many otherrmongofb high-level functions) are rewritten.Please,TEST IT BEFORE PRODUCTION USAGE.Also there are some other important changes, please see NEWS file and releasenotes athttps://github.com/mongosoup/rmongodb/releases/然後我上去上面的網站有gz檔跟source code，我有需要做任何動作嗎[環境敘述]:我是用R-studio跑的[關鍵字]:選擇性，也許未來有用--","R_Language"
"2076","M.1437575926.A.93C","Wush978","心得","Re: 資料整理套件介紹-第二章 dplyr(上)",2015-07-22 22:38:44,NA,NA,"dplyr 這個套件除了可以對R 的data.frame做處理之外，

也可以對SQL-like Data Source做資料ETL。

所以我是非常推薦版友把時間投資在這類套件之上。

這裡分享我一個實務經驗與玩具專案：https://github.com/wush978/dplyrSparkSQL我利用這個套件串接Apache Spark這個高效能資料處理平台，

只要利用和dplyr完全一樣的語法，

可以輕鬆在一分鐘內處理億筆資料的整理。

我認為這類的介面會越來越多，因為不算難擴充（我自己花一個週末就寫了一個）

所以花時間投資dplyr ，未來的潛力是滿高的。

--","R_Language"
"2077","M.1437573894.A.A50","john5601","問題","text mining 長詞優先",2015-07-22 22:04:44,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前在作英文的文字探勘，已經可以分別算出單詞和雙詞的結果

舉例 :
""Information management"" 在文章中出現3次
""Information""在文章中出現5次
""management""在文章中出現6次

但因為想要長詞優先，所以""management""和""Information""的次數要分別減3次http://imgur.com/jAjrZxK以上為跑出的結果 不知道該如何達成這樣的作法

懇請前輩大大指導

[程式範例]:http://pastebin.com/27rXYuQp程式碼

[環境敘述]:
R version 3.1.2 (2014-10-31)
Platform: x86_64-apple-darwin13.4.0 (64-bit)
[關鍵字]:

text mining
長詞優先

--
sent from my htc one年不變

--","R_Language"
"2078","M.1437573669.A.FB6","celestialgod","心得","資料整理套件介紹-第三章 dplyr(下)",2015-07-22 22:01:05,NA,NA,"這章將要繼續上章未完的dplyr

以下是這章主要內容：

A. 取唯一列：distinct, data.table:::unique

B. 列行運算：rowwise, plyr:::colwise

C. 值映射(對應修改)：plyr:::mapvalues, plyr:::revalue

D. 其他函數：summarise_each, mutate_each

E. 特殊函數：plyr:::here

F. function with underscore suffix


1. 取唯一列

我在第一章 data.table提過 unique

distinct是一樣的方法

就從data.table:::unique的例子開始

` R
  DT = data.table(A = rbinom(5, 1, 0.5), B = rbinom(5, 1, 0.5))
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0
# 4: 0 1
# 5: 0 0

  unique(DT)
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0

  distinct(DT)
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0

  unique(DT, by = ""A"")
#    A B
# 1: 0 0
# 2: 1 0

  distinct(DT, A)
#    A B
# 1: 0 0
# 2: 1 0
`

但是如mutate, filter等函數

distinct也可以給由變數組成的其他條件來做取唯一列的動作

給個簡單例子：

` R
  distinct(DT, A*B)
#    A B  A * B
# 1: 0 0      0
`

2. 列行運算

mutate提供了列運算的函數 rowwise

雖然沒有apply好寫，不過效率確實好上不少

至少在chain上可以比較輕易地套用了

要介紹rowwise，還需要介紹do這個函數

do提供一些廣泛的運算方式

像是你可以根據不同變數設立模型如範例所示

` R
  set.seed(100)
  DF = data.frame(A = sample(1:5, 50, TRUE),
    y = rnorm(50), x = rnorm(50))
  models = DF %>% group_by(A) %>% do(model = lm(y ~ x, data = .))
  models %>% summarise(mse = mean(model$residuals**2))
#          mse
# 1 0.07560431
# 2 0.03617592
# 3 0.71000090
# 4 0.35385491
# 5 1.39799410

  DT = data.table(A = sample(1:5, 50, TRUE),
    y = rnorm(50), x = rnorm(50))
  models = group_by(DT, A)  %>% do(model = lm(y ~ x, data = .))
  models %>% rowwise %>% summarise(mse = mean(model$residuals**2))
#         mse
# 1 0.8953635
# 2 0.3954457
# 3 0.1469698
# 4 0.6303710
# 5 0.2966472
`

data.table出來的結果不會自動group_by row

要自己手動加入rowwise，這點需要注意

do應該有更多應用，需要各位好好開發。


再來，給一個rowwise的應用：

` R
  set.seed(100)
  (DT = data.table(A = rnorm(5), B = rnorm(5), C = rnorm(5)))
#              A          B           C
# 1: -0.50219235  0.3186301  0.08988614
# 2:  0.13153117 -0.5817907  0.09627446
# 3: -0.07891709  0.7145327 -0.20163395
# 4:  0.88678481 -0.8252594  0.73984050
# 5:  0.11697127 -0.3598621  0.12337950

  DT %>% rowwise %>%
    do(k = c(.$A, .$B, .$C)[between(c(.$A, .$B, .$C), 0, 1)]) %>%
    summarise(size = length(k), sums = sum(k))
#   size      sums
# 1    2 0.4085162
# 2    2 0.2278056
# 3    1 0.7145327
# 4    2 1.6266253
# 5    2 0.2403508
`

colwise提供每一行的做一個動作的方法

其實等同於你用sapply做

只是它還可以讓你選擇你要做的column去做

簡單例子如下：

` R
  set.seed(100)
  (DT = data.table(A = rnorm(5), B = rnorm(5), C = rnorm(5)))
#              A          B           C
# 1: -0.50219235  0.3186301  0.08988614
# 2:  0.13153117 -0.5817907  0.09627446
# 3: -0.07891709  0.7145327 -0.20163395
# 4:  0.88678481 -0.8252594  0.73984050
# 5:  0.11697127 -0.3598621  0.12337950

  colwise(function(x) c(mean(x), sd(x)))(DT)
#           A         B          C
# 1 0.1600685 0.1890685 -0.6537084
# 2 0.8140039 0.7824803  0.5610936

  colwise(function(x) c(mean(x), sd(x)), .cols = .(A, B))(DT)
#           A         B
# 1 0.1600685 0.1890685
# 2 0.8140039 0.7824803

  f = function(x) quantile(x, c(0.05, 0.95))
  colwise(f)(DT)
#            A          B          C
# 1 -0.4175373 -0.7765657 -0.1433299
# 2  0.7357341  0.6353522  0.6165483
`

3. 值映射(對應修改)

這一節要介紹兩個很好用的函數 plyr:::mapvalues, plyr:::revalue

這兩個函數再處理資料時一定很常用到

我們再整理資料時，有時候會遇到奇異值

我們要把它改成我們想要的值時

大部分人應該都會遇到這個問題

或是有時候我們需要組別整併時也會遇到

給一個簡單的example

` R
  DT = data.table(col1 = sample(c(""A"", ""B"", ""N""), 30, TRUE),
    col2 = sample(c(""A1"", ""B3"", ""C4"", ""U9"", ""Z5""), 30, TRUE),
    col3 = sample(-2:2, 30, TRUE))
  DT2 = copy(DT)


  ## example 1 - 當初keyin資料出問題，col1出現了""N""這個值，我們要通通改成NA
  ## 此處提供數種方法做
  set(DT, which(DT$col1 == ""N""), ""col1"", NA)
  DT2 %>% mutate(col1 = ifelse(col1 == ""N"", NA, col1)) # transform同理
  DT2 %>% mutate(col1 = revalue(col1, c(N = NA)))
  DT2 %>% mutate(col1 = mapvalues(col1, ""N"", NA))

  ## example 2 - 我們想要把col2做調整 A1 改成 B3， U9改成Z5
  ## 這裡就直接提供用revalue以及mapvalues的方法
  DT2 %>% mutate(col2 = revalue(col2, c(A1 = ""B3"", U9 = ""Z5"")))
  DT2 %>% mutate(col2 = mapvalues(col2, c(""A1"", ""U9""), c(""B3"", ""Z5"")))

  ## example 3 - 當初keyin時不小心搞錯col3的-2跟2的正負號，我們要把-2跟2做互換
  DT2 %>% mutate(col3 = mapvalues(col3, c(-2, 2), c(2, -2)))
`

最後提示幾個重點，

revalue可以用在factor跟character上面，不能用在數值上

mapvalues可以用在integer, double跟character上面，factor要先轉chr

4. 其他函數

這兩個函數 summarise_each, mutate_each，我自己也很少用

我提供一些例子做操作，先用簡單的例子

` R
  DT = data.table(X = rnorm(100), Y = rnorm(100))
  DT %>% summarise_each(funs(c(median(.), mean(.))))
#              X          Y
# 1: -0.02923809 0.08238550
# 2: -0.09154615 0.05153845
  DT = data.table(X = c(3,2), Y = c(1, 4))
  DT %>% mutate_each(funs(half = . / 2))
#      X   Y
# 1: 1.5 0.5
# 2: 1.0 2.0
`
這例子只是很簡單的介紹他們的功能

可能需要時間來累積看看是否有什麼好方法去用這兩個函數


5. 特殊函數

介紹一個我覺得很有趣的函數 here

here可以幫助你再使用sapply系列時

可以使用mutate等

提一個簡單的例子

` R
  DTs = resplicate(5, data.table(A = rnorm(5)), simplify = FALSE)
  DTs = lapply(DTs, here(mutate), Asq = A**2)
`

6. function with underscore suffix

本章最後一個重點

怎麼使用像是filter_, select_, mutate_, ...這些以_結尾的function

這些以_結尾的function提供使用者使用string作為input

中間執行的過程透過 lazyeval 來執行

(其實dplyr大部分函數都透過這個套件)

來看幾個簡單的例子

` R
  DT = data.table(A = rnorm(5), B = rnorm(5))
  DT %>% select_(""A"")
  DT %>% select(A)
  DT %>% mutate(C = A*B)
  (DT2 = DT %>% mutate_(""A*B"") %>% setnames(""A*B"", ""C""))
`

這幾個例子應該可以很簡單的解釋有_的函數要怎麼使用

最後給個.dots的用法，這個代表說你可以製作適當的string放入

` R
  DT = data.table(x = rnorm(100), y = rnorm(100))
  (DT %<>% mutate_(.dots = c(""x^2"", ""y^2"")) %>%
    setnames(c(""x^2"", ""y^2""), c(""xsq"", ""ysq"")))
  DT %>% select_(.dots = c(""y"", ""xsq""))
`

再給一個簡單的例子

` R
  DT = data.table(x1 = rnorm(100), x2 = rnorm(100))
  cmds = paste0(""x"", 1:2, ""^2"")
  newnames = c(""xsq"", ""ysq"")
  DT %<>% mutate_(.dots = cmds) %>% setnames(cmds, newnames))
`

下一章應該會是最後一章了

主要內容是data.table中的 dcast跟melt

還有tidyr的 separate, spread, gather

[關鍵字]: dplyr



--","R_Language"
"2079","M.1437545676.A.A4B","celestialgod","心得","資料整理套件介紹-第二章 dplyr(上)",2015-07-22 14:14:32,NA,NA,"這章重點放在dplyr

plyr與dplyr有不少函數是重疊的

不過都會以dplyr為主

plyr跟dplyr有一些名字不同，但功能相似的函數

我會一併介紹

先列一下這章要介紹的函數 (沒標註的就是來自dplyr)

A. 基本整理的函數：arragnge, filter, mutate, select, group_by, summarise, n

B. 增併rownames為變數：add_rownames, plyr:::name_rows

C. list to data.frame：as_data_frame

D. by var 合併函數：join, plyr:::join, data.table:::merge, base:::merge

E. col/row 合併函數：bind_rows, data.table:::rbindlist, bind_cols

F. 取唯一列：distinct, data.table:::unique

G. 列行運算：rowwise, plyr:::colwise

H. 值映射(對應修改)：plyr:::mapvalues, plyr:::revalue

I. 其他函數：summarise_each, mutate_each

J. 特殊函數：plyr:::here


1. 基本整理函數

arrange: 根據你選定的變數做排列 (可以是多個變數)

filter: 根據你設定的條件做row 篩選(or selection)

mutate: 根據你給定的值賦予新變數，或是變更舊變數

select: 根據給定的變數名稱做選擇，也可以做刪除變數

group_by: 根據給定變數做group，以銜接summarise

summarise: 資料整併

n: 計算資料個數


用一個簡單例子來展示用法：

` R
  set.seed(100)
  (dt = data.table(V1 = rpois(5, 3),
     V2 = sample(c(""g1"", ""g2""), 5, 1), V3 = rnorm(5)))
#    V1 V2         V3
# 1:  2 g1  0.3186301
# 2:  2 g2 -0.5817907
# 3:  3 g1  0.7145327
# 4:  1 g2 -0.8252594
# 5:  3 g1 -0.3598621

  dt %>% arrange(V1, V2, V3)
#    V1 V2         V3
# 1:  1 g2 -0.8252594
# 2:  2 g1  0.3186301
# 3:  2 g2 -0.5817907
# 4:  3 g1 -0.3598621
# 5:  3 g1  0.7145327

  dt %>% filter(V1 <= 2, V3 < 0)
#    V1 V2         V3
# 1:  2 g2 -0.5817907
# 2:  1 g2 -0.8252594

  dt %>% mutate(V5 = V1 * V3, V6 = substr(V2, 2, 2),
           V7 = round(V3), V8 = 1L, V3 = V3 **2)
#    V1 V2        V3         V5 V6 V7 V8
# 1:  2 g1 0.1015251  0.6372602  1  0  1
# 2:  2 g2 0.3384804 -1.1635814  2 -1  1
# 3:  3 g1 0.5105570  2.1435981  1  1  1
# 4:  1 g2 0.6810531 -0.8252594  2 -1  1
# 5:  3 g1 0.1295008 -1.0795864  1  0  1

  dt %>% select(V1, V2)
#    V1 V2
# 1:  2 g1
# 2:  2 g2
# 3:  3 g1
# 4:  1 g2
# 5:  3 g1

  dt %>% group_by(V2) %>% summarise(size_g = n(), m_V3 = mean(V3),
    s_V1 = sum(V1))
#   V2 size_g       m_V3 s_V1
# 1 g1      3  0.2244336    8
# 2 g2      2 -0.7035251    3
`

上面的例子是一些簡單運用的範例

先介紹一下tbl_df, tbl_dt的class

tbl_df跟tbl_dt只會列出一部分的資料

做操作時比較不會因為太多資料的輸出造成當機

要更改列出的資料量，可以這樣做

` R
  set.seed(100)
  (dt = data.table(V1 = rpois(50, 3), V2 = sample(c(""g1"", ""g2""), 50, 1),
     V3 = rnorm(50))) %>% tbl_dt(FALSE)
#    V1 V2         V3
# 1   2 g1 -0.4470622
# 2   2 g1 -1.7385979
# 3   3 g1  0.1788648
# 4   1 g1  1.8974657
# 5   3 g2 -2.2719255
# 6   3 g1  0.9804641
# 7   4 g1 -1.3988256
# 8   2 g1  1.8248724
# 9   3 g2  1.3812987
# 10  1 g1 -0.8388519
# .. .. ..        ...

  print(dt, n = 5)
#    V1 V2         V3
# 1   2 g1 -0.4470622
# 2   2 g1 -1.7385979
# 3   3 g1  0.1788648
# 4   1 g1  1.8974657
# 5   3 g2 -2.2719255
# .. .. ..        ...
`

再介紹一些這些函數的其他用法

` R
  dt = data.table(V1 = rpois(20, 3), V2 = sample(c(""g1"", ""g2""), 20, 1),
    V3 = rnorm(20), V4 = rgamma(20, 5, 3))
# 你可以直接用一個你想要使用的變數放入，不須先立變數
  dt %>% arrange(V1*V3, V3)
  dt %>% filter(abs(V1*V3) > 1)
# desc是dplyr的函數提供反向排列
  dt %>% arrange(V1)
  dt %>% arrange(desc(V1))
# 兩種做變數刪除的方式 (我偏好第二種)
  dt %>% mutate(V4 = NULL)
  dt %>% select(-V4)
# select 還有提供各種特別函數於select中使用
  dt %>% select(starts_with(""V""))
  dt %>% select(ends_with(""1""))
  dt %>% select(contains(""2""))
  dt %>% select(matches(""\\w\\d""))
  dt %>% select(num_range(""V"", 1:2))
`

2. 增併rownames為變數

如標題所示，直接看範例

` R
  dat = data.frame(A = 1:5, row.names = paste0(""City_"", LETTERS[1:5]))
  dat %>% name_rows
  dat %>% add_rownames
  dat %>% add_rownames(""city"") # add_rownames可以改成你要的名稱
`
3. list to data.frame

as_data_frame提供比as.data.frame有效率的轉換方法

我之前也沒用過，不過看到manual寫到這個函數，就忍不住想分享一下

不過這個函數強迫list的element要有name，使用上要注意一下

` R
  library(microbenchmark)
  dat_list = lapply(rep(1e6, 200), rnorm)
  names(dat_list) <- paste0(""A"", 1:200)
  microbenchmark(
    as_data_frame(dat_list),
    as.data.frame(dat_list)
  )
#Unit: milliseconds
#                    expr      min        lq      mean    median        uq
# as_data_frame(dat_list)  1.22642  1.281156  1.418296  1.311944  1.339027
# as.data.frame(dat_list) 19.83196 20.199147 21.397833 20.350524 21.143335
#                    expr       max neval
# as_data_frame(dat_list)  6.957693   100
# as.data.frame(dat_list) 33.307182   100
`
看起來是沒差很多啦(汗顏，可能資料不夠大

4. by var 合併函數

先介紹base的merge，這個函數是用來合併兩個data.frame

除了input的兩個data.frame，還有其他五個input (其他input之後再提)

a. by    - 合併根據的變數
b. by.x  - 合併根據的變數 於第一個data.frame的名稱
c. by.y  - 合併根據的變數 於第二個data.frame的名稱
d. all.x - 是否保留來自第一個data.frame的values
e. all.y - 是否保留來自第一個data.frame的values

註：還有一個input是 all 可以一次控制all.x跟all.y

我用簡單的範例去介紹這幾個選項

` R
## 產生資料
  set.seed(75)
  (x = data.frame(cat1 = sample(c(""A"", ""B"", NA), 5, 1),
    cat2 = sample(c(1, 2, NA), 5, 1), v = rpois(5, 3),
    stringsAsFactors = FALSE))
#   cat1 cat2 v
# 1    A    1 4
# 2    A    2 3
# 3 <NA>   NA 4
# 4    B   NA 4
# 5    A    1 4
  (y = data.frame(cat1 = sample(c(""A"", ""B"", NA), 5, 1),
    cat2 = sample(c(1, 2, NA), 5, 1), v = rpois(5, 3),
    stringsAsFactors = FALSE))
#   cat1 cat2 v
# 1    A    2 1
# 2    A    1 8
# 3 <NA>   NA 2
# 4    B    2 5
# 5 <NA>    1 3

## 兩個data.frame的資料都不保留 (預設值)
  merge(x, y, by = c(""cat1"",""cat2""), all.x = FALSE, all.y = FALSE)
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    1   4   8
# 3    A    2   3   1
# 4 <NA>   NA   4   2

## 保留第一個data.frame的全部資料
  merge(x, y, by = c(""cat1"",""cat2""), all.x = TRUE, all.y = FALSE)
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    1   4   8
# 3    A    2   3   1
# 4    B   NA   4  NA
# 5 <NA>   NA   4   2

## 保留第二個data.frame的全部資料
  merge(x, y, by = c(""cat1"",""cat2""), all.x = FALSE, all.y = TRUE)
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    1   4   8
# 3    A    2   3   1
# 4    B    2  NA   5
# 5 <NA>    1  NA   3
# 6 <NA>   NA   4   2

## 保留兩個data.frame全部的資料
  merge(x, y, by = c(""cat1"",""cat2""), all.x = TRUE, all.y = TRUE)
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    1   4   8
# 3    A    2   3   1
# 4    B    2  NA   5
# 5    B   NA   4  NA
# 6 <NA>    1  NA   3
# 7 <NA>   NA   4   2
`

all.x跟all.y這四種組合分別對應到dplyr的四種join

a. inner_join  - merge(..., all.x = FALSE, all.y = FALSE)
b. left_join   - merge(..., all.x = TRUE , all.y = FALSE)
c. right_join  - merge(..., all.x = FASLE, all.y = TRUE)
d. full_join   - merge(..., all.x = TRUE , all.y = TRUE)

但是merge跟dplyr的join還是有些微不同

dplyr的join不會去比對by variable都是NA的情況

給一個例子就好

` R
  inner_join(x, y, by = c(""cat1"",""cat2""))
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    2   3   1
# 3 <NA>   NA   4   2
# 4    A    1   4   8
`

PS: If you use dplyr 0.4.1, there is something wrong. You're gonna find the

output do not contain the line: 3 <NA>   NA   4   2. Please update your dplyr

to 0.4.2 or higher version.


至於plyr:::join就沒有這個問題

` R
  join(x, y, by = c(""cat1"",""cat2""), 'inner')
#   cat1 cat2 v v
# 1    A    1 4 8
# 2    A    2 3 1
# 3 <NA>   NA 4 2
# 4    A    1 4 8
`
plyr:::join用法其實大同小異，它是用type去控制join方式

最後是data.table:::merge

` R
  setDT(x)
  setDT(y)
  merge(x, y, by = c(""cat1"",""cat2""))
#    cat1 cat2 v.x v.y
# 1:   NA   NA   4   2
# 2:    A    1   4   8
# 3:    A    1   4   8
# 4:    A    2   3   1
`
其實用法跟merge一模一樣，不贅述


介紹完by, all.x, 跟all.y之後，我們來介紹by.x跟by.y

用一個簡單例子：

` R
  set.seed(75)
  x = data.frame(cat1 = sample(c(""A"", ""B"", NA), 5, 1),
    cat2 = sample(c(1, 2, NA), 5, 1), v = rpois(5, 3),
    stringsAsFactors = FALSE)
  y = data.frame(cat3 = sample(c(""A"", ""B"", NA), 5, 1),
    cat4 = sample(c(1, 2, NA), 5, 1), v = rpois(5, 3),
    stringsAsFactors = FALSE)
  merge(x, y, by.x = c(""cat1"",""cat2""), by.y = c(""cat3"",""cat4""))
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    1   4   8
# 3    A    2   3   1
# 4 <NA>   NA   4   2
`
我想這個例子已經很好說明了by.x跟by.y了

接著是再dplyr怎麼做？

` R
  inner_join(x, y, by = c(""cat1"" = ""cat3"", ""cat2"" = ""cat4""))
#   cat1 cat2 v.x v.y
# 1    A    1   4   8
# 2    A    2   3   1
# 3    A    1   4   8
`

至於plyr:::join跟data.table:::merge就沒有支援這種功能了


dplyr還提供兩種join: semi_join跟anti_join

簡單說明一下，semi_join就是只保留第一個data.frame變數的inner_join

anti_join則semi_join沒有配對的組合

這兩個有興趣再去玩玩看，這裡就不提供例子了


最後是一個實際問題

我如果要merge超過三個的df怎麼辦？

可以參考一下#1LaHm_aH (R_Language)這裡完整介紹一下使用這幾個套件要怎麼解決

` R
  DF_list = replicate(5, data.frame(cat1 = sample(c(""A"", ""B""), 5, 1),
      cat2 = sample(c(1, 2), 5, 1), v = rnorm(5)), simplify = FALSE)
# 下列兩種會變成橫表，每一個data.frame的v都會保留
  Reduce(function(x, y) merge(x, y, by = c(""cat1"",""cat2""), all=TRUE), DF_list)
  Reduce(function(x, y) full_join(x, y, by = c(""cat1"",""cat2"")), DF_list)
# 只保留第一個data.frame的值
  join_all(DF_list, by = c(""cat1"",""cat2""), type = ""full"")
# 直表，保留全部的v，等同於全部做rbind
  join_all(DF_list, by = c(""cat1"",""cat2"", ""v""), type = ""full"")
`

其實這樣每一個方法的結果都會很混亂，非常不建議，除非你知道你目標是什麼


5. col/row 合併函數

bind_rows跟rbindlist其實就是在做 do.call(rbind, .)或是 Reduce(rbind, .)

只是這兩個function更加有效率

如果還不懂do.call(rbind, .)跟Reduce(rbind, .)再做什麼

剛好可以利用這個機會去弄懂他們在幹嘛

` R
  DF_list = replicate(5, data.frame(cat1 = sample(c(""A"", ""B""), 5, 1),
      cat2 = sample(c(1, 2), 5, 1), v = rnorm(5)), simplify = FALSE)
  bind_rows(DF_list)
  rbindlist(DF_list)
`

bind_cols等同於 do.call(cbind, .)

`
  DT_list = lapply(1:5, function(x) data.table(rnorm(5)) %>%
    setnames(paste0(""V"", x)))
  bind_cols(DT_list)
`

還有一半，我們留到下一章再討論。

[關鍵字]: dplyr

--","R_Language"
"2080","M.1437467101.A.E6D","celestialgod","心得","資料整理套件介紹-第一章 data.table",2015-07-21 16:24:57,NA,NA,"data.table包含的東西很多

但是很多東西都可以被plyr, dplyr的function取代

所以data.table很多function，我都不太熟

這裡簡單介紹一下data.table

如果你想要了解更多，請自行去看manual


要了解data.table，我們可以先從package的description來看

  ""Fast aggregation of large data (e.g. 100GB in RAM), fast ordered joins,
fast add/modify/delete of columns by group using no copies at all, list
columns and a fast file reader (fread). Offers a natural and flexible syntax,
for faster development.""

簡單翻譯一下，大資料(例如，記憶體中大小為100GB的資料)的在不創建複本下，根據

類別(group)變數進行快速整合、排列、合併、增加/修改/刪除行資料等動作。...

重點就在不創建複本，因為R修改data.frame時，會先複製一次再修改，

然後傳回複本，因此，會浪費不少記憶體，而且很容易拖累速度，因此，

data.table提供這方面更有效率的操作。

(這方面的速度比較可以參考#1LeXNCKV (R_Language)[分享] 資料數據處理修改)


1. data.table

這個函數基本上data.frame使用差不多，而且data.frame的參數都可以放進

像是很常用到的stringsAsFactors，只是data.table預設是FALSE，

這點跟data.frame不同，使用上需要注意，範例如下：

` R
  t = data.table(a = LETTERS[1:3])
  str(t)
# Classes ‘data.table’ and 'data.frame':  3 obs. of  1 variable:
#  $ a: chr  ""A"" ""B"" ""C""
#  - attr(*, "".internal.selfref"")=<externalptr>
  t2 = data.frame(a = LETTERS[1:3])
  str(t2)
# 'data.frame':   3 obs. of  1 variable:
#  $ a: Factor w/ 3 levels ""A"",""B"",""C"": 1 2 3
`

第二個差異是data.table不包含rownames，

在轉換data.frame到data.table時，要注意這點

下一章會提到把rowname轉成column的函數

附註一條：data.table都包含data.frame的class

          可以用在data.frame的方法都可以在data.table上實現


但是data.table還多了一個引數 ""key""，我對它的解讀是一種索引的概念

而透過索引的動作都會被加速。

key可以是一個變數，也可以是多個變數，這點看個人使用。


再來，就是data.table的'['，這部分跟data.frame不太一樣

所以需要特別說明，但是這部分，我自己也不是很熟悉，我只能大概講過

a. 我們很常在data.frame做取多行的動作，在data.table是不可行的，舉例：

` R
  vars = data.frame(X = rnorm(3), Y = rnorm(3), Z = rnorm(3))
  vars[,1:2]
#            X         Y
# 1 -0.5677575 2.1831285
# 2 -0.7161529 0.3714633
# 3  1.2665120 0.7837508

  vars_dt = data.table(vars)
  vars_dt[,1:2]
# [1] 1 2
`

但是你想這麼做，怎麼辦？ 加上with=FALSE就好了，或是用list包住column name

` R
  vars_dt[,1:2,with=FALSE]
#             X         Y
# 1: -0.5677575 2.1831285
# 2: -0.7161529 0.3714633
# 3:  1.2665120 0.7837508

  vars_dt[j=list(X, Y)]
#             X         Y
# 1: -0.5677575 2.1831285
# 2: -0.7161529 0.3714633
# 3:  1.2665120 0.7837508
`

剩下像是by, .SD, .SDcols等自行?data.table查看吧

data.table的部分就先說明到這，接下來，講一些相關的function

b. setkey: 改變key的值, setnames: 改變column name，但是一樣不製造複本

c. copy: 製造data.table的複本

d. setDF: 在不製作複本下，把data.table的class改為data.frame

舉例：

` R
  DT = data.table(X = rnorm(3), Y = rnorm(3))
  str(DT)
# Classes ‘data.table’ and 'data.frame':  3 obs. of  2 variables:
#  $ X: num  -1.3738 0.167 -0.0578
#  $ Y: num  0.487 1.728 0.646
#  - attr(*, "".internal.selfref"")=<externalptr>

  setDF(DT)
  str(DT)
# 'data.frame':   3 obs. of  2 variables:
#  $ X: num  -1.3738 0.167 -0.0578
#  $ Y: num  0.487 1.728 0.646

  DT = data.table(X = rnorm(3), Y = rnorm(3))
  tracemem(DT)
# [1] ""<0000000006A1BE28>""
  setDF(DT)  #  沒有複製的動作

  DF = data.frame(DT)
  retracemem(DF, retracemem(DT))
# tracemem[<0000000006A1BE28> -> 0x00000000061ec928]:
  ## 記憶體位置就發生改變了，就複製了DT一次
`

這部分可能不太懂，不過沒關係，記住一點，要轉成data.frame用setDF就好

e. setDT: setDF的反向

f. duplicated, unique

duplicated提供一個跟data.table列數相等長度的邏輯值向量，

TRUE代表前面有一樣的列，FALSE代表沒有

unique則是留下沒有重複的列，舉例來說：

` R
  set.seed(100)
  DT = data.table(A = rbinom(5, 1, 0.5), B = rbinom(5, 1, 0.5))
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0
# 4: 0 1
# 5: 0 0

  duplicated(DT)
# [1] FALSE FALSE FALSE  TRUE  TRUE

  unique(DT)
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0

  DT[!duplicated(DT)]
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0
`

不過unique還有更多功能，它可以選擇變數做unique，舉例來說：

` R
  unique(DT, by = ""A"")
#    A B
# 1: 0 0
# 2: 1 0

  unique(DT, by = ""B"")
#    A B
# 1: 0 0
# 2: 0 1
`
順便一提，dplyr的distinct，如果你input的class是data.table

它就是用unique做的

` R
  library(dplyr)
  distinct(DT)
#    A B
# 1: 0 0
# 2: 0 1
# 3: 1 0
`
你如果想看distinct怎麼做，可以在R上面打dplyr:::distinct_.data.table> dplyr:::distinct_.data.tablefunction (.data, ..., .dots)
{
    dist <- distinct_vars(.data, ..., .dots = .dots)
    if (length(dist$vars) == 0) {
        unique(dist$data)
    }
    else {
        unique(dist$data, by = dist$vars)
    }
}

之後提到distinct，我們再來講distinct

其他相關function像是subset, setcolorder, setorder (setorderv)

對這三個function有興趣，再去看manual，不贅述

這三個對應到dplyr的filter, select, arrange，之後我們會再提到這些


g. transform: 改變column的屬性、值等，舉例來說：


` R
  DT = data.table(a = 1:3, b = 2:4, c = LETTERS[1:3])
  DT2 = copy(DT)
  DT[, b := b**2]
  DT2 %<>% transform(b = b**2)
  all.equal(DT, DT2) # TRUE
  DT %<>% transform(c = as.factor(c))
  str(DT)
# Classes ‘data.table’ and 'data.frame':  3 obs. of  3 variables:
#  $ a: int  1 2 3
#  $ b: num  4 9 16
#  $ c: Factor w/ 3 levels ""A"",""B"",""C"": 1 2 3
#   - attr(*, "".internal.selfref"")=<externalptr>
`

h. set: 用來變更特定column，某些列的值，舉個簡單的例子

` R
  DT = data.table(a = 1:3, b = 2:4)
  DT2 = copy(DT)
  DT[, b := 1]
  set(DT2,, ""b"", value = 1)
  all.equal(DT, DT2) # TRUE
`
一般來說都用'['來做，但是你如果需要用到for再來完成，再用set


還有一個function是 J，這裡就不提了，一樣請洽manual

最後，還有一個operator，':='，它是用來擴增data.table的column，

同樣，也不創造複本，這樣可以更快的增加column

那如果刪除怎麼辦？還記得前面學過 DT[, list('X', 'Y')]，就用這個


再來，我們講一些data.table中其他function

2. fread

功能可以用來取代read.table, read.csv

它可以用多種separate去分割columns，然後讀入R

而且讀入速度比read.table, read.csv快很多

但是注意，不規則的檔案會讀入失敗


這裡提幾個參數：

a. sep: column跟column之間的分隔，如果是csv就是','，

   如果是tab separated values就是'\t'

b. na.strings: 視作NA的字串，它可以是一個vector

c. stringsAsFactors：是否要把字串轉成factor，預設是否

d. colClasses：各行的classes，可以自行設定

我愛用fread還有一個原因，第一個input可以直接放我要讀的字串，

但是read.table需要經過其他的方式，有點麻煩(我懶得記，其實沒記過)

舉例來說

` R
text = ""a b
1 2
3 4""
DT = fread(text)
setDF(DT) # 轉成data.frame，前面學過，還記得嗎？
DF = read.table(header = TRUE, text = text)           # text format
DF2 = read.table(textConnection(text), header = TRUE) # file format

all.equal(DT, DF)  # TRUE
all.equal(DT, DF2) # TRUE
`

fread很適合拿來讀大資料，所以有必要把table輸出成text

用文字方式處理時，讀入就變得很方便，可見#1LegOjwB (R_Language)還剩下 dcast.data.table, melt 跟 merge

它們會留到之後跟tidyr一起介紹

下一章重點會放在dplyr


補充：

key，我也不是很熟悉，也很少用，因此，我這裡介紹的很少

如果對key有興趣，可能需要自行研究


[關鍵字]: data.table, reshape2


--","R_Language"
"2081","M.1437452331.A.CD1","celestialgod","心得","資料整理套件介紹 - 序章 magrittr",2015-07-21 12:18:48,NA,NA,"鑒於andrew大大的提議，現下剛好有閒就來寫一系列資料整理套件的文章

版上比我熟這些套件的人也不少，如果不足的部分，再麻煩幫忙補充

目前想要介紹的套件有 (後面列一些我常用的function)

  - magrittr  : pipe operator如 '%>%', '%<>%', '%T>%', '%$%'
  - data.table: class 'data.table', dcast.data.table, melt, fread,
                duplicated, transform, rbindlist, merge
  - reshape2  : dcast, melt (required for data.table)
  - plyr      : name_rows, colwise, mapvalues
  - dplyr     : mutate, summarise, arrange, filter, distinct, group_by, n,
                select, rowwise, tbl_dt, mutate_each, summarise_each
  - tidyr     : gather, separate, spread


這篇的重點放在 magrittr，因為後面我會大量使用pipe operator來寫程式碼

我盡量每一個operator用簡單一點的方式說明，如果不太了解再麻煩告知

程式碼部分，我都會用` R 跟 ` 做引號

1. '%>%'

這個operator用來傳遞數值，避免過多的nest造成閱讀上的困難

像是

a_list = list(1:6, 3:5, 4:7)

lapply(a_list, function(x) setdiff(sort(unique(unlist(a_list))), x))

第二行拆解閱讀是很困難的，但是寫成

a_list %>% unlist %>% unique %>% sort %>% {
   lapply(a_list, setdiff, x = .)
}

閱讀上會容易很多


舉一個簡單的例子，來說明 '%>%'的用法

` R
  a = 1
  f = function(a) a + 1
  f(a)
  a %>% f
  a %>% f()
  a %>% f(.)
`

跑上面的程式可以發現，最後四個output都一樣

其實 %>% 做的就是把 左邊變數 放進 右邊函數裡做執行

也就是說  f(a) 等同於  a %>% f (或是上面其他三種)

另外，可能會覺得 `a %>% f(.)`會很奇怪

在magrittr中， `.`就是用來代表%>%前面的變數

所以 a %>% f(.) 程式會把.的位置換成a，變成 f(a)


`.` 在magrittr的應用中，會佔很大的比例

像是do.call, Reduce第一個input是function，第二個是list

我們通常傳入list，所以此時必須用 . 做位置的控制

再者，c, cbind, rbind會根據位置不同來決定是合併於何處

也是一個很重要的問題，因此，用 `.`做傳入位置的控制是必須的

針對這個，我給一段簡單的程式碼讓你去試試看

` R
  a_list = list(1:5, 3:7, 6:10)
  a_list %>% do.call(rbind, .)
  a_list %>% Reduce(cbind, .)

  1:5 %>% rbind(3:7, .)
  1:5 %>% rbind(., 3:7)

  f = function(x, a, b) a*x^2 + b
  1:5 %>% f(., 2, 5) # 同 1:5 %>% f(2, 5)
  1:5 %>% f(2, ., 5)
  1:5 %>% f(2, 5, .)
`

再者，%>% 也可以傳入一個block (用{}括住的部分)

像是前面提到的

` R
  a_list = list(1:6, 3:5, 4:7)
  a_list %>% unlist %>% unique %>% sort %>% {
    lapply(a_list, setdiff, x = .)
  }
`
先說明怎麼閱讀 %>%的部分

a_list %>% unlist %>% unique %>% sort 就是

a_list把全部元素合併(unlist)，然後取唯一(unique)，接著排列所有元素(sort)

就照著%>%的順序去讀就可以順利解讀

再來就是block的部分

{}括住之後，裡面的只要不是其他%>%後面的 `.`都代表你前面傳入的值

這樣很難懂，舉個例子

` R
1:2 %>% {
  list(
    cbind(9:10, .),
    3:4 %>% cbind(9:10, .)
  )
}
`
output長這樣

[[1]]
        .
[1,]  9 1
[2,] 10 2

[[2]]
        .
[1,]  9 3
[2,] 10 4

可以看到第一個可以很直覺的解讀，9:10是跟傳入的1:2做行合併

而第二個`.`，因為前面有了一個新的 '%>%'

所以這一個`.`就被前面的 3:4取代

所以第二個output變成9:10跟3:4做行合併


2. '%<>%'

如果懂了 %>%， 這個就不難了

先看簡單的例子 (add是magrittr提供用在 %>%上的 `+` (這部分請看最後面的補充))

` R
  a = 1
  a %>% add(1)  # 同 a %>% '+'(1) or a %>% '+'(., 1)
  a # 1
  a %<>% add(1)
  a  # 2
`

這個例子可以看的出來  %<>% 除了傳入變數之外，也會改變傳入變數的值

也就是可以把 a %<>% add(1) 看成  a = a + 1

你如果有一串要做最後賦值給你傳入的變數

只需要在第一個傳導變數的operator做改變即可，舉例來說：

` R
  dat = data.frame(a = 1:3, b = 8:10)
  dat = dat %>% rbind(dat)
  dat2 = data.frame(a = 1:3, b = 8:10)
  dat2 %<>% rbind(dat2)
  all.eqaul(dat, dat2) # TRUE
`

3. '%T>%'

%T>% 只傳遞變數，不回傳值，通常用來傳遞到不回傳值的function上

像是plot, library, install.packages, plyr的 *_ply等

這個operator可以幫你把前面做好的值賦予一個變數

並且同時做後面function的動作，舉例來說：

` R
  dat = data.frame(a = rep(1:3,2), b = rnorm(6))
  dat2 = dat %>% {tapply(.$b, .$a, sum)} %>%
    { data.frame(a=names(.) %>% as.integer, b = .)
    } %T>% plot(.$a, .$b)
`

這裡dat2就是一個新的data.frame，同時，我們也把a, b的scatter plot畫出來

這部分可以用dplyr的group_by以及summarise完成

還沒提到dplyr，所以我們先用替代方法做


這裡順便把第四個operator '%$%'一起說明

dat %>% {tapply(.$b, .$a, sum)} 會不會覺得很冗長，也很容易忘記要放'.$'

但是，'%$%'提供了直接把前面變數的元素 直接以名字做操作

再也不需要 .$name這麼麻煩，直接用 name做你想要的操作就好

因此，那行就可以簡單寫成 dat %$% tapply(b, a, sum)

是不是就變得簡單的很多？


4. '%$%'

前面提到了，這裡就給一個例子就好

` R
  a = 3
  b = -2
  x = rnorm(100)
  y = a + b * x + rnorm(100)
  fit = lm(y ~ x)
  sigma_hat = fit %$% {crossprod(residuals) / df.residual}
`

下一章應該會介紹data.table跟reshape2，後會有期。


補充：

magrittr提供很多其他function的別名

像是 '+', '*', '[', '[[', '<- rownames()'等等

有興趣請去magrittr的manual查看extract的部分

這個可以讓你寫pipe chain的時候更加順手

像是

vals = 1:3 %>% data.frame(a = ., b = .^2) %>% set_rownames(LETTERS[1:3]) %>%
  lm(b ~ a, data = .) %>% predict

不然你可能會這樣寫

dat = 1:3 %>% data.frame(a = ., b = .^2)

rownames(dat) = LETTERS[1:3]

vals = dat %>% lm(b ~ a, data = .) %>% predict

你可能只是要vals這個變數，你卻還要多創一個dat這個暫存變數，而中斷chain

[關鍵字]: magrittr


--","R_Language"
"2082","M.1437383583.A.BC0","celestialgod","問題shiny","Re: 如何設計有階層的input？",2015-07-20 17:13:00,NA,NA,"會錯誤是因為你用unique，沒有取最小跟最大出來

請直接用range就好

    amount = observe({
      input$brand
      if (input$brand==""all""){
        val = range(df$amount)
      } else{
        val = range(df$amount[df$brand==input$brand])
      }
      updateSliderInput(session, ""amount"", min = val[1], max = val[2])
    })※ 引述《ardodo (米蟲)》之銘言：: ※ 引述《celestialgod (攸藍)》之銘言：: : 一樣的方法去改，再server裡面加這個就好: :     amount = observe({: :       input$brand: :       if (input$brand==""all""){: :         val = c(1, 20): :       } else if (input$brand==""s""){: :         val = c(4, 8): :       } else if (input$brand==""w""){: :         val = c(3, 10): :       }: :       updateSliderInput(session, ""amount"", min = val[1], max = val[2]): :     }): 照著版大的指令修改後，目前我sliderinput的範圍在我選擇brand==w or brand==s: 的情況下是正常的，但是我如果選擇brand==all，範圍變成10-20，這是錯誤的: 不知道我應該從哪邊修改呢？: 以下是我的code: http://pastebin.com/MqjwBJBF--","R_Language"
"2083","M.1437382707.A.E98","ardodo","問題shiny","Re: 如何設計有階層的input？",2015-07-20 16:58:24,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《ardodo (米蟲)》之銘言：: : 感謝版主幫我解決先前的問題，另外請教兩個延伸問題：: : 1. 同樣的一筆資料，我想要在selectInput篩選brand後，讓sliderInput的amount範圍: : 能跟著selectInput有所變動(例我選擇brand==s後，amount的滑動範圍是4-8): 一樣的方法去改，再server裡面加這個就好:     amount = observe({:       input$brand:       if (input$brand==""all""){:         val = c(1, 20):       } else if (input$brand==""s""){:         val = c(4, 8):       } else if (input$brand==""w""){:         val = c(3, 10):       }:       updateSliderInput(session, ""amount"", min = val[1], max = val[2]):     })照著版大的指令修改後，目前我sliderinput的範圍在我選擇brand==w or brand==s

的情況下是正常的，但是我如果選擇brand==all，範圍變成10-20，這是錯誤的

不知道我應該從哪邊修改呢？


以下是我的codehttp://pastebin.com/MqjwBJBF--","R_Language"
"2084","M.1437379943.A.3BC","celestialgod","問題shiny","Re: 如何設計有階層的input？",2015-07-20 16:12:20,NA,NA,"※ 引述《ardodo (米蟲)》之銘言：: ※ 引述《celestialgod (攸藍)》之銘言：: : 原諒我把它們合併再一起: : R code: http://pastebin.com/PkQEtKVA: : 重點在於 observe的運用: : 隨著input$brand的改變，去改變input$model的值: 感謝版主幫我解決先前的問題，另外請教兩個延伸問題：: 1. 同樣的一筆資料，我想要在selectInput篩選brand後，讓sliderInput的amount範圍: 能跟著selectInput有所變動(例我選擇brand==s後，amount的滑動範圍是4-8)一樣的方法去改，再server裡面加這個就好

    amount = observe({
      input$brand
      if (input$brand==""all""){
        val = c(1, 20)
      } else if (input$brand==""s""){
        val = c(4, 8)
      } else if (input$brand==""w""){
        val = c(3, 10)
      }
      updateSliderInput(session, ""amount"", min = val[1], max = val[2])
    }): 2.sliderInput能設定為區間(例我可以選擇amount=2-10)，並且讓我的output: 顯示為2-10的資料嗎？可以，一樣用observe去調，只是你要兩個sliderInput去調整顯示的最大跟最小值

這個你自己玩玩看吧，或是有興趣的版友可以寫寫看: code在此，煩請賜教: http://pastebin.com/t0XvW3wp--","R_Language"
"2085","M.1437379307.A.251","ardodo","問題shiny","Re: 如何設計有階層的input？",2015-07-20 16:01:44,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: 原諒我把它們合併再一起: R code: http://pastebin.com/PkQEtKVA: 重點在於 observe的運用: 隨著input$brand的改變，去改變input$model的值: ※ 引述《ardodo (米蟲)》之銘言：: : 各位版友好，我現在想設計兩個selectInput在我的shiny app上，: : 第一個input叫做廠牌，第二個input叫做型號: : 我想要在選擇廠牌時(ex: w)，第二個input的型號只剩下屬於廠牌w的型號(ex:w123,w456): : 選擇廠牌s時，第二個input的型號只剩下屬於廠牌s的型號(s99,s88): : 同時我的output table可以跟著我選擇的input互動: : 我目前的程式碼只能做到選擇廠牌時table有互動，選擇input時table有互動，: : 還沒辦法做到第二個input隨著第一個input的變化而跟著變化感謝版主幫我解決先前的問題，另外請教兩個延伸問題：

1. 同樣的一筆資料，我想要在selectInput篩選brand後，讓sliderInput的amount範圍

能跟著selectInput有所變動(例我選擇brand==s後，amount的滑動範圍是4-8)


2.sliderInput能設定為區間(例我可以選擇amount=2-10)，並且讓我的output

顯示為2-10的資料嗎？

code在此，煩請賜教http://pastebin.com/t0XvW3wp--","R_Language"
"2086","M.1437373001.A.DE6","celestialgod","討論","Re: 每行抓取特定值",2015-07-20 14:16:38,NA,NA,"※ 引述《fifish89 (OMG)》之銘言：: [問題類型]:: 想針對每行判別是否有包含某特定值: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 資料格式如下:: ID  D1  D2  D3 D4....D50: A  123  23 ......... 55: B   24 005: C  504   . .  002: D  002   .   . .: .    .   .      ...: H    .   . 002      ...: .    .   .          ...: XX 410   .          ...: ============================: CODE1<-有指定某些數字一: CODE2<-有指定某些數字二: .: .: .: CODE15<-有指定某些數字十五: 這是醫院資料，: 每個人若最多有50個診斷欄位(D1-->D50)，: 而CODE1...CODE15是每個疾病的指定疾病碼，: 想要判斷每個人是否有罹患這些疾病。: EX:: 假設CODE1=002(中風(stroke)疾病碼)，: 我就會去判斷每個診斷欄位中(D1-->D50)是否有002這個疾病碼，: ID=C,在D4中有抓到中風碼: ID=D,在D1中有抓到中風碼: ID=H,在D3中有抓到中風碼: 希望輸出結果為: ID  stroke ....: A     0: B     0: C     1: D     1: .     .: .     .: H     1: .     .: XX    .程式好讀版：http://pastebin.com/MN73bPPHlibrary(data.table)
library(tidyr)
library(dplyr)
library(magrittr)
N = 1e5
dat = data.table(ID = paste0(""P"", 1:N))
for (i in 1:50)
  eval(parse(text = paste0(""dat %<>% mutate(D"", i,
    ""=paste0(sample(LETTERS, N, TRUE),"",
    ""sample(as.character(1:100), N, TRUE)))"")))

# single search
code1 = ""D5""
st = proc.time()
a = dat %>% gather(D, code, -ID) %>% group_by(ID) %>%
  summarise(stroke = any(code == code1)) %>% distinct()
proc.time() - st
#   user  system elapsed
#   0.42    0.05    0.47

# multiple search
codes_search = c(""D5"", ""E55"", ""Z2"", ""A96"")
st = proc.time()
a = dat %>% gather(D, code, -ID) %>% group_by(ID)
for (i in 1:length(codes_search))
  eval(parse(text = paste0(""a %<>% mutate(codes_search_"", i,
    ""=codes_search["", i, ""])"")))
b = a %>% group_by(ID) %>% summarise_(.dots = paste0(
    ""any(code == codes_search_"", 1:length(codes_search),"")"")) %>%
  setnames(c(""ID"", paste0(""stroke"", 1:length(codes_search))))
proc.time() - st
#   user  system elapsed
#   2.74    0.26    3.01

## list search
diseases = vector('list', 15)
for (i in 1:length(diseases))
  diseases[[i]] = paste0(sample(LETTERS, i, TRUE),
    sample(1:100, i, TRUE))

st = proc.time()
a = dat %>% gather(D, code, -ID) %>% group_by(ID)
out_list = llply(1:length(diseases), function(i){
  a %>% setkey(ID) %>% group_by(ID) %>%
  summarise(stroke = any(code %in% diseases[[i]])) %>%
  setnames(""stroke"", paste0(""stroke_"", i))
})
out = Reduce(function(x, y) merge(x, y), out_list)
proc.time() - st
#   user  system elapsed
#   8.88    0.36    9.23

## faster way
st = proc.time()
a = dat %>% gather(D, code, -ID) %>% group_by(ID)
eval(parse(text = paste(""a %<>% summarise("", paste0(""stroke_"",
  1:length(diseases) ,""=any(diseases[["", 1:length(diseases),
  ""]] %in% code)"", collapse = "",""), "")"")))
proc.time() - st
#   user  system elapsed
#   5.79    0.05    5.85

## the fastest way
st = proc.time()
out2 = vector('list', length(diseases))
for (i in 1:length(diseases))
  out2[[i]] = rowMeans(sweep(as.matrix(dat[,2:51, with = FALSE]), 2,
1:(ncol(dat)-1), function(x, y){matrix(x %in% diseases[[i]], nrow(dat))})) > 0
out2 = do.call(cbind, out2) %>% data.table %>% cbind(dat$ID, .) %>%
  setnames(c(""ID"", paste0(""stroke_"", 1:length(diseases)))) %>% tbl_dt(FALSE)
proc.time() - st
#   user  system elapsed
#   3.20    0.52    3.71

all.equal(out2, a) # TRUE## the fastest way

關於multiple search部分，我稍微說明一下

發現summarise_裡面lazyeval部分的environment設定在data內部

可能是避免一些問題才這樣設計

所以沒辦法直接用.dots把global variables塞進去跑

只好先手動mutate進去之後

再一次summarise

--","R_Language"
"2087","M.1437371866.A.956","fifish89","討論","每行抓取特定值",2015-07-20 13:57:44,NA,NA,"[問題類型]:
想針對每行判別是否有包含某特定值

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

資料格式如下:

ID  D1  D2  D3 D4....D50
A  123  23 ......... 55
B   24 005
C  504   . .  002
D  002   .   . .
.    .   .      ...
H    .   . 002      ...
.    .   .          ...
XX 410   .          ...

============================
CODE1<-有指定某些數字一
CODE2<-有指定某些數字二
.
.
.
CODE15<-有指定某些數字十五


這是醫院資料，
每個人若最多有50個診斷欄位(D1-->D50)，
而CODE1...CODE15是每個疾病的指定疾病碼，
想要判斷每個人是否有罹患這些疾病。

EX:
假設CODE1=002(中風(stroke)疾病碼)，
我就會去判斷每個診斷欄位中(D1-->D50)是否有002這個疾病碼，
ID=C,在D4中有抓到中風碼
ID=D,在D1中有抓到中風碼
ID=H,在D3中有抓到中風碼

希望輸出結果為

ID  stroke ....
A     0
B     0
C     1
D     1
.     .
.     .
H     1
.     .
XX    .



[你的答案]:
目前自己的想法是將這15個指定的疾病放在list，再用apply去做判斷。是可以執行的。
只是想了解各個高手們會以怎樣的思考方式或不同的函數作運算?
藉由每個人的思考方式，好像更能刺激自己的想法。

disease<-list(
   CODE1=c(002)
   .
   .
   CODE15=c(23,555,467..)
)


disease_yes<-function(x,code){
rowname <- which(x%in%code)
return(rowname)
}

sub_data1<-data.frame(data1[,1])  #第一欄是ID
for(i in 1:length(disease)){
sub_data1[,i+1]<-0
rowname<-sort(unique(unlist(apply(data1,2,FUN=disease_yes,code=disease[[i]]))))
sub_data1[rowname,i+1]<-1
colnames(sub_data1)[i+1]<-names(disease)[i]
}



[關鍵字]:
apply

--","R_Language"
"2088","M.1437367328.A.176","celestialgod","分享shiny","ising model",2015-07-20 12:42:05,NA,NA,"R code:http://pastebin.com/2S27nWiS之前做過一個interactive的shiny app

根據數篇文章做成，可以任意改變演算模式、ising model大小等等

可以玩一下，shiny observe的威力

[關鍵字]: shiny, ising model


--","R_Language"
"2089","M.1437366656.A.06C","celestialgod","問題shiny","Re: 如何設計有階層的input？",2015-07-20 12:30:53,NA,NA,"原諒我把它們合併再一起

R code:http://pastebin.com/PkQEtKVA重點在於 observe的運用

隨著input$brand的改變，去改變input$model的值※ 引述《ardodo (米蟲)》之銘言：: 各位版友好，我現在想設計兩個selectInput在我的shiny app上，: 第一個input叫做廠牌，第二個input叫做型號: 我想要在選擇廠牌時(ex: w)，第二個input的型號只剩下屬於廠牌w的型號(ex:w123,w456): 選擇廠牌s時，第二個input的型號只剩下屬於廠牌s的型號(s99,s88): 同時我的output table可以跟著我選擇的input互動: 我目前的程式碼只能做到選擇廠牌時table有互動，選擇input時table有互動，: 還沒辦法做到第二個input隨著第一個input的變化而跟著變化--","R_Language"
"2090","M.1437364196.A.2FE","ardodo","問題shiny","如何設計有階層的input？",2015-07-20 11:49:53,NA,NA,"各位版友好，我現在想設計兩個selectInput在我的shiny app上，

第一個input叫做廠牌，第二個input叫做型號

我想要在選擇廠牌時(ex: w)，第二個input的型號只剩下屬於廠牌w的型號(ex:w123,w456)

選擇廠牌s時，第二個input的型號只剩下屬於廠牌s的型號(s99,s88)

同時我的output table可以跟著我選擇的input互動

我目前的程式碼只能做到選擇廠牌時table有互動，選擇input時table有互動，

還沒辦法做到第二個input隨著第一個input的變化而跟著變化

以上是我的問題，若有描述不清的請告知我，以下是我的codeui：library(shiny)

shinyUI((fluidPage(
   titlePanel(""hirearchy data group""),
   sidebarLayout
   (
   sidebarPanel
   (
   selectInput(""brand"",label=""choice the brand"",choices=c(""all"",""w"",""s"")),
   selectInput(""model"",label=""choice the
model"",choices=c(""all"",""w123"",""w456"",""s99"",""s88""))

   ),

   mainPanel
   (
   dataTableOutput(""table"")
   )

   ))))server：library(shiny)

## test dataframe
df <- data.frame(id = c(""1"",""1"",""1"",""1"",""1"",""1"",""2"",""2"",""2"",""2""),
                 brand = c(""w"",""w"",""w"",""s"",""s"",""s"",""w"",""w"",""w"",""s""),
                 model =
c(""w123"",""w123"",""w456"",""s99"",""s88"",""s88"",""w123"",""w456"",""w456"",""s99""),
                 amount = c(10,9,7,8,6,4,7,3,2,8))
df$id=as.character(df$id)
df$brand=as.character(df$brand)
df$model=as.character(df$model)


shinyServer(function(input, output) {
   output$table <- renderDataTable({
      if(input$brand!=""all"") {df=df[which(df$brand==input$brand),]}
      if(input$model!=""all"") {df=df[which(df$model==input$model),]}

   df

   })

})

--","R_Language"
"2091","M.1437187866.A.6E1","SFMAndroid","問題","r在excel中的自動化應用",2015-07-18 10:51:03,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:版友們好:)小弟最近在處理excel資料時 有很多手動的機械性(重複)動作由於是比較私密的資料 所以請恕小弟無法將資料講得太詳細@@我盡量描述資料架構，例如：以excel而言 A欄是名目(姓名、ID等)B欄也是名目(分組組別、年齡層等)C欄是數值(薪水、考試分數等)假設現在的步驟是將B欄每組組別的平均數或變異數算出來重複動作是用excel篩選B欄組別 一一下去跑平均數變異數將結果輸出在D欄那麼 有沒有辦法用除了VBA以外的方法讓這步驟自動化？像是C++能夠產生的執行檔 或是excel中物件的方式讓使用者能夠一點就產出結果？小弟在餵估狗後 找到一篇論文和我所想的方式很像《資料採礦預測系統之建構─以雲端運算為系統之主軸概念，廖婉婷》產生的物件可能和系統介紹預測的部分差不多不過小弟目前還不需要用到cloudR好像沒有辦法像C++那樣編譯然後產生一個執行檔但即使寫了一個通用的程式碼 每次還是要重開R執行有點麻煩RExcel好像是目前看來比較可行的方式問題好像有點亂...簡言之就是 希望能夠《一鍵執行且不用再打開R，像巨集那樣結果隨資料數值變動而變動》想請問版上大神 R需要搭配什麼才能夠做到這一點呢？因為小弟的VBA實在不是很強...要再買書自學也有點花時間RExcel又卡在excel 32bit的問題 還有R版本也不能太新*_*如果R能夠做到就再好不過了！！或是有除了VBA或RExcel外能支援R語言的相關程式或套件大概這樣若以上有說明不清楚的地方還請見諒 謝謝~[程式範例]:無[環境敘述]:[關鍵字]:RExcel、C++、VBA、自動化--","R_Language"
"2092","M.1437010250.A.BD3","elone","問題","Re: Filter 的問題",2015-07-16 09:30:48,NA,NA,"借題發揮一下

先謝謝2位大大的幫忙

昨天晚上也試了一個 rbind

也可以完成類似的東西 ，單純分享心得 XDDD

應該很多大大都會了※ 引述《elone (Next Step)》之銘言：:   不好意思 小弟是一個新入門的菜逼巴 平常只會寫 C:   小弟有一個要做多重 filter 的問題...:   前言:   事情是這樣的 我們想針對不同的使用者與其不同的判斷條件去刪資料:   ex:   source file (因為變數很長所以用ABC 來代替):   tEyedata:         C1  C2  C3:     A   0   1   5:     A   0   1   7:     A   0   2   6:     A   0   2   8:     B   0   1   7:     B   0   2   8:     C   0   1   9:     C   0   2   10:   Filter file:   pN:        C1  C2   C3:     A  0   1    6:     A  0   2    7:     B ...:     C  ..:     ...:     我們要逐一比對  tEyedata　C1 C2 和 pN C1 C2 是否有一樣: 　　如果一樣的話　再去看 tEyedata$C3  是否有 >= pN$C3:     如果有的話　就會把這筆record 拿掉:     如果沒有的話　就會留下這筆 record:     就結果來說應該 tEyedata 會變成:       C1  C2   C3:    A  0   1    5:    A  0   2    6:    B  ..:    但是我們的code 都會拿光光 QAQ ... 卡了2天了啊啊啊:    #read prune file:   tEyedata <- read.table(""Eye.txt"",header=T):    pN <- read.table(""Eye/Eye_Prune.txt"",header=T)tmp <- NULL:     for(i in 1:nrows(tEyedata)):     {:       for(j in 1:nrows(pN)):       {:         if(tEyedata$subject[[i]] == pN$subejct[[j]] & C1 = C1 & D1 = D1 ):          {:           tEyedata <- subset(tEyedata, tEyedata$C3 <= pN$C3[[j]] )tmp <- rbind(df4, tEyendata[c(i),c(1:3)]):         }:       }:     }最後再reindex ~~~
      rownames(Eyedata) <- 1:nrow(Eyedata):     但是他都會把不該拿掉的東西拿掉　我好苦惱啊: 　　希望有大大可以來救我: 　　謝謝謝謝大家的幫忙 !!!


--

Allen Iverson -  It's not Overhttp://www.youtube.com/watch?v=bbwfpT-X-e8--","R_Language"
"2093","M.1436984106.A.48E","s86116","問題","Re: shiny相關問題",2015-07-16 02:15:04,NA,NA,"※ 引述《s86116 (hsiuy)》之銘言：: [問題類型]:: 我想用R 都shiny寫一個上傳檔案的app，但是我不知道要怎麼用R 寫出來。: [軟體熟悉度]:: R基本的語法可以但shiny套件太新，所以很生疏。: [問題敘述]:: 我想用R 都shiny寫一個上傳檔案的app，但是我不知道要怎麼用R 寫出來。已經把shiny.rstudio.com中gallery提供的程式複製到rstudio了，但還是跑不出來。麻煩各位幫幫
忙了！: [程式範例]:: library(shiny): ui<-fluidPage(): server<-function(input,output){}: shinyApp(ui=ui,server=server): 以上的程式是沒有問題的: 視窗也有跑出來: 但下面的程式就卡住了程式來源http://shiny.rstudio.com/gallery/file-upload.htmlhttp://i.imgur.com/fwWA1Sr.jpghttp://i.imgur.com/wzHYHhg.jpg: library(shiny): shinyUI(fluidPage(:   titlePanel(""Uploading Files""),:   sidebarLayout(:     sidebarPanel(:       fileInput('file1', 'Choose CSV File',:                 accept=c('text/csv',:                                                                  'text/comma-s:                                                                  '.csv')),:       tags$hr(),:       checkboxInput('header', 'Header', TRUE),:       radioButtons('sep', 'Separator',:                    c(Comma=',',:                      Semicolon=';',:                      Tab='\t'),:                    ','),:       radioButtons('quote', 'Quote',:                    c(None='',:                      'Double Quote'='""',:                      'Single Quote'=""'""),:                    '""'):     ),:     mainPanel(:       tableOutput('contents'):     ):   ): )): library(shiny): shinyServer(function(input, output) {:   output$contents <- renderTable({:     # input$file1 will be NULL initially. After the user selects:     # and uploads a file, it will be a data frame with 'name',:     # 'size', 'type', and 'datapath' columns. The 'datapath':     # column will contain the local filenames where the data can:     # be found.:     inFile <- input$file1:     if (is.null(inFile)):       return(NULL):     read.csv(inFile$datapath, header=input$header, sep=input$sep,:                                  quote=input$quote):   }): }): [環境敘述]:: 我是用rstudio跑的: [關鍵字]:: 選擇性，也許未來有用: 因為我平常不用ptt，這是我朋友的帳號，方便的話可以用line聯絡我，我的ID是jingchi: ，問題解決了會很有誠意的請你吃個飯，真的拜託大家了！--","R_Language"
"2094","M.1436983415.A.1C4","s86116","問題","",2015-07-16 02:03:32,NA,NA,"[問題類型]:我想用R 都shiny寫一個上傳檔案的app，但是我不知道要怎麼用R 寫出來。[軟體熟悉度]:
R基本的語法可以但shiny套件太新，所以很生疏。

[問題敘述]:
我想用R 都shiny寫一個上傳檔案的app，但是我不知道要怎麼用R 寫出來。已經把shiny.
rstudio.com中gallery提供的程式複製到rstudio了，但還是跑不出來。麻煩各位幫幫忙
了！


[程式範例]:

library(shiny)
ui<-fluidPage()
server<-function(input,output){}
shinyApp(ui=ui,server=server)

以上的程式是沒有問題的
視窗也有跑出來
但下面的程式就卡住了

library(shiny)

shinyUI(fluidPage(
  titlePanel(""Uploading Files""),
  sidebarLayout(
    sidebarPanel(
      fileInput('file1', 'Choose CSV File',
                accept=c('text/csv',
                                                                 'text/comma-separated-values,text/plain',
                                                                 '.csv')),
      tags$hr(),
      checkboxInput('header', 'Header', TRUE),
      radioButtons('sep', 'Separator',
                   c(Comma=',',
                     Semicolon=';',
                     Tab='\t'),
                   ','),
      radioButtons('quote', 'Quote',
                   c(None='',
                     'Double Quote'='""',
                     'Single Quote'=""'""),
                   '""')
    ),
    mainPanel(
      tableOutput('contents')
    )
  )
))

library(shiny)

shinyServer(function(input, output) {
  output$contents <- renderTable({

    # input$file1 will be NULL initially. After the user selects
    # and uploads a file, it will be a data frame with 'name',
    # 'size', 'type', and 'datapath' columns. The 'datapath'
    # column will contain the local filenames where the data can
    # be found.

    inFile <- input$file1

    if (is.null(inFile))
      return(NULL)

    read.csv(inFile$datapath, header=input$header, sep=input$sep,
                                 quote=input$quote)
  })
})

[環境敘述]:

我是用rstudio跑的

[關鍵字]:選擇性，也許未來有用因為我平常不用ptt，這是我朋友的帳號，方便的話可以用line聯絡我，我的ID是jingchi
，問題解決了會很有誠意的請你吃個飯，真的拜託大家了！

--","R_Language"
"2095","M.1436954001.A.0C6","celestialgod","問題","Re: Filter 的問題",2015-07-15 17:53:19,NA,NA,"提供一個我覺得有點酷的方法~~用sweep做 (我直接根據andrew大大改的)

tEyedata = matrix(c(0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,2,1,2,1,2,1,2,5,7,6,
  8,7,8,9,10,3,7,4,1),12,3)
pN = matrix(c(0,0,1,2,6,7),2,3)

out = vector('list', nrow(pN))
for (i in 1:nrow(pN)){
  tmp = sweep(tEyedata, 2, pN[i,], '-')
  out[[i]] = tEyedata[which(tmp[,1] == 0 & tmp[,2] == 0 & tmp[,3] < 0),]
}
(out_all = do.call(rbind, out))

out_all即為所求


其中sweep是一個很方便的function

可以matrix(第一個input)對vector(第三個input)做運算

行或列則以第二個input做判斷

(根本只是想偷渡sweep....


sweep向量運算版：

tEyedata <-
matrix(c(0,0,0,0,0,0,0,0,0,0,0,0,1,1,2,2,1,2,1,2,1,2,1,2,5,7,6,8,7,8,
  9,10,3,7,4,1),12,3)
pN <- matrix(c(0,0,1,2,6,7),2,3)

out = vector('list', nrow(pN))
for (i in 1:nrow(pN))
  out[[i]] = tEyedata[sweep(tEyedata, 2, pN[i,], function(x, y){
    x[,1] == y[,1] & x[,2] == y[,2] &  x[,3] < y[,3]
  }),]
(out_all = do.call(rbind, out))※ 引述《elone (Next Step)》之銘言：:   不好意思 小弟是一個新入門的菜逼巴 平常只會寫 C:   小弟有一個要做多重 filter 的問題...:   前言:   事情是這樣的 我們想針對不同的使用者與其不同的判斷條件去刪資料:   ex:   source file (因為變數很長所以用ABC 來代替):   tEyedata:         C1  C2  C3:     A   0   1   5:     A   0   1   7:     A   0   2   6:     A   0   2   8:     B   0   1   7:     B   0   2   8:     C   0   1   9:     C   0   2   10:   Filter file:   pN:        C1  C2   C3:     A  0   1    6:     A  0   2    7:     B ...:     C  ..:     ...:     我們要逐一比對  tEyedata　C1 C2 和 pN C1 C2 是否有一樣: 　　如果一樣的話　再去看 tEyedata$C3  是否有 >= pN$C3:     如果有的話　就會把這筆record 拿掉:     如果沒有的話　就會留下這筆 record:     就結果來說應該 tEyedata 會變成:       C1  C2   C3:    A  0   1    5:    A  0   2    6:    B  ..:    但是我們的code 都會拿光光 QAQ ... 卡了2天了啊啊啊:    #read prune file:   tEyedata <- read.table(""Eye.txt"",header=T):    pN <- read.table(""Eye/Eye_Prune.txt"",header=T):     for(i in 1:nrows(tEyedata)):     {:       for(j in 1:nrows(pN)):       {:         if(tEyedata$subject[[i]] == pN$subejct[[j]] & C1 = C1 & D1 = D1 ):         {:           tEyedata <- subset(tEyedata, tEyedata$C3 <= pN$C3[[j]] ):         }:       }:     }:     但是他都會把不該拿掉的東西拿掉　我好苦惱啊: 　　希望有大大可以來救我: 　　謝謝--","R_Language"
"2096","M.1436949268.A.111","andrew43","問題","Re: Filter 的問題",2015-07-15 16:34:25,NA,NA,"tEyedata <- data.frame(
  C1 = c(0,0,0,0,0,0,0,0,0,0,0,0),
  C2 = c(1,1,2,2,1,2,1,2,1,2,1,2),
  C3 = c(5,7,6,8,7,8,9,10,3,7,4,1)
)
pN <- data.frame(
  C1 = c(0,0),
  C2 = c(1,2),
  C3 = c(6,7)
)

## 走訪 pN 每列，但實際怎麼領悟就靠你自己了, 希望我沒寫得讓你迷路了
inx <- list() # 符合第一個條件
nwR <- list() # 符合第二個條件
ned <- list()
for(i in 1:nrow(pN)){
  inx[[i]] <- tEyedata[, ""C1""] %in% pN[i, ""C1""] &
              tEyedata[, ""C2""] %in% pN[i, ""C2""]
  nwR[[i]] <- ! tEyedata[inx[[i]], ""C3""] >= pN[i, ""C3""]
  ned[[i]] <- tEyedata[inx[[i]], ][nwR[[i]], ]
}

ned # 為所求; 要再轉成別的樣子隨意※ 引述《elone (Next Step)》之銘言：:   不好意思 小弟是一個新入門的菜逼巴 平常只會寫 C:   小弟有一個要做多重 filter 的問題...:   前言:   事情是這樣的 我們想針對不同的使用者與其不同的判斷條件去刪資料:   ex:   source file (因為變數很長所以用ABC 來代替):   tEyedata:         C1  C2  C3:     A   0   1   5:     A   0   1   7:     A   0   2   6:     A   0   2   8:     B   0   1   7:     B   0   2   8:     C   0   1   9:     C   0   2   10:   Filter file:   pN:        C1  C2   C3:     A  0   1    6:     A  0   2    7:     B ...:     C  ..:     ...:     我們要逐一比對  tEyedata　C1 C2 和 pN C1 C2 是否有一樣: 　　如果一樣的話　再去看 tEyedata$C3  是否有 >= pN$C3:     如果有的話　就會把這筆record 拿掉:     如果沒有的話　就會留下這筆 record:     就結果來說應該 tEyedata 會變成:       C1  C2   C3:    A  0   1    5:    A  0   2    6:    B  ..:    但是我們的code 都會拿光光 QAQ ... 卡了2天了啊啊啊:    #read prune file:   tEyedata <- read.table(""Eye.txt"",header=T):    pN <- read.table(""Eye/Eye_Prune.txt"",header=T):     for(i in 1:nrows(tEyedata)):     {:       for(j in 1:nrows(pN)):       {:         if(tEyedata$subject[[i]] == pN$subejct[[j]] & C1 = C1 & D1 = D1 ):         {:           tEyedata <- subset(tEyedata, tEyedata$C3 <= pN$C3[[j]] ):         }:       }:     }:     但是他都會把不該拿掉的東西拿掉　我好苦惱啊: 　　希望有大大可以來救我: 　　謝謝--","R_Language"
"2097","M.1436943936.A.C6F","elone","問題","Filter 的問題",2015-07-15 15:05:33,NA,NA,"不好意思 小弟是一個新入門的菜逼巴 平常只會寫 C

  小弟有一個要做多重 filter 的問題...

  前言

  事情是這樣的 我們想針對不同的使用者與其不同的判斷條件去刪資料

  ex
  source file (因為變數很長所以用ABC 來代替)

  tEyedata

        C1  C2  C3
    A   0   1   5
    A   0   1   7
    A   0   2   6
    A   0   2   8
    B   0   1   7
    B   0   2   8
    C   0   1   9
    C   0   2   10

  Filter file

  pN

       C1  C2   C3
    A  0   1    6
    A  0   2    7
    B ...
    C  ..
    ...

    我們要逐一比對  tEyedata　C1 C2 和 pN C1 C2 是否有一樣

　　如果一樣的話　再去看 tEyedata$C3  是否有 >= pN$C3

    如果有的話　就會把這筆record 拿掉

    如果沒有的話　就會留下這筆 record

    就結果來說應該 tEyedata 會變成

      C1  C2   C3
   A  0   1    5
   A  0   2    6
   B  ..

   但是我們的code 都會拿光光 QAQ ... 卡了2天了啊啊啊

   #read prune file
  tEyedata <- read.table(""Eye.txt"",header=T)
   pN <- read.table(""Eye/Eye_Prune.txt"",header=T)

    for(i in 1:nrows(tEyedata))
    {
      for(j in 1:nrows(pN))
      {
        if(tEyedata$subject[[i]] == pN$subejct[[j]] & C1 = C1 & D1 = D1 )
        {
          tEyedata <- subset(tEyedata, tEyedata$C3 <= pN$C3[[j]] )
        }
      }
    }

    但是他都會把不該拿掉的東西拿掉　我好苦惱啊

　　希望有大大可以來救我

　　謝謝

--

 Elone Huang - I am what i'm

 by Allen Iverson

--","R_Language"
"2098","M.1436925697.A.E90","dreler1","問題","package openair",2015-07-15 10:01:31,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想問一下 有板友使用 openair 這個 package嗎?

看了 help之後有些東西還是做不出來

譬如我使用import的 format 就很奇怪之類的

想要請問一下

謝謝

--","R_Language"
"2099","M.1436722733.A.E8B","celestialgod","問題","Re: 有關於資料整理（向右對齊）",2015-07-13 01:38:50,NA,NA,"※ 引述《gn01349943 (flying)》之銘言：: 但我題目可能說的不夠清楚，實際情況是有值項結束不是固定的，: 這樣就可能就需要再加個判斷有多少數量在each row，: 例如，資料可能長這樣子，: (dd <- data.table(x=1:6,b=c(2,'',4,5,6,7),c(1,'','',4,5,6),c(1,'','',4,5,''),c:    x b V3 V4 V5: 1: 1 2  1  1: 2: 2: 3: 3 4: 4: 4 5  4  4  4: 5: 5 6  5  5  5: 6: 6 7  6: 想要變成這樣的格式，:   x b V3 V4 V5: 1   1  2  1  1: 2            2: 3         3  4: 4 4 5  4  4  4: 5 5 6  5  5  5: 6      6  7  6這個除了直轉橫做外，提供一個用regular expression的作法

當作csv檔案，做一個平移的動作即可

好讀版程式：http://pastebin.com/xh3qt4Xalibrary(data.table)
library(dplyr)
library(magrittr)

(dt <- data.table(x=1:6,b=c(2,'',4,5,6,7),c(1,'','',4,5,6),c(1,'','',4,5,''),
  c('','','',4,5,'')))
old_names = names(dt)
dt %<>% setnames(paste0(""V"", 1:ncol(dt)))
txt = dt %>% mutate_(Vcobime = paste0(""paste("", paste0(""V"", 1:ncol(dt),
  collapse = "",""), "", sep = \"",\"")"")) %>% .$Vcobime
loc = which(substr(txt, sapply(txt, nchar), sapply(txt, nchar)) == "","")
txt[loc] = gsub(""(([^,]+,)*)(,*)"", ""\\3\\1"", txt[loc]) %>%
  substr(1, sapply(.,nchar)-1) %>% paste0("","", .)
dt = fread(paste(txt, collapse = ""\n"")) %>% setnames(old_names)


順便補一個用20萬列、100行的資料測試結果：

set.seed(100)
n_cols = 100
n_rows = 2e5
rightShift = sample(0:39, n_rows, TRUE)
m = matrix(rbinom(n_cols*n_rows, 10, 0.5), n_rows)
dt = t(sapply(1:n_rows, function(i){
  c(as.character(m[i,1:(n_cols-rightShift[i])]), rep('', rightShift[i]))
})) %>% data.table

用regular expression 大概花8秒 (amazing!!!)

用直轉橫再用.SD做平移大概花220秒

測試機器：RRO-3.2.0, windows 7 64bit,[email<U+00A0>protected], 16G ram

--","R_Language"
"2100","M.1436718826.A.FE0","gn01349943","問題","Re: 有關於資料整理（向右對齊）",2015-07-13 00:33:44,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《gn01349943 (flying)》之銘言：: : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 請簡略描述你所要做的事情，或是這個程式的目的: : 有一個data.table如以下格式，: :   x b V3 V4: : 1 1 2  1  1: : 2 2 3: : 3 3 4: : 4 4 5  4  4: : 5 5 6  5  5: : 6 1 2  1  1: : 我想要變成以下格式，: :   x b V3 V4: : 1 1 2  1  1: : 2      2  3: : 3      3  4: : 4 4 5  4  4: : 5 5 6  5  5: : 6 1 2  1  1: : 目前我可以用一個迴圈把它完成，如以下，: : 但是我想問有沒有使用data.table語言的方法？: : 因為實際資料有達到十萬多條row。: : len <- ncol(dd): : dd <- as.data.frame(dd): : for (x in 1:nrow(dd)) {: :   idx <- sum(dd[x,]!=""""): :   if(idx != len) {: :   dd[x,((len-idx+1):len)] <- dd[x,1:idx]: :   dd[x,1:(len-idx)] <- """": :   }: : }: 如果是我 我會考慮下面的做法，供您參考：: library(data.table): library(plyr): library(dplyr): library(magrittr): dt = fread("": x,b,V3,V4: 1, 2,  1,  1: 2, 3,,: 3, 4,,: 4, 5,  4,  4: 5, 6,  5,  5: 1, 2,  1,  1""): dt: #    x b V3 V4: # 1: 1 2  1  1: # 2: 2 3 NA NA: # 3: 3 4 NA NA: # 4: 4 5  4  4: # 5: 5 6  5  5: # 6: 1 2  1  1: PS:如果不是NA，下面which, filter條件可以自己改成抓得出來的值:    像是若是""""，就用V4==""""，而非is.na(V4): dt[which(is.na(dt$V4))] = filter(dt, is.na(V4)) %>% select(x, b) %>%:   cbind(matrix(rep(NA_integer_ ,ncol(.)*nrow(.)), nrow(.)), .): PS2: 如果是""""，NA_integer_要改成NA_character_，這樣column的class才對: dt: #     x  b V3 V4: # 1:  1  2  1  1: # 2: NA NA  2  3: # 3: NA NA  3  4: # 4:  4  5  4  4: # 5:  5  6  5  5: # 6:  1  2  1  1感謝回覆！

但我題目可能說的不夠清楚，實際情況是有值項結束不是固定的，
這樣就可能就需要再加個判斷有多少數量在each row，

例如，資料可能長這樣子，
(dd <- data.table(x=1:6,b=c(2,'',4,5,6,7),c(1,'','',4,5,6),c(1,'','',4,5,''),c('','','',4,5,'')))

   x b V3 V4 V5
1: 1 2  1  1
2: 2
3: 3 4
4: 4 5  4  4  4
5: 5 6  5  5  5
6: 6 7  6

想要變成這樣的格式，

  x b V3 V4 V5
1   1  2  1  1
2            2
3         3  4
4 4 5  4  4  4
5 5 6  5  5  5
6      6  7  6

自問自答一下，睡覺前突然想到了！

dd1 <- data.table(t(dd))
len <- nrow(dd1)
fun <-function(x){
  idx <- len-length(which(x!=''))
  if (idx !=0) {
    res <- rbind(array(rep('',idx),c(idx,1)), as.matrix(x[which(x!='')],ncol=1))
  } else {
    res <- as.matrix(x[which(x!='')],ncol=1)
  }
  res
}

res <- dd1[,lapply(.SD,fun)]
res <- data.table(t(res))

不知道是否還有更快速的寫法？

謝謝。



--","R_Language"
"2101","M.1436716370.A.701","celestialgod","問題","Re: 有關於資料整理（向右對齊）",2015-07-12 23:52:47,NA,NA,"※ 引述《gn01349943 (flying)》之銘言：: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 有一個data.table如以下格式，:   x b V3 V4: 1 1 2  1  1: 2 2 3: 3 3 4: 4 4 5  4  4: 5 5 6  5  5: 6 1 2  1  1: 我想要變成以下格式，:   x b V3 V4: 1 1 2  1  1: 2      2  3: 3      3  4: 4 4 5  4  4: 5 5 6  5  5: 6 1 2  1  1: 目前我可以用一個迴圈把它完成，如以下，: 但是我想問有沒有使用data.table語言的方法？: 因為實際資料有達到十萬多條row。: len <- ncol(dd): dd <- as.data.frame(dd): for (x in 1:nrow(dd)) {:   idx <- sum(dd[x,]!=""""):   if(idx != len) {:   dd[x,((len-idx+1):len)] <- dd[x,1:idx]:   dd[x,1:(len-idx)] <- """":   }: }如果是我 我會考慮下面的做法，供您參考：

library(data.table)
library(plyr)
library(dplyr)
library(magrittr)

dt = fread(""
x,b,V3,V4
1, 2,  1,  1
2, 3,,
3, 4,,
4, 5,  4,  4
5, 6,  5,  5
1, 2,  1,  1"")

dt#    x b V3 V4# 1: 1 2  1  1# 2: 2 3 NA NA# 3: 3 4 NA NA# 4: 4 5  4  4# 5: 5 6  5  5# 6: 1 2  1  1PS:如果不是NA，下面which, filter條件可以自己改成抓得出來的值像是若是""""，就用V4==""""，而非is.na(V4)dt[which(is.na(dt$V4))] = filter(dt, is.na(V4)) %>% select(x, b) %>%
  cbind(matrix(rep(NA_integer_ ,ncol(.)*nrow(.)), nrow(.)), .)PS2: 如果是""""，NA_integer_要改成NA_character_，這樣column的class才對dt#     x  b V3 V4# 1:  1  2  1  1# 2: NA NA  2  3# 3: NA NA  3  4# 4:  4  5  4  4# 5:  5  6  5  5# 6:  1  2  1  1--","R_Language"
"2102","M.1436715260.A.EFF","gn01349943","問題","有關於資料整理（向右對齊）",2015-07-12 23:34:18,NA,NA,"[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的有一個data.table如以下格式，

  x b V3 V4
1 1 2  1  1
2 2 3
3 3 4
4 4 5  4  4
5 5 6  5  5
6 1 2  1  1

我想要變成以下格式，

  x b V3 V4
1 1 2  1  1
2      2  3
3      3  4
4 4 5  4  4
5 5 6  5  5
6 1 2  1  1

目前我可以用一個迴圈把它完成，如以下，
但是我想問有沒有使用data.table語言的方法？
因為實際資料有達到十萬多條row。

len <- ncol(dd)
dd <- as.data.frame(dd)
for (x in 1:nrow(dd)) {
  idx <- sum(dd[x,]!="""")
  if(idx != len) {
  dd[x,((len-idx+1):len)] <- dd[x,1:idx]
  dd[x,1:(len-idx)] <- """"
  }
}

關於data.table的方式，我有想到一個方法如下，
可是執行一直報錯，所以不知道問題在哪？

len=ncol(dd)
fun <- function(x) {
  idx <- len-length(which(x!=''))
  if (idx !=0) {
    res <- cbind(array(rep('',idx),c(1,idx)),as.vector(x[which(x!='')]))
  } else {
    res <- as.vector(x[which(x!='')])
  }
  res
}

dd[,names(dd)[1:4]:=apply(.SD, 1, fun)]

先謝謝大家了！







--","R_Language"
"2103","M.1436685772.A.51F","celestialgod","分享","資料數據處理修改",2015-07-12 15:22:48,NA,NA,"這篇想呈現怎樣整理修改data.frmae/data.table內的資料

過程中，是否會製作資料複本會造成效能的低落

我試著把可能的解法都想在這篇裡面


這篇用一個最簡單的例子

包含""Null""字元的一個正數csv檔案

目標是要把Null轉成NA，並且全部column都轉成int/num

可以考慮幾種方式

1. 用read.csv讀，使用default option，再做剩下的修改

2. 用read.csv讀，設定stringsAsFactors=FALSE，直接對chr做修改

3. 用read.csv讀，設定na.strings = ""Null""，所有column就會直接變成int

4. 用fread讀，使用default options，再做剩下的修改

5. 用fread讀，設定na.strings = ""Null""，再做剩下的修改

這樣看起來3.是最方便的方式，不過fread再讀大資料時，有它的效率優勢


考慮一個有50000個row，200個column的資料，其中有156行包含""Null""

比較看看怎樣的轉換方式最快。

程式：http://pastebin.com/hX4Biq7xmachine: CPU: Celeron[email<U+00A0>protected]6GB Ram
Revolution R Open: R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

Unit: seconds
      expr       min        lq      mean    median        uq       max neval
  method_1  3.971753  4.036618  4.460901  4.535446  4.731301  5.329010    20
  method_2  3.772901  3.842948  4.494862  4.049869  4.323830  9.667021    20
  method_3  3.788617  3.853613  4.132342  3.921652  4.347161  5.132272    20
  method_4  3.716265  3.843885  4.145333  3.998319  4.247201  5.708531    20
  method_5 12.481331 13.448137 17.182267 14.693496 17.808658 32.192652    20
  method_6 12.348287 13.795098 16.440180 15.891280 17.371023 27.189625    20
  method_7  4.773306  4.849003  5.630633  5.326955  5.695046 11.200814    20
  method_8  4.100167  4.172661  4.989753  4.536472  5.041444  9.395030    20
  method_9  3.908649  4.057392  4.580684  4.365466  4.685546  8.113558    20
 method_10  3.920710  3.991021  4.342576  4.350796  4.621759  5.118484    20
 method_11  3.756906  3.814765  4.528976  4.191450  4.553097  7.491762    20
 method_12  4.215348  4.312883  4.487966  4.440046  4.558055  5.273808    20
 method_13  4.214801  4.299568  4.650518  4.482193  4.683664  7.368416    20
 method_14  3.859733  3.975412  4.406024  4.316589  4.433386  6.868416    20
 method_15  3.814103  4.236323  4.428712  4.367902  4.615070  5.399137    20


小評：

method_5跟method_6 (data.frame+sapply)是最差的方式

method_7(data.frame (讀入不轉factor) as.matrix+as.integer)為次差的方式

最好的方式是method_3跟method_4 (data.table+plyr::colwise)

稍差的方法如method_10 (data.frame (default讀入) + base::transform)

method_14 (data.table (default讀入) + data.table::transform)

method_15 (data.table (讀入設定nastrings) + data.table::transform)

method_12跟method_13 (data.table + dplyr::mutate_each_)表現頗為中庸

如果有其他方法，歡迎提出比較，感謝各位。


結論：

如果資料小的時候，直接使用3.的方式讀入資料即可

如果資料較大(大概超過一百萬個數值)的時候，建議用fread配上colwise做修改

[關鍵字]: plyr, dplyr, data.table, data.frame

--","R_Language"
"2104","M.1436625985.A.192","dreler1","問題","數據轉換 字元到數字",2015-07-11 22:46:22,NA,NA,"[軟體熟悉度]: 入門

[問題敘述]:

我有一組數據

data <- read.csv(""OLFdata.csv"", header = T)

data[data == ""Null""] <- NA

data$date <- as.POSIXct(strptime(data$date,format = ""%m/%d/%Y %H:%M"",tz=""GMT""))

整理之後發現從第2 到 第23column的數據都被讀成字元

上網找到了

data$a <- as.numeric(as.character(data$a))

這個可以幫我轉成數字

於是我想一口氣完成轉換

我嘗試了

data[2:23] <- as.numeric(as.character(data[2:23])

Warning message:
NAs introduced by coercion

全部都變成NA 有辦法一次做完嗎?

目前我已經一個一個轉好了

我畫了一個 multiple y vs x的圖

想要改 y軸

用aixs都沒反應 我嘗試用 axis(side = 2, col = 'darkgreen')

類似這樣的指令 就跑不出來 整個 Rstudio停在那邊 我要強制停止

R-3.2.1 Rstudio-0.99.451 windows OS

或者這樣說 我要畫 multiple Y vs X

dailymean = aggregate(data, list(Date=as.Date(data$date)),mean,na.rm=T)

xyplot(dailymean$a ~ dailymean$Date, type=""l"", ylab = ""a"")

axis(2,pretty(range(dailymean$a)))

par(new=T)

xyplot(dailymean$b ~ dailymean$Date, type=""l"", ylab = "" "")

axis(4,pretty(range(dailymean$b)))http://stackoverflow.com/questions/9627389/xy-plot-with-multiple-y-scales參考這個下去做的

但是 axis 都沒反應

我想說改個顏色看看

axis(2, col=""darkgreen"")

看 axis這個function 正常嗎

結果 process 轉了十幾分鐘 沒回應 我就手動關掉了  改個軸 會那麼吃資源嗎?



謝謝


--","R_Language"
"2105","M.1436523630.A.358","andrew43","問題","Re: 如何整理數量位置資料如:1胃,2腸",2015-07-10 18:20:27,NA,NA,"我覺得 reshape::melt() 之後再做點字串處理蠻直覺的。

txt <- ""ID,Food A,Food B,Food C,Food E
C146,,,,3腸
B287,,,,10腸
C140,,4大腸,,4腸
C133,,,1胃,
C132,1腸,,,
B305,,,1腸,
C112,,2腸,,1胃
C120,,,,1腸
C128,,,,1腸""

dt0 <- read.csv(textConnection(txt))

library(reshape)
dt1 <- melt(dt0, id = c(""ID""), variable_name = ""Food type"")
dt1$value <- as.character(dt1$value)
dt1 <- subset(dt1, value != """")

dt1$Amount <- as.numeric(gsub(""^([0-9]+)(.+)$"", ""\\1"", dt1$value))
dt1$Location <- as.factor(gsub(""^([0-9]+)(.+)$"", ""\\2"", dt1$value))
dt2 <- dt1[sort(dt1$ID), ]

dt2 為所求。※ 引述《helixc (@_2;)》之銘言：: [軟體熟悉度]:新手+入門: [問題敘述]:: 手上有一筆某蛙類的解剖資料，想要分析食性。: 紀錄的時候會長這樣：: ID,Food A,Food B,Food C,Food E: C146,,,,3腸: B287,,,,10腸: C140,,,,4腸: C133,,,1腸,: C132,1腸,,,: B305,,,1腸,: C112,,2腸,,1腸: C120,,,,1腸: C128,,,,1腸: 想要整理成這樣的資料：: ID,   Food type, Amount, Location: C146, E,         3,      腸: B287, E,         10,     腸: C140, E,         4,      腸: C133, C,         1,      腸: 目前我知道怎麼用tidyr::gather()整理資料，: 但目前想不到要怎麼把混在一起的數字和文字分開。: 因為數量不一定都是一位數的數字，位置也會有兩個字的狀況，: 純粹把資料當成文字硬去抽取特定位置沒辦法解決這個問題。: 資料量不大，其實可以用Excel做，: 但我在Excel就是用left()和right()抽取最常見的位數，: 再用工人智慧去檢核。理論上在R應該有更人工智慧(?)的方法？--","R_Language"
"2106","M.1436512890.A.854","celestialgod","問題","Re: 如何整理數量位置資料如:1胃,2腸",2015-07-10 15:21:28,NA,NA,"※ 引述《helixc (@_2;)》之銘言：: [軟體熟悉度]:新手+入門: [問題敘述]:: 手上有一筆某蛙類的解剖資料，想要分析食性。: 紀錄的時候會長這樣：: ID,Food A,Food B,Food C,Food E: C146,,,,3腸: B287,,,,10腸: C140,,,,4腸: C133,,,1腸,: C132,1腸,,,: B305,,,1腸,: C112,,2腸,,1腸: C120,,,,1腸: C128,,,,1腸: 想要整理成這樣的資料：: ID,   Food type, Amount, Location: C146, E,         3,      腸: B287, E,         10,     腸: C140, E,         4,      腸: C133, C,         1,      腸library(data.table)
library(dplyr)
library(tidyr)
library(magrittr)
library(stringr)

tmp_dt = fread(""ID,Food A,Food B,Food C,Food E
C146,,,,3腸
B287,,,,10腸
C140,,,,4腸
C133,,,1腸,
C132,1腸,,,
B305,,,1腸,
C112,,2腸,,1腸
C120,,,,1腸
C128,,,,1腸"", colClasses = rep(""Character"",5))

## method 1
output_dt = tmp_dt %>% gather(foodType, tmpCol,-ID) %>%
  filter(tmpCol != """") %>%
  mutate(Amount = str_extract(tmpCol, ""\\d*""),
    Location = str_sub(tmpCol, nchar(tmpCol), nchar(tmpCol))) %>%
  select(-tmpCol) %>%
  transform(foodType = as.character(foodType)) %>%
  transform(foodType = str_sub(foodType, nchar(foodType), nchar(foodType)))

## method 2
output_dt2 = tmp_dt %>% gather(foodType, tmpCol,-ID) %>%
  filter(tmpCol != """") %>%
  transform(foodType = as.character(foodType),
    tmpCol = sub(""(\\d*)(.)"", ""\\1,\\2"", tmpCol)) %>%
  separate(tmpCol, c(""Amount"", ""Location"")) %>%
  transform(foodType = str_sub(foodType, nchar(foodType), nchar(foodType)))

## method 3 (不用sub，separate的sep參數可以改成用位置切割)
output_dt2 = tmp_dt %>% gather(foodType, tmpCol,-ID) %>%
  filter(tmpCol != """") %>%
  transform(foodType = as.character(foodType)) %>%
  separate(tmpCol, c(""Amount"", ""Location""), -2) %>%
  transform(foodType = str_sub(foodType, nchar(foodType), nchar(foodType)))

output: (3個都一樣)
#       ID foodType Amount Location
#  1: C132        A      1       腸
#  2: C112        B      2       腸
#  3: C133        C      1       腸
#  4: B305        C      1       腸
#  5: C146        E      3       腸
#  6: B287        E     10       腸
#  7: C140        E      4       腸
#  8: C112        E      1       腸
#  9: C120        E      1       腸
# 10: C128        E      1       腸

--","R_Language"
"2107","M.1436508883.A.117","helixc","問題","如何整理數量位置資料如:1胃,2腸",2015-07-10 14:14:40,NA,NA,"[軟體熟悉度]:新手+入門

[問題敘述]:

手上有一筆某蛙類的解剖資料，想要分析食性。
紀錄的時候會長這樣：

ID,Food A,Food B,Food C,Food E
C146,,,,3腸
B287,,,,10腸
C140,,,,4腸
C133,,,1腸,
C132,1腸,,,
B305,,,1腸,
C112,,2腸,,1腸
C120,,,,1腸
C128,,,,1腸


想要整理成這樣的資料：
ID,   Food type, Amount, Location
C146, E,         3,      腸
B287, E,         10,     腸
C140, E,         4,      腸
C133, C,         1,      腸


目前我知道怎麼用tidyr::gather()整理資料，
但目前想不到要怎麼把混在一起的數字和文字分開。
因為數量不一定都是一位數的數字，位置也會有兩個字的狀況，
純粹把資料當成文字硬去抽取特定位置沒辦法解決這個問題。


資料量不大，其實可以用Excel做，
但我在Excel就是用left()和right()抽取最常見的位數，
再用工人智慧去檢核。理論上在R應該有更人工智慧(?)的方法？

--","R_Language"
"2108","M.1436376149.A.8AB","ciphero","問題","分層抽樣是否適用於正負樣本差距過大時?",2015-07-09 01:22:27,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
這裡我想問的問題，比較偏重在處理資料時使用的抽樣方式是否適合？


問題如下：

假設我有一份資料集，樣子如下：

  項次  col_1  col_2  col_3 ...... col_50  result
-------------------------------------------------
     1    ...    ...    ...           ...     yes
     2    ...    ...    ...           ...     yes
     3    ...    ...    ...           ...      no
......    ...    ...    ...           ...     ...

500000    ...    ...    ...           ...     yes


如果：
1.這份資料集總共有 500000 筆資料。
2.資料的因變數是「result」，其值只有 yes 跟 no 兩種。
3.資料中沒有任何 missing value。
4.假設 yes 跟 no 的資料數量差異很大，例如達到 99:1 的程度，
  也就是 yes 有 495000 筆，no 只有 5000 筆好了。
5.目的是想要找出「col_1 ~ col_50 這 50 個欄位對於 result 的影響程度」

原本我是將這 500000 筆資料原封不動的利用 R 的分類樹演算法(rpart)來處理
例如指令為：

formula = result ~ col_1 + col_2 + ... + col_50
x = rpart(formula, data, method=""class"")  # data: 含 500000 筆資料
summary(x)  #獲得變數重要程度的資訊

但後來發現結果跑不出來，應該是 yes 與 no 的資料數量相差過於懸殊的關係  @@~



[你的答案]:

所以後來我想到用「分層抽樣」的方法，針對不同的 result，用不同比例來隨機抽樣：

種類    筆數  抽樣比例  抽樣筆數
--------------------------------
 yes  495000        5%     24750
  no    5000      100%      5000
--------------------------------
總計  500000               29750


在這個方法裡面，我只用了 29750 筆資料 (yes:24750筆、no:5000筆)
雖然後來結果有很順利的跑完
但是對於採用這種方法，我不曉得會有什麼樣的缺點
(例如是否會因為樣本數減少，導致結論偏離正確的結果)

不知道大家對於這樣的抽樣方式，覺得是否合理呢？
感謝大家給予意見！


[關鍵字]:分層抽樣；rpart--","R_Language"
"2109","M.1436357761.A.477","gbd37","問題","隨機森林分群後的問題",2015-07-08 20:15:58,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我在看陳景祥的""R軟體 應用統計方法""的隨機森林說可以拿來分群

有150筆IRIS資料，經過隨機森林分群後，可以知道大略分三群

我要如何知道第一筆資料分在哪群，第二筆資料分在哪群



[程式範例]: 直接附上書本範例
iris.urf = randomForest(iris[,-5])
MDSplot(iris.urf, iris$Species,palette=rep(1,3),
        pch= as.numeric(iris$Species))


[關鍵字]:隨機森林


--","R_Language"
"2110","M.1436349516.A.08A","psinqoo","問題","資料搬移",2015-07-08 17:58:32,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的data

A  B  C  D
1  4  4  4
3  1  3  9
2  3
6


變成

A B C D
1
3
2
6
4
1
3
4
3
4
9


將B C D .....J..K 資料 貼到 A 欄

每欄資料長短 不一 都貼到同一欄


[程式範例]:[環境敘述]:[關鍵字]:

搬移資料選擇性，也許未來有用--

--","R_Language"
"2111","M.1436281469.A.DCD","leo0650","問題","Re: 讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-07 23:04:24,NA,NA,"※ 引述《helixc (@_2;)》之銘言：: ※ 引述《celestialgod (攸藍)》之銘言：: : # readxl套件： (不用JAVA，讀取也比較快，也不會轉換字串為factor): : library(readxl): : dat = read_excel(""birdnames.xls""): 這邊報告一下... readxl這個套件沒問題，: 但用dplyr處裡資料的時候就會有問題。: [code]: library(readxl): library(dplyr): fileName = ""birdnames.xls"": #讀取資料: x = read_excel(fileName): #資料讀取輸出正常: x$c_name[51:52]: #使用dplyr::select來讀資料，用兩種不同的寫法，一樣都不正常: y1<-select(x, c_name, Order) ; y1[51:52,]: y2<- x %>% select(c_name, Order) ; y2[51:52,]: #使用base::unique來讀取資料，正常: z<-unique(x$c_name); z[51:52]: 還不太會貼code以及處裡過程，直接貼圖: http://imgur.com/7oOVkLm: 不正常的資料: Source: local data frame [2 x 2]:               c_name Order: 1           白嘴潛鳥    51: 2 小<U+9E0A><U+9DC9>    52: 正常的資料: [1] ""白嘴潛鳥"" ""小<U+9E0A><U+9DC9>"": 如果是package處裡的問題的話，那轉移到非windows系統是無解的吧？: 只能捨棄dplyr使用*apply來輸出名錄了...: 可是我還不會用*apply來寫dplyr-like的功能阿Orz幫忙補充c大第二個連結的方法https://stat.ethz.ch/pipermail/r-devel/2015-May/071259.html因為 data.frame 的 `print` method 裡面會通過 format() 轉換，

(如底下function中的 #old# 部分)，所以可能有些locale所造成不同的轉換。


`print`函數是generic function，

因此可自定義新 class 及 所對應的 `print` method 來實現略過format()，

或可選擇直接在 global environment 定義新的 `print.data.frame`，

使得不用更改class的情況下，優先用自定義的 method


print.data.frame <- function (x, ..., digits = NULL,
                              quote = FALSE, right = TRUE, row.names = TRUE)
{
     n <- length(row.names(x))
     if (length(x) == 0L) {
         cat(sprintf(ngettext(n, ""data frame with 0 columns and %d row"",
             ""data frame with 0 columns and %d rows"", domain = ""R-base""),
             n), ""\n"", sep = """")
     }
     else if (n == 0L) {
         print.default(names(x), quote = FALSE)
         cat(gettext(""<0 rows> (or 0-length row.names)\n""))
     }
     else {
         #old# m <- as.matrix(format.data.frame(x, digits = digits,
         #old#     na.encode = FALSE))
         m <- as.matrix(x)
         if (!isTRUE(row.names))
             dimnames(m)[[1L]] <- if (identical(row.names, FALSE))
                 rep.int("""", n)
             else row.names
         print(m, ..., quote = quote, right = right)
     }
     invisible(x)
}


df <- data.frame(x=""黑頸<U+9E0A><U+9DC9>""); df

##          x
## 1 黑頸<U+9E0A><U+9DC9>




# 測試原本的 `print` ---------------------------------------

# 不曉得什麼原因""黑頸""可顯示但""<U+9E0A><U+9DC9>""卻無法：

Sys.setlocale(""LC_CTYPE"", locale=""Chinese_Taiwan.950"")

df <- data.frame(x=""黑頸<U+9E0A><U+9DC9>""); df

##                      x
## 1 黑頸<U+9E0A><U+9DC9>


# 測試不同locale，則全部以unicode碼顯示

Sys.setlocale(""LC_CTYPE"", locale=""English_United States.1252"")

df <- data.frame(x=""黑頸<U+9E0A><U+9DC9>""); df

##                                  x
## 1 <U+9ED1><U+9838><U+9E0A><U+9DC9>



--","R_Language"
"2112","M.1436113381.A.EAB","helixc","問題","Re: 讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-06 00:22:58,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《helixc (@_2;)》之銘言：: # readxl套件： (不用JAVA，讀取也比較快，也不會轉換字串為factor): library(readxl): dat = read_excel(""birdnames.xls"")這邊報告一下... readxl這個套件沒問題，
但用dplyr處裡資料的時候就會有問題。

[code]
library(readxl)
library(dplyr)

fileName = ""birdnames.xls""
#讀取資料
x = read_excel(fileName)
#資料讀取輸出正常
x$c_name[51:52]
#使用dplyr::select來讀資料，用兩種不同的寫法，一樣都不正常
y1<-select(x, c_name, Order) ; y1[51:52,]
y2<- x %>% select(c_name, Order) ; y2[51:52,]
#使用base::unique來讀取資料，正常
z<-unique(x$c_name); z[51:52]


還不太會貼code以及處裡過程，直接貼圖http://imgur.com/7oOVkLm不正常的資料
Source: local data frame [2 x 2]

              c_name Order
1           白嘴潛鳥    51
2 小<U+9E0A><U+9DC9>    52

正常的資料
[1] ""白嘴潛鳥"" ""小<U+9E0A><U+9DC9>""



如果是package處裡的問題的話，那轉移到非windows系統是無解的吧？
只能捨棄dplyr使用*apply來輸出名錄了...
可是我還不會用*apply來寫dplyr-like的功能阿Orz

--","R_Language"
"2113","M.1436079496.A.710","helixc","討論","ggplot2不能疊圖或畫雙Y軸圖?",2015-07-05 14:58:14,NA,NA,"其實想做的事情很簡單，就是想要在一張barplot放兩種資料，
而這兩個資料需要對應到不同的Y座標。

查了一下ggplot2好像沒有這種雙軸的功能？
要畫這種雙軸圖有些時候會把透過把兩張圖疊在同一張圖上來實現的樣子？


Google了一下在Cookbook for R的作者寫了一個multiplot的()的function如下：http://www.cookbook-r.com/Graphs/Multiple_graphs_on_one_page_%28ggplot2%29/另外在這個網頁上找到有人寫了eastyGplot2這個package也可以合併圖http://goo.gl/mG8Jla還有人寫了一個ggplot_dual_axis()的function來用http://goo.gl/eNLUS3再繼續Google發現好像R最基礎的繪圖套件就可以完成雙座標軸的圖
如http://www.r-bloggers.com/multiple-y-axis-in-a-r-plot/ggplot2的用法是不困難，但他沒給的功能好像也要自己寫(廢話)
有聽說ggplot2是基於lattice套件去寫的，是不是也要去瞭解lattice?
還是先把基礎的plot()弄懂就好？



另外有一個類似的問題，像用dplyr/tidyr 套件去整理資料很容易，
但在沒有這些套件的時候要怎麼用基礎的function來完成資料處裡呢？
有嘗試查詢過可是查不太到，手邊R教科書y這部分談得不太多...

研究所時代有去T大海洋所旁聽過R的課程，
那位謝老師要我們不用套件寫出自己要的功能，
那時被震撼教育過沒幾次就陣亡了，
但總覺得如果能夠不倚賴好用的套件自己土砲完成好像也不錯XDD

--","R_Language"
"2114","M.1436008507.A.04A","Neisseria","問題","Re: 讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-04 19:15:04,NA,NA,"我的環境是 Mac OS X 10.9.5
R 版本是 3.1.1 終端機 locale 是 zh_TW-utf8
Excel 版本是 2011 for OS X

剛剛簡單測了一下這個 xls 檔
如過透過 Excel 轉成 CSV 檔，再透過 iconv 轉的話
有些字會漏失，像是「<U+9D50>」

如果先用 gdata 這個套件將這個 xls 檔讀到 R 系統中
再用 write.csv 將資料輸出，就可以完整保留檔案中的文字
用 gdata 的話，不用透過 Java，而是透過 Perl
不知道在 Windows 下會不會很難裝

過程大概如下：
library(gdata)
bird <- read.xls('birdnames.xls', stringsAsFactors = FALSE)
write.csv(bird, 'birdnames.csv')

參考看看※ 引述《helixc (@_2;)》之銘言：: [軟體熟悉度]:: 新手+入門: [問題敘述]:: 如標題，因為再分析鳥類的資料，所以會遇到<U+9D34>、<U+9E0A>、<U+9DC9>這種某些系統無法顯示的字: 和程式語言不太熟，好像是BIG5的編碼比較少，所以遇到這些怪字會崩潰，: 轉到UTF8就會恢復正常？: 問題是目前手邊的名錄都是放在Excel當中，: 這些怪字在Excel當中活得很好，但一輸出成CSV等純文字文件就會變成亂碼。: 我再去Notepad++等軟體轉換編碼也沒有用。: [程式範例]:: 鳥類名錄資料在下面：: https://dl.dropboxusercontent.com/u/18689552/birdnames.xls: 另外我在NotePad++自己打了一個用UTF-8編碼的檔案如下：: https://dl.dropboxusercontent.com/u/18689552/birdnametest.txt: 裡面只有兩行字：: 173,反嘴<U+9D34>,長腳鷸科: 174,水雉,水雉科: 直接用read.table，產生怪字，而且還只讀一行:  data<-read.table(""birdnametest.txt""); data:                                     V1: 1 174,瘞湧\x9b\x89,瘞湧\x9b<U+6A2F>\xa7\x91\n: 加上eocoding=""UTF-8""之後怪字不見了，難字(<U+9D34>)沒出來，但一樣只有一行: 有需要的話是可以在Notepad++硬做一個UTF-8的檔案出來啦，: 名錄最多也不超過700種可以用工人智慧來完成，: 但也要R能夠讀入並顯示呀Orz: 系統資訊：: 不太會查，寫一下知道的：: Windows 7: RStudio Version 0.99447: R x64 3.2.1--","R_Language"
"2115","M.1435993340.A.8D4","helixc","問題","Re: 讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-04 15:02:18,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：因為xls可以存取UTF-8位元，昨天就有想到可以直接讀取xls。
但rJava這個package一直裝不進去...

install.packages('rJava') #這部分沒有問題
 library(rJava) #這邊就產生下面的錯誤訊息
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: fun(libname, pkgname)
  error: No CurrentVersion entry in Software/JavaSoft registry! Try
re-installing Java and make sure R and Java have matching architectures.
Error: package or namespace load failed for ‘rJava’


Java版本不太會查，不知道是不是這個？
已經有用Java upload檢查過了是最新版，
build 1.8.0_45-bl5

截圖如下：http://imgur.com/bUPpe9f補上sessionInfo()
R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950: xls部分: 好讀上色版：http://pastebin.com/2L5UrhSq: library(rJava): library(xlsx): library(data.table): library(magrittr)--","R_Language"
"2116","M.1435978747.A.C90","dreler1",NA,"R package",2015-07-04 10:59:02,NA,NA,"hey all,

我嘗試對R裝入 一個 package 叫openairhttp://www.openair-project.org/在Rstudio下

install.packages('openair')

或是在R下 install packages 去選openair

兩種都嘗試過了

感覺應是成功了

--- Please select a CRAN mirror for use in this session ---
Warning: dependency ‘dplyr’ is not available
trying URL
'http://watson.nci.nih.gov/cran_mirror/bin/windows/contrib/3.1/openair_1.5.zip'Content type 'application/zip' length 2909307 bytes (2.8 Mb)
opened URL
downloaded 2.8 Mb

package ‘openair’ successfully unpacked and MD5 sums checked

The downloaded binary packages are in
        C:\Users\Huang\AppData\Local\Temp\RtmpyE4aof\downloaded_packages

我就檢查functions

譬如這個http://www.openair-project.org/Examples/WindPollutionRoses.aspx但是 R 找不到 windRose function

我照他手冊總共嘗試了十種functions都找不到

Did I miss anything?

謝謝幫忙

--","R_Language"
"2117","M.1435975669.A.562","celestialgod","問題","Re: 讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-04 10:07:45,NA,NA,"※ 引述《helixc (@_2;)》之銘言：: [軟體熟悉度]:: 新手+入門: [問題敘述]:: 如標題，因為再分析鳥類的資料，所以會遇到<U+9D34>、<U+9E0A>、<U+9DC9>這種某些系統無法顯示的字: 和程式語言不太熟，好像是BIG5的編碼比較少，所以遇到這些怪字會崩潰，: 轉到UTF8就會恢復正常？: 問題是目前手邊的名錄都是放在Excel當中，: 這些怪字在Excel當中活得很好，但一輸出成CSV等純文字文件就會變成亂碼。: 我再去Notepad++等軟體轉換編碼也沒有用。: [程式範例]:: 鳥類名錄資料在下面：: https://dl.dropboxusercontent.com/u/18689552/birdnames.xls: 另外我在NotePad++自己打了一個用UTF-8編碼的檔案如下：: https://dl.dropboxusercontent.com/u/18689552/birdnametest.txt: 裡面只有兩行字：: 173,反嘴<U+9D34>,長腳鷸科: 174,水雉,水雉科txt部分：

read.table, read.csv加上encoding = ""UTF-8""只能讀到第二行

但下面這個有成功：

readLines(""birdnametest.txt"", encoding = ""UTF-8"") %>%
  strsplit("","") %>% do.call(rbind, .)

#      [,1]  [,2]     [,3]
# [1,] ""173"" ""反嘴<U+9D34>"" ""長腳鷸科""
# [2,] ""174"" ""水雉""   ""水雉科""http://imgur.com/1Gsldsu另外 fread不能調encoding，完全讀不進去，iconv也失敗(攤手

xls部分：

好讀上色版：http://pastebin.com/2L5UrhSqlibrary(rJava)
library(xlsx)
library(data.table)
library(magrittr)

fileName = ""birdnames.xls""
original_data = read.xlsx2(fileName, 1,
  header=TRUE, encoding = ""UTF-8"", as.data.frame=FALSE) %>%
  do.call(cbind, .) %>% data.table()# data.table在這裡是非必要，為了後面的setnames而用的data_names = read.xlsx2(fileName, 1,
  header=FALSE, startRow=1, endRow=1, encoding = ""UTF-8"",
  as.data.frame=FALSE) %>% unlist()# 這行是因為header通常讀不進去要手動original_data %<>% setnames(data_names)# setnames是data.table的function，提供不複製直接重新命名data.table的方法# 如果前面不用data.table，這裡可以改成用magrittr的set_names# 或是直接用names() <-original_data$c_namehttp://imgur.com/XyK5d0fhttp://imgur.com/c97dRSQ# readxl套件： (不用JAVA，讀取也比較快，也不會轉換字串為factor)

library(readxl)
dat = read_excel(""birdnames.xls"")
dat$c_name

補上session information:> sessionInfo()R version 3.2.1 (2015-06-18)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950


--","R_Language"
"2118","M.1435939492.A.3BC","helixc","問題","讀入""<U+9D34>"" ""<U+9E0A><U+9DC9>"" 等怪字",2015-07-04 00:04:49,NA,NA,"[軟體熟悉度]:
新手+入門

[問題敘述]:
如標題，因為再分析鳥類的資料，所以會遇到<U+9D34>、<U+9E0A>、<U+9DC9>這種某些系統無法顯示的字
和程式語言不太熟，好像是BIG5的編碼比較少，所以遇到這些怪字會崩潰，
轉到UTF8就會恢復正常？

問題是目前手邊的名錄都是放在Excel當中，
這些怪字在Excel當中活得很好，但一輸出成CSV等純文字文件就會變成亂碼。
我再去Notepad++等軟體轉換編碼也沒有用。



[程式範例]:

鳥類名錄資料在下面：https://dl.dropboxusercontent.com/u/18689552/birdnames.xls另外我在NotePad++自己打了一個用UTF-8編碼的檔案如下：https://dl.dropboxusercontent.com/u/18689552/birdnametest.txt裡面只有兩行字：
173,反嘴<U+9D34>,長腳鷸科
174,水雉,水雉科


直接用read.table，產生怪字，而且還只讀一行

 data<-read.table(""birdnametest.txt""); data

                                    V1
1 174,瘞湧\x9b\x89,瘞湧\x9b<U+6A2F>\xa7\x91\n


加上eocoding=""UTF-8""之後怪字不見了，難字(<U+9D34>)沒出來，但一樣只有一行


有需要的話是可以在Notepad++硬做一個UTF-8的檔案出來啦，
名錄最多也不超過700種可以用工人智慧來完成，
但也要R能夠讀入並顯示呀Orz


系統資訊：

不太會查，寫一下知道的：
Windows 7
RStudio Version 0.99447
R x64 3.2.1

--","R_Language"
"2119","M.1435899376.A.3B5","celestialgod","問題","Re: plyr",2015-07-03 12:56:13,NA,NA,"※ 引述《psinqoo (零度空間)》之銘言：: 延伸問題: 原始資料: id      year    cost: D       2012    120: E       2013    300: F       2014    200: A       2015    155: E       2011    200: F       2014    160: B       2013    165: B       2015    185: C       2012    350: A       2014    310: E       2014    225: F       2015    175: 想變成這樣子: ID 12計數 13計數 14計數 15計數 2012金額 2013金額 2014金額 2015金額 總計數 總金額: A: B: C: D: E: F: 雖然 資料量少 EXCEL 可以計算: 我想知道R 是否也能用少量語法做到# functions for packages
library(reshape2)   # dcast
library(data.table) # fread, dcast.data.table
library(dplyr)      # summarise, group_by, n, tbl_dt
library(magrittr)   # %>%
data_dt = fread(""
id year cost
D 2012 120
E 2013 300
F 2014 200
A 2015 155
E 2011 200
F 2014 160
B 2013 165
B 2015 185
C 2012 350
A 2014 310
E 2014 225
F 2015 175"") %>% tbl_dt(FALSE)
data_dt %>% dcast.data.table(id ~ year, sum, value.var = ""cost"") %>%
  left_join(
    data_dt %>% group_by(id) %>%
      summarise(total = sum(cost), num = n())
  ,""id"")

#   id 2011 2012 2013 2014 2015 total num
# 1  A    0    0    0  310  155   465   2
# 2  B    0    0  165    0  185   350   2
# 3  C    0  350    0    0    0   350   1
# 4  D    0  120    0    0    0   120   1
# 5  E  200    0  300  225    0   725   3
# 6  F    0    0    0  360  175   535   3


value.var可以不指定，他可以自動選擇，注意要用字串，別跟其他dplyr的function搞混

如果fun.aggregate(第三個input)沒指定就會用length

dcast.data.table 是data.table的method，data.frame直接用dcast就好，input是一樣

--","R_Language"
"2120","M.1435895295.A.12A","dreamreader","問題","Re: plyr",2015-07-03 11:48:13,NA,NA,"應該可以寫得更簡潔，但這應該是你想要的，看不懂的話，可以google一下spread的用法

library(tidyr)
library(dplyr)

df <-  data.frame(id = rep(LETTERS[1:5],4),
              year = rep(2011:2014, 5),
              cost= sample(200:500, 20))

long <- df %>% group_by(id, year) %>% summarize(count=n(), amount=sum(cost))
%>% ungroup()

count_wide <- long %>% select(id, year, count) %>%
mutate(year=paste0(""count_"", year)) %>% spread(year, count)
cost_wide <- long %>% select(id, year, amount) %>%
mutate(year=paste0(""amount_"", year)) %>% spread(year, amount)
total_wide <- df %>% group_by(id) %>% summarize(total_count = n(), total_cost
= sum(cost))

wide <- count_wide %>% left_join(cost_wide, ""id"") %>% left_join(total_wide,
""id"")※ 引述《psinqoo (零度空間)》之銘言：: 延伸問題: 原始資料: id      year    cost: D       2012    120: E       2013    300: F       2014    200: A       2015    155: E       2011    200: F       2014    160: B       2013    165: B       2015    185: C       2012    350: A       2014    310: E       2014    225: F       2015    175: 想變成這樣子: ID 12計數 13計數 14計數 15計數 2012金額 2013金額 2014金額 2015金額 總計數 總金額: A: B: C: D: E: F: 雖然 資料量少 EXCEL 可以計算: 我想知道R 是否也能用少量語法做到: ※ 引述《celestialgod (攸藍)》之銘言：: : library(plyr): : library(dplyr): : set.seed(1): : d <- data.frame(year = rep(2000:2002, each = 3),: :   count = round(runif(9, 0, 20))): : ddply(d, ""year"", summarise, tol = sum(count), count_year = n()): : #   year tol count_year: : # 1 2000  23          3: : # 2 2001  40          3: : # 3 2002  45          3: : # 單純用plyr做: : set.seed(1): : d <- data.frame(year = rep(2000:2002, each = 3),: :   count = round(runif(9, 0, 20))): : d$ones = 1: : ddply(d, ""year"", summarise, tol = sum(count), count_year = sum(ones)): : # 用dplyr + magrittr: : library(dplyr): : library(magrittr): : set.seed(1): : d <- data.frame(year = rep(2000:2002, each = 3),: :   count = round(runif(9, 0, 20))): : d %>% group_by(year) %>% summarise(tol = sum(count), count_year = n())--","R_Language"
"2121","M.1435891596.A.594","psinqoo","問題","Re: plyr ",2015-07-03 10:46:33,NA,NA,"延伸問題

原始資料

id      year    cost
D       2012    120
E       2013    300
F       2014    200
A       2015    155
E       2011    200
F       2014    160
B       2013    165
B       2015    185
C       2012    350
A       2014    310
E       2014    225
F       2015    175

想變成這樣子

ID 12計數 13計數 14計數 15計數 2012金額 2013金額 2014金額 2015金額 總計數 總金額
A
B
C
D
E
F

雖然 資料量少 EXCEL 可以計算


我想知道R 是否也能用少量語法做到※ 引述《celestialgod (攸藍)》之銘言：: library(plyr): library(dplyr): set.seed(1): d <- data.frame(year = rep(2000:2002, each = 3),:   count = round(runif(9, 0, 20))): ddply(d, ""year"", summarise, tol = sum(count), count_year = n()): #   year tol count_year: # 1 2000  23          3: # 2 2001  40          3: # 3 2002  45          3: # 單純用plyr做: set.seed(1): d <- data.frame(year = rep(2000:2002, each = 3),:   count = round(runif(9, 0, 20))): d$ones = 1: ddply(d, ""year"", summarise, tol = sum(count), count_year = sum(ones)): # 用dplyr + magrittr: library(dplyr): library(magrittr): set.seed(1): d <- data.frame(year = rep(2000:2002, each = 3),:   count = round(runif(9, 0, 20))): d %>% group_by(year) %>% summarise(tol = sum(count), count_year = n()): ※ 引述《psinqoo (零度空間)》之銘言：: : [問題類型]::: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 請把以下不需要的部份刪除: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 請簡略描述你所要做的事情，或是這個程式的目的: : set.seed(1): : d<- data.frame(year = rep(2000:2002, each = 3),3+ count = round(runif(9, 0, 20))): : print(d): : 資料長這樣: : year count: : 1 2000 5: : 2 2000 7: : 3 2000 11: : 4 2001 18: : 5 2001 4: : 6 2001 18: : 7 2002 19: : 8 2002 13: : 9 2002 13: : ddply(d, ""year"", summarise, tol = sum(count)): : 會變這樣子: : year    tol: : 1 2000  23: : 2 2001  40: : 3 2002  45: : 但我想讓它變: : year    tol  計數: : 1 2000  23    3: : 2 2001  40    3: : 3 2002  45    3: : 3<-代表 2000 出現三次: : 該如何改寫?--







--","R_Language"
"2122","M.1435886301.A.C1E","helixc","問題","Re: 找出重複的資料組",2015-07-03 09:18:19,NA,NA,"抱歉講的不夠詳細...
假設我已經把birdtrip整合進來了，資料長這樣：

>bird
        date bird_id   bird_name num place reporter  birdtrip
 1 2001-01-01  201       sp1       3 金門   John      T0001
 2 2001-01-01  202       sp2       2 金門   John      T0001
 3 2001-01-01  205       sp3       8 金門   John      T0001
 4 2001-01-01 3507       sp4      10 金門   John      T0001
 5 2001-01-01 4104       sp5       1 金門   John      T0001
 6 2001-01-01 4105       sp6       1 金門   John      T0001
 7 2011-11-05 4105       sp6       2 馬祖   Mary      T0002
 8 2011-11-05 1003       sp7       5 馬祖   Mary      T0002
 9 2013-05-21  999       sp8      10 綠島   Terry     T0003
10 2013-05-21  831       sp9      11 綠島   Terry     T0003
..
51 2001-01-01  201       sp1       3 金門   John      T0001
52 2001-01-01  202       sp2       2 金門   John      T0001
53 2001-01-01  205       sp3       8 金門   John      T0001
54 2001-01-01 3507       sp4      10 金門   John      T0001
55 2001-01-01 4104       sp5       1 金門   John      T0001
56 2001-01-01 4105       sp6       1 金門   John      T0001

bird[1:6,]和bird[51:66,]的資料是一模一樣的，要怎麼抓出這種重複資料呢？



--","R_Language"
"2123","M.1435844892.A.947","helixc","問題","找出重複的資料組",2015-07-02 21:48:10,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次) + 入門(剛開始用R對語法不熟悉)

[問題敘述

資料格式如下，約有一百萬筆以上
有日期(date)、物種編號(bird_id)、物種名稱(bird_name)、數量(num
地點(place)與回報者(reporter)，資料叫做""bird""

每一個旅次會有好幾筆物種與數量的資料，
現在想要以旅次為單位進行分析。

資料大概長這樣：
>head(bird)
       date bird_id   bird_name num place reporter
1 2001-01-01  201       sp1       3 金門   John
2 2001-01-01  202       sp2       2 金門   John
3 2001-01-01  205       sp3       8 金門   John
4 2001-01-01 3507       sp4      10 金門   John
5 2001-01-01 4104       sp5       1 金門   John
6 2001-01-01 4105       sp6       1 金門   John


由於一個人一天只會去一個地方一次，
目前已經想到可以用date, place, reporter做組合篩選出同一批旅次的調查資料
程式碼如下：

>library('dplyr')
>birdtrip <- select(bird, date, place, reporter)
>birdtrip <- distinct(birdtrip, date, place, reporter)

理論上把旅次(birdtrip)編碼後就可以再對應到原來的資料當中，
但這部分還要想想怎麼寫，慢慢想應該想得出來XD


問題在於這些資料當初是在兩個不同介面蒐集的，
同一旅次的同一批資料有可能會被輸入兩次，
會出現在整個資料的不同地方，請問這要怎麼抓出來呢？


感謝各位

--","R_Language"
"2124","M.1435827664.A.77D","shihs","問題","文字探勘的stopwords",2015-07-02 17:01:02,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想要用R做text mining，但在stopwords這個步驟的時候出錯

Error in UseMethod(""tm_map"", x) :
  no applicable method for 'tm_map' applied to an object of class ""list""


[程式範例]:

#讀進一個檔案
data = readLines(""test/test.txt"")

#進行中文斷詞
insertWords(toTrad(iconv(c(""民進黨""), ""big5"", ""UTF-8""), rev=TRUE))#增加詞彙
segment.options(isNameRecognition = TRUE)#增加人名辨識


#將文章分詞
data.seg = segmentCN(data, nature=FALSE)

#stop words
myStopWords = toTrad(stopwordsCN())
data.seg= tm_map(data.seg, removeWords, myStopWords) #清除停用字符

----------->最後一步出現Error in UseMethod(""tm_map"", x) :
  no applicable method for 'tm_map' applied to an object of class ""list""



[環境敘述]:
R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8 x64 (build 9200)


--","R_Language"
"2125","M.1435813843.A.AF6","spiderway","情報","R Crawler101  課程報名",2015-07-02 13:10:40,NA,NA,"出處:Taiwan R User Group FB粉絲團

大家好，最近 Taiwan R User Group 的一些 Officer 們和木刻思股份有限公司，合作企
劃了一堂用 R 寫 Crawler 的課程
我們在這個週六，有辦一次課程說明會，歡迎還在猶豫要不要報名的大家，可以攜伴參加
說明會唷！http://agilearning.kktix.cc/events/rcrawler另外，由於木刻思先前也有辦過 R Crawler 和幫助 PyCon 辦 Crawler 課程的經驗。為
了服務他們之前教出來的蟲友們，讓大家都可以順利把自己寫的爬蟲包成套件給別人使用
。他門在週六也特別辦了蟲友小聚活動！




--","R_Language"
"2126","M.1435757688.A.FFA","celestialgod","問題","Re: plyr",2015-07-01 21:34:45,NA,NA,"library(plyr)
library(dplyr)
set.seed(1)
d <- data.frame(year = rep(2000:2002, each = 3),
  count = round(runif(9, 0, 20)))
ddply(d, ""year"", summarise, tol = sum(count), count_year = n())

#   year tol count_year
# 1 2000  23          3
# 2 2001  40          3
# 3 2002  45          3

# 單純用plyr做
set.seed(1)
d <- data.frame(year = rep(2000:2002, each = 3),
  count = round(runif(9, 0, 20)))
d$ones = 1
ddply(d, ""year"", summarise, tol = sum(count), count_year = sum(ones))

# 用dplyr + magrittr
library(dplyr)
library(magrittr)
set.seed(1)
d <- data.frame(year = rep(2000:2002, each = 3),
  count = round(runif(9, 0, 20)))
d %>% group_by(year) %>% summarise(tol = sum(count), count_year = n())※ 引述《psinqoo (零度空間)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: set.seed(1): d<- data.frame(year = rep(2000:2002, each = 3),3+ count = round(runif(9, 0, 20))): print(d): 資料長這樣: year count: 1 2000 5: 2 2000 7: 3 2000 11: 4 2001 18: 5 2001 4: 6 2001 18: 7 2002 19: 8 2002 13: 9 2002 13: ddply(d, ""year"", summarise, tol = sum(count)): 會變這樣子: year    tol: 1 2000  23: 2 2001  40: 3 2002  45: 但我想讓它變: year    tol  計數: 1 2000  23    3: 2 2001  40    3: 3 2002  45    3: 3<-代表 2000 出現三次: 該如何改寫?--","R_Language"
"2127","M.1435744176.A.867","psinqoo","問題","plyr ",2015-07-01 17:49:33,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的set.seed(1)
d<- data.frame(year = rep(2000:2002, each = 3),3+ count = round(runif(9, 0, 20)))
print(d)

資料長這樣

year count
1 2000 5
2 2000 7
3 2000 11
4 2001 18
5 2001 4
6 2001 18
7 2002 19
8 2002 13
9 2002 13



ddply(d, ""year"", summarise, tol = sum(count))

會變這樣子

year    tol
1 2000  23
2 2001  40
3 2002  45

但我想讓它變


year    tol  計數
1 2000  23    3
2 2001  40    3
3 2002  45    3

3<-代表 2000 出現三次


該如何改寫?







[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[環境敘述]:[關鍵字]:

plyr選擇性，也許未來有用--

--","R_Language"
"2128","M.1435739807.A.1EB","shihs","問題","text mining的inspect()",2015-07-01 16:36:44,NA,NA,"大家好，
我想要用R做文字探勘，
但我才剛開始就卡關了...

mycorpus = Corpus(DirSource(""test"", encoding=""UTF-8""), readerControl =
list(reader=readPlain, language = NA))

我先用了Corpus建立語料庫，再用DirSource讀進資料庫的純文字檔

然後我想要看我在語料庫的內容，所以我用了inspect(mycorpus)

但是，不知道為什麼只會顯示

<<VCorpus>>
Metadata:  corpus specific: 0, document level (indexed): 0
Content:  documents: 3

[[1]]
<<PlainTextDocument>>
Metadata:  7
Content:  chars: 718
Content:  chars: 703
Content:  chars: 820
Content:  chars: 85
Content:  chars: 984
Content:  chars: 785
Content:  chars: 449
Content:  chars: 0
...

完全沒有顯示我txt檔的內容，但我google了很久，還是無解...


還有，我用了insertWords()想要增加詞彙，
但有些詞好像會被切斷，是因為繁體字的關係嗎？



謝謝各位！









--","R_Language"
"2129","M.1435729221.A.F5A","psinqoo","問題","Re: 條件篩選資料",2015-07-01 13:40:16,NA,NA,"延伸問題

我的 一張table叫做 h 欄位其中一欄是是 產品

產品

10mm噴嘴
乾膜
11m噴嘴
微型噴嘴
一般噴嘴

我想挑出產品欄 含有噴嘴
h1[產品==""噴嘴"", ] <-跑不出來

但是h1[產品==""一般噴嘴"", ]<- 跑得出

我想知道 欄位內 包含 噴嘴二字 的寫法※ 引述《criky (立業成家)》之銘言：:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 基本學習: [程式範例]::: 我有參考此網頁的寫法，不過也出現錯誤: https://sites.google.com/site/rlearningsite/manage/manage4: 在coursera學習R，之前有自己找文件看，: 第一週的考試最後3題不太會，都是篩選資料後計算的: 資料如下: https://www.sendspace.com/file/vtlml8:   Ozone Solar.R Wind Temp Month Day: 1    41     190  7.4   67     5   1: 2    36     118  8.0   72     5   2: 3    12     149 12.6   74     5   3: 4    18     313 11.5   62     5   4: 5    NA      NA 14.3   56     5   5: 6    28      NA 14.9   66     5   6: 第17題是要選 Ozne>31和 Temp>90的資料，再做計算: 我打程式碼如下：: hw1.Q18<-hw1[Ozone>31, Temp>90]: 錯誤訊息如下：: Error in `[.data.frame`(hw1, Ozone > 31, Temp > 90) ::   object 'Temp' not found: 要怎麼修改才能篩選出我要的資料呢？:: [關鍵字]:: 篩選:: 選擇性，也許未來有用:

--







--","R_Language"
"2130","M.1435714356.A.158","andrew43","分享","PTT網頁版特定看板內文章列表Praiser",2015-07-01 09:32:33,NA,NA,"不是很熟 XML 處理，所以當做練習寫的。
請見https://gist.github.com/chenpanliao/789f7984003719ea4bcc爬蟲的對象是PTT網頁版的R_Language看板。

網頁字碼我沒管，因為我在 OS X 上就直接正常了。

我在最後面寫了幾行「本板排行榜」的code，有點有趣。

記得先裝 RCurl 和 XML 就可以直接貼上去跑。

看得明白的人，要套用在別的 PTT 看板應該只是小菜一碟。

放棄著作權（反正也沒幾行啦哈哈），請放心使用。

--","R_Language"
"2131","M.1435573311.A.911","psinqoo","問題","merge 含並三個",2015-06-29 18:21:48,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的合併三張表以上

merge 只能合併 兩張表有共同主KEY  但一次有三張以上該如何做

[程式範例]:一般都是這樣用merge(x1,x2, by=""name"")merge(x1,x2,x3,..., by=""name"") <-不行的 請勿使用[環境敘述]:[關鍵字]:

merge選擇性，也許未來有用--

--","R_Language"
"2132","M.1435221344.A.C2B","bardenthenry","問題","請益 Tree繪製樹狀圖的問題",2015-06-25 16:35:42,NA,NA,"[問題類型]:
程式諮詢：我想用R繪製tree的圖形，我的tree是回歸樹，
使用的function為最基本的tree，繪製圖形的function為
plot(tree1);text(tree1)。

我的模型有些解釋變數是類別行資料，(例如季節：春=1,夏=2,秋=3,冬=4)
我想要我的tree的node顯示為1,2,3,4 但是他一直給我顯示a b c d
有沒有辦法把英文調整成原本資料的數字？

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

--","R_Language"
"2133","M.1435162160.A.55A","psinqoo","問題","Re: 跑文字mining的錯誤訊息",2015-06-25 00:09:16,NA,NA,"library(tm)
library(tmcn)
library(Rwordseg)


x1 <-read.csv(file.choose(),header=T)#讀入資料
x2 <-Corpus(VectorSource(x1))#向量格式
x3 <- tm_map(x2, removePunctuation)#去除標點符號
x4 <- tm_map(x3, removeNumbers)#去除數字

x5 <- tm_map(x4, function(word) {
 gsub(""[A-Za-z0-9]"", """", word)
 })#清除大小寫英文與數字

 #inspect(d.corpus )#看<U+5185>容

x6 <- tm_map(x5,segmentCN, nature = TRUE)#斷詞

x7 <- Corpus(VectorSource(x6))


相同問題 執行到 x7

一樣出現
Error in UseMethod(""meta"", x) :
  no applicable method for 'meta' applied to an object of class ""character""

應該是升級 tm 包 後產生??

x7有誰知道這段如何改※ 引述《nh2 (nh)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: [環境敘述]::: mac Rstudio, R3.2:: corp = Corpus(DirSource(""./text/combine/"")): head(corp): corp = tm_map(corp, stripWhitespace): corp = tm_map(corp, removePunctuation): corp = tm_map(corp, removeNumbers): corp = tm_map(corp, function(word){:   gsub(""[A-Za-z0-9]"","""",word)}): corp = tm_map(corp, PlainTextDocument): corp = tm_map(corp, removeWords,stopwords(""english"")): # 中文 stop words: stopss = stopwordsCN(): corp = tm_map(corp,removeWords, stopss): # 中文斷詞: corp2 = tm_map(corp, content_transformer(segmentCN)): corp2 = tm_map(corp, content_transformer(segmentCN), returnType = 'tm'): corp2 <- tm_map(corp, content_transformer(segmentCN), nature = TRUE): corp2 <- tm_map(corp, function(sentence) {:   noun <- lapply(sentence, function(w) {:     w[names(w) == ""n""]:   }):   unlist(noun): }): corp3 = Corpus(VectorSource(corp2)): 跑到最後一行就出現錯誤訊息寫：: Error in UseMethod(""meta"", x) ::   沒有適用的方法可將 'meta' 套用到 ""character"" 類別的物件: 本來有想過是資料夾裡文件編碼的問題: 但是文件有中有英文，中文小弟用程式轉成UTF8 ~~: 另一個問題是不知道各位面對很多big5碼，有什麼方式比較快轉成utf8的？--

--","R_Language"
"2134","M.1434962050.A.AF4","ntme","問題","package無法成功安裝",2015-06-22 16:34:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
Q1:(已解決)
想要安裝 rvmbinary 這個package
但都無法安裝成功
ps參考：http://goo.gl/GE4ShQ已成功安裝“rvmbinary”



Q2:
成功安裝 package 後，裡面的example無法跑

錯誤訊息

example(rvmbinary)  #執行範例

錯誤在.C(""initial"", as.double(BASIS), as.double(y), as.integer(dim(BASIS)[1]),
  ""initial"" not available for .C() for package ""rvmbinary""




[程式範例]:
Q1:
library(devtools)
install_github(""cran/rvmbinary"")


Q2:
example(rvmbinary)  #執行範例


[環境敘述]:R version 3.1.1 (2014-07-10)Platform: x86_64-apple-darwin13.1.0 (64-bit)--114 > 112 bj4melody--","R_Language"
"2135","M.1434717601.A.CE1","cywhale","問題","shiny R能否使用bigmemory shared memory",2015-06-19 20:39:58,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)寫過一個shiny app

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一筆約5G資料，若想在shiny apps一開始load (只要load一次)，但即便用 bigmemory
read.big.matrix 也大概要等4, 5分鐘，系統就會等在那。

看到bigmemory package提供在不同R session中 可share相同的資料
(參考做法：http://www.slideshare.net/bytemining/r-hpcp15,16)
冒出個想法，是否可以在 shiny server.R被叫用時，我也事先啟動另一個在背景的R
session 做 read.big.matrix()(應該說是一直存在的persistent data..) ，
那server.R就可直接attach.big.matrx

抱歉我只有概念還不知道這部分該怎麼寫code，或是有其他更快更好的方法也歡迎建議~

====
第二個問題是這筆 5G的資料是解析度最細的 (long, lat,....)，打算resample後另存
coarse_data，呈圖時先用 coarse_data，等到使用者放大地圖後再繪上精細的資料。
我現在用leaflet呈圖大致像

leaflet(cities) %>% addTiles() %>% addPolygons(...) %>% setView(lng, lat, zoom)

我是否可以取得client端user滾動滑鼠放大縮小底圖時所見的視框 lng, lat範圍或
zoom參數，並忽略中間連續快速滾動的過程，在他停下動作後才依據這些參數重新計算
資料，更新addPolygons(...)中的內容？

兩個問題也請各位先進指教~ 謝謝


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：抱歉我只有概念還不知道這部分該怎麼寫code...


[關鍵字]:Shiny, bigmemory, leaflet


--","R_Language"
"2136","M.1434595518.A.A3E","Edster","問題","請問package中的Rd文件與範例",2015-06-18 10:45:10,NA,NA,"[問題類型]:
經驗諮詢

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)
從R 2.8 左右開始用，因為身邊的人最近也開始用R，想把自己寫的東西交給他們執行。

[問題敘述]:

我要製作package給同學用(未來可能考慮上傳cran)，已經把tar.gz做出來了。
在做說明文件時，覺得不夠就手，難道一個function就要按一次
RStudio: file/New file/R documentation/ function name

我有超過20個function是要丟進package中的，還有數十個還在簡化中。
查了幾個教學，時間都在2013年之前。
例如謝益輝寫的
<U+5F00><U+53D1>R程序包之忍者篇http://cos.name/2011/05/write-r-packages-like-a-ninja/或是媕Y提到的
roxygen2: Generating Rd fileshttp://cran.r-project.org/web/packages/roxygen2/vignettes/rd.html還有更早的
Parsing Rd leshttps://developer.r-project.org/parseRd.pdf想請問現在在RStudio下，製作Rd file比較快的方式是什麼呢？
還有，我接下來要把範例檔丟進去，也一併問一下，感謝。


[環境敘述]:
Using: Win 7; R 3.2.0; Rstudio 0.99up; ...

[關鍵字]:package generation--","R_Language"
"2137","M.1434518811.A.9F1","celestialgod","問題","Re: iris不同品種所占比例的圓餅圖",2015-06-17 13:26:48,NA,NA,"推文很難讀懂，我最後還是回文好了

這裡提供三個方法

## tapply + with
X = with(iris, tapply(Sepal.Length, Species, sum))
y = X / sum(X)

## plyr
library(plyr)
X = ddply(iris, .(Species), summarise, tsl = sum(Sepal.Length))
y = X$tsl / sum(X$tsl)

## dplyr
library(dplyr)
X = summarise(group_by(iris, Species), tsl = sum(Sepal.Length))
y = X$tsl / sum(X$tsl)※ 引述《yeuan (心要夠堅定)》之銘言：: [問題類型]:: 分類後計算比例繪製圓餅圖: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想計算iris三種品種的Sepal.Length各占多少比例  並製作圓餅圖: 因為知道的指令有限  一時想不出更好的  只有土法煉鋼的作法: 想請教有沒有更簡潔的寫法--","R_Language"
"2138","M.1434453447.A.401","swedrf0112","問題","Re: iris不同品種所占比例的圓餅圖",2015-06-16 19:17:25,NA,NA,"※ 引述《yeuan (心要夠堅定)》之銘言：: [問題類型]:: 分類後計算比例繪製圓餅圖: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 想計算iris三種品種的Sepal.Length各占多少比例  並製作圓餅圖: 因為知道的指令有限  一時想不出更好的  只有土法煉鋼的作法: 想請教有沒有更簡潔的寫法: [程式範例]:: X=iris[,c(1,5)]: A=subset(X,Species==""setosa""): B=subset(X,Species==""versicolor""): C=subset(X,Species==""virginica""): a=sum(A$Sepal.Length)/sum(X$Sepal.Length): b=sum(B$Sepal.Length)/sum(X$Sepal.Length): c=sum(C$Sepal.Length)/sum(X$Sepal.Length): y=c(a,b,c): pie(y,label=c(""setosa"",""versicolor"",""virginica""),density=100,col=2:4)只要滿足下列3個條件，你可以使用tapply函數來作

1. 要處理某一條資料向量       ( iris$Sepal.Length )
2. 這條資料向量有對應的factor ( iris$Species      )
3. 需要by factor進行函數處理  ( sum, mean, sd ... )

因此，若想依照iris$Species進行分組加總，可以寫成以下這樣 :> SumByFactor=tapply(X=iris$Sepal.Length,INDEX=iris$Species,FUN=sum)> SumByFactorsetosa versicolor  virginica
     250.3      296.8      329.4

再將 SumByFactor 除上 sum(iris$Sepal.Length) 即可得y> y=SumByFactor/sum(iris$Sepal.Length)> ysetosa versicolor  virginica
 0.2855676  0.3386195  0.3758129

另外apply類的函數，在後面的FUN都可以接自己定義的函數，例如以下進階版 :> y=tapply(X=iris$Sepal.Length,INDEX=iris$Species,FUN=function(z){+
+          sum(z) / sum(iris$Sepal.Length)
+ })> ysetosa versicolor  virginica
 0.2855676  0.3386195  0.3758129

值得注意的是，要想清楚會傳進去計算的z是什麼東西，
在這邊，傳進去當z的是你文章內的
A$Sepal.Length , B$Sepal.Length , C$Sepal.Length
這三條向量會各自傳進去進行運算，
所以回傳就會是這3個向量各自加總後除以sum(iris$Sepal.Length)的值。

apply類的函數都可以使用類似的模式思考，加油!



--","R_Language"
"2139","M.1434448371.A.44F","yeuan","問題","iris不同品種所占比例的圓餅圖",2015-06-16 17:52:48,NA,NA,"[問題類型]:

分類後計算比例繪製圓餅圖

[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

想計算iris三種品種的Sepal.Length各占多少比例  並製作圓餅圖

因為知道的指令有限  一時想不出更好的  只有土法煉鋼的作法

想請教有沒有更簡潔的寫法


[程式範例]:

X=iris[,c(1,5)]
A=subset(X,Species==""setosa"")
B=subset(X,Species==""versicolor"")
C=subset(X,Species==""virginica"")
a=sum(A$Sepal.Length)/sum(X$Sepal.Length)
b=sum(B$Sepal.Length)/sum(X$Sepal.Length)
c=sum(C$Sepal.Length)/sum(X$Sepal.Length)
y=c(a,b,c)
pie(y,label=c(""setosa"",""versicolor"",""virginica""),density=100,col=2:4)



--","R_Language"
"2140","M.1434383677.A.970","alasa15","問題","決定落在第幾個區間",2015-06-15 23:54:32,NA,NA,"我現在有一個單調的向量  例如c(3,7,13,28,95,104)

然後現在有一個數字 例如22

這個數字落在這個向量的第三跟第四個數字之間

希望有一個函數可以回傳3給我

雖然可以自己用迴圈寫  但我想問一下有沒有內建函數達成這個效果

感謝

--","R_Language"
"2141","M.1434382857.A.161","ming790925","問題","R中數值積分函數誤差項來源",2015-06-15 23:40:50,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好！

有一個關於數值分析的問題想不通，想請教一下。

使用數值積分的時候，

如果我們知道真實積分值的時候，

可以計算 absolute error=| true answer - approximation |

來看實際上誤差遞減程度與理論是否相同。

但，那都是我們知道 true answer 時候才能計算，

因此，在我們不知道 true answer 時候，應該就不會有  absolute error 出現才對。

但是我最近使用 R 語言中的積分函數 integrate( )

他都有參數是有關誤差的容忍
rel.tol : relative accuracy requested.
abs.tol : absolute accuracy requested.
(https://stat.ethz.ch/R-manual/R-devel/library/stats/html/integrate.html)(http://www.hep.by/gnu/r-patched/r-exts/R-exts_143.html#SEC143)甚至 output 也會給我
abs.error : estimate of the modulus of the absolute error.

所以我有點想不通，如果他不知道真實函數，他要如何才能計算出absolute error呢？


麻煩各位了！

[程式範例]:> integrate(dnorm, -1.96, 1.96)0.9500042 with absolute error < 1e-11



[環境敘述]:> sessionInfo()R version 3.1.0 (2014-04-10)Platform: x86_64-w64-mmw32/x64 (64-bit)locale:[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C[5] LC_TIME=English_United States.1252attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseloaded via a namespace (and not attached):[1] tools_3.1.0[關鍵字]:

數值積分
絕對誤差

--","R_Language"
"2142","M.1434209705.A.85D","andrew43","討論","R function 中的三點引數 ""...""",2015-06-13 23:35:02,NA,NA,"在 R 語言中的 function 可以接受「...」的引數（以下稱三點引數）。
我目前對三點引數的作用有二種理解，以下分別討論。

1. 提供引數給其它 function 用。

三點引數可讓我們很方便地把不確定的引數丟給其它 function 使用，請見下例。

paired.t.test <- function(x, y, ...){
  t.test(x, y, paired = T, ...)
}
a <- c(1,2,3); b <- c(2,2,4)
paired.t.test(x = a, y = b)                            # line 1
paired.t.test(x = a, y = b, mu = 2)                    # line 2
paired.t.test(x = a, y = b, mu = 2, alternative = ""g"") # line 3

可以發現，paired.t.test 定義了三點引數，
並再把三點引數再引入 t.test() 中。
因此，line 1 中沒使用三點引數，
或是 line 2 中使用三點引數（mu = 2），
或是 line 3 中的三點引數（mu = 2 及 alternative = ""g""），
都可以成功運作。

也可以發現，三點引數特別之處是引用時「可有可無」，
否則 line 1 應該失敗。

2. 用於未指定個數之引數（們）

如果不確定要丟入幾個引數時，三點引數也有特別的用處，請見下例。

listSum <- function(...) {
  input <- list(...)
  output <- lapply(input, sum)
  return(output)
}
listSum(a = c(2,3))                         # line 4
listSum(a = 1, b = 2)                       # line 5
listSum(a = c(1,2,3), b = 2, c(2,3,4,5,6))  # line 6

這個例子中，即使引數 a 和 b 都沒被定義在 listSum() 中，
也可以得到結果。
當然，我是把所有引數都放在同一個 list 中才達成的。

============= 分隔線 ==============

我不知道我舉出的這二種作用是不是很完整，我也還沒完全摸清三點引數。
歡迎各位指教、補充。


--","R_Language"
"2143","M.1434189382.A.DA7","andrew43","問題","Re: 有關R資訊輸出超過頁面時...",2015-06-13 17:56:19,NA,NA,"你需要 capture.output()。以下舉一個例子。

x <- rnorm(1000000)
x          # 很長很長看不完
print(x)   # 意義同上
str <- capture.output(print(x)) # 把螢幕 output 轉成字串 str
write(str, file=""test.txt"")     # 把 str 存成純文字檔 test.txt

之後就用純文字編輯器開啟 test.txt 即可。※ 引述《sinclairJ (Jun)》之銘言：: 如題  小弟跑了一個分析後: 想看該分析模型的一些資訊: 因為資訊太多了 R好像會自動省略前面的部分(如下圖頁面頂端): 但我感興趣的資訊在前面阿~~~: 各位先進有什麼好的方法嗎?: 有想過print可能可以一次輸出幾列 但好像不行...: http://imgur.com/ztFVlRn 頁面頂端圖片: http://imgur.com/aO0v1uz 面底端圖片: 感謝各位先進指教~--","R_Language"
"2144","M.1434188134.A.B64","thephone","問題","fb fan page的文章讀取",2015-06-13 17:35:31,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手

[問題敘述]:

使用Rfacebook packages 的getPage讀取fb page顯示錯誤



[程式範例]:
>library(Rfacebook)
>fb_oauth = fbOAuth(app_id=""144232134607XXXX"",>                   app_secret=""35c927a41b5e31aa3b6bXXXXXX"")>save(fb_oauth, file=""d:/fb_oauth"")
>load(""d:/fb_oauth"")
>User <- getUsers(""118250504903757"", token=fb_oauth, private_info = TRUE)
>page <- getPage(page=""118250504903757"", token=fb_oauth, feed=TRUE)
Error in callAPI(url = url, token = token) :
  An access token is required to request this resource.




[環境敘述]:
R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1


感謝



--","R_Language"
"2145","M.1433998170.A.218","celestialgod","問題","Re: 多筆資料運算Pearson相關系數",2015-06-11 12:49:26,NA,NA,"2018/06/14更新，全面修改程式，增加一些範例，url：https://pastebin.com/ssqrKBcGlibrary(magrittr)
library(data.table)
library(reshape2)
library(tidyr)
library(dplyr)## data generationN = 5e5
dat = data.table(paste(""sample"", 1:N), matrix(rnorm(N*60),, 60))
dat %<>% setnames(c(""Name"", paste0(rep(c(""X"", ""Y""),,, 30), rep(1:30,2)))) %>%
  tbl_dt(FALSE)## for loopst = proc.time()
corCoef = vector('numeric', N)
for (i in 1:N){
  corCoef[i] = cor(as.numeric(dat[i, 2:31, with=FALSE]),
    as.numeric(dat[i, 32:61, with=FALSE]))
}
output = data.table(Name = dat$Name, cor = corCoef)
proc.time() - st#    user  system elapsed# 1345.32    0.80 1351.27## meltst = proc.time()
dat2 = melt(dat, id = 1) %>% mutate(G = as.integer(grepl(""X"", variable)))
output2 = dat2 %>% group_by(Name) %>%
  summarise(cor = cor(value[G==1], value[G==0]))
proc.time() - st#    user  system elapsed#   30.81    0.33   31.26all.equal(output$cor, output2$cor)# [1] TRUE用對方法會快上很多！兩個方法大概差了43倍，學會把資料做適當的變換，

並加以分組，用分組的方式去計算會比較快速而有效率！

這部分也包含你資料一開始整理的方式不是很恰當。


版友提供：

library(matrixStats)
dat3 = as.matrix(dat[,2:61, with=FALSE])

st = proc.time()
m_X <- dat3[,1:30]
m_Y <- dat3[,31:60]
mu_X <- rowMeans(m_X)
mu_Y <- rowMeans(m_Y)
sigma_X <- rowSds(m_X)
sigma_Y <- rowSds(m_Y)
myCorr <- rowSums((m_X-mu_X)*(m_Y-mu_Y))/((sigma_X*sigma_Y)*(30-1))
proc.time() - st#   user  system elapsed#   0.50    0.06    0.56all.equal(output2$cor, myCorr)# [1] TRUE## Rcpplibrary(Rcpp)
library(RcppArmadillo)
sourceCpp(code = '
// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
using namespace Rcpp;
using namespace arma;
// [[Rcpp::export]]

NumericVector fastCor(NumericMatrix Xr, NumericMatrix Yr) {
  uword k = Xr.ncol();
  mat X(Xr.begin(), Xr.nrow(), k, false);
  mat Y(Yr.begin(), Xr.nrow(), k, false);
  colvec output(Xr.nrow());

  X.each_col() -= mean(X, 1);
  X.each_col() /= stddev(X, 0, 1);
  Y.each_col() -= mean(Y, 1);
  Y.each_col() /= stddev(Y, 0, 1);
  output = sum(X % Y, 1) / ((double) k - 1);
  return wrap(output);
}')

st = proc.time()
output3 = fastCor(dat3[,1:30], dat3[,31:60])
proc.time() - st#   user  system elapsed#   0.44    0.01    0.45all.equal(output2$cor, as.vector(output3))# [1] TRUE※ 引述《Shadowy (+ing》之銘言：: 各位先進好：:   我有50萬筆資料，每一筆資料有30組(X,Y)的數據，:   想要針對每一筆的X,Y運算Pearson相關係數，:   資料格式，如下：:   Name X1 X2 ... X30 Y1 Y2 ... Y30:   .:   .:   .:   .:   共50萬筆:   欲輸出格式為：:   (Name) (Pearson's cor):   因為沒有太多的程式撰寫經驗，:   目前的想法是：:   先抓取每一列1~30個值為X向量，31~60個值為Y向量，:   進行cor(X, Y, use=""complete"", method=""pearson"")運算Pearson相關係數，:   再利用迴圈運算50萬筆資料。:   請問先進，我應該如何開始撰寫這樣的語法呢？:   還是我應該改變匯入資料的格式呢？:   再麻煩各位先進指教！:   謝謝大家~--","R_Language"
"2146","M.1433996493.A.EEB","andrew43","問題","Re: 多筆資料運算Pearson相關系數",2015-06-11 12:21:29,NA,NA,"你的想法是可行的。不過我用 apply 改寫一下，但意思一樣。

# 以下設計一個 data frame 叫 dat，欄數和列數和你的不同，但結構應該相似。
name <- c(""a"", ""b"", ""c"")
mat <- as.data.frame(matrix(rnorm(24), 3))
dat <- cbind(name, mat)

# 利用 apply 逐列算出相關係數，存成 cor.pearson
cor.pearson <- apply(dat[, -1], 1, function(x){
  cor(x[1:4], x[5:8]) # 1:4 5:8 你要改成1:30 31:60
                      #（如果 X 和 Y 排列像你的例子一模一樣的話）
})

# 建立一個 data frame 方便讀取結果
data.frame(name = dat$name, cor.pearson)※ 引述《Shadowy (+ing)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]::: 各位先進好：:   我有50萬筆資料，每一筆資料有30組(X,Y)的數據，:   想要針對每一筆的X,Y運算Pearson相關係數，:   資料格式，如下：:   Name X1 X2 ... X30 Y1 Y2 ... Y30:   .:   .:   .:   .:   共50萬筆:   欲輸出格式為：:   (Name) (Pearson's cor):   因為沒有太多的程式撰寫經驗，:   目前的想法是：:   先抓取每一列1~30個值為X向量，31~60個值為Y向量，:   進行cor(X, Y, use=""complete"", method=""pearson"")運算Pearson相關係數，:   再利用迴圈運算50萬筆資料。:   請問先進，我應該如何開始撰寫這樣的語法呢？:   還是我應該改變匯入資料的格式呢？:   再麻煩各位先進指教！:   謝謝大家~: [環境敘述]::: R version 3.2.0 (2015-04-16): Platform: i386-w64-mingw32/i386 (32-bit):: [關鍵字]::: Peearson相關係數:

--","R_Language"
"2147","M.1433990237.A.474","Shadowy","問題","多筆資料運算Pearson相關系數",2015-06-11 10:37:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]:各位先進好：我有50萬筆資料，每一筆資料有30組(X,Y)的數據，想要針對每一筆的X,Y運算Pearson相關係數，資料格式，如下：Name X1 X2 ... X30 Y1 Y2 ... Y30....共50萬筆欲輸出格式為：(Name) (Pearson's cor)因為沒有太多的程式撰寫經驗，目前的想法是：先抓取每一列1~30個值為X向量，31~60個值為Y向量，進行cor(X, Y, use=""complete"", method=""pearson"")運算Pearson相關係數，再利用迴圈運算50萬筆資料。請問先進，我應該如何開始撰寫這樣的語法呢？還是我應該改變匯入資料的格式呢？再麻煩各位先進指教！謝謝大家~[環境敘述]:R version 3.2.0 (2015-04-16)Platform: i386-w64-mingw32/i386 (32-bit)[關鍵字]:Peearson相關係數--","R_Language"
"2148","M.1433860123.A.F21","nelsonlibra","問題","data.frame以row counts切割的問題",2015-06-09 22:28:41,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

收案資料約每個月需要做一次clean data的工作：
變項共有15個（含一項中文字串資料）。
個案數每個月約1000-3000不等。

程式功能需求
由於整理完的資料需要上傳特定系統,但系統每次只能吃1000筆個案數，
因此須將清過的資料每1000筆切割到一個獨立的CSV檔（含欄位名稱），
並命名第x個切割出的CSV檔為“G[x]_系統日期”的（西元年）格式。

特殊內容
但因為每個月的個案數不一定,需要程式能夠自行判斷即使最後一份
切割出的個案數列數不滿1000筆,仍產出一個CSV檔。

[程式範例]:

目前已經完成檔案命名的產出設定：

CSVCoNaming <-if (nrow(G_Part_Co)%/%1000<= 0) {
    paste(""G_"",format(Sys.Date(),""%Y%m%d""),sep="""")
} else {
    paste(""G"",(1:(nrow(G_Part_Co)%/%1000+1)),""_"",
    format(Sys.Date(),""%Y%m%d""),sep="""")
}

CSVFoNaming <-if ((nrow(G_Part_Fo)%/%1000)<= 0) {
    paste(""G_follow_"",format(Sys.Date(),""%Y%m%d""),sep="""")
} else {
    paste(""G"",(1:(nrow(G_Part_Fo)%/%1000+1)),""follow_"",
    format(Sys.Date(),""%Y%m%d""),sep="""")
}

剩下切割資料並命名CSV檔的功能寫不出來...

目前是想用split或subset切資料,再把切出來的用assign給已產出的檔名。
但由於需要動態查詢該月的個案數來寫功能,這部分需要請大家幫幫忙！


[關鍵字]:切割資料by資料列數

小弟剛從SAS跳槽,對Ｒ的語法還掌握不夠,麻煩各位大大提供解套方法！
先謝謝大家！！

--","R_Language"
"2149","M.1433755174.A.14F","asdwezx25","問題","R 匯入xlsx (已解決)",2015-06-08 17:19:30,NA,NA,"[問題類型]:

經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

由於小弟有許多xlsx的檔案想用R匯入使用

所以有使用了""xlsx""的套件

但目前只試了一個檔案卻發生下面的結果

輸入：

 read.xlsx(file = myfile.paste1 , 1 , header = FALSE)

結果顯示：

Error in .jcall(""RJavaTools"", ""Ljava/lang/Object;"", ""invokeMethod"", cl,  :
  java.lang.OutOfMemoryError: Java heap space

所以想問各位高手
1. 上面的結果該如何解決?
2. 前輩們都如何用R匯入xlsx??

[環境敘述]:

R version 3.1.3 (2015-03-09)
Platform: i386-w64-mingw32/i386 (32-bit)
Running under: Windows XP (build 2600) Service Pack 3

locale:
[1] LC_COLLATE=Chinese_Taiwan.950  LC_CTYPE=Chinese_Taiwan.950    LC_MONETARY=Chinese_Taiwan.950 LC_NUMERIC=C
[5] LC_TIME=Chinese_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xlsx_0.5.7     xlsxjars_0.6.1 rJava_0.9-6

loaded via a namespace (and not attached):
[1] tools_3.1.3


[關鍵字]:

 匯入 xlsx

--","R_Language"
"2150","M.1433419549.A.94B","andrew43","心得","R 的 contrasts 與 dummy variable",2015-06-04 20:05:46,NA,NA,"按板友要求，本文介紹一下 R 的 contrasts() 與 dummy variable 相關話題。
要看得完全懂可能要學過一點線性代數或迴歸分析。

====== contrasts() 和 relevel() 在 Dummy Coding 的應用 ======

在 R 中，一旦建立一個 factor，例如
x <- as.factor(c(""a"",""a"",""b"",""b"",""c"",""c""))
則 R 會自動賦予該 factor 一組 coding。
預設賦予的方法就是常見的 Dummy Coding，也就是一個基準組和 k-1 個差異對比，
而基準組是哪個組則按字元碼先後順序決定。

我們可以利用 contrasts() 來看看 x 這個 factor 目前的 dummy variable coding。
例如

contrasts(x)

  b c
a 0 0
b 1 0
c 0 1

可以看到基準組是 a，第一個 dummy variable 是 b-a，第二個是 c-a。

在 Dummy Coding 的世界裡，你可以利用 relevel() 更換基準組，例如

k <- relevel(x, ""b"")
contrasts(k)

  a c
b 0 0
a 1 0
c 0 1

可以看到基準組換成 b，第一個 dummy variable 是 a-b，第二個是 c-b。

====== 選用其它 coding ======

除了 Dummy Coding，你也可以利用 contrasts() 指定你要的其它 coding。
指定的過程中，你可以自己輸入，也可以套用 R 中存在的幾種 coding。
會碰到這種情況常常是因為
        你不想用 Dummy Contrast
        需要用正交對比
        只想用自定對比
等等。

例如
w <- x
contrasts(w) <- matrix(c(1,0,-1,0,1,-1), nrow=3)
q <- x
contrasts(q) <- contr.sum

w 和 q 的結果是完全一致的，只是 w 是自行指定，而 q 是直接用 contr.sum。
請自行 help(contr.sum) 並查看http://www.ats.ucla.edu/stat/r/library/contrast_coding.htm====== ""contrasts"" 在 R 的意思並不是 contrasts ======

如果您學過一點迴歸分析，會知道統計學中的 contrasts 是從幾組式子來的。
但是！但是！但是！
在統計學中或 SAS 裡，contrasts 是指這幾組式子的係數，
但在 R 中的 contrasts() 看到的並不是係數，而是實際上算出應代入迴歸式的值。
請看http://sites.stat.psu.edu/~jls/stat512/lectures/ContrastsInR.pdf不過，因為用係數來表示 contrast 還是比較實用也容易理解。
package gmodels 中的 make.contrasts() 是解決方案，
請有需要的朋友自行了解。


--","R_Language"
"2151","M.1433405138.A.E44","markbaseball","問題","複迴歸加入虛擬變數",2015-06-04 16:05:35,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:各位大大，請教一下該如何在迴歸中加入虛擬變數呢?我的資料長這樣company       y       x1     x2a           3       1       2b           3.5     1       3我看了網路上的方法> table(company)> co1<-ifelse(company==a,1,0)但是卻出現 錯誤在ifelse(company == a, 1, 0) : 找不到物件 'a'請問我的錯誤在哪?  謝謝各位--","R_Language"
"2152","M.1433388252.A.B15","ardodo","問題","Re: ggplot2請教",2015-06-04 11:24:10,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：※ 引述《ardodo (米蟲)》之銘言：: 更新一下自己的問題，我想要在ggplot上按照y值總合大小排序我的x類別，以下code: #Data: hp=read.csv(textConnection(: ""class,year,amount: a,99,100: a,100,200: a,101,150: b,100,50: b,101,100: c,102,70: c,102,80: c,103,90: c,104,50: d,102,90"")): hp$year=as.factor(hp$year)推文推太快，複製貼上錯，造成誤會，對不起

levels(hp$class) = levels(hp$class)[
  order(tapply(hp$amount, hp$class, sum),decreasing = TRUE)]: #Plotting: p=ggplot(data=hp): p+geom_bar(binwidth=0.5,stat=""identity"")+  #: aes(x=class,y=amount,label=amount,fill=year)+theme()--","R_Language"
"2153","M.1433385843.A.C25","celestialgod","問題","Re: ggplot2請教",2015-06-04 10:44:00,NA,NA,"※ 引述《ardodo (米蟲)》之銘言：: 更新一下自己的問題，我想要在ggplot上按照y值總合大小排序我的x類別，以下code: #Data: hp=read.csv(textConnection(: ""class,year,amount: a,99,100: a,100,200: a,101,150: b,100,50: b,101,100: c,102,70: c,102,80: c,103,90: c,104,50: d,102,90"")): hp$year=as.factor(hp$year)推文推太快，複製貼上錯，造成誤會，對不起

levels(hp$class) = levels(hp$class)[
  order(tapply(hp$amount, hp$class, sum),decreasing = TRUE)]: #Plotting: p=ggplot(data=hp): p+geom_bar(binwidth=0.5,stat=""identity"")+  #: aes(x=class,y=amount,label=amount,fill=year)+theme()--","R_Language"
"2154","M.1433384118.A.446","ardodo","問題","Re: ggplot2請教",2015-06-04 10:15:15,NA,NA,"更新一下自己的問題，我想要在ggplot上按照y值總合大小排序我的x類別，以下code

#Data
hp=read.csv(textConnection(
""class,year,amount
a,99,100
a,100,200
a,101,150
b,100,50
b,101,100
c,102,70
c,102,80
c,103,90
c,104,50
d,102,90""))
hp$year=as.factor(hp$year)#Plottingp=ggplot(data=hp)
p+geom_bar(binwidth=0.5,stat=""identity"")+  #
aes(x=reorder(class,amount),y=amount,label=amount,fill=year)+theme()
#↑這邊新加入reorder試圖將amount依照class重排

結果：http://imgur.com/DYsMqwl#↑發現c,b,d有按照sum(amount)降冪排列，但是a沒有

想請問各位版友有無解決辦法呢？懇請賜教

--","R_Language"
"2155","M.1433308020.A.CD8","celestialgod","分享","output JSON by row",2015-06-03 13:06:57,NA,NA,"rjson是一個很方便得套件去做json的input/output

但是toJSON沒有想像中方便

無法將data.frame output by row

並且給予正確的type，numerice也是給string...

這裡分享三個方法去輸出，第三個方法是會根據不同type做輸出http://pastebin.com/xBaws3ht第一個方法是參考張丹的網站:http://blog.fens.me/r-json-rjson/[關鍵字]: json by row

[出處]:

[重點摘要]:

--","R_Language"
"2156","M.1433265541.A.194","ardodo","問題","ggplot2請教",2015-06-03 01:18:59,NA,NA,"各位板友好，我的問題是，如何將ggplot繪製的堆疊長條圖，以堆疊的y值總合排序

附圖說明：http://imgur.com/bwv8fRn我想要把這張圖的x類別以y總合降冪排列，也就是變成a,c,b,d的順序

請問該怎麼做呢？

以下為我畫出此圖的指令，求解
------------------------------------

##資料準備
hp=read.csv(textConnection(
""class,year,amount
a,99,100
a,100,200
a,101,150
b,100,50
b,101,100
c,102,70
c,102,80
c,103,90
c,104,50
d,102,90""))
hp$year=as.factor(hp$year)

##運算資料
p=ggplot(data=hp)
p+geom_bar(binwidth=0.5,stat=""identity"")+
aes(x=class,y=amount,label=amount,fill=year)+
theme()

--","R_Language"
"2157","M.1433256669.A.402","swedrf0112","問題","shiny deploy 中文問題",2015-06-02 22:51:06,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:

   在 RStudio中直接Run App 可以正常顯示中文http://miupix.cc/pm-6FRMG9但按publish deploy去shinyapps.io後，會出現http://miupix.cc/pm-HJYUTX已經試過在RStudio內Save with Encoding將ui.R server.R轉成UTF-8

   以及將兩個檔案用Notepad++ 轉成UTF-8(BOM)再上傳都無法順利解決囧

   麻煩各位了!!謝謝!!

[程式範例]:

## ui.R
library(shiny)

shinyUI(
  fluidPage(

   radioButtons(""Buttons"",""qq"",list(""b1""=""qqq"",""b2""=""aaa"",""b3""=""zzz""))
  ,mainPanel(
      plotOutput(""vvv"")
      ,dataTableOutput(""test"")
    )


  )
)

## server.R

library(shiny)

shinyServer(
  function(input,output){

    output$vvv=renderPlot({
      if(is.null(input$Buttons)==FALSE){
        switch(input$Buttons
               ,qqq={plot(rnorm(100,0,1),axes=F,main=""哈囉你好"")
                     axis(1)}
               ,aaa=plot(rchisq(100,1))
               ,zzz=plot(x=1,y=1))
      }
    })

    output$test=renderDataTable({
      if(is.null(input$Buttons)==FALSE){
        switch(input$Buttons
               ,qqq=as.data.frame(c(""aa""))
               ,aaa=as.data.frame(c(""bb"")))
      }
    })


  }
)


[環境敘述]:

R version 3.1.1 (2014-07-10)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950 LC_NUMERIC=C

[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] shiny_0.12.0

loaded via a namespace (and not attached):
 [1] bitops_1.0-6      digest_0.6.8      htmltools_0.2.6   httpuv_1.3.2
 jsonlite_0.9.16
 [6] mime_0.3          R6_2.0.1          Rcpp_0.11.6       RCurl_1.95-4.6
 RJSONIO_1.3-0
[11] rstudio_0.98.1017 rstudioapi_0.3.1  shinyapps_0.3.64  tools_3.1.1
xtable_1.7-4

[關鍵字]: shiny deploy 中文

--","R_Language"
"2158","M.1433153553.A.0E5","celestialgod","問題","Re: t檢定之t值相同p值不同問題請益",2015-06-01 18:12:29,NA,NA,"※ 引述《lapavoni (lapavoni)》之銘言：: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 經驗諮詢(我覺得我的t檢定是不是出問題了...): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 目前在處理一份問卷分析，受試者目前依性別分為兩個Group(兩組人數不同)，: 題目作答類型為五點計分，其中有兩題的t檢定跑出來的結果t值都是-2.0，但: 是兩個p值差很多，一個有顯著，另一個則沒有，還有它df的算法我也不太懂...: [程式範例]:: ======================================================================: 第八題的兩組作答資料為：: > gb8:   [1] 4 3 2 2 4 3 4 3 3 2 3 4 2 1 4 2 3 4 2 3 1 2 3 3 4 3 2 2 2 3 2 2 3 3 22:  [70] 3 3 2 3 3 3 4 2 3 4 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 4 2 3 3 3 44: [139] 4 2 2 3 2 1 2 3 2 3 2 4 2 2 3 3 2 3 3 3 4 2 4 1 3 3 3 1 3 3 3 3 2 3 23: [208] 3 3 2 2 2 1 1 4 2 3 4 2 3 2 3 4 3 2 3 3 4 3 2 3 3 3 4 2 2 3 2 3 3 3 44: [277] 3 2 3 3 3 3 3 3 3 3 4 2 2 3 3 4 3 3 3 3 4 3 3 2 4 3 2 2 2 3 3 4 3 4 32: [346] 3 3 3 3 2 4 4 3 3 3 4 3 3 3 3 3 2 3 3 1 3 3 3 3 3 3 3 3 2 2 3 4 3 2 34: [415] 3 4 4 4 3 3 3 3 3 2 4 3 4 3 3 3 4 4 4 3 3 3 2 3 3 3 2: > sb8:  [1] 3 2 2 3 3 3 3 3 3 3 3 3 2 3 4 3 4 2 3 3 4 4 2 3 4 3 3 3 2 2 2 3 3 4 2 43: [70] 3 3 2 3 3 3 2 3 3 3 4 3 3 3: t檢定的結果為(兩組變異數有顯著差異): > t.test(gb8,sb8,var.equal = FALSE):         Welch Two Sample t-test: data:  gb8 and sb8: t = -2, df = 100, p-value = 0.1: alternative hypothesis: true difference in means is not equal to 0: 95 percent confidence interval::  -0.2691  0.0259: sample estimates:: mean of x mean of y:      2.90      3.02我不知道你哪堨X問題，我把你資料下載下來之後，結果是這下面這樣

一個是-1.6，另外一個是-2.3....

嚴重懷疑變成四捨五入了...

gb8 = as.numeric(strsplit(
""4 3 2 2 4 3 4 3 3 2 3 4 2 1 4 2 3 4 2 3 1 2 3 3 4 3 2 2 2 3 2 2 3 3 2 2
 1 3 4 4 3 3 4 3 4 3 3 2 3 4 3 3 2 4 4 4 3 3 3 4 2 4 3 2 2 2 3 2 3 3 3 2
 3 3 3 4 2 3 4 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 4 2 3 3 3 4 4
 4 3 2 3 3 3 3 3 2 3 3 3 3 3 3 3 3 2 3 3 3 1 4 2 3 3 3 3 3 3 2 2 3
 4 2 2 3 2 1 2 3 2 3 2 4 2 2 3 3 2 3 3 3 4 2 4 1 3 3 3 1 3 3 3 3 2 3 2 3
 3 4 3 3 4 3 3 3 3 4 3 2 3 3 3 3 2 4 3 3 3 3 3 3 2 3 3 3 3 2 2 3 4
 3 3 2 2 2 1 1 4 2 3 4 2 3 2 3 4 3 2 3 3 4 3 2 3 3 3 4 2 2 3 2 3 3 3 4 4
 3 3 3 3 1 2 3 3 3 3 4 4 3 3 3 3 3 3 3 4 2 3 3 3 4 3 2 3 3 3 3 3 3
 3 2 3 3 3 3 3 3 3 3 4 2 2 3 3 4 3 3 3 3 4 3 3 2 4 3 2 2 2 3 3 4 3 4 3 2
 1 1 3 3 3 1 3 3 3 3 2 3 3 3 2 3 4 4 4 4 3 3 4 4 3 2 1 3 3 4 3 3 3
 3 3 3 3 2 4 4 3 3 3 4 3 3 3 3 3 2 3 3 1 3 3 3 3 3 3 3 3 2 2 3 4 3 2 3 4
 3 3 3 2 3 3 3 3 3 3 3 3 2 3 4 3 4 2 4 4 3 2 3 3 3 3 2 3 2 2 4 2 3
 3 4 4 4 3 3 3 3 3 2 4 3 4 3 3 3 4 4 4 3 3 3 2 3 3 3 2"", ""\\s+"")[[1]])

sb8 = as.numeric(strsplit(
""3 2 2 3 3 3 3 3 3 3 3 3 2 3 4 3 4 2 3 3 4 4 2 3 4 3 3 3 2 2 2 3 3 4 2 4 3
 3 3 3 3 2 3 4 3 3 4 4 4 3 3 3 2 3 4 3 3 4 3 4 3 4 3 2 3 3 3 3 3
 3 3 2 3 3 3 2 3 3 3 4 3 3 3"", ""\\s+"")[[1]])
t.test(gb8,sb8,var.equal = FALSE)

        Welch Two Sample t-test

data:  gb8 and sb8
t = -1.6309, df = 129.19, p-value = 0.1053
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.26912095  0.02591684
sample estimates:
mean of x mean of y
 2.902494  3.024096: =========================================================================: 第9題的兩組資料為: > gb9:   [1] 4 3 2 2 3 3 4 3 3 2 3 4 2 1 3 2 4 4 2 3 2 3 3 3 3 2 3 2 2 3 2 3 3 3 21:  [70] 3 3 2 3 2 3 4 2 3 3 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 3 3 3 3 2 44: [139] 4 2 2 3 2 2 2 2 3 4 3 4 2 2 3 3 2 3 3 3 4 2 4 1 3 2 2 2 3 3 3 2 2 3 23: [208] 3 3 2 2 2 3 2 3 2 3 3 2 3 2 3 3 3 3 3 3 4 3 2 3 3 3 4 3 3 2 2 3 3 3 44: [277] 3 2 2 3 3 3 3 3 3 3 3 3 2 3 3 4 3 3 2 3 4 3 2 3 4 3 2 3 2 3 3 4 3 3 32: [346] 3 3 3 3 2 3 4 3 3 4 2 3 3 3 3 3 2 3 3 1 2 3 2 3 3 3 3 3 2 2 3 4 3 3 33: [415] 3 4 3 4 3 3 3 3 3 3 3 3 4 3 3 3 4 4 3 3 3 3 2 3 3 3 2: > sb9:  [1] 3 2 3 2 3 3 3 3 4 3 2 3 3 3 4 3 4 2 3 3 4 4 2 3 3 3 4 3 2 3 3 3 3 4 3 43: [70] 3 3 3 3 3 3 2 3 3 3 4 3 3 3: t檢定結果為: > t.test(gb9,sb9,var.equal = FALSE):         Welch Two Sample t-test: data:  gb9 and sb9: t = -2, df = 100, p-value = 0.02: alternative hypothesis: true difference in means is not equal to 0: 95 percent confidence interval::  -0.3043 -0.0265: sample estimates:: mean of x mean of y:      2.87      3.04gb9 = as.numeric(strsplit(
""4 3 2 2 3 3 4 3 3 2 3 4 2 1 3 2 4 4 2 3 2 3 3 3 3 2 3 2 2 3 2 3 3 3 2 1
 1 3 3 4 3 3 3 3 4 3 3 2 3 3 3 3 3 4 3 4 3 3 3 2 2 4 3 2 2 2 2 4 2
 3 3 2 3 2 3 4 2 3 3 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 3 3 3 3 2 4 4
 4 2 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 2 3 3 1 4 2 3 3 3 3 3 3 2 2 3
 4 2 2 3 2 2 2 2 3 4 3 4 2 2 3 3 2 3 3 3 4 2 4 1 3 2 2 2 3 3 3 2 2 3 2 3
 3 4 3 3 4 3 3 3 3 4 4 2 3 3 3 3 2 3 3 3 2 3 3 3 2 3 4 3 3 2 2 3 3
 3 3 2 2 2 3 2 3 2 3 3 2 3 2 3 3 3 3 3 3 4 3 2 3 3 3 4 3 3 2 2 3 3 3 4 4
 3 3 3 3 2 3 3 3 2 3 4 4 4 2 4 2 3 3 2 4 3 3 3 2 4 3 3 4 3 3 3 2 2
 3 2 2 3 3 3 3 3 3 3 3 3 2 3 3 4 3 3 2 3 4 3 2 3 4 3 2 3 2 3 3 4 3 3 3 2
 1 2 3 3 3 1 3 3 3 2 2 3 3 3 2 3 4 4 4 4 3 3 4 3 3 2 3 3 3 4 3 3 4
 3 3 3 3 2 3 4 3 3 4 2 3 3 3 3 3 2 3 3 1 2 3 2 3 3 3 3 3 2 2 3 4 3 3 3 3
 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 4 2 3 4 2 2 3 3 2 3 2 3 2 2 4 3 3
 3 4 3 4 3 3 3 3 3 3 3 3 4 3 3 3 4 4 3 3 3 3 2 3 3 3 2"", ""\\s+"")[[1]])

sb9 = as.numeric(strsplit(
""3 2 3 2 3 3 3 3 4 3 2 3 3 3 4 3 4 2 3 3 4 4 2 3 3 3 4 3 2 3 3 3 3 4 3 4
 3 3 3 3 3 3 3 4 3 3 4 3 2 3 3 3 2 2 4 3 3 4 3 4 3 4 2 2 3 3 3 3 3
 3 3 3 3 3 3 2 3 3 3 4 3 3 3 "", ""\\s+"")[[1]])
t.test(gb9,sb9,var.equal = FALSE)

        Welch Two Sample t-test

data:  gb9 and sb9
t = -2.356, df = 126.14, p-value = 0.02002
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.3043242 -0.0264684
sample estimates:
mean of x mean of y
 2.870748  3.036145

--","R_Language"
"2159","M.1433148171.A.373","gsuper","分享","xy xcatter plot, 座標旋轉",2015-06-01 16:42:48,NA,NA,"#############################################
#############################################
### 圖片角度調整

[旋轉角度]

a <- cbind(c(1,0,-1,0,0.5),c(0,1,0,-1,0.5))
b <- adegree <- 60b[,1] <- a[,1]*cos(2*pi/360*degree) - a[,2]*sin(2*pi/360*degree)
b[,2] <- a[,1]*sin(2*pi/360*degree) + a[,2]*cos(2*pi/360*degree)

COLOR <- c(""red"",""orange"",""blue"",""purple"",""black"")
par(mfrow=c(1,2))
plot(a,xlim=c(-2,2),ylim=c(-2,2),lty=1,col=COLOR,pch=19)
plot(b,xlim=c(-2,2),ylim=c(-2,2),lty=1,col=COLOR,pch=19)

#############################################

[鏡像]

b <- a ; b[,1] <- -a[,1]  # 左右
b <- a ; b[,2] <- -a[,2]  # 上下


#############################################

[重心計算]

group <- c(1,1,2,2,2)
Cen1 <- colMeans(a[group==1,])
Cen2 <- colMeans(a[group==2,])

#############################################

[夾角計算]



#############################################

--","R_Language"
"2160","M.1433126035.A.1F3","lapavoni","問題","t檢定之t值相同p值不同問題請益",2015-06-01 10:33:53,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
經驗諮詢(我覺得我的t檢定是不是出問題了...)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
目前在處理一份問卷分析，受試者目前依性別分為兩個Group(兩組人數不同)，
題目作答類型為五點計分，其中有兩題的t檢定跑出來的結果t值都是-2.0，但
是兩個p值差很多，一個有顯著，另一個則沒有，還有它df的算法我也不太懂... 

[程式範例]:
======================================================================
第八題的兩組作答資料為：> gb8[1] 4 3 2 2 4 3 4 3 3 2 3 4 2 1 4 2 3 4 2 3 1 2 3 3 4 3 2 2 2 3 2 2 3 3 2 2 1 3 4 4 3 3 4 3 4 3 3 2 3 4 3 3 2 4 4 4 3 3 3 4 2 4 3 2 2 2 3 2 3
 [70] 3 3 2 3 3 3 4 2 3 4 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 4 2 3 3 3 4 4 4 3 2 3 3 3 3 3 2 3 3 3 3 3 3 3 3 2 3 3 3 1 4 2 3 3 3 3 3 3 2 2 3
[139] 4 2 2 3 2 1 2 3 2 3 2 4 2 2 3 3 2 3 3 3 4 2 4 1 3 3 3 1 3 3 3 3 2 3 2 3 3 4 3 3 4 3 3 3 3 4 3 2 3 3 3 3 2 4 3 3 3 3 3 3 2 3 3 3 3 2 2 3 4
[208] 3 3 2 2 2 1 1 4 2 3 4 2 3 2 3 4 3 2 3 3 4 3 2 3 3 3 4 2 2 3 2 3 3 3 4 4 3 3 3 3 1 2 3 3 3 3 4 4 3 3 3 3 3 3 3 4 2 3 3 3 4 3 2 3 3 3 3 3 3
[277] 3 2 3 3 3 3 3 3 3 3 4 2 2 3 3 4 3 3 3 3 4 3 3 2 4 3 2 2 2 3 3 4 3 4 3 2 1 1 3 3 3 1 3 3 3 3 2 3 3 3 2 3 4 4 4 4 3 3 4 4 3 2 1 3 3 4 3 3 3
[346] 3 3 3 3 2 4 4 3 3 3 4 3 3 3 3 3 2 3 3 1 3 3 3 3 3 3 3 3 2 2 3 4 3 2 3 4 3 3 3 2 3 3 3 3 3 3 3 3 2 3 4 3 4 2 4 4 3 2 3 3 3 3 2 3 2 2 4 2 3
[415] 3 4 4 4 3 3 3 3 3 2 4 3 4 3 3 3 4 4 4 3 3 3 2 3 3 3 2> sb8[1] 3 2 2 3 3 3 3 3 3 3 3 3 2 3 4 3 4 2 3 3 4 4 2 3 4 3 3 3 2 2 2 3 3 4 2 4 3 3 3 3 3 2 3 4 3 3 4 4 4 3 3 3 2 3 4 3 3 4 3 4 3 4 3 2 3 3 3 3 3
[70] 3 3 2 3 3 3 2 3 3 3 4 3 3 3
t檢定的結果為(兩組變異數有顯著差異)> t.test(gb8,sb8,var.equal = FALSE)Welch Two Sample t-test

data:  gb8 and sb8
t = -2, df = 100, p-value = 0.1
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.2691  0.0259
sample estimates:
mean of x mean of y
     2.90      3.02
=========================================================================
第9題的兩組資料為> gb9[1] 4 3 2 2 3 3 4 3 3 2 3 4 2 1 3 2 4 4 2 3 2 3 3 3 3 2 3 2 2 3 2 3 3 3 2 1 1 3 3 4 3 3 3 3 4 3 3 2 3 3 3 3 3 4 3 4 3 3 3 2 2 4 3 2 2 2 2 4 2
 [70] 3 3 2 3 2 3 4 2 3 3 3 4 3 3 3 3 3 3 2 3 3 4 3 3 3 4 2 3 2 3 3 3 3 2 4 4 4 2 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 2 3 3 1 4 2 3 3 3 3 3 3 2 2 3
[139] 4 2 2 3 2 2 2 2 3 4 3 4 2 2 3 3 2 3 3 3 4 2 4 1 3 2 2 2 3 3 3 2 2 3 2 3 3 4 3 3 4 3 3 3 3 4 4 2 3 3 3 3 2 3 3 3 2 3 3 3 2 3 4 3 3 2 2 3 3
[208] 3 3 2 2 2 3 2 3 2 3 3 2 3 2 3 3 3 3 3 3 4 3 2 3 3 3 4 3 3 2 2 3 3 3 4 4 3 3 3 3 2 3 3 3 2 3 4 4 4 2 4 2 3 3 2 4 3 3 3 2 4 3 3 4 3 3 3 2 2
[277] 3 2 2 3 3 3 3 3 3 3 3 3 2 3 3 4 3 3 2 3 4 3 2 3 4 3 2 3 2 3 3 4 3 3 3 2 1 2 3 3 3 1 3 3 3 2 2 3 3 3 2 3 4 4 4 4 3 3 4 3 3 2 3 3 3 4 3 3 4
[346] 3 3 3 3 2 3 4 3 3 4 2 3 3 3 3 3 2 3 3 1 2 3 2 3 3 3 3 3 2 2 3 4 3 3 3 3 3 3 3 2 3 3 3 3 3 3 3 3 3 3 3 3 4 2 3 4 2 2 3 3 2 3 2 3 2 2 4 3 3
[415] 3 4 3 4 3 3 3 3 3 3 3 3 4 3 3 3 4 4 3 3 3 3 2 3 3 3 2> sb9[1] 3 2 3 2 3 3 3 3 4 3 2 3 3 3 4 3 4 2 3 3 4 4 2 3 3 3 4 3 2 3 3 3 3 4 3 4 3 3 3 3 3 3 3 4 3 3 4 3 2 3 3 3 2 2 4 3 3 4 3 4 3 4 2 2 3 3 3 3 3
[70] 3 3 3 3 3 3 2 3 3 3 4 3 3 3
t檢定結果為> t.test(gb9,sb9,var.equal = FALSE)Welch Two Sample t-test

data:  gb9 and sb9
t = -2, df = 100, p-value = 0.02
alternative hypothesis: true difference in means is not equal to 0
95 percent confidence interval:
 -0.3043 -0.0265
sample estimates:
mean of x mean of y
     2.87      3.04
=======================================================================
想請問一下，我該如何解釋這樣的結果，一般狀況下p值不是由t值和df值推出來的嗎？
另，那個df=100又是如何算出來的呢?



[環境敘述]:R version 3.2.0 (2015-04-16)Platform: x86_64-apple-darwin13.4.0 (64-bit)Running under: OS X 10.9.5 (Mavericks)locale:[1] zh_TW.UTF-8/zh_TW.UTF-8/zh_TW.UTF-8/C/zh_TW.UTF-8/zh_TW.UTF-8attached base packages:[1] stats     graphics  grDevices utils     datasets  methods   baseother attached packages:[1] epicalc_2.15.1.0 nnet_7.3-9       MASS_7.3-40      survival_2.38-1  foreign_0.8-63   gplots_2.16.0    plyr_1.8.2       reshape2_1.4.1[9] xlsx_0.5.7       xlsxjars_0.6.1   rJava_0.9-6      ggplot2_1.0.1    questionr_0.4.3loaded via a namespace (and not attached):[1] Rcpp_0.11.5        highr_0.5          bitops_1.0-6       class_7.3-12       tools_3.2.0        digest_0.6.8       gtable_0.1.2[8] shiny_0.11.1       proto_0.3-10       e1071_1.6-4        stringr_0.6.2      gtools_3.4.2       caTools_1.17.1     classInt_0.1-22[15] grid_3.2.0         R6_2.0.1           RJSONIO_1.3-0      gdata_2.16.1       scales_0.2.4       htmltools_0.2.6    splines_3.2.0[22] mime_0.3           xtable_1.7-4       colorspace_1.2-6   httpuv_1.3.2       KernSmooth_2.23-14 munsell_0.4.2>[關鍵字]: t-test選擇性，也許未來有用--","R_Language"
"2161","M.1433045808.A.9FB","nh2","問題","跑文字mining的錯誤訊息",2015-05-31 12:16:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的[環境敘述]:mac Rstudio, R3.2corp = Corpus(DirSource(""./text/combine/""))
head(corp)
corp = tm_map(corp, stripWhitespace)
corp = tm_map(corp, removePunctuation)
corp = tm_map(corp, removeNumbers)
corp = tm_map(corp, function(word){
  gsub(""[A-Za-z0-9]"","""",word)})
corp = tm_map(corp, PlainTextDocument)
corp = tm_map(corp, removeWords,stopwords(""english""))

# 中文 stop words
stopss = stopwordsCN()
corp = tm_map(corp,removeWords, stopss)

# 中文斷詞
corp2 = tm_map(corp, content_transformer(segmentCN))
corp2 = tm_map(corp, content_transformer(segmentCN), returnType = 'tm')

corp2 <- tm_map(corp, content_transformer(segmentCN), nature = TRUE)
corp2 <- tm_map(corp, function(sentence) {
  noun <- lapply(sentence, function(w) {
    w[names(w) == ""n""]
  })
  unlist(noun)
})


corp3 = Corpus(VectorSource(corp2))

跑到最後一行就出現錯誤訊息寫：
Error in UseMethod(""meta"", x) :
  沒有適用的方法可將 'meta' 套用到 ""character"" 類別的物件

本來有想過是資料夾裡文件編碼的問題
但是文件有中有英文，中文小弟用程式轉成UTF8 ~~

另一個問題是不知道各位面對很多big5碼，有什麼方式比較快轉成utf8的？







--","R_Language"
"2162","M.1432992612.A.199","DrRd","問題","用plot畫折線圖的問題",2015-05-30 21:30:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有三組在三個時間點所測量的資料，我想要把三組的資料用不同的顏色畫成折線圖
畫在同一個圖上，目前我的方法是先用plot畫第一組的資料，然後再用
points把另外兩組的加上去，想要問有沒有其他的畫法？

[程式範例]:data <- data.frame('group' = rep(1:3,each = 3),'time' = rep(1:3,3), 'IV' = rnorm(9, 10, 4))with(subset(data, group == '1'),plot(time, IV, type = 'b', col = 1, ylim = c(0,50)))with(subset(data, group == '2'),points(time, IV, type = 'b', col = 2, add = T))with(subset(data, group == '3'),points(time, IV, type = 'b', col = 3, add = T))legend('topright', pch = 1,col = 1:3, legend = c('group1','group2', 'group3'))[環境敘述]:R3.2[關鍵字]:plot--","R_Language"
"2163","M.1432628403.A.945","godparticle","問題","json檔如何提出我要的內容跟重新排序？",2015-05-26 16:20:00,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
從網路上爬下資料是json
我只會提出單一個的message的內容或單一id的內容~
請問如何提出所有的“message”，並照""id""排列呢？

[程式範例]:

[環境敘述]:
mac

[關鍵字]:


--","R_Language"
"2164","M.1432595977.A.9D3","mikejhou","問題","幾個超級新手的問題",2015-05-26 07:19:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
  小弟背景:碩士班學生，論文需求需要使用R分析。

1.小弟論文主要探討期刊論文關鍵字的相互關聯性，
功能:輸入查詢的關鍵字後，
顯示以關鍵字為核心向外延伸的樹狀圖或Social network graph
例如輸入apple之後，產生可能關鍵字如iPhone、iPad、Mac等等關聯性高的字詞
目前採用方法考慮用Normlized Google Distance(NGD)
他是以google的搜尋量為基礎建立的關聯強度計算方法
想問的是google的搜尋量該如何取的被取得呢?
另外小弟撈完所有資料約莫5000個關鍵字
如果要讓關鍵字自動互相對比的話
在程式中要注意跟使用那些方法呢?

2.論文研究結果教授希望建立網頁
然後給部分同領域教授評估
小弟有查到兩個方法
第一個就是使用Shiny去結合，但Linux環境下才能免費公開
第二個有查到PHP可以exec R檔，比較不確定的是是否該方法會像apche那樣呢?
就是可以對外公開，不僅僅只在本機端執行
如果使用第二個方法是否還必須設定R跟MySQL的連結呢?
我目前將撈好的資料存到XAMPP這個套裝軟體內的MySQL中
有找到R連結Xampp的方法
還是說其實方法都一樣?

3.這個問題真的讓我覺得自己很蠢......
但還是想問就是
在R studio內寫好自己的R script檔後
要如何在console裡面執行呢?
還是只能在寫Script的區塊按RUN或是CTRL+ENTER逐行執行呢?

[關鍵字]:

NGD、Shiny、RPHP、RMySQL


--","R_Language"
"2165","M.1432542081.A.439","warex14",NA,"Package 選擇 (Logit Regression)",2015-05-25 16:21:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好，目前小弟要複製某篇論文的結果，(只有改變樣本期間)
所使用的方法是用Maximum Likelihood Estimates 來估計Logit Model
但是上CRAN 找 Package的時候發現有很多可能的Packages
以下是我找到的：
mlogit:      multinomial logit model
mlogitBMA:   Bayesian Model Averaging for Multinomial Logit Models
mnlogit:     Multinomial Logit Model
pln:         Polytomous logit-normit (graded logistic) model estimation
gmnl:        Multinomial Logit Models with Random Parameters
logitnorm:   Functions for the logitnormal distribution

目前我是覺得mnlogit: Multinomial Logit Model
比較有可能是我需要的工具，以下是他的說明：
(Time and memory efficient estimation of multinomial logit models using
maximum likelihood method. Numerical optimization performed by Newton-Raphson
method using an optimized, parallel C++ library to achieve fast computation
to achieve fast computation of Hessian matrices. Motivated by large scale
multiclass classification problems in econometrics and machine learning.)

不知道有沒有人使用過類似的Package？
他會是我所需要的工具嗎？

(目前打算載來先用用看)

--","R_Language"
"2166","M.1432496723.A.26D","gbd37","問題","如何用for去存多個dataframe",2015-05-25 03:45:20,NA,NA,"[軟體熟悉度]:
入門

[問題敘述]:
x檔是個dataframe檔，year是有200601(2006第一季)到201404(第四季)

我想要把每一年每一季都filter出一個dataframe檔再去比較每年每季的

一些問題，但就先卡在無法存多個dataframe

[程式範例]:

x <- read.csv(file.choose()) #讀取外部資料的csv檔


for(i in 1:4){

  for(j in 6:14){

     y <- filter(x,x$year==200000+j*100+i)
   ↑↑
    問題出在我不知道這個地方該怎麼打才能存多個dataframe
  }
}

按照我現在這樣打只會存到最後一筆的201404的資料

該如何全部跑出來後讓我去做比較呢?! 還是有更好的方法 不要用for?!

--","R_Language"
"2167","M.1432483229.A.989","psinqoo","分享","Re: R套件：DataTaipei",2015-05-25 00:00:23,NA,NA,"第二個範例

df2 <- filter(df, locationName == ""臺北市"") %>%
+     mutate(startTime = as.POSIXct(strptime(startTime,
""%Y-%m-%dT%H:%M:%S+08:00"")), 氣溫=parameterName2) %>%
+     dplyr::select(startTime, 氣溫)

Error in eval(expr, envir, enclos) : object '氣溫' not found


改成 圖才跑出
dplyr::select(startTime,parameterName2)


xts(df2[,-1,with=FALSE], order.by = df2$startTime) %>%
+     dygraph※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: Open Data, Taipei, R Package: [出處]:: https://github.com/TaipeiRHackers/DataTaipei: [重點摘要]:: 大家好，: 這是我和另外兩位朋友在昨天的台北市政府開放資料黑客松上釋出的套件，: 功能：: - 搜尋台北市政府的開放資料: - 下載台北市政府的開放資料:     - 下載的資料集會透過http://data.taipei提供的功能轉換為表格:     - 編碼在windows 上一律轉換為big-5，在非windows上轉換為utf-8:     - 輸出即為data.table，使用者可以直接從data.table或data.frame出發: 如果各位版友有想要玩台北市政府的公開資料，歡迎試用我們的套件: Wush--







--","R_Language"
"2168","M.1432481239.A.515","Wush978","分享","R套件：DataTaipei",2015-05-24 23:27:16,NA,NA,"[關鍵字]: Open Data, Taipei, R Package

[出處]:https://github.com/TaipeiRHackers/DataTaipei[重點摘要]:

大家好，

這是我和另外兩位朋友在昨天的台北市政府開放資料黑客松上釋出的套件，

功能：

- 搜尋台北市政府的開放資料
- 下載台北市政府的開放資料
    - 下載的資料集會透過http://data.taipei提供的功能轉換為表格
    - 編碼在windows 上一律轉換為big-5，在非windows上轉換為utf-8
    - 輸出即為data.table，使用者可以直接從data.table或data.frame出發

如果各位版友有想要玩台北市政府的公開資料，歡迎試用我們的套件

Wush

--","R_Language"
"2169","M.1432477002.A.A1B","ctinghung","問題","匯入檔案error:unused arguments",2015-05-24 22:16:38,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[問題敘述]:我想讀取兩個xlsx檔 分別是MFI_天.xlsx、MFI_十分鐘.xlsx一開始用read.xlsx讀沒問題之後載了openxlsx套件再寫一次就跑出error了上網查一下好像是無效的參照??但是檔案好好的在資料夾裡 打開也沒問題[程式範例]:http://pastie.org/10204877[環境敘述]:http://pastie.org/10204872windows7 32位元R版本 3.2.0[關鍵字]:unused argument--","R_Language"
"2170","M.1432300405.A.236","JX660","討論","Re: for loop與*apply function請益",2015-05-22 21:13:23,NA,NA,"我自己會用下面的寫法

data$group<-
ifelse( data[,8] < 0.25 , 1 ,
ifelse( data[,8] < 0.50 & data[,8] > 0.25 , 2 ,
ifelse( data[,8] < 0.75 & data[,8] > 0.50 , 3 , 4 ) ) )
data$group<- factor( data$group ,
labels=c(""group1"",""group2"",""group3"",""group4""))

或許可以參考看看
但我不確定在你的資料會不會比較快


--","R_Language"
"2171","M.1432276402.A.8BC","gsuper","討論","Re: for loop與*apply function請益",2015-05-22 14:33:19,NA,NA,"assign.group <- function(value){
    if(value < 0.25){return_value <-  ""group1""}
    else if(value < 0.5){return_value <- ""group2"" }
    else if(value < 0.75){return_value <- ""group3"" }
    else return_value <- ""group4""
    return_value
}

## 新增欄位並填入值
add.col.group <- function(data){
    data$group <- 0
    data$group <- sapply(data$avg, assign_group) ##avg即為第八個欄位的名稱
    data
}

-----------------------------------------------------

當你餵進去的變數是單純的 numeric 是最快的

但是看起來你餵進去的是 factor 而非 numeric
-----------------------------------------------------

首先看看你的 data 變數, 看起來應該是 class::dataframe

然後你使用了 data$avg, 這邊應該預設是 class::factor

(你 avg 本來應該是用做 numeric 而非 factor)

這代表當你用 sapply() 放進 20000 筆資料, 每個 factor 又會產生 20000 筆 level

這時你就使用了 20000*20000 的記憶體容量


你可以試試把 data$avg 事先拉出來 宣告為 numeric

原則上 factor 只用在統計的線性模型, 有很多預設的性質, 不利簡單計算與資料處理

--","R_Language"
"2172","M.1432270370.A.9D4","celestialgod","討論","Re: for loop與*apply function請益",2015-05-22 12:52:45,NA,NA,"我不知道你的sapply跟for為什麼會差那麼多

照理來說sapply跟for應該一樣快

我的模擬： (共有20萬列，elapsed是總時間)

group_f2, group_f3分別是for, sapply

group_f1用cut, cbind

group_f4用dplyr, plyr (用兩種不同的input, X_df: data.frame, X_dt: data.table)

#             test replications elapsed relative user.self
# 1 group_f1(X_df)           20    0.96    1.000      0.95
# 4 group_f4(X_df)           20    0.98    1.021      0.97
# 5 group_f4(X_dt)           20    1.23    1.281      1.20
# 2 group_f2(X_df)           20  417.14  434.521    411.56
# 3 group_f3(X_df)           20  418.21  435.635    412.50

code link:http://pastebin.com/JArHScjb凡事還是先考慮vecotrise為主，

處理資料還是推薦用plyr + dplyr來做處理，

依照需求再使用tidyr, reshape2

data.table則不一定，有key的時候會比較快，

其他則跟data.frame差不多

environment: windows 7 64bit, R-3.2.0

machine:[email<U+00A0>protected], DDR3-2400 16G ram※ 引述《locka (locka)》之銘言：: 各位大大晚安,: 我有一份總共九個欄位約30萬筆的原始資料,: 因為想要分成4組畫圖: 所以第一個想到的事就是新增第十個欄位(稱作group),: 然後根據某個欄位(假設為第八個欄位好了)的值分組,: 並填入第十個欄位(group1~group4): 很笨的用for loop搭配if else寫,可是速度整個悲劇...--","R_Language"
"2173","M.1432236554.A.019","locka","討論","for loop與*apply function請益",2015-05-22 03:29:11,NA,NA,"各位大大晚安,


我有一份總共九個欄位約30萬筆的原始資料,
因為想要分成4組畫圖

所以第一個想到的事就是新增第十個欄位(稱作group),
然後根據某個欄位(假設為第八個欄位好了)的值分組,
並填入第十個欄位(group1~group4)


很笨的用for loop搭配if else寫,可是速度整個悲劇...

好讀程式碼請見:http://pastie.org/10200854add.col.group <- function(data){
    data$group <- 0
    for(i in 1:nrow(data)){
        if(data[i,8] < 0.25){data[i,10]  <- ""group1""}
        else if(data[i,8] < 0.5 & data[i,8] > 0.25){data[i,10]  <- ""group2"" }
        else if(data[i,8] < 0.75 & data[i,8] > 0.5){data[i,10]  <- ""group3"" }
        else {data[i,10]  <- ""group4"" }
    }
    data
}
## call function
new.data <- add.col.group(data)

後來嘗試改成用sapply搭配自己寫的判斷函式

好讀程式碼請見:http://pastie.org/10200933## 判斷分組
assign.group <- function(value){
    if(value < 0.25){return_value <-  ""group1""}
    else if(value < 0.5){return_value <- ""group2"" }
    else if(value < 0.75){return_value <- ""group3"" }
    else return_value <- ""group4""
    return_value
}

## 新增欄位並填入值
add.col.group <- function(data){
    data$group <- 0
    data$group <- sapply(data$avg, assign_group) ##avg即為第八個欄位的名稱
    data
}
## call function
new_data <- add.col.group(data)



結果沒想到,速度竟然是爆發性的進展!!!(驚)

(因為怕爆掉,先用2萬筆資料測試)

用for loop寫:
   user  system elapsed
   0.11    0.00    0.11

用sapply寫:
   user  system elapsed
  42.18    0.00   43.02



可是不知道這樣的寫法會不會很笨...還有更好的寫法嗎?
還是其實根本不應該用*apply寫?
還請各位高手大大指點一下,謝謝大家了!




後記:

原本是想要發文求指點sapply的寫法...
結果剛剛文章打到一半當掉的時候, 突然靈光乍現了!
雖然好像沒有很難, 可是能靠自己的力量想出來總是很開心的一件事啊>""<
(儘管文章要重打很累XD)




[環境敘述]:
version.string R version 3.0.3 (2014-03-06)

[關鍵字]:
for loop, sapply

--","R_Language"
"2174","M.1431779583.A.564","celestialgod","問題","Re: 請問要怎麼把.CEL檔的內容畫出來？",2015-05-16 20:33:01,NA,NA,"※ 引述《soheadsome (師大狗鼻哥)》之銘言：: [問題敘述]:: 將.cel檔（生物晶片）的內容畫成跟affymetrix .dat ImageViewer類型的圖: 目前只知道使用affy的ReadAffy讀出內容: 然後用image（）去畫黑白的圖片: 但不知道要怎麼畫出跟類似附圖的內容: http://imgur.com/6cqCCQF: 還是有其他方式可以畫出.cel檔的內容呢？: 附檔:: https://goo.gl/wUR1t7我測試了一下，這樣應該是對的

只是你的附圖是否對應到這個資料，我不確定

你可以在levelplot加入col.regions來調整顏色


## install affy
# source(""http://bioconductor.org/biocLite.R"")# biocLite(""affy"")
library(affy)
mat = ReadAffy(""GSM21708.CEL"")
dat = data.frame(intensity(mat),
      x = rep(1:nrow(mat), ncol(mat)),
      y = rep(1:ncol(mat), each=nrow(mat)))

library(lattice)
levelplot(GSM21708.CEL ~ x + y, dat)
levelplot(log(GSM21708.CEL) ~ x + y, dat)


# partial
library(dplyr)
dat2 = filter(dat, x <= 200, y <= 200)
levelplot(GSM21708.CEL ~ x + y, dat2)


# mean
library(magrittr)
r = 1
G = ceiling(max(dat$x)/(2*r+1))
dat3 = dat %>% mutate(group = ceiling(x/(2*r+1))) %>%
  transform(group = group + G*(ceiling(y/(2*r+1))-1)) %>%
  group_by(group) %>% summarise(int2 = mean(GSM21708.CEL)) %>%
  mutate(xnew = group %% G, ynew = floor(group / G)+1)
levelplot(int2 ~ xnew + ynew, dat3)


# similar colorkey
ramp = colorRamp(c(""blue"", ""cyan"", ""yellow"", ""orange"", ""red"", ""white""))
colorkey = rgb(ramp(seq(0, 1, length = 18)), max = 255)
levelplot(GSM21708.CEL ~ x + y, dat, col.regions = colorkey)
levelplot(log(GSM21708.CEL) ~ x + y, dat, col.regions = colorkey)

--","R_Language"
"2175","M.1431684921.A.7BB","psinqoo","問題","shiny 資料匣 csv",2015-05-15 18:15:17,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我把shiny 中的 ui.r server.r psinqoo.csv放在同一資料 掛上


裡面有用到 read.csv() 路徑該怎麼寫?



試了 read.csv(""http://xxx.xxx.xxx.xxx/XXXX/資料匣名稱/psinqoo.csv"")
絕對路徑寫法 讀不到

是否有特殊的寫法??





[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：程式碼可貼於以下網站：[環境敘述]:linux[關鍵字]:

shiny選擇性，也許未來有用--







--","R_Language"
"2176","M.1431682307.A.B47","soheadsome","問題","請問要怎麼把.CEL檔的內容畫出來？",2015-05-15 17:31:43,NA,NA,"[問題類型]:
將.cel檔（生物晶片）的內容畫成跟affymetrix .dat ImageViewer類型的圖

[軟體熟悉度]:
入門

[問題敘述]:
將.cel檔（生物晶片）的內容畫成跟affymetrix .dat ImageViewer類型的圖

目前只知道使用affy的ReadAffy讀出內容

然後用image（）去畫黑白的圖片

但不知道要怎麼畫出跟類似附圖的內容http://imgur.com/6cqCCQF還是有其他方式可以畫出.cel檔的內容呢？


附檔:https://goo.gl/wUR1t7--","R_Language"
"2177","M.1431661976.A.E28","psinqoo","問題","關於 shiny 範例",2015-05-15 11:52:52,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的http://shiny.rstudio.com/gallery/kmeans-example.html這範例 在自己電腦上RSUDUIO RUN是OK的

但是一上自己 shiny server 就掛點 自己與朋友都是

但是上傳到RTSUDIO公司 shiny server 雲端 又正常

因為沒用到什麼特殊包 所以有點奇怪



[程式範例]:http://shiny.rstudio.com/gallery/kmeans-example.html程式碼可貼於以下網站：[環境敘述]:linux[關鍵字]:

shiny--







--","R_Language"
"2178","M.1431571305.A.444","celestialgod","問題","Re: 如何標注多條geom_abline線的名稱",2015-05-14 10:41:43,NA,NA,"※ 引述《ntme (one shot one kill)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 在ggplot2套件裡面用geom_abline以不同的斜率跟截距畫出了兩條不同的線: 一條是紅線，一條是黑線 如圖：http://i.imgur.com/vK2Yt5j.png: 現在想在畫面右邊提供線的訊息，像是紅線是Line 1，黑線是Line2: 但不熟ggplot套件，不知有無方面的指令可用呢？: [程式範例]:: library(ggplot2): data(iris): iris.plot <- ggplot(data=iris, aes(x = Sepal.Length,:                                    y = Sepal.Width,:                                    color = Species)) + geom_point(size=3): iris.plot + geom_abline(intercept = -0.2, slope = 0.6, colour=""red"") +:             geom_abline(intercept = -0.3, slope = 0.7)lattice 畫法

library(lattice)
library(latticeExtra)
library(grid)
xyplot(Sepal.Width ~ Sepal.Length, groups = Species, data = iris, cex = 1.5,
  key = list(space = ""top"", columns = 3, text = list(levels(iris$Species)),
    points = list(cex = 1.5, pch=16,
    col=ggplot2like(n = 3)$superpose.symbol$col)),
  par.settings = ggplot2like(n = 3),
  lattice.options = ggplot2like.opts()) +
  layer(panel.abline(a = -0.2,b = 0.7, col=1, lwd=2)) +
  layer(panel.abline(a = -0.3,b = 0.6, col=2, lwd=2))
  draw.key(list(columns = 2, text = list(paste(""Line"", 1:2)),
    lines = list(lwd=2,col=1:2)), draw = TRUE, vp = viewport(.5, .93))

preview:http://i.imgur.com/rhFrfbC.png?1好讀的程式碼：http://pastebin.com/1eBturzh--","R_Language"
"2179","M.1431523778.A.C26","ntme","問題","如何標注多條geom_abline線的名稱",2015-05-13 21:29:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
在ggplot2套件裡面用geom_abline以不同的斜率跟截距畫出了兩條不同的線
一條是紅線，一條是黑線 如圖：http://i.imgur.com/vK2Yt5j.png現在想在畫面右邊提供線的訊息，像是紅線是Line 1，黑線是Line2
但不熟ggplot套件，不知有無方面的指令可用呢？


[程式範例]:

library(ggplot2)
data(iris)
iris.plot <- ggplot(data=iris, aes(x = Sepal.Length,
                                   y = Sepal.Width,
                                   color = Species)) + geom_point(size=3)

iris.plot + geom_abline(intercept = -0.2, slope = 0.6, colour=""red"") +
            geom_abline(intercept = -0.3, slope = 0.7)


--

114 > 112 bj4

melody

--","R_Language"
"2180","M.1431258260.A.A38","psinqoo","問題","shiny mysql",2015-05-10 19:44:17,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的ui.r

textInput(""a"", ""帳號: "", """"),
textInput(""b"", ""密碼: "", """"),

d1<-c(""course"",""mysql"",""world"")
selectInput(""c"", ""選擇資料庫"",choices =d1),



server.r

con <- dbConnect(MySQL(), user=""input$a"", password=""input$b"", dbname=input$c,

host=""l92.XXX.XXX.XXX"")

這段要怎麼寫 似乎常碰到這種問題
底下這還是錯的

user=input$a, password=input$b, dbname=input$c,

或著

dbSendQuery(con,""insert into ceotable values(input$age,input$order))""

都會遇到 似乎沒好方法


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：[環境敘述]:[關鍵字]:

shiny
RMySQL選擇性，也許未來有用--

--","R_Language"
"2181","M.1430736119.A.E54","celestialgod","問題","Re: 取樣的問題",2015-05-04 18:41:57,NA,NA,"※ 引述《ardodo (米蟲)》之銘言：: 版上先進大家好，我有個問題想請教大家: 現在我手上有筆某大專院校22個系所的學生資料(共1萬筆): 我想要在每個系所各取樣30名學生資料出來分析，請問該怎麼做？: 我想到的方法是：每個系所subset一次、隨機抽30名出來存成一個物件，重覆22次: 最後將上面22個物件rbind即可: 但是這樣的做法很費時也沒有效率，想請問有沒有比較快的方法？我生成一個簡單的case示範

直接利用split這個功能做切割，再做合併，會很快

而pipe operator (magrittr:::%>%)就是為了避免儲存太多暫存物件而設計

library(data.table)
library(dplyr)
library(magrittr)

nDepat = 22
nVar = 10
dat = replicate(nVar, rnorm(10000*nDepat)) %>% data.frame() %>%
  mutate(department = rep(LETTERS[1:nDepat],,,10000)) %>% tbl_df()

nSubset = 30
dat2 = dat %>% split(.$department) %>% lapply(function(x){
  x[sample(1:nrow(x), nSubset),]}) %>% do.call(rbind, .)

# %>% do.call(rbind, .) 跟 %>% rbindlist(.) 是一樣的

# Another way by plyr
library(plyr)
dat3 = dat %>% plyr:::splitter_d(.(department)) %>% ldply(
  function(x) x[sample(1:nrow(x), nSubset),])

# third way to do
dat4= dat %>% ddply(.(department), function(d) d[sample(1:nrow(d), nSubset),])

放上測試，我個人會比較喜歡第三種，簡潔的程式。

library(rbenchmark)
benchmark(
  method1 = dat %>% split(.$department) %>%
    lapply(function(x) x[sample(1:nrow(x), nSubset),]) %>% do.call(rbind, .),
  method2 = dat %>% plyr:::splitter_d(.(department)) %>% ldply(
    function(x) x[sample(1:nrow(x), nSubset),])
  method3 = dat %>% ddply(.(department), function(d){
    d[sample(1:nrow(d), nSubset),]}),
  replications = 30L,
  columns = c(""test"", ""replications"", ""user.self"", ""sys.self"",
  ""elapsed"", ""relative""), order = ""relative"")

#     test replications user.self sys.self elapsed relative
# 2 method2           30      2.64     0.03    2.93    1.000
# 3 method3           30      2.84     0.02    2.96    1.010
# 1 method1           30      2.90     0.17    3.12    1.065


至於用dplyr，我後來想到group_by做會比較麻煩，

要先新增變數，然後再用filter，不建議

--","R_Language"
"2182","M.1430721259.A.0C8","ardodo","問題","取樣的問題",2015-05-04 14:34:16,NA,NA,"版上先進大家好，我有個問題想請教大家

現在我手上有筆某大專院校22個系所的學生資料(共1萬筆)

我想要在每個系所各取樣30名學生資料出來分析，請問該怎麼做？

我想到的方法是：每個系所subset一次、隨機抽30名出來存成一個物件，重覆22次

最後將上面22個物件rbind即可

但是這樣的做法很費時也沒有效率，想請問有沒有比較快的方法？

--","R_Language"
"2183","M.1430715193.A.1AD","celestialgod","問題","Re: htmlParse",2015-05-04 12:53:10,NA,NA,": [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [問題敘述]:: 1.請問htmlParse返回的結果是否有size限制?: 我用下面一段code htmlParse返回只有到[[288]],似乎沒有抓完?: 如果是size的限制有辦法解決嗎?這我不知道，但是我用RCurl有抓到全部，直接htmlParse就失敗了：

test_doc = getURL(URL,.encoding=""big5"")
test = htmlParse(test_doc, encoding=""big5"")
test[""//tr""] %>% str() # List of 11655

test_doc = htmlParse(URL,encoding=""big5"")
test = test_doc[""//tr""] %>% str() # List of 288: 2.我試著用readLines讀同樣的網址,但因沒有換行符號,所有的資料只存成一行,: 處裡這一類沒有換行符號的網址,有什麼好方法呢?readLines之後用gsub把你要斷行的地方放進去

EX:

我要把每一個開始或結束的tag後面都放置一個斷行，

這個要用一些regular expression的知識

gsub(""(</?[^>]*>)"", ""\\1\\\n"", ""<tr><td bgcolor=\""#FAFAD2\"" colspan=\""7\""><b>
股票 <b> </b></b></td></tr>"") %>% sprintf(""%s"", .) %>% cat()

output:

<tr>
<td bgcolor=""#FAFAD2"" colspan=""7"">
<b>
  股票 <b>
 </b>
</b>
</td>
</tr>

--","R_Language"
"2184","M.1430668375.A.EF2","sorder","問題","htmlParse ",2015-05-03 23:52:52,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:1.請問htmlParse返回的結果是否有size限制?
我用下面一段code htmlParse返回只有到[[288]],似乎沒有抓完?
如果是size的限制有辦法解決嗎?
2.我試著用readLines讀同樣的網址,但因沒有換行符號,所有的資料只存成一行,
處裡這一類沒有換行符號的網址,有什麼好方法呢?



[程式範例]:library(XML)

URL = ""http://isin.twse.com.tw/isin/C_public.jsp?strMode=2""test_doc = htmlParse(URL,encoding=""big5"")
test = test_doc[""//tr""]




output:
......
<tr>
  <td bgcolor=""#FAFAD2"">2352      ?蔔??/td>
  <td bgcolor=""#FAFAD2"">TW0002352002</td>
  <td bgcolor=""#FAFAD2"">1996/07/22</td>
  <td bgcolor=""#FAFAD2"">銝<U+7BAB>?</td>
  <td bgcolor=""#FAFAD2"">?餉<U+987A>?<U+7B80>L閮剖?璆?/td>
  <td bgcolor=""#FAFAD2"">ESVUFR</td>
  <td bgcolor=""#FAFAD2""/>
</tr>

[[288]]
<tr>
  <td bgcolor=""#FAFAD2"">2353      ?<U+AE3F>/td>
</tr>



[環境敘述]:R version 3.2.0 (2015-04-16)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 7 x64 (build 7601) Service Pack 1

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950  LC_CTYPE=Chinese
(Traditional)_Taiwan.950    LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C                                 LC_TIME=Chinese
(Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] rvest_0.2.0    XML_3.98-1.1   RCurl_1.95-4.6 bitops_1.0-6

loaded via a namespace (and not attached):
[1] httr_0.6.1    magrittr_1.5  tools_3.2.0   stringr_0.6.2


[關鍵字]:選擇性，也許未來有用--","R_Language"
"2185","M.1430655350.A.999","Wush978","問題","Re: 多欄資料迴圈處理",2015-05-03 20:15:48,NA,NA,"※ 引述《sinclairJ (Jun)》之銘言：: 各位先進 又來請教問題了 謝謝大家指導: 先上資料檔 https://www.dropbox.com/s/s0rmp73n08qbyfl/test0430.csv?dl=0: 第一部分: #註：資料檔中的NA值可先忽略: #以下語法皆只能處理單欄資料: ###讀檔並轉成類別型資料###: temp=read.csv(""C:\\Users\\Win\\Desktop\\test0430.csv"",header=T): for(i in 1:ncol(temp)) temp[,i]=as.character(temp[,i]): ###MAF計算###: table.rs1=table(temp[,1]) #可知rs1的 0有116個,1有31個,2有2個: #計算n: n0=116;n1=31;n2=2;: n=n0+n1+n2: #計算minor allele frequencies(MAF): p=((2*n0)+n1)/(2*n);q=1-p: maf=pmin(p,q): 問題1：我該如何把每欄的rs用迴圈的方式計算完for(i in 1:ncol(temp)) {
  table.rs <- table(temp[,i])
  n0 = table.rs[""0""]
  # ...
  n = nrow(temp)
  # p, q, maf 都可以算出來了
}: 問題2：全部rs計算完畢後，若該rs計算出來的maf<0.05，就存到另一個csv檔，: 其rs下的資料也要保留，因為要繼續做後續的分析，所以新的csv檔維度為149*欄數存入csv的指令是write.csv 或write.table

你只要利用

if (maf < 0.05) {
  # 寫入指令
}

就可以了: 第二部分: #註：資料檔中的NA值可先忽略: #以下語法皆只能處理單欄資料: ###讀檔並轉成類別型資料###: temp=read.csv(""C:\\Users\\Win\\Desktop\\test0430.csv"",header=T): for(i in 1:ncol(temp)) temp[,i]=as.character(temp[,i]): ###Likelihood ratio test for Hardy Weinberg equilibrium###: #以rs1為例: obs=cbind(n0=n0,n1=n1,n2=n2): exp=(cbind(p*p,2*p*q,q*q))*n: chisq=(obs-exp): chisq.ratio=(chisq*chisq)/exp: hwe.chisq=apply(chisq.ratio,1,sum): hwe.chisq.p=1-pchisq(hwe.chisq,df=1): 問題3：我該如何把每欄的rs用迴圈的方式計算完: 問題4：全部rs計算完畢後，若該rs計算出來的hwe.chisq.p<0.05，就存到另一個csv檔，: 其rs下的資料也要保留，因為要繼續做後續的分析，所以新的csv檔維度為149*欄數: 以上是我的問題，有勞各位先進前輩指導，謝謝以上都是類似的問題了

--","R_Language"
"2186","M.1430654523.A.539","sinclairJ","問題","多欄資料迴圈處理",2015-05-03 20:01:59,NA,NA,"各位先進 又來請教問題了 謝謝大家指導

先上資料檔https://www.dropbox.com/s/s0rmp73n08qbyfl/test0430.csv?dl=0第一部分
#註：資料檔中的NA值可先忽略
#以下語法皆只能處理單欄資料
###讀檔並轉成類別型資料###
temp=read.csv(""C:\\Users\\Win\\Desktop\\test0430.csv"",header=T)
for(i in 1:ncol(temp)) temp[,i]=as.character(temp[,i])

###MAF計算###
table.rs1=table(temp[,1]) #可知rs1的 0有116個,1有31個,2有2個
#計算n
n0=116;n1=31;n2=2;
n=n0+n1+n2
#計算minor allele frequencies(MAF)
p=((2*n0)+n1)/(2*n);q=1-p
maf=pmin(p,q)

問題1：我該如何把每欄的rs用迴圈的方式計算完
問題2：全部rs計算完畢後，若該rs計算出來的maf<0.05，就存到另一個csv檔，
其rs下的資料也要保留，因為要繼續做後續的分析，所以新的csv檔維度為149*欄數


第二部分
#註：資料檔中的NA值可先忽略
#以下語法皆只能處理單欄資料
###讀檔並轉成類別型資料###
temp=read.csv(""C:\\Users\\Win\\Desktop\\test0430.csv"",header=T)
for(i in 1:ncol(temp)) temp[,i]=as.character(temp[,i])

###Likelihoodratio test for Hardy Weinberg equilibrium###
#以rs1為例
obs=cbind(n0=n0,n1=n1,n2=n2)
exp=(cbind(p*p,2*p*q,q*q))*n
chisq=(obs-exp)
chisq.ratio=(chisq*chisq)/exp
hwe.chisq=apply(chisq.ratio,1,sum)
hwe.chisq.p=1-pchisq(hwe.chisq,df=1)

問題3：我該如何把每欄的rs用迴圈的方式計算完
問題4：全部rs計算完畢後，若該rs計算出來的hwe.chisq.p<0.05，就存到另一個csv檔，
其rs下的資料也要保留，因為要繼續做後續的分析，所以新的csv檔維度為149*欄數


以上是我的問題，有勞各位先進前輩指導，謝謝

--","R_Language"
"2187","M.1430221879.A.7B3","psinqoo","問題","讓 shiny 發出聲音",2015-04-28 19:51:17,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別讓 shiny 發出聲音[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的如果偵測數值低於某個數值時，會發出聲音Alert，然後做個按鈕關掉聲音。

異常欄位會反紅或有顏色。

在 shiny 環境下 能做到嗎?


例如在 即時水庫資訊擷取http://salamon.cu.cc/我只是異想天開的好奇這問題~




[程式範例]:程式碼可貼於以下網站：[環境敘述]:linux[關鍵字]:

shiny選擇性，也許未來有用--







--","R_Language"
"2188","M.1430117480.A.FCE","tytony","問題","如何取代掉<U+00A0>這種字串",2015-04-27 14:51:14,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:

使用者(已經有用R 做過不少作品)


[問題敘述]:

這個程式是要到中央氣象局網站抓取海象觀測資料，整理後建檔儲存

(網址http://www.cwb.gov.tw/V7/marine/sea_condition/cht/tables/COMC08.html)因為部分測站有些項目沒觀測，欄位會是空白，經過R讀取後會顯示<U+00A0>

但不論搜尋的目標為"" ""或""<U+00A0>""都無法取代該值為缺值

因為不同測站缺少的項目不同，無法事先指定指定說哪幾欄缺值

想請教各位先進是否有方法能將該值取代掉

謝謝！


[程式範例]:http://ideone.com/cBUJQa最後產出的data資料框會是這樣http://ppt.cc/-a13[環境敘述]:

RStudio + WIN8

--","R_Language"
"2189","M.1430060722.A.57C","sorder","問題","用getURL抓台股代碼 encoding問題",2015-04-26 23:05:19,NA,NA,"[問題類型]:抓資料編碼問題.[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的利用R來抓台股股票代碼
但是抓回來的資料是亂的.
兩個網址都是亂的.Orz~


[程式範例]://==================================rm(list=ls(all.names=TRUE))library(RCurl)library(XML)library(bitops)test =getURL(""http://isin.twse.com.tw/isin/C_public.jsp?strMode=2"",encoding=""UTF-8"")test2 = getURL(""http://www.emega.com.tw/js/StockTable.htm"",encoding=""big5"")write.table(test,""test.txt"")write.table(test2,""test2.txt"")//==================================[環境敘述]:Win7 + RStudio[關鍵字]:選擇性，也許未來有用--","R_Language"
"2190","M.1429968235.A.4B7","lofu",NA,"關於自訂函數",2015-04-25 21:23:52,NA,NA,"各位先進大家好小弟有個寫Ｒ上碰到的問題想請教各位大大？！
--Ｒ入門階段> cum = function(v){for(i in 1:v){
  n = which(cumsum(runif(10))>1)[1]
  print(n)
   }
}
>cum(3)
[1] 3
[1] 2
[1] 3

產生出來的結果是我想要的但是我想把結果as.dataframe
卻無法，一直想出不解答想請各位大大幫幫忙∼
謝大家

--","R_Language"
"2191","M.1429867058.A.14E","sinclairJ","問題","電腦跑不動問題...",2015-04-24 17:17:35,NA,NA,"不好意思...有關電腦與軟體的問題想請教
我通常都用個人PC跑R程式(研究室也沒其他資源)
但因為最近要分析的資料量實在太大(原始資料約為500,000*200)
跑R也常跑到沒有回應 現在有兩個問題想請教

1.礙於某些套件是以""欄""為單位來進行分析(如兩欄間的相關係數檢定)
  以我的資料檔為例 我感興趣的變數就是那500,000列
  所以我必須先在R裡面轉置再輸出成csv檔 之後才能做後續分析
  今天有試著輸出...但Excel卻開不起來
  (錯誤訊息：只能容許1X,XXX行)  這是遇到的第一個問題

2.之後試著不如不要轉出 直接轉置完在R裡面跑分析就好
  結果卻沒有回應...有試著把同學的記憶體加到自己電腦(變成16G)
  但R卻遲遲還是沒有回應...

自己有天真的想了一下解決方法 可能打程式的時候
以逐行的方式作檢定 若顯著的話 就先暫存在某個物件裡
但礙於程式能力不好 怕會花太多時間
不然資料那麼大 若是還以之前的程式習慣(一次處理整個資料檔)來做分析
肯定是不行的吧... 所以想請問各位先進...
有""以不更換軟硬體""的情況下的解決方法嗎

--","R_Language"
"2192","M.1429770132.A.CBB","celestialgod","問題","Re: Loop for  rbind,table",2015-04-23 14:22:10,NA,NA,"這篇剛好來試試看資料處理順序跟dplyr, tidyr等工具對於資料整理能力的差異

根據原PO的問題，總共要做三個動作：

1. 去掉只出現一個類別的遭利

2. 列出最小比例的類別以及比例

3. 合併成一張variabel對類別的表格

先試試看三個動作分開做(preprocess_f)，然後合併做(preprocess_f2)

接著用tidyr, dplyr試試看(preprocess_f3)，最後一起比較速度。

PS: 這裡就沒測試tidyr, dplyr分開做了，讓我偷懶一下XD

程式連結：http://pastebin.com/PTzXdf3K這裡只放結果：

st = proc.time()
t1 = preprocess_f(dat)
proc.time() - st#   user  system elapsed#  47.80    0.42   47.39st = proc.time()
t2 = preprocess_f2(dat)
proc.time() - st#   user  system elapsed#  40.35    0.23   40.03st = proc.time()
t3 = preprocess_f3(dat)
proc.time() - st#   user  system elapsed#  13.85    0.00   13.89在這個例子中，資料處理順序可以有效縮短時間

但是用對工具可以獲得更好的效果!

補上：全程最高只用掉500M的記憶體

環境：windows 7 64 bit, R-3.2.0 (置換RRO的Rblas.dll and Rlapack.dll)[email<U+00A0>protected], DDR3-2400 16G ram

--","R_Language"
"2193","M.1429733828.A.D4C","sinclairJ","問題","Loop for  rbind,table",2015-04-23 04:17:05,NA,NA,"各位先進好 又遇到問題了...自己摸了很久 尚未解決  於是上來請教大家
一開始的原始資料如下(實際資料有50萬行)
先舉個例子(物件aa)
X1 X2 X3
1  0   1
2  0   0
1  1   2
1  0   1
1  2   1
最後我想得到這個表格
序 0  1  2
X1 0  4  1
X2 3  1  1
X3 1  3  1

目前想到的方法是這樣
z=apply(aa,2,table);z> z$X1

1 2
4 1

$X2

0 1 2
3 1 1

$X3

0 1 2
1 3 1

問題來了...
(1)我不知道該怎麼把他們合併成我想得到的那種表格
(2)因為使用套件的關係(Package HardyWeinber中的function HWExactMat)
   所以每列一定都要有三欄(0,1,2)，若沒有就補0
   但有些X變數table出來卻只有兩類結果(如上的X1)
   這樣子要怎麼把缺的那類補回去表格(如上例子，我要把X1中的0補回去)
                                                          0
   註：X變數有3類結果：0,1,2

所以我實際資料轉出的最後表格會長這樣：
序        0   1   2
X1        0   4   1
X2        3   1   1
X3        1   3   1
.
.
.
X500000  24   0   55

--","R_Language"
"2194","M.1429702109.A.E74","bmka","問題","Re: 拆解time-dependent的資料",2015-04-22 19:28:28,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《yummy7922 (crucify)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 請把以下不需要的部份刪除: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 請簡略描述你所要做的事情，或是這個程式的目的: : 資料是多個人的重複測量資料，每個人的觀察筆數並不相同，: : 其中有一個會變動的變數(ex：用藥資料，某幾次有吃，某些次沒有吃)，: : 資料大概是長這樣：: : ID   M1   duration  IS              ID   start  stop   M1  IS: : 1    1       1       0               1     0     1     1    0: : 1    0       2       0               1     1     4     0    1: : 1    0       3       0               2     0     3     1    0: : 1    0       4       1               2     3     5     0    0: : 2    1       1       0               3     0     1     1    0: : 2    1       2       0     --->      3     1     2     0    1: : 2    1       3       0: : 2    0       4       0: : 2    0       5       0: : 3    1       1       0: : 3    0       2       1: : 資料中M1是會變動的變數，is是我的outcome，: : 希望可以轉變成右方的樣子，即，如果有資料變動就做紀錄，: : 就是一般要處理time-dependent survival的樣子，: : 目前只知道sas該怎麼處理，想來請教各位，: : R應該怎麼做轉換，謝謝大家: I do not know whether there is a function to do this in R,: but I do this by dplyr.: library(data.table): library(dplyr): library(magrittr): dat = data.frame(ID = rep(1:3, c(4, 5, 2)), M1 = c(1,rep(0:1,: each=3),0,0,1,0)) %>% tbl_dt(FALSE): dat = dat %>% group_by(ID) %>%  mutate(duration = 1:length(M1), IS = 0): dat$IS[c(4, 11)] = 1: dat %>% group_by(ID) %>%:   summarise(stop = cumsum(rle(M1)$lengths),:             M1 = rle(M1)$values,:             IS = IS[cumsum(rle(M1)$lengths)]) %>% group_by(ID) %>%:   mutate(start = c(0, stop[1:(length(stop)-1)])):   ID stop M1 IS start: 1  1    1  1  0     0: 2  1    4  0  1     1: 3  2    3  1  0     0: 4  2    5  0  0     3: 5  3    1  1  0     0: 6  3    2  0  1     1: 補充一點，如果資料量大，請把rle的計算過程獨立成另一個變數，不然算太多次會有點: 久，這裡只是方便寫法，懶得另立變數。: 當然只要有group_by 都可以用tapply做，只是比較麻煩就不寫了不必那麼麻煩, 多生一個start column就可以
start <- tapply(duration, ID, function(x){ c(0, x[-length(x)])})
多切幾個subinterval其實沒關係
懂得partial likelihood的原理就知道出來的結果是一樣的

老話一句,基本觀念最重要

--","R_Language"
"2195","M.1429698574.A.64E","andrew43","問題","Re: 幾個資料預處理問題",2015-04-22 18:29:27,NA,NA,"※ 引述《sinclairJ (Jun)》之銘言：: 不好意思，又要來請教各位先進了: 資料檔大概格式如下（均是類別型資料）: （實際資料約為200列乘500000行）: ----------------------------: 序  Y  X1   X2   X3: 1   1   0    1    2: 2   1   0    0    0: 3   2   2    1    1: 4   1   1    1    2: 5   2   0    2    2: 6   2   1    1    2: 7   2   1    0    1: 8   1   2    1    1: 9   1   1    2    0: 10  2   0    0    2: ......: ......: .....: -----------------------------: 以下有幾個互相獨立的資料處理動作要請教各位:: （1）如表格所示，Y有兩種類別，X有三種類別，我想做的處理是比較Y的兩種類別，其他: 們的X變數是否為同樣類別: 舉例:   Y X1 X2  X3:         1  0  1   2:         1  0  2   2:         2  0  0   1:         2  0  1   1:  然後因為X1都一樣，所以我要把X1刪除，請問這個預處理該如何於R上實現?假如該 data frame 叫 dt 好了。

dt <- data.frame(
  Y = c(1,1,2,2), X1 = c(0,0,0,0),
  X2 = c(1,2,0,1), X3 = c(2,2,1,1)
)

可以利用 length(table(dt$X1)) > 1 這個運算來測試 X1 是不是非全等。
懂這個技巧後，套用 apply(dt, 2, function(.){length(table(.))}) > 1
就可以知道哪些欄是要保留的欄位。
合起來寫就是
dt1 <- dt[, apply(dt, 2, function(.){length(table(.))}) > 1]
dt1 為所求。: （2）接下來我要對每個X變數做類似這樣的處理: 舉例:  X1:         0:         1:         2:         1:         2:         2:         1:         2:         1:         1: 先找出最少的類別，其所佔的比例: 如X1最少的類別是0，比例為1/10，1/10就是我想得到的，只是迴圈不太明白該怎麼寫同樣舉例子給你。

dt2 <- data.frame(
  X1 = c(0,1,2,1,2,2,1,2,1,1),
  X2 = c(0,1,1,1,1,1,1,1,1,2),
  X3 = c(0,0,0,0,0,1,1,2,2,2)
)

sort(table(dt2$X1))[1] / length(dt2$X1) 可以看出 0 佔 10% 最少。
所以，再套
apply(dt2, 2, function(.){sort(table(.))[1] / length(.)} )
即為所求。
想看看是誰佔最少則使用
apply(dt2, 2, function(.){attr(sort(table(.))[1], ""names"")})
不過，dt2$X2 中 0 和 2 都是最少者，但這個方法沒辦法知道。: （3）X變數做C取2組合方式(兩兩相互)對Y做邏輯斯迴歸(這邊的X可轉成數值型資料來處: 理): 舉例: Y  X1   X2  X3: 1   2    1   0: 2   1    0   1: 3   2    0   0: 如果資料是上述這樣: 我就要建立三條迴歸: Y~X1+X2: Y~X2+X3: Y~X1+X3: 之後把顯著(p<0.05)的X變數挑出來Y 是 1,2,3... 怎麼做 logistic regression？
是不是請你再確定？

我建個資料用來示範：
dt <- data.frame(
  Y  = c(0,0,0,0,0,1,1,1),
  X1 = runif(8), X2 = runif(8), X3 = runif(8)
)

n 球中抽出且不放回 k 球的所有組合可以用這個方式：combn(n, k)
因為你的 names(dt) 是 ""Y""  ""X1"" ""X2"" ""X3""，
那就是 3 球中抽 2 球，共有種情況：

dt.x <- dt[, which(names(dt) != ""Y"")]
mat <- combn(names(dt.x), 2)

最後再把 mat 拚成 formula 字串：

str <- paste0(""Y ~ "", apply(mat, 2, paste, sep = """", collapse = "" + ""))

就生成三個 formula 前身字串。
最後要做 logistic regression：

mod <- list()
for(i in 1:length(str)){
  mod[[i]] <- glm(as.formula(str[i]), data = dt, family = binomial)
}
lapply(mod, summary): 希望各位先進能指導指導小弟: 若問題描述還不夠清楚: 我會再補充，先跟版上各位先進說聲謝謝了--http://apansharing.blogspot.com/--","R_Language"
"2196","M.1429694718.A.C3B","celestialgod","問題","Re: 幾個資料預處理問題",2015-04-22 17:25:15,NA,NA,"※ 引述《sinclairJ (Jun)》之銘言：: 不好意思，又要來請教各位先進了: 資料檔大概格式如下（均是類別型資料）: （實際資料約為200列乘500000行）: ----------------------------: 序  Y  X1  X2  X3: 1   1   0    1    2: 2   1   0    0    0: 3   2   2    1    1: 4   1   1    1    2: 5   2   0    2    2: 6   2   1    1    2: 7   2   1    0    1: 8   1   2    1    1: 9   1   1    2    0: 10  2   0    0    2: ......: ......: .....: -----------------------------: 以下有幾個互相獨立的資料處理動作要請教各位:: （1）如表格所示，Y有兩種類別，X有三種類別，我想做的處理是比較Y的兩種類別，其他: 們的X變數是否為同樣類別: 舉例:Y X1 X2 X3:         1  0  1   2:         1  0  2   2:         2  0  0   1:         2  0  1   1:  然後因為X1都一樣，所以我要把X1刪除，請問這個預處理該如何於R上實現?dat[,sapply(dat, function(x){ length(table(x))}) > 1]: （2）接下來我要對每個X變數做類似這樣的處理: 舉例:X1:         0:         1:         2:         1:         2:         2:         1:         2:         1:         1: 先找出最小的類別，其所佔的比例: 如X1最小的類別是0，比例為1/10，1/10就是我想得到的，只是迴圈不太明白該怎麼寫dat = data.frame(Y = c(1,1,2,1,2,2,2,1,1,2),
                 X1= c(0,0,2,1,0,1,1,2,1,0),
                 X2= c(1,0,1,1,2,1,0,1,2,0),
                 X3= c(2,0,1,2,2,2,1,1,0,2))
lapply(dat, function(x){
 tmp = table(x)/length(x)
 output = min(tmp)
 names(output) = names(tmp)[which.min(tmp)]
 output
 }): （3）X變數做C取2組合方式(兩兩相互)對Y做邏輯斯迴歸(這邊的X可轉成數值型資料來處: 理): 舉例: Y X1  X2  X3: 1   2    1   0: 2   1    0   1: 3   2    0   0: 如果資料是上述這樣: 我就要建立三條迴歸: Y~X1+X2: Y~X2+X3: Y~X1+X3: 之後把顯著(p<0.05)的X變數挑出來: 希望各位先進能指導指導小弟: 若問題描述還不夠清楚: 我會再補充，先跟版上各位先進說聲謝謝了lapply(apply(combn(3, 2), 2, function(x){
   paste(""Y-1~"", paste(""X"", 1:2, sep="""", collapse=""+""))
 }), function(f) glm(as.formula(f), data = dat, family=binomial))


--","R_Language"
"2197","M.1429693220.A.5CD","sinclairJ","問題","幾個資料預處理問題",2015-04-22 17:00:18,NA,NA,"不好意思，又要來請教各位先進了
資料檔大概格式如下（均是類別型資料）
（實際資料約為200列乘500000行）
----------------------------
序  Y  X1  X2  X3
1   1   0    1    2
2   1   0    0    0
3   2   2    1    1
4   1   1    1    2
5   2   0    2    2
6   2   1    1    2
7   2   1    0    1
8   1   2    1    1
9   1   1    2    0
10  2   0    0    2
......
......
.....
-----------------------------
以下有幾個互相獨立的資料處理動作要請教各位:
（1）如表格所示，Y有兩種類別，X有三種類別，我想做的處理是比較Y的兩種類別，其他
們的X變數是否為同樣類別
舉例:Y X1 X2 X3
        1  0  1   2
        1  0  2   2
        2  0  0   1
        2  0  1   1
 然後因為X1都一樣，所以我要把X1刪除，請問這個預處理該如何於R上實現?

（2）接下來我要對每個X變數做類似這樣的處理
舉例:X1
        0
        1
        2
        1
        2
        2
        1
        2
        1
        1
先找出最少的類別，其所佔的比例
如X1最少的類別是0，比例為1/10，1/10就是我想得到的，只是迴圈不太明白該怎麼寫

（3）X變數做C取2組合方式(兩兩相互)對Y做邏輯斯迴歸(這邊的X可轉成數值型資料來處
理)
舉例
Y X1  X2  X3
1   2    1   0
2   1    0   1
1   2    0   0
如果資料是上述這樣
我就要建立三條迴歸
Y~X1+X2
Y~X2+X3
Y~X1+X3
之後把顯著(p<0.05)的X變數挑出來

希望各位先進能指導指導小弟
若問題描述還不夠清楚
我會再補充，先跟版上各位先進說聲謝謝了




--
Sent from my Android

--","R_Language"
"2198","M.1429689054.A.45E","celestialgod","問題","Re: 拆解time-dependent的資料",2015-04-22 15:50:52,NA,NA,"※ 引述《yummy7922 (crucify)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 資料是多個人的重複測量資料，每個人的觀察筆數並不相同，: 其中有一個會變動的變數(ex：用藥資料，某幾次有吃，某些次沒有吃)，: 資料大概是長這樣：: ID   M1   duration  IS              ID   start  stop   M1  IS: 1    1       1       0               1     0     1     1    0: 1    0       2       0               1     1     4     0    1: 1    0       3       0               2     0     3     1    0: 1    0       4       1               2     3     5     0    0: 2    1       1       0               3     0     1     1    0: 2    1       2       0     --->      3     1     2     0    1: 2    1       3       0: 2    0       4       0: 2    0       5       0: 3    1       1       0: 3    0       2       1: 資料中M1是會變動的變數，is是我的outcome，: 希望可以轉變成右方的樣子，即，如果有資料變動就做紀錄，: 就是一般要處理time-dependent survival的樣子，: 目前只知道sas該怎麼處理，想來請教各位，: R應該怎麼做轉換，謝謝大家I do not know whether there is a function to do this in R,
but I do this by dplyr.

library(data.table)
library(dplyr)
library(magrittr)
dat = data.frame(ID = rep(1:3, c(4, 5, 2)),
  M1 = c(1,rep(0:1, each=3),0,0,1,0)) %>%
  tbl_dt(FALSE) %>%  group_by(ID) %>%
  mutate(duration = 1:length(M1), IS = 0)
dat$IS[c(4, 11)] = 1

dat %>% group_by(ID) %>%
  summarise(stop = cumsum(rle(M1)$lengths),
            M1 = rle(M1)$values,
            IS = IS[cumsum(rle(M1)$lengths)]) %>% group_by(ID) %>%
  mutate(start = c(0, stop[1:(length(stop)-1)]))

  ID stop M1 IS start
1  1    1  1  0     0
2  1    4  0  1     1
3  2    3  1  0     0
4  2    5  0  0     3
5  3    1  1  0     0
6  3    2  0  1     1

# update my code, 20150422 23:44

dat %>% group_by(ID) %>% {
    tmp = use_series(., IS)
    extract(.,, rle(M1), by =ID) %>% group_by(ID) %>%
    mutate(start = c(0, cumsum(lengths)[-length(lengths)]),
      stop = cumsum(lengths)) %>% ungroup() %>%
    mutate(IS = tmp[cumsum(lengths)]) %>%
    setnames(""values"", ""M1"") %>% select(-lengths)
}

  ID M1 start stop IS
1  1  1     0    1  0
2  1  0     1    4  1
3  2  1     0    3  0
4  2  0     3    5  0
5  3  1     0    1  0
6  3  0     1    2  1


當然只要有group_by 都可以用tapply做，只是比較麻煩就不寫了
--","R_Language"
"2199","M.1429686995.A.29B","yummy7922","問題","拆解time-dependent的資料",2015-04-22 15:16:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的資料是多個人的重複測量資料，每個人的觀察筆數並不相同，
其中有一個會變動的變數(ex：用藥資料，某幾次有吃，某些次沒有吃)，
資料大概是長這樣：

ID   M1   duration  IS              ID   start  stop   M1  IS
1    1       1       0               1     0     1     1    0
1    0       2       0               1     1     4     0    1
1    0       3       0               2     0     3     1    0
1    0       4       1               2     3     5     0    0
2    1       1       0               3     0     1     1    0
2    1       2       0     --->      3     1     2     0    1
2    1       3       0
2    0       4       0
2    0       5       0
3    1       1       0
3    0       2       1

資料中M1是會變動的變數，is是我的outcome，
希望可以轉變成右方的樣子，即，如果有資料變動就做紀錄，
就是一般要處理time-dependent survival的樣子，
目前只知道sas該怎麼處理，想來請教各位，
R應該怎麼做轉換，謝謝大家











--","R_Language"
"2200","M.1429668770.A.B52","celestialgod","問題","Re: adjacency matrix",2015-04-22 10:12:47,NA,NA,"※ 引述《angela79979 (mini)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 資料為許多筆list,如:: 1,2,4,3,5: 2,4,5,3: ...: 想計算(i-1,i) 相鄰兩個數出現的頻率並轉還成matrix形式: 如:: (i-1,i) : 頻率: 以(i-1)為matrix的行列,頻率為該元素的值,: 若利用以上的資料 :: (1,2):1                  _1  2  3  4  5  _: (2,4):2               1 | 0  1  0  0  0  |: (4,3):1     ==>     M=2 | 0  0  0  2  0  |: (3,5):1               3 | 0  0  0  0  1  |: (4,5):1               4 | 0  0  1  0  1  |: (5,3):1               5 |_0  0  1  0  0 _|: 請問是否有見意的方法或package?: [關鍵字]:: adjacency matrixlibrary(data.table)
library(dplyr)
library(magrittr)
library(Matrix)
r = list(c(1,2,4,3,5), c(2,4,5,3))
dat = sapply(r, function(x) cbind(x[-length(x)], x[-1])) %>%
  do.call(rbind, .) %>% tbl_dt() %>% mutate(Value = 1) %>%
  group_by(V1, V2) %>% summarise(sumV = sum(Value))
A = sparseMatrix(dat$V1, dat$V2, x=dat$sumV)

[1,] . 1 . . .
[2,] . . . 2 .
[3,] . . . . 1
[4,] . . 1 . 1
[5,] . . 1 . .

# . 在sparseMatrix是0
# 可以用as. matrix還原

as.matrix(A)

     [,1] [,2] [,3] [,4] [,5]
[1,]    0    1    0    0    0
[2,]    0    0    0    2    0
[3,]    0    0    0    0    1
[4,]    0    0    1    0    1
[5,]    0    0    1    0    0

--","R_Language"
"2201","M.1429667739.A.C69","celestialgod","問題","Re: 有關append的問題",2015-04-22 09:55:37,NA,NA,"※ 引述《lambking (BB)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 原始資料如下:: customer   productID: A            1: B            3: C            2: A            2: B            2: 想整理成以下形式: customer  purchaseList: A            1,2: B            3,2: C            2: 請問有沒有什麼建議的方法呢?: 謝謝後來用一下gather，發現不適用，我用data.table還有dplyr做的

另外提供用tapply的作法

library(data.table)
library(dplyr)
library(magrittr)
dat = data.frame(customer = LETTERS[c(1:3, 1:2)], productID = c(1,3,rep(2,3)))

dat %>% tbl_dt() %>% group_by(customer) %>%
  summarise(x = paste(productID, collapse = "",""))

# tapply
y = tapply(dat$productID, dat$customer, paste, collapse = "","")
data.frame(names(y), y)

--","R_Language"
"2202","M.1429666997.A.1ED","celestialgod","問題","Re: 儲存格分割",2015-04-22 09:43:15,NA,NA,"※ 引述《sinclairJ (Jun)》之銘言：: 有一欄變數資料如下: 每一格的內容大概就是: 156: 756: 258: 693: 127: ...共幾萬列: 我想把每列儲存格裡面第二個數字拿掉: 最後會變這樣:: 16: 76: 28: 63: 17: …: 請問各位前輩要怎麼做阿: 想了好久:(: ps.每個儲存格都是三位數既然是數字還是建議用運算比較快

字串會比較慢一點

x = c(156, 756, 258, 693, 127)

x2 = floor(x / 100) *10 + x %% 10

# [1] 16 76 28 63 17

--","R_Language"
"2203","M.1429666933.A.938","angela79979","問題","adjacency matrix",2015-04-22 09:42:11,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
資料為許多筆list,如:

1,2,4,3,5
2,4,5,3
...

想計算(i-1,i) 相鄰兩個數出現的頻率並轉還成matrix形式

如:
(1,2)共出現1次   (2,4)共出現2次
以(i-1)為matrix的行列,頻率為該元素的值,
若利用以上的資料 :


(1,2):1                  _1  2  3  4  5  _
(2,4):2               1 | 0  1  0  0  0  |
(4,3):1     ==>     M=2 | 0  0  0  2  0  |
(3,5):1               3 | 0  0  0  0  1  |
(4,5):1               4 | 0  0  1  0  1  |
(5,3):1               5 |_0  0  1  0  0 _|


請問是否有見意的方法或package?


[關鍵字]:

adjacency matrix

--","R_Language"
"2204","M.1429658384.A.327","andrew43","問題","Re: 有關append的問題",2015-04-22 07:19:41,NA,NA,"以下用 for loop 硬幹，但我相信會有更聰明的做法。

# 建資料

cus <- c(""A"",""B"",""C"",""A"",""B"")
pro <- c(1,3,2,2,2)

lt <- list()
for (i in 1:length(unique(cus))){
    lt[[i]] <- pro[which(cus == unique(cus)[i])]
}
names(lt) <- unique(cus) # 如果 unique(cus) 不適合當 list tag，這列不要用

# lt 為所求
# 看看以下內容

lt
lt$B
lt[[2]]
as.matrix(lapply(lt, paste, sep="""", collapse="",""))※ 引述《lambking (BB)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 原始資料如下:: customer   productID: A            1: B            3: C            2: A            2: B            2: 想整理成以下形式: customer  purchaseList: A            1,2: B            3,2: C            2: 請問有沒有什麼建議的方法呢?: 謝謝--
「在PowerPoint用什麼字型就代表了你是什麼樣的人……
  如果你用Times New Roman，表示你是個懶鬼…」
                                                 —Don McMillan

--","R_Language"
"2205","M.1429617804.A.962","andrew43","問題","Re: 儲存格分割",2015-04-21 20:03:21,NA,NA,"方法有很多，給一個主要靠 gsub() 的方法。

x0 <- c(123,456)
xStr0 <- as.character(x0)
xStr1 <- gsub(""([0-9])[0-9]([0-9])"", ""\\1\\2"", xStr0)
x1 <- as.numeric(xStr1)

x1 為所求。※ 引述《sinclairJ (Jun)》之銘言：: 有一欄變數資料如下: 每一格的內容大概就是: 156: 756: 258: 693: 127: ...共幾萬列: 我想把每列儲存格裡面第二個數字拿掉: 最後會變這樣:: 16: 76: 28: 63: 17: …: 請問各位前輩要怎麼做阿: 想了好久:(: ps.每個儲存格都是三位數--http://apansharing.blogspot.com/--","R_Language"
"2206","M.1429612753.A.D00","EricTao","問題","read csv 不想更動header ?",2015-04-21 18:39:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的read.csv時，如果檔案中的header是數字開頭，R會自動給個英文開頭
請問如何取消這個動作?


--","R_Language"
"2207","M.1429513609.A.E34","asdwezx25","問題","Re: 坐標軸之值的設定",2015-04-20 15:06:43,NA,NA,"※ 引述《asdwezx25 (你猜猜)》之銘言：: [問題類型]:: 經驗諮詢(請問大家的經驗): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::   各位高手小弟現在有一個問題:   在劃出plot後，想要更改X軸的座標軸上的值:   假設plot出來後，X軸是1到10的值:   那現在我想要將值改成:   如(0.1,0.2,0.7)為第一組、(0.2,0.2,0.6)...:   總共有十組...:   這樣的話...應該要怎麼做呢??: [關鍵字]::   R 坐標軸 值多謝一樓的提點
這是我的作法分享一下

plot(1:10,rnorm(10),xaxt = ""n"")
axis(1,1:10,
     labels = c(""0.1,0.2,0.7"",
                ""0.2,0.2,0.6"",
                ""0.3,0.2,0.5"",
                ""0.4,0.2,0.4"",
                ""0.5,0.2,0.3"",
                ""0.6,0.2,0.2"",
                ""0.7,0.2,0.1"",
                ""0.3,0.1,0.6"",
                ""0.2,0.1,0.7"",
                ""0.1,0.1,0.8"")
    )

--","R_Language"
"2208","M.1429509966.A.E44","asdwezx25","問題","坐標軸之值的設定",2015-04-20 14:06:00,NA,NA,"[問題類型]:
經驗諮詢(請問大家的經驗)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

  各位高手小弟現在有一個問題
  在劃出plot後，想要更改X軸的座標軸上的值

  假設plot出來後，X軸是1到10的值
  那現在我想要將值改成
  如(0.1,0.2,0.7)為第一組、(0.2,0.2,0.6)...
  總共有十組...
  這樣的話...應該要怎麼做呢??

[關鍵字]:

  R 坐標軸 值

--","R_Language"
"2209","M.1429493739.A.AC4","wakke","問題","建立模式後，怎麼自己模擬預測原有資料?",2015-04-20 09:35:35,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
請問一下各位先進，我現在手上有200筆資料，

現在使用線性混合模型建立一個初步模式後，例如yij=aij+Xb+隨機效應

(其中xb為很多納入考量的獨立變數)，

另外我的相依變數yij為1或0(logit，1為生病，0未發病)

現在我想用該模式，重複去模擬這200筆資料，是否會與原有真實的結果相同(是否發病)

那請問該用那個套件呢?

謝謝各位先進的指教

--

--","R_Language"
"2210","M.1429452428.A.4D7","YoBo","問題","Re: quantmod 繪製股價交易時序圖",2015-04-19 22:07:06,NA,NA,"※ 引述《psinqoo (零度空間)》之銘言：: HI~: 試看看: x<-read.csv(file.choose()): x<-as.xts(read.zoo(x,header=T)): 這樣子圖就就來我照你的試把資料轉成xts的格式
圖就出來了!!!
謝謝你

我其實後來有在網路上找到另一個解法
不過沒有你的簡單
還是列出來給大家參考

tmp <- read.csv(file.choose(),header=TRUE)
x <- xts(tmp[,-1],as.Date(tmp[,1],""%Y-%m-%d"")): 備註 我的.csv 長如此: Date            Open    High    Low     Close   Volume: 2012/1/2        8.81    8.81    8.62    8.67    777: 2012/1/3        8.7     8.83    8.7     8.82    1375: 2012/1/4        8.89    8.99    8.8     8.87    1661: 2012/1/5        8.87    8.96    8.87    8.93    1546: ※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: : library(quantmod): : txt <- ""Date Open High Low Close Volume: : 2013/1/2 13257 13289 13162 13194 168353: : 2013/1/3 13195 13198 13055 13055 242457: : 2013/1/4 13050 13100 13005 13079 256215: : 2013/1/7 13085 13128 13025 13126 228488: : "": : dat <- read.table(textConnection(txt), header=T, sep="" "", row.names=""Date""): : ## 關鍵是 barChart() 要餵食一個 xts 物件: : ## 參考 ?xts 及 ?sample_matrix: : ## 以下是想辦法生成 xts 物件的過程: : dat.xts <- as.xts(as.matrix(dat)): : ## 畫畫看吧。結果對或錯都請推個文告訴我一聲。: : barChart(dat.xts)--","R_Language"
"2211","M.1429451999.A.411","YoBo","問題","Re: quantmod 繪製股價交易時序圖",2015-04-19 21:59:58,NA,NA,"抱歉這幾天比較忙※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: library(quantmod): txt <- ""Date Open High Low Close Volume: 2013/1/2 13257 13289 13162 13194 168353: 2013/1/3 13195 13198 13055 13055 242457: 2013/1/4 13050 13100 13005 13079 256215: 2013/1/7 13085 13128 13025 13126 228488: ""如果照你的範例打是OK的
可是我直接用read.csv來讀取我的csv檔後
後面的步驟都失敗
應該是資料格式一開始就不一樣的關係: dat <- read.table(textConnection(txt), header=T, sep="" "", row.names=""Date""): ## 關鍵是 barChart() 要餵食一個 xts 物件: ## 參考 ?xts 及 ?sample_matrix: ## 以下是想辦法生成 xts 物件的過程: dat.xts <- as.xts(as.matrix(dat)): ## 畫畫看吧。結果對或錯都請推個文告訴我一聲。: barChart(dat.xts): ※ 引述《psinqoo (零度空間)》之銘言：: : 問題 圖跑不出: : [問題類型]:: : 程式諮詢: : [軟體熟悉度]:: : 入門: : [問題敘述]:: : 是不是資料格式錯誤? 還是其他方面有問題?: : barChart 畫不出來 其他的也無法畫出: : 底下是資料格式: : 讀入 .csv: : 資料格式 如下: :           Date          Open    High    Low     Close   Volume: :        2013/1/2        13257   13289   13162   13194   168353: :        2013/1/3        13195   13198   13055   13055   242457: :        2013/1/4        13050   13100   13005   13079   256215: :        2013/1/7        13085   13128   13025   13126   228488: : [程式範例]:: : euo=read.csv(file.choose()): : head(euo): : library(quantmod): : barChart(euo): : 出現: : Error in try.xts(x, error = ""chartSeries requires an xtsible object"") :: : chartSeries requires an xtsible object: : quantmod: : xts--","R_Language"
"2212","M.1429191476.A.F82","celestialgod","分享","矩陣對向量運算的函數(像bsxfun(MATLAB))",2015-04-16 21:37:53,NA,NA,"[關鍵字]: bsxfun in R

[出處]:http://stackoverflow.com/questions/3643555/multiply-rows-of-matrix-by-vector[重點摘要]:

pastebin link:http://pastebin.com/jGtHeYujM = 3
N = 5
(mat = replicate(N, 1:M))#      [,1] [,2] [,3] [,4] [,5]# [1,]    1    1    1    1    1# [2,]    2    2    2    2    2# [3,]    3    3    3    3    3(vec = 1:N)# [1] 1 2 3 4 5(sweep(mat, MARGIN=2, vec,`+`))#      [,1] [,2] [,3] [,4] [,5]# [1,]    2    3    4    5    6# [2,]    3    4    5    6    7# [3,]    4    5    6    7    8(sweep(mat, MARGIN=2, vec,`*`))#      [,1] [,2] [,3] [,4] [,5]# [1,]    1    2    3    4    5# [2,]    2    4    6    8   10# [3,]    3    6    9   12   15(sweep(mat, MARGIN=2, vec,`/`))#      [,1] [,2]      [,3] [,4] [,5]# [1,]    1  0.5 0.3333333 0.25  0.2# [2,]    2  1.0 0.6666667 0.50  0.4# [3,]    3  1.5 1.0000000 0.75  0.6(sweep(mat, MARGIN=2, vec,`-`))#      [,1] [,2] [,3] [,4] [,5]# [1,]    0   -1   -2   -3   -4# [2,]    1    0   -1   -2   -3# [3,]    2    1    0   -1   -2(sweep(mat, MARGIN=2, vec, pmax))#      [,1] [,2] [,3] [,4] [,5]# [1,]    1    2    3    4    5# [2,]    2    2    3    4    5# [3,]    3    3    3    4    5(sweep(mat, MARGIN=2, vec, pmin))#      [,1] [,2] [,3] [,4] [,5]# [1,]    1    1    1    1    1# [2,]    1    2    2    2    2# [3,]    1    2    3    3    3## usage in scalingN = 10; p = 3
dat = matrix(rnorm(N*p), N)

dat_standardized = sweep(sweep(dat, 2, colMeans(dat)), 2,
  apply(dat, 2, sd), '/')

dat_normalized = sweep(sweep(dat, 2, apply(dat, 2, min)), 2,
  apply(dat, 2, function(x) diff(range(x))), '/')## usage in computing kernelkernelMatrix_f = function(X, center, sigma){
  exp(sweep(sweep(X %*% t(center), 1,
    rowSums(X**2)/2), 2, rowSums(center**2)/2) / (sigma**2))
}## compare with Rcpp and kernlablibrary(kernlab)
library(Rcpp)
library(RcppArmadillo)
sourceCpp(code = '
// [[Rcpp::depends(RcppArmadillo)]]
#include <RcppArmadillo.h>
using namespace Rcpp;
using namespace arma;

// [[Rcpp::export]]
NumericMatrix kernelMatrix_cpp(NumericMatrix Xr,
  NumericMatrix Centerr, double sigma) {
  uword n = Xr.nrow(), b = Centerr.nrow(), row_index, col_index;
  mat X(Xr.begin(), n, Xr.ncol(), false),
      Center(Centerr.begin(), b, Centerr.ncol(), false),
      KerX(X*Center.t());
  colvec X_sq = sum(square(X), 1) / 2;
  rowvec Center_sq = (sum(square(Center), 1)).t() / 2;
  KerX.each_row() -= Center_sq;
  KerX.each_col() -= X_sq;
  KerX *= 1 / (sigma * sigma);
  KerX = exp(KerX);
  return wrap(KerX);
}')

N = 8000
p = 500
b = 1000
X = matrix(rnorm(N*p), ncol = p)
center = X[sample(1:N, b),]
sigma = 3

all.equal(kernelMatrix(rbfdot(sigma=1/(2*sigma^2)), X, center)@.Data,
  kernelMatrix_cpp(X, center, sigma))# TRUEall.equal(kernelMatrix(rbfdot(sigma=1/(2*sigma^2)), X, center)@.Data,
  kernelMatrix_f(X, center, sigma))# TRUElibrary(microbenchmark)
microbenchmark(Rfun = kernelMatrix_f(X, center, sigma),
  kernlab = kernelMatrix(rbfdot(sigma=1/(2*sigma^2)), X, center),
  Rcpp = kernelMatrix_cpp(X, center, sigma),
  times = 20L
)# Unit: milliseconds#     expr      min       lq      mean    median        uq       max neval#     Rfun 872.8854 981.1995 1036.2209 1074.0526 1098.9185 1132.9356    20#  kernlab 773.7489 841.9028 1059.3098  862.7476  883.3874 2979.2541    20#     Rcpp 490.2462 501.2993  520.1283  522.5060  532.5426  571.0949    20速度不輸package: kernlab。


--","R_Language"
"2213","M.1429155279.A.69B","ee012345","問題","有關list的問題",2015-04-16 11:34:35,NA,NA,"[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
例如說存了一個物件save = list()，裡面有 A, B, C....
然後再令一個物件  name=""A""
原因是我希望可以做這樣的動作:  save$name
這樣我想把A或B或C叫出來就只用改name就好
可是我不知道要怎麼樣才能用類似 save$name 這樣的指令...
求救ˊˋ

[程式範例]:

失敗的例子

name = ""A""
object = paste0(""save$"", name)
get(object)
  Error in get(object) : object 'save$A' not found

--","R_Language"
"2214","M.1429065467.A.E0F","celestialgod","問題","Re: 多個向量做運算",2015-04-15 10:37:44,NA,NA,"nVector = 8
m = sapply(1:(2^nVector-1), function(x) rev(as.logical(intToBits(x))))
m = m[nrow(m)-(nVector-1):0, ]

vectorLength = 5
vectors = replicate(nVector, rnorm(vectorLength)) # generating data
# 你的資料就簡單把他們都cbind起來就好 vectors = cbind(A, B, .., H)
result = apply(m, 2, function(x) rowSums(matrix(vectors[,x], vectorLength)))


如果你要依照和的個數做分組，就把m根據colSums做split就好了

m2 = split(m, t(replicate(nVector, colSums(m))))
m2 = lapply(m2, function(x) matrix(x, nVector))
result = lapply(m2, function(m){ apply(m, 2, function(x){
    rowSums(matrix(vectors[,x], vectorLength))
  })
})

PS: 這個idea是在MATLAB學到的，想不到R這樣用也很快XD※ 引述《penolove5566 (輕劃)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好: 我有多個向量A,B,C,,...,H: 我想要計算向量和，但我要計算所有情況的向量和: 比如說 A+B, A+C, ... , A+H, B+C, ... , G+H, A+B+C,..., A+B+C+D+E+F+G+H.: 我現在的作法是: 用 gtools 的 combinations 列出 各種組合數 C7取1 ... C7取7: 再用這些元素去命令剛剛的向量相加: 請問有沒有較簡易的做法?: 謝謝!--","R_Language"
"2215","M.1429048274.A.75B","penolove5566","問題","多個向量做運算",2015-04-15 05:51:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

大家好

我有多個向量A,B,C,,...,H

我想要計算向量和，但我要計算所有情況的向量和

比如說 A+B, A+C, ... , A+H, B+C, ... , G+H, A+B+C,..., A+B+C+D+E+F+G+H.


我現在的作法是

用 gtools 的 combinations 列出 各種組合數 C7取1 ... C7取7
再用這些元素去命令剛剛的向量相加

請問有沒有較簡易的做法?

謝謝!

--","R_Language"
"2216","M.1429035184.A.C21","tokyo291","問題","output出現奇怪的欄名",2015-04-15 02:13:00,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
跑自己寫的函數的時候,output出現奇怪的欄名

[程式範例]:http://codepad.org/aNl1e1Sgoutput為

              denominator
[1,] 6.071530    4.165084
[2,] 6.018572    3.188893
[3,] 5.014635    0.585715
[4,] 6.033358    1.041271

第二欄奇怪的多了欄名...
檢查過蠻多次也用browser()去檢查
依然是找不到原因


[環境敘述]:> sessionInfo()R version 3.1.2 (2014-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] snowfall_1.84-6 snow_0.3-13     MASS_7.3-40     survival_2.38-1
[5] emplik_0.9-9-6  quantreg_5.11   SparseM_1.6

loaded via a namespace (and not attached):
[1] splines_3.1.2 tools_3.1.2





--","R_Language"
"2217","M.1429016523.A.D59","psinqoo","分享","試玩看看~~ 不要太暴力~~",2015-04-14 21:01:58,NA,NA,"類別說明:- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)http://salamon.cu.cc請小力玩~~~小弟找新的跑道~~有不錯請不吝介紹[關鍵字]:

shiny

[出處]:

[重點摘要]:

--







--","R_Language"
"2218","M.1428969386.A.082","psinqoo","問題","Re: quantmod 繪製股價交易時序圖",2015-04-14 07:56:22,NA,NA,"HI~

試看看

x<-read.csv(file.choose())
x<-as.xts(read.zoo(x,header=T))

這樣子圖就就來

備註 我的.csv 長如此

Date            Open    High    Low     Close   Volume
2012/1/2        8.81    8.81    8.62    8.67    777
2012/1/3        8.7     8.83    8.7     8.82    1375
2012/1/4        8.89    8.99    8.8     8.87    1661
2012/1/5        8.87    8.96    8.87    8.93    1546※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: library(quantmod): txt <- ""Date Open High Low Close Volume: 2013/1/2 13257 13289 13162 13194 168353: 2013/1/3 13195 13198 13055 13055 242457: 2013/1/4 13050 13100 13005 13079 256215: 2013/1/7 13085 13128 13025 13126 228488: "": dat <- read.table(textConnection(txt), header=T, sep="" "", row.names=""Date""): ## 關鍵是 barChart() 要餵食一個 xts 物件: ## 參考 ?xts 及 ?sample_matrix: ## 以下是想辦法生成 xts 物件的過程: dat.xts <- as.xts(as.matrix(dat)): ## 畫畫看吧。結果對或錯都請推個文告訴我一聲。: barChart(dat.xts): ※ 引述《psinqoo (零度空間)》之銘言：: : 問題 圖跑不出: : [問題類型]:: : 程式諮詢: : [軟體熟悉度]:: : 入門: : [問題敘述]:: : 是不是資料格式錯誤? 還是其他方面有問題?: : barChart 畫不出來 其他的也無法畫出: : 底下是資料格式: : 讀入 .csv: : 資料格式 如下: :           Date          Open    High    Low     Close   Volume: :        2013/1/2        13257   13289   13162   13194   168353: :        2013/1/3        13195   13198   13055   13055   242457: :        2013/1/4        13050   13100   13005   13079   256215: :        2013/1/7        13085   13128   13025   13126   228488: : [程式範例]:: : euo=read.csv(file.choose()): : head(euo): : library(quantmod): : barChart(euo): : 出現: : Error in try.xts(x, error = ""chartSeries requires an xtsible object"") :: : chartSeries requires an xtsible object: : quantmod: : xts--







--","R_Language"
"2219","M.1428960782.A.73E","andrew43","問題","Re: quantmod",2015-04-14 05:32:58,NA,NA,"library(quantmod)

txt <- ""Date Open High Low Close Volume
2013/1/2 13257 13289 13162 13194 168353
2013/1/3 13195 13198 13055 13055 242457
2013/1/4 13050 13100 13005 13079 256215
2013/1/7 13085 13128 13025 13126 228488
""

dat <- read.table(textConnection(txt), header=T, sep="" "", row.names=""Date"")

## 關鍵是 barChart() 要餵食一個 xts 物件
## 參考 ?xts 及 ?sample_matrix
## 以下是想辦法生成 xts 物件的過程
dat.xts <- as.xts(as.matrix(dat))

## 畫畫看吧。結果對或錯都請推個文告訴我一聲。
barChart(dat.xts)※ 引述《psinqoo (零度空間)》之銘言：:: 問題 圖跑不出:: [問題類型]::: 程式諮詢:: [軟體熟悉度]::: 入門:: [問題敘述]::: 是不是資料格式錯誤? 還是其他方面有問題?: barChart 畫不出來 其他的也無法畫出: 底下是資料格式: 讀入 .csv: 資料格式 如下:           Date          Open    High    Low     Close   Volume:        2013/1/2        13257   13289   13162   13194   168353:        2013/1/3        13195   13198   13055   13055   242457:        2013/1/4        13050   13100   13005   13079   256215:        2013/1/7        13085   13128   13025   13126   228488:: [程式範例]::: euo=read.csv(file.choose()): head(euo): library(quantmod): barChart(euo): 出現: Error in try.xts(x, error = ""chartSeries requires an xtsible object"") :: chartSeries requires an xtsible object:: quantmod: xts:
:

--http://apansharing.blogspot.com/--","R_Language"
"2220","M.1428931566.A.698","YoBo","問題","Re: quantmod",2015-04-13 21:26:05,NA,NA,"我也是遇到這問題
結果推文的網址弄得有點複雜
不知道有沒有從資料源去修改符合目標函數格式的方式
因為我怎麼改都不對※ 引述《psinqoo (零度空間)》之銘言：:: 問題 圖跑不出:: [問題類型]::: 程式諮詢:: [軟體熟悉度]::: 入門:: [問題敘述]::: 是不是資料格式錯誤? 還是其他方面有問題?: barChart 畫不出來 其他的也無法畫出: 底下是資料格式: 讀入 .csv: 資料格式 如下:           Date          Open    High    Low     Close   Volume:        2013/1/2        13257   13289   13162   13194   168353:        2013/1/3        13195   13198   13055   13055   242457:        2013/1/4        13050   13100   13005   13079   256215:        2013/1/7        13085   13128   13025   13126   228488:: [程式範例]::: euo=read.csv(file.choose()): head(euo): library(quantmod): barChart(euo): 出現: Error in try.xts(x, error = ""chartSeries requires an xtsible object"") :: chartSeries requires an xtsible object:: quantmod: xts:
:

--","R_Language"
"2221","M.1428829363.A.DDD","ming790925","問題","計算CPU執行程式時間",2015-04-12 17:02:41,NA,NA,"文章分類提示:
問題

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我寫了一個 simulation 方法的程式
想與某一方法比較程式執行時間
因此我搜尋了一下幾個可以計算時間差的函數:
proc.time()
system.time()
Sys.time()
我研究一下他的說明看起來好像大同小異
但算出的時間有時卻不太相同
想請教一下各位大大
在比較兩程式執行時間 會偏好用哪種計算方法比較適當能說服人呢?

感激!!

[程式範例]:

proc.time()
system.time()
Sys.time()

[環境敘述]:> sessionInfo()R version 3.0.0 (2013-04-03)
Platform: x86_64-w64-mingw32/x64 (64-bit)

[關鍵字]:

CPU Time, System Time, compute, function time

--","R_Language"
"2222","M.1428666202.A.73D","naturalsmen","問題","R的backtest包",2015-04-10 19:43:19,NA,NA,"- 問題: backtest package中backtest的應用

[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

由於這學期在學校修了計量的課，利用arima建模後要跑回測

可是用?backtest查詢或網上資料的範例都是data frame的形式

蔡瑞胸有一個網站裡面寫得和backtest的函式定義不太一樣

怎樣都run不出來@@

程式碼網址如下

有請各位大神開示

[程式範例]:程式碼可貼於以下網站：http://pastie.org/10084451失敗版backtest(data, in.var="""", ret.var="""", by.period=F) ((查到的資料網址：http://faculty.chicagobooth.edu/ruey.tsay/teaching/bs41202/sp2014/檔案在Homework:
HW2 Data sets used m-umcsent.txt

solution:http://ppt.cc/KUgR先謝謝c大了<(_ _)>


[環境敘述]:請提供 sessionInfo() 的輸出結果，裡面含有所有你使用的作業系統、R 的版本和套件版本資訊，讓版友更容易找出錯誤[關鍵字]:backtest, quantitative analysis--","R_Language"
"2223","M.1428516157.A.53C","Wush978","問題","Re: signifi.code",2015-04-09 02:02:32,NA,NA,"※ 引述《markbaseball (Mark)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 請問各位在回歸分析時，預設的Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: 但是，我現在要檢定的是係數是否異於1，不是0。請問有辦法更改預設值嗎?: 謝謝各位的幫忙: [程式範例]:參考連結:http://stackoverflow.com/questions/8089797/inference-about-slope-coefficient-in-rlibrary(car)
g <- lm(dist ~ speed, cars)
linearHypothesis(g, ""speed = 4"")

## 方法2

library(dplyr)
cars2 <- mutate(dist = dist - 4 * speed)
lm(dist ~ speed, cars2) %>% summary

--","R_Language"
"2224","M.1428479001.A.8E8","owem0410","問題","新手關於矩陣輸出輸入問題",2015-04-08 15:43:19,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)使用者(已經有用R 做過不少作品)[程式範例]:舉例來說我創造這個矩陣poker_vector <- c(140, -50, 20, -120, 240)roulette_vector<- c(-24, -50, 100, -350, 10)temp=data.frame(poker_vector,roulette_vector)rownames(temp)=c(""mon"",""Tue"",""Wed"",""THur"",""FRI"")然後我的temp[""mon"",]會是poker_vector roulette_vectormon          140             -24但是如果我write.csv之後再read.csv卻沒辦法找到read.csv("""")[""mon"",]有辦法在輸入又輸入之後的格式不要走掉?[關鍵字]:選擇性，也許未來有用--","R_Language"
"2225","M.1428288069.A.E9C","celestialgod","問題","Re: 四分位數Q1和Q3的計算",2015-04-06 10:41:07,NA,NA,"※ 引述《yeuan (心要夠堅定)》之銘言：: [問題類型]:: 一組數列  用R計算跟手算的不同: [軟體熟悉度]:: 新手(剛開始摸索): [問題敘述]:: 一組數列:-10,-6,-2,2,6,10  計算Q1與Q3: Q1=0.25*6=1.5  →1.5不是整數  故找比1.5大的下一個整數為2: 所以Q1應該為-6  以此類推Q3應該為6: 但是R算出來Q1=-5 Q3=5: 請問我有哪邊弄錯了嗎@@  不太明白為什麼會不一樣: [程式範例]:: y=c(-10,-6,-2,2,6,10): quantile(y,probs=c(0.25,0.75))According to R manual (部分節錄)

quantile(x, probs = seq(0, 1, 0.25), na.rm = FALSE,
         names = TRUE, type = 7, ...)

where type is an integer between 1 and 9 selecting one of the nine quantile
algorithms detailed below to be used.

For types 1, 2 and 3, quantile of type i at quantile p is a discontinuous
function of p. For types 4 through 9, it is a continuous function of p.

For R >= 2.0.0, the default type is 7.


接著實作type 7給你看

type 7: 利用內插找sample quantile，因此你要先決定每一個x是對應在哪

根據manual提供的公式，第k個x對應的p為 p[k] = (k - 1) / (n - 1)

f = function(k, n) (k-1) / (n-1)
f(1:6, 6)
# [1] 0.0 0.2 0.4 0.6 0.8 1.0

因此，當有6個sample時，分別對應到，0, 0.2,... , 1.0

你所求的0.25就是用x的第二個跟第三個資料做內插

假設所求是xx，0.25的quantile，資料同你的，是-10, -6, -2, 2, 6, 10

-2 - (-6)    xx - (-6)
--------- = ----------- => 20 = (xx + 6)*20 => xx = -5
0.4 - 0.2   0.25 - 0.2

用程式算：

interpolate_f = function(x, q){
  y = rep(NA, length(q))
  p = (seq_along(x) - 1) / (length(x)-1)
  for (i in seq_along(q)){
    loc = sum(q[i] >= p)
    y[i] = (x[loc+1] - x[loc]) / (p[loc+1] - p[loc]) *
      (q[i] - p[loc]) + x[loc]
  }
  return(y)
}

interpolate_f(y, c(.25, .75)) # -5, 5
# 同quantile的答案


補充一點：你要的quatile應該是type 1

--","R_Language"
"2226","M.1428284147.A.039","yeuan","問題","四分位數Q1和Q3的計算",2015-04-06 09:35:45,NA,NA,"[問題類型]:

一組數列  用R計算跟手算的不同


[軟體熟悉度]:

新手(剛開始摸索)

[問題敘述]:

一組數列:-10,-6,-2,2,6,10  計算Q1與Q3

Q1=0.25*6=1.5  →1.5不是整數  故找比1.5大的下一個整數為2

所以Q1應該為-6  以此類推Q3應該為6

但是R算出來Q1=-5 Q3=5

請問我有哪邊弄錯了嗎@@  不太明白為什麼會不一樣


[程式範例]:

y=c(-10,-6,-2,2,6,10)
quantile(y,probs=c(0.25,0.75))

--","R_Language"
"2227","M.1428254690.A.A02","andrew43","問題","Re: signifi.code",2015-04-06 01:24:47,NA,NA,"我舉個例看你可以了解多少。
這不是從 R 的功能達成的，而是從原理
t = (beta_hat - beta) / (std error)
直接算來的。

x1 <- c(3,5,2,6,3,2,3)
x2 <- c(3,6,3,5,6,4,2)
y  <- c(1,2,3,4,5,6,7)

fit <- lm(y ~ x1 + x2)
sol <- summary(fit)

# 求 H0: beta = 0 的雙尾檢驗 p 值
t.val.0 <- abs(sol$coefficients[,1] - 0) / sol$coefficients[,2]
2 * pt(t.val.0, df = 4, lower.tail=F)

# 求 H0: beta = 1 的雙尾檢驗 p 值
t.val.1 <- abs(sol$coefficients[,1] - 1) / sol$coefficients[,2]
2 * pt(t.val.1, df = 4, lower.tail=F)


也可以藉由 package aod 的 wald.test()

# 求 H0: beta = 1 的雙尾檢驗 p 值
library(aod)
wald.test(b = coef(fit), Sigma = vcov(fit), H0 = 1, Terms = 1, df = 4)
wald.test(b = coef(fit), Sigma = vcov(fit), H0 = 1, Terms = 2, df = 4)
wald.test(b = coef(fit), Sigma = vcov(fit), H0 = 1, Terms = 3, df = 4)※ 引述《markbaseball (Mark)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 請問各位在回歸分析時，預設的Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: 但是，我現在要檢定的是係數是否異於1，不是0。請問有辦法更改預設值嗎?: 謝謝各位的幫忙: [程式範例]:--http://apansharing.blogspot.com/--","R_Language"
"2228","M.1428249787.A.180","markbaseball","問題","signifi.code",2015-04-06 00:03:04,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請問各位在回歸分析時，預設的Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1但是，我現在要檢定的是係數是否異於1，不是0。請問有辦法更改預設值嗎?謝謝各位的幫忙[程式範例]:--","R_Language"
"2229","M.1428227452.A.A5F","a126040023","問題","caret中的dnn無法處理classification問題",2015-04-05 17:50:47,NA,NA,"[問題敘述]:

我本來想用caret來對models作ensembling 但在用dnn作訓練時會出現以下的錯誤訊息

final tuning parameters could not be determined

後來我自己簡單做了一個dataset來測試發現dnn可以處理regression但沒辦法處理

classification的問題。我在網路上找到以下的方法 但也沒效https://github.com/topepo/caret/issues/73請問有人有遇到相同或類似的問題嗎？

[程式範例]:

        set.seed(123)
        library(caret)

        x  <- rnorm(500)
        y <-  rnorm(500) + x
        z <- as.factor(sample(0:1,500,replace = TRUE))
        data <- data.frame(x = x, y = y, z = z)

        model_works <- train(x~., data = data, method = 'dnn')
        model_fails <- train(z~., data = data, method = 'dnn')

--","R_Language"
"2230","M.1427973019.A.1CA","alasa15","問題","對一個dataframe裡的column做替換",2015-04-02 19:10:13,NA,NA,"我現在造一個data frame z

x <- c(3,2,3,2,3,1,1,2)
y <- 1:8
z <- as.data.frame(cbind(x,y))

對這個data frame z

請問有沒有不用loop的方法把column x裡面的 1 2 3 替換成 'a' 'b' 'c' 呢？

謝謝

--","R_Language"
"2231","M.1427958922.A.940","psinqoo","問題","shinyapp 顯示問題",2015-04-02 15:15:18,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的部份app 有問題
出現

The application unexpectedly exited.
Diagnostic information has been dumped to the JavaScript error console.http://ppt.cc/XXLw掛上 ip:3838 時才出現這問題



[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[環境敘述]:centos 7[關鍵字]:

shiny
JavaScript選擇性，也許未來有用--

--","R_Language"
"2232","M.1427938932.A.4D6","koai","問題","定時工作",2015-04-02 09:42:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)*[m[問題敘述]:想要請問各位，不知道R是否有可以定時做某個任務的功能?例如每天固定某個時間做一個指定的任務，或是固定一個時間間隔，讓R去做某個任務，此個R session 會一直開著，時間到了R就會做指定的事情這樣!請各位幫忙指教~ 謝謝~[關鍵字]:定時--","R_Language"
"2233","M.1427893115.A.FCC","fortooth","問題","需要學R的command line嗎",2015-04-01 20:58:33,NA,NA,"其實我對於command line不太熟 但是之前曾經看過有人用command line來寫code

包括C, R, java...等等。所以想問一下到底command line和Rstudio這種有圖形化介面

的好壞是差在哪裡？

另外如果要學command line的話應該要先學什麼呢？譬如像是linux, unix的指令

之類的？

--","R_Language"
"2234","M.1427881473.A.71F","miao2361","問題","爬批踢踢文章內容",2015-04-01 17:44:26,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的問題一用httr、XML套件想要把批踢踢的文章們存成.txt檔以利後續text mining

但是八卦板因為有「確認已滿18歲」的網頁而無法存出文章問題二關於RCurl的問題（詳見以下）問題一library(XML)
library(httr)
start <- regexpr('www', line)[1]
end <- regexpr('html', line)[1]

if(start != -1 & end != -1){
  url <- substr(line, start, end+3)
  html <- content(GET(url), encoding=""UTF8"")
  doc <- xpathSApply(html, ""//div[@id='main-content']"", xmlValue)
  name <- strsplit(url, '/')[[1]][4]
  write(doc, gsub('html', 'txt', name))
}

# 當 讀入八卦板以外的批踢踢文章網址
line = ""https://www.ptt.cc/bbs/StupidClown/M.1427811176.A.552.html""工作路徑中會出現一個新的txt檔，其中存著這篇笨版文章的內容

# 當 讀入八卦板網址
line = ""https://www.ptt.cc/bbs/Gossiping/M.1427816656.A.450.html""存下來的txt檔裡面卻是空的。


研判應該是八卦板的十八歲限制網頁造成https://www.ptt.cc/bbs/Gossiping/M.1427816656.A.450.html想請問版上高手如何跳過這個網頁呢？問題二原程式碼
  url <- substr(line, start, end+3)
  html <- content(GET(url), encoding=""UTF8"")
  doc <- xpathSApply(html, ""//div[@id='main-content']"", xmlValue)
  name <- strsplit(url, '/')[[1]][4]
  write(doc, gsub('html', 'txt', name))


原本想用RCurl套件來做第二行
  html <- htmlParse(getURL(url), encoding='UTF-8')

存出來的html卻失敗> html<!DOCTYPE html PUBLIC ""-//W3C//DTD HTML 4.0 Transitional//EN""""http://www.w3.org/TR/REC-html40/loose.dtd""><html><head><title>301 Moved Permanently</title></head><body bgcolor=""white""><center><h1>301 Moved Permanently</h1></center><hr><center>nginx</center></body></html>但後來改成用httr套件的content()和GET()就可以了，卻不明白為什麼XD



---

自己研究了一下，以上問題可能會觸碰到 HTTP request header的範疇，

但我過去並沒有學過這方面的知識

不知道版上各位大大有沒有推薦的文章可以介紹自學呢？

非常感恩∼∼∼∼！！


[環境敘述]:> sessionInfo()R version 3.1.2 (2014-10-31)
Platform: x86_64-w64-mingw32/x64 (64-bit)


--","R_Language"
"2235","M.1427877961.A.C70","celestialgod","問題","Re: 坐標軸變更",2015-04-01 16:45:58,NA,NA,": ※ 引述《coke228 (coke...)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 我的資料範圍是0.1到500 我想畫圖 但希望2以下是線性坐標 2以上是log坐標 請問可行: : 嗎？library(lattice)
library(data.table)
library(dplyr)
library(magrittr)

# data generation
dat = rnorm(50, 0, 100) %>% abs() %>% tbl_dt() %>%
  setnames(""x"") %>% mutate(y = 3*x+rnorm(nrow(.)))

# scale function
f = function(x) {
  xt = x
  xt[xt >= 2] = xt[xt >= 2] %>% log10() %>% add(2)
  return(xt)
}

# plot
label = c(0, 2, 50*c(1,2,4))
xyplot(y ~ f(x), dat, scale = list(
  x = list(at = f(label), label = label,
  limit = c(0, f(max(dat$x))*1.1))))

--","R_Language"
"2236","M.1427874410.A.2AF","andrew43","問題","Re: 坐標軸變更",2015-04-01 15:46:46,NA,NA,"我不知道有沒有直接的解法，但硬把資料換算後並自行補上軸線可能是可行的做法。
請參考以下例子。

## 造一組假資料 x，並洗亂大小
x <- sample(c(seq(0.1, 1.9, 0.1), seq(2:500)))

## y 只是用來畫圖的，不是重點
y <- x + rnorm(length(x), 0.5, 1)

## x >= 2 者進行 log10() + 2 轉換，生成 m$xt
m <- data.frame(x = x, y = y)
m$xt <- m$x
m$xt[m$x >= 2] <- log10(m$x[m$x >= 2]) + 2


par(mfrow = c(2, 1))

## x 和 y 的對應圖
plot(y ~ x, data = m)

## newx 和 y 的對應圖，但不畫 x 軸
plot(y ~ xt, data = m, xaxt = ""n"")

## 畫上 x 軸前段
axis(1,
  at = c(0, 1, 2),
  labels = c(""0"", ""1"", ""2"")
)

## 畫上 x 軸後段
axis(1,
  at = c(log10(5)+2, 3, log10(50)+2, 3, log10(500)+2),
  labels = c(""5"", ""10"", ""50"", ""100"", ""500"")
)※ 引述《coke228 (coke...)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我的資料範圍是0.1到500 我想畫圖 但希望2以下是線性坐標 2以上是log坐標 請問可行: 嗎？--http://apansharing.blogspot.com/--","R_Language"
"2237","M.1427865540.A.06B","coke228","問題","",2015-04-01 13:18:57,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
我的資料範圍是0.1到500 我想畫圖 但希望2以下是線性坐標 2以上是log坐標 請問可行
嗎？


--","R_Language"
"2238","M.1427811718.A.EFD","JX660","問題","Re: as.factor()和factor()",2015-03-31 22:21:56,NA,NA,"※ 引述《LouisPion (府城好男兒)》之銘言：:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: factor()可以將字串或整數向量弄成因子，: 而as.factor()告訴R把物件視作因子，我不太清楚二者的差別...: 具體的問題是，什麼時候用factor，什麼時候用as.factor？: 不好意思，請教版上先進~: [程式範例]:: y = c(-1, 1, -1, -1, 1): names(y) = seq(1, 5, 1): factor(y): as.factor(y): # 不僅顯示的結果一樣，: # class(y)、typeof(y)、mode(y)結果也一樣: [關鍵字]::: 因子、factor、as.factor:

提供一些小例子 或許有助了解

例如 我手上的觀測值分成五大類如下

>Data$Type
[1] TNBC      HER2+     Luminal-A Luminal-B Normal
Levels: HER2+ Luminal-A Luminal-B Normal TNBC

如果我依照Type去畫Boxplot時
R就會按照levels的順序(字母排序) 即
HER2+ Luminal A Luminal B Normal TNBC 由左而右畫Boxplot

但是因為一些臨床上的特性 我需要他的排序是按照
Normal Luminal-A  Luminal-B  TNBC HER2+ 的類別排列

如果用factor就可以更動level 也可以只取特定的類別的資料
如下> Data$Type<- factor(Data$Type,levels=c(""Normal"",""Luminal-A"",""Luminal-B"",
""TNBC"",""HER2+""))> Data$Type[1] TNBC      HER2+     Luminal-A Luminal-B Normal
Levels: Normal Luminal-A Luminal-B TNBC HER2+> Subtype<- factor(Data$Type,levels=c(""Luminal A"",""Luminal B"",""TNBC"",""HER2+""))> Subtype[1] TNBC      HER2+     Luminal A Luminal B <NA>
Levels: Luminal A Luminal B TNBC HER2+


像這樣 資料本身次序沒有更動
卻可以更改畫圖以及其他指令等等的次序
也可以只畫特定目標
雖然基本卻很好用

as.factor()就不能做到了

只能用as.factor() 而不能用factor() 的情況
好像比較少見 我自己印象中不太有


--","R_Language"
"2239","M.1427800158.A.338","ntme","問題","Re: 矩陣中的屬性不同",2015-03-31 19:09:14,NA,NA,"high <- c(166, 153, 181, 174)
weight <- c(55, 47, 80, 66)
gender <- c(""female"", ""female"", ""male"", ""male"")
number <- c(""g1"", ""g2"", ""b1"", ""b2"")

DF <- data.frame(high, weight, gender, number)

rownames(DF) <- c(""student1"", ""student2"", ""student3"", ""student4"")

大概是這樣0.0※ 引述《yeuan (心要夠堅定)》之銘言：: [問題類型]:: 想在R中建一組資料(類似下面這樣): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 原本嘗試用matrix  但是似乎因為屬性不同而無法: 有什麼方式可以比較快地做出呢?: (high & weight 是數字要能運算不能全變文字@@):                 high    weight   gender   number:      student1   166       55     female    g1:      student2   153       47     female    g2:      student3   181       80      male     b1:      student4   174       66      male     b2--

114 > 112 bj4

melody

--","R_Language"
"2240","M.1427737253.A.C3E","andrew43","問題","Re: 矩陣中的屬性不同",2015-03-31 01:40:50,NA,NA,"※ 引述《yeuan (心要夠堅定)》之銘言：: [問題類型]:: 想在R中建一組資料(類似下面這樣): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 原本嘗試用matrix  但是似乎因為屬性不同而無法: 有什麼方式可以比較快地做出呢?: (high & weight 是數字要能運算不能全變文字@@):                 high    weight   gender   number:      student1   166       55     female    g1:      student2   153       47     female    g2:      student3   181       80      male     b1:      student4   174       66      male     b2這是一個新手問題，所以幫你一步一步說明。

1. 在試算表軟體中建立以下資料。從最左最上格（A1）開始填。如果有缺失值就空白。
            id  high   weight     gender   number
      student1   166       55     female       g1
      student2   153       47     female       g2
      student3   181       80      male        b1
      student4   174       66      male        b2

2. 把資料另存新檔成 CSV 檔案，檔名叫 mydata，副檔名自然是 csv。
   把 CSV 檔放在 C disc 下的 test 資料夾下（自己創）。

3. 打開 R，輸入以下原始碼。

setwd(""c:/test"")
dat <- read.csv(""mydata.csv"")

或是

dat <- read.csv(c:/test/mydata.csv)

於是 dat 為所求。

--http://apansharing.blogspot.com/--","R_Language"
"2241","M.1427733466.A.29B","yeuan","問題","矩陣中的屬性不同",2015-03-31 00:37:43,NA,NA,"[問題類型]:

想在R中建一組資料(類似下面這樣)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]:

原本嘗試用matrix  但是似乎因為屬性不同而無法

有什麼方式可以比較快地做出呢?

(high & weight 是數字要能運算不能全變文字@@)


                high    weight   gender   number

     student1   166       55     female    g1

     student2   153       47     female    g2

     student3   181       80      male     b1

     student4   174       66      male     b2



--","R_Language"
"2242","M.1427724883.A.3FD","celestialgod","問題","Re: iteration growing parallel",2015-03-30 22:14:41,NA,NA,"※ 引述《memphis (讓你喜歡這世界~)》之銘言：: 手上有條蛋白質序列, 每個點都會突變, 遇到K, 切下來, 列出所有可能, 舉例如下: A B1 C1 K E F1:   B2 C2 D   F2: #### result ####: A B1 C1 K: A B2 C1 K: A B1 C2 K: A B2 C2 K: A B1 C1 D F1: A B2 C1 D F1: A B1 C2 D F1: A B2 C2 D F1: ....      F2: ....: #### 問題來了 ####: 如果一直遇不到 K, 突變點一多(爬到連續20點, 2000萬種組合, 寫出檔案大小達到2.xG): 一個CPU算到沒完: 想把他平行化, 我已把function改成可以 一點叫一次: EX: call:  function(start=1, tmp_prefix=""""): out :  A: call:  function(start=2, tmp_prefix=""A""): out :  AB1 AB2: call:  function(start=3, tmp_prefix=c(""AB1"", ""AB2"")): out :  AB1C1 AB2C1 AB1C2 AB2C2: 由以上可見, 如果n點後來個1000萬的out, 就要卡住了: 所以我想100萬就拆開, 讓不同的CPU去算: 1.請問大家知不知道一些比較方便的package 可以讓我開cpu, 指定哪個cpu算那些input: 2.parallel 那種 cl=socket(n), apply  好像不能讓我指定, 應該是行不通: 3.RMPI又太兇狠了...太久沒有寫...連環境都還沒有設定好: 4.抱歉沒有sample code 可以跑, 所以大家如果有什麼概念用sudo code 我就很感激了花了一點時間寫成Rcpp

我認為這樣的做法快又有效。","R_Language"
"2243","M.1427719503.A.944","memphis",NA,"iteration growing parallel",2015-03-30 20:45:00,NA,NA,"手上有條蛋白質序列, 每個點都會突變, 遇到K, 切下來, 列出所有可能, 舉例如下

A B1 C1 K E F1
  B2 C2 D   F2

#### result ####

A B1 C1 K
A B2 C1 K
A B1 C2 K
A B2 C2 K

A B1 C1 D F1
A B2 C1 D F1
A B1 C2 D F1
A B2 C2 D F1
....      F2
....

#### 問題來了 ####
如果一直遇不到 K, 突變點一多(爬到連續20點, 2000萬種組合, 寫出檔案大小達到2.xG)
一個CPU算到沒完

想把他平行化, 我已把function改成可以 一點叫一次

EX
call:  function(start=1, tmp_prefix="""")
out :  A
call:  function(start=2, tmp_prefix=""A"")
out :  AB1 AB2
call:  function(start=3, tmp_prefix=c(""AB1"", ""AB2""))
out :  AB1C1 AB2C1 AB1C2 AB2C2

由以上可見, 如果n點後來個1000萬的out, 就要卡住了
所以我想100萬就拆開, 讓不同的CPU去算

1.請問大家知不知道一些比較方便的package 可以讓我開cpu, 指定哪個cpu算那些input
2.parallel 那種 cl=socket(n), apply  好像不能讓我指定, 應該是行不通
3.RMPI又太兇狠了...太久沒有寫...連環境都還沒有設定好
4.抱歉沒有sample code 可以跑, 所以大家如果有什麼概念用sudo code 我就很感激了














--","R_Language"
"2244","M.1427514820.A.BF8","andrew43","問題","Re: 資料來源不依",2015-03-28 11:53:37,NA,NA,"※ 引述《markbaseball (Mark)》之銘言：: 標題: [問題] 資料來源不依: 時間: Sat Mar 28 00:55:43 2015:
:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):
:: [軟體熟悉度]::: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]::  回歸中各個自變數與應變數來源不同:: [程式範例]::   我在書中看見的範例都長這樣:  model1=lm(y~x1+x2+....+xk,data= mydata):  但是因為我的y是一個檔，x1也是一個檔，而x2~xk來自同一個檔案:: 那請問後面data=的部分該怎麼寫呢??:: --","R_Language"
"2245","M.1427475346.A.0B6","markbaseball","問題","資料來源不依",2015-03-28 00:55:43,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:回歸中各個自變數與應變數來源不同[程式範例]:我在書中看見的範例都長這樣model1=lm(y~x1+x2+....+xk,data= mydata)但是因為我的y是一個檔，x1也是一個檔，而x2~xk來自同一個檔案那請問後面data=的部分該怎麼寫呢??--","R_Language"
"2246","M.1427434911.A.D41","celestialgod","分享","rle指令 (rewritten in Rcpp)",2015-03-27 13:41:48,NA,NA,"[關鍵字]: lengths of runs of equal values in a vector

[出處]:https://stat.ethz.ch/R-manual/R-devel/library/base/html/rle.html[重點摘要]:

以前沒看過的指令，感覺很實用

並且改寫一個Rcpp的版本：http://pastebin.com/0NbM1qbB--","R_Language"
"2247","M.1427364415.A.D8A","psinqoo","問題","Rstudio server library",2015-03-26 18:06:51,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的Rstudio server package 包問題

user library 與system library 要如何合併http://ppt.cc/egxShttp://ppt.cc/nMAvhttp://ppt.cc/xrpJ[程式範例]:[環境敘述]:[關鍵字]:

rstudio server選擇性，也許未來有用--

--","R_Language"
"2248","M.1427349985.A.7C9","LouisPion","問題","as.factor()和factor()",2015-03-26 14:06:22,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的factor()可以將字串或整數向量弄成因子，

而as.factor()告訴R把物件視作因子，我不太清楚二者的差別...

具體的問題是，什麼時候用factor，什麼時候用as.factor？

不好意思，請教版上先進~


[程式範例]:

y = c(-1, 1, -1, -1, 1)
names(y) = seq(1, 5, 1)
factor(y)
as.factor(y)
# 不僅顯示的結果一樣，
# class(y)、typeof(y)、mode(y)結果也一樣


[關鍵字]:因子、factor、as.factor--","R_Language"
"2249","M.1427331787.A.5B3","psinqoo","問題","Re: shiny in LINUX",2015-03-26 09:03:03,NA,NA,"全砍掉重來 (這是錯的，因為沒找出問題)

我的作法 ubuntu 到http://www.ubuntu-tw.org/modules/tinyd0/桌面板 12.04 LTS 64位元 下載 燒錄成光碟

剩下的後續R 就用 Wush的碼 完成

總算進入 shiny server  & LINUX 新手村

接下就是如何將 shinyapp 掛上 server

不過看了一夜還是不太懂......

有好的理解方式嗎? 或範例嗎?

==================================
之前下載 ubuntu 後 就用官網的方式

導致很多 R package 幾乎都無法裝上

把shiny server Rstudio R 移除後

用Wush碼 一樣是不能動 暫時我只能猜 ubuntu

那段更新檔 可以有沒裝到或是 安裝不完整

==================================

最後感謝 版主 Wush978 文件※ 引述《psinqoo (零度空間)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: ubuntu 12.04: shiny Catools package 安裝失敗: 爬了 N篇文 還是無解。: 對了shinyapp 佈署在自己的機器上 要如何布: 看網站的文 還是不懂 我想在自己機器佈署: 免費的 25H 很快就沒了: =============================: caTools 還是無解......: [程式範例]::
:: [環境敘述]::: ubuntu 12.04:: [關鍵字]:: shiny: caTools:
:

--







--","R_Language"
"2250","M.1427273829.A.D28","psinqoo","問題","shiny 文字問題",2015-03-25 16:57:06,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的使用 shinyapp 跑 簡易文字採礦

字頻 只顯示次數 文字雲圖 跑出空格圖

a1<-read.csv(inFile$datapath, header=input$header,fileEncoding='big5')

改成UTF-8 也一樣


附圖如下http://ppt.cc/waX5字頻就只顯示 數字 在 R 跑正常http://ppt.cc/thPchttp://ppt.cc/qeHp文字雲http://ppt.cc/EHGw[程式範例]:程式碼可貼於以下網站：*[m[環境敘述]:[關鍵字]:tmtmcnRwordsegwordcloud--

--","R_Language"
"2251","M.1427258673.A.6F4","LiangG","問題","迴歸結果輸出文字檔",2015-03-25 12:44:30,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的lm.model=lm(y~x1+x2,data=mytabel,x=T)
summary(lm.model)
如何將 summary(lm.model)寫進文字檔
我用cat 和 write.table 都不行


--","R_Language"
"2252","M.1427089414.A.C4F","psinqoo","問題","shiny in LINUX",2015-03-23 13:43:31,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的ubuntu 12.04

shiny Catools package 安裝失敗

爬了 N篇文 還是無解。

對了shinyapp 佈署在自己的機器上 要如何布

看網站的文 還是不懂 我想在自己機器佈署

免費的 25H 很快就沒了
=============================


caTools 還是無解......







[程式範例]:[環境敘述]:ubuntu 12.04[關鍵字]:

shiny
caTools--

--","R_Language"
"2253","M.1427024031.A.6D4","psinqoo","問題","xts in linux",2015-03-22 19:33:47,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的xts 無法安裝於 linux ubuntu 12.04.2 LTS

R 3.0.2

[程式範例]:/bin/bash: gfortran：命令找不到make: *** [period.max.o] Error 127ERROR: compilation failed for package ‘xts’[環境敘述]:r 3.0.2ubuntu[關鍵字]:
xts linux ubuntuxts--

--","R_Language"
"2254","M.1427010184.A.E73","popxpopxpop","問題","從large list中將各類別存成各表",2015-03-22 15:43:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(在coursera修完兩門的新手，問些蠢問題請包涵）

[問題敘述]:
想將ㄧ大表格，依照類別分割並另存各表。

依照各州再依照死亡率、出生率等排序，想分別存成'每州'的表格。主要目標是想抓各州
死亡率最低的醫院、出生率最高的醫院、出生率第五的醫院等

目前做法做到卡關，手機發文概略寫一下，排版亂請見諒

感謝幫助

[程式範例]:
X<-read.csv()
subx<-split(x,x$state)
這時會存成含54個元素但各元素row不同的large list,沒去na值
然後就不知道怎麼寫了，知道要迴圈，但不知道怎麼分割元素另存
For ( I in x$state){
list[i]<-lappy(subx[i〕,........

}

[環境敘述]:

Rsdutio3.1.2


[關鍵字]:


選擇性，也許未來有用

--","R_Language"
"2255","M.1426828595.A.49B","skylikewater","問題","用 Shiny 做資料庫表單",2015-03-20 13:16:22,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)



[問題敘述]:

我在自己的 Shiny server 上寫一個能讀 MySQL 資料的網頁
現在想在其中一個 tab 加入操作資料庫的功能。

例如說，我可以選擇 table 中的某一列，
然後下面各個變數就會用預設值的形式叫出那筆資料，
我可以直接更改、然後送出修訂。

目前我的 UI 是：

output$KeyIn = renderUI({
  fluidPage(
    numericInput(""RowChoice"", ""選擇第幾筆資料"", value = 1,
                 min = 1, max = dim(Data)[1], step = 1),
    h2(""以下是編輯區"")
    fluidRow(
      column(width = 3,textInput(""Var"", ""變數"",value =Data$Var[input$RowChoice]))),
    fluidRow(
      column(width = 12, offset = 6,
             submitButton(""送出修訂""))
    )
  )
})

Data$Var[isolate(input$RowChoice)]
isolate(Data$Var[input$RowChoice]) 都不合法

我試過另外寫一個 reactive:

  VarReac = reactive({as.numeric(input$RowChoice)})

或是用一個 function:

  VarFunc = function(input) { return(input$RowChoice) }

然後用 VarFunc() 呼叫都不行。
我希望這個網站可以盡可能地用 R 來完成，
所以想徵詢大家，可以怎麼在 R 實現這件事傍晚補充 =>我寫出一個合法的版本了但我看不太懂：textInput(""Var"", ""變數"",value =reactive(function() {if (is.null(input$RowChoice)) {return(""NULL"")} else {return(isolate({Data$Var[input$RowChoice])}))}})())我不太懂為什麼 reactive 一定要內含一個 function、再去 no input ""()""
而且為什麼一定要考慮 is.null 的狀況？
我直接把 isolate({Data$Var[input$RowChoice]}) 寫在 value = 之後卻又不行？


[程式範例]:
如上

[環境敘述]:
R version 3.1.2 (2014-10-31)
Platform: x86_64-redhat-linux-gnu (64-bit)

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base
other attached packages:
[1] RMySQL_0.10.2 DBI_0.3.1     shiny_0.11.1

[關鍵字]:

Shiny, form, reactive value

--","R_Language"
"2256","M.1426729346.A.961","LouisPion","問題","物件型態 Types of Objects",2015-03-19 09:42:23,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
對typeof()的傳回值感到疑惑：

問題1. 我以為typeof()是傳回物件型態，也就是三次都應該是matrix

問題2. 第三次typeof()與mode()傳回值相同，讓我越搞不清這兩個function

       到底原意是要做什麼...

可能我腦筋被MATLAB綁太死了...一直抓不到R的感覺ORZ

不好意思，麻煩先進撥冗回答了，謝謝~

[程式範例]:# 1. 整數矩陣> m = matrix(1:15, 3, 5)> typeof(m)[1] ""integer""> mode(m)[1] ""numeric""# 2. 浮點數矩陣> m = matrix(1.1:15.1, 3, 5)> typeof(m)[1] ""double""> mode(m)[1] ""numeric""# 3. 布林值矩陣> m = matrix(T, 2, 3)> typeof(m)[1] ""logical""> mode(m)[1] ""logical""[關鍵字]:typeof, mode, 物件型態--","R_Language"
"2257","M.1426691444.A.356","toptaster","問題","輸入資料筆數限制",2015-03-18 23:10:31,NA,NA,"不知道R有沒有輸入資料大小的限制?

我把一個存有約20萬筆的.csv檔用read.table匯入R後，
R內的資料筆數只有8萬多筆，整個匯入過程沒有出現錯誤訊息，
不知道是read.table的限制還是R本身限制？
有沒有辦法解決？

先謝謝各位解答。


--","R_Language"
"2258","M.1426661628.A.F97","yummy7922","問題","如何將lapply後的資料轉為一般資料格式",2015-03-18 14:53:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我的資料是重複測量的資料，我用lapply選取出每一個人的最後四筆資料，
但我不知道該如何將他轉成一般的資料格式。
現在的資料，是這個樣子，按照ID分組的感覺：
$fff4c5e1e7f914bce44c3457f7c2cd81
                                 id duration M1 M2 M3 M4 M5 M6
1: fff4c5e1e7f914bce44c3457f7c2cd81       39  0  0  0  0  0  0
2: fff4c5e1e7f914bce44c3457f7c2cd81       40  0  0  0  0  0  0
3: fff4c5e1e7f914bce44c3457f7c2cd81       41  0  0  0  0  0  0
4: fff4c5e1e7f914bce44c3457f7c2cd81       42  0  0  0  0  0  0

$fff4e01e81b34213be876000a815389d
                                 id duration M1 M2 M3 M4 M5 M6
1: fff4e01e81b34213be876000a815389d       40  0  0  0  0  0  0
2: fff4e01e81b34213be876000a815389d       41  0  0  0  0  0  0
3: fff4e01e81b34213be876000a815389d       42  0  0  0  0  0  0
4: fff4e01e81b34213be876000a815389d       43  0  0  0  0  0  0

但我希望他可以合在一起：

                                 id duration M1 M2 M3 M4 M5 M6
1: fff4c5e1e7f914bce44c3457f7c2cd81       39  0  0  0  0  0  0
2: fff4c5e1e7f914bce44c3457f7c2cd81       40  0  0  0  0  0  0
3: fff4c5e1e7f914bce44c3457f7c2cd81       41  0  0  0  0  0  0
4: fff4c5e1e7f914bce44c3457f7c2cd81       42  0  0  0  0  0  0
1: fff4e01e81b34213be876000a815389d       40  0  0  0  0  0  0
2: fff4e01e81b34213be876000a815389d       41  0  0  0  0  0  0
3: fff4e01e81b34213be876000a815389d       42  0  0  0  0  0  0
4: fff4e01e81b34213be876000a815389d       43  0  0  0  0  0  0


[程式範例]:http://ideone.com/N911zU以上是我打程式，資料s是長這樣：ID                               duration  M1   M2   M3  M4   M5   M6[1,] ""0000da7e3f97f8323d2687daea605216""   ""1""  ""0""  ""0""  ""0""  ""0""  ""0""  ""0""[2,] ""0000da7e3f97f8323d2687daea605216""   ""2""  ""0""  ""0""  ""0""  ""0""  ""0""  ""0""[3,] ""0000da7e3f97f8323d2687daea605216""   ""3""  ""0""  ""0""  ""0""  ""0""  ""0""  ""0""[4,] ""0000da7e3f97f8323d2687daea605216""   ""4""  ""0""  ""0""  ""0""  ""0""  ""0""  ""0""[5,] ""0000da7e3f97f8323d2687daea605216""   ""5""  ""0""  ""0""  ""0""  ""0""  ""0""  ""0""麻煩大家。--","R_Language"
"2259","M.1426589397.A.1FA","yaohwei","問題","如何將兩變數用/合併",2015-03-17 18:49:55,NA,NA,"各位高手大家好!

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題描述]

主要是手邊的data要作格式轉換

例如
id x1_1 x1_2 x2_1 x2_2 x3_1 x3_2 x4_1 x4_2
1     1    2    1    1    2    2    1    2
2     1    1    2    1    1    2    2    2
3     1    1    1    2    1    1    2    1
...
500   1    1    1    1    2    2    2    2

格式想轉變成

id   x1  x2  x3  x4
1   1/2 1/1 2/2 1/2
2   1/1 2/1 1/2 2/2
3   1/1 1/2 1/1 2/1
...
500 1/1 1/1 2/2 2/2

以上，小弟在此先謝謝各位高手

--","R_Language"
"2260","M.1426570706.A.398","psinqoo","分享","家禽交易行情",2015-03-17 13:38:16,NA,NA,"類別說明:- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)家禽交易行情(白肉雞/雞蛋)

open data 以 R 接資料

shiny 呈現http://data.gov.tw/node/7536#comment-2843https://salamonaska.shinyapps.io/chicken/[關鍵字]:

shiny quantmod forecast rjson


[出處]:


[重點摘要]:

open data 以 R 呈現

--







--","R_Language"
"2261","M.1426503592.A.F50","alasa15","問題","data.frame加column,且與上一項有關",2015-03-16 18:59:46,NA,NA,"我現在造一個data.frame z
z <- as.data.frame(matrix(1:8,4,2))
現在想要幫他加一個第三列
第三列的第一個元素 就是 第二列的第一個元素
第三列的第二個元素 是 第二列的第一與第二個元素的和
第三列的第三個元素 是 第二列的第二與第三個元素的和
以此類推
我看mutate好像沒這功能
這個在excel裡面很簡單
但在r裡面除了寫loop  還有其他方法嗎？
謝謝

--
→ kimgordon:我味增湯 都不放味曾與豆腐 改放菜頭排骨酥用肉燥提味    09/05 15:46
→ kimgordon:又清又香 但就略油 壽司改成糯米加香菇肉絲去蒸          09/05 15:47
→ kimgordon:這兩個配起來非常棒 最好是加點香菜                     09/05 15:47
推 justjihyun:那就是菜頭湯了吧..                                   09/05 15:48
→ kimgordon:不是菜頭湯 這味增湯 喝起來跟排骨酥湯90%口感很像       09/05 15:49
→ pusufu:那就是排骨酥湯阿幹                                       09/05 15:50

--","R_Language"
"2262","M.1426397900.A.CA9","vioan223","問題","silhouette 使用方法",2015-03-15 13:38:18,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想使用silhouette這個package
我把資料改成我的(其他都沒改)
但結果怪怪的
我想可能是有些變數必需修改
但因為我看不懂程式碼
不知道從何改
想請問有人成功使用過這個package嗎?
可以教我嗎?
我會非常感激
謝謝

package的pdf檔網址http://ftp.yzu.edu.tw/CRAN/web/packages/cluster/cluster.pdf在第66頁
--------------------------------------------------------------------

我複製example的範例
把原先""ruspini""的資料
改成我自己的資料""abbc""

然後將原範例算距離的方法""canberra""
改成另一個算距離的方法""euclidean""

其他都沒改 只改了這兩部分
我最終的目的就是希望透過這個方法
得到我的資料應該分K群

不知道程式這樣改之後是不是對的
再麻煩您幫我看看
謝謝

程式碼如下:
pr4 <- pam(abbc, 4)
str(si <- silhouette(pr4))
(ssi <- summary(si))
plot(si) # silhouette plot
plot(si, col = c(""red"", ""green"", ""blue"", ""purple""))# with cluster-wise
coloring
si2 <- silhouette(pr4$clustering, dist(abbc, ""euclidean""))
summary(si2) # has small values: ""euclidean""'s fault
plot(si2, nmax= 80, cex.names=0.6)
op <- par(mfrow= c(3,2), oma= c(0,0, 3, 0),
mgp= c(1.6,.8,0), mar= .1+c(4,2,2,2))
for(k in 2:6)
plot(silhouette(pam(abbc, k=k)), main = paste(""k = "",k), do.n.k=FALSE)
mtext(""PAM(abbc) as in Kaufman & Rousseeuw, p.101"",
outer = TRUE, font = par(""font.main""), cex = par(""cex.main"")); frame()
## the same with cluster-wise colours:
c6 <- c(""tomato"", ""forest green"", ""dark blue"", ""purple2"", ""goldenrod4"",
""gray20"")
for(k in 2:6)
plot(silhouette(pam(abbc, k=k)), main = paste(""k = "",k), do.n.k=FALSE,
col = c6[1:k])
par(op)


--","R_Language"
"2263","M.1426141048.A.600","celestialgod","問題","Re: 分組資料，找符合條件人數",2015-03-12 14:17:26,NA,NA,"※ 引述《yummy7922 (crucify)》之銘言：: ※ 引述《yummy7922 (crucify)》之銘言：:  不好意思，我沒有說明清楚，:  我想算的機率其實是很直觀的條件機率，例如：:  P(第二期使用b藥物|第一期使用a藥物):    = (第一期使用a藥且第二期使用b藥的人數)/(第一期使用a藥的人數): 但是我不知道該怎麼在分組之後，還能夠給定條件，: 計算出第一期使用a藥第二期使用b藥的人數。: 資料大概是長這樣：:    id   M_01  M_02  M_03  M_04  M_05  M_06  duration:   ace01    1     1     .....                    1:   ace01    0     1                              2:   ace01    0     0                              3:   swe02    0     1                              1:   swe02    1     1                              2:   kue03    0     1                              1:   kue03    1     0                              2:   kue03    0     1                              3:   kue03    1     0                              4:   kue03    1     1                              5: 其中，M_01表示有沒有服用第一種藥，共有六種藥，: duration表示為該位病人的第幾個月的觀察值。Updata a faster way to do.

code:http://pastebin.com/Eg7vn058> transitMatrix_eachTime[[1]] # 第二期的轉移矩陣[,1]      [,2]      [,3]      [,4]      [,5]      [,6]
[1,] 0.1579643 0.1652346 0.1625909 0.1711831 0.1784534 0.1645737
[2,] 0.1698612 0.1692003 0.1639128 0.1625909 0.1771315 0.1573034
[3,] 0.1635638 0.1775266 0.1569149 0.1675532 0.1682181 0.1662234
[4,] 0.1661085 0.1654387 0.1634293 0.1654387 0.1694575 0.1701273
[5,] 0.1722746 0.1648721 0.1561238 0.1641992 0.1709287 0.1716016
[6,] 0.1675862 0.1620690 0.1648276 0.1655172 0.1765517 0.1634483

(1,1)位置就是上一期服dose 1，下一期也是dose 1的條件機率
(1,2)位置就是上一期服dose 1，下一期服dose 2的條件機率，剩下依此類推
PS: 因此，轉移矩陣的每一個列，其和為1

--","R_Language"
"2264","M.1426084319.A.DB5","yummy7922","問題","Re: 分組資料，找符合條件人數",2015-03-11 22:31:55,NA,NA,"※ 引述《yummy7922 (crucify)》之銘言：: ※ 引述《yummy7922 (crucify)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 我的資料是一個重複測量的資料，資料中有當期是否使用藥物的資料(若有使用，設為1，: : 沒有為0)、還有記錄該筆資料為該位病人的第幾筆觀察值，我希望能算出，藥物轉換的機: : 率，例如有多少人第一期使用a藥物，但在第二期時轉換成使用b藥物。: : 資料中共有6種藥物，一位病人最多有48筆觀察值，: : (6x6)種轉換可能 x 47(個時間隔) = 1692 個機率值。: : 想請教各位高手們，該怎麼做比較有效率。不好意思，我沒有說明清楚，
 我想算的機率其實是很直觀的條件機率，例如：
 P(第二期使用b藥物|第一期使用a藥物)
   = (第一期使用a藥且第二期使用b藥的人數)/(第一期使用a藥的人數)
但是我不知道該怎麼在分組之後，還能夠給定條件，
計算出第一期使用a藥第二期使用b藥的人數。

資料大概是長這樣：

   id   M_01  M_02  M_03  M_04  M_05  M_06  duration

  ace01    1     1     .....                    1
  ace01    0     1                              2
  ace01    0     0                              3
  swe02    0     1                              1
  swe02    1     1                              2
  kue03    0     1                              1
  kue03    1     0                              2
  kue03    0     1                              3
  kue03    1     0                              4
  kue03    1     1                              5


其中，M_01表示有沒有服用第一種藥，共有六種藥，
duration表示為該位病人的第幾個月的觀察值。














--","R_Language"
"2265","M.1426052275.A.4BA","yummy7922","問題","分組資料，找符合條件人數",2015-03-11 13:37:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我的資料是一個重複測量的資料，資料中有當期是否使用藥物的資料(若有使用，設為1，
沒有為0)、還有記錄該筆資料為該位病人的第幾筆觀察值，我希望能算出，藥物轉換的機
率，例如有多少人第一期使用a藥物，但在第二期時轉換成使用b藥物。
資料中共有6種藥物，一位病人最多有48筆觀察值，
(6x6)種轉換可能 x 47(個時間隔) = 1692 個機率值。
想請教各位高手們，該怎麼做比較有效率。

--","R_Language"
"2266","M.1425821767.A.DFA","yeuan","問題","tinn-R 連結的問題",2015-03-08 21:36:04,NA,NA,"[問題類型]:

想用tinn-R編輯  但連結不到R

[軟體熟悉度]:
新手(正在開始摸索)

[問題類型]

在tinn-R 編輯完  按R control

就會出現下面這些

C:\Program Files\R\R-3.1.2\bin\Rgui.exe

The file above is not executable. Please, set it with
'Options/Main/R/Path/Gui'

上網查了好久  試了很多次都失敗

想請問要改哪邊的設定呢  謝謝

--","R_Language"
"2267","M.1425783081.A.44D","celestialgod","問題","rjava 2d string array",2015-03-08 10:51:19,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者

[問題敘述]:

我試著在java回傳2d string array

一直給我這樣的錯誤

method getStringMatrix with signature ()[[S not found


[程式範例]:

R code:

library(rJava)
.jinit()
.jaddClassPath(""pathToClass"")
test = .jnew(""Mytest"")
out = .jcall(test, ""[[S"", ""getStringMatrix"", simplify=TRUE) # error
out2 = .jcall(test, ""[[I"", ""getIntMatrix"", simplify=TRUE) # It worksworkable code:out = .jcall(test, ""[[Ljava/lang/String;"", ""getStringMatrix"", simplify=TRUE)

java code myTest.java:

public class myTest {
  public String[][] getStringMatrix(){
    String[][] stringMatrix = new String[][]{{""ABC"", ""BCD""}, {""CDE"", ""DEF""}};
    return stringMatrix;
  }
  public int[][] getIntMatrix() {
    int[][] intMatrix = new int[][]{{1,2,3},{4,5,6}};
    return intMatrix;
  }
  public static void main(String[] args) {
  }
}



[關鍵字]:

rjava, string array

--","R_Language"
"2268","M.1425753711.A.E71","pressure",NA,"徵R統計軟體家教",2015-03-08 02:41:48,NA,NA,"1.對象: 女研究生(無程式語言背景)
2.地點: 新竹市園區附近
3.科目：R統計軟體
4.上課時間：平日下午(可討論)
5.時薪：600/h (可商議)
6.條件：專精R, 並有強大統計背景及實作經驗，認知心理學相關佳(不是也沒關係)
        必須懂 linear mixed effect model 及 mixed effect logistic regression
        (主要要學這兩種)
7.聯絡方式：站內信 (請附簡歷跟聯絡方式email及手機, 合適者會以email聯絡)
8.附註：指導寫LMM程式然後講解給我聽，以及指導相關R軟體操作分析實際數據


--","R_Language"
"2269","M.1425560179.A.B7C","andrew43","問題","Re: 特製Boxplot盒鬚圖",2015-03-05 20:56:15,NA,NA,"首先，boxplot() 其實會回傳一個物件，我叫 z 物件好了。
這個 z 物件本身是一個 list，裡頭就是 boxplot 的各種資訊。
像是 z$stat 就是各變數的 quantiles，z$name 是各變數的名稱。

你可以觀察看看 bx.p <- boxplot(split(rt(100, 4), gl(5, 20))) 的
bx.p 實際上是回傳了什麼給你。

這個 z 物件可以自己建，就像建一個 list 一樣。
然後再以 bxp(z物件) 畫出一個 boxplot。
請看以下按你的需求設計的例子。

# 二組虛假資料
a <- c(1:100)
b <- c(50:1000)

# 建立 z 物件（本身是一個 list）
bxpObj <- list()

# 一定要有 bxpObj$stats 這項，裡頭是一個 matrix，
# 其中欄是變數，列是各 quantile，要有5列。
# 各 quantile 分別會被畫成下底線、下盒線、中位線、上盒線和上底線。
bxpObj$stats <- rbind(
    cbind(
        quantile(a, c(0.1, 0.25, 0.5, 0.75, 0.9)),
        quantile(b, c(0.1, 0.25, 0.5, 0.75, 0.9))
    )
)

# bxpObj$name 這項就是變數名稱
bxpObj$name <- c(""a"", ""b"")

# 重點來了：用 bxp() 畫
bxp(bxpObj)

# 直接用 points() 補畫你要求的 20% 和 80% quantile。
points(1, quantile(a, 0.2), pch=1) # a的20% quantile
points(1, quantile(a, 0.8), pch=2) # a的80% quantile
points(2, quantile(b, 0.2), pch=3) # b的20% quantile
points(2, quantile(b, 0.8), pch=4) # b的80% quantile


最後，如果你想自行改寫成一個新的 function，也要視你的資料而定。
例如是 myboxplot(變數，組別) 還是 myboxplot(matrix) 的寫法會不太一樣。
但重點就是我前面寫的：建一個 z 物件再餵 bxp() 吃下去就對了。※ 引述《ming790925 (MING)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 我想畫一個 boxplot 但不要內建那種，: 因為我在意的是某幾格特定的百分位數，: 還有我不希望畫出outliers: 因為找了滿久的 都沒有找到能達到這樣的套件: 想請問各位是否有印象有什麼套件已經能完成?: 舉例來說:: 除了中間的盒子外，我想要延伸出去到90% 10% quantile的值: 並在80% 20%也加上標記: 感激!!!!!: [關鍵字]:: boxplot quntile--http://apansharing.blogspot.com/--","R_Language"
"2270","M.1425552959.A.677","ming790925","問題","特製Boxplot盒鬚圖",2015-03-05 18:55:56,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我想畫一個 boxplot 但不要內建那種，
因為我在意的是某幾格特定的百分位數，
還有我不希望畫出outliers
因為找了滿久的 都沒有找到能達到這樣的套件
想請問各位是否有印象有什麼套件已經能完成?

舉例來說:
除了中間的盒子外，我想要延伸出去到90% 10% quantile的值
並在80% 20%也加上標記

感激!!!!!



[關鍵字]:
boxplot quntile

--","R_Language"
"2271","M.1425543290.A.A09","sansea","問題","讀取中文檔案",2015-03-05 16:14:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:想要抓PTT的資料來斷詞目前已經可以抓到資料並存成中文檔案可是利用 Corpus(DirSource(""docs"", encoding = 'UTF-8')) 讀取的時候中文字全部變成<U+開頭的字串

把查詢結果存到 TermDocumentMatrix
用 inspect 看結果應該是有斷成功
可是全部都變成奇怪的字了阿....

想請問怎麼把中文字找回來QQ


===已解決===
原本是在Win8.1上開發
換到Win7環境就沒問題了



[程式範例]:程式碼可以看這邊  http://ideone.com/icNr73--","R_Language"
"2272","M.1425459798.A.901","LouisPion","問題","install.package疑問",2015-03-04 17:03:13,NA,NA,"- 問題:

[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門[問題敘述]:為了實現用MATLAB call R，需要rcom，但從鏡像站找不到，網路上只抓得到舊版的...很好奇怎麼會是這樣的情況[程式範例]:後來在他人幫助下以以下指令完成：install.packages(c(""rscproxy"",""rcom""),repos=""http://rcom.univie.ac.at/download"",lib=.Library)可以為我說明一下為何這樣就可以呢？

是否我以後安裝package都要用這種方式？

[關鍵字]:package, install--","R_Language"
"2273","M.1425459016.A.BA5","LouisPion","問題","請教一些R的基本概念",2015-03-04 16:50:13,NA,NA,"文章分類提示:問題

[問題類型]:程式諮詢[軟體熟悉度]:入門，MATLAB、C、FORTRAN都沾過一些[問題敘述]:請問使用指派運算(<-)和等號(=)有什麼不同？[關鍵字]:指派--","R_Language"
"2274","M.1425396782.A.746","squallscer","問題","data.table可以操作的資料量",2015-03-03 23:33:00,NA,NA,"文章分類提示:
- 問題: data.table可以操作多大的資料量？

[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
小弟最近有一個差不多3GB的dataset
目前是想將此dataset input到R中利用data.table操作資料

但未來可能會有更大的資料量需要操作
所以想詢問一下版上的各位大大
(1)過去有利用data.table套件操作多大的資料量呢？

過去版上有一篇文章有討論到data.frame使用到dataset兩倍的記憶體量
(2)那麼data.table是否也有這樣的問題呢？

(3)dataset的大小是否也會受限於電腦Ram的大小呢？
最近資料量實在困擾到小弟！

感謝各位前輩耐心看完！


[關鍵字]:
data.table


--","R_Language"
"2275","M.1425378818.A.848","aaron77217","問題","Re: 關於重複測量資料",2015-03-03 18:33:36,NA,NA,"※ 引述《yummy7922 (crucify)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我的資料是重複測量的資料，資料中有13820位病人的多次測量值，: 但不是每位病人的觀察筆數都相同，: 我想要針對每一位病人，將每三筆資料計算一個平均值，: 最後不到三筆的資料也算一個平均值，: 不過我不知道該如何做，想請教各位高手們，謝謝。# dataset
N=30000;n=20;obs=15 # N=病患數 n=隨機重複次數 obs=觀測項數
a=Sys.time()
each_times=sample(n,N,replace=T)
cum=cumsum(each_times)
patient_name=rep(paste('patient',1:N,sep=""-""),each_times)
obs_times=rep(1,length(patient_name));obs_times[cum]=obs_times[cum]-each_times
obs_times=cumsum(obs_times);obs_times[cum]=each_times
total=sum(each_times)
V=matrix(rnorm(total*obs),,obs)
dataset=cbind(obs_times,V)

row.names(dataset)=patient_name;colnames(dataset)=c('obs_times',paste('V',1:obs,sep=""""))
Sys.time()-a
# N=30000;n=20;obs=15 => Time difference of 0.555032 secs
# N=13820;n=15;obs=1  => Time difference of 0.03400207 secs

# result
k=3
b=Sys.time()
times_a=dataset[,'obs_times']
data_m=matrix(dataset[,-1],,obs)
c_data_m=apply(data_m,2,cumsum)
filter_times=times_a%in%seq(k,max(times_a)%/%k*k,by=k)
filter_times[c((times_a==1)[-1],FALSE)]=TRUE
f_data_m=c_data_m[filter_times,]
times_end=times_a[filter_times]
times_length=times_end%%k;times_length[times_length==0]=k
times_start=times_end-times_length+1
times_info=paste(times_start,times_end,sep='-')
names_info=row.names(dataset)[filter_times]
if(obs!=1){
  result_mean=apply(f_data_m,2,function(x){c(x[1],diff(x))/times_length})
}else{
  result_mean=c(f_data_m[1],diff(f_data_m))/times_length
}
result=data.frame(names_info,times_info,matrix(result_mean,,obs))
Sys.time()-b
# N=30000;n=20;obs=15 => Time difference of 1.088062 secs
# N=13820;n=15;obs=1  => Time difference of 0.2040122 secs

# validation
patient=paste('patient',sample(N,1),sep='-')
dataset[row.names(dataset)==patient,]
result[names_info==patient,]

--","R_Language"
"2276","M.1425286535.A.5EF","celestialgod","程式","Fw: R: TRUE FALE 的問題",2015-03-02 16:55:34,NA,NA,"※ [本文轉錄自 Statistics 看板 #1J5ZDjyB ]作者: andrew43 (apan) 看板: Statistics
標題: Re: [程式] R: TRUE FALE 的問題
時間: Wed Mar  5 04:11:18 2014※ 引述《ee012345 (死小孩)》之銘言：: [軟體程式類別]:: R: [問題敘述]:: 昨天發現一件奇怪的事情，例如:: k=seq(0.1,0.2,0.05);: k==0.15: 照理說，output應該是要: FALSE TRUE FALSE: 但是跑出來的output卻是: FALSE FALSE FALSE: 造成我不小的困擾QQ: [軟體熟悉度]:: 中(3個月到1年)應該是浮點數的精確度問題。

你可以看到，> sprintf(""%10.30f"", 0.15)[1] ""0.149999999999999994448884876874""
但> sprintf(""%10.30f"", k[2])[1] ""0.150000000000000022204460492503""
可見二者的差距可能超過 R 的精確度辨別容忍度，所以 0.15==k[2] 為 F。

問題的主要原因是因為你用 seq(0.1,0.2,0.05) 後產生的 0.15 和直接輸入的 0.15
的差距太大了。
如果你換成> k==seq(0.1, 0.2, 0.05)[2][1] FALSE  TRUE FALSE
就沒問題了。
另一個解法就是繞過浮點數，用字串來辨別。

我對 R 預設的浮點數處理不是非常了解，
但你可以看一下http://rwiki.sciviews.org/doku.php?id=misc:r_accuracy:decimal_numbers可能會有更多幫助。

--http://apansharing.blogspot.com/--","R_Language"
"2277","M.1425280641.A.55C","celestialgod","分享","faster R in windows",2015-03-02 15:17:19,NA,NA,"[關鍵字]:

[出處]:

網路上蒐集來的

[重點摘要]:

R的BLAS庫效率不彰

在linux上可以透過更換成openBLAS來加速

或是compiled with intel MKL

在windows上compile R是一個痛苦的過程

因此，有人提供這方面的資源

最有名的就是Revolution

他是compiled with intel MKL

但是要錢...

其他方法有：

1. 用Revolution R Open

官方網站：http://www.revolutionanalytics.com/revolution-r-open1-2.

如果討厭RRO的猴子圖案

可以把RRO/bin/x64中的libiomp5md.dll, RBlas.dll, Rlapack.dll

複製到R/bin/x64取代原本的...

2. 更換BLAS庫

網路上有人提供GotoBLAS2編譯的RBlas.dllhttp://prs.ism.ac.jp/~nakama/SurviveGotoBLAS2/binary/windows/x64/win32的部分http://cran.r-project.org/bin/windows/contrib/ATLAS/下載相對應CPU的RBlas.dll

然後替換R/bin/x64 (or i386)的RBlas.dll

就可以享受比較快的BLAS了

3. 至於OpenBLAS的部分則參考下面的連結：http://www.douban.com/note/296114898/?start=0&post=ok#last這個方法比較複雜一點...


個人測試這三個BLAS都差不多快，不會差太多，自己選擇喜歡的使用即可

--","R_Language"
"2278","M.1425277657.A.1FA","celestialgod","問題","Re: 關於重複測量資料",2015-03-02 14:27:34,NA,NA,"※ 引述《yummy7922 (crucify)》之銘言：: [問題敘述]:: 我的資料是重複測量的資料，資料中有13820位病人的多次測量值，: 但不是每位病人的觀察筆數都相同，: 我想要針對每一位病人，將每三筆資料計算一個平均值，: 最後不到三筆的資料也算一個平均值，: 不過我不知道該如何做，想請教各位高手們，謝謝。library(plyr)  # only used in data generation
library(dplyr)
library(data.table)
library(magrittr)# data generationn = 13620
dat = data.table(id = 1:n, len = sample(2:15, n, replace = TRUE)) %>%
  mdply(function(id, len) data.table(id = rep(id, len), values = rnorm(len)))# meank = 3
dat = select(dat, c(id, values)) # 你可以省略這行 只是刪掉len而已
start_time = Sys.time()
result = dat %>% group_by(id) %>% mutate(newgroup = rep(1:length(values),
   each = k, length = length(values))) %>% group_by(id, newgroup) %>%
   summarise(mean(values))
Sys.time() - start_time# Time difference of 0.558032 secs# Other methodk = 3
dat = select(dat, c(id, values)) # 你可以省略這行 只是移除前面的變更
# library(reshape2) # 如果不用data.table 請跑這一行
start_time = Sys.time()
dat$newgroup = unlist(tapply(dat$values, dat$id, function(x){
    rep(1:length(x), each = k, length = length(x))
  }))
result2 = melt(tapply(dat$values, list(dat$id, dat$newgroup), mean))
result2 = result2[!is.na(result2$value),]
Sys.time() - start_time# Time difference of 1.556089 secsresult2 = result2[order(result2$Var1),]
all.equal(result$value, result2$value)# TRUE根據版友aaron77217提供的資料格式，新增：

library(dplyr)
library(data.table)
library(magrittr)
dat_gen_f = function(N_patient, max_obs_time, n_vars){
  dat = sample(max_obs_time, N_patient, replace = TRUE) %>% {
    cbind(rep(1:N_patient, times=.), sapply(., seq, from = 1) %>% unlist())
    } %>% cbind(matrix(rnorm(nrow(.)*n_vars),, n_vars)) %>% data.table()
  setnames(dat, c(""id"", ""obs_times"", paste0(""V"", 1:n_vars)))
}

mean_dat_f = function(dat, k){
  result = dat %>% group_by(id) %>%
    mutate(newgroup = rep(1:ceiling(length(obs_times)/k), each = k,
        length=length(obs_times)),
    n_combine = (length(obs_times) %/% k) %>% {c(rep(k, . * k),
        rep(length(obs_times) - . * k, length(obs_times) - . * k))}) %>%
    ungroup() %>% mutate(times_combine = paste((newgroup-1)*3+1,
        (newgroup-1)*3 + n_combine, sep=""-""))
  result = result %>% select(match(c(names(dat)[names(dat)!=""obs_times""],
    ""times_combine""), names(result))) %>% extract(, lapply(.SD, mean),
          by = ""id,times_combine"")
  result
}

start_time = Sys.time()
dat = dat_gen_f(30000, 20, 15)
Sys.time() - start_time# Time difference of 1.503086 secsstart_time = Sys.time()
result = mean_dat_f(dat, 3)
Sys.time() - start_time# Time difference of 4.236243 secsstart_time = Sys.time()
dat = dat_gen_f(13820, 15, 1)
Sys.time() - start_time# Time difference of 0.4750271 secsstart_time = Sys.time()
result = mean_dat_f(dat, 3)
Sys.time() - start_time# Time difference of 1.848106 secs--","R_Language"
"2279","M.1425272914.A.26F","yummy7922","問題","關於重複測量資料",2015-03-02 13:08:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我的資料是重複測量的資料，資料中有13820位病人的多次測量值，
但不是每位病人的觀察筆數都相同，
我想要針對每一位病人，將每三筆資料計算一個平均值，
最後不到三筆的資料也算一個平均值，
不過我不知道該如何做，想請教各位高手們，謝謝。

--","R_Language"
"2280","M.1425264248.A.3E5","celestialgod","問題","Re: 想利用data.table將Rawdata切割欄位",2015-03-02 10:44:06,NA,NA,"改成用CharacterMatrix做為output

省去使用rbind的時間

PS: 之前對CharacterMatrix不甚熟悉，才沒有使用。

library(data.table)
library(magrittr)
library(Rcpp)
library(inline)
sourceCpp(code = '
#include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
CharacterMatrix dat_split_f( std::vector< std::string > strings,
NumericVector loc) {
  int loc_len = loc.size(), num_strings = strings.size();
  CharacterMatrix output(num_strings, loc_len);
  for( int j=0; j < num_strings; j++ )
  {
    for (int i=0; i < loc_len-1; i++)
      output(j, i) = strings[j].substr(loc[i], loc[i+1] - loc[i]);
  }
  return output;
}')

# 測試一下40萬的case 如果要用下面資料記得他們是一行...
dat = fread(paste0(rep(""001female2019920404\n002male  3019920505\n003male
4019920606\n004female5019920707\n"", 100000), collapse=""""),sep=""\n"", sep2="""",
header=FALSE)

tt = proc.time()
dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>% data.table()
dat_split[, ':='(V1 = as.numeric(V1), V3 = as.numeric(V3))]
proc.time() - tt
#   user  system elapsed
#   0.97    0.06    1.03


# 測試一下400萬的case 如果要用下面資料記得他們是一行...
dat = fread(paste0(rep(""001female2019920404\n002male  3019920505\n003male
4019920606\n004female5019920707\n"", 1000000), collapse=""""),sep=""\n"", sep2="""",
header=FALSE)

tt = proc.time()
dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>% data.table()
dat_split[, ':='(V1 = as.numeric(V1), V3 = as.numeric(V3))]
proc.time() - tt
#   user  system elapsed
#   7.73    0.21    7.98

# 十倍的資料量，時間只花八倍，這樣的結果好多了。

windows 64bit R-3.1.2[email<U+00A0>protected]用了一下[email<U+00A0>protected]的CPU跑40萬的case
#   user  system elapsed
#   1.14    0.05    1.19


補上用regular expression的方法

library(data.table)
library(plyr)
library(dplyr)
library(magrittr)
dat = fread(paste0(rep(""001female2019920404\n002male  3019920505\n003male
4019920606\n004female5019920707\n"", 100000), collapse=""""),sep=""\n"",
sep2="""",header=FALSE)

tt = proc.time()
dat_regex = dat %>% select(V1) %>% extract2(1) %>%
  regexec(""([0-9]{3})(female|male\\s{2})([0-9]{2})([0-9]{8})"", text = .)
dat_split = dat %>% select(V1) %>% extract2(1) %>%
  regmatches(dat_regex) %>% do.call(rbind, .) %>% data.table() %>%
  select(2:ncol(.)) %>% setnames(c(""id"", ""gender"", ""age"", ""birthday""))
proc.time() - tt
#   user  system elapsed
#  14.99    0.34   23.76

with[email<U+00A0>protected]--","R_Language"
"2281","M.1425247168.A.946","sacidoO","問題","Re: 想利用data.table將Rawdata切割欄位",2015-03-02 05:59:25,NA,NA,"無聊把c大的程式改用另外一個方式寫一下
想請問c大怎麼推估您程式分割400萬row需要67秒?
我看您分割40萬資料的elased time只需要3.5秒的說....

以下是我的code...其中數據產生部分是引用c大的方法#generatedat as original data set
library(data.table)
dat = fread(""001female 2019920404\n002male   3019920505\n003male
4019920606\n004female 5019920707\n"", sep=""\n"", sep2="""", header=FALSE)

#split by "" ""
library(reshape2)
dat<-colsplit(dat[[1]], "" "", c(""temp1"", ""temp2""))#seperatecolumn by variable length
data<-data.frame( id=substr(dat[,1],1,3), sex=substr(dat[,1],4,9),
income=as.numeric(substr(dat[,2],1,2)),
birthday=as.numeric(substr(dat[,2],3,10)) )#generate400000 data
dat = fread(paste0(rep(""001female 2019920404\n002male   3019920505\n003male
4019920606\n004female 5019920707\n"", 100000), collapse=""""),sep=""\n"", sep2="""",
header=FALSE)

#system start time
tt = proc.time()
dat<-colsplit(dat[[1]], "" "", c(""temp1"", ""temp2""))
data<-data.frame( id=substr(dat[,1],1,3), sex=substr(dat[,1],4,9),
income=as.numeric(substr(dat[,2],1,2)),
birthday=as.numeric(substr(dat[,2],3,10)) )

proc.time() - tt
#user  system elapsed
#36.97    0.07   37.11

我的程式碼沒看錯方法的話應該是跑了37.11秒....
CPU Intel i7-3770 @3.40GHz Win7 64bit with R 3.0.1※ 引述《celestialgod (攸藍)》之銘言：: > [問題敘述]:: > 各位前輩們好,: > 小弟有一筆資料大約為500MB左右,: > 因這筆資料為原始檔案,: > 還沒將欄位定義好,: > 所以小弟想詢問如何讀入data.table後,: > 在將欄位進行切割？: > example:: >                 var1: > 1       001female 2019920404: > 2       002male   3019920505: > 3       003male   4019920606: > 4       004female 5019920707: > 希望可以透過欄位切割後變成：: >         id   sex   income  birthday: > 1       001 female   20   19920404: > 2       002 male     30   19920505: > 3       003 male     40   19920606: > 4       004 female   50   19920707: 手癢寫了一下@@: code:: library(data.table): library(magrittr): dat = fread(""001female2019920404\n002male  3019920505\n003male: 4019920606\n004female5019920707\n"", sep=""\n"", sep2="""", header=FALSE): library(Rcpp): library(inline): sourceCpp(code = ': #include <Rcpp.h>: using namespace Rcpp;: // [[Rcpp::export]]: List dat_split_f( std::vector< std::string > strings, NumericVector loc) {:   int loc_len = loc.size(), num_strings = strings.size();:   List output(num_strings);:   for( int j=0; j < num_strings; j++ ):   {:     std::vector< std::string > tmp;:     for (int i=0; i < loc_len-1; i++):       tmp.push_back( strings[j].substr(loc[i], loc[i+1] - loc[i]) );:     output[j] = tmp;:   }:   return output;: }'): # 第二個input 第一個固定是0 第二個是第一個字串結束位置: # 第三個是第二個字串結束位置，依此類推，有k個column放k+1個值: # 這個可以用手算，也可以用regular expression去找對應位置，自行定奪: # 補充: 用C++邏輯想是，前k個是每個字串開始位置，最後一個是總長度: dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>%:   do.call(""rbind"", .) %>% data.table(): # 之後自行再把需要轉成數字的chr轉成numeric就好: 測試一下40萬個row: dat = fread(paste0(rep(""001female2019920404\n002male  3019920505\n003male: 4019920606\n004female5019920707\n"", 100000), collapse=""""),:   sep=""\n"", sep2="""", header=FALSE): tt = proc.time(): dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>%:   do.call(""rbind"", .) %>% data.table(): proc.time() - tt: #    user  system elapsed: #    3.34    0.01    3.50: 四百萬個ROW大概是67秒: CPU: Intel Celeron [email<U+00A0>protected] in windows 7 64bit with R 3.1.2: 還要更快可以找我的文章(R_Language #1JiQHkrP)，在Rcpp中加入openmp加速","R_Language"
"2282","M.1425197019.A.FB2","Tolkien","問題","移除所有設定",2015-03-01 16:03:37,NA,NA,"[問題敘述]:

請問有辦法移除已載入的套件嗎?

因為之前Matlab 的經驗，在寫script 時會
close all
clear all

但在 R 用 rm(list = ls()) 我不能移除上個scipt 的 library
請問有辦法移除嗎？因為我用Linux 版本
每次執行程式A 後都要重開 R 才能執行程式 B.

謝謝



--","R_Language"
"2283","M.1425171502.A.64E","celestialgod","問題","Re: for loop 結果",2015-03-01 08:58:20,NA,NA,": ※ 引述《lambking (BB)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]::  需要做四個for loop 想將結果儲存成以下形式:    degree  scale  offset   C   error:     1       1      1      1   0.005:     1       1      1      2   0.006:      .   ..   ...:: [程式範例]:: cross2 <- data.frame(degree=numeric(),:                      scale=numeric(),:                      offset=numeric(),:                      C=numeric(),:                      cross=numeric()): for (i in 1:3){:   for (j in 1:3){:     for (k in 1:7){:       for (l in 1:5){:          Csvc.poly <- ksvm(training1[,13]~.,data=Train.subset,type=""C-svc"",:                             kernel=""polydot"",:                             kpar=list(degree=degree[i],:                             scale=scale[j],offset=offset[k]),C=C[l],cross=10):         cross2<-cbind(degree,scale,offset,C,cross=cross(Csvc.poly)):        }:      }:   }: }: 用了cbind 但結果不正確: 想請問有沒有建議使用的指令能得到上述的結果: 謝謝:

因為你是用迴圈 所以應該是每次回圈存一個row...

cross2 = matrix(NA, 3*3*7*5, 5)
m = 1
for (i in 1:3){
  for (j in 1:3){
    for (k in 1:7){
      for (l in 1:5){
        Csvc.poly <- ksvm(training1[,13]~.,data=Train.subset,type=""C-svc"",
                          kernel=""polydot"",
                          kpar=list(degree=degree[i],
                          scale=scale[j],offset=offset[k]),
                          C=C[l],
                          cross=10)
        cross2[m,] <- c(degree[i], scale[j], offset[k] ,C[l],
                       cross(Csvc.poly))
        m = m + 1
       }
     }
  }
}
cross2 = data.frame(cross2)
names(cross2) = c(""degree"", ""scale"", ""offset"", ""C"", ""cross"")


這樣的case，我會建議下面的作法

input = expand.grid(degree, scale, offset, C)

cross = mapply(function(d, s, o ,C) {
        cross(ksvm(training1[,13]~.,data=Train.subset,type=""C-svc"",
              kernel=""polydot"", kpar=list(degree=d, scale=s,offset=o),
              C=C,cross=10))
  }, input[,1], input[,2], input[,3], input[,4])

cross2 = data.frame(input, cross)
names(cross2) = c(""degree"", ""scale"", ""offset"", ""C"", ""cross"")

或是利用plyr做

library(plyr)
input = expand.grid(degree = degree, scale = scale,
                    offset = offset, C = C)

cross2 = mdply(input, function(degree, scale, offset ,C) {
               cross(ksvm(training1[,13]~.,data=Train.subset,type=""C-svc"",
                 kernel=""polydot"", kpar=list(degree=degree,
                 scale=scale,offset=offset), C=C, cross=10))})


--","R_Language"
"2284","M.1425138513.A.0F6","PhysicsBoy","問題","Re: 畫圖上顏色的問題",2015-02-28 23:48:29,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: ※ 引述《PhysicsBoy (翟南)》之銘言：: : [問題敘述]:: : 假設有兩個一維陣列，分別是A和B: : A = c(25到30之間的數字，有重複): : B = c(19當23之間的數字，有重複): : 意即B裡面的數字一定都小於A: : 接著我想將A和B畫直方圖在同一張圖上，該圖乃表示個別數字出現次數的統計圖: : 也就是X軸是表示A和B出現的數字，Y軸是該數字出現的次數: : 現在我想將A和B以不同顏色畫出: : 也就是如果A的直方圖是藍色，那B就以不是藍色的顏色畫出: : 問題在此，可否有辦法使用plot函式直接一次畫出來???: : 而不是先畫一半(如先畫A)後再用point補上另外一半(再畫B): : 以上請教，謝謝!: 據我所知，plot做不到，利用lattice的formula and groups: 可以輕鬆做到這一點，code範例如下：: A = sample(25:30, 100, replace = TRUE): B = sample(19:23, 100, replace = TRUE): library(lattice): dat = stack(data.frame(A, B)): histogram( ~ values, groups = ind, data = dat,  #以下只是細部設定:   type = ""density"", breaks = 18:31, ylim = c(0, 0.5),:   par.settings = simpleTheme(col = c(""cyan"",""yellow"")),剛剛我試著改顏色，分別是將cyan都改成red，而yellow改成blue:   auto.key = list(columns = 2, col = c(""cyan"",""yellow""),當然上面這行的也有改:   text = c(""Data A"", ""Data B"")),:   panel = function(...) panel.superpose(...,panel.groups=panel.histogram,:     col = c(""cyan"",""yellow""), alpha = 0.4))上面這行的也改
最後圖示在此http://ppt.cc/XXTj直方圖的藍色跟紅色不是那麼的藍色跟紅色
請問這該如何解決呢? 謝謝: 另外，ggplot2也可以做到，簡單範例如下：: ggplot(dat, aes(values)) + geom_histogram(binwidth = 1,:   position = ""identity"", aes(fill = factor(ind)), colour = ""black"") +:   scale_fill_discrete(name=""DataSet""): 就學習難易度來說，ggplot2是簡單許多，而且顏色不用手動設定，: lattice很多都需要自己設定，比較複雜，: 我個人偏好lattice，只是比較喜歡他的程式寫法: 我不是很習慣用ggplot2的風格...: 另外，ggplot2是base on lattice做的，而且lattice畫圖會比較快: (reference: http://tinyurl.com/lyu857e )--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"2285","M.1425135105.A.F4B","celestialgod","問題","Re: 畫圖上顏色的問題",2015-02-28 22:51:42,NA,NA,"※ 引述《PhysicsBoy (翟南)》之銘言：: [問題敘述]:: 假設有兩個一維陣列，分別是A和B: A = c(25到30之間的數字，有重複): B = c(19當23之間的數字，有重複): 意即B裡面的數字一定都小於A: 接著我想將A和B畫直方圖在同一張圖上，該圖乃表示個別數字出現次數的統計圖: 也就是X軸是表示A和B出現的數字，Y軸是該數字出現的次數: 現在我想將A和B以不同顏色畫出: 也就是如果A的直方圖是藍色，那B就以不是藍色的顏色畫出: 問題在此，可否有辦法使用plot函式直接一次畫出來???: 而不是先畫一半(如先畫A)後再用point補上另外一半(再畫B): 以上請教，謝謝!據我所知，plot做不到，利用lattice的formula and groups

可以輕鬆做到這一點，code範例如下：

A = sample(25:30, 100, replace = TRUE)
B = sample(19:23, 100, replace = TRUE)

library(lattice)
dat = stack(data.frame(A, B))
histogram( ~ values, groups = ind, data = dat,  #以下只是細部設定
  type = ""density"", breaks = 18:31 + 0.5, ylim = c(0, 0.25),
  par.settings = simpleTheme(col = c(""cyan"",""yellow""), alpha=0.4),
  auto.key = list(columns = 2, col = c(""cyan"",""yellow""),
  text = c(""Data A"", ""Data B"")),
  panel = function(...) panel.superpose(...,panel.groups=panel.histogram,
    col = c(""cyan"",""yellow""), alpha = 0.4))

PS: breaks = 18:31+0.5可以取代成nint = 12

另外，ggplot2也可以做到，簡單範例如下：

library(ggplot2)
ggplot(dat, aes(values)) + geom_histogram(binwidth = 1,
  position = ""identity"", aes(fill = factor(ind), y = ..density..),
  colour = ""black"") + scale_fill_discrete(name=""DataSet"")


就學習難易度來說，ggplot2是簡單許多，而且顏色不用手動設定，

lattice很多都需要自己設定，比較複雜，

我個人偏好lattice，只是比較喜歡他的程式寫法

我不是很習慣用ggplot2的風格...

另外，ggplot2是base on lattice做的，而且lattice畫圖會比較快

(reference:http://tinyurl.com/lyu857e)


補充：

如果要把lattice畫的圖跟ggplot2有一定的相似的話

可以透過方式做：

library(latticeExtra)

histogram( ~ values, groups = ind, data = dat,
  type = ""density"", breaks = 18:31 + 0.5, ylim = c(0, 0.25),
  par.settings = ggplot2like(col = c(""cyan"",""yellow""), alpha=0.4),
  auto.key = list(columns = 2, col = c(""cyan"",""yellow""),
  text = c(""Data A"", ""Data B"")), axis = axis.grid,
  panel = function(...) panel.superpose(...,panel.groups=panel.histogram,
    col = c(""cyan"",""yellow""), alpha = 0.4))


--","R_Language"
"2286","M.1425130054.A.A3D","PhysicsBoy","問題","畫圖上顏色的問題",2015-02-28 21:27:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

假設有兩個一維陣列，分別是A和B

A = c(25到30之間的數字，有重複)

B = c(19當23之間的數字，有重複)

意即B裡面的數字一定都小於A

接著我想將A和B畫直方圖在同一張圖上，該圖乃表示個別數字出現次數的統計圖
也就是X軸是表示A和B出現的數字，Y軸是該數字出現的次數
現在我想將A和B以不同顏色畫出
也就是如果A的直方圖是藍色，那B就以不是藍色的顏色畫出

問題在此，可否有辦法使用plot函式直接一次畫出來???
而不是先畫一半(如先畫A)後再用point補上另外一半(再畫B)

以上請教，謝謝!


--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"2287","M.1424770684.A.356","celestialgod","問題","Re: aggregation on list of data frames",2015-02-24 17:38:01,NA,NA,"> [問題敘述]:>>   有個 list of data frames，>   想用 row name 當做 key 來 aggregate 多個 data frame>
>> [程式範例]:>>   l = list()>   l[[1]] = data.frame(row.names=c('a','b','c','d'), x=c(1,2,3,4))>   l[[2]] = data.frame(row.names=c('d','c','b','a'), x=c(1,2,3,4))>>   希望可以得到所有 data frame 的 aggregation 結果，如：平均>>         mean(x)>      a    2.5>      b    2.5>      c    2.5>      d    2.5提供一些方法@@

library(magrittr)
library(data.table)
library(dplyr)
# 1.
l %>% rbindlist(.) %>% data.frame(label = l %>%
  lapply(row.names) %>% do.call(c, .)) %>%
  aggregate(x ~ label, ., mean)

# 2.
l %>% lapply(function(x) data.frame(label = row.names(x), x)) %>%
  rbindlist(.) %>% group_by(label) %>% summarise(mean(x))

# 3.
Reduce(function(x, y) merge(x, y, by=""row.names"", all=FALSE) %>%
  set_rownames(row.names(x)), l) %>% .[,4:7] %>% apply(1, mean)

第一種是根據原PO改的

我覺得第二種是最簡單理解，也最簡單寫的方法XD 我比較推薦這個

第三種方法有點tricky...我覺得速度應該也不快不推薦 (慢在merge)


3/1補充第四種

library(plyr)
l %>% lapply(name_rows) %>% rbindlist(.) %>%
   group_by(.rownames) %>% summarise(mean(x))

最近在看plyr的manual，發現plyr有提供直接把row.names轉成col的function

這樣寫起來整個function更精簡

--","R_Language"
"2288","M.1424696746.A.6B3","celestialgod","問題","Re: 想利用data.table將Rawdata切割欄位",2015-02-23 21:05:43,NA,NA,"> [問題敘述]:> 各位前輩們好,> 小弟有一筆資料大約為500MB左右,> 因這筆資料為原始檔案,> 還沒將欄位定義好,> 所以小弟想詢問如何讀入data.table後,> 在將欄位進行切割？>>> example:>                 var1> 1       001female 2019920404> 2       002male   3019920505> 3       003male   4019920606> 4       004female 5019920707>>> 希望可以透過欄位切割後變成：>         id   sex   income  birthday> 1       001 female   20   19920404> 2       002 male     30   19920505> 3       003 male     40   19920606> 4       004 female   50   19920707手癢寫了一下@@

code:


library(data.table)
library(magrittr)
dat = fread(""001female2019920404\n002male  3019920505\n003male
4019920606\n004female5019920707\n"", sep=""\n"", sep2="""", header=FALSE)

library(Rcpp)
library(inline)
sourceCpp(code = '
#include <Rcpp.h>
using namespace Rcpp;

// [[Rcpp::export]]
List dat_split_f( std::vector< std::string > strings, NumericVector loc) {
  int loc_len = loc.size(), num_strings = strings.size();
  List output(num_strings);
  for( int j=0; j < num_strings; j++ )
  {
    std::vector< std::string > tmp;
    for (int i=0; i < loc_len-1; i++)
      tmp.push_back( strings[j].substr(loc[i], loc[i+1] - loc[i]) );
    output[j] = tmp;
  }
  return output;
}')

# 第二個input 第一個固定是0 第二個是第一個字串結束位置
# 第三個是第二個字串結束位置，依此類推，有k個column放k+1個值
# 這個可以用手算，也可以用regular expression去找對應位置，自行定奪
# 補充: 用C++邏輯想是，前k個是每個字串開始位置，最後一個是總長度

dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>%
  do.call(""rbind"", .) %>% data.table()

# 之後自行再把需要轉成數字的chr轉成numeric就好


測試一下40萬個row

dat = fread(paste0(rep(""001female2019920404\n002male  3019920505\n003male
4019920606\n004female5019920707\n"", 100000), collapse=""""),
  sep=""\n"", sep2="""", header=FALSE)

tt = proc.time()
dat_split = dat_split_f(dat[[1]], c(0, 3, 9, 11, 19)) %>%
  do.call(""rbind"", .) %>% data.table()
proc.time() - tt
#    user  system elapsed
#    3.34    0.01    3.50

四百萬個ROW大概是67秒

CPU: Intel Celeron[email<U+00A0>protected]in windows 7 64bit with R 3.1.2

還要更快可以找我的文章(R_Language#1JiQHkrP)，在Rcpp中加入openmp加速

Reference:http://gallery.rcpp.org/articles/strings_with_rcpp/--","R_Language"
"2289","M.1424536059.A.1D6","squallscer","問題","想利用data.table將Rawdata切割欄位",2015-02-22 00:27:36,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位前輩們好,
小弟有一筆資料大約為500MB左右,
因這筆資料為原始檔案,
還沒將欄位定義好,
所以小弟想詢問如何讀入data.table後,
在將欄位進行切割？

example:
                var1
1       001female 2019920404
2       002male   3019920505
3       003male   4019920606
4       004female 5019920707

希望可以透過欄位切割後變成：
        id   sex   income  birthday
1       001 female   20   19920404
2       002 male     30   19920505
3       003 male     40   19920606
4       004 female   50   19920707

再版上及google爬不到相關情形,
所以上來版上請教一下前輩,
謝謝！



[關鍵字]:

data.table , width

--","R_Language"
"2290","M.1424225625.A.D93","a828203","問題"," 安裝quantmod套件出現錯誤",2015-02-18 10:13:42,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式)

[問題敘述]:
先祝各位前輩 新年快樂，
我是個R語言初學者，從網路上看到了有網友分享利用R語言統計股票，
因此也想自己練習看看。

不過我在第一步好像就遇到問題了，以下為我安裝quantmod套件的步驟，
Packages>Install package(s)>Taiwan(Taipei)>quantmod
程式套件>安裝程式套件...>Taiwan(Taipei)>quantmod

接著就等他下載並安裝完，然後輸入下面的指令，> library(quantmod)就出現了這一個錯誤的訊息(圖片：http://ppt.cc/RM4P)，
Error in library(quantmod) : there is no package called ‘quantmod’

不知道這問題要如何解決，為此我還反覆了安裝幾次，結果還是一樣的結果!

出現錯誤訊息的電腦環境：
桌電：Windows 7 32bit
筆電：Windows 8 64bit

不過，在學校的雲端教室安裝卻可以使用，
雲端：Windows 7 64bit

上網查了相關的資料，沒有發現相關的文章可以幫我解決問題，
因此希望PTT的各位前輩可以幫我解決問題，謝謝。

--","R_Language"
"2291","M.1424050363.A.C6D","koai","問題","shiny 做的 web 讀取 NT name ?",2015-02-16 09:32:38,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]: 使用者

[問題敘述]:目前正在做公司內部使用的報表已用 shiny 開發出網頁呈現但是有鎖使用者權限的需求有在網路上找到輸入帳號密碼的範例分享https://gist.github.com/withr/9001831但是我想要進一步使用 NT account name 鎖權限(使用chrome開網頁)以省去輸入帳密的步驟!搜尋到的結果似乎是必須用R去呼叫 java 或 .NET但是我沒有 java or .NET 的使用經驗在讀 java or .NET 的程式碼時相當痛苦... @@""不知道各位版友是否有過類似的經驗可以分享?非常感謝~~  ^^[關鍵字]: shiny, NT account name


--","R_Language"
"2292","M.1423734116.A.7E7","psinqoo","問題","shiny 接資料庫後 table",2015-02-12 17:41:53,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我將 shiny 接上資料庫後  預計要做個樞紐分析

table(x,y)

但是跑不出來

x1<-sqlQuery(ch,""SELECT * FROM family.orderlist"")


pio<- table(input$a,input$b)

但是寫死 pio<- table(x1$age,x1$gender) 可以跑出來http://ppt.cc/74Zo[程式範例]:程式碼可貼於以下網站：http://ppt.cc/vr1Rraw data 表http://ppt.cc/cGBE要做的樞紐分析

UI codehttp://ppt.cc/mRhaSERVER codehttp://ppt.cc/74Zo[關鍵字]:

shiny table選擇性，也許未來有用--

--","R_Language"
"2293","M.1423729194.A.D44","tokyo291","問題","R 使用不同gee指令會有不收斂的情況",2015-02-12 16:19:51,NA,NA,"[問題類型]:

使用不同GEE的指令，得到的結果不同

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)


[問題敘述]:

我想使用GEE來分析一筆資料

一開始使用的是geese()的指令(也有用geeglm()結果一樣)

分別執行1.無交互作用項 2.有交互作用項

這兩個model

但是第2個模型的結果沒問題，第1個的結果則為估計不收斂

於是我用SAS和R的另一個GEE分析的指令gee()去比較

結果都是正常，想請問造成此差異可能的原因

以及該如何調整

[程式範例]:

geese()的部分

geefit1<-geese(resp~group+time+I(time^2), family=binomial(link=""logit""),
data=dat4, id=id, corstr = ""ar1"", scale.fix=F)
summary(geefit1)
geefit2<-geese(resp~group+time+I(time^2)+group*time+group*I(time^2),
family=binomial(link=""logit""),
data=dat4, id=id, corstr = ""ar1"", scale.fix=F)
summary(geefit2)

SAS的部分

/*model 1*/
PROC GENMOD data=dat4  DESCEND;
class id group(ref=""2"") num(ref=""1"") / param=ref;
 MODEL  resp=group week week*week  /Dist=bin link=logit  ;
 REPEATED SUBJECT=id /type=AR(1) ;
 run;
/*model 2*/
PROC GENMOD data=dat4  DESCEND;
class id group(ref=""2"") num(ref=""1"") / param=ref;
MODEL  resp=group week week*week group*week group*week*week /Dist=bin
link=logit;
REPEATED SUBJECT=id/type=AR(1);
run;

gee()的部分

a1<-gee(resp~group+time+I(time^2), id=id, data=dat4,
family=binomial(link=""logit""), corstr=""AR-M"")
summary(a1)
a2<-gee(resp~group+time+I(time^2)+group*time+group*I(time^2), id=id,
data=dat4,
family=binomial(link=""logit""), corstr=""AR-M"")
summary(a2)

原始資料(week和time是相同的變數)http://tinyurl.com/p2yd6jk[關鍵字]:

gee geese geeglm

--","R_Language"
"2294","M.1423519988.A.C4D","mode710517","問題","是否能透過指令中止其他程式",2015-02-10 06:13:06,NA,NA,"請教各位版友，
R是否有提供指令可以用來中止運作中的程式，
例如關掉已開啟的notepad、word等。

懇請指點，謝謝



--","R_Language"
"2295","M.1423192442.A.AA9","psinqoo","問題","plotGoogleMaps",2015-02-06 11:13:59,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的讀入.csv檔後(內有中文) 使用plotGoogleMaps 圖形文字亂碼

圖http://ppt.cc/pdbk[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題建立重現錯誤的方法可以參考：http://ppt.cc/gEic （取自StackOverflow）程式碼可貼於以下網站：[關鍵字]:
plotGoogleMaps選擇性，也許未來有用--







--","R_Language"
"2296","M.1423174145.A.D26","andrew43","問題","Re: eval 使用問題",2015-02-06 06:09:01,NA,NA,"你的問題大概可以分成二個階段。

1. 在 R 中的字串合併常用 paste() 或它的子集 paste0() 來做。
2. 在 R 中的 eval 不像 matlab 那麼直接，
   而是要靠 eval(parse(text = 字串)) 來進行。

所以你研究一下以下 R code。
run <- c(""net"", ""fsns"", ""flns"")
for(i in run) {
        txt <- paste0(i, ""Var_sum1=sum("", i, ""_people)"")
        cat(txt, ""\n"")           # 看看字串對不對
        eval(parse(text = txt))  # 針對 txt 做 eval。
}※ 引述《Tolkien (怪獸)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(matlab background):: [問題敘述]:: 字串變變數: [程式範例]:: 在matlab 字串矩陣要寫入迴圈中我會用:: run = { 'net' 'fsns' 'flns'   }: for in=1:3: eval(['' run{in} 'Var_sum1=sum(' run{in} '_people']): endif: 這個代表我執行: netVar_sum1  =sum (net_people): fsnsVar_sum1 =sum (fsns_people): flsnVar_sum1 =sum (flns_people): 請問在R 要如何把字串矩陣寫入迴圈: 我的Code:: run=c('net,'fsns','flns'): for(i in 1:3){: ????????????: }: 但還是不行: 請高手幫幫忙 謝謝--http://apansharing.blogspot.com/--","R_Language"
"2297","M.1423167407.A.82B","Tolkien","問題","eval 使用問題",2015-02-06 04:16:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(matlab background)[問題敘述]:

字串變變數


[程式範例]:
在matlab 字串矩陣要寫入迴圈中我會用:

run = { 'net' 'fsns' 'flns'   }
for in=1:3
eval(['' run{in} 'Var_sum1=sum(' run{in} '_people'])
endif

這個代表我執行
netVar_sum1  =sum (net_people)
fsnsVar_sum1 =sum (fsns_people)
flsnVar_sum1 =sum (flns_people)

請問在R 要如何把字串矩陣寫入迴圈
我的Code:

run=c('net,'fsns','flns')
for(i in 1:3){
????????????
}


但還是不行
請高手幫幫忙 謝謝




--","R_Language"
"2298","M.1423059422.A.ABB","Wush978","情報","新一期的R Journal已經上線",2015-02-04 22:16:57,NA,NA,"[關鍵字]: R, R Journal

[出處]:http://journal.r-project.org/archive/2014-2/--","R_Language"
"2299","M.1423040404.A.216","soheadsome","情報","微軟宣布併購Revolution Analytics",2015-02-04 17:00:00,NA,NA,"[關鍵字]:

Revolution Analytics

微軟

[出處]:http://www.ithome.com.tw/news/93865[重點摘要]:

微軟在開源布局又一大動作

日前宣布併購全球最大企業級R語言工具的公司Revolution Analytics

這將使微軟企業內（On-Premises）到雲端上的產品皆受惠

而同時也能因 Revolution Analytics技術加持

使得R語言開發者以及資料科學家能更有效率的建立應用程式以及資料分析應用。


而微軟也一直是R語言的忠實使用者

從Xbox的服務到Bing搜尋服務甚至是Office都有用

Azure上的機器學習服務也支援了R

--","R_Language"
"2300","M.1422870922.A.302","oldjojotenya","問題","萬惡的text encoding",2015-02-02 17:55:18,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手使用者

[問題敘述]:
試著去抓公開觀測資訊站的財務報表時遇到了文字編碼亂碼的問題。

原始頁面網址為：http://mops.twse.com.tw/mops/web/t164sb03由於從該頁面獲取財報資料需要透過POST方法表單遞交，因此找到HTML中的form標籤，

把action的網址加上後面雜七雜八需要的name-value弄成query後找到了財報網頁：http://mops.twse.com.tw/mops/web/ajax_t05st33?step=1&firstin=1&isnew=false&co_id=3519可是裡面內容竟然是亂碼！查了一下Elements，在meta標籤發現他用的是big5:
<meta content=""text/html; charset=big5"" http-equiv=""Content-Type"">

所以後續的程式代碼就編寫成如下：

url=URLencode(""http://mops.twse.com.tw/mops/web/ajax_t164sb03?step=1&firstin=1&isnew=true&co_id=3519"")url=getURL(url,.encoding=""big5"")
table=readHTMLTable(url,stringAsFactor=FALSE,which=2)

但讀出來的東西仍然是亂碼，

期間也試過了之前Wush大分享過的：

Sys.setlocale(category='LC_ALL', locale='C')

但好像對這個案不管用，

既然亂碼是出現在網站的，而且網站的meta標籤也寫明是用big5，為何getURL設定big5

會不work呢＠＠請教有什麼好的解決辦法嘛


[關鍵字]:Text Encoding


--","R_Language"
"2301","M.1422866275.A.72C","Tolkien","問題","Rtools for Linux",2015-02-02 16:37:53,NA,NA,"請問  windows 版本中的 Rtools 有沒有辦法灌在 Linux or OS

因為我要執行 devtools::install_github(""hadley/bigvis"")

要先有 Rtools 才行。

或者有沒有辦法可以解決？

我需要 bigvis 中的 bin() 和 condense()

謝謝

--","R_Language"
"2302","M.1422857922.A.8AB","mode710517","問題","如何求此複雜式子的解",2015-02-02 14:18:39,NA,NA,"在論文上看到一個複雜的式子，如下所示：

 2
 Σ[exp(-x/2)*(x^k)/(2^k*k!)]=0.05
k=0

我想用R解出式子中的x值，
可否請版上高手建議求出此解的函數給我，
感激不盡，謝謝。





--","R_Language"
"2303","M.1422840082.A.EA7","psinqoo","問題","t() 轉秩後問題",2015-02-02 09:21:16,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我想問

一般我到資料都是 長這樣的.csv

txt1   ALICE...    2015/01/02
txt2   asking...   2015/01/04
txt3   people..    2015/01/13
.      .             .
.      .             .
.      .             .

但是資料很大 一轉秩後 EXCEL 就打不開

txt1        txt2           txt3  .    .  . .
ALICE..     askainq....    people....XX
2015/01/02  2015/01/04     2015/01/13


做完 text mining 後

主要我拉出關鍵字後，到文章後

ex轉秩後，去比對原文章後，日期那欄無法帶出

ex轉秩後 EXCEL 打得開 日期帶得出

但是如果ex 資料量太大時 轉秩後 打不開

日期那欄就 GG了~~


library(xlsx)
ex<-read.xlsx(file.choose(),2)

ex<-t(ex)

health<-grep(""health"", f8)
write.csv(ex[health],file=""health.csv"")






[程式範例]:f1<-read.csv(file.choose(),sep="","")f1<-t(f1)f2 <- Corpus(VectorSource(f1))#one<- tm_map(one, PlainTextDocument)f3<- tm_map(f2, removePunctuation)f4 <- tm_map(f3, removeNumbers)f5 <- tm_map(f4, tolower)f6 <- tm_map(f5, removePunctuation)f7 <- tm_map(f6, removeWords, stopwords(""english""))f8<-tm_map(f7, stemDocument)library(xlsx)ex<-read.xlsx(file.choose(),2)health<-grep(""health"", f8)write.csv(ex[health],file=""health.csv"")[關鍵字]:

t()選擇性，也許未來有用--







--","R_Language"
"2304","M.1422812638.A.334","EricTao","問題","製作表格",2015-02-02 01:43:56,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個data frame，想要做成類似這樣的表格http://ppt.cc/nJZr圖一而data frame如圖中的右半邊http://ppt.cc/wauk問題1. 如何為這樣的表格建立dara frame?
原本想用by或是apply之類搭配自己寫函數，用函數判斷，什麼型態的欄位要做什麼統計
但是by丟進函數的lists好像還是要用for loop處理。
這樣好像乾脆直接寫loop 一個個column去統計就好了。(by還是有分組的功能就是了)
還是R中有比較好的方法可以寫?

問題2. data中的那些值為1/0的欄位，其實是代表boolean的T/F，在R中好像不能混用?
因為這個data之後會丟去做glm。
請問我該怎麼轉換型態? 或者，在寫CSV檔時怎麼表示boolean值給R來讀?

抱歉這次的問題有點亂，想不到怎麼問比較有條理。

--","R_Language"
"2305","M.1422798732.A.531","braveht","問題","Re: aggregation on list of data frames",2015-02-01 21:52:09,NA,NA,"※ 引述《braveht (衝吧衝吧)》之銘言：: 標題: [問題] aggregation on list of data frames: 時間: Sun Feb  1 16:01:15 2015:
:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):
:: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:::   有個 list of data frames，:   想用 row name 當做 key 來 aggregate 多個 data frame:
:: [程式範例]:::   l = list():   l[[1]] = data.frame(row.names=c('a','b','c','d'), x=c(1,2,3,4)):   l[[2]] = data.frame(row.names=c('d','c','b','a'), x=c(1,2,3,4))::   希望可以得到所有 data frame 的 aggregation 結果，如：平均::         mean(x):      a    2.5:      b    2.5:      c    2.5:      d    2.5:: --","R_Language"
"2306","M.1422777684.A.64B","braveht","問題","aggregation on list of data frames",2015-02-01 16:01:15,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

  有個 list of data frames，
  想用 row name 當做 key 來 aggregate 多個 data frame


[程式範例]:

  l = list()
  l[[1]] = data.frame(row.names=c('a','b','c','d'), x=c(1,2,3,4))
  l[[2]] = data.frame(row.names=c('d','c','b','a'), x=c(1,2,3,4))

  希望可以得到所有 data frame 的 aggregation 結果，如：平均

        mean(x)
     a    2.5
     b    2.5
     c    2.5
     d    2.5

--","R_Language"
"2307","M.1422774291.A.E71","coke228","問題","改寫至local 求助各位大大",2015-02-01 15:04:48,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
YYY <- function(file_id,Wfile,file_name,PPP,nroll,NG,author){
  con <- dbConnect(dbDriver(""MySQL""), host=mysql.ip, username=mysql.username,
password=mysql.password, dbname=mysql.dbname)
  rs <- dbSendQuery(con, statement = paste(
    ""INSERT into SGM
(`file_id`,`Wfile`,`file_name`,`PPP`,`nroll`,`T0_010S`,`T0_020S`, `author`)
values('"",
    file_id,""','"",
    pfile,""','"",
    file_name,""','"",
    icomp ,""','"",
    nroll ,""','"",
    NG[1  ] ,""','"",
    NG[2  ] ,""','"",
    author   ,""','"",
    sep=""""
    ))
  dbDisconnect(con)
}

各位大大 我想將此函式物件改寫在local 可否求助大大教學

另外我的Rstudio 是64bit 如何更改為32bit
只能重灌嗎?   小弟初學者 如是笨問題 深感抱歉選擇性，也許未來有用--","R_Language"
"2308","M.1422767913.A.B3C","psinqoo","問題","分群問題",2015-02-01 13:18:30,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的關於分群，當數量多時，圖表已將看不出。

如何把每一個分群取出，或著存成另一表格。



[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：dtm2 = removeSparseTerms(d.dtm , sparse=0.9)df_dtm2<-as.data.frame(inspect(dtm2))d <- dist( d.dtm , method = ""euclidean"")fit <- hclust(d, method=""ward"")plot(fit)rect.hclust(fit, k=5, border=""red"")[關鍵字]:

分群選擇性，也許未來有用--







--","R_Language"
"2309","M.1422683212.A.3FB","oldjojotenya","問題","Re: 丟入htmlParse的東西",2015-01-31 13:46:49,NA,NA,"後來找了兩種網頁測試了一下：

一、全部資訊在單一頁面的：https://tw.stock.yahoo.com/d/s/company_2330.html1.
url<-""https://tw.stock.yahoo.com/d/s/company_2330.html""content0<-htmlParse(url)
結果：成功但是顯示警告訊息：XML content does not seem to be XML
後來去stockoverflow查了一下，有人回答遇到這種狀況的處理方法：
""You can use RCurl to fetch the content and then XML seems to be able to
handle it""，表示要用RCurl的getURL就能成功。

2.
url<-getURL(""https://tw.stock.yahoo.com/d/s/company_2330.html"")content1<-htmlParse(url)
結果：成功

3.
url<-""https://tw.stock.yahoo.com/d/s/company_2330.html""f<-file(url)
f_size<-file.info(url)$size
content2<-readChar(f,f_size)
close(f)
結果：
#錯誤在readChar(f, f_size) : 無法開啟連結
 此外: 警告訊息：
 In readChar(f, f_size) : 不支援這種 URL 方法


二、搜尋頁：http://www.taifex.com.tw/chinese/3/7_12_1.asp1.
url<-""http://www.taifex.com.tw/chinese/3/7_12_1.asp""content0<-htmlParse(url)
結果：成功

2.
url<-getURL(""http://www.taifex.com.tw/chinese/3/7_12_1.asp"")content1<-htmlParse(url)
結果：成功

3.
url<-""http://www.taifex.com.tw/chinese/3/7_12_1.asp""f<-file(url)
f_size<-file.info(url)$size
content2<-readChar(f,f_size)
close(f)
結果：
#錯誤: 'nchars' 引數不正確
查了readChar的使用方法，nchars不能為NA，但在此處帶入的f_size不知道為何卻是NA



總結：

1.不管怎樣用getURL比較保險
2.用file.info連接到本地file時，抓出來的size都是該file的size，但是連接到網路
  上的file時，不知道為何都讀不到正確的size(都顯示為NA)，所以就不能用
  readChar抓出網頁內容了。
可請問為何是這樣嘛？




--","R_Language"
"2310","M.1422625148.A.FB7","oldjojotenya","問題","丟入htmlParse的東西",2015-01-30 21:39:06,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
使用者

[問題敘述]:
最近在學習網路爬蟲，看到網路上餵給htmlParse的內容的寫法不太一樣，
本人對於HTTP的基礎薄弱，有點不得其門而入的感覺，
想請教以下寫法的異同與使用時機的差別，謝謝！

1.
url<-""http://xxx.html""content<-htmlParse(url)

2.(有時候1.不順利的時候帶2.的式子就成功了不知道為何)
url<-getURL(""http://xxx.html"")content<-htmlParse(url)

3.(個人猜測以下這種寫法只能存取本地file?)
url<-""http://xxx.html""f<-file(url)
f_size<-file.info(url)$size
content<-readChar(f,f_size)
close(f)


--","R_Language"
"2311","M.1422545543.A.83D","coke228","問題","不知從何處理起的BUG",2015-01-29 23:32:21,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

 錯誤在`$<-.data.frame`(`*tmp*`, ""time"", value = c(0, 0.005, 0.01, 0.015,  :
  replacement has 7400 rows, data has 1

此為出現錯誤的結果 想問各位大大可有可能的解決之道?


另外想問現使用的RStudio 為64bit 如何更改為32bit
因為有連接到外面的.DLL檔 出現相容問題

 Error in inDL(x, as.logical(local), as.logical(now), ...) :
  unable to load shared object 'D:/header/SGM_Process/dll/rsp_new.dll':
  LoadLibrary failure:  %1 不是正確的 Win32 應用程式 。

首次PO文 如有不符規定 深感抱歉


--","R_Language"
"2312","M.1422452280.A.1CF","Wush978","問題","Re: Rcpp 初學",2015-01-28 21:37:57,NA,NA,"※ 引述《gsuper (Logit(odds))》之銘言：:  cppFunction(:  ':  int fx(NumericVector x):  { int ss = x.size();:    return ss;:  }:  ':  ): ---------------: 在上述的 function 中: 1.NumericVector: 是否是 Rcpp 提供的特殊變數宣告方式?: 還是這是正常的 C語言 之宣告?: [SEXP object]: Integer(Vector|Matrix)   ; integer vectors and matrices: Numeric(Vector|Matrix)   ; numeric: Logical(Vector|Matrix)   ; logical: Character(Vector|Matrix) ; character: Raw(Vector|Matrix)       ; raw: Complex(Vector|Matrix)   ; complex: GenericVector            ; list: --------------short answer: 是

long answer:

這些類別是Rcpp利用C++的物件導向特性，

利用RAII：http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization的技術，將建立R 物件相關的C API所封裝而成的類別

所以的確是Rcpp提供的變數宣告方式。: 2. x.size(): 這是類似 size(x) 的感覺: 請問 size() 是 C 的 function 還是 R 的?short answer: 是Rcpp的

long answer:

size這個「方法」是Rcpp模仿c++ STL:http://en.wikipedia.org/wiki/Standard_Template_Library風格建立的方法，

所以只要include<Rcpp>就有了

Rcpp是刻意要遵循STL 的風格，這樣才可以直接套用許多STL 的演算法，如：

NumericVector x = ...;
std::sort(x.begin(), x.end());


--","R_Language"
"2313","M.1422369395.A.D52","andrew43","問題","Re: 用R 寫spss 的logistic regression",2015-01-27 22:36:32,NA,NA,"出差回來了，回個文給你。

## 建立一組虛假資料並進行 2 x 4 設計的 logistic regression
y <- c(rep(0, 1), rep(1, 19), rep(0, 16), rep(1, 4))
fa <- gl(2, 20)
fb <- gl(4, 1, 40)
fit <- glm(y ~ fa + fb, family = binomial)
summary(fit)

## 小數點後想看很多位數
print(summary(fit)$coefficients, digits=10)

## 針對 fa 和 fb 的 Wald test
library(lmtest)
waldtest(fit, . ~ . - fa, test = ""Chisq"")
waldtest(fit, . ~ . - fb, test = ""Chisq"")

請研究上面的例子。有問題歡迎再討論。※ 引述《lepin2001 (排年代的票真悶)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我用r 想做到spss的logistic regression: 如圖: http://ppt.cc/SgUa: 但缺黃色的和紅色框線部份: 不知該如何做: [程式範例]:: R的CODE　與ＳＰＳＳ:  data_test<-read.csv(""test.csv"",header=T):  attach(data_test):  agelevel<-factor(AgeGroup,levels=c(1,2,3,4)):  ublevel<-factor(Urbanization,levels=c(1,2,3,4)):  test_lm<-glm(Result~ExpGroup+relevel(agelevel,1)+relevel(ublevel,1),: + data=data_test,family=binomial):  summary(test_lm): R code 與spss 如圖: http://ppt.cc/UJEn: data set:: test.csv: http://ppt.cc/dfrK: 麻煩各位了!--http://apansharing.blogspot.com/--","R_Language"
"2314","M.1422361444.A.96F","celestialgod","問題","Re: Rcpp 初學",2015-01-27 20:24:02,NA,NA,"※ 引述《gsuper (Logit(odds))》之銘言：:  cppFunction(:  ':  int fx(NumericVector x):  { int ss = x.size();:    return ss;:  }:  ':  ): ---------------: 在上述的 function 中: 1.NumericVector: 是否是 Rcpp 提供的特殊變數宣告方式?: 還是這是正常的 C語言 之宣告?: [SEXP object]: Integer(Vector|Matrix)   ; integer vectors and matrices: Numeric(Vector|Matrix)   ; numeric: Logical(Vector|Matrix)   ; logical: Character(Vector|Matrix) ; character: Raw(Vector|Matrix)       ; raw: Complex(Vector|Matrix)   ; complex: GenericVector            ; list: --------------以小弟初淺的C++概念稍微解釋一下...

NumericVector是Rcpp於C++中 浮點數vector 的class (精度不確定)

而R定義的是SEXP，Rcpp提供更多不同的class供使用者使用: 2. x.size(): 這是類似 size(x) 的感覺: 請問 size() 是 C 的 function 還是 R 的?: ---: 查了以後發現是 C++ 的 vector::size() 的關係: 但為何不需要寫 #include <vector>?: http://www.cplusplus.com/reference/set/size 是 NumericVector的 member function

他底層 我不確定是不是利用vector這個標準庫

但如果是，會在定義NumericVector的header file include


另外，建議可以用Rcpp attribute去學 可能會比較容易一點

--","R_Language"
"2315","M.1422350556.A.34D","gsuper","問題","Rcpp 初學",2015-01-27 17:22:32,NA,NA,"cppFunction(
 '
 int fx(NumericVectorx)
 { int ss = x.size();
   return ss;
 }
 '
 )

---------------
在上述的 function 中

1.NumericVector
是否是 Rcpp 提供的特殊變數宣告方式?
還是這是正常的 C語言 之宣告?


[SEXP object]
Integer(Vector|Matrix)   ; integer vectors and matrices
Numeric(Vector|Matrix)   ; numeric
Logical(Vector|Matrix)   ; logical
Character(Vector|Matrix) ; character
Raw(Vector|Matrix)       ; raw
Complex(Vector|Matrix)   ; complex

GenericVector            ; list
--------------
2. x.size()

這是類似 size(x) 的感覺
請問 size() 是 C 的 function 還是 R 的?
---
查了以後發現是 C++ 的 vector::size() 的關係
但為何不需要寫#include <vector>?http://www.cplusplus.com/reference/set/--","R_Language"
"2316","M.1422259760.A.1FD","lepin2001","問題","用R 寫spss 的logistic regression",2015-01-26 16:09:18,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:


入門(寫過其他程式，只是對語法不熟悉)



[問題敘述]:

我用r 想做到spss的logistic regression
如圖http://ppt.cc/SgUa但缺黃色的和紅色框線部份

不知該如何做


[程式範例]:





R的CODE　與ＳＰＳＳ
 data_test<-read.csv(""test.csv"",header=T)

 attach(data_test)

 agelevel<-factor(AgeGroup,levels=c(1,2,3,4))

 ublevel<-factor(Urbanization,levels=c(1,2,3,4))

 test_lm<-glm(Result~ExpGroup+relevel(agelevel,1)+relevel(ublevel,1),
+ data=data_test,family=binomial)

 summary(test_lm)

R code 與spss 如圖http://ppt.cc/UJEndata set:

test.csvhttp://ppt.cc/dfrK麻煩各位了!

--","R_Language"
"2317","M.1422254655.A.548","lovesnow1990","問題","\的輸入方式",2015-01-26 14:44:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想請問一下 如果要輸入\這個字串

我看書上是說輸入""\\""

但是我試著打出來時他給我這個結果

[1] ""\\""

無論我怎麼試就沒辦法只打出\這個字串

請問這該怎麼辦呢?

--如果我們要把磁鐵棒放進線圈，線圈會說「不!!不要過來!!」而發出阻力不讓磁鐵棒靠近。但是如果我們要把放進去的磁鐵棒從線圈拿走，「傲嬌是一種線圈反而會說「我…我又沒有叫你走!!」而發出阻力不讓磁鐵棒離開= =自然現象」這種現象不就是傲嬌嗎！！！新科科人雜誌所以傲嬌這東西根本不是新梗，19世紀就有科學家發現傲嬌了！／民明書房--","R_Language"
"2318","M.1422196187.A.93D","mickey1231","問題","請問RSelenium套件問題",2015-01-25 22:29:45,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我想要練習抓取網路上的資料使用套件RSelenium時想要開啟瀏覽器有先用checkForServer()抓取所需檔案可是當執行startServer()就會出現錯誤如下Warning message:running command '""java"" -jar""C:/Users/Documents/R/win-library/3.1/RSelenium/bin/selenium-server-standalone.jar""-log ""C:/Users/Documents/R/win-library/3.1/RSelenium/bin/sellog.txt""'had status 127請問要怎麼解決呢?感謝各位高手!![程式範例]:require(RSelenium)checkForServer()startServer()see=remoteDriver(browserName = 'chrome')see$open()[關鍵字]:RSelenium--","R_Language"
"2319","M.1422022145.A.8ED","Wush978","問題","Re: 關於R的速度",2015-01-23 22:09:02,NA,NA,"R 在跑ML/DM演算法時，核心還是用C/C++去實做的，

更底層的線性代數則是用如BLAS等庫。

這種做法的好處在於，抓取運行效能和寫程式碼的平衡。

例如整理資料時，由於每次面對的資料都不同，可以快速用R Script來開發。

但是進入到最佳化運算時，由於每次要做的計算都類似，就可以用C 來加速。



比較R 這類直譯語言的時候，最主要的考量點還是功能性，而非速度。

速度的部分都可以透過C 撰寫的外掛來針對bottle neck 做加速。

而且第三方的套件庫核心，通常也會用C 來開發。

我自己也是平時寫R ，碰到bottle neck 再使用Rcpp來加速。

和純C++ 應用比起來，更有彈性：

- 不吃效能的部分，用R script開發比C 快很多（IO、Logging、Configuration...）

- R 能夠直接傳pointer 給C 處理資料，所以R extension 和純C 的差別應該只在於
  呼叫動態函式庫的overhead

- R 的套件很豐富

- R 有自己的Build Chain （對於不習慣使用CMake 的我是個加分）



回到你的問題，

在自然語言處理，比較有名的套件就是：

R 的tm、http://cran.r-project.org/web/packages/tm/index.htmlPython  的nltk，http://www.nltk.org/建議你可以先都試試看。

10G 資料的話，

核心部分沒有C 應該還是吃力。※ 引述《vvrr (vvrr)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前主要的工作是關於自然語言處理(Natural Language Processing)，: 一直以來都是用C在做大量的文字處理（處理量約是10G左右）。: 前幾天同事發現R語言，提到有不少套件可以使用，: 想詢問大家，如果處理這種量級的資料，: R的速度會很慢嗎？和其他語言(C, java, php, ...)相比的感覺？: 我查的資料提到R主要是做「統計」的運算，: 在這裡：http://www.meetup.com/Taiwan-R/ 提到可以做ML/DM。:  R給我的感覺是類似script，但是一般做ML/DM資料量都很大，: 「是不是 R經過compiler之後就能直逼 C的效能？」有這樣的疑問。: 不知道有沒有版友有實際上使用的經驗能分享？: 謝謝: [關鍵字]:: 速度, 效能, NLP--","R_Language"
"2320","M.1422001026.A.032","btoco","問題","如何比較兩串ID，計算其命中率",2015-01-23 16:17:03,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
我曾用過R的一些package進行統計分析，過去多利用Excel來計算命中率，目前想學習如
何利用R程式來達到此目的。

[問題敘述]:
我想要比較不同偵測指標的偵測效果，所以利用模擬的方式產出資料。
現在的問題在於：目前我知道哪些人確實作弊（模擬設定），
而利用指標我也獲得一些有高度作弊嫌疑者的ID，
這時我該如何有效率的計算命中率。

（1）例如：假設[1,2,3,4,5,6,7,8]為真正作弊者，
此時指標指出[1,3,5,9,10,11,12]為高度作弊嫌疑者，
有什麼辦法可以讓我得知指標偵測出的人中，僅3人命中（[1,3,5]）。

（2）又正確偵測率：正確偵測異常作答反應人數/設定為異常作答反應人數；
以及第一類型錯誤率：錯誤偵測為異常作答反應人數/設定為沒有異常作答反應人數可以
如何撰寫其公式呢？
其實第一個問題若能解決，第二個問題應該也很容易，只是實在沒有概念該用哪一個函數
，再麻煩各位大德指點迷津了！！謝謝~


[程式範例]:


[關鍵字]:矩陣、資料比對

--","R_Language"
"2321","M.1421989108.A.E01","vvrr","問題","關於R的速度",2015-01-23 12:58:26,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前主要的工作是關於自然語言處理(Natural Language Processing)，

一直以來都是用C在做大量的文字處理（處理量約是10G左右）。

前幾天同事發現R語言，提到有不少套件可以使用，

想詢問大家，如果處理這種量級的資料，

R的速度會很慢嗎？和其他語言(C, java, php, ...)相比的感覺？


我查的資料提到R主要是做「統計」的運算，
在這裡：http://www.meetup.com/Taiwan-R/提到可以做ML/DM。
 R給我的感覺是類似script，但是一般做ML/DM資料量都很大，
「是不是 R經過compiler之後就能直逼 C的效能？」有這樣的疑問。

不知道有沒有版友有實際上使用的經驗能分享？

謝謝



[關鍵字]:

速度, 效能, NLP

--","R_Language"
"2322","M.1421897721.A.29C","easonya","問題","讀取整個資料夾內的檔案？",2015-01-22 11:35:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想請問R有哪一個指令可以讀取資料夾內所有檔案，
或某些特定副檔名的檔案嗎？
google了一下，沒有找到結果
還請大家指教，謝謝


--","R_Language"
"2323","M.1421854862.A.3A1","Wush978","分享","FeatureHashing",2015-01-21 23:40:58,NA,NA,"[關鍵字]: FeatureHashing, hashing trick, R

[出處]:https://www.youtube.com/watch?v=CdMzHLrmpi8這是我在社群介紹CRAN的套件：FeatureHashing時的錄影

在以預測為主的分析，處理大量資料時，
如果有大量Categorical Variables，
用這個套件可以讓寫code簡單很多（但是準確度會掉一點點）
也可以當作一種randomized dimension reduction使用。

歡迎有興趣的版友試用，有問題也歡迎找我交流。

--","R_Language"
"2324","M.1421750525.A.4ED","EricTao","問題","非手寫輸入formula",2015-01-20 18:42:02,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
正在摸索用SHINY來寫網頁，請問如何不靠手寫輸入formula?
例如像這樣一個函式glm1 <- glm(Tr ~ age + educ + black + hisp + married + nodegr ++ re74 + re75, family = binomial, data = lalonde)變數是從CSV檔讀取的Header，不是固定的變數名稱。另外也在考慮也許從網頁輸入EVAL? 在EVAL欄位產生default值，這樣可以手動設定方程式的係數..[關鍵字]:
shiny, formula--","R_Language"
"2325","M.1421654017.A.EA7","abab800517","徵人","遺失值處理(EM法)",2015-01-19 15:53:35,NA,NA,"1.對象: 23男
2.地點: skype
3.科目：R統計軟體
4.上課時間：24h都可配合
5.時薪：600/h(可談)
6.條件：專精R,懂logistic regression,懂Expectation Maximzation
7.聯絡方式：站內信
8.附註：主要是幫我寫一個程式然後講解給我聽

--","R_Language"
"2326","M.1421508987.A.88C","celestialgod","問題","Re: list 元素加總，如何不用loop做到",2015-01-17 23:36:25,NA,NA,"我可以demo一個簡單的效率比較

code:https://pastebin.com/5mV0d8ZNReduce是除了用rcpp外最快的，無話可說

但是Reduce有一個重大缺點 需要較多的RAM才可以運行

因此，當你的matrix大小越大或是list長度越長 (資料越多)

就會無法使用，這時候就要找替代方案

最簡單的方式就是直接用迴圈做，穩又比除了Reduce跟Rcpp之方法快

至於版友提到先轉向量，然後做rbind or cbind後做和，再轉回原維度

因為reshape動作過多，影響效率，個人並不推薦


最快又最省記憶體的方式便是透過RcppArmadillo (RcppEigen也可)

(RcppEigen在windows裡預設的BLAS比RcppArmadillo快，因此效率會更好)

在我的例子中，跟Reduce可以差到2.4倍

但是當list長度增加或是matrix大小增加時，Reduce就會慢下來 (這可以自行測試)

至於迴圈就穩定維持在差距2.9倍左右


補充：

一、因為要把list中的矩陣都相加，所以openmp並不會改善多少效率
(利用#pragma omp atomic，不確定有沒有其他方案可以使用)，

這裡就沒有去寫相關的程式碼了

二、直接使用do.call去做: do.call(.Primitive(""+""), mat.list)

三、化做三維陣列去做也可以，只是用apply(mat.array, 1:2, sum)

必定比直接用Reduce慢。

另外，我認為list是R比較方便輸出的資料格式，把程式設計使用於三維陣列比較不方便

四、Machine:[email<U+00A0>protected]16G ram windows 7 64bit R-3.1.2

--","R_Language"
"2327","M.1421434855.A.086","psinqoo","問題",".sql檔讀取",2015-01-17 03:00:52,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有一個 a.sql檔，如何用R讀進去?
(不是連資料庫)

[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/sql選擇性，也許未來有用--







--","R_Language"
"2328","M.1421390552.A.D5C","ToastCheng","問題","讀取csv檔的小問題",2015-01-16 14:42:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我主要是想問read.csv(或read.table)在什麼情況下會出問題，
在參數的設定上是不是只要sep有先注意是""""還是"",""、quote有
時要設成""""之外，其他都只是讀取檔案的偏好而不影響能不能讀取成功∼？

會有這個問題是因為在網路上看到交大的課程，好奇點了作業2http://ghuang.stat.nctu.edu.tw/course/bigdata14/homework.asp有一個csv檔，我成功地用download.file(url,destfile,method=""curl"")
下載下來（在電腦也能直接開啟）
但是用read.table或read.csv卻一直出錯，
但開啟其他csv檔卻沒問題（參數都用一樣的）



[程式範例]:> read.csv(""/Users/Toast/Desktop/coursera R/FiveCities2.csv"")結果：
錯誤在make.names(col.names, unique = TRUE) :
  無效的多位元組字串於 '<b6>m<c2><ed><a5><ab><b0><cf>'


--","R_Language"
"2329","M.1421377742.A.EA0","tokyo291","問題","和package的範例結果不合",2015-01-16 11:08:59,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
在試zelig這個pkg的example code，但是跑出來的結果和網頁上的結果不同

[程式範例]:http://docs.zeligproject.org/en/latest/zelig-probitgee.html有問題的code是plot(s.out1)

我的R跑出來只有expected value的圖，沒有上方predicted valu的圖

請問這是R版本的問題嗎?

[關鍵字]:

zelig

--","R_Language"
"2330","M.1421309862.A.0CF","a78998042a","問題","list 元素加總，如何不用loop做到",2015-01-15 16:17:18,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]
想使用apply類型的函數將list內的元素加總，而不使用for loop

[程式範例]:

mat=matrix(1:4,2,2)
mat.list=list(mat,mat,mat)

想加總成單一的矩陣

結構為:matrix(c(3,6,9,12),2,2)

有人知道不用loop的情況可以怎麼做嗎?
謝謝

--

--","R_Language"
"2331","M.1421160017.A.759","psinqoo","問題","Re: 中文顯示 ",2015-01-13 22:40:14,NA,NA,"我的系統，跟你差不多

電腦是Win8，之前R-3.1.2。

做text mining 時，一樣xb6 /n 這類的，

爬論壇後，有些人也是因為升級R後，出現如此情況。

相同都是WINDOWS系統，所以我降回3.02版後，又正常。

我建議還是要用LINUX去RUN，不然做大量運算，

很容易卡在，N GB 向量 或記憶體不足。http://ppt.cc/pjaX※ 引述《e002311 (鴻)》之銘言：:: 文章分類提示:: - 問題: 當你想要問問題時，請使用這個類別:: [問題類型]::: 經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 我下載了104銀行的職缺，並且轉成dataframe, 在RStudio用View()可正常顯示中文: 但使用的時候，卻無法正常當作中文(叫出來是一堆/xb6等的編碼)，: 也就無法用Rwordseg包的segmentCN了: https://drive.google.com/folderview?id=0B2uFE44KhggoZTJxZXprNXpGcGs&usp=sharing: AllProcess.R 是我爬下來時的使用方式: crawlerFile.rds 是我爬下來之後的list: filterLessThan11 是我轉成的dataFrame: 若指定dataFrame叫出來的內容會是\xe6等字眼: 想問一下怎麼解決這個問題: 我的電腦是Win8: 用R-3.1.2跟RRO8.0.1: [程式範例]::: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題: 程式碼可貼於以下網站：:       http://ideone.com/:       http://codepad.org:       http://pastie.org/:       http://nopaste.info/:       http://pastebin.com/:       http://paste.plurk.com:       http://gist.github.com/:       http://nopaste.csie.org/:: [關鍵字]::: 選擇性，也許未來有用:

--

--","R_Language"
"2332","M.1421156648.A.15C","Wush978","問題","Re: 擷取data.frame中的特定資料",2015-01-13 21:44:05,NA,NA,"關於資料整理，我很想推dplyr這個套件，
以及magrittr所導入的pipeline語法。

借你的問題來跟大家分享一下如何用dplyr來解決這種問題: 各位大大好，小弟在做coursera的作業時有一題要求把: 一個給定的data.frame（叫做airquality）中某兩個向: 量（Ozone和Temp）分別大於31和90時的第三個向量Solar.R: 的平均值是多少？```r
attach(airquality)
library(dplyr)
filter(airquality, !is.na(Ozone), !is.na(Temp)) %>%
  filter(Ozone > 31, Temp > 90) %>%
  `[[`(""Solar.R"") %>% mean
```

前兩行載入資料和dplyr。
dplyr對於表格化的物件，如：

  data.frame
  data.table （當資料量大的時候，好用的套件）
  SQL database 中的table

提供了一致的「動作」來作資料整理。

常用的有：

選行: select, 同SQL select
選列: filter, 同SQL where
排序: arrange, 同SQL sort by
取獨特值: distinct, 同SQL distinct
更動值: mutate, 同SQL update
總結: summarise (可搭配group_by使用，類似SQL group by)


這裡第三行
filter(airquality, !is.na(Ozone), !is.na(Temp))
表示從airquality中取出Ozone和Temp不是NA的列出來

第三行最後面的`%>%`是magrittr套件（dplyr會自動幫你載入它）
導入的一種`pipeline`方式的寫法。

他的功能在於，把前面的輸出結果，放到下一個函數的第一個參數

舉例來說，原本我們要這樣寫：

df1 <- filter(airquality, !is.na(Ozone), !is.na(Temp))
df2 <- filter(df1, Ozone > 31, Temp > 90)

懶惰的人如我，可能會寫成

filter(filter(airquality, !is.na(Ozone), !is.na(Temp)),
  Ozone > 31, Temp > 90)

這樣可以略過中間的暫存變數df1，但是程式碼也變醜了

透過`%>%`，我們可以把上面兩行改成：

filter(airquality, !is.na(Ozone), !is.na(Temp)) %>% # df1
  filter(Ozone > 31, Temp > 90) # filter(df1, ...)

不但可以略過暫存變數，同時程式碼仍然看起清楚

最後利用`%>%`和`[[`達到取出行變數Solar.R
再用mean算出平均值。

這裡順便跟大家宣導一個小概念：

R 中所有的東西都是「函數」，包含airquality[[""Solar.R""]]這種語法，
實際上是`[[`(airquality, ""Solar.R"")
利用這樣的概念，再搭配`%>%`的威力，程式碼就寫的更爽了: 後來我有發現可以用：: attach(data): sub <- subset(data,Ozone > 31 & Temp > 90): summary(sub): 的方式求出Solar.R在符合上述兩個條件之下的平均值。: 但一開始只是直覺地想要用for loop暴力算，但沒成功，: 想問板上是否可以用迴圈的方式算出來？以下是自己嘗試: 的程式碼，附帶一提：: data[,1]是Ozone: data[,2]是Solar.R: data[,4]是Temp: [程式範例]:: add <- 0: count <- 0: for(i in 1:153){:   if(data[i,1]>31 & data[i,4]>90):     add <- add + data[i,2]  #把符合條件的Temp值累加:     count <- count + 1: }: mean <- add/count: 這媢J到的問題是data[,1]含有NA值，所以我想把有NA值: 的資料刪掉，於是先跑這個for loop：: for(i in 1:153){:   if(is.na(hw2[i,1])):     hw2[i,] <- NULL: }: 結果：:  錯誤在`[<-.data.frame`(`*tmp*`, i, , value = NULL) ::   replacement has 0 items, need 6: 不知道是類型不一樣，NULL不能隨便套用還是其他原因，: 總之先感謝各位大大把這篇看完QQ--","R_Language"
"2333","M.1421144272.A.DAB","ToastCheng","問題","擷取data.frame中的特定資料",2015-01-13 18:17:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位大大好，小弟在做coursera的作業時有一題要求把
一個給定的data.frame（叫做airquality）中某兩個向
量（Ozone和Temp）分別大於31和90時的第三個向量Solar.R
的平均值是多少？

後來我有發現可以用：
attach(data)
sub <- subset(data,Ozone > 31 & Temp > 90)
summary(sub)
的方式求出Solar.R在符合上述兩個條件之下的平均值。

但一開始只是直覺地想要用for loop暴力算，但沒成功，
想問板上是否可以用迴圈的方式算出來？以下是自己嘗試
的程式碼，附帶一提：
data[,1]是Ozone
data[,2]是Solar.R
data[,4]是Temp


[程式範例]:
add <- 0
count <- 0
for(i in 1:153){
  if(data[i,1]>31 & data[i,4]>90)
    add <- add + data[i,2]  #把符合條件的Temp值累加
    count <- count + 1
}
mean <- add/count

這媢J到的問題是data[,1]含有NA值，所以我想把有NA值
的資料刪掉，於是先跑這個for loop：
for(i in 1:153){
  if(is.na(hw2[i,1]))
    hw2[i,] <- NULL
}
結果：
 錯誤在`[<-.data.frame`(`*tmp*`, i, , value = NULL) :
  replacement has 0 items, need 6

不知道是類型不一樣，NULL不能隨便套用還是其他原因，
總之先感謝各位大大把這篇看完QQ




--","R_Language"
"2334","M.1421111063.A.7D2","psinqoo","問題","t(x) 跑出向量 轉秩後的問題",2015-01-13 09:04:19,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別轉秩後出現向量[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:x是下面這些txt1 鄉民txt2 中國txt3 法輪功t(x) 存檔後跑 V1 V2 V3txt1 txt2 txt3鄉民 中國  法輪功[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:

t() 轉秩選擇性，也許未來有用--

--","R_Language"
"2335","M.1421074492.A.4B9","Wush978","問題","Re: 很基礎的for問題(loop)",2015-01-12 22:54:49,NA,NA,"改一下你的程式※ 引述《hyposoda (hypo)》之銘言：: [程式範例]:x <- matrix(1:6, 2, 3)
for(i in seq_len(nrow(x))) {
  for(j in seq_len(ncol(x))) {
    browser()
    print(x[i, j])
  }
}

每次跑到browser()的時候，R會中斷

趁機看一下i, j的值，以及比較一下seq_len(nrow(x))和seq_len(ncol(x))

--","R_Language"
"2336","M.1421074175.A.0E1","hyposoda","問題","很基礎的for問題(loop)",2015-01-12 22:49:33,NA,NA,"[問題類型]:
預設沒有的問題類型...
應該是基本題Q_Q


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
只用過SAS和SPSS
目前在自學R


[問題敘述]:
這是coursera的R programming課程
第2周的控制結構 (第1部分) 第8頁
用R跑出來的結果會是
1
3
5
2
4
6

x=
1 3 5
2 4 6

i=2
j=3

但是結果為何會是如此呢?

雖然是白癡問題
還是希望好心人能指點一二
謝謝！

[程式範例]:

x <- matrix(1:6, 2, 3)

for(i in seq_len(nrow(x))) {

for(j in seq_len(ncol(x))) { print(x[i, j])
}

}


[關鍵字]: for,loop,matrix

--","R_Language"
"2337","M.1421072025.A.4FE","psinqoo","問題","grep in R",2015-01-12 22:13:42,NA,NA,"文章分類提示:- 問題: grep 用法[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:我有一批資料，使用 s1<- grep(""柯文哲"", x5)找到這些文章位址後，改如何取出這些文章，另存一張新表?s2<-write.table(s1,file=""s1.csv"") 只存到數字##############s1<- grep(""柯文哲"",, x5,invert=TRUE, value=TRUE)s2<-write.table(s1,file=""s1.csv"") 存到所有文章#############另一問題  同時滿足 ""柯文哲"" 與 ""台北市""文章位址的語法，該如何寫?[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:
grep選擇性，也許未來有用--







--","R_Language"
"2338","M.1420994301.A.E98","Wush978","問題","Re: 連續變數命名、運算",2015-01-12 00:38:18,NA,NA,"# 方法一

利用一個list來放這些變數。

以抽象功能來說，

list很適合把字串map到R物件。

x <- list()

for(i in 1:3) {
  name <- # 建立a1, a2, ...
  x[[name]] <- value # 賦值
}

sum(unlist(x))


# 方法二

假設你已經用你上面寫的方法設定好a1, a2, a3, ...

你可以把「環境」當list用。(但是兩者還是不太一樣）

retval <- 0
for(i in 1:3) {
  name <- # 建立如a1, a2的字串
  retval <- retval + globalenv()[[name]]
}

當然你可以繼續玩apply家族

或是用get之類的函數

但是這些都是透過「環境」來利用字串存取物件。※ 引述《ntme (one shot one kill)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]::  以用 for loop 產生連續的變數並命名，但不知道怎麼用: for loop再利用產生的變數運算: [程式範例]::: #產生 a1 = 1, a2 = 2, a3 = 3: for ( i in 1:3 ) {:         var_name <- paste(""a"",i, sep=""""):         assign( var_name, i):         }: 請問如何寫for loop把 a1, a2, a3加起來:

--","R_Language"
"2339","M.1420990230.A.948","ntme","問題","連續變數命名、運算",2015-01-11 23:30:26,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟

[問題敘述]:
 以用 for loop 產生連續的變數並命名，但不知道怎麼用

for loop再利用產生的變數運算

[程式範例]:

#產生 a1 = 1, a2 = 2, a3 = 3
for ( i in 1:3 ) {
        var_name <- paste(""a"",i, sep="""")
        assign( var_name, i)

        }


請問如何寫for loop把 a1, a2, a3加起來





--

114 > 112 bj4

melody

--","R_Language"
"2340","M.1420980502.A.216","e002311","問題","中文顯示 ",2015-01-11 20:48:19,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我下載了104銀行的職缺，並且轉成dataframe, 在RStudio用View()可正常顯示中文
但使用的時候，卻無法正常當作中文(叫出來是一堆/xb6等的編碼)，
也就無法用Rwordseg包的segmentCN了https://drive.google.com/folderview?id=0B2uFE44KhggoZTJxZXprNXpGcGs&usp=sharingAllProcess.R 是我爬下來時的使用方式
crawlerFile.rds 是我爬下來之後的list
filterLessThan11 是我轉成的dataFrame

若指定dataFrame叫出來的內容會是\xe6等字眼

想問一下怎麼解決這個問題

我的電腦是Win8
用R-3.1.2跟RRO8.0.1

[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--
作宅男其實也沒什麼不好。

你千萬別問我為什麼，

因為你不是，就算解釋了，你依舊不會了解。


--","R_Language"
"2341","M.1420942902.A.024","psinqoo","問題","取出資料 增加欄位到一張新表",2015-01-11 10:21:38,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
*[1;30;40m
使用者(已經有用R 做過不少作品)


[問題敘述]:從data取出資料 到一張新表 並在增加欄位e.gx1<-data$文章內文接下來 我想形成 一張表id      文章內文txt1    柯PXXXXtxt2    阿扁XXXXtxt3    蘋果XXXXXXXX...     ........     .....說明想增加欄位 id txt1 txt2....文章內文 是從 舊表data中取出的資料然後形成新表想知道這段CODE如何寫原本資料http://ppt.cc/GXwT新資料http://ppt.cc/OuiW[程式範例]:[關鍵字]:

欄位 表格選擇性，也許未來有用--

--","R_Language"
"2342","M.1420804329.A.1FA","pornstar","問題","Re: lm函式是否能計算高維度的資料?",2015-01-09 19:52:07,NA,NA,"目前嘗試使用glmnet處理

code如下:

Model<-glmnet(Data,Target)

其中Data是維度很高的資料 約100*10000  Target是欲fitting的目標 100*1

兩個都是矩陣形式 資料都是純數值

接著想檢查fitting出的答案跟Target像不像

Result<-predict(Model,Data)  ##再把Data丟進去一次看結果

我本來預期訓練出的結果應該跟Target資料差不多

結果一看Result  竟然是100*100的矩陣

然後矩陣內的數字幾乎都一模一樣  就是Target整體資料的平均值

我有兩個疑問:

1.為何吐出來的Result是100*100 而非100*1?

(後來我在glmnet內加入nlambda=1條件 就變成吐出100*1 nlanbda預設100 但不知道

這個參數的作用是甚麼)


2.為何Result內的數值都是Target整體的平均值? 這樣有預測跟沒預測一樣

等同於預測出的答案全填整體的平均


對glmnet不太熟悉  還希望高手指點~~

感謝!!

--","R_Language"
"2343","M.1420762849.A.8CE","wakke","問題","請問趨勢線的分類篩選?",2015-01-09 08:20:47,NA,NA,"想請問一下，我現在在分析一個網站的產品退件數趨勢分析，資料結構大概是這樣


     月份-退件   1    2    3   4   5 .....................12

ID1               5    7    10  20  3......................1
ID2               3    5    1    2  10.....................5



然後我想把每個ID都畫成趨勢線，瞭解一年中的起伏狀況(資料約2萬筆)

然後這些2萬筆資料中，我想大概分群成3~5個clusters(同時產生估計的趨勢線)

那本來是想用kmeans 或SVM 但是點狀的資料還會處理，但是這樣每個ID有多筆資料

而且我是想資料1~12月份的趨勢，而不是1、2、3.....月的點狀群聚狀況

請問這樣有那個Package可以去做嗎?謝謝提供意見喔。

--

--","R_Language"
"2344","M.1420710646.A.60F","pornstar","問題","lm函式是否能計算高維度的資料?",2015-01-08 17:50:44,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[問題敘述]:

各位好~!

我的資料型態是變數 >> 要預測的目標 (也就是變數的維度很高)

假設是 10x10000的資料  也就是由10000個變數作回歸 分析出10個對應結果


將資料丟進lm()做回歸分析時  發現會跑出一堆NA


但是如果我將變數做擷取 從原先的10000取前9行 (讓行數小於列數: 9 < 10)

在丟進lm() 這樣就可以正常運作 生出10個對應結果


但是這樣只是取原先資料的一小部份來做回歸

想請問lm()函式  或是R語言 要怎樣做才能對這種變數維度很高的資料回歸分析呢?


先感謝回答~~

--","R_Language"
"2345","M.1420627893.A.E2A","PhysicsBoy","問題","關於銀幕輸出的問題",2015-01-07 18:51:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

小弟作模擬的過程中，由於需要檢查是否在流程上有無錯誤，
以往使用c語言時，輸出可隨著迴圈變數而改變，
即當迴圈變數為i時，
當i=5則顯示出i是5的資訊，
所以想請教諸位大大
不曉得R是否有這樣的功能方便檢查模擬細節呢?

謝謝

--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"2346","M.1420456736.A.05E","gotodmcyo","問題","Re: 使用animation的saveGIF出現error",2015-01-05 19:18:49,NA,NA,"恩...時間有點久遠所以就回文

剛好最近也在用 animation package做些東西

在 Mac 上裝好 ImageMagick 跟 install.packages(""animation"")後沒什麼問題

由於明天要跟老闆 meeting 就在win7上跑了一下

在存gif時也跑出了錯誤

google發現這篇https://github.com/yihui/animation/issues/55在yulijia commented on 29 Nov 2014的留言有提到解答

有興趣的朋友可以去看

但重點就是裝開發版本的animation 有修正這個bug

下方是留言中的安裝過程 code
# install the development version
install.packages('devtools')
library(devtools)
install_github(""yihui/animation"")
library(animation)
saveGIF({for (i in 1:10) plot(runif(10), ylim = 0:1)})


如果最後有順利跑出gif就是成功了...※ 引述《tokyo291 (工口工口)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 想把plot的動態圖形存成GIF檔,使用animation這個package: 出現錯誤訊息,查了之後,執行這個結果需要安裝ImageMagick: 在下列網址可以找到安裝檔: http://www.imagemagick.org/script/binary-releases.php: 安裝完之後,成功一次轉出GIF檔: 在一次執行時就轉不出來了...: [程式範例]:: > saveGIF({: +     for (i in 1:10) plot(runif(10), ylim = 0:1): + }): Executing:: ""convert"" -loop 0 -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png: Rplot5.png:     Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png ""animation.gif"": 'convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png: Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png: ""animation.gif' 不是內部或外部命令、可執行的程式或批次檔。: 參數無效 - 0: an error occurred in the conversion... see Notes in ?im.convert: [1] FALSE: 警告訊息：: 1: 執行中命令 'C:\WINDOWS\system32\cmd.exe /c ""convert"" -loop 0  -delay 100: Rplot1.png Rplot2.png Rplot3.png Rplot4.png Rplot5.png Rplot6.png Rplot7.png: Rplot8.png Rplot9.png Rplot10.png ""animation.gif""' 已有狀態 1: 2: In cmd.fun(convert) ::   '""convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png: Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png: ""animation.gif""' execution failed with error code 1: 3: 執行中命令 '""convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png: Rplot4.png Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png: ""animation.gif""' 已有狀態 4: 4: In normalizePath(path.expand(path), winslash, mustWork) ::   path[1]=""animation.gif"": 系統找不到指定的檔案。: [關鍵字]:: animation/ImageMagick/saveGIF--


耍心眼掉眼淚 扮笑臉說是非

酸民就是矯情 用C4就對了！


--","R_Language"
"2347","M.1419861310.A.1A1","oldjojotenya","問題","quntmod中的to.monthly",2014-12-29 21:55:08,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
打怪升級中

[問題敘述]:
可請教各位版大quantmod當中to.monthly函數是怎麼計算OHLC數據的嘛？
是用月平均值呢還是月中位數抑或是月的end point值？
看了help page的解釋有提到日期本身是用end point計算的，但是沒提到OHLC數值
透過to.monthly轉換的過程是用什麼方法換算的？謝謝

[關鍵字]:
to.monthly

--","R_Language"
"2348","M.1419819691.A.1EB","Wush978","分享","在Ubuntu上架設能顯示中文的shiny-server",2014-12-29 10:21:28,NA,NA,"[關鍵字]: shiny, shiny-server, chinese, png device, fonts



大家好，

昨天我架設shiny-server時，發生圖中的中文無法正確顯示的問題。

經過一陣摸索和google之後，發現相關的知識挺零碎的。

我自己把問題切割成兩個面向：

1. png device 在缺乏x11環境時導致的錯誤。這個在SO中有看到幾位大大的建議，

   原則上就是使用cairo

2. 字型的缺乏，導致圖中的中文變成方塊。

   這部份的資料很少，我是跑去搜尋Ubuntu的套件資訊時才找到的，花了很大力氣。

最後我將整個過程，從minimal ubuntu開始，到設定出能正確顯示中文的shiny-server，

寫在https://registry.hub.docker.com/u/wush978/tw-r-shiny/dockerfile/之中

給大家（和未來的我）參考。

--","R_Language"
"2349","M.1419518656.A.B83","PhysicsBoy","問題","讀取txt檔的問題",2014-12-25 22:44:13,NA,NA,"入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

小弟在作一些模擬時建立了一個陣列array(dim=c(1000,3,10000))
大家可以清楚看到該陣列維度是1000x3x10000
跑完模擬後
我用dput指令輸出到一txt檔

日後我又以dget讀取該txt檔
此時問題來了
讀到一半就會顯示記憶體不足
我該如何讓資料可以完全讀取呢?

想請教板上的大大們

--
離開你的視線~讓情緒完完整整的宣洩~

我想今夜就這樣吧~

反正孤獨也無所謂~

--","R_Language"
"2350","M.1419338488.A.F31","psinqoo","分享","寫了一個 shinyapp",2014-12-23 20:41:18,NA,NA,"類別說明:

- 心得: 當你自己想要分享經驗時，請使用這個類別。

寫了一個股價查詢APP，資料來源是美國雅虎財經，

只要USA雅虎有的，就能查的到。

請鞭小力點https://aska.shinyapps.io/stock/在迷迷糊糊寫出來，結果因為微軟更新，重開掛點。

目前也正想辦法恢復記憶中，唯一慶幸是有掛上去shinyapp

養成好習慣，寫完後CODE自動上傳雲端，或著在雲端上寫，

就比較不會有悲劇。

補充一下 TA=addSM()，似乎有問題。

寫兩個指標時，我是用c(指標1(參數，顏色)，指標2(參數，顏色))





[關鍵字]:

shinyapp quantmod

[出處]:

shiny

[重點摘要]:

shinyapp 上傳 透過Rstudio

quantmod 技術指標

--","R_Language"
"2351","M.1418910652.A.1CE","Carollax","問題","在建立的package中使用其它package功能",2014-12-18 21:50:50,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

使用者

[問題敘述]:

有一個函數，現在想把它包裝成package

我參考板上《五分鐘學會「如何使用Rstudio建立R套件」》去建package

函數當中會把輸入的資料轉成data.table，再用到「:=」的取代功能

但都會跳出錯誤訊息說我的資料型態不是data.table無法使用「:=」指令

問題是我加上print去查看資料的class，它的確是data.table

而此問題在包裝成package前是不存在的，單純source這個code是可以跑的

我猜想是不是在package中調用到其它套件要另外調整？

想請問這情況何解？

[程式範例]:

##
f <- function(data){
  data <- data.table(data)
  print(is.data.table(data))
  data[,X:=20]
}
##

例如說上面這個函數，我直接source就沒問題

但是如果弄成package就會顯示以下錯誤訊息：

Error in `:=`(X, 20) :
  Check that is.data.table(DT) == TRUE. Otherwise, := and `:=`(...) are
defined for use in j, once only and in particular ways. See help("":="").

但用is.data.table去測試，發現確實是data.table沒錯

(奇怪的是data.table跟is.data.table也是data.table套件的函數，但皆運作正常)

[關鍵字]:

Package、data.table

--","R_Language"
"2352","M.1418805378.A.5F0","iwantstronge","問題","一次用多模型作預測",2014-12-17 16:36:15,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

版友們好!

1.SPSS可以一次同時選擇多個模型來作預測  將預測結果的誤差縮到最小~

(變成一個複合模型)

想請問R有辦法做到這件事嗎?

我目前只會用各別的單一模型來做預測 在選擇誤差最小的模型


2.另外我目前也在學著用RevoscaleR  看了user guide

是否RevoscaleR只能用在特地幾個模型 而無法使用nnet? (user guide沒列出來)

以上兩個問題~感謝~

--","R_Language"
"2353","M.1418715770.A.58C","andrew43","問題","Re: extendChi離散化 用法",2014-12-16 15:42:46,NA,NA,"你在來信當中有提到你是在excel中建立資料，並想導入R中進行分析。

傳統上，R是不接受excel的預設格式的，而是先在excel中轉存成純文字檔，
再交給R來讀取。

你在excel中選取另存新檔，應該可以找到一些可用的純文字格式，
例如 CSV（中文可能譯作逗號分隔檔案之類的），可以選它，
再用R的 read.csv(""filename.csv"") 來讀取。

過去我有一個給初學者的影片有介紹這些內容，
請參考http://youtu.be/STcIxf_vUWY?t=8m36s（可能會插播廣告）。※ 引述《vioan223 (vioan223)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 新手(沒寫過程式，R是我的第一次): [問題敘述]:: 我想用extendCHi2將連續數值切成離散值，但我不知道怎麼使用，想: 請問有人有成功使用過嗎?可以教我嗎?我會非常感激，謝謝--http://apansharing.blogspot.com/--","R_Language"
"2354","M.1418569737.A.B19","vioan223","問題","extendChi離散化 用法",2014-12-14 23:08:55,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手(沒寫過程式，R是我的第一次)

[問題敘述]:
我想用extendCHi2將連續數值切成離散值，但我不知道怎麼使用，想
請問有人有成功使用過嗎?可以教我嗎?我會非常感激，謝謝


--","R_Language"
"2355","M.1418356756.A.661","psinqoo","問題","Re: Shinyapp",2014-12-12 11:59:14,NA,NA,"在我的電腦RUN是正常
用的是 rvest 包


但有出現
Note: the specification for class “Token” in package ‘selectr’ seems
equivalent to one from package ‘httr’: not turning on duplicate class
definitions for this class.




但上傳後 出現

Error:server certificate verification failed.

CAfile: /usr/local/lib/R/site-library/httr/cacert.pem CRLfile: nonehttp://ppt.cc/XO~8需要做甚麼調整※ 引述《psinqoo (零度空間)》之銘言：::   問題: shinyapp server.r:: [問題類型]::: 程式諮詢:: [軟體熟悉度]::: 使用者(已經有用R 做過不少作品): [問題敘述]::: 我在 ui.r 讓使用者能輸入 ""數字"": 在server.r: ui.r 輸入後到 server.r 參數 input$num: x1<-""https://www.xxx.xxx/xx/xxx/xxx_數字.html"": (x1<-""https://www.xxx.xxx/xx/xxx/xxx_input$num.html""): 這段要怎麼寫: 例如 ui.r 使用者 輸入 1234: x1<-""https://www.xxx.xxx/xx/xxx/xxx_1234.html"":: [程式範例]::: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題:: [關鍵字]:: shinyapp:: 選擇性，也許未來有用:: 謝謝各位大大解答: 正解: x1<-paste(""https://www.xxx.xxx/xx/xxx/xxx_"",input$num,"".html"",sep="""")--","R_Language"
"2356","M.1418302870.A.1B1","psinqoo","問題","Shinyapp",2014-12-11 21:00:55,NA,NA,"問題: shinyapp server.r[問題類型]:程式諮詢[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:我在 ui.r 讓使用者能輸入 ""數字""在server.rui.r 輸入後到 server.r 參數 input$numx1<-""https://www.xxx.xxx/xx/xxx/xxx_數字.html""(x1<-""https://www.xxx.xxx/xx/xxx/xxx_input$num.html"")這段要怎麼寫例如 ui.r 使用者 輸入 1234x1<-""https://www.xxx.xxx/xx/xxx/xxx_1234.html""[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[關鍵字]:

shinyapp選擇性，也許未來有用謝謝各位大大解答

正解

x1<-paste(""https://www.xxx.xxx/xx/xxx/xxx_"",input$num,"".html"",sep="""")--","R_Language"
"2357","M.1418291573.A.D7C","yaowei2010","問題","output文字字串資料沒有quote",2014-12-11 17:52:51,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
output文字字串資料沒有quote("" "")

[程式範例]:

因為某些原因我用paste要設定我的dataframe裡面資料格式

但儲存成output後發現每個資料都有quote "" ""

我想把"" "" 拿掉

excel用取代的話我電腦就沒回應了= =

想問怎樣可以拿掉"" "" (輸出資料後也不要出現)

我已經試過noquote和cat了

cat好像是輸出 沒辦法存入table中

noquote好像弄了也沒辦法= =

有更好的方法嗎?


--","R_Language"
"2358","M.1418277663.A.C08","andrew43","問題","Re: 數字插入問題",2014-12-11 14:00:58,NA,NA,"這是用 diag() upper.tri() lower.tri() 的應用。
重點是看出 y 的右上部分和左下部分和 x.mat 的有相似性。
你可以觀察一下最後三列 code 的結果是什麼就可以了解了。

你可以再改寫成一個 function，
其中只有 x 和 k 是 input，而 y 最終是 output。

k <- 100
x <- c(3,6,5,8,7)
x.mat <- matrix(rep(x, yrl - 1), yrl-1, byrow=T)
yrl <- length(x)+1
y <- diag(k, yrl, yrl)
y[upper.tri(y)] <- x.mat[upper.tri(x.mat) | diag(yrl-1)]
y[lower.tri(y)] <- x.mat[lower.tri(x.mat) | diag(yrl-1)]※ 引述《yaohwei (笨笨的)》之銘言：: 各位高手你們好，小弟有個問題請教大家，在此先感謝各位幫助: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有n個數(先假設n=5)，例如:3,6,5,8,7: 另外有個數字，例如:2: 小弟想列出2插入所有縫隙的所有可能矩陣: 即: 2,3,6,5,8,7: 3,2,6,5,8,7: 2,6,2,5,8,7: 3,6,5,2,8,7: 3,6,5,8,2,7: 3,6,5,8,7,2: 請問各位高手該如何寫，小弟再次感謝各位--http://apansharing.blogspot.com/--","R_Language"
"2359","M.1418266871.A.8B7","yaohwei","問題","數字插入問題",2014-12-11 11:01:08,NA,NA,"各位高手你們好，小弟有個問題請教大家，在此先感謝各位幫助

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有n個數(先假設n=5)，例如:3,6,5,8,7
另外有個數字，例如:2
小弟想列出2插入所有縫隙的所有可能矩陣
即
2,3,6,5,8,7
3,2,6,5,8,7
2,6,2,5,8,7
3,6,5,2,8,7
3,6,5,8,2,7
3,6,5,8,7,2

請問各位高手該如何寫，小弟再次感謝各位

--","R_Language"
"2360","M.1418208280.A.A1D","oldjojotenya","問題","正則表達式-""\\.""",2014-12-10 18:44:38,NA,NA,"[軟體熟悉度]:
魯肉腳

[問題敘述]:

coursera某篇在教strsplit的section：
>names(cameraData)
[1] ""address"" ""direction"" ""street"" ""crossStreet"" ""intersection"" ""Location.1""

該篇教學內容主要目的是要透過strsplit將""Location.1""經由"".""分離，因此要設正則
表達式：
splitNames = strsplit(names(cameraData), ""\\."")

我不懂的地方在於，為何""\\""是兩個而不是一個，當我只用一個""\""的時候，會出現以下
警告：
>strsplit(names(cameraData), ""\."")
錯誤: 在起始 """"\."" 的字串中 '\.' 是無法辨識的跳脫字元

是否有好心大大可以解惑？謝謝

[關鍵字]:
regular expression

--","R_Language"
"2361","M.1418048003.A.21C","WeTinHsu","問題","軟體更新，package要重新安裝一次嗎?",2014-12-08 22:13:20,NA,NA,"文章分類提示:
- 問題:
       我的R軟體要從2.9.1版更新到3.1.2版，
       安裝完3.1.2版後，發現以前裝在2.9.1的package沒有在3.1.2出現，
       想請問是否有方法快速的裝回package?



--","R_Language"
"2362","M.1417946411.A.5D3","nh2","問題","index和rowname不一致？",2014-12-07 18:00:03,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

請教各位，
當我用complete.cases選出data中沒有na值的資料設成data1
想用data1計算出同樣id的行有幾個，
但是最後的result其index值和row name不一樣，
想請教要如何才能把index改成和row name 一樣？

complete <- function(x, z) {
  filelist <- list.files(""./specdata/"", full.names = T)
  data <- data.frame()
  ##讀入全部data
  for(i in z){
    data <- rbind(data, read.table(filelist[i], header = T, sep ="",""))
  }
  ##只要沒有na值的
  data1 <- data[complete.cases(data), ]
  data1$ID.F <- as.factor(data1$ID)
  ##看同一個id的資料有幾個
  result <- tapply(data1$ID, data1$ID, length)
  result2 <- as.data.frame(result)
  result2
}

data裡包含ID, data, sulfate
所以同一個id裡會有很多筆不同data和sulfate的資料

--","R_Language"
"2363","M.1417148498.A.34E","ardodo","問題","如何將資料依據某欄位重新排序",2014-11-28 12:21:36,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:各位版友好，我現在想要把以下資料(matrix形式)按照total欄位重新排序目前資料如下：100 101 102 totalA  1   2   2   5B  2   1   3   6C  1   1   1   3D  3   2   2   7目標資料如下：100 101 102 totalD  3   2   2   7B  2   1   3   6A  1   2   2   5C  1   1   1   3在excel中可以很直觀的依照total降冪篩選，請問在R裡面要如何做到呢？[關鍵字]:
資料表重新排列


--","R_Language"
"2364","M.1417029155.A.511","lepin2001","問題","林建甫的存活分析",2014-11-27 03:12:32,NA,NA,"http://www.books.com.tw/products/0010417184因為最近要研究存活分析…
想請問這本書裡面有用到r嗎?

謝謝!


--","R_Language"
"2365","M.1416390265.A.D70","nh2",NA,"plot畫圖",2014-11-19 17:44:20,NA,NA,"其實只是個小小問題…
正再看coursera的exploratory data analysis
裡面畫圖是用
with(data, plot(x, y))

記得一般畫不是只要plot()就好了？
加with的目的是？

--","R_Language"
"2366","M.1416208463.A.59F","Godkin","問題","關於hypergeometric計算一問",2014-11-17 15:14:21,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:大家好，我在計算超幾何分配的機率分佈時遇到了一個問題:首先, 我總共有24607顆球, 其中白球有1865顆, 黑球有22742顆要算的是...現在我不放回抽了3460顆，其中至少有379顆白球的機率在R底下我用的是phyper, python下我用的是stats.hypergeom.sf但兩者算出的結果有點不同，請問我該相信哪一種方法算出來的結果?[程式範例]:R:1 - phyper(379-1,1865,22742,3460) = 7.993606e-15Python:stats.hypergeom.sf(379-1,24607,1865,3460) = 7.96882090302e-15奇怪的是, 如果我在phyper當中開啟log.p的設定:-phyper(379-1,1865,22742,3460,log.p=TRUE) = 7.968821e-15就可以得到跟python一樣的結果, 請問為何會這樣?*[m[關鍵字]:hypergeometric--","R_Language"
"2367","M.1416076425.A.46E","j94223","問題","有程式基礎的初學者用書？",2014-11-16 02:33:43,NA,NA,"大家好 我今年大四要讀研究所 已經找好指導教授
研究的方向以大數據分析(Big Data)為主
教授說語言在Big Data分析比較方便 因此叫我先修

我沒用過Ｒ語言 但是我有程式基礎 C/Java/硬體描述語言/MATLAB 都還算了解
所以我想請問有沒有推薦的Ｒ初學者用書？

稍微爬文發現Ｒ與統計很相關
我有修過工程機率但是對統計沒概念

希望有Ｒ的概念引導類型的書（例如:深入淺出Java）
並且有對統計/資料庫的基礎有講解
若有大量例子更加分（還是以概念為主，我知道一本書不太可能概念多，範例也多）

有沒有推薦的書呢？
謝謝大家

--","R_Language"
"2368","M.1415848834.A.746","criky","問題","條件篩選資料",2014-11-13 11:20:27,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
基本學習

[程式範例]:我有參考此網頁的寫法，不過也出現錯誤https://sites.google.com/site/rlearningsite/manage/manage4在coursera學習R，之前有自己找文件看，第一週的考試最後3題不太會，都是篩選資料後計算的資料如下https://www.sendspace.com/file/vtlml8Ozone Solar.R Wind Temp Month Day1    41     190  7.4   67     5   12    36     118  8.0   72     5   23    12     149 12.6   74     5   34    18     313 11.5   62     5   45    NA      NA 14.3   56     5   56    28      NA 14.9   66     5   6第17題是要選 Ozne>31和 Temp>90的資料，再做計算我打程式碼如下：hw1.Q18<-hw1[Ozone>31, Temp>90]錯誤訊息如下：Error in `[.data.frame`(hw1, Ozone > 31, Temp > 90) :object 'Temp' not found要怎麼修改才能篩選出我要的資料呢？[關鍵字]:
篩選選擇性，也許未來有用--","R_Language"
"2369","M.1415790939.A.430","Wush978","情報","R社群資料分析上手課程教材與影片",2014-11-12 19:15:36,NA,NA,"[關鍵字]: R 教材

[出處]:http://taiwanrusergroup.github.io/DSC2014Tutorial/[重點摘要]:


今年Taiwan R User Group很高興能夠在資料科學愛好者年會上舉辦資料分析上手課程。

感謝主辦單位的規劃，把整個教學過程的錄影下來，讓我們社群能夠於事後建立一個線上

學習資源，讓當時沒機會參加的朋友們，可以在事後一起重新學習。 這裡我們將當時使

用的教材和錄影整理下來，讓想線上學習的朋友，可以在比較舒服的方式來上手R語言。

請使用者們依照下面的順序一步一步的來建立R 的學習環境，以有良好的學習體驗。 觀

看影片時，請初學者務必不要貪快，跟著投影片和影片，一步步的重現投影片中的R 的程

式碼。影片中有講師們講解程式碼的原理，投影片則方便大家可以直接複製貼上程式碼。

重現範例程式碼，以及理解運作的原理，就是學習一個程式語言最好的方法。



請有興趣的版友跟著文章中的說明，設定好學習環境之後跟著影片和投影片操作。

有問題很歡迎在版上發問。


--","R_Language"
"2370","M.1415721560.A.FFD","followaymis","問題","請問＋是什麼意思",2014-11-11 23:59:17,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:我想用rpart跑一個decision tree出來library(rpart)fit <- rpart(ROI ~ CustomerType + Age + RiskLevel + TrustType ,data = CRM1111, method=""class”)執行完這段之後,突然就從< 變成 ＋也沒有錯誤訊息,想請問這是什麼意思呢？我的資料有九萬筆,會是在跑資料分析嗎？謝謝各位回答[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--","R_Language"
"2371","M.1415640808.A.042","tokyo291","問題","使用animation 需要安裝ImageMagick",2014-11-11 01:33:24,NA,NA,"[問題類型]:

程式諮詢


[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

想把plot的動態圖形存成GIF檔,使用animation這個package

出現錯誤訊息,查了之後,執行這個結果需要安裝ImageMagick

在下列網址可以找到安裝檔http://www.imagemagick.org/script/binary-releases.php安裝完之後,成功一次轉出GIF檔

在一次執行時就轉不出來了...

[程式範例]:> saveGIF({+     for (i in 1:10) plot(runif(10), ylim = 0:1)
+ })
Executing:
""convert"" -loop 0 -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png
Rplot5.png
    Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png ""animation.gif""
'convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png
Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png
""animation.gif' 不是內部或外部命令、可執行的程式或批次檔。
參數無效 - 0
an error occurred in the conversion... see Notes in ?im.convert
[1] FALSE
警告訊息：
1: 執行中命令 'C:\WINDOWS\system32\cmd.exe /c ""convert"" -loop 0  -delay 100
Rplot1.png Rplot2.png Rplot3.png Rplot4.png Rplot5.png Rplot6.png Rplot7.png
Rplot8.png Rplot9.png Rplot10.png ""animation.gif""' 已有狀態 1
2: In cmd.fun(convert) :
  '""convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png Rplot4.png
Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png
""animation.gif""' execution failed with error code 1
3: 執行中命令 '""convert"" -loop 0  -delay 100 Rplot1.png Rplot2.png Rplot3.png
Rplot4.png Rplot5.png Rplot6.png Rplot7.png Rplot8.png Rplot9.png Rplot10.png
""animation.gif""' 已有狀態 4
4: In normalizePath(path.expand(path), winslash, mustWork) :
  path[1]=""animation.gif"": 系統找不到指定的檔案。
[關鍵字]:

animation/ImageMagick/saveGIF

--","R_Language"
"2372","M.1415536549.A.7C0","dan40418","問題","xpathSApply 問題",2014-11-09 20:35:47,NA,NA,"[軟體熟悉度]:
小弟大概使用R一個月，之前有些寫過其他程式


[問題敘述]:

想利用R來抓網頁進行一些圖表分析

想利用xpathSApply來抓網頁內容，但讀不到網頁內容

[程式範例]:
getdoc <- function(line){
  start <- regexpr('www', line)[1]
  end <- regexpr('html', line)[1]

  if(start != -1 & end != -1){
     url <- substr(line, start, end+3)
     html <- htmlParse(getURL(url), encoding='UTF-8', useInternalNodes = T)
     doc <- xpathSApply(html, ""//div[@id='main-content']"", xmlValue)
     name <- strsplit(url, '/')[[1]][4]
     write(doc, gsub('html', 'txt', name))
 }
}
sapply(data, getdoc)

有上網survey過也try過許多方法一直try不出來，因此想請問各位神人問題出在哪?

doc一直讀不出東西來

[關鍵字]:

xpathSApply

--","R_Language"
"2373","M.1415173339.A.145","ntme","問題","Rstudio讀取路徑為何？",2014-11-05 15:42:16,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的假設我要讀一個csv檔案

假設是放在桌面上(win 7)

路徑為：C:/User/user/Desktop/AAA.csv

在R中可以很順利讀取

但同樣語法在Rstudio中就出現紅字...

想請教Rstudio中要讀取檔案的路徑有特殊技巧嗎？

感恩

--","R_Language"
"2374","M.1414939348.A.EBB","nh2","問題","Re: if elso loop不能接著執行？",2014-11-02 22:42:24,NA,NA,"※ 引述《Edster (Edster)》之銘言：: best <- function(x, y){:   z <- c(""heart attack"", ""heart failure"", ""pneumonia""):   outcome <- read.csv(file=""outcome-of-care-measures.csv"", header=T, as.is=T):   SS <- as.numeric(outcome[,11]):   if (! (x %in% outcome$State) | ! (y %in% z)){:     stop(""Error in best(state, outcome) : invalid state""):   }:   if (y == ""heart attack""){:    select = outcome$State == x & !is.na(SS);  o = order(SS):     result <- outcome[o[select],c(1,2)]:     print(paste(""best ("", result, "") heart attack"")):   }: }請問從倒數第三行(select = outcome$State....)之後，
為何我用
o <- order(SS[select])
outcome.order <- outcome[o, ]
結果outcome.order還是有NA值存在？


--","R_Language"
"2375","M.1414695639.A.DC1","TrueBear","問題","請推薦R語言入門的中文書",2014-10-31 03:00:35,NA,NA,"各位大大好

小弟很想跟大家一樣能善用R語言

置底文雖然有看到很多網路的資源
但因為個人習慣的關係 比較喜歡實體的書
因此想請大家是否可以推薦中文的入門書
謝謝大家

PS:目前有看到這一本http://bit.ly/13m9Kus不知有沒有大大看過的

--","R_Language"
"2376","M.1414660379.A.DE8","ireullin","問題","Re: 統計向量次數",2014-10-30 17:12:56,NA,NA,"謝謝各位的指點
現在資料產生出來了
rc2 可是卻無法取出
在rstudio中的environment中看
確實有row.names這個欄位ㄚ
請問這是?


x <- c(1,3,4,5,4,3,1,5,8,1,3,4,8,8,8,8)
dt <- data.frame(sort(table(x),decreasing = TRUE))
colnames(dt) <- c(""cnt"")
rc1 = dt$cnt
rc2 = dt$row.names





--","R_Language"
"2377","M.1414660042.A.FCD","qazzzzz","問題","Excel字串的處理",2014-10-30 17:07:19,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手

[問題敘述]:

我的資料Excel檔裡面有兩個column，
第一個column他是id，第二的column是他的名字
因為他的名字都會有一些不必要的符號，
所以我想把一些符號改成空格
可是不太會用for loop...
請問要如何針對column 2 檢查每一個名字的每一個字母呢?
謝謝~

例如: 將""<"" 及 "">"" 變空格
┌───┬────┐
│  id1 │name<1> │ →name 1
├───┼────┤
│  id2 │n<2>tea │ →n 2 tea
├───┼────┤
│  id3 │juice<3>│ →juice 3
└───┴────┘

--","R_Language"
"2378","M.1414637300.A.915","milkdicky","問題","將資料框架的數值向量依區間分組",2014-10-30 10:48:14,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想將資料框架裡頭的數值向量依據區間產生新的向量變數

[程式範例]:http://www.r-web.com.tw/data/step1.php?method=recode想做的事情是這個，
只是不知道具體怎麼進行。
因為資料太多筆，必須升級為白金會員才能使用…


[關鍵字]:--觀自在菩薩。行深般若波羅蜜多時。照見五蘊皆空。度一切苦厄。舍利子。色不異空。空不異色。色即是空。空即是色。受想行識。亦復如是。舍利子。是諸法空相。不生不滅。不垢不淨。不增不減。是故空中無色。無受想行識。無眼耳鼻舌身意。無色聲香味觸法。無眼界乃至無意識界。無無明。亦無無明盡。乃至無老死。亦無老死盡。無苦集滅道。無智亦無得。已無所得故。菩提薩埵。依般若波羅蜜多故。心無罣礙。無罣礙故。無有恐怖。遠離顛倒夢想。究竟涅槃。三世諸佛。依般若波羅蜜多故。得阿耨多羅三藐三菩提。故--","R_Language"
"2379","M.1414580474.A.207","ireullin","問題","統計向量次數",2014-10-29 19:01:11,NA,NA,"請問一下各位
我有一個向量
a <- c(1,3,4,5,4,3,1,5,8,1,3,4,8,8,8,8)
我想統計媕Y出現的次數
然後依照次數進行排序
我該如何做
目前只做到統計次數而已
b <- as.data.frame( table(a) )

麻煩大家在給我一點意見了


--","R_Language"
"2380","M.1414556654.A.302","nh2","心得","Coursera course: R programming",2014-10-29 12:24:10,NA,NA,"小弟並不是程設相關科系學生，目前已社會人士
因為醫療工作有時用到統計，當然以前都spss結束
之前去參加中研院辦的open data r初級班覺得蠻有趣的
所以開始找r的相關課程
找到coursera正好有R program這門課就報名了
內容會有每週的vedio(英文發音 ，英文字幕)
vedio slide的pdf檔
每週作業，每週quitz
其實還蠻不容易的…這次的課大概很難拿到certificate了。

中間有一次的assignment還要用GitHub(不會用)

不過希望至少大部份的assignment都可以寫出來為目標！！

coursera也有discuss forum，不過感覺裡面都高手…

assignment的部份還是希望自已先試著寫，不會再把自已的code放上來
請大家批評指教！！

--","R_Language"
"2381","M.1414513281.A.E41","Edster","問題","Re: if elso loop不能接著執行？",2014-10-29 00:21:18,NA,NA,"best <- function(x, y){
  z <- c(""heart attack"", ""heart failure"", ""pneumonia"")
  outcome <- read.csv(file=""outcome-of-care-measures.csv"", header=T, as.is=T)
  SS <- as.numeric(outcome[,11])
  if (! (x %in% outcome$State) | ! (y %in% z)){
    stop(""Error in best(state, outcome) : invalid state"")
  }
  if (y == ""heart attack""){
   select = outcome$State == x & !is.na(SS);  o = order(SS)
    result <- outcome[o[select],c(1,2)]
    print(paste(""best ("", result, "") heart attack""))
  }
}

邏輯是這樣, 沒事不要改 vector 的長度. 雖然可能會比較耗記憶體.
但是它不需要重新指定, 說不定也不會比較慢.
而且這樣寫起來乾淨一點, 我不知道你在不在意速度,
我比較在意半個月後還看得懂這個程式碼. 所以希望寫簡潔一點.

1. 讀csv用as.is就不會有 character 變成 factor 的問題.
   所以改了 outcome[,11] 先變成 character 再轉成 numeric 的地方
2. 你的變數原先是寫 ""x"", 變數加了引號就變字串, 應該就直接寫變數 x
3. 我把你的 else if 刪了, 看起來沒有需要用到.
      只有前面一個條件不滿足才需要 else if.
      如果照你的 code: ! x %in% ...... 就沒了的話, 用 stop 更好.
   硬是要放, 在這版本第二個 if 前放上 else 就好.
4. 篩選的部分, 這些篩選過程的 matrix 或是 data.frame 之後都沒有用到了
   沒必要就不用創造他們. 用一維的 vector 就解決了.
5. 原先的 outcome_sel_order[[1,2]] 我猜你是要取某兩欄.
   就改成 [,c(1,2)] 這樣.

看看. 說不定還有錯.※ 引述《nh2 (nh)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]:: 其實這是coursera course的作業三，想要讀入資料後，先看州名和outcome: 名符不符合，不符合顯示error，符合則顯示outcome最好的醫院: [程式範例]:: best <- function(x, y){:   z <- c(""heart attack"", ""heart failure"", ""pneumonia""):   ##read oucome data:   outcome <- read.csv(file=""outcome-of-care-measures.csv"", header=T):   outcome[,11] <- as.numeric(as.character(outcome[,11])):   ## check if state and outcome are valid:   if (! (""x"" %in% outcome$State)){:     print(""Error in best(state, outcome) : invalid state""):   } else if (! (""y"" %in% z)){:     print(""Error in best(state, outcome) : invalid state""):   } else if (""y"" == ""heart attack""){:     ##return name with lowest 30 day death:     outcome_select <- subset(outcome, outcome$State == ""x""):     outcome_sel_clean <-outcome_select[!is.na(outcome_select[,11]),]   ##: remove NA:     M_order <- order(outcome_sel_clean[,11])  ##establish order:     outcome_sel_order <- outcome_sel_clean[M_order,]     ## order as new order:     result <- paste(outcome_sel_order[[1,2]], ""heart attack"", sep ="",""):     print(paste(""best ("", result, "")"")): }: 接下來的程式碼差不多，但是不管x輸入哪個值，就算州名正確，也是跑出error…: 因為從沒學過程式語言，只是自已想自修，沒想到這麼難…: 另一個是小弟的程式碼確實可以再精簡，不過就等更熟了…--","R_Language"
"2382","M.1414508533.A.B57","nh2","問題","if elso loop不能接著執行？",2014-10-28 23:02:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
其實這是coursera course的作業三，想要讀入資料後，先看州名和outcome
名符不符合，不符合顯示error，符合則顯示outcome最好的醫院

[程式範例]:
best <- function(x, y){
  z <- c(""heart attack"", ""heart failure"", ""pneumonia"")
  ##read oucome data
  outcome <- read.csv(file=""outcome-of-care-measures.csv"", header=T)
  outcome[,11] <- as.numeric(as.character(outcome[,11]))
  ## check if state and outcome are valid
  if (! (""x"" %in% outcome$State)){
    print(""Error in best(state, outcome) : invalid state"")
  } else if (! (""y"" %in% z)){
    print(""Error in best(state, outcome) : invalid state"")
  } else if (""y"" == ""heart attack""){
    ##return name with lowest 30 day death
    outcome_select <- subset(outcome, outcome$State == ""x"")
    outcome_sel_clean <-outcome_select[!is.na(outcome_select[,11]),]   ##
remove NA
    M_order <- order(outcome_sel_clean[,11])  ##establishorder
    outcome_sel_order <- outcome_sel_clean[M_order,]     ## order as new order
    result <- paste(outcome_sel_order[[1,2]], ""heart attack"", sep ="","")
    print(paste(""best ("", result, "")""))
}
接下來的程式碼差不多，但是不管x輸入哪個值，就算州名正確，也是跑出error…

因為從沒學過程式語言，只是自已想自修，沒想到這麼難…

另一個是小弟的程式碼確實可以再精簡，不過就等更熟了…

--","R_Language"
"2383","M.1414335543.A.089","Edster","問題",".RHistory可設定成紀錄 Error 或 Warning?",2014-10-26 22:59:00,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

as title, RStudio 產生的 .Rhistory
可否自行記錄訊息列中的 Error 或是 Warning?

因為常常一些小錯誤, 不是特地要用 sink 看 log 檔, 是不會寫 sink 的.
但人腦有限, 關掉 Rstudio 後就忘記剛剛做完那些 debug.
請問有什麼設定可以讓他自己產生紀錄呢?

--","R_Language"
"2384","M.1414243161.A.1CE","oldjojotenya","問題","||的用法",2014-10-25 21:19:19,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手，用coursera自己亂學

[問題敘述]:
以下是我寫的程式碼：

outcome <- ""heart attack""
if(outcome != ""heart failure"" || outcome !=  ""heart attack"" ||
outcome != ""pnuemonia""){
                stop(""invalid outcome"")
        }

結果跑出以下警告：
錯誤: invalid outcome

我有兩個問題想請教版上大大：

問題一、為何我賦值給outcome的內容明明是不符if內條件的，但最後還是執行了stop()?

問題二、查了一下||只能用於raw或logical或‘number-like’ vectors，所以我就不能
把程式寫成 if(outcome != ""heart failure"" || ""heart attack"" || ""pnuemonia)，
請問有沒有更簡潔的方式表達我的outcome不能等於""heart failure""、""heart attack""
或""pnuemonia""這三個character其中之一的方法？

謝謝^^




--","R_Language"
"2385","M.1414217993.A.BC0","Edster","問題","Re: 找出重複數據 平均後刪掉其餘重複列",2014-10-25 14:19:50,NA,NA,"## 可參考我寫的這支, 功能類似Excel的 AverageIfs,...
## Author: Edster.Shih

library(compiler)
## statifs
StatIfs <- function(data, concol = grep(""SiteID"", colnames(data)), Con =
NULL, U = NULL, stat=1:9, LL=0, cri = 0, relativeN=TRUE){
  data = data.matrix(data)
  if(length(Con) == 0) Con <- data[,concol]
  if(length(U) == 0)     U <- unique(Con)

  TT =list(); M = data.frame(matrix(NA, nrow=length(U), ncol=dim(data)[2],
dimnames=list(U, colnames(data))))
  for(n in 1:9) TT[[n]] <- M; names(TT) = c(""N"",""Min"", ""Q1"", ""Median"", ""Q3"",
""Max"", ""Mean"", ""Sd"", ""Sum"")
  for(i in 1:length(U)){
    for(j in 1:dim(data)[2]){
      s = data[Con==U[i],j]; if(relativeN) N=length(s[s>=LL])/length(s) else
N=length(s[s>=LL])
      if(length(s[!is.na(s)])==0 | N < cri){S = rep(NA, 6)}else{q =
quantile(s, c(0,0.25,0.5,0.75,1),na.rm=T)
        S = c(N, q[1], q[2], q[3], q[4], q[5], mean(s,na.rm=T), sd(s,
na.rm=T), sum(s, na.rm=T))}
      for(n in 1:9) TT[[n]][i,j] = S[n]
    }
  }
  return(TT)
}
StatIfs <- cmpfun(StatIfs)


--","R_Language"
"2386","M.1414212237.A.200","mymiss312","問題","如何將不同檔的參數比例放入同一檔中?",2014-10-25 12:43:54,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有四個不同產品的參數檔和一個產品的成功率

想將先在各自的參數檔先依照產品來統計算出參數的比例

再依照 ax+by+cz+....=成功率 來推出係數值

目前只做到找出參數的比例 不知道要如何將各自的參數放入同一個檔案來進去推估

[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[關鍵字]:選擇性，也許未來有用--","R_Language"
"2387","M.1414062650.A.30C","yaowei2010","問題","input data (非mxn)",2014-10-23 19:10:48,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
input一個一開始行數不均的csv的data

[程式範例]:

我知道這問題有點蠢

但因為這個data它有1.5 GB

Excel打開到一半就掛了 還失去後面的一部分資訊

想說用R開並整理資料

沒料到這筆資料是長這樣的(在Excel看到前半部分資料)

例如：

xxx
xxx
xxx xxx    ←這些xxx我都不要
xxx xxx
xxx xxx

Name ID A B C D  ←從這行開始以下才是我要的資料
a     b c d e f
g     h i j k l
      .
      .
      .


可是因為不是mxn 標準dataframe的格式 (假設我要的資料是m x n)

R loading進去之後就整個亂掉了 變成 k x 2

也就是我資料全部變成2個column全亂掉...

但我沒辦法開啟excel把不要的部分刪掉

請問這該怎麼辦QAQ

有什麼好建議 或挽救的整理方式


--","R_Language"
"2388","M.1413805538.A.F6B","swedrf0112","問題","rmr2 map functon",2014-10-20 19:45:36,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:

   想使用rmr2的mapreduce function
   把兩個column的值加起來，並且將key值放入指定的向量

   目前情形如以下 :

   Sys.setenv(...)
   library(rhdfs)
   hdfs.init()
   library(rmr2)

   qq=cbind(round(rnorm(10,0,1),3),round(rnorm(10,0,1),3))#generatedata

   mapfunction=function(.,data)
   {
     return( keyval( rep(1:5,each=2) , apply(data,1,sum) ) )
   }

   from.dfs( mapreduce( input=to.dfs(qq) , map=mapfunction ) )

   結果會如:http://ppt.cc/zgk5(希望的結果)

   但若將資料轉成csv file 再put上hdfs之後

   資料形式:http://ppt.cc/HF5mfrom.dfs( mapreduce( input=""/qq.csv"" ,
             input.format=make.inpt.format(""csv"",sep="","") , map=mapfunction ))

   結果會變成:http://ppt.cc/vr4i也試過將mapfunction改成以下形式 :


   mapfunction=function(.,data)
   {
     kk=rep(1:5,each=2)
     vv=apply(data,1,sum)
     return( keyval( kk , vv ) )
   }

   但都沒辦法像直接to.dfs一樣得到想要的結果，
   是因為讀raw file與to.dfs讀取的方式不太一樣嗎?

   先謝謝各位指教!!


[關鍵字]:rmr2,mapreduce

--","R_Language"
"2389","M.1413780041.A.FE3","koai","問題","Re: R程式 文字處理(同義字轉換)",2014-10-20 12:40:38,NA,NA,"不知道這是不是你要做的事?
有興趣的話, 可以試試看!

x <- c(""still call happening"",""still call issue"",""occurence"",
 ""since first downloaded ios 8 now"",
 ""since first downloaded ios 802 now"",
 ""since first downloaded ios 8.0.2 now"")
txt1 <- c(""happen"",""happening"",""issue"",""occurence"")
txt2 <- c(""ios8"",""ios 8"",""ios 802"",""ios 8.0.2"")
for (k in 2:length(txt1)) {  x[grep(txt1[k],x)] <- txt1[1]  }
for (k in 2:length(txt2)) {  x[grep(txt2[k],x)] <- txt2[1]  }
x※ 引述《sinkome (濤哥)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前我有一份文字檔在Corpus中: > inspect(new_data): <<VCorpus (documents: 1, metadata (corpus/indexed): 0/0)>>: [[1]]: <<PlainTextDocument (metadata: 7)>>: still call happening: since first downloaded ios 8 now: (上面文件內容是經過stripWhitespace、removePunctuation等步驟而已): 然後我想自己定義一個: 出現(happening,issue,occurence)歸類為 happen: 出現(ios 8,ios 802, ios 8.0.2)歸類為 ios8: 因此當: happening 會轉換成 happen: ios 8 (中間含有空白) 會轉換成 ios8: 我試過wordnet package Synonyms，: 但是我只會查詢同義字，不會抓出來轉換，: 而且我比較傾向自己定義同義字。: 想很久都不知道該如何寫?--","R_Language"
"2390","M.1413692365.A.31D","sinkome","問題","R程式 文字處理(同義字轉換)",2014-10-19 12:19:23,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前我有一份文字檔在Corpus中> inspect(new_data)<<VCorpus (documents: 1, metadata (corpus/indexed): 0/0)>>

[[1]]
<<PlainTextDocument (metadata: 7)>>
still call happening
since first downloaded ios 8 now
(上面文件內容是經過stripWhitespace、removePunctuation等步驟而已)

然後我想自己定義一個
出現(happening,issue,occurence)歸類為 happen
出現(ios 8,ios 802, ios 8.0.2)歸類為 ios8


因此當
happening 會轉換成 happen
ios 8 (中間含有空白) 會轉換成 ios8

我試過wordnet package Synonyms，
但是我只會查詢同義字，不會抓出來轉換，
而且我比較傾向自己定義同義字。
想很久都不知道該如何寫?

--","R_Language"
"2391","M.1413530301.A.5A7","jyjzero","問題","執行BreslowDayTest發生問題",2014-10-17 15:18:18,NA,NA,"- 問題: 當我在在執行BreslowDayTest,並放入一個table 資料時出現"" 錯誤在BreslowDayTest(table(factor(ITT_AOF[c(ITT_index_visit2_BNGA,  :置換的長度為零"" , table(factor(ITT_AOF[c(ITT_index_visit2_BNGA,是我所要執行的資料 table.但不知道為何這筆資料table發生這個錯誤 ,但其他的資料皆可以執行.入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:看BreslowDayTest得到的 p-value[程式範例]:這是我要執行的 table資料, ,  = middle1  0BNGA  2  9A     2  8, ,  = northern1  0BNGA  1 12A     0 14, ,  = southern1  0BNGA  0  7A     0  7利用這個table來做 BreslowDayTest請知道的大大幫忙 謝謝--","R_Language"
"2392","M.1413474750.A.C70","ntme","問題","如何使用uniqle刪除重複n次的資料",2014-10-16 23:52:26,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:
想刪除重複出現n次的資料
看到R 有unique 指令可以用
看了help裡面有nmax參數
nmax     the maximum number of unique items expected (greater than one).
請問把nmax設成3,就是把重複三次的資料刪除嗎（只留下一個）
因為試了一下發現沒用
所以上來請教

[程式範例]:
k=c(1,1,1,3,3,3,4,4,2,2)
unique(k,nmax=3)

得到
[1] 1 3 4 2


希望只得到 1 3 這結果


[關鍵字]:選擇性，也許未來有用--","R_Language"
"2393","M.1413428983.A.FB7","pornstar","問題","R語言是否可以動態配置矩陣?",2014-10-16 11:09:41,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

如果我在跑一個for迴圈 然後要滿足某些條件(for迴圈內的if)才會把元素放進矩陣內

也是說我可能只知道這個矩陣的列數  但是每一列的行數都是未知的

我在迴圈內的矩陣沒有給行數一個參數

只有放: 矩陣[i,]  (i是隨迴圈變動的列數 行數未知)

似乎會發生錯誤


--","R_Language"
"2394","M.1413381921.A.292","angiolini","問題","合併兩個直方圖",2014-10-15 22:05:18,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
合併兩個直方圖後，將X分組分細一點


[程式範例]:filename 內容有ID, var1, var2, ...var1及var2 均是連續變項(範圍: -3.5~2)，共180筆左右我想畫var1及var2的直方圖，並將兩個直方圖和在一起，重疊處會有不同顏色在網路上找了範例照著做，程式寫法如下:df<- read.table(""F:/filename.csv"", header=TRUE, sep="","")# Overlaid histogramsp1 <-hist (var1, breaks=18)p2 <-hist (var2, breaks=18)plot( p1, col=rgb(0,0,1,1/4))  # first histogramplot( p2, col=rgb(1,0,0,1/4), add=T)  # second想問的問題是:X軸的分組想分細一點，所以用breaks=18 指令，但都沒有作用畫出來的圖一直是預設的組數 (11組)請問該如何解決?感謝大家--","R_Language"
"2395","M.1413370150.A.E6F","zephyr1983","問題","重新編碼的問題",2014-10-15 18:48:41,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:新手(沒寫過程式，R 是我的第一次)[問題敘述]:重新編碼替換變數值：如果 Var1=A，則 Var2 原本的B 就改成CA, B, C 皆為中文字[程式範例]:transform(data1, Var2 = ifelse(Var1=='A', 'C', Var2))table(Var2)[關鍵字]:recode, 重新編碼, 變數整理--","R_Language"
"2396","M.1413306183.A.EA6","john5601","問題","R commander plugin",2014-10-15 01:02:54,NA,NA,"[軟體熟悉度]:新手

[問題敘述]:

我在使用R commander 的 survival plugin

我是看http://www.jstatsoft.org/v49/i07/paper做到第10頁的figure 6 ,照理會輸出第11頁的圖,但是出現以下情況http://imgur.com/j74meHf說找不到 .Survfit 就畫不出圖了上網找了很久 還是不知道該如何解決 重裝套件還是一樣


不知道有沒有大大知道這種物件不見該如何處理? 照paper上第9頁下面有說應該是在

套件中就有 但執行又說找不到物件 ==

--
必取只會莊肖維 背後捅人三四刀
做表面最會假掰 這種必取離遠點

--","R_Language"
"2397","M.1413182342.A.DBA","Wush978","心得","在Ubuntu 14.04上用Intel Compiler編譯R",2014-10-13 14:38:59,NA,NA,"[關鍵字]: R, Installation, MKL

[重點摘要]:

在Ubuntu 14.04上利用Intel Compiler編譯R, 並設定後讓在Rstudio中使用。

1. 安裝Intel Compiler, MKL, ... 到 /opt/intel

2. 下載R Source並解壓縮到某個資料夾，以下代稱<R HOME>

3. 在bash下執行以下指令：

```sh
# install tiff and cairo, or plot in rstudio will crash
sudo apt-get install libcairo2-dev libtiff5-dev
source /opt/intel/composerxe/bin/compilervars.sh intel6
export CC=""icc""
export CXX=""icpc""
export AR=""xiar""
export LD=""xild""
export CFLAGS=""-O3 -ipo -openmp -xHost""
export CXXFLAGS=""-O3 -ipo -openmp -xHost""
MKL=""-lmkl_gf_lp64 -lmkl_intel_thread  -lmkl_core -liomp5 -lpthread""
echo $MKL
export MAIN_LDFLAGS='-openmp'
./configure --with-blas=""$MKL"" --with-lapack --enable-R-shlib --enable-BLAS-shlib --enable-memory-profiling
make
```

4. 在`~/.bashrc`中加入：

source /opt/intel/composerxe/bin/compilervars.sh intel6
PATH=<R HOME>/bin:$PATH

5. 重新開啟在bash中執行rstudio即可打開編譯後的R。

6. 可能會有其他的side effect... 後續再補上。也歡迎補充更好的設定方法

實測一段原本要跑14秒的sapply函數，變成11秒。


參考資料：

-http://0rz.tw/H7I0Jhttps://software.intel.com/en-us/articles/build-r-301-with-intel-c-compiler-and-intel-mkl-on-linux

-http://stackoverflow.com/questions/25669214/compiling-r-3-1-1-using-intel-mkl-enable-r-shlib-triggers-undefined-reference

-


--","R_Language"
"2398","M.1413140188.A.CED","andrew43","問題","Re: 讀取資料read.table",2014-10-13 02:56:22,NA,NA,"原文中談到怎麼讓助教直接跑 .R 但裡面又要 read.table()。
在引入的檔案尚單純的情況下，我推薦把資料直接以 string 寫在 .R 裡頭，
再用 textConnection() 包起來，再餵給 read.table/csv/delim 等等。
請見下例：

txt <- ""
a       b       c
1       2       3
2.1     4       2
4       4       1
3       1       0
""

dat <- read.table(textConnection(txt), sep=""\t"", header=T)
summary(lm(a ~ b + c, data=dat))

請注意，上面的 txt 裡頭是用 tab 字符分隔，
但是 PTT 系統會把 tab 轉成 space。

如果資料字串量非常非常大，R 在第一個步驟會很花時間，應避免之。

--","R_Language"
"2399","M.1413121144.A.414","Wush978","問題","Re: 讀取資料read.table",2014-10-12 21:39:01,NA,NA,": → Wush978: 你檢查一下 gewtd() 是不是在放dataSet.txt的目錄         10/12 14:32: 您說的是getwd() 嗎？: 我輸入之後真的不在這裡面耶...: 那我該怎麼辦呢？: 我一直以為.R檔跟資料檔放在一起就可以直接讀到像MATLAB一樣","R_Language"
"2400","M.1413094912.A.183","warex14","問題","讀取資料read.table",2014-10-12 14:21:50,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

目前利用read.table來讀取記事本檔裡的資料
一開始我寫
Econ.data<-read.table(""D:\\...(路徑)...\\dataSet.txt"", header=TRUE)
可以成功讀取到我要的資料沒有問題

後來因為要上傳交作業
為了確保在助教的電腦也能執行
所以把資料檔案跟程式檔案放在同一個資料夾下
然後把那行程式碼改成：
Econ.data<-read.table(""dataSet.txt"", header=TRUE)

這時候就出現錯誤，如下：
錯誤在file(file, ""rt"") : 無法開啟連結
此外: 警告訊息：
In file(file, ""rt"") :
  無法開啟檔案 'dataSet.txt' ：No such file or directory

想說怎麼會那麼奇怪，上網Google的範例也差不多長這樣啊？
是我少了什麼還是多了什麼？

[程式範例]:

[關鍵字]:

read.table  讀取資料 路徑

--","R_Language"
"2401","M.1413020993.A.64E","suiming","問題","輸入錯誤格式",2014-10-11 17:49:50,NA,NA,"a <- function(n)
{
        tryCatch(function1(n),
                error = function(e)
                {
                        return(NaN)
                }
                )
}

function1 <- function(n)
{
        n^2
}> a(s)[1] NaN> a(1 1)錯誤: 未預期的 數值常數 in ""a(1 1""> a(1_1)錯誤: 未預期的 輸入 in ""a(1_""

請問如何讓a(1 1)或a(1_1)能回傳NaN?

--","R_Language"
"2402","M.1413010999.A.F32","liarboo","問題","一個基本用法的問題",2014-10-11 15:03:16,NA,NA,"感謝大家看這個問題
[問題類型]:
我的問題是剛學習R但是我遇到一個用法不了解

A %*% B

這裡面%*%是什麼意思呢?

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
學習

--","R_Language"
"2403","M.1412995752.A.913","clansoda","問題","xlsx packages",2014-10-11 10:49:09,NA,NA,"不好意思，我又來了，這次的問題是coursera要我讀一個xlsx的檔案

所以我要裝xlsx的包，前幾天我在筆電上面用沒問題，但是換到桌機

他跟我說      Loading required package: rJava
              Error : .onLoad failed in loadNamespace() for 'rJava', details:
              call: fun(libname, pkgname)
              error: JAVA_HOME cannot be determined from the Registry
              Error: package ‘rJava’ could not be loaded

我google了一下發現也有人有相同問題，他說是沒灌java，所以我又跑去灌java

可是灌了以後也是顯示相同的字句，不知道有沒有人有相同問題或有解法

--","R_Language"
"2404","M.1412751365.A.9B0","Zakaria","問題","如何計算median和trimmed mean",2014-10-08 14:56:02,NA,NA,"[問題]： 如何不使用內建程式計算出median和trimmed mean


[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
最近剛開始學習R，想要練習看看可不可以自己建立function來計算
一些簡單的數值，例如mean等等。

my.mean = function(x){
  sum(x)/length(x)
}

這是我剛剛寫出來的可以計算mean的function。但我想要如法炮製寫出可以計算median
和trimmed mean的function就卡關了。




--","R_Language"
"2405","M.1412705217.A.DE9","tokyo291","問題","gsub取代數字的小問題",2014-10-08 02:06:55,NA,NA,"[問題類型]:
用gusb變換數字為character的時候，沒辦法成功


[軟體熟悉度]:

使用者(已經有用R 做過不少作品)


[問題敘述]:
用gusb變換數為character的時候，當數字為10位數或以上會碰到問題

例如 現在有  1  2  3  14  15 ,想變成 B1 B2 B3 B14 B15

卻都會變成 B1 B2 B3 B1B4 B1B5

[程式範例]:> test<-sample(16,16,replace=T)> lab<-paste(""B"", 1:16, sep = """")> for ( i in 1:16){+         t<-as.character(i)
+         test<-gsub(t,lab[i],test)
+ }> test[1] ""B5""   ""B9""   ""B6""   ""B5""   ""B3""   ""B2""   ""B1B6"" ""B5""   ""B1B4"" ""B1B4""
""B4""   ""B4""   ""B1B6"" ""B3""   ""B2""
[16] ""B1B3""
>

我知道用paste也可以做出想要的結果,只是想知道以上該如何修改才能有同結果


[關鍵字]:

gsub  / 10位數

--","R_Language"
"2406","M.1412683922.A.3DA","Wush978","問題","Re: error 訊息通知",2014-10-07 20:12:00,NA,NA,"※ 引述《qazzzzz (小毛怪)》之銘言：: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我目前在使用一個套件，並使用for迴圈讓這個套件能夠分析很多個檔案，: 但是我發現有一些檔案用這個套件會有問題，會出現Error，: 所以我在想是否有一種function可以在出現Error時給我通知，: 讓我可以對無法分析的檔案做一些紀錄。: [程式範例]:: 簡單舉個例:: > plotRegulatoryGraph(pw_1_graph): Error in plotRegulatoryGraph(pw_1_graph) :.......:: 就是要怎麼處理 Error message: 謝謝~用 try

```
r <- try(plotRegulatoryGraph(pw_1_graph), silent = TRUE)
if (class(r) == ""try-error"") {
  # error occurs
  message <- conditionMessage(attr(r, ""condition""))
} else {
  # no error, `r` will be the expected result
  # do something with r ...
}
```


--","R_Language"
"2407","M.1412664030.A.CA7","qazzzzz","問題","error 訊息通知",2014-10-07 14:40:27,NA,NA,"[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

我目前在使用一個套件，並使用for迴圈讓這個套件能夠分析很多個檔案，
但是我發現有一些檔案用這個套件會有問題，會出現Error，
所以我在想是否有一種function可以在出現Error時給我通知，
讓我可以對無法分析的檔案做一些紀錄。

[程式範例]:

簡單舉個例> plotRegulatoryGraph(pw_1_graph)Error in plotRegulatoryGraph(pw_1_graph) :.......就是要怎麼處理 Error message

謝謝~

--","R_Language"
"2408","M.1412607822.A.4C5","b10009047","問題","輸出檔案的編碼問題",2014-10-06 23:03:39,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:大家好，目前遇到的問題是我從R軟體透過write系列的函數輸出txt檔，然後我希望能在網頁上印出該txt檔的內容但是由於php被設定成utf-8的編碼方式了查了網頁上的資料發現PHP那端好像無法改變讀入檔案時選擇的編碼方式故希望是否能從R輸出時下手，想請教有沒有辦法讓R輸出以utf-8編碼的txt or csv 檔呢[程式範例]:data=read.csv(filename,""路徑"")data.sum=summary(data)out=capture.output(cat(""最小值 : "",data.sum[1]))                                          ))write.table(out,""c:/xampp/htdocs/print/basic/summary.txt"")讀入檔案後輸出一個txt檔案，裡面顯示 ""最小值 : XX ""從記事本開啟發現編碼方式都是ANCI，試問有辦法將它改成utf-8嗎試過iconv但是還是無法解決，也試過encoding，可是在輸出檔案時就會出錯了先謝謝各位了T_T[關鍵字]:--","R_Language"
"2409","M.1412426516.A.4C1","ntme","問題","如何顯示重複的次數",2014-10-04 20:41:52,NA,NA,"[問題敘述]:

假設Y<-c(1,1,2,2,3)

如何顯示1的重複次數（兩次）？

或是有函數可以選擇重複兩次以上的元素？

用google serch ""r 重複次數""沒找到相關文章

故請教版上神手


感恩






--","R_Language"
"2410","M.1412222478.A.33E","natto810822","問題","開啟太多檔案而停止",2014-10-02 12:01:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:我在用R想training一些圖片的feature資料庫
不過當程式開啟500張左右的gif後
就會顯示""too many open files ""
然後下一個檔案就開啟不了
直接結束迴圈
我有試過加上 closeAllConnections()
在迴圈後頭
不過還是一樣耶
想問各位高手，我哪裡出了問題[程式範例]:http://pastebin.com/1BZzaves[關鍵字]:too many open files

--","R_Language"
"2411","M.1412093309.A.714","wangru","問題","改變資料內容",2014-10-01 00:08:27,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一組資料是關於性別，男生代號M，女生代號F
現在想把男生改成1，女生改成0
我有試過直接創造一個新的variable
但想說是否有其他方式可以直接改，變數名稱不變
例如：(F,F,M,F,M)→(0,0,1,0,1)

[程式範例]:
有嘗試過這樣打：
SEX[SEX1='M']<-1
SEX[SEX1='F']<-0
但會出現錯誤訊息

以上是我的問題
謝謝大家:)

--","R_Language"
"2412","M.1412058961.A.FE7","yaowei2010","問題","找出重複數據 平均後刪掉其餘重複列",2014-09-30 14:35:58,NA,NA,"[軟體熟悉度]:
新手

[問題敘述]:
如題目 由於同一欄內有重複的項目 抓出來後平均做為代表數值 其餘的刪掉
(同一項目名稱只能出現一次)


[程式範例]:

(原來)                (處理後)

Name data1 data2      Name data1 data2
A      1     1         A     2     2
A      2     2         B     1     1
A      3     3         C     2     2
B      1     1    →   D     4.5   3.5
C      2     2         E     3     3
D      4     4
D      5     3
E      1     1
E      3     3
E      5     5

我知道怎麼在裡面配對 但刪掉這部分怕會影響for loop處理i的問題
不知道該怎麼寫比較好


--","R_Language"
"2413","M.1411840813.A.DDA","andrew43","問題","Re: 簡單的新手小問題",2014-09-28 02:00:10,NA,NA,"根據你的推文，你的迴歸式是

y = x ^ b + error

那直接這樣做就好了：

mod <- nls(y ~ x ^ b1, data = dat, start = list(b1 = 2))
summary(mod)

其中 dat 是一個 data frame；
x 和 y 是 dat 裡的二個變數；
b1 是待估計的參數，不用事先定義，直接寫進 nls() 裡就可以。※ 引述《pornstar (迪克)》之銘言：: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好~~: 我想在資料中加入一個擬合曲線看看它們之間的關係: 我的資料只是簡單的兩列數據  資料型態是data frame: 我用nls這個函式來做擬合: [程式範例]:: 我讀入的資料名稱是Fit 型態是data frame: 錯誤的是: Curve<-nls(Fit[2]~I(Fit[1]^power),data=Fit[]): 跑出以下的錯誤訊息 :: Error in model.frame.default(formula = ~Fit + power, data = Fit) :: invalid type (list) for variable 'Fit': In addition: Warning messages:: 1: In min(x) : no non-missing arguments to min; returning Inf: 2: In max(x) : no non-missing arguments to max; returning -Inf: 是因為F[1],F[2]沒辦法取出來做運算嗎??: 我預期之後再用summary(Curve)就可以看到擬合曲線的公式: 新手發問~ 先感謝各位大大的回答~!!--","R_Language"
"2414","M.1411766895.A.18C","pornstar","問題","Re: 簡單的新手小問題",2014-09-27 05:28:12,NA,NA,"後來我參考了這個網頁中的nls做法http://blog.sina.com.cn/s/blog_8eee7fb60101g25j.html先簡單練習了一下

Fit<-as.list(Fitting)  //Fitting是我讀進的兩行數據 一開始是data fram再變成list
x<-Fit[1]              //把數據第一行第二行放進x,y中 有確認過x,y的確有放進資料
y<-Fit[2]
f=function(x){x+1};    //隨便寫的function 只是想做測試

Curve2<-nls(Fit$y~f(Fit$x),data=Fit)


但是仍然會出現錯誤> Curve2<-nls(Fit$y~f(Fit$x),data=Fit)Error in terms.formula(formula, data = data) :
  invalid model formula in ExtractVarsIn addition: Warning messages:
1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf

實在不是很確定nls該怎麼用~~

--","R_Language"
"2415","M.1411715824.A.B8C","andrew43","問題","Re: scheffe法",2014-09-26 15:17:01,NA,NA,"※ 引述《clansoda (小笨)》之銘言：: 我用了國外的資料來當作練習，想了解人種對於教育程度是否有顯著影響: 接著我用卡方分配來做檢驗，結論是有影響: 接著我想看看哪個對哪個有影響，我突然想到我過去用SPSS有用過scheffe法: 因此我就google scheffe並載下了agricolae這個packages: 但是我直接用scheffe.test(object)這樣會跑不出來後面會叫我加一個TRT: TRT的解釋是Constant( only y=model) or vector treatment applied to each: experimental units 這段雖然我每個字都看得懂可是合起來我就是不知道他要我打什麼: 進去，我印象中SPSS也沒有這個設定，我只知道要打一個常數，所以我就打1進去: 可是還是沒有用，不知道有沒有曾經做過scheffe法的板友能告訴我怎麼做?scheffe.test(y, trt, ...) 裡的 trt 是填入
你想要進行事後比較的組別存在於哪個變項。

y <- rnorm(20)
x <- gl(4,5)
dat <- data.frame(x, y)
mod <- aov(y ~ x, data = dat)
(scheffe.test(mod, trt = ""x""))
最後的 ""x"" 事實上就是指 mod 裡的 y ~ x 裡的那個 x。

但這和卡方分配有什麼關係嗎？
覺得你可能搞錯方法了。

--","R_Language"
"2416","M.1411714346.A.3EB","clansoda","問題","scheffe法",2014-09-26 14:52:22,NA,NA,"我用了國外的資料來當作練習，想了解人種對於教育程度是否有顯著影響

接著我用卡方分配來做檢驗，結論是有影響

接著我想看看哪個對哪個有影響，我突然想到我過去用SPSS有用過scheffe法

因此我就google scheffe並載下了agricolae這個packages

但是我直接用scheffe.test(object)這樣會跑不出來後面會叫我加一個TRT

TRT的解釋是Constant( only y=model) or vector treatment applied to each

experimental units 這段雖然我每個字都看得懂可是合起來我就是不知道他要我打什麼

進去，我印象中SPSS也沒有這個設定，我只知道要打一個常數，所以我就打1進去

可是還是沒有用，不知道有沒有曾經做過scheffe法的板友能告訴我怎麼做?

--","R_Language"
"2417","M.1411634747.A.6A9","skylikewater","問題","<<- 全域變數賦值",2014-09-25 16:45:42,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:簡單說我的問題是在子函式中對變數宣告跟賦值時使用 <<- 符號，產生不穩定的結果。想知道是否誤解 <<- 的用法、或是有更好的處理方法。我的程式是受試者資料 coding，
每個人在自己的 csv 表格檔案裡裡大概有數百個變數如下：

姓名    性別    年齡    教育
王大明  男      18      12
身高體重
身高    體重    BMI     體脂    腰圍
180     70      NA      12      30
...

我把檔案
read.csv
Name = array(0,dim = c(TotalNum,1))
Name[SubjNum] = as.character(Data$V1[2])
然後再做些常模之類的查照計算。

最近檔案實在太大，
我試著模組化每個分量表到不同的 .r 裡，就出現了賦值上的問題

如前輩們所知，一個函式只能 return 一個值，
我看不太懂 assign 的功能、感覺不和我的需求，
最近嘗試做了 setClass 但語法會變得太龐雜。
於是我試著全局賦值 <<-



變成在 Data.r 中

source('LoadBody.r')
# Declaration
LoadBody(1, 1)
# Input
for (SubjNum in 1:TotalNum) {
  read.csv
  LoadBody(2, SubjNum)
}
# Data frame
eval(parse(text = paste(""AllData = data.frame("",
  LoadBody(3, NowCodingNum),(...)"")"", sep = """")))



然後有個子函式 LoadBody.r 如下

LoadBody <- function(Task, SubjNum) {
  if (Task == 1) {
    Name<<-array(0,dim = c(TotalNum,1))
    ...
  } else if (Task == 2) {
    Name[SubjNum]<<-as.character(Data$V1[2])
    ...
  } else if (Task == 3) {
    return(""Name = Name,(...)"")
  }
}



但到最後出來的表格卻有很多異常，
例如明明有資料的位置卻是錯誤的行列（這已經再三確認過了）或是空白，
那些錯誤的點，在執行個別的子函式（e.g. LoadBody.r）時並不會發生。

試著查資料很難查到關鍵字，
只有在這篇 COS <U+8BBA><U+575B> 的討論中有實例：http://cos.name/cn/topic/106368提到 <<- 是逐層向外搜索的，建議大家盡量避免。

在我的情況下則是有時正確，有時不正確。

我想請前輩建議適合的替代方案，或是我對 <<- 的賦值有什麼根本性的誤解呢？

感謝！


[程式範例]:大致如上，具體的資料畢竟是受試隱私，也有點大[關鍵字]:函數 全域賦值 <<---","R_Language"
"2418","M.1411575754.A.E76","pornstar","問題","簡單的新手小問題",2014-09-25 00:22:31,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

各位大大好~~

我想在資料中加入一個擬合曲線看看它們之間的關係

我的資料只是簡單的兩列數據  資料型態是data frame

我用nls這個函式來做擬合


[程式範例]:

我讀入的資料名稱是Fit 型態是data frame

錯誤的是: Curve<-nls(Fit[2]~I(Fit[1]^power),data=Fit[])


跑出以下的錯誤訊息 :

Error in model.frame.default(formula = ~Fit + power, data = Fit) :

invalid type (list) for variable 'Fit'

In addition: Warning messages:

1: In min(x) : no non-missing arguments to min; returning Inf
2: In max(x) : no non-missing arguments to max; returning -Inf


是因為F[1],F[2]沒辦法取出來做運算嗎??



我預期之後再用summary(Curve)就可以看到擬合曲線的公式

新手發問~ 先感謝各位大大的回答~!!


--","R_Language"
"2419","M.1411563236.A.AC4","tpps86102","問題","迴圈內替代特定物件",2014-09-24 20:53:53,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
效能諮詢(我想讓R 跑更快)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

大家好，我正在用R做模擬

在fit1~fit5這五個物件裡面都存有跑完SEM的結果

之後會對這五個物件存出特定想要的資訊

希望用for loop 簡化程序，不需要同樣的code只修改fit1~fit5的部分

目前的CODE如下面連結，主要問題在for(n in 1 : 5) 那一部分

我原本用paste寫，但明顯的並無法成功

另外，model的部分太過冗長沒附上，因此程式本身無法跑

如果需要我可以在附上

謝謝大家!!


[程式範例]:http://ideone.com/D3dX0Y--","R_Language"
"2420","M.1411556406.A.038","seaayumi","問題","Rstudio存檔",2014-09-24 19:00:03,NA,NA,"[問題類型]: 程式諮詢

[軟體熟悉度]: 新手

[問題敘述]:

這學期開始學著用R軟體跑統計分析
使用的是Rstudio
老師要求存成 R script檔 (with .R extension)
想請問"" .R extension"" 是什麼?
麻煩各位先進解惑了~
感激不盡!!

--","R_Language"
"2421","M.1411545144.A.FC1","clansoda","問題","讀入資料",2014-09-24 15:52:18,NA,NA,"我是一個初入R的使用者，過去也從未碰過語言相關的

所以問的這個問題應該算有點智障，可是我爬過文也看過YT上面的R演習室

但我始終沒辦法所以才來請教

我目前的狀況是假如我有一個CSV檔案叫做work.csv

放在D巢，我想用read.csv的語法去讀他但是一直沒辦法成功

我也看不太懂系統告訴我的錯誤到底是甚麼

我的寫法是read.csv(""D:/work.csv"",header=T) 關於斜線是正還是反我不太確定

但是兩種我都寫過，他都不讓我讀想請問各位是怎麼回事，底下附上我R studio的截圖http://ppt.cc/6Mo8對了 我也用了R演習室上面教的setwd 然後再打入work.csv這樣的用法也不行

--","R_Language"
"2422","M.1411538660.A.C46","andrew43","問題","Re: lm()與資料輸出",2014-09-24 14:04:16,NA,NA,"你在推文中的補充說明還是不清不楚。
不過我猜你要的只是 eval 硬幹。

a <- rnorm(10)
b <- rnorm(10)
c <- rnorm(10)
d <- data.frame(a, b, c)
txt <- paste0(names(d)[1], ""~"", names(d)[2], ""+"", names(d)[3])
f <- eval(parse(text = txt))
summary(lm(f, data = d))

這個例子中，只要被讀進去的 data frame 叫作 d，且其中欄位順序不變，
則欄位的名字（在此例就是 a、b 和 c）是無所謂的。
重點在倒數第二列和第三列，看看是不是你要的吧。

如果我猜錯你要的，請你把問題說明得更具體一點。
這裡熱心的人很多，
但請不要讓熱心的人花大部份的時間在猜發問者的問題到底是什麼啦。※ 引述《w2a3n4g5 (MORRIS.W)》之銘言：: - 問題: 當你想要問問題時，請使用這個類別: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好我又來問問題了QQ: 目前遇到的問題如下: 先讀入資料檔 , 再透過commandline給定參數去決定自變數 ,應變數的位置: 程式碼大略如下: read.table(data,""路徑""): y <- data[[k1]]: x1 <- data[[k2]]: x2 <- data[[k3]]: y:應變數 , x1 , x2 皆為連續型自變數 , 不須轉換成分類變數: 其中k1,k2,k3行的名稱分別為 weigh , A ,B: output <- lm(y ~ x1 + x2,data): summary(output): 則會出現下列結果:                Estimate Std. Error t value Pr(>|t|): (Intercept)    26.23730    5.93517   4.421 1.08e-05 ***: data[, k2]      0.01520    0.01138   1.336   0.1819: data[, k3]     -0.90883    8.18376  -0.111   0.9116: 但我希望summary後的結果像這樣:                Estimate Std. Error t value Pr(>|t|): (Intercept)    26.23730    5.93517   4.421 1.08e-05 ***: A              0.01520    0.01138   1.336   0.1819: B             -0.90883    8.18376  -0.111   0.9116: 就是如同 lm (weigh ~ A+B , data=data)的效果: 請問我再 lm() 中 該怎麼寫呢?: 已經試過很多方式例如 names(data)[k1] 之類的方式lm當中 , 但還是失敗了: 也看過help(lm)了 ,不太了解內部放的y~x屬於何種型態: 因為檔案是從外不讀入所以行的名稱不固定不能寫死QQ: 第二個問題是 , 假設我將檔案輸出了 , 程式碼大略如下: write.table(summary(output),""路徑""): 假設輸出的是txt檔 , 前面都會有數字1,2...... 就像下面那樣: ""x"": ""1"" """": ""2"" ""Call:"": ""3"" ""lm(formula = data[, f] ~ data[, c1] + data[, c2] + data[, c3], "": ""4"" ""    data = data: 請問是否有辦法再輸出時去除掉那些數字呢?: 謝謝各位QQ--","R_Language"
"2423","M.1411374003.A.48C","tokyo291","問題","data.table 增加新的欄",2014-09-22 16:20:00,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

使用者

[問題敘述]:
在做資料轉換的時候,碰到了一些問題

該欄的資料類型為多選data.table讀出來會有

該題選項有4個

"""" 表示沒有選任何選項

""ZA3"" 表示選了第三個選項

""ZA1,ZA3"" 表示選了第一和第三個選項

""ZA1,ZA3,ZA4"" 表示選了第一 第三和第四個選項

使用gsub把""ZA""用""""取代

變成"""" ""1,3"" ""1,3,4""

現在要做下一步的轉換

把這一個欄位變成4欄(對應四個選項)

像是""""會變成    99  99  99  99 (沒有選的改成)

""1,3"" 會變成    1   3   99  99

""1,3,4"" 會變成  1   3   4   99

""1,2,4"" 會變成  1   2   4   99

目前是想說先新增成四個欄 然後把有選的數字填入

再把剩下空的用99取代

不過這個部分碰到了一些問題

於此來詢問


[程式範例]:

dat<-fread(""C:/Users/user/Desktop/job/data.csv"",header=T)
dat2<-dat[[29]]

gsub(""ZA"","""",dat[[29]])


[關鍵字]:



--","R_Language"
"2424","M.1411367138.A.89F","w2a3n4g5","問題","lm()與資料輸出",2014-09-22 14:25:36,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好我又來問問題了QQ
目前遇到的問題如下
先讀入資料檔 , 再透過commandline給定參數去決定自變數 ,應變數的位置
程式碼大略如下

read.table(data,""路徑"")
y <- data[[k1]]
x1 <- data[[k2]]
x2 <- data[[k3]]
y:應變數 , x1 , x2 皆為連續型自變數 , 不須轉換成分類變數
其中k1,k2,k3行的名稱分別為 weigh , A ,B

output <- lm(y ~ x1 + x2,data)
summary(output)

則會出現下列結果

               Estimate Std. Error t value Pr(>|t|)
(Intercept)    26.23730    5.93517   4.421 1.08e-05 ***
data[, k2]      0.01520    0.01138   1.336   0.1819
data[, k3]     -0.90883    8.18376  -0.111   0.9116

但我希望summary後的結果像這樣


               Estimate Std. Error t value Pr(>|t|)
(Intercept)    26.23730    5.93517   4.421 1.08e-05 ***
A              0.01520    0.01138   1.336   0.1819
B             -0.90883    8.18376  -0.111   0.9116

就是如同 lm (weigh ~ A+B , data=data)的效果
請問我再 lm() 中 該怎麼寫呢?

已經試過很多方式例如 names(data)[k1] 之類的方式lm當中 , 但還是失敗了
也看過help(lm)了 ,不太了解內部放的y~x屬於何種型態
因為檔案是從外不讀入所以行的名稱不固定不能寫死QQ


第二個問題是 , 假設我將檔案輸出了 , 程式碼大略如下

write.table(summary(output),""路徑"")
假設輸出的是txt檔 , 前面都會有數字1,2...... 就像下面那樣
""x""
""1"" """"
""2"" ""Call:""
""3"" ""lm(formula = data[, f] ~ data[, c1] + data[, c2] + data[, c3], ""
""4"" ""    data = data

請問是否有辦法再輸出時去除掉那些數字呢?

謝謝各位QQ




--","R_Language"
"2425","M.1411273304.A.1FA","nicelemon","問題","問一個笨問題 (初學者)",2014-09-21 12:21:41,NA,NA,"各位R 愛用者好

我是初學者

一直覺得R的視窗很小
看得頭昏眼花
(我不習慣螢幕太近,有時候會看電影)

請問可以調整視窗or字型大小大小嗎?

笨問題
大家別笑我拉~


--","R_Language"
"2426","M.1411132468.A.134","silent910","問題","二維度的資料加總",2014-09-19 21:14:25,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:各位R使用者，我有一個問題，就是我有一筆資料，資料欄位分別為使用者ID,影片ID(假設影片總共有三部)以及影片的觀看時間，記錄使用都在觀看影片的情形，而每一個使用者有可能會重複觀看某一個影片，觀看影片的時間也有可能不同，而我想知道使用者在他觀看每一部影片的總時間是如何?是要使用哪一個函數??for example:id  video_id time(min)1     a        102     a         52     a         53     b         11     c         62     b         73     c         23     a         5那我想得到結果是：id\video_id    a   b   c1              10  0   62              10  7   0   中間的數值為觀看影片時間的加總3               5  1   0感謝大家~~~--","R_Language"
"2427","M.1411042767.A.F33","yaowei2010","問題","xls檔as input",2014-09-18 20:19:25,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
有辦法直接input一個xls檔嗎? (不需自行轉換成.txt或.csv)

原因是這樣的

我有一個程式會吐出一堆excel檔案和一堆png檔案

我需要把這些excel檔案在一個資料夾中整合好

但他們的名字太多不規則 唯一能用的就是檔名.xls

偏偏他指吐出xls檔而非csv...

一堆檔案轉檔不知民國幾年

我想問有什麼函式或package有支援直接loading xls檔?

目前我路徑已經設好

filelist<- list.files(path = ""."", pattern = "".xls"", all.files = FALSE,
           full.names = FALSE, recursive = FALSE,
           ignore.case = FALSE, include.dirs = FALSE, no.. = FALSE)

all.files.data = lapply(filelist, ??? ,header=TRUE)

上面???部分是input function

或者我有別的方式? 如在R裡面轉檔嗎?

--","R_Language"
"2428","M.1410872942.A.ED0","loser113","問題","函數相加",2014-09-16 21:09:00,NA,NA,"m=function(x){x};

我希望

n=function(x){m+m};

n 會是 function(x){2*x};

可是這樣跑錯誤

有其他方法做函數做運算產生新函數嗎

--","R_Language"
"2429","M.1410690535.A.B90","ckjmal","問題","刪除檔案",2014-09-14 18:28:50,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
請問R有辦法用指令刪除工作目錄下的檔案

或甚至是工作目錄下所有資料都刪掉?

謝謝!

--","R_Language"
"2430","M.1410503274.A.A7C","roussas","問題","boot() 函式的平行運算",2014-09-12 14:27:51,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
目前嘗試利用 bootstrap 的技巧計算統計量，利用 boot 套件中的 boot()
這個函式做 bootstrap 。
boot()函式有一個參數是 parallel，我在windows 的電腦上將它設定成
parallel=""snow""後，發現它做1000次bootstrap的時間和我自己寫的 for 迴圈幾乎一樣，
我預期它應該要有改進一點才是。
想問一下以下第二和第三種寫法為什麼沒有作用？


[程式範例]:
library(boot)
library(snow)
library(doParallel)
#library(Rmpi) #我的電腦上這個套件無法安裝，說我遺失了某個檔案
我的 OrgData 是一個100x80的矩陣, f.boot 是我自己定義的函數，
f.boot<- function(x, ii){v<- x[ii,]; E<- eigen(cov(v)); sum(E$val) }

system.time(
#我沒有設定 cl
b<- boot(OrgData, f.boot, R=1000, parallel=""snow"")
)[3]

system.time(
#設定 cl
b<- boot(OrgData, f.boot, R=1000, parallel=""snow"", cl=3)
)[3]
Q<- b$t
#

cl<- makeCluster(3, type=""SOCK"")
registerDoParallel(cl)
system.time(
b<- boot(OrgData, f.boot, R=1000, parallel=""snow"", cl=cl)
)[3]
Q<- b$t

#用 foreach()%dopar%{}
cores<- makeCluster(3)
registerDoParallel(cores)
clusterExport(cores, list(""OrgData""), envir=.GlobalEnv)
system.time(
Q<- foreach(b=1:1000 )%dopar%{
        ii<- sample(1:100, 100, replace=T)
        f.boot(OrgData, ii)
}
)[3]
stopCluster(cl)

以上四個方法分別用掉
elapsed 5.05, 3.28, 3.29, 2.61

單純寫 for 迴圈
Q<- numeric()
system.time(
 for(b in 1:1000 ){
         ii<- sample(1:100, 100, replace=T)
         Q[b]<- f.boot(OrgData, ii)
 }
 )[3]
elapsed
   3.32

結果是第一種寫法效能最差，第二種、第三種和純用 for 迴圈差不多，用 foreach()的
最好。
我有開工作管理員，只有 foreach 在執行時CPU有用到75%（全部四核心），其他都只有
25%在運作。

















[關鍵字]:選擇性，也許未來有用--","R_Language"
"2431","M.1410456311.A.ACF","loser113","問題","r 積分回傳數值值",2014-09-12 01:25:09,NA,NA,"> integrand <- function(x) {1/((x+1)*sqrt(x))}> a=integrate(integrand, lower = 0, upper = Inf);a3.141593 with absolute error < 2.7e-05

我只要a=3.141593 還需要多加甚麼

--","R_Language"
"2432","M.1410264275.A.AF5","andrew43","問題","Re: 請問版權問題",2014-09-09 20:04:31,NA,NA,"※ 引述《roussas (盡力了..)》之銘言：: ※ 引述《Pagan (test)》之銘言：: : 想請問一下有關R的版權問題: : 知道R是open source, 他的package, library也有許多是: : 那假如想利用R語言以及第三方開發的package,library開發的話: : 是否有需要將開發的程式碼也公佈? (ex: 企業商業應用): : 假如是商業應用是否可以避免公開程式碼避免曝光? 還是open source有感染性?: : 謝謝!!: 看到這篇讓我想到一個問題。: 稍微讀了一下推文二個連結，但對GPL的機制仍不熟悉。: 由於SPSS現在可以允許用R語言去自訂新的分析功能，: 打包成SPSS可用的附加套件供人安裝使用。: 如果我寫了一段程式碼，直接將 R 某個package的分析功能包起來變成SPSS可以用: 的附加套件。: 執行該分析功能時會：: 1. 從SPSS的資料表讀入已經整理好的資料。: 2. 呼叫R，執行我包起來的程式碼。: 3. 將R輸出的結果再以 SPSS 的介面輸出。 「: 我想SPSS本身應該不適用GPL，但我包起來的附加程式用了R的套件，: （更極端一點，我並沒有重新寫一個和lm()相同功能的程式，: 而只引用了套件已用的函式，如lm()。）: 在這個情況下，只要使用者自行安裝SPSS，再下載我做的SPSS套件，就不違背GPL原則，: 而我不負有公開我的SPSS套件程式碼的責任。: 但我如果散佈一個內建我的SPSS套件的SPSS，就有責任公開那個SPSS套件的程式碼。: 以上的理解正確嘛？: (我的印象是自訂的SPSS套件，下載安裝後都可以用「編輯」的功能看到原始碼，: 包含用到什麼函式及使用了哪些R套件就是了！)你的理解我想是正確的。
讓使用者自行組合 GPL 和非 GPL 的元件正是其中的重點。
不過這也不是完全沒有爭議，因為自由軟體基金會認為這仍違背 GPL，
但這麼嚴格的規範在法官面前是否站得住腳？許多人懷疑。
如果你的程式在沒有 GPL 元件仍可「獨立運作」的話，那就更沒話說了。

已經有不少軟體都是這麼做的：
在安裝軟體時會有個選項問你要不要「額外地」加裝 GPL 程式庫，
或是在軟體運作中當你選取某個功能時
會顯示請操作者自行去下載、安裝某個 GPL 軟體，否則這個功能不可運作。
當然，在 UI 中會把前因後果解釋清楚。

上面可能存在的爭議是因為 GPL 本身對於這件事情沒有交待得非常清楚。
（也許自由軟體基金會自認為很清楚……）
比較麻煩的是，在組合後，這整個東西是不是都變成 GPL？
是的話，組合者不就要提供原始碼？但他明明就沒有原始碼啊……
這些可能的爭議最好是讓「準」組合者知道，明確地把責任推給他。: 另外，我想GPL原則和著作權應該分開來看，對吧？: 即使我使用了不違背GPL原則的方法去散佈我的SPSS套件，還從中營利，: 但我直接使用了某個別人發佈的R套件（如，wavethresh 之類的)中的函式，: 因此著作權應該還是屬於原發佈者，必需徵求其同意或對方放棄著作權之類的，: 否則我都可能侵犯對方的著作權。: 還是說GPL的開放原始碼沒有著作權問題？著作權和 GPL 是分開的概念，但二者有一點交互關係。
著作權就是「誰（們）是作者」，就和一般大眾所認知的概念無異。
GPL 是授權方式，
是對被授權方（改作者或下載者）使用授權物（GPL 軟體）的規定和許可。
這些規定和許可就是你聽過的「四大自由」、「開放原始碼」和「感染」等特性。

在宣稱著作權的 copyright 檔中會有
        王大明 2007-2008;
        李小珍 2009.
之類的宣告。
這就有可能是李小珍在 2009 年分支了王小明在 2007-2008 維護的 GPL 作品。
這二位都是作者。這就是著作權的宣告。

舉個例。
你分支別人的 GPL 作品（當然，再次以 GPL 發佈），
先前的作者必須仍是新作品的共同著作人。
當然，你也會是共同作者之一。

如果此時你宣稱你是獨立作者，那就是侵犯了先前作者的著作權。
你看看大多數的 GPL 軟體原始碼裡的 copyright 都是落落長的。
但是，這和你要不要營利沒有關係。GPL 中包括讓你有營利的自由。
你也不必要把營收分給前作者。

如果所有的先前作者都放棄了著作權，使你成為了唯一的著作權擁有者，
那就等於他們把原始碼「無條件送給你」，
而你接下來想怎樣就怎樣，包括讓軟體不再是 GPL。
所以 GPL 的「相同授權」背後是基於先前作者仍擁有著作權的關係。

--","R_Language"
"2433","M.1410230729.A.E83","roussas","問題","Re: 請問版權問題",2014-09-09 10:45:26,NA,NA,"※ 引述《Pagan (test)》之銘言：: 想請問一下有關R的版權問題: 知道R是open source, 他的package, library也有許多是: 那假如想利用R語言以及第三方開發的package,library開發的話: 是否有需要將開發的程式碼也公佈? (ex: 企業商業應用): 假如是商業應用是否可以避免公開程式碼避免曝光? 還是open source有感染性?: 謝謝!!看到這篇讓我想到一個問題。
稍微讀了一下推文二個連結，但對GPL的機制仍不熟悉。
由於SPSS現在可以允許用R語言去自訂新的分析功能，
打包成SPSS可用的附加套件供人安裝使用。

如果我寫了一段程式碼，直接將 R 某個package的分析功能包起來變成SPSS可以用
的附加套件。
執行該分析功能時會：
1. 從SPSS的資料表讀入已經整理好的資料。
2. 呼叫R，執行我包起來的程式碼。
3. 將R輸出的結果再以 SPSS 的介面輸出。 「

我想SPSS本身應該不適用GPL，但我包起來的附加程式用了R的套件，
（更極端一點，我並沒有重新寫一個和lm()相同功能的程式，
而只引用了套件已用的函式，如lm()。）
在這個情況下，只要使用者自行安裝SPSS，再下載我做的SPSS套件，就不違背GPL原則，
而我不負有公開我的SPSS套件程式碼的責任。
但我如果散佈一個內建我的SPSS套件的SPSS，就有責任公開那個SPSS套件的程式碼。

以上的理解正確嘛？

(我的印象是自訂的SPSS套件，下載安裝後都可以用「編輯」的功能看到原始碼，
包含用到什麼函式及使用了哪些R套件就是了！)


另外，我想GPL原則和著作權應該分開來看，對吧？
即使我使用了不違背GPL原則的方法去散佈我的SPSS套件，還從中營利，
但我直接使用了某個別人發佈的R套件（如，wavethresh 之類的)中的函式，
因此著作權應該還是屬於原發佈者，必需徵求其同意或對方放棄著作權之類的，
否則我都可能侵犯對方的著作權。

還是說GPL的開放原始碼沒有著作權問題？









--","R_Language"
"2434","M.1409937250.A.AFC","Pagan","問題","請問版權問題",2014-09-06 01:14:08,NA,NA,"想請問一下有關R的版權問題

知道R是open source, 他的package, library也有許多是

那假如想利用R語言以及第三方開發的package,library開發的話

是否有需要將開發的程式碼也公佈? (ex: 企業商業應用)

假如是商業應用是否可以避免公開程式碼避免曝光? 還是open source有感染性?

謝謝!!

--","R_Language"
"2435","M.1409883111.A.75E","Wush978","問題","Re: 關於PHP與R",2014-09-05 10:11:48,NA,NA,"※ 引述《w2a3n4g5 (MORRIS.W)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 大家好,由於專題所需,需要結合PHP與R進行一些統計推論&計算: 主要是透過PHP中的 exec(Rscript XXX.r paremeter) 來呼叫R: 在透過輸出成txt , png檔案的方式,print在網頁上: 目前主要遇到兩個問題: 1:假設rscript的內容中有library(package) , 那麼在執行網頁: 時無法順利載入package , 這方面想了很久實在想不到解決辦法由於套件預設的安裝位置在使用者的家目錄底下，
而執行 php 的使用者可能不同，所以無法讀取你安裝的套件。
建議利用root權限將套件裝於如 /usr/local/lib/R/site-library 的位置
這樣 php 開啟的Rscript 應該也能載入套件。

如果有問題的話，在php的Rscript底下印出.libPaths()的回傳值: 2.雖然將計算結果輸出成txt,png檔在印出的方式不會太複雜: 但印象很久以前好像看過php的指令可以直接輸出r的計算結果: 但不知道是不是記錯,是否有人有看過類似的指令呢?我不知道。

如果要自己作土砲的話，你可能要用一些方法來作process間的資料交換。: 3.由於stem(data)的計算結果 , 無法存成圖片或是文件檔:   請問還有什麼方式可以將結果輸出呢?write(capture.output(stem(iris[[1]])), ""/tmp/test.txt""): 不知道這篇適不適合發在這裡,如果不洽當的話我會馬上刪除的QQ: 先謝謝各位了!!!!!謝謝你的發問

--","R_Language"
"2436","M.1409850501.A.A88","w2a3n4g5","問題","關於PHP與R",2014-09-05 01:08:19,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
大家好,由於專題所需,需要結合PHP與R進行一些統計推論&計算
主要是透過PHP中的 exec(Rscript XXX.r paremeter) 來呼叫R
在透過輸出成txt , png檔案的方式,print在網頁上
目前主要遇到兩個問題

1:假設rscript的內容中有library(package) , 那麼在執行網頁
時無法順利載入package , 這方面想了很久實在想不到解決辦法


2.雖然將計算結果輸出成txt,png檔在印出的方式不會太複雜
但印象很久以前好像看過php的指令可以直接輸出r的計算結果
但不知道是不是記錯,是否有人有看過類似的指令呢?


3.由於stem(data)的計算結果 , 無法存成圖片或是文件檔
  請問還有什麼方式可以將結果輸出呢?


不知道這篇適不適合發在這裡,如果不洽當的話我會馬上刪除的QQ
先謝謝各位了!!!!!


--","R_Language"
"2437","M.1409759056.A.89D","mickey1231","問題","R 影像處理",2014-09-03 23:44:13,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請問R可以做影像處理嗎?我有一段影片想要去計算影片中車子的數量請問有類似的package嗎?[程式範例]:

google只有找到mathlab相關的程式碼http://www.mathworks.com/help/vision/examples/detecting-cars-using-gaussian-mixture-models.html#zmw57dd0e917不知道大家有沒有相關經驗可以分享

謝謝囉



--","R_Language"
"2438","M.1409673157.A.01B","thea","問題","調用R",2014-09-02 23:52:33,NA,NA,"[問題類型]:經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
hi~ 週末有幸參加了資料科學年會，感謝R社群的幫忙~
今天把工作上的資料整理寫成了R的腳本~~
好不容易寫完了XD
(一個22行的小檔案，存成.R)

不過在包成cmd檔案的時候撞牆了
有先用R調用找了一些資料，但是使用R CMD BATCH [該檔案儲存位置]/Script.R
的方式一直沒有成功

作業環境為windows, 有手動設定環境變數 Path(2個,Rtools&bin)

因此想請問一下，大家通常是如何包程式、可執行的
謝謝~~!!


[關鍵字]:調用、*.R--","R_Language"
"2439","M.1409652844.A.E01","EricTao","問題","從其他語言call R?",2014-09-02 18:14:02,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門(寫過其他程式，第一次用R)[問題敘述]:
目的:   想從其他程式(php,javascript佳)
        call R做propensity score matching(glm, matching)，

非必要希望:
        1. 使用php, javascript
        2. 支援windows

想請問推薦的方法?

目前看過:
rpy2:   討論好像比較多，沒寫過PYTHON，但聽說不太難。
opencpu:看幾個example好像不錯，但官網看不太懂...
ROOK:   正在看，但不確定是否符合我的目的(從其他語言呼叫)。也許能用POST, GET達成


--","R_Language"
"2440","M.1409354422.A.A2C","celestialgod","問題","Re: 快速產生column, 和前幾個row相依",2014-08-30 07:20:19,NA,NA,"可以試試看tapply做 會比迴圈再快一點

我自己模擬了一筆13000左右的資料只比迴圈快1.86倍

我有試過把比過的跳掉，可是發現變更慢

還在想有沒有什麼方法更快

code：

data$Session = unlist(tapply(data$Time, data$ID, function(v){
  output = rep(0, length(v))
  i = 1
  session_num = 1
  repeat
  {
    loc = as.numeric(v - v[i], unit='hours') < 1 & output == 0
    output[loc] = session_num
    session_num = session_num + 1
    i = i + sum(loc)
    if(i > length(v))
      break
  }
  output
}))


模擬資料：

set.seed(100)
n = 2100
data = data.frame(ID = rep(1:n, ceiling(runif(n) * 10) + 1))
nrow(data)
# 13812
data$Time = Reduce(c, tapply(rep(1, nrow(data)), data$ID, function(v){
  start_time = strptime(""2014-08-01 00:00:00"", ""%Y-%m-%d %H:%M:%S"")
  as.POSIXlt(sort(start_time + round(86400 * runif(length(v)))))
}))

迴圈：5.301304 secs
tapply: 2.846163 secs

--","R_Language"
"2441","M.1409346226.A.6EB","forloricever","問題","快速產生column, 和前幾個row相依",2014-08-30 05:03:43,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
有一組 data 已照 ID, Time 排序
需要產生一個 column (Session),
將相隔一固定時間 (1hr) 內的算在同一個 Session。

Ex:
ID Time                 Session
1  2014-08-28 00:00:00     1
1  2014-08-28 00:23:33     1
1  2014-08-28 00:59:59     1
1  2014-08-28 01:00:00     2
1  2014-08-28 02:30:00     3
1  2014-08-28 03:29:59     3
2  2014-08-28 00:00:01     1

每個列和前幾列相依且未知有幾列,
似乎只能用 for loop 做一次 linear scan,
資料量約 1~10 萬 rows/day, 要處理好幾個月的資料。
不曉得有什麼好方法?

目前 13000 rows 約花 3.5 sec, 用 compiler 套件加速到 3.3 sec
data.table 極慢, 要 30 sec

用 python 的 pandas 套件用同樣的方法寫 for loop
只要 600 ms。

希望 R 至少能做到和 python 速度類似。


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題目前產生新 column 大概是這樣data$Session <- 0id <- data[1, 'ID']session.start <- data[1, 'Time']data[1, 'Session'] <- 1for (row in 2:nrow(data)) {if (id != data[row, 'ID']) {session.start <- data[row, 'Time']data[row, 'Session'] <- 1id <- data[row, 'ID']} else {if (as.numeric(data[row, 'Time'] -data[row-1, 'Time'], unit='hours') >= 1) {# Start a new sessiondata[row, 'Session'] <- data[row-1, 'Session']+1session.start <- data[row, 'Time']} else {data[row, 'Session'] <- data[row-1, 'Session']}}}--","R_Language"
"2442","M.1409209389.A.3CC","yaowei2010","問題","重複配對",2014-08-28 15:03:06,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

由於match只會回傳第一個配對到的位子，多重配對我估狗過後似乎沒有特定
如match的function，不知道該怎麼辦，請問有這樣的function嗎(如例子

[程式範例]:

[data 1]

name location
 A       1
 B       1
 C       2
 D       3

[data 2]

name2 location
 a1      1
 a2      1
 a3      1
 a4      2
 a5      2
 a6      2
 a7      2
 a8      3


依照location做match後(不是用match())

name  match
 A      a1
 A      a2
 A      a3
 B      a1
 B      a2
 B      a3
 C      a4
 C      a5
 C      a6
 C      a7
 D      a8

為了節省大大們的麻煩

(不需用給我完整的code，可以給我hint或有獨特的function即可)

感恩

--","R_Language"
"2443","M.1409157227.A.872","Wush978","問題","Re: 透過R使用Rhdfs package讀取超大CSV檔",2014-08-28 00:33:45,NA,NA,"最近自己在玩hadoop-2.2.0的hdfs,

發現已經有C client。

試了一下，發現可以用Rcpp簡單包到R中。

我自己測試的讀取效能約50MB/s (可能和網路有關），

和command line的hadoop差不多。※ 引述《dppman (*^o^*)》之銘言：: ※ 引述《Wush978 (拒看低質媒體)》之銘言：: : 建議你先測量一下throughput: : ```r: : start.time <- Sys.time(): : repeat {: :   m = hdfs.read(f): :   duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs"")): :   print(length(m) /  duration) # 每秒的bytes數: :   start.time <- Sys.time(): : }: : ```: : 先看一下hdfs.read的效能，如果throughput是1MB / s的速度的話: : 20G 需要 20*2^30 / 2^20 秒，大約是5.6小時: : ---: : 也建議你另外量測一下hdfs fs -put 的頻寬，: : 拿來和你在R 堶悸煽到的throughput做比較。: : 兩者的差距是你可以在R 裡面優化的程度。: : 所以如果兩者差不多快的話，其實你R 怎麼改也是這樣。: : FYI: 測試了一下throughput：: 在同要的主機（安裝RStudio Server的主機）：: Part I：: [[email<U+00A0>protected] ~]# time hadoop fs -put /tmp/201303.csv /tmp/: real    3m5.876s: user    0m32.257s: sys     0m14.262s: [[email<U+00A0>protected] ~]# ls -al /tmp/201303.csv: -rw-r--r-- 1 root root 8596758123 2014-05-23 09:54 /tmp/201303.csv: 結果：大約在64086KB /sec: Part II:: 用下列這段測試:  start.time <- Sys.time():  repeat {:    m = hdfs.read(f):    duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs"")):    print(length(m) /  duration) # 每秒的bytes數:    start.time <- Sys.time():  }: 結果：450KB/sec ~ 465KB/sec: [1] 464816.2: [1] 465376.1: [1] 464151.4: [1] 457809.4: [1] 456209.6: [1] 453534.4: [1] 454532.2: [1] 450441.2: 差距很大@@@@: 該怎麼優化呢？: Thanks in advance.--","R_Language"
"2444","M.1409117916.A.1D8","morefunmba","問題","Rattle中文問題",2014-08-27 13:38:33,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的在做Data Mining時意外的接觸到rattle
發現它使用點選界面
但若我的.csv檔中有中文(UTF-8)
則檔案就會出現錯誤而進不去

google之後好像沒看到解決辦法
偏偏有些資料的type用中文比較好理解
因此想來這邊詢問一下是否有套件or Packages可解決中文的問題?
還是有其他方式

謝謝大家

--","R_Language"
"2445","M.1408626055.A.30B","HeroNoah","問題","Re: 撈資料",2014-08-21 21:00:52,NA,NA,"Make anything what you need clean.



reference:#1JlmgrEG (R_Language)#1JrRu6ay (R_Language)x = data.frame(
  ""gene_a"" = c(""A"", ""B"", ""C""),
  ""Chromosome"" = c(""1"", ""X"", ""2""),
  ""gene_start"" = as.integer(c(25000, 1000, 0)),
  ""gene_end"" = as.integer(c(50000, 2000, 800)),
  stringsAsFactors = FALSE
)
y = data.frame(
  ""Probe_b"" = c(""a1"", ""a2"", ""a3"", ""a4"", ""a5""),
  ""Chromosome2"" = c(""2"", ""4"", ""1"", ""X"", ""1""),
  ""Chr_s"" = as.integer(c(175, 600, 23575, 1010, 30000)),
  ""Chr_e"" = as.integer(c(200, 625, 23600, 1035, 30025)),
  stringsAsFactors = FALSE
)

x_merge_y = merge(
  x,
  y,
  by.x = ""Chromosome"",
  by.y = ""Chromosome2""
)
condition = (
  x_merge_y$gene_start <= x_merge_y$Chr_s
) & (
  x_merge_y$Chr_e <= x_merge_y$gene_end
)

output = x_merge_y[condition, c(""gene_a"", ""Probe_b"")]

order_index = order(output$gene_a)
output[order_index, ]

--","R_Language"
"2446","M.1408551856.A.DEA","cywhale","問題","Re: 撈資料",2014-08-21 00:24:14,NA,NA,"da = data.frame(gene =c(""A"",""B"",""C""),
                chr  =c(""1"",""X"",""2""),
                start=c(25000,1000,0),
                end  =c(50000,2000,800))

db = data.frame(probe=c(""a1"",""a2"",""a3"",""a4"",""a5""),
                chr  =c(""2"",""4"",""1"",""X"",""1""),
                start=c(175,600,23575,1010,30000),
                end  =c(200,625,23600,1035,30025))

chr_match = t(sapply(1:dim(da)[1],
              function(x,gen,prb) match(prb,gen[x]),
              gen = da$chr, prb = db$chr))

loc_match = function (x,y) {
  ifelse (x[1]>=y[1] & x[2]<=y[2], 1, 0)
}

prb_match = lapply(1:dim(da)[1],
                   function(x,loca,locb,chr_mat) {
                     apply(locb[which(!is.na(chr_mat[x,])),],
                           MARGIN=1,
                           FUN   =loc_match, y=loca[x,])
                   },loca = da[,c(3:4)], locb = db[,c(3:4)],
                     chr_mat = chr_match)

data.frame(
  gene_a = da$gene,
  match_probe =
    sapply(1:dim(da)[1],
           function(x,prb_mat) {
             paste(unlist(paste(""a"",
                                names(prb_mat[[x]][which(prb_mat[[x]]==1)]),
                                sep="""")),collapse="","")
             }, prb_mat = prb_match))

--","R_Language"
"2447","M.1408549402.A.9F9","celestialgod","問題","Re: 撈資料",2014-08-20 23:43:20,NA,NA,"2014/8/21 22:28更新：

測試一個10000 => 12的case 比下面原本的快1230倍，現在測試中最快的。
    (dat的row => ref_m的row)

ref_m = data.frame(
  ""gene_a"" = c(""A"", ""B"", ""C""),
  ""Chromosome"" = c(""1"", ""X"", ""2""),
  ""gene_start"" = as.integer(c(25000, 1000, 0)),
  ""gene_end"" = as.integer(c(50000, 2000, 800)),
  stringsAsFactors = FALSE
)

dat = data.frame(
  ""Probe_b"" = c(""a1"", ""a2"", ""a3"", ""a4"", ""a5""),
  ""Chromosome2"" = c(""2"", ""4"", ""1"", ""X"", ""1""),
  ""Chr_s"" = as.integer(c(175, 600, 23575, 1010, 30000)),
  ""Chr_e"" = as.integer(c(200, 625, 23600, 1035, 30025)),
  stringsAsFactors = FALSE
)

dat$Probe_b = as.character(dat$Probe_b)
ref_m$gene_a = as.character(ref_m$gene_a)
loc_ref_v = match(dat$Chromosome2, ref_m$Chromosome)
loc_dat_v = loc_ref_v > 0
loc_dat_v = loc_dat_v[!is.na(loc_dat_v)]
loc_ref_v = loc_ref_v[loc_dat_v]
loc = dat$Chr_s[loc_dat_v] >= ref_m$gene_start[loc_ref_v] &
      dat$Chr_e[loc_dat_v] <= ref_m$gene_end[loc_ref_v]
tapply(dat$Probe_b[loc_dat_v][loc], ref_m$gene_a[loc_ref_v[loc]], c)

之前的：

借上面的資料一用，code如下：

ref_m = data.frame(""gene_a""=c(""A"",""B"",""C""),
                   ""Chromosome""=c(1,""X"",2),
                   ""gene_s""=c(25000,1000,0),
                   ""gene_e""=c(50000,2000,800))
dat = data.frame(""Probe_b""=c(""a1"",""a2"",""a3"",""a4"",""a5""),
                 ""Chromosome2""=c(2,4,1,""X"",1),
                 ""chr_s""=c(175,600,23575,1010,30000),
                 ""chr_e""=c(200,625,23600,1035,30025))

check_f = function(v, ref_m){
  loc <- match(v$Chromosome2, ref_m$Chromosome, nomatch = 0)
  if(length(loc) != 0 && loc > 0)  # 避免loc出現integer(0)的情況
  {
    if(v$chr_s >= ref_m[loc,]$gene_s && v$chr_e <= ref_m[loc,]$gene_e)
      return(as.character(ref_m[loc,]$gene_a))
    else
      return(NA)
  }
  else
    return(NA)
}
result = rep(NA, nrow(dat))
for(i in 1:nrow(dat))
  result[i] = check_f(dat[i,], ref_m)
tapply(as.character(dat$Probe_b), result, c)


--","R_Language"
"2448","M.1408530493.A.512","yaowei2010","問題","Re: 撈資料",2014-08-20 18:28:10,NA,NA,"不好意思 讓回復的大大看不懂我的問題 只好重新回一篇


 gene_a  Chromosome  gene_start gene_end |  Probe_b Chromosome2 Chr_s  Chr_e
 A           1          25000    50000   |  a1         2        175   200
 B           X           1000     2000   |  a2         4        600   625
 C           2           0         800   |  a3         1       23575  23600
                                         |  a4         X        1010   1035
                                         |  a5         1       30000  30025



我想做的是

先對Chromosome是不是在一個→再對位子→假設兩者都相符，收data(不符丟掉

例如上面兩data

probe a3和a5都為chromosome 1 兩位子分別23575~23600及30000~30025

A gene為chromosome 1 ，其位子為25000~50000，上述a5 probe都符合其chromosome

以及gene範圍，歸類到gene A裡的match中


我的想法是兩關，第一關篩選出和gene一樣的chromosome的probe

第二關比較probe的數值要落入gene的位子範圍中(gene_start~gene_end)

大概是這樣> <


以此類推


最後才變成

 gene_a   match_probe
  A        a5
  B        a4
  C        a1

--","R_Language"
"2449","M.1408530439.A.7A2","koai","問題","Re: 撈資料",2014-08-20 18:27:16,NA,NA,"依照我對你的問題的理解
把程式做了下面的修改
不知道這是不是你要的
可是結果變得有點不一樣了說...  @@""


A <- data.frame(""gene_a""=c(""A"",""B"",""C""),""Chrom""=c(1,""X"",2),
  ""gene_s""=c(25000,1000,0),""gene_e""=c(50000,2000,800))
B <- data.frame(""Probe_b""=c(""a1"",""a2"",""a3"",""a4"",""a5""),""Chrom2""=c(2,4,1,""X"",1),
  ""chr_s""=c(175,600,23575,1010,30000),""chr_e""=c(200,625,23600,1035,30025))
A
B
C <- list()
for(x in 1:nrow(A)){

  idx <-
   ( is.element(as.character((B$Chrom2)),as.character(A$Chrom[x])) ) &
   ( B$chr_s >= A$gene_s[x] ) &
   ( A$gene_e[x] >= B$chr_e )

  if(sum(idx)>0){
    C[[as.character(A$gene_a[x])]] <- as.character(B$Probe_b[which(idx)])
  }

}
C

$A
[1] ""a5""

$B
[1] ""a4""

$C
[1] ""a1""※ 引述《koai (可笑的自以為...)》之銘言：: 不是很確定你的資料型態: 幫你寫了下面這個程式讓你試試看: 應該是可以動吧...  ^^: A #左邊的資料表: B #右邊的資料表: A <- data.frame(""gene_a""=c(""A"",""B"",""C""),""Chrom""=c(1,""X"",2)): B <- data.frame(""Probe_b""=c(""a1"",""a2"",""a3"",""a4"",""a5""),""Chrom2""=c(2,4,1,""X"",1)): A: B: C <- list(): for(x in 1:nrow(A)){:   C[[as.character(A$gene_a[x])]] <-:     as.character(B$Probe_b[:       which(is.element(as.character((B$Chrom2)),as.character(A$Chrom[x]))):     ]): }: ※ 引述《yaowei2010 (yaowei)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 新手(沒寫過程式，R 是我的第一次): : [問題敘述]: : 資料的配對(如範例): : [程式範例]:: : 表格如下: : gene_a  Chromosome  gene_start gene_end  Probe_b Chromosome2 Chr_s  Chr_e: : A           1          25000    50000     a1         2        175   200: : B           X           1000     2000     a2         4        600   625: : C           2           0         800     a3         1       23575  23600: :                                           a4         X        1010   1035: :                                           a5         1       30000  30025: : 最後想變成這樣: : gene_a  match: : A        a3 a5: : B        a4: : C        a1: : 有試著寫過code: : 但gg QAQ: : 想問問強者怎麼寫? 或提示: : 程式碼可貼於以下網站：: :       http://ideone.com/: :       http://codepad.org: :       http://pastie.org/: :       http://nopaste.info/: :       http://pastebin.com/: :       http://paste.plurk.com: :       http://gist.github.com/: :       http://nopaste.csie.org/: : → yaowei2010: 兩個資料                                            08/20 16:59: : → yaowei2010:         (註                                         08/20 16:59--","R_Language"
"2450","M.1408526673.A.127","koai","問題","Re: 撈資料",2014-08-20 17:24:31,NA,NA,"不是很確定你的資料型態
幫你寫了下面這個程式讓你試試看
應該是可以動吧...  ^^

A #左邊的資料表
B #右邊的資料表

A <- data.frame(""gene_a""=c(""A"",""B"",""C""),""Chrom""=c(1,""X"",2))
B <- data.frame(""Probe_b""=c(""a1"",""a2"",""a3"",""a4"",""a5""),""Chrom2""=c(2,4,1,""X"",1))
A
B
C <- list()
for(x in 1:nrow(A)){
  C[[as.character(A$gene_a[x])]] <-
    as.character(B$Probe_b[
      which(is.element(as.character((B$Chrom2)),as.character(A$Chrom[x])))
    ])
}※ 引述《yaowei2010 (yaowei)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]: 資料的配對(如範例): [程式範例]:: 表格如下: gene_a  Chromosome  gene_start gene_end  Probe_b Chromosome2 Chr_s  Chr_e: A           1          25000    50000     a1         2        175   200: B           X           1000     2000     a2         4        600   625: C           2           0         800     a3         1       23575  23600:                                           a4         X        1010   1035:                                           a5         1       30000  30025: 最後想變成這樣: gene_a  match: A        a3 a5: B        a4: C        a1: 有試著寫過code: 但gg QAQ: 想問問強者怎麼寫? 或提示: 程式碼可貼於以下網站：:       http://ideone.com/:       http://codepad.org:       http://pastie.org/:       http://nopaste.info/:       http://pastebin.com/:       http://paste.plurk.com:       http://gist.github.com/:       http://nopaste.csie.org/","R_Language"
"2451","M.1408522848.A.3B9","yaowei2010","問題","撈資料",2014-08-20 16:20:37,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]
:
資料的配對(如範例)

[程式範例]:

表格如下

gene_a  Chromosome  gene_start gene_end  Probe_b Chromosome2 Chr_s  Chr_e
A           1          25000    50000     a1         2        175   200
B           X           1000     2000     a2         4        600   625
C           2           0         800     a3         1       23575  23600
                                          a4         X        1010   1035
                                          a5         1       30000  30025


最後想變成這樣

gene_a  match
A        a3 a5
B        a4
C        a1

有試著寫過code
但gg QAQ
想問問強者怎麼寫? 或提示


程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/","R_Language"
"2452","M.1408460415.A.F2E","Wush978","分享","在for之中自動顯示progress bar",2014-08-19 23:00:12,NA,NA,"[關鍵字]: for, progress bar

原本的版本會無法編輯global environment的物件，所以我改成這樣：


`for` <- function(a, b, expr) {
  pb <- txtProgressBar(max = length(b), style = 3)
  base::`for`(.i, seq_along(b), {
    assign(as.character(substitute(a)), b[.i], envir = globalenv())
    eval(substitute(expr), globalenv())
    setTxtProgressBar(pb, .i)
  })
  close(pb)
}

test script:
x <- 0
for(i in 1:10) x <- x + 1
x

---

有時候跑迴圈的時候想要追進度，

可以使用 `txtProgressBar`, `setTxtProgressBar` 這兩個函數來達成目的。

但是我每次改for loop的時候，都覺得這個動作很重複，應該可以一般化。

剛剛研究了一下，發現如果在一開始放入:

`for` <- function(a, b, expr) {
  pb <- txtProgressBar(max = length(b), style = 3)
  base::`for`(.i, seq_along(b), {
    param <- list()
    param[[as.character(substitute(a))]] <- b[.i]
    eval(substitute(expr), param)
    setTxtProgressBar(pb, .i)
  })
  close(pb)
}

那後面簡單的for loop都會自動加上progress bar，不用改code。

不知道版友們有沒有興趣玩玩看?

--","R_Language"
"2453","M.1408346070.A.4DD","yaowei2010","問題","負值變0",2014-08-18 15:14:27,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
想把某column內的數值如果小於0就給0，其於不變

[舉例]

    x            x
1   1        1   1
2   2        2   2
3   3        3   3
4   -1       4   0
5   4        5   4
6   -5    → 6   0
7   2        7   2
8   3        8   3
9   6        9   6
10  4       10   4
11  2       11   2


第一次寫請多指教><

--","R_Language"
"2454","M.1408116483.A.B67","innocent817","問題","將矩陣呈現的關係轉為排序/ELECTRE II",2014-08-15 23:28:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
想將矩陣呈現的關係轉為排序

     [,1]       [,2]       [,3]
[1,]    0          1          1
[2,]    0          0          0
[3,]    0          1          0

以上面這個矩陣為例，這是一個兩兩比較關係的方陣
[1,2]=1表示1優於2，[1,3]=1表示1優於3，[3,2]=1表示3優於2
因此綜合上面三個：1優於3優於2
想得到的排序應該為1 3 2

以另一個矩陣解釋
     [,1]       [,2]       [,3]
[1,]    0          0          1
[2,]    1          0          0
[3,]    0          0          0

即2優於1優於3，想得到的排序應為2 1 3



我原本想用R進行ELECTRE II的模擬實驗，可是R裡面沒有ELECTRE II的package
只有'MCDA'裡的ELECTRE TRI(另一個版本，差異頗大)
因此想說自己寫一個簡易版，可是到最後一個步驟怎麼也無法將矩陣轉為排序
實際上會排序的數量會有100個，也就是100*100的矩陣
因此無法像上面的例子用筆畫一畫就畫出來
想請問版上大大會如何解決這個問題
感激不盡！
[程式範例]:


[關鍵字]:


--","R_Language"
"2455","M.1407484164.A.D5D","ming790925","問題","變數很多時存取問題",2014-08-08 15:49:21,NA,NA,"請問 我現在有 F1, F2, F3, ..., F50000 個物件
我想用A=list(F1, F2, F3, ..., F50000)但我不可能50000筆一筆一筆輸入
但因為他是變數名稱，我沒辦法用 for(i in 1:50000) 之類的方式
不知道有沒有其他方法可以使用 感謝!

--","R_Language"
"2456","M.1407137434.A.4F1","ckjmal","問題","指令的讀取時間限制",2014-08-04 15:30:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
這是R2OpenBUGS的套件，我想在DSS.sim那條指令上限制他的讀取時間，因為常常讀到
某條data的時候他就會當掉，然後一直停在那邊也不會顯示error，但我有算過每條
data的讀取時間大約是兩秒左右，所以想問問有沒有辦法可以限制讀取的時間


[程式範例]:
for(q in 1:1000){
Y <- YY[q,]
nsample<-ncol(Y);S<-s
data <- list(""Y"",""S"")
parameters <- c(""phi"")
DSS.sim <- bugs(data, inits=NULL, parameters, model.file=""rna.txt"",
n.chains=1, n.iter=10000)
compareMatrix[q,3] <- DSS.sim$phi
compareMatrix[q,4] <- DSS.sim$sd
}


[關鍵字]:
時間限制

--","R_Language"
"2457","M.1407123056.A.E54","gsuper","問題","PCoA 圖內的箭頭要怎麼畫?",2014-08-04 11:30:46,NA,NA,"假設我的 raw data 為 N x M matrix
where

N = features (N = 500)
M = samples  (M = 100)

進行計算 beta distance 後 (A M x M dissimilarity matrix)

套入 R::ade4::s.class() 作圖
－－－－－－－－－－－－－－－－－－－－－

現在我發現圖上有三群
我希望能加上三個方向的箭頭
分別為 feature 1~3 (三個群的代表性特徵)

請問有什麼方法可以計算這件事?
ade4 package 內有 function 可以用嗎?

--
我用名為真心的卡牌說服你
這是我最後一張牌

--","R_Language"
"2458","M.1406822943.A.914","celestialgod",NA,"Re: 有沒有可以快速呈現多重比較的MACRO?",2014-08-01 00:09:00,NA,NA,"不好意思，我之前忘記回您信了

我不知道是否有直接的方法做

我是直接寫一個function去做的

我知道您是初學者，但是很抱歉的

我所能做的就是奉上我的R code

您如果有任何問題可以再問我，謝謝

code:

# 資料生成
k = 4
n = 3:(k+2) * 100
set.seed(100)
mu = sample(seq(-3, 3, length = 100) * 1.5, k)
sigma = sample(seq(0.5, 10, length = 100), k)

y = unlist(lapply(1:k, function(i) rnorm(n[i], mu[i], sigma[i])))
group = unlist(lapply(1:k, function(i) rep(i, n[i])))
dat = data.frame(y, group)

# 以anova scheffe test為例
# 有很多變數的話，主要是更動scheffe.test第二個element
# 以及aov的公式input，要用paste做。
# 可以用names(dat)做input，前面再加個迴圈就好。
library(agricolae)
anova_result = aov(y ~ group, dat)
sheffe_test_result = scheffe.test(anova_result,
                        ""group"",group=FALSE,console=FALSE)
order_v = order(sheffe_test_result$means[,1])
comparison_result = sheffe_test_result$comparison

sig_level = 0.05
comparison_pairs = rownames(comparison_result)
sign_v = sapply(1:(k-1), function(j){
        pair = order_v[j:(j+1)]
        location = which(grepl(pair[1], comparison_pairs)
                            & grepl(pair[2], comparison_pairs))
        if(comparison_result$pvalue[location] < sig_level)
            return("">"")
        else
            return(""="")
})

output_v = paste(order_v[1:2], collapse = paste("""", sign_v[1], """"))
if(length(sign_v) > 1){
        for(i in 2:(k-1))
        output_v = paste(output_v, sign_v[i], order_v[i+1])
}
output_v
#  ""4 > 2 = 1 > 3""※ 引述《wanson (望生)》之銘言：: 在統計板有人提到可以像用R 將快速整理出多重比較: 如: 1 > 2 =3  之類的: 我寄信給那位網友，想跟他請教: 但沒有下文: 我沒有使用過R: 但想學習看看: 不知道板上的板友是否也會這個快速整理的方法: 不知道是否方便教導一下: 謝謝--","R_Language"
"2459","M.1406659651.A.070","celestialgod","問題","Re: 多個檔案合併 取聯集",2014-07-30 02:47:28,NA,NA,"後來想到更快的方法

library(data.table)
working_path = ""the directory of your file""
setwd(working_path)
file_list = dir()[grepl(""txt"", dir())]
dat_list = lapply(1:length(file_list), function(l){
    dat = fread(l, header = TRUE)
    dat = data.table(cate = row.names(dat), dat)
    dat
})

dat2 = rbindlist(dat_list)
output_table = dcast.data.table(dat2, name ~ day)

#    name day1 day2 day3
# 1:    A   23   77   NA
# 2:    B   45   NA   11
# 3:    C   NA   11   NA
# 4:    D  100   35   44
# 5:    E   NA   NA   55


--","R_Language"
"2460","M.1406516742.A.93C","ddtddt","問題","資料整理",2014-07-28 11:05:40,NA,NA,"[問題類型]:經驗諮詢(我想用R 請問大家的經驗)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
常常拿到的資料都很亂,自己平常沒事就用手動整理,超級沒效率.
目前想說也可以寫個字串比對慢慢整理,但覺得效率也不太好.
所以想請問大家遇到這樣的情況有沒有什麼比較好的方法.


最近有個資料大概長成以下這樣:(大得多就是,兩檔案的abcd不完全一致,順序不固定)
file 1     file 2
  A B C        D E
a 1 2 3      c 8 1
c 3 2 1      d 5 2
d 2 1 1      a 6 1
f 0 2 4      e 3 0
             g 2 1

想要整理成
  A B C D E
a 1 2 3 6 1
c .....
d .....
f 0 2 4 0 0
e 0 0 0 3 0
g 0 0 0 2 1

想問大家經驗上會怎麼處理,只要有關鍵字我可以自己去查範例.
謝謝~



--","R_Language"
"2461","M.1406478925.A.365","HeroNoah","問題","Re: data.table 改值",2014-07-28 00:35:24,NA,NA,"DT[, b2 := b]
DT[, b3 := b]
DT[a == ""A"", b3 := as.integer(2 * b)]
DT[a == ""B"", b3 := as.integer(3 * b)]
DT※ 引述《celestialgod (攸藍)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快):: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 最近在嘗試使用data.table跟dplyr，可是在資料整理上，: 我一直有個想找一個最簡單的寫法，: 我想要根據某一欄去創建一個新的變數，: 根據該欄的資訊，進行資料的新增，: 請看下面範例，我想要有類似sapply的寫法....: [程式範例]:: library(data.table): library(dplyr): DT = data.table(a=rep(LETTERS[c(1:5)],2),b=4:13): DT = mutate(DT, b2 = b): set(DT, i = which(DT$a == ""A""), j = ""b2"",:             value = as.integer(DT[which(DT$a == ""A"")]$b * 2)): set(DT, i = which(DT$a == ""B""), j = ""b2"",:             value = as.integer(DT[which(DT$a == ""B"")]$b * 3)): DT$b3 = sapply(1:nrow(DT), function(i){:   if(DT[i]$a == ""A""):     DT[i]$b = DT[i]$b*2:   else if(DT[i]$a == ""B""):     DT[i]$b = DT[i]$b*3:   else:     DT[i]$b: }): DT: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"2462","M.1406456070.A.482","celestialgod","問題","data.table 改值",2014-07-27 18:14:28,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

最近在嘗試使用data.table跟dplyr，可是在資料整理上，

我一直有個想找一個最簡單的寫法，

我想要根據某一欄去創建一個新的變數，

根據該欄的資訊，進行資料的新增，

請看下面範例，我想要有類似sapply的寫法....

[程式範例]:

library(data.table)
library(dplyr)
DT = data.table(a=rep(LETTERS[c(1:5)],2),b=4:13)
DT = mutate(DT, b2 = b)
set(DT, i = which(DT$a == ""A""), j = ""b2"",
            value = as.integer(DT[which(DT$a == ""A"")]$b * 2))
set(DT, i = which(DT$a == ""B""), j = ""b2"",
            value = as.integer(DT[which(DT$a == ""B"")]$b * 3))

DT$b3 = sapply(1:nrow(DT), function(i){
  if(DT[i]$a == ""A"")
    DT[i]$b = DT[i]$b*2
  else if(DT[i]$a == ""B"")
    DT[i]$b = DT[i]$b*3
  else
    DT[i]$b
})
DT

[關鍵字]:選擇性，也許未來有用--","R_Language"
"2463","M.1406361313.A.20B","Ceferino","問題","關於自定義函數",2014-07-26 15:55:07,NA,NA,"[問題類型]:程式諮詢[軟體熟悉度]:入門[問題敘述]:剛開始學習R 在Rstudio開發請問可以在同一個專案下使用不同.r檔案裡的自定義函數嗎?不太想函數全都塞在同一個檔案下開發...謝謝!!--","R_Language"
"2464","M.1406220987.A.534","celestialgod","心得","Re: sqldf效率問題",2014-07-25 00:56:24,NA,NA,"我最愛比速度了XDDD

新增dplyr跟plyr的比較

我來提供一個更快的，code如下：

N = 1e4
x <- data.frame(Freq=runif(N,0,1),Category=c(""T"",""F""))

library(data.table)
library(plyr)
library(dplyr)
library(sqldf)
x_dt = data.table(x)
setkey(x_dt, Category)
Cate_group_dt = group_by(x_dt, Category)
Cate_group_df = group_by(x_dt, Category)
library(rbenchmark)
benchmark(data_table = x_dt[, sum(Freq),by = Category],
          tapply = tapply(x$Freq, x$Category, FUN=sum),
                   sqldf = sqldf(""SELECT Category, sum(Freq) FROM x
                           GROUP BY Category""),
                  plyr_dt = aggregate(Freq ~ Category, data = x_dt, FUN=sum),
                  plyr_dt2 = ddply(x_dt, .(Category), colwise(sum)),
                  plyr_df = aggregate(Freq ~ Category, data = x, FUN=sum),
                  plyr_df2 = ddply(x, .(Category), colwise(sum)),
                  dplyr_dt = summarise(Cate_group_dt, sum(Freq)),
                  dplyr_df = summarise(Cate_group_df, sum(Freq)),
                  replications = 100,
                  columns=c('test', 'replications', 'elapsed','relative',
                  'user.self'), order='relative')

Result for N = 1e4:

        test replications elapsed relative user.self
2     tapply          100    0.07    1.000      0.08
1 data_table          100    0.10    1.429      0.09
8   dplyr_dt          100    0.14    2.000      0.14
9   dplyr_df          100    0.17    2.429      0.17
5   plyr_dt2          100    0.23    3.286      0.24
7   plyr_df2          100    0.23    3.286      0.23
3      sqldf          100    2.24   32.000      2.22
4    plyr_dt          100    2.61   37.286      2.60
6    plyr_df          100    3.88   55.429      3.88

# 這裡我多做幾次 tapply跟data.table其實有上有下，不分軒輊

Results for N = 1e6

        test replications elapsed relative user.self
9   dplyr_df           20    0.51    1.000      0.46
1 data_table           20    0.52    1.020      0.48
8   dplyr_dt           20    0.52    1.020      0.43
2     tapply           20    0.99    1.941      0.87
5   plyr_dt2           20    1.54    3.020      1.32
7   plyr_df2           20    1.56    3.059      1.35
3      sqldf           20   39.51   77.471     37.68
4    plyr_dt           20   66.23  129.863     65.17
6    plyr_df           20  102.23  200.451    101.37

Results for N = 1e7

        test replications elapsed relative user.self
5   dplyr_dt           20    4.83    1.000      4.03
6   dplyr_df           20    4.84    1.002      4.13
1 data_table           20    4.85    1.004      4.11
2     tapply           20    9.90    2.050      8.47
4   plyr_df2           20   15.90    3.292     12.98
3   plyr_dt2           20   16.01    3.315     13.01

資料不算太大時，data.table跟tapply算快，但是資料變大之後

dplyr跟data.table就差不多快。


接著測試如果有兩個group的話


N = 1e4
set.seed(100)
x <- data.frame(Freq=runif(N,0,1),Category=c(""T"",""F""),
        Category2 = sample(c(""T"",""F""), N, replace = TRUE))

library(data.table)
library(plyr)
library(dplyr)
library(sqldf)
x_dt = data.table(x)
setkey(x_dt, Category, Category2)
Cate_group_dt = group_by(x_dt, Category, Category2)
Cate_group_df = group_by(x_dt, Category, Category2)
library(rbenchmark)
benchmark(data_table = x_dt[, sum(Freq),by = key(x_dt)],
          tapply = tapply(x$Freq, list(x$Category, x$Category2), FUN=sum),
                  plyr_dt2 = ddply(x_dt, .(Category, Category2), colwise(sum)),
                  plyr_df2 = ddply(x, .(Category, Category2), colwise(sum)),
                  dplyr_dt = summarise(Cate_group_dt, sum(Freq)),
                  dplyr_df = summarise(Cate_group_df, sum(Freq)),
                  replications = 100,
                  columns=c('test', 'replications', 'elapsed','relative',
                    'user.self'),order='relative')

 Result for N = 1e4:

         test replications elapsed relative user.self
 2     tapply          100    0.06    1.000      0.06
 1 data_table          100    0.11    1.833      0.11
 5   dplyr_dt          100    0.17    2.833      0.18
 6   dplyr_df          100    0.17    2.833      0.17
 4   plyr_df2          100    0.40    6.667      0.41
 3   plyr_dt2          100    0.41    6.833      0.40

 Result for N = 1e6:

         test replications elapsed relative user.self
 1 data_table           20    0.39    1.000      0.33
 5   dplyr_dt           20    0.39    1.000      0.36
 6   dplyr_df           20    0.40    1.026      0.36
 2     tapply           20    1.13    2.897      1.03
 3   plyr_dt2           20    3.52    9.026      2.97
 4   plyr_df2           20    3.59    9.205      3.09

Result for N = 1e7:

        test replications elapsed relative user.self
1 data_table           20    3.70    1.000      3.42
6   dplyr_df           20    3.73    1.008      3.33
5   dplyr_dt           20    3.75    1.014      3.22
2     tapply           20   11.89    3.214     10.37
3   plyr_dt2           20   35.99    9.727     29.56
4   plyr_df2           20   36.72    9.924     30.32

結果同一個類別的情況。


最後，測試結果得知data.table真的很快!!!!

而且dplyr也很快，還可以直接搭配data.frame，我覺得算是更方便

至於plyr的ddply，我個人覺得寫起來比較順手，可是速度就沒預期快了。

My environment:[email<U+00A0>protected]16G ram※ 引述《kenshin528 (成立奧凶帝國!!)》之銘言：: 測試結果：: 當rows = 10,000時:           user  system elapsed: SQLDF     0.05    0.00    0.94: TAPPLY    0.00    0.00    0.34: --------------------------------: rows = 1,000,000::           user  system elapsed: SQLDF     2.30    0.03    4.34: TAPPLY    0.32    0.00    0.40: --------------------------------: row = 100,000,000::           user  system elapsed: SQLDF     288.77   31.00  505.11: TAPPLY    31.65    1.84   39.66: 實驗環境：: CPU intel i5 4200: RAM 8G--","R_Language"
"2465","M.1406179857.A.A1B","kenshin528","心得","sqldf效率問題",2014-07-24 13:30:54,NA,NA,"[關鍵字]:sqldf tapply

[重點摘要]:

剛開始學R的時候對於R的指令很不熟，所以大部分都習慣用sqldf來寫查詢指令
但是隨著對R的熟悉，最近也在嘗試用R內建的fnction來查詢資料
所以才想說來比較一下兩者的效能差異

實驗的DATA很簡單(大至長這樣，實驗方法就是增加row的數量)

Category FREQ

T        0.2
T        0.3
T        0.4
F        0.5
F        0.6
F        0.7

目的是依照category來sum FREQ
原始碼
#產生DATASET
x <- data.frame(Freq=runif(1000000,0,1),Category=c(""T"",""F""))

##測試SQL
ptm_sql <- proc.time()
result<-sqldf(""SELECT Category, sum(Freq)
       FROM x
       GROUP BY Category
      "")
ptm_sql <- proc.time() - ptm_sql
ptm_sql

##測試tapply
ptm_tapply <- proc.time()
result<-tapply(x$Freq, x$Category, FUN=sum)
ptm_tapply <- proc.time() - ptm_tapply
ptm_tapply

測試結果：

當rows = 10,000時
          user  system elapsed
SQLDF     0.05    0.00    0.94

TAPPLY    0.00    0.00    0.34
--------------------------------

rows = 1,000,000:
          user  system elapsed
SQLDF     2.30    0.03    4.34

TAPPLY    0.32    0.00    0.40
--------------------------------

row = 100,000,000:
          user  system elapsed
SQLDF     288.77   31.00  505.11

TAPPLY    31.65    1.84   39.66

沒做實驗前還不知道，SQLDF的效能和TAPPLY有那麼大的差異
不過這個實驗沒有考量到多個表格join的狀況就是了

實驗環境：
CPU intel i5 4200
RAM 8G


--
(C)lass        【 分組討論區 】11卡漫夢工廠   卡通, 漫畫, 動畫            [Ckmike]4C_J_Artist作家Σ日本漫畫家專區                 [Ckmike]10TakahasiShin作家◎****高橋真作品討論版****kenshin528http://bryannotes.blogspot.tw/行銷研究與資料分析筆記","R_Language"
"2466","M.1406163019.A.FFA","Wush978","分享","R 語言的工程面",2014-07-24 08:50:15,NA,NA,"[關鍵字]: R Engineering

[出處]:http://wush978.github.io/REngineering/[重點摘要]:

這裡簡單的描述我使用R 做出商業化系統時, 常常使用的一些Tips。

--","R_Language"
"2467","M.1405817491.A.691","rockken","問題","關於 R 介面問題",2014-07-20 08:51:28,NA,NA,"[問題類型]:經驗諮詢[軟體熟悉度]:使用者[問題敘述]:最近在讀關於  symbolic Data analysis 書籍，作者有提及一個免費使用且有開發團隊在更新此軟體 SODAS 2，但因為一些因素無法使用。而我平時也比較常用 R 再作資料處理，所以有上網找一下 R 是否有在進行這一類資料分析，我目前有找到的有 RSDA 、ISDA.R 、symbolicDA 等。而最令我好奇的是這投影片，http://ppt.cc/oiRt他好像是用 R 再分析，但她介面跟我不太一樣，不知有大大知道這是哪一套軟體嗎?謝謝----","R_Language"
"2468","M.1405574600.A.D2D","Watermelonnn","問題","Re: 如何以RS232讀入即時資訊",2014-07-17 13:23:16,NA,NA,"您可以考慮使用臺灣符式協會開發的 TTY For eForth
這是個掛載在 Chrome 上的工具。有完整的 HyperTerminal 工具https://chrome.google.com/webstore/detail/tty-for-eforth/dkbgcfcjbajlpblohlndijcdnhkfjcck?hl=zh-TW專門針對 Arduino 等相關嵌入式板子應用。開發者為陳爽，陳老師。

最近陳老師在進行與 R 語言系統結合的應用工作，如果有興趣，可以詢問臺灣符式推廣協會。


--","R_Language"
"2469","M.1405184762.A.1C5","celestialgod","分享","R資料比賽",2014-07-13 01:06:00,NA,NA,"運氣很好，在碩班最後一年還有機會參加到R的資料比賽

感謝主辦單位 中華R軟體研發暨應用協會 以及 中國醫藥大學

比賽網址如下：http://www.carra.org.tw/dm/比賽方式很簡單，跟我們統計諮詢課很類似

給我們一筆資料，我們自己找到想要研究的對象進行分析

我個人猜測資料是出自政府所推出的 不動產實價登錄系統

但是我們沒有實際去下載資料，不過網路上已經有人取得並公布我們手上的資料

我們今天查的結果是直到今日可供下載的資料筆數為76萬筆

我們手上拿到的資料為68萬筆，著實為不小的數目了

(更新：查詢之後，確實為政府實價登錄的公開資料 連結如下：http://plvr.land.moi.gov.tw/DownloadOpenData)


簡單介紹一下資料，資料為22個縣市不動產價格買賣紀錄，

不動產項目主要為五種，土地、建物、房地(土地+建物)、車位以及

房地(土地+建物)+車位，

每一筆資料基本上都有紀錄這筆資料共交易了幾筆土地、幾筆建物以及幾筆車位，

還有總售價、移轉總面積、土地總面積等28個變數(顯示欄位個數)。

簡單給大家看一下北市的資料：http://ppt.cc/PrKY可以看到其實各個欄位還有missing、人為錯誤或是不同房地產有不同的變數等情形

我認為很幸運的是這筆資料只有28個變數，我們選一個目標變數後

從27個變數中選擇可解釋的變數即可。

但是如前所述，這筆資料存在很多問題，

非常考驗每一個參賽隊伍對於資料的前處理功夫。


我們這組自信沒辦法對全部的不動產做Modeling，

我們果斷只選擇有含蓋建物的不動產資料做分析，

並且經過前處理資料得到下面18個變數，

變數名稱                        說明
單價(元/平方公尺)               原附載資料 (為我們的目標變數)
縣市                            每個縣市做一個indicator
土地移轉總面積(平方公尺)        原附載資料
使用分區或編定                  原附載資料
交易年月                        轉換為以民國1年1月為基準的計月資料
總層數                          原附載資料
建物型態                        原附載資料
主要建材                        轉為是否為鋼筋混凝土造
建物移轉總面積(平方公尺)        原附載資料
建物現況格局-房                 原附載資料
建物現況格局-廳                 原附載資料
建物現況格局-衛                 原附載資料
建物現況格局-格局               原附載資料
有無管理組織                    原附載資料
車位移轉總面積(平方公尺)        原附載資料
土地數目                        切割「交易筆棟數」的欄位
建物數目                        切割「交易筆棟數」的欄位
車位數目                        切割「交易筆棟數」的欄位

經過處理之後，我們不考慮有遺失值的資料(共刪除六千筆左右含有遺失值的資料)

剩下資料為47萬筆左右，我們對這47萬筆資料做log-linear model

估計方法有兩種，一為OLS，另一為group lasso，

而我們兩個模型最後的prediction error都介於0.19到0.22之間，

而且OLS的判定係數為61%左右，我個人以為我們這組做得還算不錯。


只可惜時間真的很短很短，從上午九點開始到下午四點，

我們瀏覽資料、討論、資料前處理以及決定目標變數之後，

就已經下午兩點半了，我們只利用一個小時做建模，真的非常趕....

我們R code利用K & R style，資料前處理大概花了兩頁半，

資料瀏覽(繪圖)花了一頁，最後建模用了一頁半。

最後，我想說的是big data遠不止如此，未來挑戰一定更多(嘆氣...

大家加油!!!! XD


結果討論：

我們還刪掉了近三分之一的資料，然後直接忽視遺失值，

直接考慮只有建物價格的模型，我個人覺得非常大膽，

如果有時間，其實可以再針對土地、車位做另一個模型做評估。

還請各位先進指教。

最後謝謝輔大提供如此優良的比賽場所，還有我優秀的隊友們!!!!希望可以去拿獎金回來XDD

[關鍵字]: R資料比賽


--","R_Language"
"2470","M.1405060837.A.933","gsuper","問題","Re: 多個檔案合併 取聯集",2014-07-11 14:40:20,NA,NA,"VAR <- list(NULL) ; x=1
VAR[[x]]<-data.frame(day1=c(23,45,100),names=c(""A"",""B"",""D"")) ; x=x+1
VAR[[x]]<-data.frame(day2=c(77,11,35) ,names=c(""A"",""C"",""D"")) ; x=x+1
VAR[[x]]<-data.frame(day3=c(11,44,55) ,names=c(""B"",""D"",""E"")) ; x=x+1

ROW <- sort(unique(as.character(sapply(VAR,function(s){s[,""names""]}))))
PLATE <- data.frame(rep(NA,length(ROW)),names=ROW)

res <- sapply(VAR,function(s){merge(PLATE,s,by=""names"",all=TRUE)[,3]})
res[is.na(res)] <- 0
rownames(res) <- ROW
colnames(res) <- sapply(VAR,colnames)[1,]


--
雲南神曲https://www.youtube.com/watch?v=8cJPxtpDqdU冰島神曲http://www.youtube.com/watch?v=OsY7UEOb2hM&list=PLBAA01FC041BADDC9雲南神曲2https://www.youtube.com/watch?feature=player_embedded&v=WsIotYyz1fU#at=187--","R_Language"
"2471","M.1405029045.A.390","Wush978","問題","Re: 多個檔案合併 取聯集",2014-07-11 05:50:31,NA,NA,"一般來說，合併data.frame(Table)有以下數種方法：

- Outer Join, 就是你所謂的取聯集
- Inner Join, 取交集
- Left Outer Join
- Right Outer Join
- Cross Join

在R中，都可以透過merge指令簡單完成

以下是一個簡單的Demo


```r
file_1 <- data.frame(
  name = c(""A"", ""B"", ""D""),
  day1 = c(23, 45, 100))

file_2 <- data.frame(
  name = c(""A"", ""C"", ""D""),
  day2 = c(77, 11, 35))

# inner join
# 只取交集
merge(x = file_1, y = file_2, by = ""name"")
```

```
##   name day1 day2
## 1    A   23   77
## 2    D  100   35
```

```r
# outer join
# 取聯集
merge(x = file_1, y = file_2, by = ""name"", all = TRUE)
```

```
##   name day1 day2
## 1    A   23   77
## 2    B   45   NA
## 3    D  100   35
## 4    C   NA   11
```

```r
# left outer join
# 把y 貼到 x
merge(x = file_1, y = file_2, by = ""name"", all.x = TRUE)
```

```
##   name day1 day2
## 1    A   23   77
## 2    B   45   NA
## 3    D  100   35
```

```r
# right outer join
# 把x 貼到 y
merge(x = file_1, y = file_2, by = ""name"", all.y = TRUE)
```

```
##   name day1 day2
## 1    A   23   77
## 2    D  100   35
## 3    C   NA   11
```

```r
# cross join
# 展開所有可能的組合
merge(x = file_1, y = file_2, by = NULL)
```

```
##   name.x day1 name.y day2
## 1      A   23      A   77
## 2      B   45      A   77
## 3      D  100      A   77
## 4      A   23      C   11
## 5      B   45      C   11
## 6      D  100      C   11
## 7      A   23      D   35
## 8      B   45      D   35
## 9      D  100      D   35
```

FYI

ps. reference:http://stackoverflow.com/questions/1299871/how-to-join-data-frames-in-r-inner-outer-left-right※ 引述《iterate (碎形)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 多個檔案合併時，取聯集。範例如下。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: file_1::    day1: A   23: B   45: D  100: file_2::    day2: A   77: C   11: D   35: file_3::    day3: B   11: D   44: E   55: 希望能合併成下表：:     day1    day2    day3: A    23      77       0: B    45       0      11: C     0      11       0: D   100      35      44: E     0       0      55: [程式範例]: 無:: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題:: [關鍵字]: 謝謝各位的幫忙。:: 選擇性，也許未來有用:

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2472","M.1404924954.A.CA5","kenshin528","問題","Re: 多個檔案合併 取聯集",2014-07-10 00:55:51,NA,NA,"這邊我是用""reshape""這個套件做的

file_1 <- data.frame(name=c(""A"",""B"",""D""),value=c(23,45,100),day=""day1"")
file_2 <- data.frame(name=c(""A"",""C"",""D""),value=c(77,11,35),day=""day2"")
file_3 <- data.frame(name=c(""B"",""D"",""E""),value=c(11,44,55),day=""day3"")
#首先我們需要重新整理一下資料型態，把資料變成

#file_1
#name  value day
#A     23    day1
#B     45    day1
#D     100   day1

#這樣的形態

x <- rbind(file_1,file_2,file_3)

#再來把三個資料合在一起
        name    day1    day
1       A       23      day1
2       B       45      day1
3       D       100     day1
4       A       77      day2
5       C       11      day2
6       D       35      day2
7       B       11      day3
8       D       44      day3
9       E       55      day3

library(""reshape"")
呼叫reshape套件

result<- cast(x,name~day,value=c(""value""))
#之後轉置DATA

#結果變這樣
        name    day1    day2    day3
1       A       23      77      NA
2       B       45      NA      11
3       D       100     35      44
4       C       NA      11      NA
5       E       NA      NA      55

應該也算符合您的需求吧 ?※ 引述《celestialgod (攸藍)》之銘言：: 大概寫了一下，長這樣，哪埵陸暋D，請務必告知我，謝謝: 其他大大或是有更好的方法，我用比較笨的方法硬幹QQ: working_path = ""the directory of your file"": setwd(working_path): file_list = dir()[grepl(""txt"", dir())]: dat_list = lapply(1:length(file_list), function(l){:     dat = read.table(l, header = TRUE):     dat = data.frame(cate = row.names(dat), dat):     dat: }): output_table = merge(dat_list[[1]], dat_list[[2]], by = ""cate"", all = TRUE): if(length(dat_list) >= 3): {:     for (i in 3:length(dat_list)):          output_table = merge(temp, dat_list[[i]], by = ""cate"", all = TRUE): }: output_table[which(is.na(output_table))] = 0: ※ 引述《iterate (碎形)》之銘言：: : ctrl + y 可以刪除一整行，請將不需要的內容刪除: : 文章分類提示:: : - 問題: 多個檔案合併時，取聯集。範例如下。: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 請把以下不需要的部份刪除: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 請簡略描述你所要做的事情，或是這個程式的目的: : file_1:: :    day1: : A   23: : B   45: : D  100: : file_2:: :    day2: : A   77: : C   11: : D   35: : file_3:: :    day3: : B   11: : D   44: : E   55: : 希望能合併成下表：: :     day1    day2    day3: : A    23      77       0: : B    45       0      11: : C     0      11       0: : D   100      35      44: : E     0       0      55: : [程式範例]: 無: [關鍵字]: merge, dir, grepl--","R_Language"
"2473","M.1404734080.A.91E","celestialgod","問題","Re: 加速模擬時的矩陣相乘",2014-07-07 19:54:38,NA,NA,"改寫之後可以快上200倍左右

(主要差異是Reduce跟apply的運算方式不同，可以自行google。)

如果可以利用C++，直接寫迴圈可以更快，這裡我就不獻醜了。

我用比較少的值做計算，如果是您的size的話，應該加速不止200倍

另外，其中 Fsim = F[m, ] + eps 我覺得您需要確定一下是否與您所想的相同


M  = 3
N     = 500
T     = 100
nSim  = 300  # 稍微減少一下
B     = matrix(rnorm(N * M), nrow = N)
F     = matrix(rnorm(M * T), nrow = M)
sigma = abs(rnorm(M))

t1 = Sys.time()
Z2 = lapply(1:M, function(m){
  eps = matrix(rnorm(nSim * T, 0, sigma[m]),  nrow = nSim)
  Fsim = t(apply(eps, 1, function(v) v + F[m,]))
  lapply(1:nSim, function(n)outer(B[,m], Fsim[n,]))
})
result2 = Reduce(function(x, y){
  lapply(1:length(x), function(i) x[[i]] + y[[i]])
}, Z2)
t2 = Sys.time()
t2 - t1

# Time difference of 0.2330141 secs

t1 = Sys.time()
Z = array(0, dim = c(M, nSim, N, T)) # preallocate
for (m in 1:M) {
  eps = rnorm(nSim * T, 0, sigma[m])#generaterandom normal
  dim(eps) = c(nSim, T)       # 變成 10000 x T
  Fsim = F[m, ] + eps
  for (n.path in 1:nSim) {
    Z[m,n.path,,] = as.matrix(B[,m]) %*% Fsim[n.path,]
  }
}
result = apply(Z, c(2,3,4), sum)
t2 = Sys.time()
t2 - t1

# Time difference of 52.60001 secs

如果要parallel，就library(snowfall)

可以參考拙作#1Hocf0cY (R_Language)※ 引述《kolun (...)》之銘言：: 我有一個模型Y = BF: 其中B是N x M, F是M x T的矩陣: 我要透過模擬F的變化10000次再組合回去得到模擬的Y: 但速度非常慢: 我現在的作法是: # data: M  = 3: N     = 500: T     = 100: nSim  = 10000: B     = matrix(rnorm(N * M), nrow = N): F     = matrix(rnorm(M * T), nrow = M): sigma = abs(rnorm(M)): Z = array(0, dim = c(M, nSim, N, T)) # preallocate: for (m in 1:M) {:   eps = rnorm(nSim * T, 0, sigma[m]) #generate random normal:   dim(eps) = c(nSim, T)               # 變成 10000 x T:   Fsim = F[m, ] + eps:   for (n.path in 1:nSim) {:     Z[m,n.path,,] = as.matrix(B[,m]) %*% Fsim[n.path,]:   }: }: result = apply(Z, c(2,3,4), sum): 其中第一步allocation就要大概3秒 (on macbook air 2013 mid): 產生亂數的時間好像還在預期中: 但是裡面這個for (npath in 1:10000) {...}的時間實在太久了: 我知道我現在的作法應該是最慢的: 想請教版上的各位大大有什麼方法可以提升速度呢?: 謝謝各位--","R_Language"
"2474","M.1404714852.A.D01","kolun","問題","加速模擬時的矩陣相乘",2014-07-07 14:34:09,NA,NA,"我有一個模型Y = BF
其中B是N x M, F是M x T的矩陣
我要透過模擬F的變化10000次再組合回去得到模擬的Y
但速度非常慢
我現在的作法是

# data
M  = 3
N     = 500
T     = 100
nSim  = 10000
B     = matrix(rnorm(N * M), nrow = N)
F     = matrix(rnorm(M * T), nrow = M)
sigma = abs(rnorm(M))

Z = array(0, dim = c(M, nSim, N, T)) # preallocate

for (m in 1:M) {
  eps = rnorm(nSim * T, 0, sigma[m])#generaterandom normal
  dim(eps) = c(nSim, T)               # 變成 10000 x T
  Fsim = F[m, ] + eps
  for (n.path in 1:nSim) {
    Z[m,n.path,,] = as.matrix(B[,m]) %*% Fsim[n.path,]
  }
}

result = apply(Z, c(2,3,4), sum)

其中第一步allocation就要大概3秒 (on macbook air 2013 mid)
產生亂數的時間好像還在預期中
但是裡面這個for (npath in 1:10000) {...}的時間實在太久了
我知道我現在的作法應該是最慢的
想請教版上的各位大大有什麼方法可以提升速度呢?
謝謝各位

--","R_Language"
"2475","M.1404705207.A.467","celestialgod","問題","Re: 多個檔案合併 取聯集",2014-07-07 11:53:24,NA,NA,"大概寫了一下，長這樣，哪埵陸暋D，請務必告知我，謝謝

其他大大或是有更好的方法，我用比較笨的方法硬幹QQ

working_path = ""the directory of your file""
setwd(working_path)
file_list = dir()[grepl(""txt"", dir())]
dat_list = lapply(1:length(file_list), function(l){
    dat = read.table(l, header = TRUE)
    dat = data.frame(cate = row.names(dat), dat)
    dat
})

output_table = merge(dat_list[[1]], dat_list[[2]], by = ""cate"", all = TRUE)
if(length(dat_list) >= 3)
{
    for (i in 3:length(dat_list))
         output_table = merge(temp, dat_list[[i]], by = ""cate"", all = TRUE)
}
output_table[which(is.na(output_table))] = 0※ 引述《iterate (碎形)》之銘言：:: ctrl + y 可以刪除一整行，請將不需要的內容刪除: 文章分類提示:: - 問題: 多個檔案合併時，取聯集。範例如下。:: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: file_1::    day1: A   23: B   45: D  100: file_2::    day2: A   77: C   11: D   35: file_3::    day3: B   11: D   44: E   55: 希望能合併成下表：:     day1    day2    day3: A    23      77       0: B    45       0      11: C     0      11       0: D   100      35      44: E     0       0      55: [程式範例]: 無:
[關鍵字]: merge, dir, grepl

--","R_Language"
"2476","M.1404703231.A.0A3","iterate","問題","多個檔案合併 取聯集",2014-07-07 11:20:26,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 多個檔案合併時，取聯集。範例如下。[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的file_1:

   day1
A   23
B   45
D  100


file_2:

   day2
A   77
C   11
D   35


file_3:

   day3
B   11
D   44
E   55


希望能合併成下表：

    day1    day2    day3
A    23      77       0
B    45       0      11
C     0      11       0
D   100      35      44
E     0       0      55

[程式範例]: 無張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題[關鍵字]: 謝謝各位的幫忙。選擇性，也許未來有用--","R_Language"
"2477","M.1404224173.A.5B0","Wush978","情報","Rth",2014-07-01 22:16:10,NA,NA,"[關鍵字]: Parallel computing

[重點摘要]:http://matloff.wordpress.com/2014/06/17/rth-a-flexible-parallel-computation-package-for-r/又有一個新的平行運算套件了！

有興趣的版友可以玩玩看

--","R_Language"
"2478","M.1404150894.A.D59","celestialgod","分享","Rcpp attributes",2014-07-01 01:54:52,NA,NA,"這次去南區統計演討會聽wush講到Rcpp新的API

我就等不及去嘗試了XDD

然後google一下

Rcpp Attributes提供了更簡單的方式去實作Rcpp

我在windows 7 64bit上的電腦 修改了兩個例子，並附上原文中的一個例子

提供給大家參考

例子：http://pastebin.com/eMM8yuWF補充： 關於效能...windows上，RcppArmadillo的blas是調用Rblas.dll，

而R原生的blas並不快，因此，windows上，RcppArmadillo速度並不快...

而RcppEigen是用Eigen自己的BLAS，因此速度較快。

(很少人會試圖在windows上重新compile Rblas.dll)

但是，相同的code移到linux，參考下列網址修改預設blas庫：http://tinyurl.com/p7bcldp速度會快非常多，若要更快，可以取得intel MKL，其在linux上有學術授權。

再補一個kernel Matrix + openmp 的例子：http://pastebin.com/X4jnRn4Akernel Matrix (a efficiency approach):http://pastebin.com/u5jqtc4h[關鍵字]: Rcpp, API, Atrributes

[出處]:http://cran.r-project.org/web/packages/Rcpp/vignettes/Rcpp-attributes.pdf[重點摘要]:

--","R_Language"
"2479","M.1404116519.A.82D","lovesnow1990","問題","想選擇特定變數做predict",2014-06-30 16:21:51,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

最近在跑實驗資料，想要做羅吉斯回歸

跑出結果後希望能只選擇Pvalue<0.05的自變數做為model
然後做predict

請問我要怎麼做呢?
因為現在只會把包含所有自變數的model丟下去predict

[程式範例]:http://ideone.com/e.js/QzUNJQ[關鍵字]:

predict choose variable

--如果我們要把磁鐵棒放進線圈，線圈會說「不!!不要過來!!」而發出阻力不讓磁鐵棒靠近。但是如果我們要把放進去的磁鐵棒從線圈拿走，「傲嬌是一種線圈反而會說「我…我又沒有叫你走!!」而發出阻力不讓磁鐵棒離開= =自然現象」這種現象不就是傲嬌嗎！！！新科科人雜誌所以傲嬌這東西根本不是新梗，19世紀就有科學家發現傲嬌了！／民明書房--","R_Language"
"2480","M.1402457122.A.50A","hl4","問題","RSQLite: database is locked",2014-06-11 11:25:18,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:
我讓一支程式更新sqlite database，同時，用r來讀取資料。
非同步執行時都很正常，但是同時執行會導致一些錯誤。> z <- dbGetQuery(conn = db, ""SELECT * FROM fftLog where ID = (SELECT MAX(ID)> FROM fftLog where tag = 'R2')"")Error in sqliteFetch(rs, n = -1, ...) :
  RSQLite driver: (RS_SQLite_fetch: failed first step: database is locked)

稍微瀏覽過sqlite lock mode的說明，sqlite可以同時進行一個寫入和多個讀取。
這個error應該可以避開，不過不知道應該怎麼以r實作。
謝謝。

[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--","R_Language"
"2481","M.1401789238.A.7FD","hl4","問題","如何以RS232讀入即時資訊",2014-06-03 17:53:55,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的目前我有一個設備是以rs232連接，他會持續傳送即時的數據。

我希望能夠以這些數據和計算結果，作即時繪圖。

不過，我目前還沒找到rs232相關的函式庫，也不知道還有哪些途徑作處理。

希望能得到建議，謝謝。

[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--","R_Language"
"2482","M.1401358774.A.1CC","celestialgod","問題","Re: for迴圈語法問題",2014-05-29 18:19:31,NA,NA,"※ 引述《peiwinds (Macchiato Caramel)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 今天我有1000個csv檔要input到R做處理: 已經使用list.files將這些檔案名稱讀取到一個 list裡面: 並且已經確定好第一次for迴圈要處理第1到第15個csv檔案: 第二次for想要處理 30:44之類的: 但是不曉得for迴圈裡面要怎麼寫: 之前有翻到書上寫類似 for (i in 1:10,33:44)) #這個寫法是錯誤的: 可是我印象很模糊，記不起來是怎麼寫的，臨時翻也翻不到: path <- ""D:/R/"": csv_list <- list.files(path=path, pattern=""*.csv"")n = 1000
step = 15
n_times = ceiling(n/step)
num_l = lapply(1:n_times, function(i) ((i-1)*step+1):(i*step) )
num_l[[n_times]] = num_l[[n_times]][num_l[[n_times]] <= n]
lapply(num_l, function(v){
    dat = lapply(csv_list[v], read.csv)
    # do something with dat #
})


--","R_Language"
"2483","M.1401356137.A.F15","peiwinds","問題","for迴圈語法問題",2014-05-29 17:35:33,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

今天我有1000個csv檔要input到R做處理

已經使用list.files將這些檔案名稱讀取到一個 list裡面

並且已經確定好第一次for迴圈要處理第1到第15個csv檔案

第二次for想要處理 30:44之類的

但是不曉得for迴圈裡面要怎麼寫

之前有翻到書上寫類似 for (i in 1:10,33:44)) #這個寫法是錯誤的

可是我印象很模糊，記不起來是怎麼寫的，臨時翻也翻不到
[程式範例]:

path <- ""D:/R/""
csv_list <- list.files(path=path, pattern=""*.csv"")
for (i in 1:10)){  ##這邊可以讓我開始讀取第1到第10個檔案
    TempData <- read.csv(paste(path,csv_list[i],sep=""""))
.
. #下略
.

}

程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--┐＊┐＊＊│    │   ╭──╮   ╭──╮＊╭──╮├──╯┘│┐＊│   │＊│◣◢│＊╮   ╭──┤＊╭┼─╯   ├──╯＊             █▌│    │   │＊│   │┐│┐＊    ◣S┘┘╰──╰   ╰──╯   ╰──╯--","R_Language"
"2484","M.1401326785.A.245","dppman","問題","Rprof()的正確用法？",2014-05-29 09:26:22,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)我目前的R Code中，有一段repeat要跑很久想用Rprof()去做Profiling，但是Rprof()該怎麼塞到Code裡才會抓到正確的資料了？另外，除了Rprof()，還有其他更好用的R Profiling tool嗎？[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:利用rhdfs讀取Hadoop HDFS檔案系統上的超大CSV擋[程式範例]:Sys.setenv(HADOOP_CMD=""/usr/lib/hadoop/bin/hadoop"")Sys.setenv(HADOOP_COMMON_LIB_NATIVE_DIR=""/usr/lib/hadoop/lib/native/"")Sys.setenv(HADOOP_STREAMING=""/usr/lib/hadoop-mapreduce/hadoop-streaming-2.2.0.2.0.6.0-101.jar"")library(rmr2);library(rhdfs);hdsf.init();f = hdfs.file(""/etl/rawdata/201111.csv"",""r"",buffersize=104857600);Rprof(tmp0528<-tempfile())repeat {m = hdfs.read(f)duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs""))print(length(m) /  duration)start.time <- Sys.time()Rprof() /*Rprof()放這正確嗎？還是要放repeat迴圈才是正確呢？}summaryRprof(tmp0528)[關鍵字]:Performance, Profiling, Debug--","R_Language"
"2485","M.1401124823.A.9D4","HeroNoah","問題","Re: movielens將電影類別分類",2014-05-27 01:20:21,NA,NA,"※ 引述《locka (locka)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 不曉得這裡有沒有人在玩movielens的資料？: 我從movielens 下載電影的資料 其中有一個叫做movies.dat的檔案: movielens 10M:: http://grouplens.org/datasets/movielens/: 經過我整理後存成一個三個欄位的data frame 如下：: ID      Title           Genres: 1       Toy Story       Adventure|Animation|Children|Comedy|Fantasy: 2       Jumanji         Adventure|Children|Fantasy: ...     ...             ...yourData: 電影的類型總共有18種 但上述Genres欄位只會顯示該電影的類型: 而我今天想要想要玩的是: 針對Genres這個欄位做類似購物籃分析的事情,找出哪些電影屬性相似: 也就是想要產生一個data frame紀錄電影類型的向量: 例如如果某部電影是動作片則動作片欄位值為1 反之為0: 最後想要產生的結果如下: ID      Adventure Animation Children Comedy Fantasy ......: 1       1         1         1        1      1       ......: 2       1         0         1        0      1       ......: ...     ...       ...       ...      ...    ...     ......: 我最初的想法是先為每種電影類型新增欄位 將其預設值設為0: 然後逐一比對genres欄位 如果有match則將值改為1: 不過當我輸入以下指令以後: movie <- data.frame(""ID""=movies$V1, ""Adventure"", ""Animation"",...): 欄位變成: ID  X.Adventure X.Animation X.children.....: 1  Action      Animation   Children: 2  Action      Animation   Children: ...: 不知道該如何下手...(搔頭): 亦或是有其他更好的作法也歡迎討論: 希望大家可以提點一下小的,感激不盡啊！After reading README file,
there are some helpful information of the data.



## Try It
genre = read.csv(
  file = ""u.genre"",
  header = FALSE,
  sep = ""|"",
  stringsAsFactors = FALSE
)

myData = read.csv(
  file = ""u.item"",
  header = FALSE,
  sep = ""|"",
  stringsAsFactors = FALSE
)
myData = within(
  data = myData,
  expr = rm(V2, V3, V4, V5)
)
colnames(myData) = c(""ID"", genre$V1)

## Merge Two Data Frames, If You Need
merge(yourData, myData, by = ""ID"")



--","R_Language"
"2486","M.1401089588.A.B1D","locka","問題","movielens將電影類別分類",2014-05-26 15:33:05,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的不曉得這裡有沒有人在玩movielens的資料？
我從movielens 下載電影的資料 其中有一個叫做movies.dat的檔案
movielens 10M:http://grouplens.org/datasets/movielens/經過我整理後存成一個三個欄位的data frame 如下：

ID      Title           Genres
1       Toy Story       Adventure|Animation|Children|Comedy|Fantasy
2       Jumanji         Adventure|Children|Fantasy
...     ...             ...

電影的類型總共有18種 但上述Genres欄位只會顯示該電影的類型

而我今天想要想要玩的是
針對Genres這個欄位做類似購物籃分析的事情,找出哪些電影屬性相似
也就是想要產生一個data frame紀錄電影類型的向量
例如如果某部電影是動作片則動作片欄位值為1 反之為0

最後想要產生的結果如下

ID      Adventure Animation Children Comedy Fantasy ......
1       1         1         1        1      1       ......
2       1         0         1        0      1       ......
...     ...       ...       ...      ...    ...     ......


我最初的想法是先為每種電影類型新增欄位 將其預設值設為0
然後逐一比對genres欄位 如果有match則將值改為1

不過當我輸入以下指令以後
movie <- data.frame(""ID""=movies$V1, ""Adventure"", ""Animation"",...)

欄位變成
ID  X.Adventure X.Animation X.children.....
1  Action      Animation   Children
2  Action      Animation   Children
...

不知道該如何下手...(搔頭)


亦或是有其他更好的作法也歡迎討論

希望大家可以提點一下小的,感激不盡啊！

--","R_Language"
"2487","M.1400812100.A.62F","dppman","問題","Re: 透過R使用Rhdfs package讀取超大CSV檔",2014-05-23 10:28:17,NA,NA,"※ 引述《Wush978 (拒看低質媒體)》之銘言：: ※ 引述《dppman (*^o^*)》之銘言：: : 我試了repeat：: : repeat {: :     m = hdfs.read(f): :     c = rawToChar(m): :     print(c): :     if ( is.null(c) ) break: : }: : 可是跑好久還沒跑完...: : 我是用Web版的RStudio開發，看了一下m的type是raw...: : Sorry..我只剩C還在腦中有，R實在跟他不熟....: : 不知道是否有人可以指點一下...，這樣的寫法是否OK？怎麼增加效能呢？: : Thanks in advance!: :: 建議你先測量一下throughput: ```r: start.time <- Sys.time(): repeat {:   m = hdfs.read(f):   duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs"")):   print(length(m) /  duration) # 每秒的bytes數:   start.time <- Sys.time(): }: ```: 先看一下hdfs.read的效能，如果throughput是1MB / s的速度的話: 20G 需要 20*2^30 / 2^20 秒，大約是5.6小時: ---: 也建議你另外量測一下hdfs fs -put 的頻寬，: 拿來和你在R 堶悸煽到的throughput做比較。: 兩者的差距是你可以在R 裡面優化的程度。: 所以如果兩者差不多快的話，其實你R 怎麼改也是這樣。: FYI測試了一下throughput：
在同要的主機（安裝RStudio Server的主機）：
Part I：
[[email<U+00A0>protected]~]# time hadoop fs -put /tmp/201303.csv /tmp/
real    3m5.876s
user    0m32.257s
sys     0m14.262s
[[email<U+00A0>protected]~]# ls -al /tmp/201303.csv
-rw-r--r-- 1 root root 8596758123 2014-05-23 09:54 /tmp/201303.csv
結果：大約在64086KB /sec

Part II:
用下列這段測試
 start.time <- Sys.time()
 repeat {
   m = hdfs.read(f)
   duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs""))
   print(length(m) /  duration) # 每秒的bytes數
   start.time <- Sys.time()
 }
結果：450KB/sec ~ 465KB/sec
[1] 464816.2
[1] 465376.1
[1] 464151.4
[1] 457809.4
[1] 456209.6
[1] 453534.4
[1] 454532.2
[1] 450441.2


差距很大@@@@
該怎麼優化呢？
Thanks in advance.

--","R_Language"
"2488","M.1400758955.A.557","ljta","問題","型別轉換？",2014-05-22 19:42:33,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

我遇到的問題如程式範例寫的那樣，想了解一下這是怎麼回事？

煩請對這部份熟悉原因的人指教。謝謝！

[程式範例]:> length(coefVec)^(1/3)[1] 32> as.integer(length(a)^(1/3))[1] 31> as.integer((32*32*32)^(1/3))[1] 31> as.integer(length(a))^(1/3)[1] 32

--","R_Language"
"2489","M.1400736744.A.C95","Wush978","問題","Re: 透過R使用Rhdfs package讀取超大CSV檔",2014-05-22 13:32:20,NA,NA,"※ 引述《dppman (*^o^*)》之銘言：: ※ 引述《dppman (*^o^*)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 使用R透過RHadoop的Rhdfs 1.0.8: : [程式範例]:: : 我目前的實驗環境，需要讀取很大的CSV File（存放在Hadoop的HDFS上，檔案大小幾乎: : 都大於20GB），: : 我使用了RHdoop的rhdfs R Package: : Ref.: : https://github.com/RevolutionAnalytics/RHadoop/wiki: : 使用Rstudio Web版開發，原始碼如下: : *************************************************************************************************: : Sys.setenv(HADOOP_CMD=""/usr/lib/hadoop/bin/hadoop""): : Sys.setenv(HADOOP_STREAMING=""/usr/lib/hadoop-mapreduce/hadoop-streaming-2.2.0.2.0.6.0-101.jar""): : Sys.setenv(HADOOP_COMMON_LIB_NATIVE_DIR=""/usr/lib/hadoop/lib/native/""): : library(rmr2);: : library(rhdfs);: : library(lubridate);: : hdfs.init();: : f = hdfs.file(""/bigdata/rawdata/201312.csv"",""r"",buffersize=104857600);: : m = hdfs.read(f);: : c = rawToChar(m);: : data = read.table(textConnection(c), sep = "","");: : *************************************************************************************************: : 讀完後，發現它只讀進了前一千五百多筆的資料，正確應該有一億多筆: : *************************************************************************************************: : 去Google了一下，有查到下列這個解的方向: : “rhdfs uses the java api for reading files stored in hdfs.: : That api will not necessarily read the entire file in one shot.: : It will return some number  of bytes for each read.: : When it reaches the end of the file it returns -1.: : In the case of rhdfs, and end of the file will return NULL.: : So, you need to loop on the hdfs.read call until NULL is returned”: : 不過看了rhdfs的手冊，並沒有仔細提到上面解法關於hdfs.read()的行為:<: : 不知道有人有這方面經驗嗎？: : [關鍵字]:: : R, Large Scale Data Set, Big Data, Hadoop, RHadoop, CSV, HDFS, rhdfs: : Thanks in advance!: 我試了repeat：: repeat {:     m = hdfs.read(f):     c = rawToChar(m):     print(c):     if ( is.null(c) ) break: }: 可是跑好久還沒跑完...: 我是用Web版的RStudio開發，看了一下m的type是raw...: Sorry..我只剩C還在腦中有，R實在跟他不熟....: 不知道是否有人可以指點一下...，這樣的寫法是否OK？怎麼增加效能呢？: Thanks in advance!:建議你先測量一下throughput

```r
start.time <- Sys.time()
repeat {
  m = hdfs.read(f)
  duration <- as.numeric(difftime(Sys.time(), start.time, unit = ""secs""))
  print(length(m) /  duration) # 每秒的bytes數
  start.time <- Sys.time()
}
```

先看一下hdfs.read的效能，如果throughput是1MB / s的速度的話
20G 需要 20*2^30 / 2^20 秒，大約是5.6小時

---

也建議你另外量測一下hdfs fs -put 的頻寬，

拿來和你在R 堶悸煽到的throughput做比較。

兩者的差距是你可以在R 裡面優化的程度。

所以如果兩者差不多快的話，其實你R 怎麼改也是這樣。

FYI

--","R_Language"
"2490","M.1400723354.A.C25","dppman","問題","Re: 透過R使用Rhdfs package讀取超大CSV檔",2014-05-22 09:49:11,NA,NA,"※ 引述《dppman (*^o^*)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]::: 入門(寫過其他程式，只是對語法不熟悉):: [問題敘述]:: 使用R透過RHadoop的Rhdfs 1.0.8: [程式範例]::: 我目前的實驗環境，需要讀取很大的CSV File（存放在Hadoop的HDFS上，檔案大小幾乎: 都大於20GB），: 我使用了RHdoop的rhdfs R Package: Ref.: https://github.com/RevolutionAnalytics/RHadoop/wiki: 使用Rstudio Web版開發，原始碼如下: *************************************************************************************************: Sys.setenv(HADOOP_CMD=""/usr/lib/hadoop/bin/hadoop""): Sys.setenv(HADOOP_STREAMING=""/usr/lib/hadoop-mapreduce/hadoop-streaming-2.2.0.2.0.6.0-101.jar""): Sys.setenv(HADOOP_COMMON_LIB_NATIVE_DIR=""/usr/lib/hadoop/lib/native/""): library(rmr2);: library(rhdfs);: library(lubridate);: hdfs.init();: f = hdfs.file(""/bigdata/rawdata/201312.csv"",""r"",buffersize=104857600);: m = hdfs.read(f);: c = rawToChar(m);: data = read.table(textConnection(c), sep = "","");: *************************************************************************************************: 讀完後，發現它只讀進了前一千五百多筆的資料，正確應該有一億多筆: *************************************************************************************************: 去Google了一下，有查到下列這個解的方向: “rhdfs uses the java api for reading files stored in hdfs.: That api will not necessarily read the entire file in one shot.: It will return some number  of bytes for each read.: When it reaches the end of the file it returns -1.: In the case of rhdfs, and end of the file will return NULL.: So, you need to loop on the hdfs.read call until NULL is returned”: 不過看了rhdfs的手冊，並沒有仔細提到上面解法關於hdfs.read()的行為:<: 不知道有人有這方面經驗嗎？:: [關鍵字]::: R, Large Scale Data Set, Big Data, Hadoop, RHadoop, CSV, HDFS, rhdfs:: Thanks in advance!我試了repeat：

repeat {
    m = hdfs.read(f)
    c = rawToChar(m)
    print(c)
    if ( is.null(c) ) break
}

可是跑好久還沒跑完...
我是用Web版的RStudio開發，看了一下m的type是raw...
Sorry..我只剩C還在腦中有，R實在跟他不熟....
不知道是否有人可以指點一下...，這樣的寫法是否OK？怎麼增加效能呢？

Thanks in advance!
　

--","R_Language"
"2491","M.1400591487.A.B46","IminXD","問題","eacf函數無法使用..",2014-05-20 21:11:21,NA,NA,"[問題敘述]:

載入了 TSA 包之後要跑 eacf 然後跑 coeftest 通通不行!!

裝了目前最新版的3.1.0，用64bit和32bit都無法

換一台舊版本3.0.2的電腦(還是我自己的電腦)，用64bit和32bit 也都無法


可是

同樣的程式碼和資料丟給別人，就可以= =


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題library(lmtest)
library(FitAR)  #用來跑timeplot的

data=read.csv(""我的資料.csv"")

pp=data[,19]
Timeplot<-function(x)
{layout(matrix(c(1,1,2,3),2,2,byrow=T))
ts.plot(ts(x,frequency=12,start=c(2002,1)),
main=""Time plot(名稱)"", ylab = ""log(pp)"")
plot(acf(x,plot=FALSE,30)[1:30],main=""ACF"")
plot(pacf(x,plot=FALSE,30)[1:30],main=""PACF"")
}
Timeplot(log(pp))
Timeplot(diff(log(pp)))

library(TSA)
eacf(diff(log(data[,19])))

fit=arima(log(data[,19]),order=c(0,1,1),seasonal=list(order=c(0,1,1),period=12))
coeftest(fit)

============================以下是回饋=======================

錯誤: 沒有這個函數 ""eacf""

錯誤: 沒有這個函數 ""coeftest""

--","R_Language"
"2492","M.1400551995.A.DFF","Pagan","問題","建置個人的R + Hadoop環境",2014-05-20 10:13:13,NA,NA,"文章分類提示:
- 問題: 想請問如果要建置個人學習使用的R + Hadoop環境, 請問推薦怎樣的組合呢?
        已在Win 7的cygwin上安裝Hadoop-0.20.2, 但發現似乎無法在cygwin上安裝R

[問題類型]:經驗諮詢: 對個人學習練習開發的環境上, 推薦什麼樣的組合呢?下班後自修學習用, 非專門開發者[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
1. 如果要建置個人學習使用的R環境, 請問推薦怎樣的組合呢?
2. 已在Win 7的cygwin上安裝Hadoop-0.20.2, 但發現似乎無法在cygwin上安裝R
3. 假如是在個人本機端開發R程式, 然後再丟到Amazon EMR上可行嗎?
   (想說花個小錢直接買個Amazon EMR省去安裝Hadoop的麻煩, 直接專注在R上)

想請問高手們有什麼建議嗎?

[程式範例]:[關鍵字]:--","R_Language"
"2493","M.1400472388.A.FDB","dppman","問題","透過R使用Rhdfs package讀取超大CSV檔",2014-05-19 12:06:23,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:使用R透過RHadoop的Rhdfs 1.0.8[程式範例]:我目前的實驗環境，需要讀取很大的CSV File（存放在Hadoop的HDFS上，檔案大小幾乎都大於20GB），我使用了RHdoop的rhdfs R PackageRef.https://github.com/RevolutionAnalytics/RHadoop/wiki使用Rstudio Web版開發，原始碼如下*************************************************************************************************Sys.setenv(HADOOP_CMD=""/usr/lib/hadoop/bin/hadoop"")Sys.setenv(HADOOP_STREAMING=""/usr/lib/hadoop-mapreduce/hadoop-streaming-2.2.0.2.0.6.0-101.jar"")Sys.setenv(HADOOP_COMMON_LIB_NATIVE_DIR=""/usr/lib/hadoop/lib/native/"")library(rmr2);library(rhdfs);library(lubridate);hdfs.init();f = hdfs.file(""/bigdata/rawdata/201312.csv"",""r"",buffersize=104857600);m = hdfs.read(f);c = rawToChar(m);data = read.table(textConnection(c), sep = "","");*************************************************************************************************讀完後，發現它只讀進了前一千五百多筆的資料，正確應該有一億多筆*************************************************************************************************去Google了一下，有查到下列這個解的方向“rhdfs uses the java api for reading files stored in hdfs.That api will not necessarily read the entire file in one shot.It will return some number  of bytes for each read.When it reaches the end of the file it returns -1.In the case of rhdfs, and end of the file will return NULL.So, you need to loop on the hdfs.read call until NULL is returned”不過看了rhdfs的手冊，並沒有仔細提到上面解法關於hdfs.read()的行為:<不知道有人有這方面經驗嗎？[關鍵字]:R, Large Scale Data Set, Big Data, Hadoop, RHadoop, CSV, HDFS, rhdfsThanks in advance!

--","R_Language"
"2494","M.1400316155.A.D46","waynecomm021",NA,"需要懂R的人幫忙解釋一小段晶片微陣列程式碼",2014-05-17 16:42:29,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別- 分享: 當你看到別人的心得時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)- 情報: 當你看到消息時，請使用這個類別。版主鼓勵你幫版友歸納重點(選擇性)- 心得: 當你自己想要分享經驗時，請使用這個類別。- 討論: 當你自己已經有答案，但是也想聽聽版友意見時問題

[問題類型]:程式諮詢意見調查(我對R 有個很棒的想法，想問問大家的意見)程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)程式諮詢

[軟體熟悉度]:入門請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)入門(寫過其他程式，只是對語法不熟悉)使用者(已經有用R 做過不少作品)開發者(有撰寫R 的套件經驗)新手

[問題敘述]:由於不是很懂R,麻煩懂的人幫我解釋一下最下面那段程式碼(每一行的設計意義),晶片的位置在這邊下載(http://www.ebi.ac.uk/arrayexpress/files/E-MEXP-569/E-MEXP-569.raw.1.zip)請簡略描述你所要做的事情，或是這個程式的目的[程式範例]:source(""http://bioconductor.org/biocLite.R"")biocLite(""affy"")
biocLite(""GeneNet"")
biocLite(""limma"")
biocLite(""tkWidgets"")
biocLite(""Biobase"")
biocLite(""AffyID2GeneID"")

source(""http://faculty.ucr.edu/~tgirke/Documents/R_BioCond/My_R_Scripts/GOHyperGAll.txt"")AffyID2GeneID(map =
""ftp://ftp.arabidopsis.org/home/tair/Microarrays/Affymetrix/affy_ATH1_array_elements-2010-12-20.txt"")

library(affy)
library(limma)
library(tkWidgets)
library(annaffy)
library(GeneNet)
------------
P_syr_avr<-ReadAffy(widget=TRUE)
-------------------------------
rma_P_syr_avr<-rma(P_syr_avr)
------------------------------

rep.day <- rep(c(""A"",""B""),4)
times <- sort(gl(4,2))
design <- model.matrix(~factor(times) + factor(rep.day))
colnames(design) <- c(as.character(1:4),""B"")
cont.matrix <- rbind(0,diag(3),0)

-------------------------------
fit <- lmFit(rma_P_syr_avr,design)

rma <- rma_P_syr_avr


-----------------f-p-value 值 ---DEG
fit2 <- contrasts.fit(fit, cont.matrix)

fit2 <- eBayes(fit2)

modF001 <- fit2$F.p.value[fit2$F.p.value<0.01]

modF025 <- fit2$F.p.value[fit2$F.p.value<0.025]

modF <- fit2$F.p.value

o <- order(modF)

which.A <- seq(1,7,2)

which.B <- seq(2,8,2)

x=cbind(rownames(exprs(rma)),fit2$F.p.value)

write(t(x),""d:/x.txt"",ncol=ncol(x),sep=""\t"")
-----------------f-p-value 值

x<-c()
count_i = length(modF001)
        for(count_j in  1: (count_i-1)){
                for(count_k in  (count_j+1): count_i){
                                        pcc <- cor(exprs(rma)[o[count_j],which.A],exprs(rma)[o[count_k],which.A])
                                        abs_pcc <- abs(pcc)
                                if(abs_pcc>0.95){
        x1<-c(AffyID2GeneID(affyIDs=rownames(exprs(rma))[o[count_j]]),
AffyID2GeneID(affyIDs=rownames(exprs(rma))[o[count_k]]), pcc)
        x<-rbind(x,x1)
                        }
                }
        }
write(t(x),""d:/481.txt"",ncol=ncol(x),sep=""\t"")



-



---------------------------請幫忙解釋以下這段--------------------------------------------

data<-read.table(""d:/x2.txt"",sep=""\t"")

head(exprs(rma))

probe1=as.character(data$V1)

exprs(rma)[rownames(exprs(rma))==probe1[3]]


x_481=numeric()
count_i = length(probe1)
        for(count_j in  1: count_i){
x_481 =rbind(x_481,c(exprs(rma)[rownames(exprs(rma))==probe1[count_j]]))
}
rownames(x_481)=probel[1:count_i]


library(GeneNet)


pcor.dyn <- ggm.estimate.pcor(t(x_481), method = ""dynamic"")

arth.edges <- network.test.edges(pcor.dyn,direct=TRUE)

arth.net <- extract.network(arth.edges, method.ggm=""number"", cutoff.ggm=1200)



nodePP=cbind(arth.net[,1],as.character(probe1[arth.net[,2]]),as.character(probe1[arth.net[,3]]))

write.table(nodePP,""d:/481.txt"")張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--","R_Language"
"2495","M.1400229195.A.703","koai","問題","Re: 如何找出不同檔案中兩個欄(column)重複值",2014-05-16 16:33:12,NA,NA,"不是很確定你想要什麼樣的結果
但是幫你寫了一個函數看看適不適用!
直接複製並執行看看:

vlookup <- function(arg1, arg2){

  arg1 <- as.character(arg1)
  arg2 <- as.character(arg2)
  count <- table(c(arg1,arg2))
  rep.elem <- names(which(count>1))

  tmp1 <- rep("""",length(arg1))
  tmp2 <- rep("""",length(arg2))
  tmp1[is.element(arg1,rep.elem)] <- ""repeat""
  tmp2[is.element(arg2,rep.elem)] <- ""repeat""

  arg1 <- data.frame(arg1,""rep""=tmp1)
  arg2 <- data.frame(arg2,""rep""=tmp2)
  list(arg1,arg2)

}

Arg1 <- sample(10,5)
Arg2 <- sample(15,10)
vlookup(Arg1,Arg2)※ 引述《fishily (小魚)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 請把以下不需要的部份刪除: 新手(沒寫過程式，R 是我的第一次):: [問題敘述]:: 想找出表格1的c欄以及表格2的D欄的重複值並標示: 在excel可以用vlookup的方式，那在R的話要用哪個指令呢: 我目前只找到compare(1$c,2$D)這個方式，不過他只會回傳一個TRUE或是FALSE: 跟我需要的結果有差異，請問要用哪個指令呢?: 感謝大家: [關鍵字]:尋找重複值--","R_Language"
"2496","M.1400223942.A.5AB","fishily","問題","如何找出不同檔案中兩個欄(column)重複值",2014-05-16 15:05:40,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:
想找出表格1的c欄以及表格2的D欄的重複值並標示

在excel可以用vlookup的方式，那在R的話要用哪個指令呢

我目前只找到compare(1$c,2$D)這個方式，不過他只會回傳一個TRUE或是FALSE
跟我需要的結果有差異，請問要用哪個指令呢?
感謝大家


[關鍵字]:尋找重複值


--","R_Language"
"2497","M.1400153352.A.9BD","andrew43","問題","Re: 篩選資料",2014-05-15 19:29:09,NA,NA,"※ 引述《silent910 (唉呀呀)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [問題敘述]:: 各位R使用者先進們: 我想請問一個問題，就是~~如果我有10筆資料(每筆有52週的價錢): 首先，把它變成10*52的矩陣: 而我想從這個矩陣，抽取26週的資料來做分析: 請問是用哪個function?: 範例：: 用52週太多了，先以10週好了，我要第1、3、5、7、9周來分析，或都隨機都可以: data price: a    10 20 15 10 14 25 30 26 15 16: b    8  12  5 15 26 14 22 30 20 23: c    14 15 12  5 12 15 18 16 25 14: 謝謝其實只是些基本的東西。
假設矩陣叫 M 好了。
M[c(1,2,3) , ] 就是切出前三列，M[ , c(1,2,3)] 就是切出前三欄。
所以把 M[ , x] 且 x 為欄位順序的數字向量就是你要的。

--http://apansharing.blogspot.com/--","R_Language"
"2498","M.1400150691.A.F31","warex14","問題","類似上三角矩陣",2014-05-15 18:44:49,NA,NA,"文章分類提示:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

對不起，當初問得太快了，以下補得詳細一點。

目前我有一個大概這得像這樣的矩陣(n x n)

a a a a a a ...a (n個)
b b b b b b ...b
c c c c c c ...c
...
...
...
n n n n n n ...n

我想要把它變成

0 0 0 0 0 0 ... a
0 0 0 0 0 0...b b
0 0 0 0 ... c c c
...
...
...
n n n n ... n n n



所以
我需要產生一個類似長得像這樣的矩陣

A=

0 0 0 0 ... 1
0 0 0 0...1 1
0 0...  1 1 1
...
...
...
1 1 1 1...1 1

我想要利用A來跟原本的矩陣相乘
這樣應該就可以得到我想要的矩陣


本來是想利用lower.tri()或是upper.tri()函式，但好像沒辦法得到像A這樣的矩陣
目前還想不出什麼好方法。



--","R_Language"
"2499","M.1400135569.A.105","silent910","問題","篩選資料",2014-05-15 14:32:46,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[問題敘述]:

各位R使用者先進們

我想請問一個問題，就是~~如果我有10筆資料(每筆有52週的價錢)

首先，把它變成10*52的矩陣

而我想從這個矩陣，抽取26週的資料來做分析

請問是用哪個function?

範例：

用52週太多了，先以10週好了，我要第1、3、5、7、9周來分析，或都隨機都可以

data price
a    10 20 15 10 14 25 30 26 15 16
b    8  12  5 15 26 14 22 30 20 23
c    14 15 12  5 12 15 18 16 25 14

謝謝


--","R_Language"
"2500","M.1399732849.A.B1D","Wush978","討論","徵求已會R, 想學C++/Rcpp的版友",2014-05-10 22:40:46,NA,NA,"大家好，

我上週五在公司有跟同仁介紹Rcpp：https://plus.google.com/events/ca8ige8c0m3brn03uvdq5ar4ga8目前覺得這樣用Hangout開課的方式可能可行，

所以在此徵求有興趣學Rcpp的朋友一同合作。

我打算每週三晚上教學一小時，

以Rcpp和數值計算的需求為主，

教一些C++的知識以及Rcpp的應用。

而和我合作的朋友需要幫忙對不清楚的地方發問。

事後hangout的影片會公開給其他有興趣學習的網友。

細節請有興趣合作的朋友再私底下和我聯絡。

Thanks,
Wush

--","R_Language"
"2501","M.1399630642.A.DA2","tai34","問題","Re: scatterplot3d 立體散佈圖""標點""",2014-05-09 18:17:20,NA,NA,"※ 引述《tai34 (tai)》之銘言：: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位先進好:: 小弟我用pca分析我的資料，想用PC1,PC2,PC3畫3D散佈圖之後做進一步的分析。: 假設資料如下:: w  PC1  PC2  PC3: 1   2    3    7: 2   5    4    8: 3   6    9    10: 指令如下:: scatterplot3d(PC1,PC2,PC3, pch=16,:              type=""h"", bio=par(""bio""), bg=par(""bg""), main=""3D Scatterplot""): 3D散佈圖畫出來了，但是我想要把散佈立體圖上每一個點加上w做標記，: 請問我的指令要補充甚麼?: 謝謝小弟在搜尋一下午找到答案，所以來自問自答一下。

library(scatterplot3d)
with(pca, {
 s3d <- scatterplot3d(PCA1, PC2, PC3,        # x y and z axis
        color=""blue"", pch=19,        # filled blue circles
        type=""h"",                # vertical lines to the x-yplane
        main=""3-D Scatterplot Example 3"",
    s3d.coords <- s3d$xyz.convert(PC1, PC2, PC3)
    # convert 3D coords to 2D projection
    text(s3d.coords$x, s3d.coords$y,             # x and y coordinates
    labels=row.names(pca),               # text to plot
    cex=.5, pos=4)           # shrink text 50% and place to right of points)
})

順便提供網址，如果有人需要可以參考一下。http://ppt.cc/FoK~--","R_Language"
"2502","M.1399609103.A.731","tai34","問題","scatterplot3d 立體散佈圖""標點""",2014-05-09 12:18:20,NA,NA,"程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位先進好:
小弟我用pca分析我的資料，想用PC1,PC2,PC3畫3D散佈圖之後做進一步的分析。
假設資料如下:

w  PC1  PC2  PC3
1   2    3    7
2   5    4    8
3   6    9    10

指令如下:
scatterplot3d(PC1,PC2,PC3, pch=16,
             type=""h"", bio=par(""bio""), bg=par(""bg""), main=""3D Scatterplot"")

3D散佈圖畫出來了，但是我想要把散佈立體圖上每一個點加上w做標記，
請問我的指令要補充甚麼?

謝謝


--","R_Language"
"2503","M.1399519601.A.AC2","koai","問題","Re: Area under curve/line",2014-05-08 11:26:38,NA,NA,"我猜測你需要自己手動
去調整threshold!!
package中的 thresh argument 似乎起不了作用!!
(或是我沒弄懂怎麼用... @@"")

auc(c(0,30,60),c(145,327,189),thresh=0)
auc(c(0,30,60),c(145,327,189),thresh=145)    ## 設定 thresh 沒起作用!!
auc(c(0,30,60),c(145,327,189)-145,thresh=0)  ## 手動設定 thresh 有作用!!

下面提供參考的程式碼:

T=c(0,30,60)
X=matrix(c(145,327,189,188,275,165,100,89,121,201,223,188),nrow=3)
rownames(X) <- paste(""T"",1:3,sep="""")
colnames(X) <- paste(""S"",1:ncol(X),sep="""")
t(X)
AUC = sapply(1:ncol(X),function(k){auc(c(0,30,60),X[,k]-X[1,k],thresh=0)})
AUC
[1] 6120.0000 2337.1717  206.7202  537.4380

##
## 此方法算出來的auc不知道為什麼也不精確?
## 不過誤差小於 0.1 看你是否可以接受!!
## 以下提供我手動硬刻的驗算程式碼:
##

AA=c()
for(k in 1:ncol(X)){
if( min(X[,k])==X[1,k] ){
  A = ( ( (X[2,]-X[1,])*(T[2]-T[1])+(X[2,]-X[1,]+X[3,]-X[1,] )*(T[2]-T[1]))/2 )[k]
}else{
  if( min(X[,k])==X[2,k] ){
    A = ( ( T[3]-( -(X[2,]-X[1,])/( (X[3,]-X[2,])/(T[3]-T[2]) )+T[2] ) )*( X[3,]-X[1,] )/2 )[k]
  }else{
    A = ( ( -(X[2,]-X[1,])/( (X[3,]-X[2,])/(T[3]-T[2]) )+T[2] )*( X[2,]-X[1,] )/2 )[k]
  }
}
AA[k]=A
}
AA
[1] 6120.0000 2337.1364  206.7188  537.4286

##
## 比較 AUC 和 AA 參考一下:
##> AUC[1] 6120.0000 2337.1717  206.7202  537.4380> AA[1] 6120.0000 2337.1364  206.7188  537.4286> AUC-AA[1] 9.094947e-13 3.535354e-02 1.482629e-03 9.445100e-03※ 引述《CKAXI (我不在...)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我在三個時間點做了三次測驗，想以第一次測驗的結果為基準計算三次測驗連線下: 的面積（若第三次的結果低於第一次的結果，則面積只計算至基準線和二三次結果: 交界處）: 我原本想使用""flux""package中的""auc""來計算，但是經過幾次測試發現其中: thresh這個argument好像怪怪的: http://artax.karlin.mff.cuni.cz/r-help/library/flux/html/auc.html: 不知道各位有沒有其它的方法可以解決原本的問題: [程式範例]:: 資料大略會是這樣，需要計算每位受試者的area under line: Subj T1(0) T2(30) T3(60): 1    145   327    189: 2    188   275    165: ...: [關鍵字]:--","R_Language"
"2504","M.1399472194.A.CF4","CKAXI","問題","Area under curve/line",2014-05-07 22:16:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我在三個時間點做了三次測驗，想以第一次測驗的結果為基準計算三次測驗連線下
的面積（若第三次的結果低於第一次的結果，則面積只計算至基準線和二三次結果
交界處）

我原本想使用""flux""package中的""auc""來計算，但是經過幾次測試發現其中
thresh這個argument好像怪怪的http://artax.karlin.mff.cuni.cz/r-help/library/flux/html/auc.html不知道各位有沒有其它的方法可以解決原本的問題


[程式範例]:
資料大略會是這樣，需要計算每位受試者的area under line
Subj T1(0) T2(30) T3(60)
1    145   327    189
2    188   275    165
...

[關鍵字]:

--","R_Language"
"2505","M.1399051740.A.5B3","HeroNoah","問題","Re: 取矩陣的非對角線元素之組合名稱",2014-05-03 01:28:58,NA,NA,"x = outer(
  colnames(M),
  rownames(M),
  paste,
  sep = ""-""
)
x[lower.tri(x)]

an = Row indexes of lower triangular part of a Matrix.

bn = Column indexes of lower triangular part of a Matrix.※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: ※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: : 標題: [問題] 取矩陣的非對角線元素之組合名稱: : 時間: Fri May  2 18:14:28 2014: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 使用者(已經有用R 做過不少作品): : [問題敘述]:: : 對於具有 colnames 和 rownames 的一個 matrix，: : 該如何取得所有非對角線元素的 colnames 和 rownames 的組合的字串向量？: : [程式範例]:: : M <- matrix(1:25, 5): : colnames(M) <- c(""a"",""b"",""c"",""d"",""e""): : rownames(M) <- c(""a"",""b"",""c"",""d"",""e""): : 可得到 M: : #  a  b  c  d  e: : #a 1  6 11 16 21: : #b 2  7 12 17 22: : #c 3  8 13 18 23: : #d 4  9 14 19 24: : #e 5 10 15 20 25: : 接下來，我想取得一個字串向量 mynames 使其結果為: : c(""b-a"" , ""c-a"", ""d-a"", ""e-a"", ""c-b"", ... , ""e-c"", ""e-d""): : 也就是矩陣 M 的左下側非對角線元素的列名與欄名組合。: : 請教有沒有什麼方式可以快速達成？: : 用 loop 是可以達成，但我想應該有更乾淨的辦法。: : --: : http://apansharing.blogspot.com/: : --: : → clickhere:cbind(rownames(M)[c(2:5,3:5,4:5,5)],rep(colnames(M),  05/02 20:48: : → clickhere:,c(4,3,2,1))                                          05/02 20:49: : → clickhere:paste by row with sep=""-""                             05/02 20:49: 謝謝 clickhere 版友。: 我的這個問題之核心其實可以抽象化為如何產生以下二組數列：:   an = 2,3,4,...,N, 3,4,...,N, 4,...,N,  ....,  N-2, N-1,N, N: 以及:   bn = 連續 N-1 個 1, 連續 N-2 個 2, ... 連續 N-(N-1) 個 N-1，以及尾巴一個 N。: 假如 N 很小，按 clickhere 板友的方法可行，: 但我的 dim(M) 可能不是定值且可能很大，: 不知道有沒有什麼方式可以以 length(N) 為引數產生 an 及 bn？--","R_Language"
"2506","M.1399036807.A.21D","andrew43","問題","Re: 取矩陣的非對角線元素之組合名稱",2014-05-02 21:20:03,NA,NA,"※ 引述《andrew43 (討厭有好心推文後刪文者)》之銘言：: 標題: [問題] 取矩陣的非對角線元素之組合名稱: 時間: Fri May  2 18:14:28 2014:: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品):: [問題敘述]:: 對於具有 colnames 和 rownames 的一個 matrix，: 該如何取得所有非對角線元素的 colnames 和 rownames 的組合的字串向量？:
:: [程式範例]:: M <- matrix(1:25, 5): colnames(M) <- c(""a"",""b"",""c"",""d"",""e""): rownames(M) <- c(""a"",""b"",""c"",""d"",""e""): 可得到 M: #  a  b  c  d  e: #a 1  6 11 16 21: #b 2  7 12 17 22: #c 3  8 13 18 23: #d 4  9 14 19 24: #e 5 10 15 20 25:: 接下來，我想取得一個字串向量 mynames 使其結果為: c(""b-a"" , ""c-a"", ""d-a"", ""e-a"", ""c-b"", ... , ""e-c"", ""e-d""): 也就是矩陣 M 的左下側非對角線元素的列名與欄名組合。: 請教有沒有什麼方式可以快速達成？: 用 loop 是可以達成，但我想應該有更乾淨的辦法。:
:: --: http://apansharing.blogspot.com/:: --","R_Language"
"2507","M.1399025671.A.44D","andrew43","問題","取矩陣的非對角線元素之組合名稱",2014-05-02 18:14:28,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
對於具有 colnames 和 rownames 的一個 matrix，
該如何取得所有非對角線元素的 colnames 和 rownames 的組合的字串向量？


[程式範例]:
M <- matrix(1:25, 5)
colnames(M) <- c(""a"",""b"",""c"",""d"",""e"")
rownames(M) <- c(""a"",""b"",""c"",""d"",""e"")
可得到 M
#  a  b  c  d  e
#a 1  6 11 16 21
#b 2  7 12 17 22
#c 3  8 13 18 23
#d 4  9 14 19 24
#e 5 10 15 20 25

接下來，我想取得一個字串向量 mynames 使其結果為
c(""b-a"" , ""c-a"", ""d-a"", ""e-a"", ""c-b"", ... , ""e-c"", ""e-d"")
也就是矩陣 M 的左下側非對角線元素的列名與欄名組合。
請教有沒有什麼方式可以快速達成？
用 loop 是可以達成，但我想應該有更乾淨的辦法。


--http://apansharing.blogspot.com/--","R_Language"
"2508","M.1399022485.A.0BF","johnny4901","情報","資料分析PK賽榮耀登場，日賺十萬不是夢！",2014-05-02 17:21:22,NA,NA,"您是資料分析的佼佼者嗎？

想要證明自己處理資料的能力嗎？免報名費、最高可獲得新台幣10萬元獎金！！不要猶豫了，

快呼朋引伴組隊報名，奪下王牌資料分析團隊的稱號吧！！參賽資格1. 全國各大專院校之大學、碩士班學生及在職專班學生(含本學期畢業者)，
   一隊限定2~5人，不限科系、年級，只要對資料分析有興趣者皆可組隊參加。

2. 可跨系組隊，但不得跨校，不得跨隊參加。

3. 報名後不得更換成員。使用軟體以R程式為主，亦可使用R-web(http://www.r-web.com.tw)分析資料。

具備參賽資格後，將以E-mail提供一組帳號給參賽隊伍於賽前練習使用，

此組帳號可使用至該隊伍比賽結束。

比賽當天亦提供Windows單機試用版(使用介面與網路版相同)，

參賽隊伍可擇一方法於比賽時使用。報名時間即日起至2014年6月10日開放報名，名額上限40隊，額滿為止、報名從速！免報名費，每隊僅需參賽保證金新台幣1,000元，於初賽當天完賽後退還。更多的訊息請至活動網頁 http://www.carra.org.tw/dm/若有其他相關問題，請洽資料分析競賽籌備小組聯絡專線：(02)2737-5442, (02)2735-8254 曾小姐E-mail：[email<U+00A0>protected]##########################################################################
#  主辦單位：中華R軟體研發暨應用協會、中國醫藥大學                       #
#  協辦單位：中華機率統計協會、中華資料採礦協會、                        #
#            世新大學數量方法研究暨發展中心、臺北醫學大學生物統計中心、  #
#            典通股份有限公司、淡江大學統計學系、輔仁大學統計資訊學系、  #
#            台灣析數資訊股份有限公司、銘傳大學應用統計資訊學系          #
##########################################################################

--","R_Language"
"2509","M.1398875526.A.1E4","blacklove","問題","橫縱向的資料轉換",2014-05-01 00:32:02,NA,NA,"不好意思，請教一下版上同學：

由於工作的關係，常常會碰到像下面這樣的資料型態

City    Score
a       3
b       3
e       2
a       4
e       5
b       1
b       3
a       5

但是為了在excel上跑統計分析，
不知道有沒有辦法能在R當中將資料轉換成，
a       b       e
3       3       1
4       3       5
5       1       5

這樣的型態，
因為資料的城市多達50幾筆，如果一個一個用手動的，
真的很累人，不知道有沒有比較方便的方法呢？
謝謝大家！




--","R_Language"
"2510","M.1398869679.A.E9B","ddtddt","問題","bargraph.CI 畫confidence interval",2014-04-30 22:54:37,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門~使用者

[問題敘述]:
想用這個pakage畫barchart with confidence interval
內建的預設值是一倍的標準差
想更改信賴區間的大小，查了default卻發生不能跑的問題
上網查發現有其他人也有同樣問題卻沒辦法得到解答
錯誤的訊息很怪是跟括號有關，但卻沒有括號的問題才是。

[程式範例]:

bargraph.CI(x.factor = dose, response = len, data = ToothGrowth

這樣可以跑預設的一倍標準差

但是改成以下就不行了
bargraph.CI(x.factor = dose, response = len, data = ToothGrowth,
            fun=function(x) mean(x, na.rm=TRUE),
            ci.fun=function(x) c(mean(x)- 1.96*sd(x), mean(x)+1.96*sd(x))
             )



--","R_Language"
"2511","M.1398852025.A.D35","andrew43","問題","Re: lack of fit for multiple regression",2014-04-30 18:00:21,NA,NA,"y <- c(8,13,12,11,9,8,7,13,11,13)
x1 <- c(-1,-1,-1,-1,1,1,1,1,0,0)
x2 <- c(-1,1,1,1,-1,-1,-1,1,0,0)
m.f <- lm(y~x1+x2)
m.r <- lm(y~factor(x1):factor(x2))
anova(m.f, m.r)

最後一列即為所求。

重點就在於 m.r 的自變項是一個「所有 x1 與 x2 的組合」。
在 R 中的 formula 採取「:」字符有相同功能。
如果不夠直白的話，可以看看以下的操作，結果是一樣的。

x12 <- paste(x1, x2, sep=""&"")
m.r1 <- lm(y~factor(x12))
anova(m.f, m.r1)※ 引述《DrRd (就這樣吧)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 用R來執行多元迴歸的lack of fit test: 在網路上找到的方法是單迴歸用的，多元迴歸不知道怎麼做: [程式範例]:: reduce.mod = lm(y ~ x): full.mod = lm(y ~ 0 + as.factor(x)): anova(reduce.mod, full.mod): 但多元迴歸不能把full.mod寫成 lm(y ~ 0 + as.factor(x1) + as.factor(x2)): 這樣出來的自由度是錯的: [關鍵字]::: lack of fit:

--http://apansharing.blogspot.com/--","R_Language"
"2512","M.1398847090.A.37B","DrRd","問題","lack of fit for multiple regression",2014-04-30 16:38:07,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
用R來執行多元迴歸的lack of fit test

在網路上找到的方法是單迴歸用的，多元迴歸不知道怎麼做

[程式範例]:
reduce.mod = lm(y ~ x)
full.mod = lm(y ~ 0 + as.factor(x))
anova(reduce.mod, full.mod)

但多元迴歸不能把full.mod寫成 lm(y ~ 0 + as.factor(x1) + as.factor(x2))
這樣出來的自由度是錯的

[關鍵字]:lack of fit--","R_Language"
"2513","M.1398669442.A.562","ebullient","問題","R presentation產生PDF和其他style",2014-04-28 15:17:19,NA,NA,"[問題類型]:Rstudio介面

[軟體熟悉度]:入門

[問題敘述]:
請問如何用R presentation產生PDF檔

還有用R presentation產生的html如何改syntax style

請厲害的前輩們幫幫忙 感謝!


--","R_Language"
"2514","M.1398221081.A.778","rey123123","問題","複製data.table後，改column name",2014-04-23 10:44:39,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門~使用者

[問題敘述]:
各位好，我在使用data.table 的setnames function發現一個問題。
假設我有一個data.table: a 我讓b=a之後用setnames去改b的column names
結果a也會一起被改動。有辦法避免嗎? (因為a,b的rows都很多，原則上不希望用
names(b)去改b的column names)


[程式範例]:

library(data.table)
a=data.table(rr=1)
b=a
setnames(b,""rr"",""tt"")
print(b)
print(a)

--","R_Language"
"2515","M.1398133408.A.355","psinqoo","問題","quantmod",2014-04-22 10:23:25,NA,NA,"問題 圖跑不出[問題類型]:程式諮詢[軟體熟悉度]:入門[問題敘述]:是不是資料格式錯誤? 還是其他方面有問題?barChart 畫不出來 其他的也無法畫出底下是資料格式讀入 .csv資料格式 如下Date          Open    High    Low     Close   Volume2013/1/2        13257   13289   13162   13194   1683532013/1/3        13195   13198   13055   13055   2424572013/1/4        13050   13100   13005   13079   2562152013/1/7        13085   13128   13025   13126   228488[程式範例]:euo=read.csv(file.choose())head(euo)library(quantmod)barChart(euo)出現Error in try.xts(x, error = ""chartSeries requires an xtsible object"") :chartSeries requires an xtsible objectquantmod
xts--","R_Language"
"2516","M.1397786141.A.213","andrew43","問題","Re: 一次讀入多個csv file",2014-04-18 09:55:38,NA,NA,"※ 引述《peiwinds (Macchiato Caramel)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 語法不太熟: [問題敘述]:: 最近因為要處理的資料很多，想一次讀入多個csv檔 (數十個到數百個都有): 並且將這些檔案已 data frame的方式 rbind起來: 下面第一個是我在 stackoverflow看人家分享拿來用的: 第二個是我自己後來寫的: [程式範例]:: 1.: temp <- do.call(rbind, lapply(list.files(path=""."", pattern=""*.csv""),: read.table, header=TRUE, sep="","")): # 方法一的問題在於他的path我無法指定我要的目錄 例如 D:/test 目錄: # 該目錄中明明有csv檔，但是卻會出現錯誤訊息如下: # Error in file(file, ""rt"") : cannot open the connectionlist.files(path=""."") 就是取得工作目錄的檔案名，
所以你需要切換工作目錄，或是修正 path=""""。
你看看 list.files(path=""D:/test"") 看看就明白了。: # 當然如果我把資料都丟在環境目錄下，當然是都讀得到也不會有問題: # 因此我便寫了第2種: 2.: path <- ""D:/test/"": files <- list.files(path=path, pattern=""*.csv""): bindtemp <- data.frame(): temp <- data.frame(): for (file in files) {:     bindtemp <- read.csv(paste(path,file,sep="""")):     temp <- rbind(temp,bindtemp): }: # 想問的是第一種的寫法為什麼不能指定目錄: # 第二個只是丟上來跟大家分享，看有什麼什麼改進的空間XD第二種其實沒什麼問題，功能是一樣的，只是看起來沒有比較神而已啦。: [關鍵字]:: 讀入多個外部檔案--http://apansharing.blogspot.com/--","R_Language"
"2517","M.1397785365.A.6AD","peiwinds","問題","一次讀入多個csv file",2014-04-18 09:42:42,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
語法不太熟

[問題敘述]:
最近因為要處理的資料很多，想一次讀入多個csv檔 (數十個到數百個都有)
並且將這些檔案已 data frame的方式 rbind起來
下面第一個是我在 stackoverflow看人家分享拿來用的
第二個是我自己後來寫的

[程式範例]:

1.

temp <- do.call(rbind, lapply(list.files(path=""."", pattern=""*.csv""),
read.table, header=TRUE, sep="",""))

# 方法一的問題在於他的path我無法指定我要的目錄 例如 D:/test 目錄# 該目錄中明明有csv檔，但是卻會出現錯誤訊息如下
# Error in file(file, ""rt"") : cannot open the connection
# 當然如果我把資料都丟在環境目錄下，當然是都讀得到也不會有問題

# 因此我便寫了第2種

2.
path <- ""D:/test/""
files <- list.files(path=path, pattern=""*.csv"")

bindtemp <- data.frame()
temp <- data.frame()
for (file in files) {
    bindtemp <- read.csv(paste(path,file,sep=""""))
    temp <- rbind(temp,bindtemp)
}

# 想問的是第一種的寫法為什麼不能指定目錄
# 第二個只是丟上來跟大家分享，看有什麼什麼改進的空間XD[關鍵字]:讀入多個外部檔案--","R_Language"
"2518","M.1397748306.A.198","celestialgod","問題","Re: 重複組合",2014-04-17 23:25:04,NA,NA,"不想打十次就用一些取巧的方法...

x = 0:5; d = 10
str = paste(rep(""x"",d), collapse = "","")
M = eval(parse(text=paste0(""expand.grid("", str, "")"")))
a = M[rowsum(M)==5, ]

只是這樣的做法有 效能跟記憶體瓶頸

要有更有效率的做法要找package...

不過這種方法在d小的時候非常快XDDD

PS: 取subset可以參考前面幾篇有關data.table的討論※ 引述《swedrf0112 (M)》之銘言：: 文章分類提示:問題: [問題類型]:程式諮詢: [軟體熟悉度]:入門: [問題敘述]:: 想要寫一個重複組合的程式，可以將所有可能的結果列出來: 例如: 求x+y+z=25的正整數解: 我能想到的就只有利用3個for及if即可把所有可能全部列出來: 但我需要的是給定n個x，以及加總的數目，即以下狀況：: x1+x2+...+xn=k，因此若用for的話會有n個for。: 使用for及if的程式如下:: q=0: result=matrix({0},nrow=351,ncol=3): for ( i in 0:25 ): {:   for ( j in 0:25 ):   {:     for (k in 0:25 ):     {:       if( i+j+k==25 ):       {:         q=q+1:         result[q,]=c(i,j,k):       }:     }:   }: }: 另外一問，有方法將新列出的可能自動加進新列嗎?: 這樣就不需給定nrow的值了XD: 謝謝各位!: [關鍵字]:重複組合--","R_Language"
"2519","M.1397721100.A.5A9","swedrf0112","問題","重複組合",2014-04-17 15:51:37,NA,NA,"文章分類提示:問題

[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:

想要寫一個重複組合的程式，可以將所有可能的結果列出來
例如: 求x+y+z=25的正整數解

我能想到的就只有利用3個for及if即可把所有可能全部列出來
但我需要的是給定n個x，以及加總的數目，即以下狀況：
x1+x2+...+xn=k，因此若用for的話會有n個for。

使用for及if的程式如下:

q=0
result=matrix({0},nrow=351,ncol=3)
for ( i in 0:25 )
{
  for ( j in 0:25 )
  {
    for (k in 0:25 )
    {
      if( i+j+k==25 )
      {
        q=q+1
        result[q,]=c(i,j,k)
      }
    }
  }
}

另外一問，有方法將新列出的可能自動加進新列嗎?
這樣就不需給定nrow的值了XD

謝謝各位!

[關鍵字]:重複組合

--","R_Language"
"2520","M.1397298816.A.565","jk78346","問題","執行自訂函式後全域變數被覆蓋",2014-04-12 18:33:22,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我寫了一個自訂的函式要解決missing array的問題，可以選用幾種剛學會的演算法
如knn，輸出的部分也可選用哪一種index，如NRMSE。
我發現當我執行這個函式後，他會蓋掉呼叫他的script裡的全域變數與source()進來
的其他函式

是不是當一個script source兩個有同樣參數形式的自訂函式就會蓋掉前一個?



[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題source('do_NRMSE.r')#裡面有do_NRMSE函式source('do_BLCI,r')#裡面有do_BLCI函式#此時我的全域環境裡已經沒有do_NRMSE函式了ans<-...m<-...method<-...do_NRMSE(ans,m,method)do_BLCI(ans,m,method)程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/[關鍵字]:選擇性，也許未來有用--","R_Language"
"2521","M.1397134244.A.20F","z5f","問題","Re: R 作圖 刻度 位數",2014-04-10 20:50:41,NA,NA,"我的資料向量是ts

 max(ts);min(ts)
[1] 453398
[1] -254145

最大值在40多萬 最小值在-25萬

---

假設我想要讓它的y軸從-500000到500000 而且必須用字串避免我原來的問題的話

一開始的座標軸不能畫出 (也就是設axes=F)

但還是要規定軸的最小最大值 (ylim=c(-500000,500000))

否則R的自訂座標軸並沒有包含-500000與500000 所以這兩個數字不會標出。

也就是
plot(ts, type='l', las=1, axes=FALSE, ylim=c(-500000,500000))

之後再
axis(2,at=c(-500000,100000,500000),c(""-500000"",""100000"",""500000""))

即得。

--","R_Language"
"2522","M.1397032714.A.7D1","swedrf0112","問題","兩個R同時跑",2014-04-09 16:38:31,NA,NA,"[問題類型]:其他

[軟體熟悉度]:入門

[問題敘述]:

請問有辦法在同一台電腦上，一個視窗開著R跑simulation，
另外一個視窗用R作其他事情嗎?

因為今天發現開新的R，好像記憶體還是存在另外一邊正在跑simulation的值
怕使用清空記憶體會影響另外一個視窗的R，因此就沒使用了。

我同學是說可以用兩個版本的R就不會互相衝突，請問是對的嗎?

謝謝~


--","R_Language"
"2523","M.1397031377.A.8A7","adgjlsfhk123","分享","Re: R & Encoding",2014-04-09 16:16:14,NA,NA,": > 這幾天都在用R做text mining: > 我能請問一下簡單的問題就是: > 用Ｒ匯入含有unicode中文的csv 或excel檔: > 怎麼樣匯入才能正確呢？: > 我試了 odbc, iconv, 或者是在read.csv內用encoding＝‘UTF-8’: > 都無法解決: ```: # 他後來找到的解決辦法: excel另存csv後 在csv用文字編輯另存成Utf-8: 然後匯入read.csv內 encoding=""utf-8"" 就能正確讀入了感謝wush大的分享，我有試著做這個方法，沒成功

後來發現是要設定 Sys.setlocale(,""CHT"")

供大家參考~


--","R_Language"
"2524","M.1397025311.A.3BE","z5f","問題","R 作圖 刻度",2014-04-09 14:35:08,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我現在要畫一個時間序列圖，但y軸的數字最大也才6位數，

R會把它變成-2e+05 一直到 4e+05

想請問要怎麼在plot裡要怎麼改才會變回原來的數字? 如-200,000?


[關鍵字]: 刻度 作圖 位數


--","R_Language"
"2525","M.1396896025.A.CFC","celestialgod","問題","data.table rowwise function",2014-04-08 02:40:23,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

想試試看用data.table做些事情

可是發現速度完全卡住

我認為是rowwise的作法寫錯

希望有人提供指導


[程式範例]:http://pastebin.com/YjCZV4x4上面是data.frame的版本下面是data.table的版本[關鍵字]:data.table rowwise--","R_Language"
"2526","M.1396884365.A.A4B","Wush978","情報","R: THE GOOD PARTS",2014-04-07 23:26:02,NA,NA,"[關鍵字]: R

[出處]:http://hackerretreat.com/r-good-parts/[重點摘要]:

Summary: how to use the good parts

1. Never use the standard lib sapply, tapply etc functions. Back in the day I’d have said ‘use the hadleyverse’, but nowadays there are better, more performant alternatives.

2. Don’t use S4, and if you can, don’t use S3 (object systems).

3. Use the caret package instead of writing crossvalidation code yourself for each model.

4. Master the non-standard data structures (vectors, arrays, lists, data frames, and matrices). But don’t bother too much with data.frame. The days of data.frame are numbered.

5. Use data.table in every case you’d use data.frame. It has it’s own query syntax. Makes plyr etc obsolete.

6. Use traceback() and debug() on the console. Test on a clean workspace often. Use a proper visual debugger (both Rstudio and StatET have one).

7. Use the compiler package and pqR if you want ‘free’ improvements without touching your code.



--","R_Language"
"2527","M.1396865223.A.218","Wush978","分享","Call Python from R through Rcpp",2014-04-07 18:07:00,NA,NA,"[關鍵字]: python, R, boost

[出處]:http://gallery.rcpp.org/articles/rcpp-python/[重點摘要]:

如果習慣用C/C++的朋友想要同時發揮Python和R 的威力，

可以這樣hack。


--","R_Language"
"2528","M.1396729914.A.B34","celestialgod","問題","Re: data.table取出符合條件的資料",2014-04-06 04:31:51,NA,NA,"我有興趣知道size較大時，哪個速度比較快

寫了一個小程式測試：

library(data.table)
library(dplyr)
library(fastmatch)
library(Rcpp)
library(microbenchmark)
library(rbenchmark)
perf_test = function(N){
    tmp <- list()
    for(i in 1:N) tmp[[i]] <- iris
    m <- do.call(rbind, tmp)
    m2 = data.table(m)
    setkey(m2, ""Sepal.Width"")
    m3 = as.matrix(m[,1:4])
    benchmark(replications=100,
        m[m$Sepal.Width == 3.5,],
        subset(m, Sepal.Width == 3.5),
        m2[J(3.5)],
        filter(m, Sepal.Width == 3.5),
        filter(m2, Sepal.Width == 3.5),
        m2[list(3.5)],
        m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0L),],
        m3[m3[,2]==3.5,],
        columns = c(""test"", ""replications"", ""elapsed"", ""relative"")
    )
}
# iris的大小
object.size(iris)# 7088 bytes# 200倍的資料量perf_test(200)
                                          test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    0.05      1.0
5               filter(m2, Sepal.Width == 3.5)          100    0.14      2.8
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    0.25      5.0
1                    m[m$Sepal.Width == 3.5, ]          100    0.44      8.8
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    0.33      6.6
3                                   m2[J(3.5)]          100    0.17      3.4
6                                m2[list(3.5)]          100    0.14      2.8
9                         m3[m3[, 2] == 3.5, ]          100    0.22      4.4
2                subset(m, Sepal.Width == 3.5)          100    0.55     11.0# 500倍的資料量perf_test(500)
                                     test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    0.15    1.000
5               filter(m2, Sepal.Width == 3.5)          100    0.16    1.067
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    0.71    4.733
1                    m[m$Sepal.Width == 3.5, ]          100    1.13    7.533
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    0.75    5.000
3                                   m2[J(3.5)]          100    0.19    1.267
6                                m2[list(3.5)]          100    0.16    1.067
9                         m3[m3[, 2] == 3.5, ]          100    0.50    3.333
2                subset(m, Sepal.Width == 3.5)          100    1.26    8.400# 1000倍的資料量perf_test(1000)
                                          test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    0.27    1.929
5               filter(m2, Sepal.Width == 3.5)          100    0.21    1.500
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    1.09    7.786
1                    m[m$Sepal.Width == 3.5, ]          100    1.92   13.714
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    0.97    6.929
3                                   m2[J(3.5)]          100    0.15    1.071
6                                m2[list(3.5)]          100    0.14    1.000
9                         m3[m3[, 2] == 3.5, ]          100    0.83    5.929
2                subset(m, Sepal.Width == 3.5)          100    2.31   16.500# 1500倍的資料量perf_test(1500)
                                          test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    0.45     2.25
5               filter(m2, Sepal.Width == 3.5)          100    0.31     1.55
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    1.76     8.80
1                    m[m$Sepal.Width == 3.5, ]          100    3.11    15.55
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    1.81     9.05
3                                   m2[J(3.5)]          100    0.20     1.00
6                                m2[list(3.5)]          100    0.21     1.05
9                         m3[m3[, 2] == 3.5, ]          100    2.06    10.30
2                subset(m, Sepal.Width == 3.5)          100    3.60    18.00# 3000倍的資料量perf_test(3000)
                                          test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    0.82     4.10
5               filter(m2, Sepal.Width == 3.5)          100    0.50     2.50
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    3.47    17.35
1                    m[m$Sepal.Width == 3.5, ]          100    7.13    35.65
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    3.79    18.95
3                                   m2[J(3.5)]          100    0.20     1.00
6                                m2[list(3.5)]          100    0.22     1.10
9                         m3[m3[, 2] == 3.5, ]          100    2.93    14.65
2                subset(m, Sepal.Width == 3.5)          100    7.39    36.95# 5000倍的資料量perf_test(5000)
                                          test replications elapsed relative
4                filter(m, Sepal.Width == 3.5)          100    1.46    5.214
5               filter(m2, Sepal.Width == 3.5)          100    0.84    3.000
7 m[fmatch(m$Sepal.Width, 3.5, nomatch = 0), ]          100    6.46   23.071
1                    m[m$Sepal.Width == 3.5, ]          100   10.71   38.250
8 m2[fmatch(m2$Sepal.Width, 3.5, nomatch = 0)]          100    7.37   26.321
3                                   m2[J(3.5)]          100    0.28    1.000
6                                m2[list(3.5)]          100    0.34    1.214
9                         m3[m3[, 2] == 3.5, ]          100    4.96   17.714
2                subset(m, Sepal.Width == 3.5)          100   13.67   48.821

總結：

在資料量在3544000 bytes左右為分界，以下是filter + data.frame比較快

以上則是m2[J(3.5)] 跟 m2[list(3.5)]比較快

補上平台：windows 7 64 bit SP1, R 3.0.3,[email<U+00A0>protected]--","R_Language"
"2529","M.1396621265.A.11F","tokyo291","問題","Re: data.table取出符合條件的資料",2014-04-04 22:21:03,NA,NA,"您好 不好意思想再請問一些問題...

就是我使用了filter時間有縮短了很多

後來有查到fastmatch裡面的fmatch

想試試看這個和filter的時間比較,不過出現了一些問題

以下是我寫的code

x<-structure(list(A = c(5, 3.5, 3.25, 4.25, 1.5), B = c(4.25, 4,
4, 4.5, 4.5), C = c(4.5, 2.5, 4, 2.25, 3)), .Names = c(""A"", ""B"",
""C""), class = ""data.frame"", row.names = c(NA, -5L))

x1<-as.data.table(x)> x1A    B    C
1: 5.00 4.25 4.50
2: 3.50 4.00 2.50
3: 3.25 4.00 4.00
4: 4.25 4.50 2.25
5: 1.50 4.50 3.00> fmatch(x1$B,4)[1] NA  1  1 NA NA> x1[fmatch(x1$B,4)]A    B   C
1: NA   NA  NA
2:  5 4.25 4.5
3:  5 4.25 4.5
4: NA   NA  NA
5: NA   NA  NA

想要讓他提出B等於4的2和3列,可是一直都試不出來...

想請問該如何把所要的目標列提出呢?

--","R_Language"
"2530","M.1396540286.A.8FC","Wush978","問題","Re: data.table取出符合條件的資料",2014-04-03 23:51:16,NA,NA,"幾種我知道的 subsetting的方法比較：

```
tmp <- list()
for(i in 1:100) tmp[[i]] <- iris
iris <- do.call(rbind, tmp)
iris1 <- iris
library(data.table)
iris2 <- data.table(iris)
setkey(iris2, ""Sepal.Width"")

library(dplyr)
library(microbenchmark)

microbenchmark(
  iris[iris$Sepal.Width == 3.5,],
  subset(iris, Sepal.Width == 3.5),
  iris2[J(3.5)],
  filter(iris, Sepal.Width == 3.5),
  filter(iris2, Sepal.Width == 3.5)
)
```

我自己應該會選用 `filter(iris, Sepal.Width == 3.5)` 這種，
在我電腦上的測試結果比其他的方法快3倍※ 引述《tokyo291 (工口工口)》之銘言：: [問題類型]::: 效能諮詢(我想讓R 跑更快): 想在data.table格式中,取出一些特別的資料: 由於迴圈數很大,想縮短取出的時間:: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 在data.table格式的資料中,需要取出某行裡數字相同的整列: 目前有試過一些寫法,不過時間都花蠻久的: 有研究過data.table[] 中括號裡面的寫法,好像沒有辦法快速取出: (在看package裡面還有一個setkey指令,不曉得對快速取出有沒有幫助): [程式範例]:: 以下是我把我的問題簡化的例子: x<-structure(list(A = c(5, 3.5, 3.25, 4.25, 1.5), B = c(4.25, 4,: 4, 4.5, 4.5), C = c(4.5, 2.5, 4, 2.25, 3)), .Names = c(""A"", ""B"",: ""C""), class = ""data.frame"", row.names = c(NA, -5L)): x1<-as.data.table(x): > x1:       A    B    C: 1: 5.00 4.25 4.50: 2: 3.50 4.00 2.50: 3: 3.25 4.00 4.00: 4: 4.25 4.50 2.25: 5: 1.50 4.50 3.00: 第一種我使用: > subset(x1,B==4):       A B   C: 1: 3.50 4 2.5: 2: 3.25 4 4.0: 第二種是: > x1[c(x1[,2,with=F]==4)]:       A B   C: 1: 3.50 4 2.5: 2: 3.25 4 4.0: 這兩種都能達到我要的結果,但是時間卻花很久: 我完整的code是: for(i in 1:nrow(a)){:         b_1=unique(subset(x,V2==a[i])[,4:5,with=F]):         b_2=unique(x[c(x[,2,with=F]==a[i])][,4:5,with=F]):         b_3=unique(x[a[i]][,4:5,with=F]):       }: nrow(a)大約都是幾萬的數字: x是要取出的資料: a[i]則是在每個迴圈在第二行要取出符合的條件: b_1和b_2是我自己寫的結果對了但是時間要花很久: b_3是之前試網路上的寫法速度很快但是結果卻是錯誤的: 不曉得依照b_3這種類似的寫法: 能不能寫出取出符合條件的列?: [關鍵字]::: data.table  快速 取出:

--","R_Language"
"2531","M.1396538938.A.AED","tokyo291","問題","data.table取出符合條件的資料",2014-04-03 23:28:55,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)想在data.table格式中,取出一些特別的資料由於迴圈數很大,想縮短取出的時間[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

在data.table格式的資料中,需要取出某行裡數字相同的整列

目前有試過一些寫法,不過時間都花蠻久的

有研究過data.table[] 中括號裡面的寫法,好像沒有辦法快速取出

(在看package裡面還有一個setkey指令,不曉得對快速取出有沒有幫助)

[程式範例]:

以下是我把我的問題簡化的例子

x<-structure(list(A = c(5, 3.5, 3.25, 4.25, 1.5), B = c(4.25, 4,
4, 4.5, 4.5), C = c(4.5, 2.5, 4, 2.25, 3)), .Names = c(""A"", ""B"",
""C""), class = ""data.frame"", row.names = c(NA, -5L))

x1<-as.data.table(x)> x1A    B    C
1: 5.00 4.25 4.50
2: 3.50 4.00 2.50
3: 3.25 4.00 4.00
4: 4.25 4.50 2.25
5: 1.50 4.50 3.00

第一種我使用> subset(x1,B==4)A B   C
1: 3.50 4 2.5
2: 3.25 4 4.0

第二種是> x1[c(x1[,2,with=F]==4)]A B   C
1: 3.50 4 2.5
2: 3.25 4 4.0


這兩種都能達到我要的結果,但是時間卻花很久


我完整的code是


for(i in 1:nrow(a)){
        b_1=unique(subset(x,V2==a[i])[,4:5,with=F])

        b_2=unique(x[c(x[,2,with=F]==a[i])][,4:5,with=F])

        b_3=unique(x[a[i]][,4:5,with=F])

      }

nrow(a)大約都是幾萬的數字

x是要取出的資料

a[i]則是在每個迴圈在第二行要取出符合的條件

b_1和b_2是我自己寫的結果對了但是時間要花很久

b_3是之前試網路上的寫法速度很快但是結果卻是錯誤的

不曉得依照b_3這種類似的寫法

能不能寫出取出符合條件的列?




[關鍵字]:data.table  快速 取出--","R_Language"
"2532","M.1396429650.A.516","raffit7975","問題","從github下載函數的編碼問題",2014-04-02 17:07:27,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近做了一個套件
函數中有中文字並且在存取時編碼已設定為UTF-8
也把Rstudio的預設編碼改為UTF-8
接著我把套件上傳到github
而且在github上檢查後是正常的中文字

但我從R下載我在github的這個套件後
原本函數裡的中文字全部變成亂碼
有試過在函數中有中文字的前面加上iconv
但還是沒有辦法解決...

再麻煩各位幫我解答了！

--","R_Language"
"2533","M.1396411229.A.C41","koai","問題","Re: 請問如何置換X軸的文字標籤",2014-04-02 12:00:26,NA,NA,"雖然原PO已經爬文解決問題了,
但是因為原PO的x-座標表示法長度比較長,
這邊還是提供一點小建議,
可以用 asp 參數來改座標的表示方向(才不會重疊),
並且可以用 mai 參數來調整圖跟邊界的距離!
以下為參考的範例程式碼:


df <- list()
df$x <- rnorm(1000)
my.at <- c(0:4*200+1)  # location(index) where you draw x-label,
                       # must have same length as date.
date <- c(""2012-10-02 19:39:42 CST"", ""2012-10-02 22:26:22 CST"",
          ""2012-10-03 18:51:35 CST"", ""2012-10-03 21:38:15 CST"",
          ""2012-10-04 14:15:35 CST"" )

op <- par(mfrow=c(1,1), mai = par(""mai"")+c(1.5,0,0,0))
plot(df$x,col=""olivedrab"",type='l',lty=1,xaxt=""n"", xlab="""", ylab="""" )
axis(1, at=my.at, labels=date, las=2, asp=2 )
par(op)

?plot.default
?par※ 引述《peiwinds (Macchiato Caramel)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: http://ppt.cc/bWoC: 如圖，我想將X軸的 0e+00這些紅色圈起來的數字: 置換成我想要的日期: 我現在已經創造的一個list date裡面放了這些日期: date: [1] ""2012-10-02 19:39:42 CST"" ""2012-10-02 22:26:22 CST"" ""2012-10-03 18:51:35: CST"": [4] ""2012-10-03 21:38:15 CST"" ""2012-10-04 14:15:35 CST"": [程式範例]:: plot(df$x ,col=""olivedrab"",type=""l"",lwd=1): 之後我開始使用 axis的功能可是一直失敗 Orz: 請幫幫我吧 T_T: 謝謝--","R_Language"
"2534","M.1396408805.A.619","peiwinds","問題","請問如何置換X軸的文字標籤",2014-04-02 11:20:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:http://ppt.cc/bWoC如圖，我想將X軸的 0e+00這些紅色圈起來的數字
置換成我想要的日期
我現在已經創造的一個list date裡面放了這些日期
date
[1] ""2012-10-02 19:39:42 CST"" ""2012-10-02 22:26:22 CST"" ""2012-10-03 18:51:35
CST""
[4] ""2012-10-03 21:38:15 CST"" ""2012-10-04 14:15:35 CST""


[程式範例]:

plot(df$x ,col=""olivedrab"",type=""l"",lwd=1)

之後我開始使用 axis的功能可是一直失敗 Orz

請幫幫我吧 T_T

謝謝


--","R_Language"
"2535","M.1395393476.A.69D","celestialgod","問題","Re: MATLAB的cell/struct在R裡面是?",2014-03-21 17:17:53,NA,NA,"※ 引述《kolun (...)》之銘言：: [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 大家好: 我想要估計2個國家的3條time series model: 並把結果(model)存起來: 以前在MATLAB裡我會想建立一個cell(2,3)來存結果: 當然R的list又比MATLAB的cell更好 什麼都可以存: 我目前的作法是: model = list(): for (i in 1:2) {:     model[[i]] = list():     for (j in 1:3) {:         model[[i]][[j]] = auto.arima( ... ):     }: }你可以這樣做：

model = list(); length(model) = 2
for (i in 1:2)
{
    tmp = list(); length(tmp) = 3
    for (j in 1:3) {
        tmp[[j]] = auto.arima( ... )
    }
    model[[i]] = tmp
}

model[[1]][[2]] => 第一個國家 第二個模型

還有一種變體是 我現在有2個國家分別有3, 4個模型

n = c(3, 4)
model = list(); length(model) = 2
for (i in 1:2)
{
    tmp = list(); length(tmp) = n[i]
    for (j in 1:n[i]) {
        tmp[[j]] = auto.arima( ... )
    }
    model[[i]] = tmp
}

--","R_Language"
"2536","M.1395392096.A.A54","kolun","問題","MATLAB的cell/struct在R裡面是?",2014-03-21 16:54:53,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)*[m[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的大家好
我想要估計2個國家的3條time series model
並把結果(model)存起來

以前在MATLAB裡我會想建立一個cell(2,3)來存結果
當然R的list又比MATLAB的cell更好 什麼都可以存
我目前的作法是
model = list()
for (i in 1:2) {
    model[[i]] = list()
    for (j in 1:3) {
        model[[i]][[j]] = auto.arima( ... )
    }
}
這樣寫可以達到我要的結果
但在迴圈裡每次都要model[[i]] = list() 似乎怪怪的
想請教各位前輩有沒有更R的作法 能讓我有個n x m的變數放不是矩陣的東西呢
謝謝！

--","R_Language"
"2537","M.1395079681.A.DF0","coo20819","問題","gvisCandlestickChart 設定問題",2014-03-18 02:07:59,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的非常不好意思又上來問問題，但實在試不出解決方法...
我希望能""表現出""互動式信賴區間的圖，
決定使用 googleVis 這個套件裡面的 gvisCandlestickChart 這個函數，

目前遇到不會更改設定的問題：
1. 希望可以改變各個Candlestick的顏色，可以表示成不同的估計量
2. 在游標移到到Candlestick時會有框框跳出來，希望可以設定成

   A
   value: 2
   confidence interval: 1-3

或是有其他建議使用""別的函數來漂亮地表達信賴區間""，
並且能在R version 2.15.3 跑得函數，因為我要放在spark上，
原先使用ggplot2，結果無法安裝在spark上面...

[程式範例]:
```{r}
require(googleVis)
value <- c(2.00, 3.01, 4.20, 1.20, 2.33)
up <- c(2.00, 3.01, 4.20, 1.20, 2.33) + 1
low <- c(2.00, 3.01, 4.20, 1.20, 2.33) - 1
id <- c(LETTERS[1:5])
test <- data.frame(value, up, low, id, id)
C1 <- gvisCandlestickChart(test, xvar=""id"", low=""low"",open=""value"",
                           close=""value"",high=""up"",
                           options=list(legend='none'))
plot(C1)

```

以上兩個問題我有google過，或是搜尋gvisCandlestickChart範例等等，
目前我頂多可以故意把data.frame裡面的名字改成'confidence interval'，如下

```{r}
require(googleVis)
value <- c(2.00, 3.01, 4.20, 1.20, 2.33)
up <- c(2.00, 3.01, 4.20, 1.20, 2.33) + 1
low <- c(2.00, 3.01, 4.20, 1.20, 2.33) - 1
id <- c(LETTERS[1:5])
test <- data.frame(value, up, low, id, id)
colnames(test) <- c(""value"", ""up"", ""confidence interval"", ""id"", ""id"")
C1 <- gvisCandlestickChart(test, xvar=""id"", low=""confidence interval"",
                           open=""value"",close=""value"",high=""up"",
                           options=list(legend='none'))
plot(C1)
```

但跳出來的框框還是沒有很容易解讀http://ppt.cc/B0xxhttp://ppt.cc/FYAk上面兩個網站我已經嘗試數次了，還是無法成功，
有一個a JSON array of strings我也完全沒有概念...

只能懇請版上好心人，可以指點迷津！！！在此先謝謝各位


[關鍵字]:
googleVis; gvisCandlestickChart; confidence interval

--","R_Language"
"2538","M.1394979198.A.C3A","celestialgod","問題","Re: 該如何分割",2014-03-16 22:13:16,NA,NA,"### 123.txt
comment: ""it is nice and great""
comment: ""it is nice""
comment: ""it is great:""

### main.r
test=readLines(""C:\\Users\\Administrator\\Desktop\\123.txt"")
sapply(test, function(v) {
tmp = strsplit(v, "" "")[[1]]
c(tmp[1], paste(tmp[2:length(tmp)], collapse = "" ""))})

Result:

[1,] ""comment:""                      ""comment:""
[2,] ""\""it is nice and great\""""      ""\""it is nice\""""

[1,] ""comment:""
[2,] ""\""it is great:\""""

Note: 如果不要什麼，就用gsub取代成""""就好※ 引述《ryansun (sun)》之銘言：: 請問我有一段話 形式大概如這樣: comment: ""it is nice and great"": 想把comment與""it is nice and great""分別存在兩個變數裡: 我試著用下列code做: test=readLines(""123.txt""): strsplit(test, "" ""): 但結果是只要遇到空白就會切開: [1] ""comment:"" ""\""it""     ""is""       ""nice""     ""and""      ""great\"""": 有什麼方法是讀到第一個空白處才會分割 後面就不會繼續切下去: 謝謝指教--","R_Language"
"2539","M.1394975497.A.61C","ryansun","問題","該如何分割",2014-03-16 21:11:35,NA,NA,"請問我有一段話 形式大概如這樣
comment: ""it is nice and great""
想把comment與""it is nice and great""分別存在兩個變數裡

我試著用下列code做
test=readLines(""123.txt"")
strsplit(test, "" "")

但結果是只要遇到空白就會切開
[1] ""comment:"" ""\""it""     ""is""       ""nice""     ""and""      ""great\""""

有什麼方法是讀到第一個空白處才會分割 後面就不會繼續切下去
謝謝指教



--","R_Language"
"2540","M.1394893524.A.4B7","celestialgod","問題","Re: 關於GAM的問題...",2014-03-15 22:25:21,NA,NA,"給你一個例子：

library(gam)
set.seed(100)
n = 32; p = 6
X = matrix(rnorm(n*p), n, p)
X2 = X
X2[,1] = sin(X[,1]/pi*2)
X2[,2] = 0.5*(X[,2])^2 - 1.2 * X[,2]
X2[,3] = 0.2*(X[,3])^3 - 0.5*(X[,3])^2
Beta = c(0.5,1,1,1,1,0,0)
Y = cbind(1, X) %*% Beta
dat = data.frame(X2, Y)

tmp = paste0(sapply(1:p, function(v) paste0(""s("", names(dat)[v], "")"")),
collapse = ""+"")
fm2 = as.formula( paste(names(dat)[(p+1)], tmp, sep = ""~""))
summary(gam(fm2, data = dat)) # default of df = 3 => p = 3*6 = 18 < 32

df.v = c(6,6,6,6,6,6) # sum of df = 15 < n = 16
tmp = paste0(sapply(1:p, function(v) paste0(""s("", names(dat)[v], "", df = "",
df.v[v], "")"")), collapse = ""+"")
fm = as.formula( paste(names(dat)[(p+1)], tmp, sep = ""~""))
summary(gam(fm, data = dat)) # run default k = 3 for all variables, p = 6 * 6
= 36 > n = 32, then the error is occurred.

df.v = c(6,6,6,1,1,1) # sum of df = 19 < n = 32
tmp = paste0(sapply(1:p, function(v) paste0(""s("", names(dat)[v], "", df = "",
df.v[v], "")"")), collapse = ""+"")
fm = as.formula( paste(names(dat)[(p+1)], tmp, sep = ""~""))
summary(gam(fm, data = dat)) # no error.

df.v = c(6,6,6,1) # sum of df = 19 < n = 32
tmp = paste0(sapply(1:length(df.v), function(v) paste0(""s("", names(dat)[v],
"", df = "", df.v[v], "")"")), collapse = ""+"")
tmp2 = paste0(names(dat)[(length(df.v)+1):p], collapse = ""+"")
fm = as.formula( paste(names(dat)[(p+1)], paste(tmp, tmp2, sep = ""+""), sep =
""~""))
summary(gam(fm, data = dat)) # no error.

--","R_Language"
"2541","M.1394810662.A.366","iamclaudiaa","問題","關於GAM的問題...",2014-03-14 23:24:20,NA,NA,"各位好
我是個R的新手…可能有些問題不是很懂QQ

我現在有7個項目的資料(A-G).想用這些資料去預測H,每個項目有16個測量值
DATA的樣子大致如下
  A B C D E F G H
1
2
3
.
.
.
16

想跑GAM 廣義相加模式
我的CODE:
FMPS.gam<-gam(log(FMPS)~s(SM, k=6)+s(SM2, k=6)+s(SM3, k=6)
+s(SM4, k=6)+s(WS, k=6)+s(T, k=6)+s(HR, k=6), data=data)
但出現個ERROR: Model has more coefficients than data

請問是什麼問題呢..看了好久都沒有頭緒..是K要再做更改嗎
謝謝了^^

--","R_Language"
"2542","M.1394548902.A.2FE","winiris","問題","C呼叫R",2014-03-11 22:41:39,NA,NA,"想請問各位
是否知道C要如何呼叫R
我想從C程式中呼叫R中的loess
但是一點頭緒都沒有
已經有從網路上找過資料，但是還是不知道該如何做
希望有高手可以教教我

--","R_Language"
"2543","M.1394515933.A.05B","Wush978","問題","Re: 函數 gvisTable 相關設定問題",2014-03-11 13:32:10,NA,NA,"alignment可以透過HTML來設定:

```r
tbl1 <- gvisTable(iris)
plot(tbl1) # species 靠左
iris$Species <- sprintf(""<center>%s</center>"", iris$Species)
tbl1 <- gvisTable(iris, options=list(allowHtml=TRUE))
plot(tbl1) # Species 靠中
```

這有點不乾淨，但是我也不知道有沒有更簡單的方法了。

數字的格式請直接參考formats這個參數。※ 引述《coo20819 (Mike)》之銘言：: [問題類型]::: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: 套件 googleVis 底下的一個函數：gvisTable的設定問題: [軟體熟悉度]:: 請把以下不需要的部份刪除: 使用者(已經有用R 做過不少作品): [問題敘述]:: 請簡略描述你所要做的事情，或是這個程式的目的: 版上大家好，想請問說: 在使用 gvisTable 這個函數時，希望能做到兩件事情: 1.表格數據能""置中"": 2.表格中有3.00這類數字，都會自動變成3，這樣視覺上不太一致，希望:   output是3.00這樣！: [程式範例]:: ```{r}: require(googleVis): test <- data.frame(x1=c(1.22, 1.30, 1.00), x2=c(2.22, 3.03, 3.20), x3=c(3.00, 4.01, 4.10)): plot(gvisTable(test)): ```: [關鍵字]:: googleVis; gvisTable: 在此先感謝大家！！！--","R_Language"
"2544","M.1394482940.A.24D","BaBi","情報","DataCamp: Learn R & Become a Data Anal",2014-03-11 04:22:09,NA,NA,"[關鍵字]:

        R, Coursera, Turtorial, Data Analysis

[出處]:https://www.datacamp.com/[重點摘要]:

        大家好, 其實知道 R 這套統計分析軟體有一陣時間了, 直到最近
        因為修習了 Coursera 的一門課程才真正接觸與使用到他.https://www.coursera.org/course/statistics這門課是由杜克大學所推出, 屬於 ""Reasoning, Data Analysis
        and Writing"" 系列中的入門課程.

        --

        而在這個課程中, 得知了 DataCamp 這個如 CodeCademy 一般以
        ""Learn by Doing"" 為主的互動式學習網站.https://www.datacamp.com/來的時候翻了下置底文也爬了文, 好像目前板上沒人提到過, 所
        以就貼了xDD

--","R_Language"
"2545","M.1394472120.A.2AA","coo20819","問題","函數 gvisTable 相關設定問題",2014-03-11 01:21:58,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)套件 googleVis 底下的一個函數：gvisTable的設定問題

[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的版上大家好，想請問說
在使用 gvisTable 這個函數時，希望能做到兩件事情
1.表格數據能""置中""
2.表格中有3.00這類數字，都會自動變成3，這樣視覺上不太一致，希望
  output是3.00這樣！


[程式範例]:
```{r}
require(googleVis)
test <- data.frame(x1=c(1.22, 1.30, 1.00), x2=c(2.22, 3.03, 3.20), x3=c(3.00, 4.01, 4.10))
plot(gvisTable(test))
```

[關鍵字]:
googleVis; gvisTable

在此先感謝大家！！！

--","R_Language"
"2546","M.1394423960.A.CC2","swedrf0112","問題","排列組合",2014-03-10 11:59:17,NA,NA,"[問題類型]:程式諮詢

[軟體熟悉度]:入門

[問題敘述]:
假設有5個格子，可以放4個值

格子    O       O       O       O       O

值(ex)  1       1       2       3       4
        1       2       4       1       3
                ...

也就是總共會有4^5種可能
那要怎麼把全部的可能結果都列出來?
謝謝!!


[關鍵字]:排列組合


--","R_Language"
"2547","M.1394380818.A.244","celestialgod","問題","Re: 使用套件中的指令時，能看到原始碼嗎？",2014-03-10 00:00:16,NA,NA,"你可以在package的網頁上可以找到相關的reference

可以直接 在R裡面 input ??package_name (package_name是你使用的package名稱)

如果你是需要source code對公式做相關修改的的話，

則打function_name 基本上可以看到他所寫的code，

如果他有使用其他function，則同理，可以找到

如果找不到則要去下載未compile的package (or say .tar file)

在裡面可以找到你需要的function※ 引述《btoco (望盡天涯路)》之銘言：: [問題類型]:: 意見調查(我對R 有個很棒的想法，想問問大家的意見)這個應該寫程式諮詢...: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位前輩好，之前有在版上詢問過如何透過R產生作假的答題反應。: 這次問的感覺是一個更沒有sense的問題，就是如標題所示：: 我們在啟用package中的指令，幫我們估計時，: 有辦法看到當初開法者所撰寫的語法嗎？如估算的公式是怎麼寫的.....: 有問過系上的學長，他說套件的網址通常都會有相關資訊，: 但無奈不曉得是我眼殘，就是找不到。: 之所以想知道，是想瞭解公式這麼寫的，以及有時候會需要適當修改。: 麻煩前輩提供相關資訊了，謝謝~--","R_Language"
"2548","M.1394378655.A.2BA","btoco","問題","使用套件中的指令時，能看到原始碼嗎？",2014-03-09 23:24:12,NA,NA,"[問題類型]:
意見調查(我對R 有個很棒的想法，想問問大家的意見)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位前輩好，之前有在版上詢問過如何透過R產生作假的答題反應。
這次問的感覺是一個更沒有sense的問題，就是如標題所示：
我們在啟用package中的指令，幫我們估計時，
有辦法看到當初開法者所撰寫的語法嗎？如估算的公式是怎麼寫的.....
有問過系上的學長，他說套件的網址通常都會有相關資訊，
但無奈不曉得是我眼殘，就是找不到。
之所以想知道，是想瞭解公式這麼寫的，以及有時候會需要適當修改。
麻煩前輩提供相關資訊了，謝謝~


--","R_Language"
"2549","M.1394274059.A.BCE","celestialgod","問題","Re: 將 X 軸放到頂部 - ggplot",2014-03-08 18:20:57,NA,NA,"Simple version for lattice:

library(lattice)
levelplot(value~X1+X2, Mat, main="""", col.regions = heat.colors(18), xlab =
""x"", ylab = ""y"", scales = list(x = list(alternating = 2)))

或是你要藍色系的話可以這樣做：

library(lattice)
levelplot(value~X1+X2, Mat, main="""", col.regions = hcl(255, 80, seq(20, 90,
length = 18)), xlab = ""x"", ylab = ""y"", scales = list(x = list(alternating =
2)))

# another color
levelplot(value~X1+X2, Mat, main="""", col.regions = hcl(130, 100, seq(40, 100,
length = 18)), xlab = ""x"", ylab = ""y"")

至於ggplot背後的格子，我就不太知道要怎樣畫上去比較漂亮了XD

畢竟我喜歡lattice的風格，沒有那麼愛ggplot~~

PS:

# 提供幾個色系供參考：
hcl(40, 80, seq(10, 90, length = 18)) # 橘色系
hcl(70, 80, seq(10, 90, length = 18)) # 黃色系
hcl(140, 80, seq(10, 90, length = 18)) # 綠色系
hcl(200, 80, seq(10, 90, length = 18)) # 藍綠色系
hcl(255, 60, seq(10, 90, length = 18)) # 藍色系
hcl(300, 80, seq(10, 90, length = 18)) # 紫色系
hcl(350, 80, seq(10, 90, length = 18)) # 紅色系※ 引述《skylikewater (choc.)》之銘言：: [問題敘述]:: 小弟在畫格子狀的填塞矩陣 (geom_tile)，: 想把 X 軸放到上緣，變成本來是下面左圖變成右圖:: 卻苦於找不到如何調控，想請各位指點...: (我有努力翻閱ggplot2 doc跟搜尋網路，但感覺可能用錯搜尋關鍵字):               ________: |            |: |            |: |            |: |            |: |_________   |: [程式範例]::
[關鍵字]:

lattice, levelplot, axis

--","R_Language"
"2550","M.1394095420.A.1F6","skylikewater","問題","將 X 軸放到頂部 - ggplot",2014-03-06 16:43:37,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)










[問題敘述]:

小弟在畫格子狀的填塞矩陣 (geom_tile)，

想把 X 軸放到上緣，變成本來是下面左圖變成右圖:
卻苦於找不到如何調控，想請各位指點...

(我有努力翻閱ggplot2 doc跟搜尋網路，但感覺可能用錯搜尋關鍵字)

              ________
|            |
|            |
|            |
|            |
|_________   |





[程式範例]:library(ggplot2)# 其實我想哪種圖都一樣...# here for sampleTotalNum = 25Mat = runif((TotalNum^2), 5.0, 7.5)dim(Mat) = c(TotalNum,TotalNum)Mat = melt(Mat)# kick out un-plotMat = Mat[!(Mat$value == 0),]Graph = ggplot(Mat, aes(x = Var1, y = Var2, fill = value)) + geom_tile()Graph[關鍵字]:ggplot2, axis--","R_Language"
"2551","M.1394090120.A.31F","peiwinds","問題","如何畫出資料量龐大的時間序列資料",2014-03-06 15:15:17,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

更新data   增加data的量https://drive.google.com/file/d/0B4_iMQ0uEy-UNlRoZ1pyTFh6VDQ/edit?usp=sharing[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我希望可以用plot畫出X軸顯示時間點　
Y軸顯示X變數的圖形
我有先使用strptime將時間做轉換
可是plot一用下去
R session就當掉了

[程式範例]:

test <- read.csv(""test.csv"")

test$DateTime <- strptime(test$DateTime, ""%Y/%m/%d %H:%M"")
#這邊是爬文知道要先將時間格式轉換讓R知道DateTime欄位是時間

plot (test, type=""l"") #因為是單變數資料所以我直接plot整個data frame

如果要只畫X變數，R肯定畫得出來
可是我希望的是X軸能顯示時間，且不要太密集能看得到時間的文字
就算5天顯示一個時間點也沒關係

可以的話請救救我吧
被這個X軸的時間搞好久了都畫不出來 T_T
每次圖畫出來X軸都是點數不是時間，不太好看啊 T_T

最近也有在研究qqplot，可是畫這個圖也畫失敗 好挫折 Orz

謝謝

--","R_Language"
"2552","M.1394021853.A.52F","ecstasym","問題","用R分析健保資料",2014-03-05 20:17:31,NA,NA,"[問題類型]:

程式諮詢

我想用R 分析健保資料，但是連要怎麼用R 讀資料都寫不出來


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

老師丟了一筆健保教我用R試著分析 (老師自己是用SAS)

但我之前修過的課都沒有教得太難

大部分是社區型的小資料


健保資料是很大的一筆 .DAT檔案

內容超過 65萬筆資料，約 40個變項

目前上網找過，也看過一兩本R的書

但都沒有寫的很詳細

目前知道read.delim()可以讀進檔案，但是根本亂碼 XD

需要的幫助是希望高手們可以教教我怎麼可以讀這檔案

或是有沒有程式套件可用~


以上，希望各位幫幫小妹了


[關鍵字]:

健保資料

--","R_Language"
"2553","M.1393814396.A.44B","roussas","問題","Re: 一階導數微分",2014-03-03 10:39:54,NA,NA,"※ 引述《silent910 (唉呀呀)》之銘言：: 想請問一個問題，想了很久...: 我有一組資料(x1,x2,x3)有時間(以週為主)和價錢的資料: 怎麼用哪一個function做一階導數微分??: 是要先把資料函數化, 在用fdata.deri??: 謝謝.我猜你是用 fda.usc 這個package，
（如果不是，就忽略以下內容吧...）
先把你的資料用fdata()這個函數存成 fdata class object，
再把那個object 放進fdata.deriv()這個函數計算微分...

--","R_Language"
"2554","M.1393810584.A.F15","wu110011","問題","在VC++ 2010中使用R",2014-03-03 09:36:22,NA,NA,"請問可在VC++2010 使用R的函式嗎?

比如說呼叫出R的圖形視窗

另外需加入的一些前置設定(head、lib等等)

有說明或教學嗎?

--","R_Language"
"2555","M.1393580394.A.ABB","silent910","問題","一階導數微分",2014-02-28 17:39:51,NA,NA,"想請問一個問題，想了很久...

我有一組資料(x1,x2,x3)有時間(以週為主)和價錢的資料

怎麼用哪一個function做一階導數微分??

是要先把資料函數化, 在用fdata.deri??

謝謝.

--","R_Language"
"2556","M.1393520072.A.BCF","Dboy","問題","homebrew安裝Rmpi",2014-02-28 00:54:29,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:安裝Rmpi (Mac OSX 10.9)

[程式範例]:
我基本上follow下面這個網址的說明安裝Rmpi：http://tinyurl.com/kh28mjk其中第一部有說到要安裝Xcode跟homebrew，
所以我又根據下面這個網址的指示安裝：http://tinyurl.com/8lqpohxXcode我之前就有裝，
我忘了之前有裝過homebrew，
所以裝homebrew的時候終端機console顯示
It appears Homebrew is already installed. If your intent is to reinstall
you should do the following before running this installer again:
    rm -rf /usr/local/Cellar /usr/local/.git && brew cleanup
所以我就照做了，
重新安裝也很順利，
但執行brew doctor時出現一堆Warning:Warning:Some directories in /usr/local/share/man aren't writable.
This can happen if you ""sudo make install"" software that isn't managed
by Homebrew. If a brew tries to add locale information to one of these
directories, then the install will fail during the link step.
You should probably `chown` them:

    /usr/local/share/man/mannWarning:Broken symlinks were found. Remove them with `brew prune`:
  /usr/local/bin/gitk
  /usr/local/bin/git-upload-pack
  /usr/local/bin/git-upload-archive
  /usr/local/bin/git-subtree
  /usr/local/bin/git-shell
  /usr/local/bin/git-remote-hg
  /usr/local/bin/git-remote-bzr
  /usr/local/bin/git-receive-pack
  /usr/local/bin/git-cvsserver
  /usr/local/bin/git-credential-osxkeychain
  /usr/local/bin/git
  /usr/local/etc/bash_completion.d/git-prompt.sh
  /usr/local/etc/bash_completion.d/git-completion.bash
  /usr/local/lib/perl5/site_perl/Git.pm
  /usr/local/lib/perl5/site_perl/Git/SVN.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Utils.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Ra.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Prompt.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Migration.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Memoize/YAML.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Log.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/GlobSpec.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Fetcher.pm
  /usr/local/lib/perl5/site_perl/Git/SVN/Editor.pm
  /usr/local/lib/perl5/site_perl/Git/IndexInfo.pm
  /usr/local/lib/perl5/site_perl/Git/I18N.pm
  /usr/local/lib/perl5/site_perl/5.16.2/darwin-thread-multi-2level/auto/Git/.packlist
  /usr/local/share/zsh/site-functions/git-completion.bash
  /usr/local/share/zsh/site-functions/_git
  /usr/local/share/man/man7/gitworkflows.7
  /usr/local/share/man/man7/gittutorial.7
  /usr/local/share/man/man7/gittutorial-2.7
  /usr/local/share/man/man7/gitrevisions.7
  /usr/local/share/man/man7/gitnamespaces.7
  /usr/local/share/man/man7/gitglossary.7
  /usr/local/share/man/man7/gitdiffcore.7
  /usr/local/share/man/man7/gitcvs-migration.7
  /usr/local/share/man/man7/gitcredentials.7
  /usr/local/share/man/man7/gitcore-tutorial.7
  /usr/local/share/man/man7/gitcli.7
  /usr/local/share/man/man5/gitweb.conf.5
  /usr/local/share/man/man5/gitrepository-layout.5
  /usr/local/share/man/man5/gitmodules.5
  /usr/local/share/man/man5/gitignore.5
  /usr/local/share/man/man5/githooks.5
  /usr/local/share/man/man5/gitattributes.5
  /usr/local/share/man/man3/Git::SVN::Utils.3pm
  /usr/local/share/man/man3/Git::SVN::Ra.3pm
  /usr/local/share/man/man3/Git::SVN::Prompt.3pm
  /usr/local/share/man/man3/Git::SVN::Memoize::YAML.3pm
  /usr/local/share/man/man3/Git::SVN::Fetcher.3pm
  /usr/local/share/man/man3/Git::SVN::Editor.3pm
  /usr/local/share/man/man3/Git::I18N.3pm
  /usr/local/share/man/man3/Git.3pm
  /usr/local/share/man/man1/gitweb.1
  /usr/local/share/man/man1/gitremote-helpers.1
  /usr/local/share/man/man1/gitk.1
  /usr/local/share/man/man1/git.1
  /usr/local/share/man/man1/git-write-tree.1
  /usr/local/share/man/man1/git-whatchanged.1
  /usr/local/share/man/man1/git-web--browse.1
  /usr/local/share/man/man1/git-verify-tag.1
  /usr/local/share/man/man1/git-verify-pack.1
  /usr/local/share/man/man1/git-var.1
  /usr/local/share/man/man1/git-upload-pack.1
  /usr/local/share/man/man1/git-upload-archive.1
  /usr/local/share/man/man1/git-update-server-info.1
  /usr/local/share/man/man1/git-update-ref.1
  /usr/local/share/man/man1/git-update-index.1
  /usr/local/share/man/man1/git-unpack-objects.1
  /usr/local/share/man/man1/git-unpack-file.1
  /usr/local/share/man/man1/git-tag.1
  /usr/local/share/man/man1/git-symbolic-ref.1
  /usr/local/share/man/man1/git-svn.1
  /usr/local/share/man/man1/git-submodule.1
  /usr/local/share/man/man1/git-stripspace.1
  /usr/local/share/man/man1/git-status.1
  /usr/local/share/man/man1/git-stash.1
  /usr/local/share/man/man1/git-stage.1
  /usr/local/share/man/man1/git-show.1
  /usr/local/share/man/man1/git-show-ref.1
  /usr/local/share/man/man1/git-show-index.1
  /usr/local/share/man/man1/git-show-branch.1
  /usr/local/share/man/man1/git-shortlog.1
  /usr/local/share/man/man1/git-shell.1
  /usr/local/share/man/man1/git-sh-setup.1
  /usr/local/share/man/man1/git-sh-i18n.1
  /usr/local/share/man/man1/git-sh-i18n--envsubst.1
  /usr/local/share/man/man1/git-send-pack.1
  /usr/local/share/man/man1/git-send-email.1
  /usr/local/share/man/man1/git-rm.1
  /usr/local/share/man/man1/git-revert.1
  /usr/local/share/man/man1/git-rev-parse.1
  /usr/local/share/man/man1/git-rev-list.1
  /usr/local/share/man/man1/git-reset.1
  /usr/local/share/man/man1/git-rerere.1
  /usr/local/share/man/man1/git-request-pull.1
  /usr/local/share/man/man1/git-replace.1
  /usr/local/share/man/man1/git-repack.1
  /usr/local/share/man/man1/git-remote.1
  /usr/local/share/man/man1/git-remote-testgit.1
  /usr/local/share/man/man1/git-remote-fd.1
  /usr/local/share/man/man1/git-remote-ext.1
  /usr/local/share/man/man1/git-relink.1
  /usr/local/share/man/man1/git-reflog.1
  /usr/local/share/man/man1/git-receive-pack.1
  /usr/local/share/man/man1/git-rebase.1
  /usr/local/share/man/man1/git-read-tree.1
  /usr/local/share/man/man1/git-quiltimport.1
  /usr/local/share/man/man1/git-push.1
  /usr/local/share/man/man1/git-pull.1
  /usr/local/share/man/man1/git-prune.1
  /usr/local/share/man/man1/git-prune-packed.1
  /usr/local/share/man/man1/git-patch-id.1
  /usr/local/share/man/man1/git-parse-remote.1
  /usr/local/share/man/man1/git-pack-refs.1
  /usr/local/share/man/man1/git-pack-redundant.1
  /usr/local/share/man/man1/git-pack-objects.1
  /usr/local/share/man/man1/git-p4.1
  /usr/local/share/man/man1/git-notes.1
  /usr/local/share/man/man1/git-name-rev.1
  /usr/local/share/man/man1/git-mv.1
  /usr/local/share/man/man1/git-mktree.1
  /usr/local/share/man/man1/git-mktag.1
  /usr/local/share/man/man1/git-mergetool.1
  /usr/local/share/man/man1/git-mergetool--lib.1
  /usr/local/share/man/man1/git-merge.1
  /usr/local/share/man/man1/git-merge-tree.1
  /usr/local/share/man/man1/git-merge-one-file.1
  /usr/local/share/man/man1/git-merge-index.1
  /usr/local/share/man/man1/git-merge-file.1
  /usr/local/share/man/man1/git-merge-base.1
  /usr/local/share/man/man1/git-mailsplit.1
  /usr/local/share/man/man1/git-mailinfo.1
  /usr/local/share/man/man1/git-ls-tree.1
  /usr/local/share/man/man1/git-ls-remote.1
  /usr/local/share/man/man1/git-ls-files.1
  /usr/local/share/man/man1/git-log.1
  /usr/local/share/man/man1/git-instaweb.1
  /usr/local/share/man/man1/git-init.1
  /usr/local/share/man/man1/git-init-db.1
  /usr/local/share/man/man1/git-index-pack.1
  /usr/local/share/man/man1/git-imap-send.1
  /usr/local/share/man/man1/git-http-push.1
  /usr/local/share/man/man1/git-http-fetch.1
  /usr/local/share/man/man1/git-http-backend.1
  /usr/local/share/man/man1/git-help.1
  /usr/local/share/man/man1/git-hash-object.1
  /usr/local/share/man/man1/git-gui.1
  /usr/local/share/man/man1/git-grep.1
  /usr/local/share/man/man1/git-get-tar-commit-id.1
  /usr/local/share/man/man1/git-gc.1
  /usr/local/share/man/man1/git-fsck.1
  /usr/local/share/man/man1/git-fsck-objects.1
  /usr/local/share/man/man1/git-format-patch.1
  /usr/local/share/man/man1/git-for-each-ref.1
  /usr/local/share/man/man1/git-fmt-merge-msg.1
  /usr/local/share/man/man1/git-filter-branch.1
  /usr/local/share/man/man1/git-fetch.1
  /usr/local/share/man/man1/git-fetch-pack.1
  /usr/local/share/man/man1/git-fast-import.1
  /usr/local/share/man/man1/git-fast-export.1
  /usr/local/share/man/man1/git-difftool.1
  /usr/local/share/man/man1/git-diff.1
  /usr/local/share/man/man1/git-diff-tree.1
  /usr/local/share/man/man1/git-diff-index.1
  /usr/local/share/man/man1/git-diff-files.1
  /usr/local/share/man/man1/git-describe.1
  /usr/local/share/man/man1/git-daemon.1
  /usr/local/share/man/man1/git-cvsserver.1
  /usr/local/share/man/man1/git-cvsimport.1
  /usr/local/share/man/man1/git-cvsexportcommit.1
  /usr/local/share/man/man1/git-credential.1
  /usr/local/share/man/man1/git-credential-store.1
  /usr/local/share/man/man1/git-credential-cache.1
  /usr/local/share/man/man1/git-credential-cache--daemon.1
  /usr/local/share/man/man1/git-count-objects.1
  /usr/local/share/man/man1/git-config.1
  /usr/local/share/man/man1/git-commit.1
  /usr/local/share/man/man1/git-commit-tree.1
  /usr/local/share/man/man1/git-column.1
  /usr/local/share/man/man1/git-clone.1
  /usr/local/share/man/man1/git-clean.1
  /usr/local/share/man/man1/git-citool.1
  /usr/local/share/man/man1/git-cherry.1
  /usr/local/share/man/man1/git-cherry-pick.1
  /usr/local/share/man/man1/git-checkout.1
  /usr/local/share/man/man1/git-checkout-index.1
  /usr/local/share/man/man1/git-check-ref-format.1
  /usr/local/share/man/man1/git-check-mailmap.1
  /usr/local/share/man/man1/git-check-ignore.1
  /usr/local/share/man/man1/git-check-attr.1
  /usr/local/share/man/man1/git-cat-file.1
  /usr/local/share/man/man1/git-bundle.1
  /usr/local/share/man/man1/git-branch.1
  /usr/local/share/man/man1/git-blame.1
  /usr/local/share/man/man1/git-bisect.1
  /usr/local/share/man/man1/git-archive.1
  /usr/local/share/man/man1/git-archimport.1
  /usr/local/share/man/man1/git-apply.1
  /usr/local/share/man/man1/git-annotate.1
  /usr/local/share/man/man1/git-am.1
  /usr/local/share/man/man1/git-add.1
  /usr/local/share/gitweb
  /usr/local/share/gitk
  /usr/local/share/git-gui
  /usr/local/share/git-core
  /usr/local/share/doc/git-doc
  /usr/local/Library/LinkedKegs/gitWarning:Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libtcl8.6.dylib
    /usr/local/lib/libtk8.6.dylibWarning:Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/tcl.pc
    /usr/local/lib/pkgconfig/tk.pcWarning:Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
    /usr/local/lib/libtclstub8.6.a
    /usr/local/lib/libtkstub8.6.a

是我什麼步驟錯了嗎?
又或者我該怎麼在Mac上裝Rmpi呢?

[關鍵字]: homebrew Rmpi

--

--","R_Language"
"2557","M.1393489296.A.3E7","Dboy","問題","矩陣的範圍不能是負值",2014-02-27 16:21:29,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]: 矩陣的範圍不能是負值

[程式範例]:
想找出一個scalar function的optimal value所以用了optim這個function~
目標函式是個向量化函式~
也就是說給一個n x k的matrix會吐出n x 1的vector
有丟過一些值進去算過~
都有給出想要的結果~
但不知道為什麼~
一丟進optim裡馬上就掛了~
跳出""錯誤在matrix(rep(mu_x, length(x)), nrow = s) : 矩陣的範圍不能是負值""~

附上程式碼如下：http://nopaste.info/e864a2b39d.html本來這是跑得動的~
但是因為後來加了幾個變數(sig_v, sig_x跟sig_epo)必須是正的~
在負數上的函數值要為0(因為函數統一回傳log值，所以在code中是指定為-Inf)~
ind_vs那幾行程式碼之後就出問題了....

謝謝大家

[關鍵字]:
 矩陣 範圍不能是負值

--

--","R_Language"
"2558","M.1393326390.A.2CA","kingleo28","問題","R documention file如何生成",2014-02-25 19:06:27,NA,NA,"請問一下....請問板上有寫R_package經驗的人.

最近嘗試在寫R_package,之後打算發布.

所以打算寫出R_document,就是下載任一R_package,裡面都會附有一PDF檔,

其類似package的使用手冊,

google一下,網上是說會自動生成.

可是我建造出來的package就是不會包含此PDF.

所以想請問網上有寫PACKAGE經驗的先進,該如何解決此問題.


--","R_Language"
"2559","M.1393316667.A.8D2","ww2308","問題","Decision Tree Plot 問題",2014-02-25 16:24:23,NA,NA,"各位大大好 我想請問當我plot Decision Tree的結果時

  如下圖https://dl.dropboxusercontent.com/u/5841657/test.png有辦法調整整張圖的大小嘛？

  我希望可以看見整個Tree的結構 以及整個node的資訊

  謝謝！


--","R_Language"
"2560","M.1393037709.A.434","jack781012","問題","畫圖問題",2014-02-22 10:55:07,NA,NA,"請問一下如何弄出下圖中紅色框框裡不同線條對應到不同屬性的對照表http://ppt.cc/j--O小弟用R做圖是使用curve這個指令
並用lty這個指令來改變線條的種類
還請請板上高人提點,謝謝

--","R_Language"
"2561","M.1392975935.A.6F3","kusoayan","問題","如何 impute missing data",2014-02-21 17:45:32,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

現在手上有一筆資料，但是某些地方是 missing 的（NA）
現在想使用 mi 這個 package 來做 imputation
但是我照著範例

train.data <- read.csv(""my_train.csv"")

miInfo <- mi.info(train.data)
train.data <- mi(train.data, mi.info)

的時候就出現「錯誤: 無法配置大小為 561.6 Mb 的向量」

不知道有什麼方法可以修正這個錯誤？或是有沒有別的簡易 imputation method?

謝謝


[關鍵字]:

imputation, NA, missing data

--","R_Language"
"2562","M.1392927410.A.2D9","Kurki","問題","請問版上有人在用ShortRead/Biostrings嗎",2014-02-21 04:16:47,NA,NA,"程式諮詢~~
我想要用R來分析RNAseq的data，但是我的R功力還太菜，有很多基礎的問題 @@""
請問版上有人有使用ShortRead/Biostrings packages 的經驗嗎？

感謝 <(_ _)>


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)




[關鍵字]:
RNAseq/ShortRead/Biostrings

--","R_Language"
"2563","M.1392887017.A.0C7","warex14","問題","整數轉字元",2014-02-20 17:03:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個x<-c(2 , 3.5 , 5.78 , 6.01)> x[1] 2.00 3.50 5.78 6.01

我想用as.character轉成文字

但結果卻是這樣> as.character(x)[1] ""2""    ""3.5""  ""5.78"" ""6.01""

有沒有辦法讓第一個元素是""2.00""？


--","R_Language"
"2564","M.1392885633.A.F91","gina21","問題","加速大矩陣運算速度?",2014-02-20 16:40:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)效能諮詢(我想讓R 跑更快)[軟體熟悉度]:研究所使用起約兩年多[問題敘述]:因為模擬需要運算2000*2000大型矩陣，並計算其反矩陣每次都在這個步驟卡很久，計算一次大矩陣就要就花個30秒但是我要算幾百組資料而且要重複計算可能上千次我現在有200組模擬資料 光一組就要花2天多...以後可能會有5000*5000的矩陣(?) T_T想問有沒有什麼辦法可以讓""大矩陣""運算速度快一點???[關鍵字]:非常大的矩陣--","R_Language"
"2565","M.1392780845.A.975","anovachen","問題","怎麼用R作Jordan Form?",2014-02-19 11:34:02,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
如何用R作Jordan canonical form？
有package可用嗎?
還是一定要用Maple或MatLab才行= =?

[程式範例]:

[關鍵字]:
Jordan form

--","R_Language"
"2566","M.1392728752.A.247","puppy77","問題","glm指令的參數weights",2014-02-18 21:05:49,NA,NA,"glm指令中有一參數weights

?weights 裡面的解釋看不太懂

我知道他是表示每筆資料的權重

想問實際上在解迴歸係數的時候這參數是怎麼用的?

是否為加權最小平方法的權重?

謝謝

--","R_Language"
"2567","M.1392710752.A.51C","chong","問題","畫histogram",2014-02-18 16:05:49,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我手邊有一組約10萬筆數字組成的資料，想將它們依固定間格畫製histogram圖表，
它們的範圍從200到13000，
我可以用下列程式碼
break <- seq(min(X), max(X), 200)
hist(rev(sort(X)))
將全部的數據都包括進來。
但由於它們太偏左邊（小數據居多），整個右半部便顯的很空。

請問如果我想將大於4000的數據歸於同一類，然後再繪製histogram，
該怎麼進行比較洽當？

謝謝

[關鍵字]:選擇性，也許未來有用histogram

--","R_Language"
"2568","M.1392043357.A.7FF","jobs","問題","dplyr - 如何用字串來操作filter",2014-02-10 22:42:31,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我想要一個比較一般化的方法來使用 dplyr 裡的各種 functions
這些 function 通常需要將 data frame 的 column name 傳入
我希望可以用字串來指定我想要的 column


[程式範例]:

library(dplyr)
library(hflights)
hflights_df <- tbl_df(hflights)

filter(hflights_df, Month == 1, DayofMonth == 1)
#No problem

m=""Month""
d=""DayofMonth""
filter(hflights_df, get(m) == 1, get(d) == 1)
#Error in get(""Month"") : object 'Month' not found


--","R_Language"
"2569","M.1392026333.A.4E2","ireullin","問題","在windows command line中執行rscript",2014-02-10 17:58:51,NA,NA,"請問一下
以下為我的程式碼
library(googleVis)
col1 = c(1:3)
col2 = c(4:6)
df = data.frame(col1, col2)
View(df)
vis <- gvisLineChart(data=df, yvar='col1', xvar='col2'  )
plot(vis)

在rstudio中執行正常
但是我直接在command line中執行卻會發生以下錯誤http://ppt.cc/yDIn請問有人知道這是什麼問題嗎

另外請問一下我呼叫View(df)的時候
在RStudio會顯示到一個頁籤中
但是如果用rscript執行
他閃一下就消失了
請問要如何讓他留下來或是輸出到瀏覽器中


--","R_Language"
"2570","M.1392004363.A.F0B","koai","問題","Re: 資料分類",2014-02-10 11:52:40,NA,NA,"※ 引述《puppy77 (  )》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有n筆資料，每筆資料都有m個變數，存在data.frame裡面(維度n*m): 需要依照m個變數的值去做分類，譬如當一筆資料: V1<0 and V2>V3 and V4 %in% c(""W"",""Z""): 就會分類為第1類: 類別有很多，大約30類左右: 希望最後得到一個長度n的向量，向量裡面的數字就是分類的編號: 原本是想用if else if去做，但似乎不能用在向量上: 只會對第一筆資料做判斷(這部分我不是非常確定，還請大家糾正): 所以外面需要套上for迴圈去一筆一筆判斷: 但因為資料非常多，還是希望能夠以向量的方式下去做: 我目前的做法是: result = rep(0,n)  #記錄最後分類結果的向量: fg = rep(T,n)  #記錄每一筆資料是否被分類過(已分類F，未分類T): r1 = 是否符合第1類條件的向量(長度n，內容全是T or F): result[r1 & fg] = 1: fg[r1 & fg] = F^^^^^^^^^^^^^^^^^^^
有這個動作是因為被分類為類別1者,
有可能會滿足其他分類的條件,
但類別數字較小者較強, 即
若某列資料同時滿足兩個以上的分類條件,
則此列資料被分類為最小編號類!
是這樣子解釋嗎?
如果這就是你要作的事,
可參考以下做法:

n <- 100
m <- 10
X <- data.frame(matrix(sample(-10:10,n*m,r=T),n))
names(X) <- paste(""V"",1:ncol(X),sep="""")
X[1:5,]
result <- rep(0,n)
result[ X$V10>5 & X$V5>X$V7 & X$V8 %in% c(3: 6)] <- 30
result[ X$V4>3  & X$V9>X$V2 & X$V2 %in% c(1: 4)] <- 29
# result[""第28類條件""] <- 28
# result[""第27類條件""] <- 27
##
## 條件區為必要的部分, 不知道其他高手是否有更精簡的寫法... @@""
##
result[ X$V1<0  & X$V2>X$V3 & X$V4 %in% c(5,10)] <- 1
result
## 越強的分類越晚判斷,這樣可以省去你做 ""fg[r1 & fg] = F"" 動作的必要性!
## 不知道這是不是你要作的事, 好像只有節省一點力氣而已, 參考看看吧!: r2 = 是否符合第2類條件的向量: result[r2 & fg] = 2: fg[r2 & fg] = F: 依此類推到最後: 雖然這個已達到我的要求，不過還是稍嫌麻煩，不知道有無更俐落的寫法?--","R_Language"
"2571","M.1391959002.A.658","coccolegacy","問題","Re: RStudio操作上遇到的奇怪問題",2014-02-09 23:16:40,NA,NA,"※ 引述《ireullin (raison detre)》之銘言：: 小弟在操作RStudio上遇到一個奇怪的問題: http://ppt.cc/YLEI: 我透過: vis <- gvisLineChart(data=dfTime,yvar='total_time', xvar='worker_amount' ): plot(vis): 將數據繪成圖表秀在viewer上: 可是畫面的左側出現卻是空白的: 我一直以為是我有那裡弄錯: 直到我不小心點到滑鼠右鍵的open frame將他秀到chrome上時(畫面左邊): 才發現其實有被畫出來: 請問有人遇過相同問題嗎: 或者我是否可以直接就將圖表秀在瀏覽器上: 不要再透過viewer了 或是再從viewer點一次如果是想直接用瀏覽器顯示
可以先執行下列指令
options(""googleVis.viewer"" = NULL)http://lamages.blogspot.tw/2013/11/googlevis-047-with-rstudio-integration.html--","R_Language"
"2572","M.1391948218.A.A97","puppy77","問題","資料分類",2014-02-09 20:16:52,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我有n筆資料，每筆資料都有m個變數，存在data.frame裡面(維度n*m)

需要依照m個變數的值去做分類，譬如當一筆資料

V1<0 and V2>V3 and V4 %in% c(""W"",""Z"")

就會分類為第1類

類別有很多，大約30類左右

希望最後得到一個長度n的向量，向量裡面的數字就是分類的編號



原本是想用if else if去做，但似乎不能用在向量上

只會對第一筆資料做判斷(這部分我不是非常確定，還請大家糾正)

所以外面需要套上for迴圈去一筆一筆判斷

但因為資料非常多，還是希望能夠以向量的方式下去做



我目前的做法是

result = rep(0,n)  #記錄最後分類結果的向量

fg = rep(T,n)  #記錄每一筆資料是否被分類過(已分類F，未分類T)

r1 = 是否符合第1類條件的向量(長度n，內容全是T or F)

result[r1 & fg] = 1

fg[r1 & fg] = F

r2 = 是否符合第2類條件的向量

result[r2 & fg] = 2

fg[r2 & fg] = F

依此類推到最後

雖然這個已達到我的要求，不過還是稍嫌麻煩，不知道有無更俐落的寫法?

--","R_Language"
"2573","M.1391869515.A.9E1","ireullin","問題","RStudio操作上遇到的奇怪問題",2014-02-08 22:25:12,NA,NA,"小弟在操作RStudio上遇到一個奇怪的問題http://ppt.cc/YLEI我透過
vis <- gvisLineChart(data=dfTime,yvar='total_time', xvar='worker_amount' )
plot(vis)
將數據繪成圖表秀在viewer上
可是畫面的左側出現卻是空白的
我一直以為是我有那裡弄錯
直到我不小心點到滑鼠右鍵的open frame將他秀到chrome上時(畫面左邊)
才發現其實有被畫出來
請問有人遇過相同問題嗎
或者我是否可以直接就將圖表秀在瀏覽器上
不要再透過viewer了 或是再從viewer點一次


--","R_Language"
"2574","M.1391703602.A.E6D","Wush978","分享","五分鐘建立R的命令列應用程式",2014-02-07 00:19:58,NA,NA,"[關鍵字]: R, Console Application

[出處]:https://www.youtube.com/watch?v=A1IIcZW5UrI[重點摘要]:

最近我寫一堆要用命令列呼叫的R的應用程序，深深覺得optparse真是個好東西。

在這邊跟大家分享。

--","R_Language"
"2575","M.1391604173.A.59C","silent910","問題","從樞紐分析的結果，找出x軸和y軸的標題",2014-02-05 20:42:51,NA,NA,"[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題描述]如標題所示，我有一筆多種類別的時間序列型資料，經過cast做了樞紐分析我想把樞紐分析的矩陣的x,y軸找出來，是用哪一種function??ex：(樞紐過後的結果如下所示)day a  b   c   d   e1  0.5 1  0.2 0.5 0.22  0.1 0.2 1  0.4  .3   .4   .5   .6   .7   .我有把它變成一個data.frame怎麼找到這個table 的標題  a b c d e ??感謝大大!!!--","R_Language"
"2576","M.1391595197.A.82C","koai","問題","Re: 利用R模擬受試在某些題目上亂猜的反應",2014-02-05 18:13:14,NA,NA,"沿用你的程式碼, 猜測以下是你要做的事:

Aberr1<<-which(theta <0, arr.ind=T)  # 哪些編號代表低能力者
Low <- Data[Aberr1,]  # 將低能力者的答題反應取出
for(k in 1:length(Aberr1)){
  tmp <- which(Low[k,]==0)  # 每一個低能力者,答錯的題號
  Low[k,tmp] <- sample(c(0,0,0,1),length(tmp),replace=TRUE)  # 將答錯的題目, 以1/4的猜對機率取代為正確
}
Low  # 低能力者作假的作答反應
rowSums(Low-Data[Aberr1,])  # 原本是答錯,隨機被置換成正確答案(猜對)的個數!
AbData <- Data
AbData[Aberr1,] <- Low
AbData  # 作假的作答反應
rowSums(AbData-Data)※ 引述《btoco (望盡天涯路)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): 其實這個分類好難選啊XD: 我有用過R的一些package進行分析，只是以前資料的產生: 都是利用Excel來產出，目前想學習如何利用程式來達到此目的。: [問題敘述]:: 在試題反應理論（IRT）中，藉由受試者的能力參數、試題參數（難度、鑑別度、: 猜測度）可以估計出該名受試通過某題的機率，再將其與隨機產生的亂數進行比較: ，就可以得到受試可能的答題反應。: 目前在參考一些書籍與網路資源後，我已經可以產生正確的答題反應了，但接著我: 想模擬產生低能力者（能力參數低於0）假性高分，隨機答對的情況。也就是說這些: 低能力者原本答錯的試題被隨機置換為正確（25%的答對率）。: [程式範例]:: #正確的答題反應: theta <<- sort(runif(100,-3,3))  #產生能力參數: delta <<- sort(runif(15,-2,2))   #產生試題難度參數: theta.matrix <<- matrix(theta,100,1) %*% matrix(1,1,15)  #能力參數矩陣: delta.matrix <<- matrix(1,100,1) %*% matrix(delta,1,15) #難度參數矩陣: logs1 <<- theta.matrix-delta.matrix  #能力-難度參數矩陣: probs <<- (1+exp(-logs1))^-1  #各題答對機率: Random_ <<- runif(100*15)  #作為與答對機率比較的隨機機率: Data <<- ifelse(matrix(Random_,100,15) > probs,0,1)  #正確的答題反應: #異常作答反應: #假性高分：能力值低於0者被挑選出來，其答錯試題被隨機置換為正確答案。: Aberr1<<-which(theta <0, arr.ind=T): ..................................................................: 其實到怎麼產生作假的作答反應，我就整個卡住了。: 我目前的想像是利用邏輯判斷找出低能力者，再將他們答錯的反應挑出後，: 產生0、1的數列，其中1僅佔25%。但怎麼做到這樣的想像，且還要將這些作答反: 應置換回原先的正確答題反應中，產生一個假性高分的資料矩陣真的是陷入鬼打牆: 的迴圈啊！！！: 這樣的問題，好像很簡單，但真的不曉得怎麼挑出人與產生這樣的虛假反應，: 再請各位先進與專家協助指點迷津了~: 我也會繼續嘗試，感謝啊！！！！: [關鍵字]:: 機率、矩陣置換、資料產生--","R_Language"
"2577","M.1391592827.A.B14","btoco","問題","利用R模擬受試在某些題目上亂猜的反應",2014-02-05 17:33:44,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
其實這個分類好難選啊XD
我有用過R的一些package進行分析，只是以前資料的產生
都是利用Excel來產出，目前想學習如何利用程式來達到此目的。
[問題敘述]:
在試題反應理論（IRT）中，藉由受試者的能力參數、試題參數（難度、鑑別度、
猜測度）可以估計出該名受試通過某題的機率，再將其與隨機產生的亂數進行比較
，就可以得到受試可能的答題反應。
目前在參考一些書籍與網路資源後，我已經可以產生正確的答題反應了，但接著我
想模擬產生低能力者（能力參數低於0）假性高分，隨機答對的情況。也就是說這些
低能力者原本答錯的試題被隨機置換為正確（25%的答對率）。

[程式範例]:
#正確的答題反應
theta <<- sort(runif(100,-3,3))  #產生能力參數
delta <<- sort(runif(15,-2,2))   #產生試題難度參數
theta.matrix <<- matrix(theta,100,1) %*% matrix(1,1,15)  #能力參數矩陣
delta.matrix <<- matrix(1,100,1) %*% matrix(delta,1,15) #難度參數矩陣
logs1 <<- theta.matrix-delta.matrix  #能力-難度參數矩陣
probs <<- (1+exp(-logs1))^-1  #各題答對機率
Random_ <<- runif(100*15)  #作為與答對機率比較的隨機機率
Data <<- ifelse(matrix(Random_,100,15) > probs,0,1)  #正確的答題反應

#異常作答反應
#假性高分：能力值低於0者被挑選出來，其答錯試題被隨機置換為正確答案。
Aberr1<<-which(theta <0, arr.ind=T)
..................................................................

其實到怎麼產生作假的作答反應，我就整個卡住了。
我目前的想像是利用邏輯判斷找出低能力者，再將他們答錯的反應挑出後，
產生0、1的數列，其中1僅佔25%。但怎麼做到這樣的想像，且還要將這些作答反
應置換回原先的正確答題反應中，產生一個假性高分的資料矩陣真的是陷入鬼打牆
的迴圈啊！！！

這樣的問題，好像很簡單，但真的不曉得怎麼挑出人與產生這樣的虛假反應，
再請各位先進與專家協助指點迷津了~
我也會繼續嘗試，感謝啊！！！！

[關鍵字]:

機率、矩陣置換、資料產生

--","R_Language"
"2578","M.1391463164.A.055","andrew43","問題","Re: 用data.frame中的某個column擷取網頁資料",2014-02-04 05:32:37,NA,NA,"假設你有一個 data frame 叫 x，其中有一個欄叫 id。因此，

  myURL <- paste(""http://www.ncbi.nlm.nih.gov/gene/"",x$id, sep="""")

就是所有要去拿取的完整網址。

以下一個為你設計的 function 先餵 R 吃下去。
它可以一次拿取一個網頁裡你要的資料。

myfunc <- function(myURL){
  con <- url(myURL)
  txt <- scan(con, what=""character"")
  close(con)
  txt1 <- paste(txt, sep="""", collapse="" "")
  pattern <- ""<dt>Summary</dt> <dd>[[:print:]]+</dd>""
  re <- regexpr(pattern, txt1)
  start <- re[1]
  end <- start[1] + attr(regexpr(pattern, txt1),""match.length"") - 1
  return(substr(txt1, start + 22, end - 5))
}

再試試看

  myfunc(""http://www.ncbi.nlm.nih.gov/gene/2597"")的結果是不是你要的。有需要的話自己修一下。
可以的話，就用迴圈把 myURL 一個一個丟給 myfunc()

  results <- list()
  for(i in 1:length(myURL)){
    results[[i]] <- myfunc(myURL[i])
  }

這樣應該就好了。: 各位好: 我需要下載數百個基因的資料: 網址的格式是:: http://www.ncbi.nlm.nih.gov/gene/XXXX: 其中XXXX是這些基因的ID(可能是四個數字或更多): 比如GAPDH ID是2597: 那連結就是：http://www.ncbi.nlm.nih.gov/gene/2597: 如果我的data frame中有一個column是這些IDs: 我應該如何寫出簡單的R scripts來擷取這些網頁中的""Summary""中的敘述: 並加到原本data.frame中相對應rows 形成一個新的column (不包括""Summary""這字本身): 例如對GAPDH而言就是: ""This gene encodes ... variants. [provided by RefSeq, Jan 2014]"": 我想應該是用Rcurl跟grep: 但因為完全外行: 不知道如何逐個ID數值加到Rcurl網址的最後: 再將下載的網頁以grep搜尋到的strings加到對應的rows裡: 這樣的問題很不專業: 如果有任何的提示都歡迎: 謝謝各位專家: [程式範例]:: [關鍵字]: R 網頁下載 部分擷取--http://apansharing.blogspot.com/--","R_Language"
"2579","M.1391433941.A.BDF","stinky","問題","用data.frame中的某個column擷取網頁資料",2014-02-03 21:25:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位好
我需要下載數百個基因的資料
網址的格式是:http://www.ncbi.nlm.nih.gov/gene/XXXX其中XXXX是這些基因的ID(可能是四個數字或更多)
比如GAPDH ID是2597
那連結就是：http://www.ncbi.nlm.nih.gov/gene/2597如果我的data frame中有一個column是這些IDs
我應該如何寫出簡單的R scripts來擷取這些網頁中的""Summary""中的敘述
並加到原本data.frame中相對應rows 形成一個新的column (不包括""Summary""這字本身)
例如對GAPDH而言就是
""This gene encodes ... variants. [provided by RefSeq, Jan 2014]""

我想應該是用Rcurl跟grep
但因為完全外行
不知道如何逐個ID數值加到Rcurl網址的最後
再將下載的網頁以grep搜尋到的strings加到對應的rows裡

這樣的問題很不專業
如果有任何的提示都歡迎
謝謝各位專家




[程式範例]:

[關鍵字]: R 網頁下載 部分擷取

--","R_Language"
"2580","M.1391415608.A.217","tokyo291","問題","想請問合併交互作用圖的coding",2014-02-03 16:20:05,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

目前在做ANOVA,在探討有4個factor每個都是3-level

在比較two way interaction時總共會產生6張interaction plot

因為印象中之前有看過有人做出類似這種圖得比較http://tinyurl.com/lt3yz9r想請問該使用哪個function來繪製此圖呢?

(目前我是用interaction.plot下去合併)

[關鍵字]:

交互作用 合併

--","R_Language"
"2581","M.1391248826.A.5B7","kusoayan","問題","如何對兩個 data.frame 做 Join？",2014-02-01 18:00:22,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:

假設我有 A, B 兩個 data.frame

A 有 item_id, item_name 和其他不重要的 columns
B 有 item_id, item_count

那我要怎麼把 A 和 B join 起來？
其實也就是想讓 A 的每一個 row 後面都接上 item_id 對應到的 item_count
用 SQL 就是類似

SELECT A.item_id, A.item_name, B.item_count
FROM A, B
WHERE A.item_id = B.item_id

我想問的是除了直接跑 for loop 一筆一筆做之外，有更聰明的作法嗎？
類似 index vector 之類的？

謝謝！

[關鍵字]:data frame, join--","R_Language"
"2582","M.1390993579.A.6FF","Wush978","問題","Re: 將多個data frame放入list進行操作",2014-01-29 19:06:15,NA,NA,":: 另外請問list與array的差別是?:
一般來說，R 的數值物件都是向量，

ex:

```
x <- pi
show(x)
length(x)
dim(x)
```

這表示x 是一個長度1 的向量。
向量加上dimension的概念後就變成array

ex:

```
dim(x) <- c(1,1)
show(x)
class(x)
dim(x) <- c(1,1,1)
show(x)
class(x)
dim(x)
```

以上述為例，x 是個數值向量，而matrix, array本質上也是數值向量。
你只要拿掉dim 之後就變回去了。

但是 list 不一樣，

list 是裝著一堆R物件的向量。所以list裡面可以放任何東西，如：

- 數值
- matrix
- array
- data.frame ( ps. data.frame的本質是 list, 和array/matrix差別很多 )
- list
- 函數

ex:

```
x <- list()
x[[1]] <- pi
x[[2]] <- iris
x[[3]] <- Sys.time
x[[3]]()
```

list 和 一般的向量最大的不同，就在於list可以裝不一樣的物件。

以字串和數值為例，你沒辦法讓一個向量同時有數值和字串：

```
x <- 1:10
show(x)
x[10] <- ""10""
show(x)
```

同理，matrix和array也有同樣的狀況

```
x <- matrix(1:10, 5, 2)
show(x)
x[1,2] <- ""6""
show(x)
```

但是list沒有這樣的限制：

```
class(iris[,1])
class(iris[,5])
```

這也是為什麼data.frame的底層是list, 而不能用一般的向量的緣故。

--","R_Language"
"2583","M.1390976730.A.4E9","ireullin","問題","將多個data frame放入list進行操作",2014-01-29 14:25:27,NA,NA,"很抱歉又來問一些可能是很基礎的問題
我有五張相同格式的csv表
我想把他讀進來之計算之後
在每張表的最後多加兩個columns

所以我將他放進一個 list ( 我原本想用array,可是好像不行 )
然後用一個迴圈去處理他
可是會出現以下的警告
Warning messages:
1: In df[i]$difftime <- difftime(dtTime, dtBase) :
  number of items to replace is not a multiple of replacement length

而且每張表好像都沒有被多加columns
請問我是有那裡弄錯了嗎

另外請問list與array的差別是?


df = list(
  read.csv(file='worker05.csv', header=TRUE),
  read.csv(file='worker10.csv', header=TRUE),
  read.csv(file='worker15.csv', header=TRUE),
  read.csv(file='worker20.csv', header=TRUE),
  read.csv(file='worker25.csv', header=TRUE)
)


for(i in 1:length(df))
{
  tmp <- substring( as.character(df[i]$time), 7,14)
  dtTime <- c(strptime( tmp, format=""%H:%M:%S""))
  dtBase <- rep(dtTime[1], length(dtTime))

  # 填入計算後的資料
  df[i]$spentime <- difftime(dtTime, dtBase)
  df[i]$usage <- 100 - c(df[i]$idl)
}



--","R_Language"
"2584","M.1390877905.A.717","gsuper","問題","平行運算 60 核",2014-01-28 10:58:21,NA,NA,"有人下過60 cores 去跑 R 的嗎?

會不會很容易操壞電腦?

--","R_Language"
"2585","M.1390785683.A.5D3","Wush978","分享","五分鐘學會「如何使用Rstudio建立R套件 ",2014-01-27 09:21:20,NA,NA,"[關鍵字]: R, Rstudio, Package

[出處]:https://www.youtube.com/watch?v=OCQU6M4pPiw[重點摘要]:

這是我週末錄的教學，outline為：

1. 建立套件
2. 說明DESCRIPTION
3. 說明NAMESPACE
4. 說明""R""
5. 建立hello
6. build source
7. 發佈

未來希望能夠製作完整的R 的教學地圖（草稿）：https://www.lucidchart.com/documents/view/4634-8920-52dbcaa7-afed-66400a009db8每個單元都能搭配5-10 minutes的影片。

歡迎有興趣的人可以私下聯絡我。

--","R_Language"
"2586","M.1390663072.A.913","shirley587","問題","用R軟體做購物籃分析(關聯規則)",2014-01-25 23:17:45,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位前輩們好 我是第一次使用R 之前也沒有寫程式的經驗
要做購物籃分析  使用的是arules這個套件
手上有一個.csv檔案 格式如下
ID      ItemA   ItemB   ItemC   ItemD
1         1       0       0       1
2         0       1       0       1
3         1       1       1       0
4         1       0       0       1
5         1       1       0       1
......

我主要是參考這篇 以及其他網路相關資料http://xccds1977.blogspot.tw/2011/08/apriori.html步驟如下
1.安裝用來跑購物籃分析的套件arules
並把.csv檔案匯入R

2.想把數據轉為合適的格式
輸入的程式碼如下
data2<-as(test2, ""transactions"")
輸入後顯示 no method or default for coercing “data.frame” to “transations”

碰到的問題和這位網友一樣http://cos.name/cn/topic/112247這位網友後來有找到解決方法
說是要轉成矩陣的格式

想請教各位先進
要怎麼樣才能轉成適合的矩陣格式呢?

(不好意思 因為沒有什麼基礎 看了很多資料卻不知道該怎麼做
只好上來詢問 謝謝各位的幫忙)
--
[其它參考資料]:http://www.dataguru.cn/article-3326-1.htmlhttp://cran.r-project.org/web/packages/arules/vignettes/arules.pdfhttp://cos.name/2013/02/association-rules-with-r-and-sas/http://web.ydu.edu.tw/~alan9956/docu/refer/R07_AssociationRules_northwind.pdf--","R_Language"
"2587","M.1390646245.A.55C","gsuper","問題","請問大家都在做甚麼工作?",2014-01-25 18:37:18,NA,NA,"閒聊文

我前陣子在生物資訊實驗室做研究助理(2年)

後來跑到一家小型生技公司 , 做資料分析員 , 掛名是研究員(不足半年)

主要的內容是做統計分析 , 也會碰到資料庫系統的設計

比方說檢體管制單什麼的 , 或是將來預計要寫的會計系統

有時也會被PM帶出去與客戶做產品講解

請問大家都在做甚麼樣的工作呢?

--
我用名為真心的卡牌說服你
這是我最後一張牌

--","R_Language"
"2588","M.1390409592.A.889","Wush978","問題","Re: 品質與壓縮率最平衡的位置",2014-01-23 00:53:07,NA,NA,"※ 引述《ireullin (raison detre)》之銘言：: 請問一下: 我是R的初學者: 也沒有統計與數學方面的基礎: 下面連結是我使用googleVis畫出來的一個圖表: http://ppt.cc/gWY8: str(data.frame) 是長成下面這個樣子的: $ gd           : num  0.0092 0.00921 0.00993 0.01131 0.01274 ...: $ gm           : num  0.0221 0.0221 0.0229 0.0245 0.0263 ...: $ dfgm.size05.q: int  1 2 3 4 5 6 7 8 9 10 ...: gm與gd的值是壓縮率: dfgm.size05.q 是品質: 我想要找出 gm 與gd兩條線在品質與壓縮率最平衡的位置: 是否可以給我一些建議: 目前想到的是對兩條線微分取斜率為1的位置這裡牽涉到所謂的「平衡」要如何量化的問題。

由於我沒有相關背景知識，恐怕無法給出更具體的建議。: 是否有其他方式: 如果要微分的話: 請問在R中要如何對這data frame進行微分我以前用過sm套件，或是fda套件可以做smoothing之後估計微分的值。

細節我現在不太方便細打，所以請你先自己摸摸看囉。

--","R_Language"
"2589","M.1390408943.A.AA7","Wush978","分享","R 編碼簡介",2014-01-23 00:42:20,NA,NA,"[關鍵字]: R, Encoding

[出處]:http://www.youtube.com/watch?v=GG2UFrmdtH4[重點摘要]:

12分鐘簡介何謂「編碼」，以及在R 匯入資料時如何解決簡單的編碼問題。

--","R_Language"
"2590","M.1390388190.A.351","ireullin","問題","品質與壓縮率最平衡的位置",2014-01-22 18:56:28,NA,NA,"請問一下
我是R的初學者
也沒有統計與數學方面的基礎
下面連結是我使用googleVis畫出來的一個圖表http://ppt.cc/gWY8str(data.frame) 是長成下面這個樣子的
$ gd           : num  0.0092 0.00921 0.00993 0.01131 0.01274 ...
$ gm           : num  0.0221 0.0221 0.0229 0.0245 0.0263 ...
$ dfgm.size05.q: int  1 2 3 4 5 6 7 8 9 10 ...

gm與gd的值是壓縮率
dfgm.size05.q 是品質
我想要找出 gm 與gd兩條線在品質與壓縮率最平衡的位置
是否可以給我一些建議
目前想到的是對兩條線微分取斜率為1的位置
是否有其他方式

如果要微分的話
請問在R中要如何對這data frame進行微分


--","R_Language"
"2591","M.1390315354.A.F88","Wush978","情報","dplyr",2014-01-21 22:42:31,NA,NA,"[關鍵字]: R, 資料整理, package, dplyr

[出處]:http://blog.rstudio.org/2014/01/17/introducing-dplyr/[重點摘要]:

Hadley又釋出了新的整理資料用的套件！

介紹中最讓我驚豔的是：



    With dplyr, anything you can do to a local data frame you can also
     do to a remote database table. PostgreSQL, MySQL, SQLite and
    Google bigquery support is built-in.

簡單來說, 除了R 自己的data.frame之外, 這傢伙還支援各種資料庫系統。酷！


--","R_Language"
"2592","M.1389803360.A.B7B","Wush978","分享","R 中計算函數的微分",2014-01-16 00:29:16,NA,NA,"[關鍵字]: R, differentiation, calculas, algebraic computation

[出處]:http://rpubs.com/wush978/differentiation[重點摘要]:

    ps. 好讀版請參考上面的link。

    最近筆者有計算一個函數的Gradient和Hessian的需求，所以研究了一下R 中
    進行這類計算的功能和套件。

    以下我會介紹R 中進行數值微分和代數微分的功能。

    # numDeriv

    我第一個介紹的是數值微分套件：`numDeriv`。他的用法很簡單：

    ## `grad`

    `grad`函數可以拿來計算函數在指定點的gradient：

    ```{r}
    library(numDeriv)
    f <- function(x) x^2
    grad(f, 2)
    ```

    `grad`也可以計算向量函數的gradient：

    ```{r}
    f <- function(x) x[1] * x[2]
    grad(f, c(1,2))
    ```

    ## hessian

    `hessian`可以計算函數在指定點的hessian

    ```{r}
    hessian(f, 1:2)
    ```

    由於是數值解的關係，所以可以看到二階微分會算出很小的值。

    # `deriv`

    接下來我要介紹一個做代數微分的功能。

    首先我們把剛剛的`f <- function(x) x^2`寫成expression：

    ```{r}
    f <- function(x) x^2
    f.exp <- expression(x^2)
    ```

    接著使用內建的`deriv`：

    ```{r}
    deriv(f.exp, namevec=""x"")
    ```

    R 就會回傳出計算gradient的方式。將它複製貼上建立函數，並且修改內容
    讓它是vectorized：

    ```{r}
    g <- function(x) {
      .value <- x^2
      .grad <- 2 * x
      .grad
    }
    ```

    和`numDeriv`的結果做個比較：

    ```{r}
    all.equal(g(2), grad(f, 2))
    ```

    `deriv`的另一個參數`hessian`設為`TRUE`的時候，回傳值會附加hessian的
    算式。

    # 範例

    根據`r citet(bib[""bowling2009logistic""])`，以下函數是standard
    normal cdf的logistic approximation：

    $$F(x) = \frac{1}{1+e^{-0.07056 x^3 - 1.5976 x}}$$

    ```{r}
    F.0 <- function(x) 1/(1 + exp(-0.07056 * x^3 - 1.5976 * x))
    curve(pnorm, -3, 3, lty = 1)
    curve(F.0, add = TRUE, col = 2, lty = 2)
    ```

    肉眼根本分不出來差異！

    如果我們用它來取代某些Likelihood中的standard normal cdf(當資料有
    censoring的時候)，在計算MLE的時候就會需要計算$F'(x)$和$F''(x)$。他
    們分別是：

    - $$F'(x) =
    -{{\left(-0.21168\,x^2-1.5976\right)\,e^{-0.07056\,x^3-1.5976\,x}
     }\over{\left(e^{-0.07056\,x^3-1.5976\,x}+1\right)^2}}$$
    - $$F''(x) =
    -{{\left(-0.21168\,x^2-1.5976\right)^2\,e^{-0.07056\,x^3-1.5976\,x
    }
     }\over{\left(e^{-0.07056\,x^3-1.5976\,x}+1\right)^2}} +
      \frac{0.42336\,x\,
    e^{-0.07056\,x^3-1.5976\,x}}{\left(e^{-0.07056\,x^3-1.5976\,x} +
    1\right)^2} +
      {{2\,\left(-0.21168\,x^2-1.5976\right)^2\,e^{-0.14112\,

    x^3-3.1952\,x}}\over{\left(e^{-0.07056\,x^3-1.5976\,x}+1\right)^3}
    }$$

    好醜好難寫。

    這時候就可以利用`deriv`來建立gradient and hessian。先建立gradient：


    ```{r}
    F.exp <- expression(1/(1 + exp(-0.07056 * x^3 - 1.5976 * x)))
    deriv(F.exp, namevec=""x"")
    ```

    稍作修改就可以得到：

    ```{r}
    F.1 <- function(x) {
      .expr6 <- exp(-0.07056 * x^3 - 1.5976 * x)
      .expr7 <- 1 + .expr6
      .value <- 1/.expr7
      .expr6 * (0.07056 * (3 * x^2) + 1.5976)/.expr7^2
    }
    ```

    再參考`deriv`的hessian算式：

    ```{r}
    deriv(F.exp, namevec=""x"", hessian=TRUE)
    ```

    可以寫出：

    ```{r}
    F.2 <- function(x) {
      .expr6 <- exp(-0.07056 * x^3 - 1.5976 * x)
      .expr7 <- 1 + .expr6
      .expr12 <- 0.07056 * (3 * x^2) + 1.5976
      .expr13 <- .expr6 * .expr12
      .expr14 <- .expr7^2
      1/.expr7
      (.expr6 * (0.07056 * (3 * (2 * x))) -
          .expr13 * .expr12)/.expr14 + .expr13 * (2 * (.expr13 *
          .expr7))/.expr14^2
    }
    ```

    和`numDeriv`比較一下：

    ```{r}
    x <- rnorm(1)
    grad(F.0, x)
    F.1(x)
    hessian(F.0, x)
    F.2(x)
    ```

    完全一致！

    但是用`deriv`建立的函數效能絕對比較好：

    ```{r}
    library(microbenchmark)
    microbenchmark(grad(F.0, x), F.1(x))
    microbenchmark(hessian(F.0, x), F.2(x))
    ```

    以上內容給大家參考囉！

    # Reference

    ```{r, results='asis', echo=FALSE}
    bibliography()
    ```

--","R_Language"
"2593","M.1389756087.A.AD2","tai34","問題","從多個圖抽取一張圖",2014-01-15 11:21:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
各位大大好:
小弟利用 gam 建模後的model 利用跑 30 次預測。 並畫出下列網址的圖:http://ppt.cc/2gjQ但是我只需要裡面最後一張圖(地 31 張圖，前 30 次的平均)，
想請問有辦法只讓 R 單獨畫最後一張圖就好嗎?

另外，有變法把上圖輸出成 .csv 檔嗎?

謝謝各位大大了 <(_ _)>_


--","R_Language"
"2594","M.1389693018.A.3B2","andrew43","問題","Re: 矩陣與繪圖的問題",2014-01-14 17:50:15,NA,NA,"※ 引述《ireullin (raison detre)》之銘言：: 小弟是R的初學者: 想練習: 我有一個csv檔: 我使用 f <- read.csv 把他讀入: 然後想畫成一個斜線圖: Y軸是壓縮率: X軸是時間: 只要檔案大小是20的: 請問該怎麼做: 我是自學,而且統計與矩陣也是現在才開始K: 請給我點方向: 謝謝: 另外想請問一下: <- 與 = 的差別: <- 是指物件指標的assign嗎: = 是賦值嗎: 以下是範例的csv檔: 壓縮率,檔案大小,時間: 1,10,12: 1,20,13: 1,30,14: 2,10,15: 2,20,16: 2,30,17: 3,10,18: 3,20,19: 3,30,201. 試試 plot(f$壓縮率 ~ f$時間)
   你可以從 names(f) 中看到你的 data frame 中的變數名稱.
2. 常見的 ""<-"", ""->"", ""="", ""<<-"" 和 ""->>"" 都是變數賦值,
   會直接複製物件, 和一般的OO語言不一樣.
   如果不喜歡這種行為, 可以了解 envirnment() 或 R.oo 這個 package.


--http://apansharing.blogspot.com/--","R_Language"
"2595","M.1389689591.A.3BF","peter0726","問題","使用DESeq 遇到Error",2014-01-14 16:53:06,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:版上各位先進大家好

小弟先前只有用過Perl以及PHP來做一些數據分析的經驗

現在因為Boss要發paper

reviewer的意見中希望我們用DESeq以及limma做處理

但是因為沒有使用過R的相關經驗

目前是以這個網頁

(http://dwheelerau.com/2013/04/15/how-to-use-deseq-to-analyse-rnaseq-data/)

上面的作法照著做

但是做到一半有Error訊息就做不下去了


執行的指令以及Error訊息如下http://paste.plurk.com/show/1769927/第一行是我下的指令

前面執行過的指令就如網頁上所述


請教各位該如何解決這個問題

感激不盡

--","R_Language"
"2596","M.1389687087.A.A77","ireullin","問題","矩陣與繪圖的問題",2014-01-14 16:11:24,NA,NA,"小弟是R的初學者
想練習
我有一個csv檔
我使用 f <- read.csv 把他讀入
然後想畫成一個斜線圖
Y軸是壓縮率
X軸是時間
只要檔案大小是20的
請問該怎麼做
我是自學,而且統計與矩陣也是現在才開始K
請給我點方向
謝謝

另外想請問一下
<- 與 = 的差別
<- 是指物件指標的assign嗎
= 是賦值嗎

以下是範例的csv檔
壓縮率,檔案大小,時間
1,10,12
1,20,13
1,30,14
2,10,15
2,20,16
2,30,17
3,10,18
3,20,19
3,30,20

--","R_Language"
"2597","M.1389669116.A.B3E","jack781012","問題","求績分範圍",2014-01-14 11:11:54,NA,NA,"如標題所敘述

我已經知道函數積分完之後的值為多少

積分範圍是從負無窮大積到X值

想請問是否有方法求得X

謝謝各位

--","R_Language"
"2598","M.1389243906.A.806","Wush978","心得","sort CharacterVector",2014-01-09 13:05:03,NA,NA,"[關鍵字]: R, string, sort

[重點摘要]:

今天踩到地雷了。

我寫了一個script，在Rstudio和console下的行為卻不同，經過一兩天的debug才發現：

```r
a <- c(letters, LETTERS) # 英文的大小寫字母
sort(a)
```

的結果會和系統環境有關！！

在sort的說明文件中有：

```
The sort order for character vectors will depend on the collating sequence of the locale in use: see Comparison. The sort order for factors is the order of their levels (which is particularly appropriate for ordered factors).
```

例如：http://rpubs.com/wush978/sortingFYI

--","R_Language"
"2599","M.1389240616.A.9B0","tezukaprince","問題","兩兩配對的問題",2014-01-09 12:10:14,NA,NA,"問題: 當你想要問問題時，請使用這個類別


[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出x來)


[軟體熟悉度]:

新手(沒寫過程式，R 是我的第一次)


[問題敘述]:
因為是極度新手，所以如果發問不夠清楚還請大家包涵m(_ _)m

我現在在使用一個套件叫做lsa 可以幫我算出兩個詞彙之間的語意關係
(btw我是語言所的研究生 平常會用R處理語料)

這個套件裡面有一個function就是 cosine(""a"",""b"")
把兩個character餵進去 例如 cosine(""棒球"",""教練"")
他就可以從語料庫中計算出這兩個詞彙的語意距離

我的問題是 我現在總共有五十個字放在一個vector裡面
我需要得到這五十個字兩兩一組的cosine值 算出它們的平均
(假如只有 a,b,c三個字 我需要 cosine (""a"",""b""),cosine(""b"",""c""),
和cosine(""a"",""c"")的值)

該如何用loop 幫我自動兩兩配對餵進去 cosine("""","""")裡面呢?

如果有發問不當還請各位多多指教 感激不盡!


[程式範例]:


--","R_Language"
"2600","M.1389168791.A.616","tai34","問題","無法順利抽取設定之Pseudo Absences數量",2014-01-08 16:13:08,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
套件: BIOMOD2
問題:

在設立背景資料 (Formateing data) 的時候就出了問題。
我設定要抽取 320 個 Pseudo Absences，但是只抽了 173 個 Pseudo Absences。
已經確定我的背景格數超過 320 個 (其實有 30000 多個)

指令如下:
myBiomodData <- BIOMOD_FormatingData(resp.var = myResp,
                                     expl.var = myExpl,
                                     resp.xy = myRespXY,
                                     resp.name = myRespName,
                                     eval.resp.var = NULL,
                                     eval.expl.var = NULL,
                                     eval.resp.xy = NULL,
                                     PA.nb.rep = 1,
                                     PA.nb.absences = 320,
                                     PA.strategy = 'disk',
                                     PA.dist.min = '10000',
                                     PA.dist.max = '40000',
)

跑完後沒有錯誤的訊息出現，但是卻出現...

sp.name =  XXX

         32 presences,  0 true absences and  173
undifined points in dataset

(中間參數說明省略)

 1 Pseudo Absences dataset available ( PA1 ) with  173
absences in each (true abs + pseudo abs)

Pseudo Absences只有173個，並未達到我所要的 320 個。

請問這是甚麼問題?

先謝謝各位了 <(_ _)>

後語:
R 對於我來說真是一個傲嬌軟體阿....


--","R_Language"
"2601","M.1389115716.A.13B","min102257","問題","grep 字串配對問題",2014-01-08 01:28:33,NA,NA,"小弟有個問題 請教各位

假設 我想知道某文字 例: as在文章裡的位置

文章裡假設有as , was

兩個不同的字但都有as

如何讓R的grep辨識他們是不一樣的呢?



我的程式碼

grep(""as"", c(""as"", ""was""))


結果顯示

在位置1、2都是 as


如何區別""as"" ""was""不同?



謝謝





--","R_Language"
"2602","M.1388912370.A.3F6","andrew43","問題","Re: 想請問R有關函數的問題",2014-01-05 16:59:27,NA,NA,"※ 引述《sinasass (廣廣)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 各位大大好，假如我製作的一個函數，有沒有指令可以回傳在這個函數裡面我設定的變數名稱呢??: [程式範例]:: rrr=function(num){: sum=0: sum=sum+num: return(sum): }: 不知道有沒有指令或方法可以回傳出""sum""字串呢?: 謝謝大家。你給的例子實在沒辦法表達你的問題。
我不確定你要的是什麼，但你可以看看以下的例子：> myfunc <- function(x){+   x.name <- deparse(substitute(x))
+   return(x.name)
+ }
>> agdsdgsdgasdgdg <- 2> myfunc(agdsdgsdgasdgdg)[1] ""agdsdgsdgasdgdg""


--http://apansharing.blogspot.com/--","R_Language"
"2603","M.1388852438.A.F48","sinasass","問題","想請問R有關函數的問題",2014-01-05 00:20:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
各位大大好，假如我製作的一個函數，有沒有指令可以回傳在這個函數裡面我設定的變數名稱呢??


[程式範例]:

rrr=function(num){
sum=0
sum=sum+num
return(sum)
}

不知道有沒有指令或方法可以回傳出""sum""字串呢?
謝謝大家。

--","R_Language"
"2604","M.1388719391.A.D63","Dboy","問題BrowseN","Browse>",2014-01-03 11:23:08,NA,NA,"程式諮詢
(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
最近在用browser()來debug~
但是我用的package有些程式常常互相用來用去~
進入browse環境後~
R的prompt變成Browse[N]>
其中N是一些數字~
想請教一下這些數字代表的意義?
看網路上的資料還有說明檔沒看到相關說明~
感謝各位先進~

--

--","R_Language"
"2605","M.1388655477.A.EDD","tai34","問題","Spatial data 轉換成 raster",2014-01-02 17:37:55,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想要把 spatial data (points) 轉換成 raster，
並在該 raster 裡的每個點有數值，
請問要怎麼做?

有看過 raster 裡的說明，但是看不太懂怎麼用。
Exmple 裡面方法好像無法滿足我的需求

拜託各位大大了 <(_ _)>

祝大家2014新年快樂

--","R_Language"
"2606","M.1388382237.A.B00","Bullone","自介","各位前輩們大家好",2013-12-30 13:43:54,NA,NA,"大家好，我是 frank。

目前在就讀長庚傳醫所，因為對opensource有熱愛，即使其他同學都使用spss，我還是不怕死的選了R。

學習的路上有許多許多的不懂，還希望眾先進們不吝指點後學，感謝。

--posted fromandroid bbs readeron mysamsung GT-N7100https://market.android.com/details?id=com.bbs.reader--","R_Language"
"2607","M.1388142988.A.746","tai34","問題","Re: gam 跑出錯誤訊息",2013-12-27 19:16:25,NA,NA,"小弟解決問題了! (其實就是自己粗心的 k 值打錯了...

另開文章來回覆 xiaoing 大的問題，

但是我對於統計並不是非常了解，也不會很多專有名詞，

只會用一些比較簡單的話，如果錯誤還麻煩請大家指出來。


正題:

這裡指的 k 值是我上篇問題的 k 值。

(因為他好像有兩個...我也不太懂，我只知道變數的 k 值怎麼設。)

也就是 gam(y ~ x1 + x2 + s(x3,k=8), data=data) 裡面的 k 值

簡單的說就是自由度 (N-1) ##N=sample size

我所用的 pakage 裡的 k = 10 (default)

所以除非你的資料內的數值少於 10 種，否則不用特別去調他。

意指如果你的其中一的變數 (ex: x3) 為類別變數，只有 1 到 9

這樣你的數值種類只有 9 種，所以 k 必須要調成 8 (因為 9-1 = 8)

結束

好像沒說到甚麼... 希望有解決到 xiaoing 大 的疑問

--","R_Language"
"2608","M.1387988371.A.FD5","tai34","問題","gam 跑出錯誤訊息",2013-12-26 00:19:28,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我想利用 gam 跑我的資料並建立 model，我的資料有7個變數，gam內的選項皆用預設值。
但是出現以下錯誤:

Error in smooth.construct.tp.smooth.spec(object, dk$data, dk$knots) :
  A term has fewer unique covariate combinations than specified maximum
degrees of freedom
Error in predict(model.bm, Data[, expl_var_names, drop = FALSE], on_0_1000 =
TRUE) :
  error in evaluating the argument 'object' in selecting a method for
function 'predict': Error: object 'model.bm' not found

還有

Error in checkAtAssignment(""BIOMOD.stored.array"", ""val"", ""NULL"") :
  assignment of an object of class “NULL” is not valid for @‘val’ in an
object of class “BIOMOD.stored.array”; is(value, ""array"") is not TRUE

請問是出現了甚麼錯誤? 我該如何修正我的資料?

謝謝各位 <(_ _)>

--","R_Language"
"2609","M.1387793585.A.187","koai","問題","請教 RHadoop 高手",2013-12-23 18:13:01,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
R 使用者   ( RHadoop 幼幼班... @@"" )

[問題敘述]:
想請教版上的RHadoop高手或使用者，
是否可以幫我看看我的問題出在哪裡？
最近在嘗試用RHadoop，但不是很理解rmr2裡面
map 跟 reduce 這兩個函數的結構，想找版上高手求救... @@""
是否可以幫我看看我的下列程式是否有錯？
當input file較小時，下面的程式碼可以成功，
但當input file變大時，我的程式碼就會出錯了！

以下為 Error code:
Error: # of failed Map Tasks exceeded allowed limit.
Streaming Command Failed!
Error in mr(map = map, reduce = reduce, combine = combine, vectorized.reduce,  :
hadoop streaming failed with error code 1

感謝前輩幫忙了~~  @@""


[程式範例]:
testdb02 <- mapreduce(
  input  = ""/my_test_file"",
  map    = function(k,v){
   val <- matrix( unlist(strsplit(v,""\t"")), ncol=18, byrow=TRUE)
   colnames(val) <- paste(""Col_"",1:18,sep="""")
   key <- matrix(as.double(unlist(strsplit(matrix(unlist(strsplit(val[,1],"" "")),2)[2,],"":""))),ncol=3,byrow=TRUE)
   keyval(key,val)
  }
)http://codepad.org/0PMOmqf2[關鍵字]:
RHadoop; rmr; mapreduce

--","R_Language"
"2610","M.1387781010.A.680","andrew43","問題","Re: 函數的output排版，與一些相關問題",2013-12-23 14:43:26,NA,NA,"不確定是不是你要的，但你試試看：

square <- function(x) {
  input <- x
  output <- x^2
  y <- list(input=input, output=output)
  class(y) <- ""square""
  return(y)
}

print.square <- function(w){
  cat(""calling print.square...\n"")
  cat(""The square of ("", w$input, "") equal to"", w$output)
}


之後可以得到

tmp <- square(3)  # 不會顯示
tmp               # 會顯示以下二列

calling print.square...
The square of ( 3 ) equal to 9※ 引述《coo20819 (Mike)》之銘言：: 在此先非常感謝W大熱心的回答，謝謝！: 我也對 'lm' 這個函數有更深的了解，: 但是我嘗試一下還是無法用出我要的結果...: 我表達能力不是很好，再把問題換種方式表達，希望您能理解: 目前：: ```r: square <- function(x) {:   cat(""  It is a test."", ""\n""):   cat(""  The square of ("", x, "") equal to"", x^2): }: temp <- square(3): ```: ```: ##   It is a test.: ##   The square of ( 3 ) equal to 9: ```: ```r: temp: ```: ```: ##  NULL: ```: 我希望藉由'其他函數'，可以像'cat'一樣漂亮排版，但又能使用`invisible`來: 讓R放棄自動呼叫，變成以下:: ```r: temp <- square(3): temp: ```: ```: ##   It is a test.: ##   The square of ( 3 ) equal to 9: ```: 希望您能理解，非常感謝您！--http://apansharing.blogspot.com/--","R_Language"
"2611","M.1387777896.A.F03","coo20819","問題","Re: 函數的output排版，與一些相關問題",2013-12-23 13:51:33,NA,NA,"在此先非常感謝W大熱心的回答，謝謝！

我也對 'lm' 這個函數有更深的了解，

但是我嘗試一下還是無法用出我要的結果...

我表達能力不是很好，再把問題換種方式表達，希望您能理解

目前：

```r
square <- function(x) {
  cat(""  It is a test."", ""\n"")
  cat(""  The square of ("", x, "") equal to"", x^2)
}
temp <- square(3)
```

```
##   It is a test.
##   The square of ( 3 ) equal to 9
```

```r
temp
```

```
##  NULL
```

我希望藉由'其他函數'，可以像'cat'一樣漂亮排版，但又能使用`invisible`來
讓R放棄自動呼叫，變成以下:

```r
temp <- square(3)
temp
```

```
##   It is a test.
##   The square of ( 3 ) equal to 9
```

希望您能理解，非常感謝您！

--","R_Language"
"2612","M.1387732566.A.CE7","Wush978","問題","Re: 函數的output排版，與一些相關問題",2013-12-23 01:16:02,NA,NA,"※ 引述《coo20819 (Mike)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)，: [軟體熟悉度]:: 使用者(已經有用R 做過""一點""作品): [問題敘述]:: 版上各位好，目前我在寫一些函數想做成套件，希望讓output排版可以漂亮一點，: 所以使用cat這個函數，但是使用cat會強制在Consolo輸出，可以看例子: 會比較容易理解我的問題，謝謝: [程式範例]:: square <- function(x) {:   cat(""  It is a test."", ""\n""):   cat(""  The square of ("", x, "") equal to"", x^2): }: square(2): temp <- square(2): 簡單來說，我希望temp <- square(2)這行可以不要在Consolo顯示:   It is a test.:   The square of ( 2 ) equal to 4，: 我打temp才出現:   It is a test.:   The square of ( 2 ) equal to 4: 目前用Cat卻導致相反結果，有小研究過過lm函數可以做到類似狀態，: 但lm函數太複雜，實在無法輕易看懂，想請教版上高手幫忙解答！！: 在此感謝各位看完我的問題！謝謝。: P.S. 另外在請教另一個小問題，上面:   It is a test.:   The square of ( 2 ) equal to 4: 可以看出如果需要文字與變數夾雜，勢必會有空格，也就是會這樣( 2 ): 這有辦法解決嗎? ( 2 )  ---->  (2) 變成這樣！: 再次感謝！！！！: [關鍵字]:: 排版; cat我不是很清楚你的需求, 不過我可以簡單解釋`lm`的原理給你.

也許你會比較清楚你該怎麼做.

---

`lm`會回傳類別為""lm""的物件:


```r
g <- lm(speed ~ dist, cars)
class(g)
```

```
## [1] ""lm""
```


當我們直接呼叫`g`的時候, 會呼叫`print`方法, 透過S3, 因為g是`lm`物件, 所以最終
會呼叫`print.lm`這個函數:


```r
print.lm(g)  # the same as call g directly
```

```
##
## Call:
## lm(formula = speed ~ dist, data = cars)
##
## Coefficients:
## (Intercept)         dist
##       8.284        0.166
```

```r
print.lm <- function(g) cat(""overrided"")
g
```

```
## overrided
```


當呼叫`lm(...)`的時候, R預設會呼叫`print(lm(...))`, 所以...


```r
lm(speed ~ dist, cars)
```

```
## overrided
```


上面`g <- lm(...)`的指令不會印出東西是因為`<-`這種函數預設會使用`invisible`來
讓R放棄自動呼叫`print`


```r
invisible(g)
```


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2613","M.1387731738.A.5D9","Wush978","問題","Re: to.monthly 月份顯示中文如何改英文?",2013-12-23 01:02:14,NA,NA,": [程式範例]:: M1=getSymbols(""M1"",src=""FRED"",auto.assign=FALSE): M1=to.monthly(M1): M1:             M1.Open M1.High M1.Low M1.Close: 一月 1975     273.4   273.8  273.4    273.7: 二月 1975     275.2   275.2  274.2    274.2: 三月 1975     275.4   277.6  273.4    273.4: 四月 1975     275.2   276.8  275.2    276.8: ~~~~: 這個部分希望它顯示英文> Sys.setlocale(""LC_ALL"", ""English"")[1] ""LC_COLLATE=English_United States.1252;LC_CTYPE=English_United

States.1252;LC_MONETARY=English_United
States.1252;LC_NUMERIC=C;LC_TIME=English_United States.1252""> to.monthly(TWII)TWII.Open TWII.High TWII.Low TWII.Close TWII.Volume TWII.Adjusted
Jan 2007   7871.41   7999.42  7599.55    7699.64    96653400       7699.64
Feb 2007   7751.30   7950.20  7679.78    7901.96    38309000       7901.96
Mar 2007   7707.63   7928.03  7306.07

...(下略)

Hope it helps!

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2614","M.1387728710.A.19B","coo20819","問題","函數的output排版，與一些相關問題",2013-12-23 00:11:47,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)，

[軟體熟悉度]:
使用者(已經有用R 做過""一點""作品)

[問題敘述]:
版上各位好，目前我在寫一些函數想做成套件，希望讓output排版可以漂亮一點，
所以使用cat這個函數，但是使用cat會強制在Consolo輸出，可以看例子
會比較容易理解我的問題，謝謝

[程式範例]:

square <- function(x) {
  cat(""  It is a test."", ""\n"")
  cat(""  The square of ("", x, "") equal to"", x^2)
}
square(2)
temp <- square(2)

簡單來說，我希望temp <- square(2)這行可以不要在Consolo顯示
  It is a test.
  The square of ( 2 ) equal to 4，

我打temp才出現
  It is a test.
  The square of ( 2 ) equal to 4

目前用Cat卻導致相反結果，有小研究過過lm函數可以做到類似狀態，
但lm函數太複雜，實在無法輕易看懂，想請教版上高手幫忙解答！！
在此感謝各位看完我的問題！謝謝。

P.S. 另外在請教另一個小問題，上面
  It is a test.
  The square of ( 2 ) equal to 4
可以看出如果需要文字與變數夾雜，勢必會有空格，也就是會這樣( 2 )
這有辦法解決嗎? ( 2 )  ---->  (2) 變成這樣！
再次感謝！！！！


[關鍵字]:
排版; cat

--","R_Language"
"2615","M.1387727540.A.CFE","eric20","問題","to.monthly 月份顯示中文如何改英文?",2013-12-22 23:52:17,NA,NA,"因為是新手
在學習的過程中常有些小問題
所以請問版上先進
感謝大家

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我用getSymbols抓一筆時間序列資料
之後透過to.monthly轉成月資料後
月份部分顯示的是""中文""
EX 四月 2003
   五月 2003
但是中文不好我後續的處裡及繪圖
希望他顯示數字
試過重灌R或是把系統(wimdows7 32bit)改中文顯示還是一樣
困擾我一陣子了
希望版上有經驗的版友解答
感謝!!!

[程式範例]:

M1=getSymbols(""M1"",src=""FRED"",auto.assign=FALSE)
M1=to.monthly(M1)
M1
            M1.Open M1.High M1.Low M1.Close
一月 1975     273.4   273.8  273.4    273.7
二月 1975     275.2   275.2  274.2    274.2
三月 1975     275.4   277.6  273.4    273.4
四月 1975     275.2   276.8  275.2    276.8
~~~~
這個部分希望它顯示英文






--","R_Language"
"2616","M.1387644073.A.3A0","AceT","問題","看不懂 match.arg 的 help 範例",2013-12-22 00:41:10,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
看不懂 match.arg 的 help 範例

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
match.arg 的範例其中一段如下 :

center <- function(x, type = c(""mean"", ""median"", ""trimmed"")) {
  type <- match.arg(type)
  switch(type,
         mean = mean(x),
         median = median(x),
         trimmed = mean(x, trim = .1))
}
整段函數跑起來沒問題

可是單獨去跑
type = c(""mean"", ""median"", ""trimmed"")
type <- match.arg(type)
會得到 Error in match.arg(type) : 'arg' must be of length 1

只說 match.arg 只能放在函數裡面使用, 不然單獨使用的意思嗎?

[關鍵字]:
?match.arg

--","R_Language"
"2617","M.1387555751.A.6D1","HeroNoah","問題","Re: 矩陣取值",2013-12-21 00:09:08,NA,NA,"可以參考
R FAQ 7.31 Why doesn't R think these numbers are equal?

以這個範例來說

options(digits = 22)
a = matrix(1 : 25, 5, 5)
n = 12
s1 = trunc(n / 10); s1
s2 =(n / 10 - trunc(n / 10)) * 10; s2

# 這(不確定)是個好方法 ?
s2 = round(s2)
a[s1, s2]※ 引述《swedrf0112 (M)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門: [問題敘述]:: 想要取a[1,2]=6這個值出來: 可是不知道為什麼a[s1,s2]=1: 大概清楚應該是s2的問題: 有試著s2==2 會出現FALSE: 可是打s2也只會顯示2: 也試過as.numeric(s2)也不行: 先謝謝各位!: [程式範例]:: a=matrix(1:25,5,5): n=12: s1=trunc(n/10): s2=(n/10-trunc(n/10))*10: a[s1,s2]--","R_Language"
"2618","M.1387425822.A.4B0","jack781012","問題","這種狀況如何畫圖",2013-12-19 12:03:40,NA,NA,"我想畫出隨著x改變對y所造成變動的曲線圖

但是y是由a1,a2,b1,b2,所組成的方程式

而a1,a2,b1,b2是由sy1及sy2所組成的方程式

最後sy1及sy2才是由x以及其他固定參數所組成的方程式

翻書所查到,畫圖方式是用curve函數曲線可是,他他的函數直接是由x所組成

EX:
f<-function(x) sin(cos(x)*exp(2-x))
curve(f,-5,5,n=2000)

所以我想請問我這樣的情況要如何畫出隨著x改變對y所造成變動的曲線圖

--","R_Language"
"2619","M.1387124422.A.3D1","tai34","問題","R 如何讀圖層 (raster)",2013-12-16 00:20:20,NA,NA,"各位大大好

我想利用 raster package 讀取 tif 或 grd 檔

我將說明書內的指令修改成

myExpl = stack(""D:/R/external/bio/bio_1.grd"")

或是 myExpl = stack(""D:/R/external/bio_1.tif"")

出現了

Error in .rasterobjectFromFile(x, objecttype = ""RasterBrick"",...):
Cannot create RasterLayer object from this file; perhaps you need to install rgdal first

然後我就依照他指示裝了 rgdal
結果依然無法如願

請問我要如何修改才能讓 R 讀我的圖層?

另外也請問說明書的某段指令為 cat('\n',myRespName,'modeling...')內的...真的只要打...就好了嗎?

謝謝各位大大

--","R_Language"
"2620","M.1387030350.A.3FF","anovachen","問題","使用R輔助基礎機率論教學",2013-12-14 22:12:27,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
弱大數法則我還勉強能用丟銅板來""實驗""給學生看...
但是CLT要怎麼做呢= =
所以想用R來做電腦輔助教學...

而且我想示範：
1.不是n>=30就叫做大樣本。
所以除了常態分配和長得比較對稱的均勻分配以外，
其他都選取很極端的機率分佈，
結果n=30之下作Jarque Bera test都拒絕虛無假設。
2.期望值和變異數存在且有限才可適用CLT。
所以我故意選了Cauchy分配來示範。
(抽自柯西分配母體的樣本其平均仍然是柯西分配)

不過，我最後用ks.test的結果怪怪的，
是不是參數沒設定好？(難道沒辦法讓他自己抓常態分配的參數嗎= =)
(用SAS和SPSS都不用調參數....是不是用R作KS檢定一定要指定參數?)

[程式範例]:
#請記得先安裝TSA package
library(TSA)

#X~N(0,1)
set.seed(1)
par(mfrow=c(1,2))
popnorm<-rnorm(n=100000,mean=0, sd=1)
mean(popnorm)
var(popnorm)
plot(density(popnorm))
meannorm<-array(0,dim=c(1000))
for (i in 1:1000) {
meannorm[i]=mean(sample(popnorm,size=30,replace=TRUE))
}
mean(meannorm)
var(meannorm)
plot(density(meannorm))
ks.test(meannorm,""pnorm"")
jarque.bera.test(meannorm)

結果：> ks.test(meannorm,""pnorm"")One-sample Kolmogorov-Smirnov test

data:  meannorm
D = 0.3406, p-value < 2.2e-16
alternative hypothesis: two-sided> jarque.bera.test(meannorm)Jarque Bera Test

data:  meannorm
X-squared = 4.9045, df = 2, p-value = 0.0861

最後改用這個：
mean<-mean(meannorm)
sd<-sqrt(var(meannorm))
ks.test(meannorm,""pnorm"",mean,sd)
結果：
        One-sample Kolmogorov-Smirnov test

data:  meannorm
D = 0.029, p-value = 0.3692
alternative hypothesis: two-sided
沒有違背預期的結果。

[關鍵字]:
電腦輔助教學, 機率, 中央極限定理

附註：以下試驗其他機率分佈http://ideone.com/UkhaJO為節省版面，貼到網路上供參考。

--","R_Language"
"2621","M.1386942276.A.D29","swedrf0112","問題","矩陣取值",2013-12-13 21:44:33,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門

[問題敘述]:
想要取a[1,2]=6這個值出來
可是不知道為什麼a[s1,s2]=1

大概清楚應該是s2的問題
有試著s2==2 會出現FALSE
可是打s2也只會顯示2
也試過as.numeric(s2)也不行

先謝謝各位!

[程式範例]:
a=matrix(1:25,5,5)
n=12
s1=trunc(n/10)
s2=(n/10-trunc(n/10))*10
a[s1,s2]

--","R_Language"
"2622","M.1386872671.A.10B","tai34","問題","Re: lappy function",2013-12-13 02:24:29,NA,NA,"所以意思是指說

當我有一個 data 類似於這樣

X1 X2 X3 X4
 1  0  0  0
 0  1  0  0
 0  0  1  0
 0  0  0  1

而如果我的式子是

X <- c(""X1"",""X2"",""X3"",X4"")

FUN <- function (X)

Y <- lapply (X, FUN)

這樣是不是 X1 會跑一次 FUN, X2 會跑一次 FUN, X3 會跑一次FUN, X4 會跑一次 FUN 的意思?

感謝!

--","R_Language"
"2623","M.1386860903.A.EA7","EXILESPACER","情報","20131216 MLDM Monday 會前通知",2013-12-12 23:08:20,NA,NA,"[關鍵字]: Taiwan R User Group, GLM, ANOVA, Lee-Xieng Yang

[出處]:http://www.meetup.com/Taiwan-R/events/145609292/[重點摘要]:


聚會議程：

1910 ~ 1920 Warm Up

1930 ~ 2010  GLM取向的共變數分析 (Lee-Xieng Yang)

變異數分析結合迴歸分析與一般線性模型（GLM），發展成共變數分析之後，功能臻於完整
。除了能分析獨變項對依變項的各類主要及交互作用效果，更能排除可能混淆了因果推論的
共變項的效果。共變數分析的主要功用在於淨化獨變項對依變項的效果，以補強實驗控制之
不足。例如，要比較不同教學法的好壞，各自挑選一個班級實施，並測驗學生在接受了教學
法之後的表現。這樣的實驗設計有可能會因為沒有控制原先兩班同學的水準，造成在實驗結
果上的誤判。因此我們可以使用共變項分析，將兩班同學原本的學業表現視為共變項予以排
除。R的迴歸分析工具簡便功能完整，我將以R示範說明，如何進行共變數分析。

--","R_Language"
"2624","M.1386848232.A.811","celestialgod","問題","Re: lappy function",2013-12-12 19:37:09,NA,NA,"※ 引述《tai34 (tai)》之銘言：: 各位大大好: 想請問 lapply fuction 是甚麼意思: 已用 lapply 當關鍵字查詢跟查 R 內的相關說明: 但不確定是甚麼意思: 是利用不同的 x 運算在相同的 FUNCITON 嗎?: 懇請白話一點，謝謝!!!lapply 用法很多 其實可以想像成list的迴圈版本

a = lapply(1:10, function(i) i)

等同於

a = list(NULL)
for (i in 1:10)
   a[[i]] = i

或是

L 是一個list

a = lapply(L, function(l) ~~some function~~)

等同於

a = list(NULL)

for (i in 1:10)
    a[[i]] = some function ( L[[i]] )


我想到的簡單例子是cross-validation

X = matrix(rnorm(1000),ncol = 10) # 10 covariates
B = 1:11
Y = cbind(1,X) %*% B + rnorm(100)
dat = data.frame(X, Y)

X.i = lapply(1:nrow(X), function(i) dat[-i,])
lm.i = lapply(X.i, function(ll) lm(Y~., data = ll))
yhat.i = lapply(1:nrow(X), function(j) predict(lm.i[[j]], newdata =dat[j,]))
yhat.i = Reduce(c, yhat.i)
MSE.i = (y-yhat.i)^2

這樣的procedure可以用在選哪一個模型最佳等。

PS: 其實這個例子只是提供想法，非好的利子QQ

第二個例子(ridge regression 挑選panelty term大小)：

## Data
data(longley)
X <- as.matrix(longley[,1:5])
Y <- as.matrix(longley[,7])

## Normalization
norm <- function(a) (a-mean(a))/sd(a)
Y.N <- apply(Y, 2, norm)
X.N <- apply(X, 2, norm)
D <- cbind(Y.N, X.N)
n <- nrow(X.N)
p <- ncol(X.N)

## Ridge regression, given lambda
beta.R <- function(Y, X, nc, lambda) solve(t(X)%*%X +
lambda*diag(nc),t(X)%*%Y)

## cross validation, single CPU version
m <- 1001
lambda <- seq(0, 1, length=m)
CV <- sapply(1:m, function(j){
        out <- sapply(1:n, function(i)
        beta.hat <- beta.R(Y.N[-i,], X.N[-i,], p, lambda[j]))
        out <- mean((Y.N - diag(X.N%*%out))^2)
})

plot(lambda, CV, type='l', xlab=expression(lambda), ylab='CV')
lambda.opt <- lambda[which(CV == min(CV))]
beta.opt <- beta.R(Y.N, X.N, p, lambda.opt)

inner.loop <- function(j){
        A <- apply(matrix(1:m,m,1), 1, function(i)
        beta.hat <- beta.R(Y.N[-i], X.N[-i,], p, lambda[j]))
        out <- mean((Y.N - diag(X.N%*%A))^2)
        return(out)
}
CV <- sapply(seq(along=Y.N), inner.loop)

--","R_Language"
"2625","M.1386846308.A.189","tai34","問題","lappy function",2013-12-12 19:05:05,NA,NA,"各位大大好

想請問 lapply fuction 是甚麼意思

已用 lapply 當關鍵字查詢跟查 R 內的相關說明

但不確定是甚麼意思

是利用不同的 x 運算在相同的 FUNCITON 嗎?

懇請白話一點，謝謝!!!

--","R_Language"
"2626","M.1386821603.A.D4F","slow0201","問題","積分計算值",2013-12-12 12:13:20,NA,NA,"大家好,有個問題想請教

描述如下:
函數為兩個常態的CDF和一個常態的PDF的乘積
積分下限為負無窮大,上限為無窮大

請問直接使用下面程式積分是否容易產生錯誤結果?
我跑出來的結果比論文提供的值低很多
請問是否有別的寫法可以使得我得到的結果較接近
論文提供的結果,謝謝!
--------------------------------------------
程式編寫為
x=1
y=1.486607
z=1
w=1.486607

fun1<-function(u)
{
  fun_ev=pnorm(x*u+y)*pnorm(-z*u+w)*dnorm(u)
  return(fun_ev)
}
AS=integrate(fun1,lower=-Inf,upper=Inf)$value
----------------------------------------------

出來的結果AS是0.7096956
----------------------------------------------







--","R_Language"
"2627","M.1386748493.A.7DE","anovachen","問題","國網中心的雲端R計算?",2013-12-11 15:54:45,NA,NA,"[問題類型]:
意見調查(我對R 有個很棒的想法，想問問大家的意見)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
因為連不上這個網站:http://statlab.nchc.org.tw/我想直接在這發問...
請問這中心是不是有提供R軟體的雲端運算資源?
(我印象中，學術研究可以提出申請，
把程式碼上傳，用該中心的伺服器計算)

有人用過這種資源嗎??可否分享些經驗??

之後可能要用Metropolis-Hastings algorithm做一些計算，
只是先問問...以免日後發現個人電腦跑不動= =

[程式範例]:

[關鍵字]:
雲端運算

--","R_Language"
"2628","M.1386697219.A.4C4","solsiso","問題","Re: 關於迴歸中的係數",2013-12-11 01:40:15,NA,NA,"※ 引述《solsiso (solsiso)》之銘言：: 請問: 要對一個迴歸式 y=a+bx+e: 的係數a和b同時進行檢定: 我採用了wald test(安裝了aod package): 進行  H0：a=0且b=1  的檢定: 但卻一直出現以下訊息: Error in wald.test(Sigma = mdl_stderror[1, ], b = mdl_coef[1, ], L = ) ::   One of the arguments Terms or L must be used.: 一定要有一個 L 或 Terms 的參數，可是我不知道到底如何給好，希望板上大大能: 解惑一下，感謝!~附上完整的code，其實也只有最下面要使用wald.test而已

#資料是從1997/1/1-2007/12/31
#自選.csv檔案，檔案格式每欄(column)為：
#年月日，台積電日報酬率，加權指數日報酬率，台積電週報酬率，加權指數週報酬率，
台積電月報酬率，加權指數月報酬率

#讀入檔案到一個名為data的變數
data <- read.table(file.choose(), header=TRUE, sep="","")

#看各欄定義名稱及資料的簡單summary
names(data)
summary(data)

#依照以下順序
#1.日、週、月報酬迴歸，Y是台積電報酬率，X是加權指數報酬率
#2.一般迴歸的summary
#3.依照anova table格式的summary
model1 <- lm( data[,2] ~ data[,3], x=TRUE, Y=TRUE )
summary(model1)
summary.aov(model1)

model2 <- lm( data[,4] ~ data[,5] )
summary(model2)
summary.aov(model2)

model3 <- lm( data[,6] ~ data[,7] )
summary(model3)
summary.aov(model3)

#畫圖，畫出scatter plot，及迴歸線
par(mfrow=c(3,1))

plot(data[,2],data[,3], type=""p"", xlab=""大盤日報酬"", ylab=""台積電日報酬"")
abline(model1)

plot(data[,4],data[,5], type=""p"", xlab=""大盤週報酬"", ylab=""台積電週報酬"")
abline(model2)

plot(data[,6],data[,7], type=""p"", xlab=""大盤月報酬"", ylab=""台積電月報酬"")
abline(model3)

#把係數抓出來
mdl_coef <- matrix(0, ncol=2, nrow=3)
mdl_coef[1,] <- t(as.matrix(model1$coef))
mdl_coef[2,] <- t(as.matrix(model2$coef))
mdl_coef[3,] <- t(as.matrix(model3$coef))

#把標準差抓出來
mdl_stderror <- matrix(0, ncol=2, nrow=3)
mdl_stderror[1,] <- summary(model1)[[""coefficients""]][,2]
mdl_stderror[2,] <- summary(model2)[[""coefficients""]][,2]
mdl_stderror[3,] <- summary(model3)[[""coefficients""]][,2]

wald.test(Sigma=mdl_stderror[1,], b=mdl_coef[1,], Terms=c(1,2))

我必須承認我還不太懂R，code都是遇到問題去拼湊出來的.....



--","R_Language"
"2629","M.1386696227.A.0B8","andrew43","問題","Re: 關於迴歸中的係數",2013-12-11 01:23:43,NA,NA,"※ 引述《solsiso (solsiso)》之銘言：: 請問: 要對一個迴歸式 y=a+bx+e: 的係數a和b同時進行檢定: 我採用了wald test(安裝了aod package): 進行  H0：a=0且b=1  的檢定: 但卻一直出現以下訊息: Error in wald.test(Sigma = mdl_stderror[1, ], b = mdl_coef[1, ], L = ) ::   One of the arguments Terms or L must be used.: 一定要有一個 L 或 Terms 的參數，可是我不知道到底如何給好，希望板上大大能: 解惑一下，感謝!~Terms 參數用來指定 H0 的對象。

我給你一串例子。如果你已經懂 Wald test 的話那一定馬上就會看懂。

x1 <- c(3,6,5,2,4)
x2 <- c(5,3,6,7,2)
y  <- c(4,7,2,3,1)

# define a general linear model: y = b0 + b1x1 + b2x2 + error
m <- lm(y ~ x1 + x2)
summary(m)

require(aod)

# 檢驗 H0: b0 = 0
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = 1)
# 應該會得到和 summary(m) 中 intercept 項一樣的結果

# 檢驗 H0: b0 = -0.3
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = 1, H0 = -0.3)
# 應該會得到很大的 p-value（因為 b0 很接近 -0.3）

# 檢驗 H0: b1 = 0
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = 2)
# 應該會得到和 summary(m) 中 x1 項一樣的結果

# 檢驗 H0: b2 = 0
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = 3)
# 應該會得到和 summary(m) 中 x2 項一樣的結果

# 檢驗 H0: b1 = 0 且 b2 = 0
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = c(2,3))
# 應該會得到和 summary(m) 中最後 b1 = 0 和 b2 = 0 聯合檢驗一樣的結果

# 檢驗 H0: b0 = 0 且 b1 = 13 且 b2 = 34
wald.test(b = coef(m), Sigma = vcov(m), df = m$df.residual,
          Terms = c(1,2,3), H0 = c(0, 13, 34))
# 應該會得到一個很小的 p-value（因為 H0 離估計值太遠了）

--http://apansharing.blogspot.com/--","R_Language"
"2630","M.1386694415.A.168","solsiso","問題","關於迴歸中的係數",2013-12-11 00:53:31,NA,NA,"請問

要對一個迴歸式 y=a+bx+e

的係數a和b同時進行檢定

我採用了wald test(安裝了aod package)

進行  H0：a=0且b=1  的檢定

但卻一直出現以下訊息

Error in wald.test(Sigma = mdl_stderror[1, ], b = mdl_coef[1, ], L = ) :
  One of the arguments Terms or L must be used.

一定要有一個 L 或 Terms 的參數，可是我不知道到底如何給好，希望板上大大能
解惑一下，感謝!~




--","R_Language"
"2631","M.1386432245.A.79B","andrew43","問題","Re: distance matrix 能否作回歸?",2013-12-08 00:04:02,NA,NA,"※ 引述《gsuper (Logit(odds))》之銘言：:: 每片樣本 , 是一個棲地微生物的菌相組成 , 內部含有約 200~1000 種細菌: proportional data 總和為 1 (可想像每片樣本是一圓餅圖):: distance matrix 方面 ,: 因為歐氏距離等方法不太合理 , 採用演化距離 (UniFrac distance):: 首先先以各個細菌的 16s rRNA 序列資料庫作為依據 (約 10000 種序列): node 為細菌 , edge 為 16s rRNA sequence pairwise alignment 的 score: 依照上述資料建了一棵演化樹:: 依賴這棵演化樹 , 一次 input 兩片樣本: 計算 weighted UniFrac distance (tree-based & abundance-based):: 概念上是: sum of occuped edge length and adjusted by abundance of bacteria你做的工作已經超出我的能力，不過我想我還是可以提供一些想法。
不過這和 R 本身沒什麼關係了。

1. 假如你已經建好一個距離矩陣，那我想有好幾個多變量的方法可以解。
   例如 dbRDA 可以有一個以上的自變數來解釋該矩陣，
   或是更傳統的多變量方法來檢視不同樣點的差異性。
   前題是，這個矩陣與套用的分析可以正確地解決你的問題。

2. 既然你也建了親緣樹，那可能可以考慮比較方法中的分析方法。
   或許你目前的做法正是如此，但我不懂該課題所以不能說更多。
   不過我不了解一件事，就是你的每個抽出樣本都有一堆序列，
   那你的親緣樹是怎麼跑出來的？樹的每一枝是一種菌還是一個樣點？
   所以枝與枝的距離是什麼意義？我目前還不了解。

3. 是不是可以將你目前的工作可以描述成
   「棲地條件（如溫度）如何影響細菌群落相」，同意嗎？
   是的話，我想分析上的概念和大多數群落生態學的分析方法大同小異。
   不同之處只是材料上（物種、功能群或遺傳序列）的不同而採用適當的方法或模型。
   或許你可以從這個角度來找解決辦法。
   在這個角度中，最常見的例子就是「不同種類棲地的某類生物相是否不同」，
   或是「棲地的某些特定條件如何影響某類生物相」。
   只不過你的材料是細菌還外加親緣樹，我沒學過，不能給你更多建議了。



--http://apansharing.blogspot.com/--","R_Language"
"2632","M.1386335473.A.363","gsuper","問題","Fw: distance matrix 能否作回歸?",2013-12-06 21:11:11,NA,NA,"假設有一 distance matrix , 內有 3 samples 如下


      A     B      C
----------------------
A     0  0.75   0.36

B    NA     0   0.66

C    NA    NA      0
----------------------

再假設 ABC 三個分別代表生物棲息地

已知採樣時 , A = 36度C , B = 32度C , C = 18度C

可否轉成以下格式跑回歸?


    distance     溫度差
--------------------------
AB    0.75   abs(36-32)=4
AC    0.36   abs(36-18)=18
BC    0.66   abs(32-18)=14
--------------------------


純粹是突發奇想...
我還沒想到要怎麼解釋這樣的計算

有種從 ""速度"" 進入 ""加速度"" 的感覺

先請問看看有沒有顯而易見的不合理之處

--
我用名為真心的卡牌說服你
這是我最後一張牌

--","R_Language"
"2633","M.1386334186.A.2C1","gsuper","問題","Re: 請問兩個圖同X軸或一個圖兩個X軸要怎麼畫",2013-12-06 20:49:40,NA,NA,"※ 引述《eric20 (艾力克)》之銘言：: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): 第一次使用Ｒ希望有一天也能來回答問題ＸＤ: 簡單的問題想請問各位有經驗的版友: [問題敘述]:: 在畫圖時(主要為時間序列)常需要用到想請問各位先進: (1)好幾個折線圖在同一個X軸上: https://www.dropbox.com/s/gh0tplcitwypcro/FI.png: (2)一張圖中有兩個或多個Y軸(X軸): 兩個時間序列但是單位不相同: 因為才剛入門所以一開始只會使用基本繪圖工具: 我先par(mfrow=c(2,1)): 將圖一下邊界設為0、X軸取消:   圖二上邊界取消: 但是圖很陽春不是很好看...: 接著發現ggplot2作圖很方便也很美化: 但是google後有很多方法可以達到以上效果: 但是有點複雜XD也不知道哪一個好用: 想請問用哪種方式比較好用且方便?: 問題(2)現在還是爬文: 也請有經驗的版友推薦較簡便可以達成的方式?: 謝謝大家png(""SEE.png"",width=1000,height=500)
barplot(data)
par(new= TRUE,oma=c(7,7,0,7))
pie(data2)
dev.off()

這樣做 , 可以把已經畫好的圖當作畫布
再蓋上新的圖

也就是先畫了一張 barplot
靠 oma 調整新的圖要放的位置
再畫一張 piechart 上去

參考看看

--","R_Language"
"2634","M.1386298050.A.EB7","Dboy","問題","optim()",2013-12-06 10:47:26,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
optim()偵測到的變數維度與預料中不同

各位板上先進好~
我現在是經濟系的研究助理~
要幫老闆用MitISEM這個package去做Baysian Estimation~
其中我的目標函數的程式碼如下:
SChang <- function(theta, y, Z, w, t, dim, log=TRUE){
  if (is.vector(theta))
    theta <- matrix(theta, nrow = 1)

  n <- length(y)
  bx <- theta[,1]
  bz <- matrix(theta[,2:(1+dim[1])],nrow=dim[1],ncol=1)
  mu_x <- theta[,2+dim[1]]*matrix(rep(1,n),nrow=n, ncol=1)
  del <- matrix(theta[,(3+dim[1]):(2+dim[1]+dim[2])],nrow=dim[2],ncol=1)
  sig_v <- abs(theta[,3+dim[1]+dim[2]]) ## sig_v^2
  sig_u <- abs(theta[,4+dim[1]+dim[2]]) ## sig_u^2
  sig_epo <- abs(theta[,5+dim[1]+dim[2]]) ## sig_epo^2
  sig_x <- abs(theta[,6+dim[1]+dim[2]]) ## sig_x^2
  u <- matrix(theta[,(7+dim[1]+dim[2]):(6+dim[1]+dim[2]+n)],nrow=n, ncol=1)
  x <- matrix(theta[,(7+dim[1]+dim[2]+n):(6+dim[1]+dim[2]+n+n)], nrow=n, ncol=1)

  if (prod(u >0) > 0)
  p <- -(n*log(sig_v^0.5)+n*log(sig_u^0.5)+n*log(sig_x^0.5)+n*log(sig_epo^0.5)+
           (y+u-Z %*% bz-x*bx) %*% t(y+u-Z %*% bz-x*bx)/(2*sig_v)+
           (w-x) %*% t(w-x)/(2*sig_epo)+
           (x-mu_x) %*% t(x-mu_x)/(2*sig_x)+
           (u-t %*% del) %*% t(u-t %*% del)/(2*sig_u)+
           sum(log(pnorm(u/sig_u^0.5))))
  else p <- -Inf
  if (!log)
    p <- exp(p)
  as.vector(p)
}

其中y, Z, w, t是我的data~
theta在我的case中應該是個2014維的向量~
也是我要估計的函數的變數~

接下來我就把它丟到MitISEM中做估計:
app.Schang <- MitISEM(KERNEL=SChang, mu0=mu0, y=y, Z=Z, w=w, t=t, dim=dim)
結果顯示：

錯誤在optim(par = mu0, fn = KERNEL, method = method, control = control,  :
optim 內的目的函數長度被評估為 998001，而不是 1

是我目標函數寫錯嗎?
998001與我預期的2014相去甚遠~
我到底是哪裡做錯了?

[關鍵字]: optim()


--

--","R_Language"
"2635","M.1386170792.A.F59","andrew43","問題","Re: 有關交互作用",2013-12-04 23:26:29,NA,NA,"※ 引述《naturalsmen (日日夜夜)》之銘言：: 1.自變數其中兩個分別是""性別""與""運動""，目前有做了interaction.plot，但結果跟: 想像中不太一樣，不確定interaction.plot(__,__,__)的位置的意義，也用help看過了，: 還是不清楚。在 interaction.plot(x.factor, trace.factor, response, ...) 中，
x.factor 是橫軸， trace.factor 是線的組別，response 是應變數。: 2.用了step(lm(),"""")的方法，但不知道""both""、""forward""的差別在哪。step(mod , direction=""both"")
是從 mod 中丟掉沒有影響力的項目，但會不斷檢查之前丟掉的是否可能再加回來。

step(mod , dircetion=""backward"")
是從 mod 中丟掉沒有影響力的項目，且只會丟。

step(mod1 , direction=""forward"" , scope=mod2)
是從 mod 為啟點，按 mod2 為可能最終的結果把 mod2 中的項目一項一項加進 mod 中。
如果想看看 scope 怎麼用，可以看看 help(add1) 的用法。

--http://apansharing.blogspot.com/--","R_Language"
"2636","M.1386163905.A.2B3","naturalsmen","問題","有關交互作用",2013-12-04 21:31:35,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的要對一連續型反應變數做迴歸，自變數都是類別的data，已經使用dummy variable建模，

但還沒有加入交互作用項，目前想法是，先對變數兩兩檢定或畫交互作用圖，結果顯著

再加到模型裡。

問題分別有：

1.自變數其中兩個分別是""性別""與""運動""，目前有做了interaction.plot，但結果跟

想像中不太一樣，不確定interaction.plot(__,__,__)的位置的意義，也用help看過了，

還是不清楚。

2.用了step(lm(),"""")的方法，但不知道""both""、""forward""的差別在哪。


[程式範例]:張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/感謝版上各位先進的幫忙<(_ _)>--","R_Language"
"2637","M.1386145367.A.714","eric20","問題","請問兩個圖同X軸或一個圖兩個X軸要怎麼畫",2013-12-04 16:22:44,NA,NA,"[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)
第一次使用Ｒ希望有一天也能來回答問題ＸＤ
簡單的問題想請問各位有經驗的版友

[問題敘述]:
在畫圖時(主要為時間序列)常需要用到想請問各位先進
(1)好幾個折線圖在同一個X軸上https://www.dropbox.com/s/gh0tplcitwypcro/FI.png(2)一張圖中有兩個或多個Y軸(X軸)
兩個時間序列但是單位不相同


因為才剛入門所以一開始只會使用基本繪圖工具
我先par(mfrow=c(2,1))
將圖一下邊界設為0、X軸取消
  圖二上邊界取消

但是圖很陽春不是很好看...
接著發現ggplot2作圖很方便也很美化
但是google後有很多方法可以達到以上效果
但是有點複雜XD也不知道哪一個好用
想請問用哪種方式比較好用且方便?

問題(2)現在還是爬文
也請有經驗的版友推薦較簡便可以達成的方式?

謝謝大家



--","R_Language"
"2638","M.1385992673.A.3BA","Wush978","分享","五個用R 處理大資料的方法",2013-12-02 21:57:48,NA,NA,"[關鍵字]: R, big data

[出處]:http://blog.eoda.de/2013/11/27/five-ways-to-handle-big-data-in-r/[重點摘要]:

1. 怎樣的資料算大？

Hadley Wickham: 當處理資料的時間超過開發程式的時間

Jan Wijffels:

- < 10^6, R 可以容易的處理
- 10^6 ~ 10^9: 花點心思可以用R 處理
- > 10^9: Map Reduce, R + Hadoop

2. 如何處理大資料:

- 抽樣
- 擴充硬體 (64-bit R 最多可以吃 8TB的RAM)
- 在硬碟上處理 (請參考套件ff和ffbase)
- 和C++ 或java整合 (請參考套件Rcpp或rJava)
- 更強大的interpreter (請參考pqR, Renjin, TERR和Oracle R)


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2639","M.1385956989.A.C60","onionsteven","問題","如何減少使用for ",2013-12-02 12:03:06,NA,NA,"[問題類型]:效能諮詢(我想讓R 跑更快)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
正在做分析 想讓執行速度加快
我的語法用了三層的for迴圈 想請問能不能避開

資料存放在多個檔案夾中 所以第一個迴圈是改變資料讀取路徑跟檔名
第二個迴圈是模擬資料的10000筆 依序做計算
第三個迴圈是針對每筆數據給予某定值做計算 約有2000組

apply或是sapply的執行速度比for快
但是使用它來計算某個函數時 我希望能指定不同的參數位置

[程式範例]:

例如：10000筆的模擬資料中 每一筆有三個
假定每筆資料為a1 a2 a3

data=matrix(rnorm(30000,0,1),10000,3)
apply(data,1,mean)可以計算a1 a2 a3的mean
但是我想做的是另外自己寫的函數
可能是a1^a2/a3
這部分有哪個語法能夠取代for迴圈呢



--","R_Language"
"2640","M.1385822718.A.DAB","gsuper","程式","Fw: predict() in R 的疑難",2013-11-30 22:45:16,NA,NA,"研究 S3 與 predict() 的關聯

-----------------------------

我以前的觀念
認為 predict() 的使用 , 是湊齊兩種條件

1. model  <- lm(y~x)         : 給予 linear model
2. Xpoint <- as.data.fram(x) : 給予 x 向量

在這樣的情況下

model  提供了回歸模型的趨勢線參數 y=ax+b

Xpoint 提供了 x 值 , 套入趨勢線的 y=ax+b
得到 predicted y , 異於 real data y

-----------------------------
但我現在在研究一個 R package
作者的程序如下

source(../script/sourcetracker.R)
這個 sourcetracker.R 裡面包有一個 main function , sourcetracker()
還有大約 10 來個小 functions

-----------------------------

作者先用 sourcetracker() , 產生一個 model 變數
model 變數的內容很單純 , 都是 matrix 與 factor 而已
(我有把它拆開來跑過了 , 確定是單純變數)

model <- list(NULL)
model[[2]] <- 原始矩陣 (training set)  [90樣本 & 100features]
model[[3]] <- group factors [30 vs 30 vs 30 (total 90 樣本)]
model[[1]] <- 根據 model[[3]] 的 factor , 將原始矩陣分成三分取 colSums
              然後再 rbind() , 變成 [3混合樣本 & 100 features]

最後作者加了一行class(model) <- ""sourcetracker""-----------------------------------------------------------
接下來作者進行 predict()predict( model , testSET , alpha1=0.001 , alpha2=0.001 )其中 model[[2]] 是 training set , 用來建造 model
[資料矩陣維度 : 90 x 100]

而 testSET 是 testing set , 是需要被預測的資料
[資料矩陣維度 :10 x 100]


***
如果把 source(../script/sourcetracker.R)
收進來的小 fuinction 砍掉 , predict() 會跳出錯誤







-----------------------------------------------------------

關鍵在這行class(model) <- ""sourcetracker""當宣告了特定 class 後
再套用 predict() , predict() 就能進行計算 (不加就不能算)

但 model 這個變數根本不是 線型模型
所以 predict() 吃入 model 變數後
還需要做一大堆事情才能得到結果
(Gibb`s sampling,cross-validation,貝式 etc.)

但我不明白的是 , predict() 是怎麼知道接下來要做哪些事情?
因為我看其他的 internal function , 並沒有特別宣稱自己是屬於 ""sourcetracker""
那 predict() 要怎麼辨認這些 function , 並按照正確的順序使用??



  誠心求教

--
我用名為真心的卡牌說服你
這是我最後一張牌

--","R_Language"
"2641","M.1385802346.A.BBB","rosso0922","問題","資料分割與LARs應用",2013-11-30 17:05:42,NA,NA,"小弟是R的初心使用者，剛剛開始應用R做研究，所以我上google/人大爬了一些做法
下面有幾個問題想請教板上的高手

第一個是資料分割的部分
prost.std <- data.frame(cbind(scale(prost[,1:8]),prost$lpsa))

將變數1~8標準化，鎖定變數lpsa,cbind則是列出矩陣

names(prost.std)[9] <- 'lpsa'
將變數9命名為lpsa

data.train <- prost.std[prost$train,]
data.test <- prost.std[!prost$train,]
劃分出訓練與測試資料集，!則表示train以外的都是test(隨機抽取)

y.test <- data.test$lpsa                                                  將Y
指定為lpsa,$選取特定條件下的數據，在此選擇data.test中的lpsa
n.train <- nrow(data.train)

我照著網路上的教學做資料分割，我使用教學中給的資料，並且做出我個人的注解http://www-stat.stanford.edu/~tibs/ElemStatLearn/datasets/prostate.data一步一度步的跟著做，可以很順利的切開資料並且抽取訓練跟資料
但是我把資料換成iris的話..資料就切不開了，到data.test的部分就會卡住
出現了：

錯誤在!iris$train : 引數類型不正確

但是我用posta卻不會有這種情況....

另外，LARs的部分
library(lars)

m.lasso <- lars(as.matrix(data.train[,1:8]),data.train$lpsa)
plot(m.lasso)

# Cross-validation
r <- cv.lars(as.matrix(data.train[,1:8]),data.train$lpsa)
bestfraction <- r$fraction[which.min(r$cv)]


# Observe coefficients
coef.lasso <-predict(m.lasso,as.matrix(data.test[,1:8]),
s=bestfraction,type=""coefficient"",mode=""fraction"")
coef.lasso

# Prediction
y.pred.lasso <-predict(m.lasso,as.matrix(data.test[,1:8]),
s=bestfraction,type=""fit"",mode=""fraction"")$fit
summary((y.pred.lasso - y.test)^2)

我也是照著執行都能夠順利的用posta跑出結果來，
但是如果單純要做feature selection我應該要看哪個值呢?

=====================================================================
以上是我實做跟個人的註解，如果有錯請板友糾正跟幫忙謝謝

--","R_Language"
"2642","M.1385785406.A.F3E","iamchile","問題","count total floating-point operations",2013-11-30 12:23:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近看到一篇 paper 在比較不同的演算法，
而他比較演算法的準則不是算 time cost，
而是計算 total floating-point operations，
這篇 paper 是用 matlab 的 flops command，
請問 R 有類似的工具或 package 可以使用嗎？
謝謝。

[關鍵字]:
FLOPS

--","R_Language"
"2643","M.1385657564.A.FE7","EXILESPACER","情報","20131202 MLDM MOnday 會前通知",2013-11-29 00:52:41,NA,NA,"[關鍵字]: Taiwan R User Group, tradeR's week serie, python

[出處]:http://www.meetup.com/Taiwan-R/events/145609122/[重點摘要]:

20131202 MLDM Monday 會前通知


Dear All:


2013/12/02 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，有我們
MLDM Monday 第57次的聚會唷！


在本次的聚會中，我們邀請到了 Gilbert 來為我們介紹 Pandas 在時間序列的應用。
Gilbert 目前在券商任職交易員，長期研究台股程式交易，使用工具橫跨 Excel,
TradeStation, Matlab, MSSQL, VB.NET 及 Python.近年來以 Python + VB.NET + SQLite
作為主要研究開發工具.本次演講將介紹如何利用 Pandas, StatsModels 等相關套件幫助提
高研究效率。並將配合實例操作示範基本的資料分析步驟，教你如何 ""玩"" 資料。
還在用 Excel 整理資料畫圖表嗎? 來讓 Pandas 幫你加速研究吧!!


本次演講的相關資訊:http://www.meetup.com/Taiwan-R/events/145609122/TW.R Officer Group 敬邀

--","R_Language"
"2644","M.1385616785.A.354","celestialgod","問題","Re: which 指令",2013-11-28 13:33:03,NA,NA,"※ 引述《silent910 (唉呀呀)》之銘言：: 大家好：: 我有一個有關 R which指令的問題: 在matlab 是用find  [A,B]=find(c==c(i))或是可以這樣寫在matlab中

A = c(c==c(i)), B = find(c==c(i)): 可以找到c 的值和它是在哪個位置: 但如果用which(c==c(i))  是只找到位置，請問要找到值是要怎麼寫??在R裡面沒有一個函數同時返回位置、值

只能類似上述寫法

B = which(c==c(i))

A = c[B]  or A = c[c==c(i)]: 謝謝!!!!!!!!!!--","R_Language"
"2645","M.1385568367.A.63F","silent910","問題","which 指令",2013-11-28 00:06:04,NA,NA,"大家好：

我有一個有關 R which指令的問題

在matlab 是用find  [A,B]=find(c==c(i))

可以找到c 的值和它是在哪個位置

但如果用which(c==c(i))  是只找到位置，請問要找到值是要怎麼寫??


謝謝!!!!!!!!!!

--","R_Language"
"2646","M.1385564129.A.8F7","Wush978","情報","R Taiwan 2013 研討會",2013-11-27 22:55:26,NA,NA,"[關鍵字]: R, Taiwan, Conference

[出處]:http://event.twdatascience.org/index.php/2013-08-14-07-49-38[重點摘要]:

大會宗旨：
本研討會旨在提供學術界與產業界一個交流平台，針對 R軟體各領域的應用，進行觀摩討論，期使R軟體深植於學術研究與產業活動中。


舉辦日期：102年12月6日 (星期五)
舉辦地點：德明財經科技大學(綜合大樓A506會議廳)
主辦單位：中華R軟體學會 • 德明財經科技大學(管理學院物流管理系暨連鎖加盟學位學程)
協辦單位：台灣資料科學與商業應用協會 • 台北商業技術學院資訊與決策科學研究所•東吳大學海量資料分析研究中心•
                育達科技大學資訊管理系所•Taiwan R User Group

聯 絡 人：林明輝
電子郵件：[email<U+00A0>protected]--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2647","M.1385285459.A.BF2","EXILESPACER","情報","20131125 MLDM Monday 會前通知",2013-11-24 17:30:57,NA,NA,"[關鍵字]: Taiwan R user Group

[出處]:http://www.meetup.com/Taiwan-R/events/145608802/[重點摘要]:

Dear All:

2013/11/25 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，有我們
MLDM Monday 第56次的聚會唷！

在本次的聚會中，我們很榮幸可以邀請到目前任職於公路總局資訊室的 陳守強主任來為我
們介紹 Safe Taiwan 這個台灣目前最完整的地理公開資料庫。

一直以來，陳主任都致力於 Open Data 的推廣與發展，並花了非常多的心血，整合了台灣
政府的各種地理資料庫的資源，建立了 Safe Taiwanhttp://www.safetaiwan.tw/這樣的
一個跨領域的公開地理資料庫平台，讓大家可以更方便快速的取得各種資料！並積極的推動
跨界的資源整合，還智於民的種種 Open Data 的活動與措施，是一位非常熱血、有理想的
人唷！

而他的演講，也跟他所做的事情一樣，常常令人熱血沸騰，又不乏深度的省思 ...... 像這
樣一場精采的演講，相信，大家是一定不能錯過的啦！！！

如果，您最近想要玩，或是正在玩 GeoData, 我們至誠的邀請您，可以在 11/25 的晚上，
來跟我們同樂唷！

另外，如果，您只是想知道目前的居家附近，是否有一些有趣的地理資訊？或一些神奇的地
形結構 ...... 那您一定不能錯過這場精彩的演講唷！他將會帶領你重新認識你的家園環境
 ... 看到一些你平常看不到的面向，重新認識你居住的家與周圍一些看不到的環境 ...

(迷之音：像這樣精采的演講要在哪裡報名呢？ ... 演講的時間與地點要在哪邊查詢呢？
... )http://www.meetup.com/Taiwan-R/events/145608802/TW.R Officer Group 敬邀


--","R_Language"
"2648","M.1385055131.A.29D","dorminia","問題","for loop優化",2013-11-22 01:32:08,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
基本上我的程式有問題處如下

K <- function(A, f)
{
        #A is an matrix
        #f is a functino of matrix with single value output

        n <- length(A)
        ans <- rep(0, n)
        for (m in 1:n)
        {
                ans[m] <- f(A[1:m])
        }

        return(ans)
}


有辦法避免這個for loop嗎?

--
切記  任何事情都不能抹殺我們對唱歌的熱情

因為這是我們活著的原因

--","R_Language"
"2649","M.1384747002.A.DB4","EXILESPACER","情報","20131118 MLDM Monday  會前通知",2013-11-18 11:56:39,NA,NA,"轉貼相關訊息。
_______________________________________________________________________________
Dear All：

2013/11/18 在政大公企中心(創立方, 台北市金華街187號)西樓WB05，會有我們第55次的
MLDM Monday 的聚會！這次我們很榮幸再度邀請到清華大學統計所的Johnson，和我們簡介
無母數分析，以及他開發的R套件[iNEXT](https://github.com/JohnsonHsieh/iNEXT)。

Abstract:

八月份的時候在此分享了種類數的[無母數估計方法
](http://www.meetup.com/Taiwan-R/events/132348402/)，延續之前的主題，今天要分享
種類數稀釋與預測的統計方法。所謂的稀釋與預測法就是透過參考樣本數進行內插與外插法
，以估計當樣本數增加或減少時，在樣本中被觀察到的種類數數目。這個方法可以透過敝人
開發的R套件iNEXT進行分析。

--","R_Language"
"2650","M.1384499372.A.1B5","xiaoing","問題","Re: 新手提問",2013-11-15 15:09:30,NA,NA,"ｔ是transpose，轉置的意思

矩陣[row(橫的),colmun(直的)]

""a:b""  就是a到b的意思



如果你要某矩陣(M)的colmun a到colmun b
就是 M[,a:b]


該行指令就是把矩陣轉置，然後每一row倒著數回來
例如某行本來是a,b,c,d,e 變成e,d,c,b,a
(((是因為nrow(dataMatrixOrdered)=t(ncol(dataMatrixOrdered))



舉個簡單的例子
M=matrix(1:12,3,4)
M
t(M)
t(M)[,nrow(M):1]
在R上執行完應該就可以懂了


希望有解答到你※ 引述《ww2308 (Liang)》之銘言：:    不好意思 小弟我有寫程式的經驗:    最近開始在學R 但是看到下面這行:    猜不太出來他的意思 希望有大大能幫我解釋這行:    t(dataMatrixOrdered)[,nrow(dataMatrixOrdered):1]:    t應該是 transport 的意思吧？--","R_Language"
"2651","M.1384497370.A.931","ww2308","問題","新手提問",2013-11-15 14:36:06,NA,NA,"不好意思 小弟我有寫程式的經驗

   最近開始在學R 但是看到下面這行

   猜不太出來他的意思 希望有大大能幫我解釋這行

   t(dataMatrixOrdered)[,nrow(dataMatrixOrdered):1]

   t應該是 transport 的意思吧？


--","R_Language"
"2652","M.1384415185.A.3DE","jasonhsu14","問題","新手用Ｒ，有關Tinn-R與Rcmdr",2013-11-14 15:46:23,NA,NA,"大學時期因為修課緣故而短暫碰過R軟體

當時助教告訴我們在Tinn-R打code比較方便

而最近這幾年比較常碰的是C++與MATLAB

但如今又因為某些因素必須在重拾R

在GOOGLE了解後發現有一個Rcmdr，與我當初所知道的Tinn-R有所不同

感覺都是方便撰寫code，不太了解其有何不同？

此外，如果我想將一筆EXCEL的資料匯入到R並將其命令為某一個矩陣

再將此矩陣丟入一個已經寫好的function這過程中

我該如何弄出這個矩陣？

有試圖用Rcmdr將excel匯入，但匯入之後不清楚該如何令他是一個矩陣

也不知道該如何呼叫已經寫好的function？

以上問題

先感謝版友的熱心幫助

--","R_Language"
"2653","M.1384345805.A.F4B","a78998042a","問題","想請問計算極值問題",2013-11-13 20:30:02,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
新手

[問題敘述]:
我想要求方程式極值，但不太清楚究竟用哪種指令較合適

Ex:如果我要求 X+2Y  1<X<2 2<Y<10 的極大極小值，那該怎麼做呢?

那如果要求 X*Y 的極大極小值，程式會有差別嗎?

謝謝!!

--","R_Language"
"2654","M.1383821066.A.DEC","goodparent1","問題","error in xts",2013-11-07 18:44:24,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

x<-read.table(""s.txt"",header=T,row.names=c(""time""))
head(x)

           adjprc.10000 adjprc.10001
2000-01-31     -4.37500     -2.04167
2000-02-29     -3.25000     -2.08333
2000-03-31     -4.43750     -2.10417
2000-04-30     -4.00000     -2.12500
2000-05-31     -3.10938     -2.10417
2000-06-30     -3.09375     -2.04167

這是我的資料形式，在跑程式時遇到一些問題，大概R是無法判斷我的時間格式，
不知道怎麼轉換成R讀得懂的格式，上網找了幾天資訊還是解決不了。
我是R新手，還請大家教我一下，謝謝。

structure(list(adjprc.10000 = c(-4.375, -3.25, -4.4375, -4, -3.10938,
-3.09375, -2.84375, -1.09375, -1.03125, -0.78125, -0.82813, -0.51563,
-0.40625, -0.40625, -0.25, -0.23438, -0.21875, 0, NA, NA, NA,
NA, NA, NA), adjprc.10001 = c(-2.04167, -2.08333, -2.10417, -2.125,
-2.10417, -2.04167, -2.02083, -2.16667, 2.125, 2.20833, 2.33333,
2.33333, 2.25, 2.08333, 2.125, -2.04167, -1.89583, 1.95833, 2,
2.16667, 2.08333, 2.125, 2.0625, 1.95833)), .Names = c(""adjprc.10000"",
""adjprc.10001""), class = ""data.frame"", row.names = c(""2000-01-31"",
""2000-02-29"", ""2000-03-31"", ""2000-04-30"", ""2000-05-31"", ""2000-06-30"",
""2000-07-31"", ""2000-08-31"", ""2000-09-30"", ""2000-10-31"", ""2000-11-30"",
""2000-12-31"", ""2001-01-31"", ""2001-02-28"", ""2001-03-31"", ""2001-04-30"",
""2001-05-31"", ""2001-06-30"", ""2001-07-31"", ""2001-08-31"", ""2001-09-30"",
""2001-10-31"", ""2001-11-30"", ""2001-12-31""))
--","R_Language"
"2655","M.1383711015.A.2E6","wudistan","問題","Re: 初學R的問題",2013-11-06 12:10:12,NA,NA,"謝W大回答，雖然還是看不太懂很多內文(哭...)，
不過根據自己還有爬文有些方向了。
第一步想從板上推薦的資源，像是網路或書籍學習R，
然後在學JAVA與C，過程中了解自己所需要是什麼
還有板大門提到的東西有進一步了解再及時補充。

--","R_Language"
"2656","M.1383661117.A.00A","Wush978","問題","Re: 初學R的問題",2013-11-05 22:18:34,NA,NA,"※ 引述《wudistan (wudistan)》之銘言：:   大家好，由於大學就讀統計系,在網路上看了許多big data的資料與一些會用到的程式如java、Hadoop、mapreduce、NoSQL與R，由於在當替代役中，雖然想去上資策會課程又無法去，想說利用有空檔時間學習相關知識，其中對R有基礎認識，想從這裡開始從頭開始學，但由於大學所學的與big data所需貌似不是很有相關…: 小弟愚笨爬了很多文但還是想請問版大們R在學習上該如何與何時進入big data這塊？  謝謝版大們∼想要玩大資料的人，目前的主流是資工出身的同學。統計出身的人相比之下，優勢在於以

機率統計描述資料時，可以更深刻地理解模型背後代表的意義，進而在挖掘資料時找到更

深的資訊。

缺點則是對工具（電腦）的理解不夠深入，所以在工具的運用能力上要花心思，或是避開

交給專家（和資工的人合作）。

R 可以處理較大的資料，但是你要比處理小資料多知道很多R 工作的原理，尤其是記憶體

相關的議題。如果不幸，你得直接處理真正很大很大的資料（TB+），請去學Java(Hadoop)

或Scala(Spark)把資料整理(弄小)之後再交給R 做。


我個人認為大資料中，分析部分的挑戰和過去沒什麼差異，但是在工具和效能上的要求更

嚴苛。現在看起來，硬體的突破比資料量的成長慢。

要分析大資料，使用工具的能力就是第一個門檻。很遺憾，我目前不知道學校方面有沒有

提供相關的訓練。所以我建議你如果在學的話，請務必把學校教的，一般的資料的分析學

好，這部分是你可以勝過其他競爭者的地方。



之後如果你一定要親手做，那請務必自行補充資料結構和演算法的相關知識，否則會連工

具的說明都看不懂。在資料大的時候，O(N)和O(log N)是差異很大的。

# 怎麼讀資料

1. 會用工具撈資料

2. 知道工具指令對應的複雜度

如果只是讀中型大小的資料，可能到1.就夠了。但是當資料大到某個規模，2.的重要性就

出來了。

抽樣在這裡應該很有幫助，但是也要理解抽樣的計算複雜度。

## 學習上的建議

如果是R 的話，就要知道撈資料的時候記憶體的運作機制，要學習Streaming或pipeline的

方式撈資料。

ps. 這裡給你一些key word囉

這些和你的資料源有關，所以建議等到實際遇到再學吧。每種遇到的case可能不一樣，所

以沒必要先學。遇到的時候再請教前輩或是網路上找資源吧。

# 了解效能的頻頸

1. 知道記憶體和硬體的差異。知道怎麼評估記憶體的消耗量。

2. 瞭解怎麼評估演算法複雜度，並且選擇正確的資料結構。

統計所的學生，如果照著課本的方法來讀取大資料，最常見的就是塞爆記憶體而不自知。

照著課本：`read.table(""xxx.csv"")` 然後記憶體就爆炸了，學生也不知道為什麼電腦死

在那邊。

資料結構選得好不好，結果就是要等一天還是數分鐘。擁有找到頻頸的能力，才能了解自

己卡在拿裡，或者是和工程師溝通。

## 學習上的建議

找時間請自修演算法或資料結構，如果沒時間的話也至少理解何謂時間複雜度和空間複雜

度。至少要能理解：http://en.wikipedia.org/wiki/Array_data_structure中下面的

Efficiency comparison with other data structure。你不用會寫，但是看工具說明書

的時候會用到這個知識。這我覺得是在學校可以先學的。

之後我建議直接找實際的資料來做練習，遇到瓶頸可以多和其他有興趣處理大資料的人

交流，也很歡迎來我們社群。社群中許多在公司處理大資料的朋友。（如趨勢科技）


# 個人經驗談

以上是我目前處理30GB/日的資料的心得。目前的任務就是要從這些資料中做出一個好的

Logistic Regression Model。目前我是用R / C++ 作為主要的工具。

在Model Encoding上還滿辛苦的，因為R 沒有能用的工具，我要自己做。用R 做的好處是

對答案相對輕鬆，因為小資料上已經有現成工具可以做比較！

實做上，效能往往最後都卡在Optimization上，這裡我超級推台大資工林老師的libsvm和

Liblinear，他們的optimization的kernel 超猛，會C / C++ 的話可以自己抽出來用。

ps. 可以參考我之前寫的AWS + pbdMPI的文章，裡面有抽Liblinear的核心出來用。

最後Model 的調教和解釋，則和以前統計所教的差不多，就是要努力讓其他同仁可以理解

Variable Encoding 的意義，如何處理Missing Data，也常常會發現其他同仁不小心誤

解模型的意義。

統計出身的，這才是優勢，放掉的話不如念資工囉。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2657","M.1383585274.A.A6D","wudistan","問題","初學R的問題",2013-11-05 01:14:32,NA,NA,"大家好，由於大學就讀統計系,在網路上看了許多big data的資料與一些會用到的程式如java、Hadoop、mapreduce、NoSQL與R，由於在當替代役中，雖然想去上資策會課程又無法去，想說利用有空檔時間學習相關知識，其中對R有基礎認識，想從這裡開始從頭開始學，但由於大學所學的與big data所需貌似不是很有相關…

小弟愚笨爬了很多文但還是想請問版大們R在學習上該如何與何時進入big data這塊？  謝謝版大們∼


--","R_Language"
"2658","M.1383569783.A.756","andrew43","問題","Re: 尋找列聯表專用的的重抽樣function",2013-11-04 20:56:19,NA,NA,"※ 引述《gsuper (Logit(odds))》之銘言：:     One_sample: A       12: B       30: C       40: D       18: E        0: --------------: sum    100: 在這個 sample 中: A出現 12次 , B出現 30次 , C出現 40次 , D出現 18次 , E出現  0次: 總和共 100 次: 是否有 function 可以直接吃這種 table: 然後我可以指定樣本數縮減為 sum = 50 ?多項式分配之隨機變數？
prob <- c(12,30,40,18,0) / sum(12,30,40,18,0)
rmultinom(100, size = 50, prob = prob)
可得抽出不放回 50 球的 100 次模擬。

--http://apansharing.blogspot.com/--","R_Language"
"2659","M.1383565178.A.F62","gsuper","問題","尋找可用的隨機取樣function",2013-11-04 19:39:33,NA,NA,"One_sample
A       12
B       30
C       40
D       18
E        0
--------------
sum    100

在這個 sample 中

A出現 12次 , B出現 30次 , C出現 40次 , D出現 18次 , E出現  0次
總和共 100 次

是否有 function 可以直接吃這種 table
然後我可以指定樣本數縮減為 sum = 50 ?

--
我用名為真心的卡牌說服你
這是我最後一張牌

--","R_Language"
"2660","M.1383500407.A.55D","andrew43","分享","R 學習經驗分享（生物統計背景）",2013-11-04 01:40:03,NA,NA,"在下是生物學（以生態學為主）背景並使用 R 進行分析工具多年。
以下將簡單介紹和我相同背景的朋友幾本好書。

以我周遭同行為例，使用 R 大概可以分成三個階段。

第一個階段：學會「用 R 做常見的統計方析」
例如做 t-test、regression、Pearson chi-square、PCA 等等。
這些需求以應用為主；把 R 視為統計工具而不是種程式語言。
我推薦的資源如下：

  - Biostatistical Design and Analysis Using R: A Practical Guide
    by Murray Logan
    這本書的強項在於一步步地教你把一種分析在 R 中做到完整做到正確。
    內容清楚，對統計理論的說明也尚淺白。
    當工具書很棒，想做什麼分析就看一個章。

  - The R Book
    by Michael J. Crawley
    和上一本比較起來，沒有那麼應用導向，
    但內文比較容易被理解，統計概念多談了一點。

第二階段：學會「用 R 做專精的統計方析」
至於什麼分析視領域而定了。
找資源特定領域就要靠自己了。
不過生態學領域已經很多專書介紹 R 在這方面的應用。
需要自己找專書，但如果能在書中同時學習理論與 R 語言是最好的。

第三個階段：「要寫點程式、做點模擬」
這對大部份的生物學大專生或研究生並不容易，
就算是自修也蠻困難的，除非過去有寫程式的經驗。
對這些朋友我的建議是：
  - 去修使用 R 的課（最紮實的辦法）
  - 和朋友同事一起學習，否則真的像是看天書了。
  - 從中文書開始看起。我只推薦二本中文書
    1. R軟體：應用統計方法 by 陳景祥
    2. 統計建模與R軟件 by 薛毅 & 陳立萍 （簡體中文）
    這二本我都有看過，內容對於「寫程式」和「做分析」並重。
    第一本也適合任何需要使用 R 的初學者，
    而第二本較適合有統計理論背景的初學者。

最後相補充幾點心得。

1. 學習一種新東西本來就不是一本書或一堂課可以完成的事。
   書和課都有深有淺，當下選擇自己看得懂或聽得懂的學習辦法最有利。

2. 遇到問題臉皮要夠厚去請教別人。
   到網路上問問題，只要心存誠意感激，通常都會有好結果。

--http://apansharing.blogspot.com/--","R_Language"
"2661","M.1383385605.A.A68","lianhua","問題","無窮級數的和",2013-11-02 17:46:42,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:

使用者(已經有用R 做過不少作品)

[問題敘述]:

R內建的指令似乎沒有可以把一個函數從0加到無限大，

想請問各位有沒有相關的指令或是做法？

目前只有想到用切點的方式再sum起來。

謝謝


--","R_Language"
"2662","M.1383375812.A.76F","Wush978","心得","R 學習經驗分享",2013-11-02 15:03:25,NA,NA,"我個人學R 大約4 ~ 5 年了，R 嚴格來說是我碰過的第二個程式工具。

# 會R 之前

高中時期，我有段時間很喜歡玩mud ，

所以那時候，就用Zmud這個工具寫了一些機器人，會一點初步的迴圈，條件判斷。

大學念數學系，在大三時也玩過Mathematica。

但是整體來說，我沒有系統性的學過程式語言。

# 碩士班

由於碩班統計所的需要，我開始自學R 。

一開始我也不知道有什麼資源，就是開始看R 導論，先一路硬看到迴圈和條件控制，

看不懂就掃過去，沒花時間搞懂，但是專有名詞可能有個印象，

就直接開始寫作業了。

這時候會的就是：

- 賦值： <-
- 數值運算：+,-,*,/
- 布林運算: &,|,!
- 流程控制: for, if, while

就這樣，很多統計上要用的演算法，我可以用上面的東西硬算出來了。

畫圖就只會畫x-y plot，因為這就是中學學過的座標系統，對我來說很熟悉。

但是我毫無資料結構的概念，所以說就一直不懂下面的程式碼為什麼不能跑：

```r console> X <- cbind(x = 1:10, y = 2 * (1:10) + rnorm(10))> lm(y ~ x, X)Error in model.frame.default(formula = y ~ x, data = X, drop.unused.levels =
TRUE) :
  'data' must be a data.frame, not a matrix or an array
```

碩班的過程，我對R 的功能也越來越熟悉，但是我仍然一直沒有充份的理解：

- data.frame是什麼？
- 為什麼R 的迴圈這麼慢？

這些東西問別人也只能得到簡略的答案，因為背景知識太少，所以就是不懂。

研究時期，我也用R 上面的基本數值運算功能，硬寫出如MCMC之類的演算法，

但是跑的非常慢，所以那時候我滿腦子都是想要把模擬加速的想法。

網路上雖然有許多資源，但是因為我資工底子幾乎是0 ，所以也看不懂。

# 碩士畢

畢業後，我想知道更多R 相關的知識，想要寫出跑更快的模擬，還有一些其他的想法，

我就跑到中研院資訊所做助理。

途中，我自學了一些Rmpi、C 、Rcpp以及製作套件的方法。也發現「國網中心的R 筆記」

因為聽說R 和Linux 比較搭配，所以我工作開始只用Linux 系統。

一年後，我想要把程式寫的更好，所以就跑到內湖一間小公司待了一年練程式，

那時候呼嚕嚕的把php, C++ 看的更精，對一些基本程式語言的功能也有更深入的理解。

學習資源也變得很硬了：

- C++ Primer
- php 官方網站

我還把Soft_Job版或是其他網路上看到的，其他人推薦的程式的書買下來啃。

一本書通常不會看太久，通常程式碼我也不細看，就只是記得它能夠解決什麼問題，

之後遇到了再回頭翻。

我也發現，學一個語言最正統的方式就拭去他的官方網站，找他的Documentation。

隨著C / C++ 的知識的進步，我也開始看php,R 這類scripting language的原始碼。

所以現在我大概知道，為什麼R 的迴圈這麼慢了，

以及從更底層的觀點看R 的資料結構到底是什麼。

學習程式也不再是只停留在語法的階段，而是學習程式語言的特性。

重點也已經從學R ，變成用R 做好各種應用。

也由於對這個程式語言的愛好，所以和學弟創辦Taiwan R User Group，繼續前進！

# 總結

回頭看，走這條路就是要不斷的學習，因為東西真的是太多了，永遠學不完。

碩士班學基礎，畢業後則是要靠自己自學。

這些基礎中，最根本的就是中學以及大學的數學，以及邏輯。

我算是很幸運，高中就已經知道怎麼寫指令式程式語言，所以一開始學R 就只是學語法。

但是因為沒有其他資工相關的背景知識，所以一開始也只能學到這樣。

數值運算上，從簡單的四則運算，到微積分、線性代數、機率和統計都是基礎知識。

學R 上，我是從以下入門：

- [R 導論](http://www.biosino.org/pages/newhtm/r/tchtml/)- [R 學習筆記](http://statlab.nchc.org.tw/rnotes/)我想現在有許多更好的入門管道了，例如Coursera的課程。

之後去補充各種資工背景知識，更深入的理解電腦，這部份很雜，所以我列一些重要的：

- [C++ Primer]
- 資料結構和演算法的教科書

現在應該也有更好的資源了。

事後覺得，如果那時候有Coursera，我應該可以學更快了也說不定。

然後從官方的文件、範例及原始碼來學習了。

如：

- [R FAQ](http://cran.r-project.org/doc/FAQ/R-FAQ.html)- [R for Windows FAQ](http://cran.r-project.org/bin/windows/base/rw-FAQ.html)- [Writing R Extensions](http://cran.r-project.org/doc/manuals/R-exts.html)寫Rcpp的話，常看的就是`/usr/share/R/include`底下的各種`.h`檔案，

想要理解R 底層的知識除了[Writing R Extensions]之外，還要搭配

`/usr/share/R/include/Rinternals.h`

最後就會發現，學習永遠學不完了... XD

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2663","M.1383372528.A.A09","Wush978","問題","Re: 請問R能否直接讀懂""時間""格式?",2013-11-02 14:08:45,NA,NA,"時間資料要用正確的資料型態, 這裡我用POSIXlt當範例

把這些資料儲存成`data.txt`：: 2008-04-07 17:33:48|1730.05: 2008-04-08 12:28:13|1222.02: 2008-04-09 12:26:23|1215.51: 2008-04-11 12:41:00|1248.12: 2008-04-12 14:01:15|1398.85: 2008-04-14 12:37:15|1235.13: 2008-04-15 12:24:22|1220.12: 2008-04-15 17:33:48|1742.14: 2008-04-16 12:23:52|1220.32: 2008-04-17 12:35:46|1240.22: [程式範例]:```r
src.df <- read.table(""data.txt"", sep=""|"")
colnames(src.df) <- c(""time"", ""value"")
src.df$value <- as.numeric(src.df$value)
src.df$time <- strptime(src.df$time, ""%Y-%m-%d %H:%M:%S"")
src.df$sec <- unclass(src.df$time)$sec
src.df$min <- unclass(src.df$time)$min
src.df$hr <- unclass(src.df$time)$hour
src.df$dtime <- src.df$hr * 3600 + src.df$min * 60 + src.df$sec
plot(value ~ dtime, src.df)
```

這可能是你要的

--","R_Language"
"2664","M.1383368457.A.CC9","mystea","問題","請問R能否直接讀懂""時間""格式?",2013-11-02 13:00:54,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一些時間序列的資料(以文字檔儲存), 大致如下:
2008-04-07 17:33:48|1730.05
2008-04-08 12:28:13|1222.02
2008-04-09 12:26:23|1215.51
2008-04-11 12:41:00|1248.12
2008-04-12 14:01:15|1398.85
2008-04-14 12:37:15|1235.13
2008-04-15 12:24:22|1220.12
2008-04-15 17:33:48|1742.14
2008-04-16 12:23:52|1220.32
2008-04-17 12:35:46|1240.22
基本上是一串隨機日期裡隨機時間的資料.  不過這些資料其實是跟時間(也就是幾點幾分)
有很強的相關性, 與日期相關性則較小.  所以我想把日期的資訊忽略掉, 然後做一張
時間--數值 的 scatter plot.

目前我是先用sed把資料改成:
2008-04-07|17:33:48|1730.05
2008-04-08|12:28:13|1222.02
2008-04-09|12:26:23|1215.51
2008-04-11|12:41:00|1248.12
2008-04-12|14:01:15|1398.85
2008-04-14|12:37:15|1235.13
2008-04-15|12:24:22|1220.12
2008-04-15|17:33:48|1742.14
2008-04-16|12:23:52|1220.32
2008-04-17|12:35:46|1240.22
接著用read.table(sep='|')讀進, 然後plot.  不過這樣會有一個問題, 那就是
R似乎看不懂時間格式, 不知道12:28:13 跟 17:33:48的差距(雖然能分出大小).
所以圖的比例不對.

我想知道有沒有簡潔又能畫出正確比例的方法.

另外, 我發現畫出來的圖會跑出一些errorbar之類的東西, 但這並不是我想要的.
請問為何會有這種東西呢?  如何去除他?

[程式範例]:
a<-read.table('foo.txt',sep='|')
plot(a[,2],a[,3])

[關鍵字]:

--","R_Language"
"2665","M.1383312876.A.C31","ico731009","問題","請推薦可以幫程式碼上色的 R 編輯器",2013-11-01 21:34:33,NA,NA,"大家好,

我使用 R 內建的編輯器有兩三年了, 隨著程式碼越來越長.
縮排提醒自己段落, 效果越來越有限了.
目前想到的辦法是替程式碼上色, 增加排版層次感.
請問有推薦的 R 編輯器嗎?

謝謝!


--","R_Language"
"2666","M.1383064655.A.96E","Wush978","問題","Re: 關於r的資料分析問題",2013-10-30 00:37:32,NA,NA,"※ 引述《solsiso (solsiso)》之銘言：: 小弟是新手，最近在學習r language: 剛好有作業分析台灣加權指數的日、週、月報酬率: 及加權指數與台積電日報酬的平均數是否相等的檢定，時間是從 1997-2007: 於是使用了r 當做練習  去做動差、偏態、峰態、和常態性檢定: 但遇到幾個問題: 1.在畫圖型時，報酬率看起來是符合常態分配的形狀: 而在計算偏態、峰態、和常態性檢定時，卻都是很明顯不符合常態: 是因為我單純只使用hist()沒加任何設定所導致的嗎?: 關於使用的package有: moments(): psych(): 常態性檢定有: shapiro.test(): jarque.test(): lillie.test(): 不知道這幾個是否有影響?我之前有聽過一種說法：只要資料量夠大，資料通常都顯著的不常態。

也許你除了常態檢定以外，也可以畫畫QQ-plot，瞭解一下非常態的狀態是屬於：

- 左偏或右偏*
- short tail
- long tail*

short tail的話比較沒有關係，long tail*的話就要小心離群值出現的機會會偏高。
左偏或右偏就想辦法轉換吧。: 2.另外再請教，有什麼package或函數可以一次把多個分析做類似: 表格的輸出嗎?: 例如：上面的動差、偏態、峰態、檢定結果、平均數...等: 一次一起清楚表示的做法，不然不懂要如何把輸出結果一起讓人了解knitr

可以參考https://www.youtube.com/watch?v=OHKZLeKlUsM: 3.在想使用有關excel的package想直接讀excel，package是XLconnect: 於是裝了後卻出現以下訊息: Loading required package: rJava: Error : .onLoad failed in loadNamespace() for 'rJava', details::   call: fun(libname, pkgname):   error: JAVA_HOME cannot be determined from the Registry: 此外: 警告訊息：: package ‘XLConnect’ was built under R version 3.0.2: 錯誤: package ‘rJava’ could not be loaded: 我便再去裝rJava的package，但卻出現以下情況: Error : .onLoad failed in loadNamespace() for 'rJava', details::   call: fun(libname, pkgname):   error: JAVA_HOME cannot be determined from the Registry: 錯誤: package or namespace load failed for ‘rJava’: 我不知道該怎辦才好，只好另尋其它方法，但我還是想了解是否能解決上面情況: 最後希望有板上前輩能指點一下~感謝各位~!: 希望先把rJava裝起來吧！

你需要設定java，

剛剛查了一下，stackoverflow也有人遇過類似問題：http://stackoverflow.com/questions/7019912/using-the-rjava-package-on-win7-64-bit-with-r裡面有兩種答案

FYI

--","R_Language"
"2667","M.1383064109.A.3FA","Wush978","公告","R 的學習經驗徵稿",2013-10-30 00:28:27,NA,NA,"大家好，

最近我有在ptt 上，或者是R 社群上，

遇到對R 感興趣的朋友，詢問學R 的方法和資源。



我個人認為，只整理出R 的學習資源是不夠的，

因為現在的學習資源太多了！

所以新朋友可能看得眼花繚亂而不知從而下手。

大家分享的學習經驗，一定能夠給新手非常大的幫助。

所以在此徵求眾版友，無論您使用R 經驗的多寡，

R_Language板都很歡迎您的學習經驗的分享。


謝謝大家！

也謝謝副版主celestialgod的響應。

--","R_Language"
"2668","M.1383062358.A.0A3","celestialgod","問題","Re: 關於r的資料分析問題",2013-10-29 23:59:16,NA,NA,"※ 引述《solsiso (solsiso)》之銘言：: 1.在畫圖型時，報酬率看起來是符合常態分配的形狀: 而在計算偏態、峰態、和常態性檢定時，卻都是很明顯不符合常態: 是因為我單純只使用hist()沒加任何設定所導致的嗎?: 關於使用的package有: moments(): psych(): 常態性檢定有: shapiro.test(): jarque.test(): lillie.test(): 不知道這幾個是否有影響?檢定的統計量，我覺得有太多，每一個的power不一樣，這需要你自己去找

檢定常態，我覺得最常用的是看qqplot，比較準，請往前找我的文#1IA5Dorjhist則是會受到breaks的影響，形狀就不太一樣。: 2.另外再請教，有什麼package或函數可以一次把多個分析做類似: 表格的輸出嗎?: 例如：上面的動差、偏態、峰態、檢定結果、平均數...等: 一次一起清楚表示的做法，不然不懂要如何把輸出結果一起讓人了解自己寫一個function去輸出一個矩陣包含這些資訊: 3.在想使用有關excel的package想直接讀excel，package是XLconnect: 於是裝了後卻出現以下訊息: 錯誤: package or namespace load failed for ‘rJava’: 我不知道該怎辦才好，只好另尋其它方法，但我還是想了解是否能解決上面情況: 最後希望有板上前輩能指點一下~感謝各位~!: 希望你要安裝JAVA...你是64 bit還要裝64 bit的JAVA

--","R_Language"
"2669","M.1383055602.A.EDC","solsiso","問題","關於r的資料分析問題",2013-10-29 22:06:38,NA,NA,"小弟是新手，最近在學習r language

剛好有作業分析台灣加權指數的日、週、月報酬率
及加權指數與台積電日報酬的平均數是否相等的檢定，時間是從 1997-2007

於是使用了r 當做練習  去做動差、偏態、峰態、和常態性檢定

但遇到幾個問題

1.在畫圖型時，報酬率看起來是符合常態分配的形狀
而在計算偏態、峰態、和常態性檢定時，卻都是很明顯不符合常態
是因為我單純只使用hist()沒加任何設定所導致的嗎?
關於使用的package有
moments()
psych()
常態性檢定有
shapiro.test()
jarque.test()
lillie.test()
不知道這幾個是否有影響?

2.另外再請教，有什麼package或函數可以一次把多個分析做類似
表格的輸出嗎?
例如：上面的動差、偏態、峰態、檢定結果、平均數...等
一次一起清楚表示的做法，不然不懂要如何把輸出結果一起讓人了解

3.在想使用有關excel的package想直接讀excel，package是XLconnect
於是裝了後卻出現以下訊息

Loading required package: rJava
Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: fun(libname, pkgname)
  error: JAVA_HOME cannot be determined from the Registry
此外: 警告訊息：
package ‘XLConnect’ was built under R version 3.0.2
錯誤: package ‘rJava’ could not be loaded

我便再去裝rJava的package，但卻出現以下情況

Error : .onLoad failed in loadNamespace() for 'rJava', details:
  call: fun(libname, pkgname)
  error: JAVA_HOME cannot be determined from the Registry
錯誤: package or namespace load failed for ‘rJava’

我不知道該怎辦才好，只好另尋其它方法，但我還是想了解是否能解決上面情況


最後希望有板上前輩能指點一下~感謝各位~!




希望

--","R_Language"
"2670","M.1383034193.A.15C","celestialgod","心得","R學習經驗分享",2013-10-29 16:09:50,NA,NA,"跟大家分享一下 我自己的學習歷程

希望可以提供現在在學R、未來在學R的各位一個路徑

我大概把R使用者分成4個階段

1. 簡單的流程控制 + 繪圖

2. 熟知base內的function

3. apply等vectorize function的利用

4. usage of class and enviroment, package development等

而我大概只到stage 3之後，就學學平行跟Rcpp而已，就再也沒進展了。

原本有要開發package development about GEE

後來因為一些原因就停止開發了，也很少再用到R了。


我學習R大概3年多了，我從大三修統計系的課而開始接觸R

但是上課時間有限，老師能介紹的也有限

我先讀過R manual才聽老師上課的

老師很簡單的介紹資料格式、繪圖方式、流程控制等

然後引進很多統計的例子 讓我們去熟悉

基本上上完一學期的課 我大概只對R有初淺的認識

而大四時，有做過一個project，是關於simulated annealing的

但是其實對R還不那麼熟，成效有限。

真正開始接觸到R比較深層的東西是到統計所碩一的時候

由於碩士班coding負擔比較重，又希望不要太花時間在run程式上面

所以開始從我覺得很簡單的書 R in a nutshell開始著手

這本書大概涵蓋了初學者所需的知識，我覺得是一本很好入門的書

再者，靠?跟google 學習apply, sapply, lapply, mapply, tapply等function

學習利用vectorize的想法去寫程式，現在延伸到sfLapply等平行的function上

我覺得R是簡單易學的，只要會apply系列的function，其實就很足夠使用了，

至於更底層的東西，有需求才會去碰，或是有興趣，而我自己沒再碰了。

因為現在老闆用MATLAB，也很少接觸R了....

[關鍵字]: 學習經驗

[出處]:

[重點摘要]: vectorize, apply, sapply

--","R_Language"
"2671","M.1382975903.A.C8E","celestialgod","問題","Re: txt檔如何直轉橫",2013-10-28 23:58:21,NA,NA,"我的測試檔案
----------------tmp.txt------------------
name,time,price
A,2000/01/31,-1
A,2000/02/29,2
A,2000/03/31,-3.3
A,2010/12/31,5
E,2000/01/31,-4
E,2000/02/29,5
E,2000/03/31,-1.1
E,2010/12/31,5
Z,2000/01/31,-10
Z,2000/02/29,7
Z,2000/03/31,-1.8
Z,2010/12/31,-2
---------------end of file----------------

R code:
x=read.table(""tmp.txt"",sep="","", header=TRUE)
x[,3] = abs(x[,3])
x.wide=reshape(x,direction=""wide"",
 v.names=c(""price""),
 timevar=""name"",
 idvar=""time"")

output:
        time price.A price.E price.Z
1 2000/01/31    -1.0    -4.0   -10.0
2 2000/02/29     2.0     5.0     7.0
3 2000/03/31    -3.3    -1.1    -1.8
4 2010/12/31     5.0     5.0    -2.0


matlab code
---------------new.txt-------------
name    time    price
A       2000/01/31      -1
A       2000/02/29      2
A       2000/03/31      -3.3
A       2010/12/31      5
E       2000/01/31      -4
E       2000/02/29      5
E       2000/03/31      -1.1
E       2010/12/31      5
Z       2000/01/31      -10
Z       2000/02/29      7
Z       2000/03/31      -1.8
Z       2010/12/31      -2
------------------------------------

new.txt之間是tab，是空白的話，下面'\t'請改成' '

Dat = readtable('new.txt', 'Format', '%s%s%f', 'delimiter', '\t');
Dat.price = abs(Dat.price);
W = unstack(Dat, 'price', 'name');

Matlab的速度很快，可以試試看。

--","R_Language"
"2672","M.1382973252.A.BA7","goodparent1","問題","txt檔如何直轉橫",2013-10-28 23:14:10,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)
[問題敘述]:
例如檔案
name    time       price
A    2000/01/31     -1
A    2000/02/29      2
A    2000/03/31     -3.3
         。
         。
A    2010/12/31      5
         。
         。
E    2010/12/31      7
         。
         。
Z    2010/12/31     -2

轉換成這種格式而且負數變成正數

             A.price 。。 E.price。。Z.price
2000/01/31      1            5         1
2000/02/29      2            5         2
2000/03/31     3.3           6        3.5
    。          。           。        。
    。          。           。        。
2010/12/31      5            7         2
[程式範例]:

x<-read.table(""D:/tmp/test.txt"",sep="","")
x.wide=reshape(x,direction=""wide"",
+ v.names=c(""price""),
+ timevar=""name"",
+ idvar=""time"")
錯誤在`[.data.frame`(data, , timevar) : undefined columns selected

--","R_Language"
"2673","M.1382891614.A.7CD","barbq","分享","Coursera 的 Computing for Data Analysis 課程",2013-10-28 00:33:28,NA,NA,"效法之前 Yukirin 大大的心得分享
那我也來分享剛上完 Coursera 的 Computing for Data Analysis 的課

這是教 R 語言的入門課，只有四週
教授 Roger Peng 本身任職於 Johns Hopkins 公衛學院，專長是統計
我當初挑這門是看上課程短、又專攻 R 語言的基礎
想說靠作業等練習應該可以在短時間內逼迫自己動手熟悉一些語法吧
事實證明還不錯

-------------------------------------------
課程大綱是
第一週：簡介 R 歷史、R 安裝、Data Type、資料的讀寫
第二週：程式的流程控制( if else 這些)、function、loop、debug
第三週：simulation、資料視覺化
第四週：Regular Expression、OOP 的寫法

課程可以看 PPT 或影片(youtube也找得到，未必要註冊上 Coursera 的課)

作業分成 Quiz 跟 Programming
Quiz 每週都是十題，每週可以讓你繳卷三次取最高分當最終成績。
Programming 是二~四週才有，老師會提供 data 跟詳細的 spec 請你寫 function，
每週需要寫的 function 數量不定，但該週的 function 間彼此有連貫，
一旦你突破了第一個，接下來的就能比較快完成。

原本我以為課程裡會教很多統計概念或統計案例
事實上也還好，都是敘述統計求 mean、max 這些基本東西
老師建議想對統計應用有更進一步瞭解者
可以緊接著上 10/28 他同事開的 Data Analysis，八週
介紹影片在此http://bit.ly/16CrYIB課程討論區也是值得推薦的地方
舉凡有課程內容不懂的或作業卡住的都可以上去發問

-------------------------------------------
推薦給
想在短時間瞭解 R 語言使用，又不排斥學習程式語法的同學
一開始學語法的確會比較無趣，討論區上可看到有人受不了而抱怨
若想感到有趣些也可以參考 codeschool 的 R，互動式學習比較不枯燥http://tryr.codeschool.com/我個人是跟著老師 PPT 邊操作然後把語法跟結果記在 Evernote 裡方便日後參考
沒辦法，人老了，不是工作必備的語法實在記不牢 ORZ

-------------------------------------------
後續
應該會試著上老師推薦的 Data Analysis，接受統計的砲轟(泣)
我本身在資訊單位工作，屬於技術一點都不強的老人
學 R 是因為自己工作最常下 SQL 寫報表，想看看另一種語言能處理資料到何種程度
說真的我對 R 的威力真的很讚嘆，處理資料的簡潔、圖形的多樣
也希望在這個板能繼續跟各位前輩學習

對了，這門 Computing for Data Analysis 教 R 語言 的課
下次是 2014/1/6 開課
有興趣者可留意看看

也很高興有這個版


--","R_Language"
"2674","M.1382839599.A.E2D","Wush978","情報","Data Analysis (with R?) on coursera",2013-10-27 10:06:36,NA,NA,"[關鍵字]: R, coursera, on line course

[出處]:https://www.coursera.org/course/dataanalysis[重點摘要]:

About the Course
You have probably heard that this is the era of “Big Data”. Stories about companies or scientists using data to recommend movies, discover who is pregnant based on credit card receipts, or confirm the existence of the Higgs Boson regularly appear in Forbes, the Economist, the Wall Street Journal, and The New York Times. But how does one turn data into this type of insight? The answer is data analysis and applied statistics. Data analysis is the process of finding the right data to answer your question,
understanding the processes underlying the data, discovering the important patterns in the data, and then communicating your results to have the biggest possible impact. There is a critical shortage of people with these skills in the workforce, which is why Hal Varian (Chief Economist at Google) says that being a statistician will be the sexy job for the next 10 years.

This course is an applied statistics course focusing on data analysis. The course will begin with an overview of how to organize, perform, and write-up data analyses. Then we will cover some of the most popular and widely used statistical methods like linear regression, principal components analysis, cross-validation, and p-values. Instead of focusing on mathematical details, the lectures will be designed to help you apply these techniques to real data using the R statistical programming language,
interpret the results, and diagnose potential problems in your analysis. You will also have the opportunity to critique and assist your fellow classmates with their data analyses.
Recommended Background
Some familiarity with the R statistical programming language (http://www.r-project.org/)and proficiency in writing in English will be useful. At Johns Hopkins, this course is taken by first-year graduate students in Biostatistics.
Course Format
The course will consist of lecture videos broken into 8-10 minute segments. There will be two major data analysis projects that will be peer-graded with instructor quality control.  Course grades will be determined by the data analyses, peer reviews, and bonus points for answering questions on the course message board.
FAQ
How is this course different from “Computing for Data Analysis”?
This course will focus on how to plan, carry out, and communicate analyses of real data sets. While we will cover the basics of how to use R to implement these analyses, the course will not cover specific programming skills. Computing for Data Analysiswill cover some statistical programming topics that will be useful for this class, but it is not a prerequisite for the course.

What resources will I need for this class?
A computer with internet access on which the R software environment can be installed (recent Mac, Windows, or Linux computers are sufficient).

Do I need to buy a textbook?
There is no standard textbook for data analysis. The course lectures will include pointers to free resources about specific statistical methods, data sources, and other tools for data analysis.

--","R_Language"
"2675","M.1382791919.A.71B","lyh1214","問題","菜鳥發問:scatterplot matrix怎麼看",2013-10-26 20:51:57,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:

是一門應用統計課的作業需要

題目包含一個反應變數Y和6個解釋變數X1~X6
並要求畫出一張scatterplot matrix


我雖然成功用R跑出來了
但不知道要從那張圖分析變數間的關係
(因為老師講這段的時候剛好重感冒沒去上課ˊˋ)


圖片網址如下：http://ppt.cc/qmnK麻煩R界的各位前輩了
真的感激不盡!



--","R_Language"
"2676","M.1382638376.A.BD4","andrew43","問題","Re: R新手提問",2013-10-25 02:12:52,NA,NA,"就是實作 S3 物件導向。以下給一個例子。

# 建立一個 function sqrt() 並回傳引數的平方值
sqrt <- function(x){
  y <- x^2
  class(y) <- ""sqrt"" # 重點：回傳值設為 sqrt 物件
  return(y)
}

# 建立 sqrt 物件的 plot 方法
plot.sqrt <- function(obj){
  cat(""calling plot.sqrt\n"")
  boxplot(obj)
  # do something...
}

# 建立 sqrt 物件的 summary 方法
summary.sqrt <- function(obj){
  cat(""calling summary.sqrt\n"")
  cat(""mean:"" , mean(obj) , ""\n"")
  cat(""var:""  , var(obj)  , ""\n"")
  # do something...
}

# 試試下面三個指令看看有什麼結果？
abc <- sqrt( c(3,5,7) )
summary(abc)
plot(abc)

以上是 S3 物件導向的基本應用。※ 引述《jason311 (山根)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 新手(沒寫過程式，R 是我的第一次): [問題敘述]:: 我個人在寫function: 我希望function可以用在plot, summary上: 例如:plot(pf.fit)會跑出圖來: 那我function要怎麼寫才有這種功能?: 像lm這個指令: 我有x, y值的話: plot(lm(y~x)): summary(lm(y~x)): 都會有output可是看lm裡面寫的code我實在看不出個所以然: 希望大大們能幫我解惑--http://apansharing.blogspot.com/--","R_Language"
"2677","M.1382613377.A.70D","koai","問題","Re: 想連續處理多個column by factor",2013-10-24 19:16:14,NA,NA,"try if this function works!!


yeild <- function(pdt=""Product1"",month=""Jan"",volume=year,output_name=""Product1_Jan.csv""){
  output <- matrix(0,sum(sapply(year,nrow)),10)
  for(k in 1:10){
    tmpdata <- year[[k]]
    output[1:sum(tmpdata$Month==month),k] <- tmpdata[which(tmpdata$Month==month),which(colnames(tmpdata)==pdt)]
  }
  output <- output[rowSums(output)>0,]
  colnames(output) <- c(paste(""year0"",1:9,sep=""""),""year10"")
  if( is.null(output_name) ){  output_name <- paste(pdt,""_"",month,"".csv"",sep="""")  }
  write.csv(output,file=output_name)
}
yeild()
test <- read.csv(""Product1_Jan.csv"")
test



--","R_Language"
"2678","M.1382610886.A.8C4","celestialgod","問題","Re: 想連續處理多個column by factor",2013-10-24 18:34:44,NA,NA,"最簡單的方式就是用list去處理，範例code如下：
Product = ""Product1"" #可自行輸入產品編號
Month = ""July"" #可指定月份
data.l = lapply(1:10, function(k){
   eval(parse(text=paste(""read.csv(\""D:/year"", k, "".csv\"")"", sep="""")))
   }
)
output.l = lapply(data.l, function(ll){
   eval(parse(text=paste(""subset(ll, "", ""Month==\"""", Month, ""\"", select = "",
     Product, "")"", sep="""")))
   }
)
output.fr = Reduce(data.frame, output.l)

--","R_Language"
"2679","M.1382593012.A.690","jason311","問題","R新手提問",2013-10-24 13:36:49,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
我個人在寫function
我希望function可以用在plot, summary上
例如:plot(pf.fit)會跑出圖來

那我function要怎麼寫才有這種功能?

像lm這個指令
我有x, y值的話
plot(lm(y~x))
summary(lm(y~x))
都會有output可是看lm裡面寫的code我實在看不出個所以然
希望大大們能幫我解惑

--","R_Language"
"2680","M.1382591619.A.386","diplazium","問題","Re: 想連續處理多個column by factor",2013-10-24 13:13:36,NA,NA,"我完全是依照你給的""程式範例""，修改成帶有簡單迴圈的function:

#我假設:1.你已把10年份的資料都匯入R(year1,year2,...)
        2.""程式範例""可以正確地做出你想要的結果
#開始吧!
wish <- function(productname=""Product1"", monthname=""July"")
{
#挑選想看的產品資料並依月分做切割
year1.Product = split(year1[,productname] , year1[,Month])
year2.Product = split(year2[,productname] , year[,Month])
.
.
.
year10.Product = split(year10[,productname] , year10[,Month])

#挑出某一月份的銷售數字
year1ProductMonth =year1.Product[[monthname]]
year2ProductMonth =year2.Product[[monthname]]
.
.
.
year10ProductMonth =year10.Product[[monthname]]

#存成dataframe後輸出到csv
ProductMonth = data.frame(year1ProductMonth, year2ProductMonth, ...,
year10ProductMonth)

return(ProductMonth)
}
#之後你再自己看要不要write.csv匯出吧!


如果要再""優化""的話，就得更加了解你想要得到什麼結果
以及資料取得的方式...etc. 就先這樣子吧~※ 引述《peiwinds (Macchiato Caramel)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: hi大家好: 我現在有10個檔案，檔名是 Sale1~10.csv: 10個檔案代表1~10年的銷售資料: column都是一些產品名稱: row是月份: 現在我想要把固定一個產品的某個月份，觀看十年來的差異: 本來我用了split函數就能撈到我想看的10年的<產品+月份>: 然後產生一個CSV檔，我再用EXCEL拉出趨勢圖看 (EXCEL顏色比較漂亮Q_Q): 但是我主管想要自己去挑選<產品+月份>的組合自己跑R來看資料: 我就必須要把程式寫得比較彈性讓他自行輸入產品跟月份: 最後一樣只要產生一個CSV檔給他自己拉趨勢圖看就好: [程式範例]:: #讀檔: year1 <- read.csv(""D:/year1.csv""): year2 <- read.csv(""D:/year2.csv""): year3 <- read.csv(""D:/year3.csv""): year4 <- read.csv(""D:/year4.csv""): year5 <- read.csv(""D:/year5.csv""): year6 <- read.csv(""D:/year6.csv""): year7 <- read.csv(""D:/year7.csv""): year8 <- read.csv(""D:/year8.csv""): year9 <- read.csv(""D:/year9.csv""): year10 <- read.csv(""D:/year10.csv""): #挑選想看的產品資料並依月分做切割: year1.Product1 = split(year1$Product1 , year1$Month): year2.Product1 = split(year2$Product1 , year2$Month): year3.Product1 = split(year3$Product1 , year3$Month): year4.Product1 = split(year4$Product1 , year4$Month): year5.Product1 = split(year5$Product1 , year5$Month): year6.Product1 = split(year6$Product1 , year6$Month): year7.Product1 = split(year7$Product1 , year7$Month): year8.Product1 = split(year8$Product1 , year8$Month): year9.Product1 = split(year9$Product1 , year9$Month): year10.Product1 = split(year10$Product1 , year10$Month): #挑出Product1在十年來July銷售量: year1Product1July =year1.Product1$""July"": year2Product1July =year2.Product1$""July"": year3Product1July =year3.Product1$""July"": year4Product1July =year4.Product1$""July"": year5Product1July =year5.Product1$""July"": year6Product1July =year6.Product1$""July"": year7Product1July =year7.Product1$""July"": year8Product1July =year8.Product1$""July"": year9Product1July =year9.Product1$""July"": year10Product1July =year10.Product1$""July"": #存成dataframe後輸出到csv: Product1July =: data.frame(year1Product1July,year2Product1July,year3Product1July,: year4Product1July,year5Product1July,year6Product1July,year7Product1July,: year8Product1July,year9Product1July,year10Product1July): write.csv(Product1July, file=""D:/Product1July.csv""): 我嘗試著先以 #挑選想看的產品資料並依月分做切割: 寫了for迴圈搭配paste結果失敗了: Product = ""Product1"" #可自行輸入產品編號: Month = ""July"" #可指定月份: for(i in 1:10){:   x = paste(""year"",i,Product,sep="""");:   y = paste(""year"",i,""$"",Product,sep="""");:   z = paste(""year"",i,""$"",Month,sep="""");:   x = split(y,z);: }: 請問我上面程式要怎麼修改才能讓做到像上面那些指令的結果呢: 感覺是split認為paste出來的東西不是object: 我想要把上面這些寫死的script寫得更彈性簡潔一些: 求高人指點 謝謝: [關鍵字]::: 選擇性，也許未來有用:

--","R_Language"
"2681","M.1382582867.A.570","peiwinds","問題","想連續處理多個column by factor",2013-10-24 10:47:43,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

hi大家好
我現在有10個檔案，檔名是 Sale1~10.csv
10個檔案代表1~10年的銷售資料

column都是一些產品名稱
row是月份
現在我想要把固定一個產品的某個月份，觀看十年來的差異
本來我用了split函數就能撈到我想看的10年的<產品+月份>
然後產生一個CSV檔，我再用EXCEL拉出趨勢圖看 (EXCEL顏色比較漂亮Q_Q)

但是我主管想要自己去挑選<產品+月份>的組合自己跑R來看資料
我就必須要把程式寫得比較彈性讓他自行輸入產品跟月份
最後一樣只要產生一個CSV檔給他自己拉趨勢圖看就好

[程式範例]:#讀檔year1 <- read.csv(""D:/year1.csv"")
year2 <- read.csv(""D:/year2.csv"")
year3 <- read.csv(""D:/year3.csv"")
year4 <- read.csv(""D:/year4.csv"")
year5 <- read.csv(""D:/year5.csv"")
year6 <- read.csv(""D:/year6.csv"")
year7 <- read.csv(""D:/year7.csv"")
year8 <- read.csv(""D:/year8.csv"")
year9 <- read.csv(""D:/year9.csv"")
year10 <- read.csv(""D:/year10.csv"")#挑選想看的產品資料並依月分做切割year1.Product1 = split(year1$Product1 , year1$Month)
year2.Product1 = split(year2$Product1 , year2$Month)
year3.Product1 = split(year3$Product1 , year3$Month)
year4.Product1 = split(year4$Product1 , year4$Month)
year5.Product1 = split(year5$Product1 , year5$Month)
year6.Product1 = split(year6$Product1 , year6$Month)
year7.Product1 = split(year7$Product1 , year7$Month)
year8.Product1 = split(year8$Product1 , year8$Month)
year9.Product1 = split(year9$Product1 , year9$Month)
year10.Product1 = split(year10$Product1 , year10$Month)#挑出Product1在十年來July銷售量year1Product1July =year1.Product1$""July""
year2Product1July =year2.Product1$""July""
year3Product1July =year3.Product1$""July""
year4Product1July =year4.Product1$""July""
year5Product1July =year5.Product1$""July""
year6Product1July =year6.Product1$""July""
year7Product1July =year7.Product1$""July""
year8Product1July =year8.Product1$""July""
year9Product1July =year9.Product1$""July""
year10Product1July =year10.Product1$""July""#存成dataframe後輸出到csvProduct1July =
data.frame(year1Product1July,year2Product1July,year3Product1July,
year4Product1July,year5Product1July,year6Product1July,year7Product1July,
year8Product1July,year9Product1July,year10Product1July)

write.csv(Product1July, file=""D:/Product1July.csv"")


我嘗試著先以#挑選想看的產品資料並依月分做切割寫了for迴圈搭配paste結果失敗了

Product = ""Product1""#可自行輸入產品編號Month = ""July""#可指定月份for(i in 1:10){
  x = paste(""year"",i,Product,sep="""");
  y = paste(""year"",i,""$"",Product,sep="""");
  z = paste(""year"",i,""$"",Month,sep="""");
  x = split(y,z);
}

請問我上面程式要怎麼修改才能讓做到像上面那些指令的結果呢
感覺是split認為paste出來的東西不是object

我想要把上面這些寫死的script寫得更彈性簡潔一些
求高人指點 謝謝

[關鍵字]:選擇性，也許未來有用--┐＊┐＊＊│    │   ╭──╮   ╭──╮＊╭──╮├──╯┘│┐＊│   │＊│◣◢│＊╮   ╭──┤＊╭┼─╯   ├──╯＊             █▌│    │   │＊│   │┐│┐＊    ◣S┘┘╰──╰   ╰──╯   ╰──╯--","R_Language"
"2682","M.1382444287.A.D39","Harryborison","問題","列變數如何統一名稱",2013-10-22 20:18:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
讀入一筆資料，列變數有幾千筆，該如何把列變數統一名稱?
行變數是時間變數，讀入時無法正確顯示時間格式，時間會變1234的排列。
請問如何解決?

[程式範例]:

require(quantstrat)
currency(""USD"")
symbols = c(""A"",""B"",""C"",""D"")
stock(symbols, currency=""USD"",multiplier=1)
getSymbols(symbols, src='yahoo', index.class=c(""POSIXt"",""POSIXct""),
from='2000-01-01')

for(symbol in symbols) {
  x <- get(symbol)
  x <- to.monthly(x,indexAt='lastof',drop.time=TRUE)
  indexFormat(x) <- '%Y-%m-%d'
  colnames(x) <- gsub(""x"",symbol,colnames(x))
  x <- x[,6]
  assign(symbol,x)
}

symbols_close <- do.call(merge, lapply(symbols, get))
write.csv(symbols_close, ""D:/User/test.csv"")
存檔時，時間格式無法正常存檔，顯示為1234序列
read.csv(""D:/User/test.csv"",header=T)
進入EXCEL修改後叫出檔案，一樣顯示1234序列
roc <- ROC(symbols_close, n = 3, type = ""discrete"")
且無法接續symbols_close代號去跑程式。

--","R_Language"
"2683","M.1382290378.A.C9E","jjmr","問題","R & R-Studio 有什麼不同?!",2013-10-21 01:32:54,NA,NA,"[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
不太清楚 R 與 R-Studio 的差別是什麼??

目前練習的時候，都是開R-Studio。


真是不好意思，可能問了笨問題，感謝各位 <(__ __)>

--","R_Language"
"2684","M.1382088749.A.BE7","DrRd","問題","Re: plot座標問題",2013-10-18 17:32:27,NA,NA,"順這個討論串想問一個問題

像以下程式畫出來的圖

barplot(c(1,2,3), names.arg=c('a','b','c'), cex.names=3)

請問可以修改X軸的刻度a b c和X軸之間的距離嗎？※ 引述《celestialgod (攸藍)》之銘言：: data = data.frame(x = 1:10, y = rnorm(10)) 自創的資料: plot(data$x, data$y, axes = FALSE, pch = 24, bg=""lightblue"", col=""blue"",:        xlim=c(1,10), ylim=c(-3.5,3.5), xlab = ""time"", ylab=""y"", type=""b""): # xlab 是標記X軸，ylab是標記Y軸，xlim跟ylim分別選擇x,y範圍: # axes=FALSE是不要畫軸，pch是選擇點的樣式，col是點、線的顏色: # bg是pch21~25可增加的點點顏色，type=""b""是可以畫點線(不相接): box() # 用框框圈住圖而已: axis(1, at=seq(1, 10, by=1),labels=2001:2010, tick=TRUE): # at可以改你要在哪堨[tick，labels是可以使用標記: axis(2, at=seq(-3.5, 3.5, by=0.5), tick=TRUE): # 應該你需要微調的參數都有了，如有需要可以再推文。: ※ 引述《silent910 (唉呀呀)》之銘言：: : 大家好：我是使用R的新手，還在努力中: : 我有一個plot的問題，像如果我在劃一個產品的多年(10)銷售趨勢圖，: : 我的EXCEL的欄位有year、week、sales: : R會自動幫你標X和Y軸的刻度座標，但有時後他標得方式沒有很好: : 那我要怎麼改?: : 謝謝.....--","R_Language"
"2685","M.1381863062.A.596","PeggyWhity","問題","Re: R try&catch",2013-10-16 02:51:00,NA,NA,"謝謝二位的建議 真的太好了 我都不知道原來還有這種處理方式

剛剛還沒看到回覆的時候我試著寫了一段小小的Function如下

如果有error或是warning的話會回傳1

很菜的程式啊~~~~~

ifError<-function(expr, ...){
  w<<-0
  e<<-0
  result<- tryCatch({
    eval(expr)
  }, warning = function(war) {
    w<<-1
    wmassge<<-paste(""MY_WARNING:  "",war)
    w
  }, error = function(err) {
    e<<-1
    emassge<<-paste(""Portfolio_ERROR:  "",err)
    e
  }, finally = {
    print(paste(""End Try&Catch""))
    w
    e
  })
}

test<-ifError(opNor<-optimalPort(Nor,Rf=0))※ 引述《PeggyWhity (Louloute)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [問題敘述]:: 大家好，我想寫一個function，可以檢查R code有沒有error或warning: 如果有則print出error或warnding，可是我不知道怎麼實現，因為我已經會寫try&Catch了: 可是我想寫的是一個function，直接傳入R的指令，然後function會回傳有沒有error: 或是warning: 我寫的try&Catch例子如下，opNor<-optimalPort(Nor,Rf=0.0000552)這一行是我要檢查的: 指令，可是我還有很指令要檢查，所以我想寫一個function直接傳入我要寫的指令，: 然後他就會先告訴我這一行有沒有exception: norresult<- tryCatch({:   opNor<-optimalPort(Nor,Rf=0.0000552): }, warning = function(war) {:   print(paste(""MY_WARNING:  "",war)): }, error = function(err) {:   print(paste(""Portfolio_ERROR:  "",err)): }, finally = {:   print(paste(""End Try&Catch"")): }): 求各位相助~: [關鍵字]:: Try&Catch--","R_Language"
"2686","M.1381856887.A.512","PeggyWhity","問題","R try&catch",2013-10-16 01:08:05,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[問題敘述]:
大家好，我想寫一個function，可以檢查R code有沒有error或warning
如果有則print出error或warnding，可是我不知道怎麼實現，因為我已經會寫try&Catch了
可是我想寫的是一個function，直接傳入R的指令，然後function會回傳有沒有error
或是warning

我寫的try&Catch例子如下，opNor<-optimalPort(Nor,Rf=0.0000552)這一行是我要檢查的
指令，可是我還有很指令要檢查，所以我想寫一個function直接傳入我要寫的指令，
然後他就會先告訴我這一行有沒有exception

norresult<- tryCatch({
  opNor<-optimalPort(Nor,Rf=0.0000552)
}, warning = function(war) {
  print(paste(""MY_WARNING:  "",war))
}, error = function(err) {
  print(paste(""Portfolio_ERROR:  "",err))
}, finally = {
  print(paste(""End Try&Catch""))
})

求各位相助~

[關鍵字]:
Try&Catch

--","R_Language"
"2687","M.1381763310.A.9F7","DrRd","問題","lattice的xyplot修改區塊名稱",2013-10-14 23:08:26,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

想要修改下圖紅色框中的文字內容https://www.dropbox.com/s/wxhaw70zjt3gfky/Rplot.jpeg[程式範例]:library(lattice)xyplot(lat ~ long | cut(depth, 3), data = quakes,aspect = ""iso"", pch = ""."", cex = 2, type = c(""p"", ""g""),xlab = ""Longitude"", ylab = ""Latitude"",strip = strip.custom(strip.names = TRUE, var.name = ""Depth""))上圖是由這段程式碼而來
請問若要修改紅色框中的文字內容，需要加入什麼指令？

--","R_Language"
"2688","M.1381409274.A.50C","anovachen","問題","lag的使用方式?",2013-10-10 20:47:51,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
參考這篇網頁:http://tolstoy.newcastle.edu.au/R/e2/help/07/03/12687.html我遇到的問題有點類似，
如果要對時間數列資料取lag，
通常是用TSA套件的zlag()，
但是我試過lag()，
發現會跑出東西，卻不是我期待的結果= =""
到底R軟體的lag()是設計來做什麼用的？


[程式範例]:

[關鍵字]:
lag, zlag, TSA, time series

--","R_Language"
"2689","M.1381224381.A.892","GTBUG","問題","Re: 寫loop選最適ARIMA model碰到的問題",2013-10-08 17:26:17,NA,NA,"最近為了改寫程式，開始嘗試W大先前建議的例外處理，
我把原文的code先包成一個function, ex:
functionA<-function(i,j,k) {
         原文code....
}

接著利用tryCatch()去執行functionA(這邊我不太了解，是在呼叫function時用tryCatch去包，還是要先把tryCatch寫在function裡面，我這邊做的是前者)z <- tryCatch( {
        functionA(5,2,5)
        },
        error = function(e) {
        message(""Model not good: "", cat(p,d,q)) ;next
        },
        finally {
        print(""all done"")
        }
)
z

接著R就開始output依序的model output，直到某一model無法fitting，就中止
(所以所要的例外處理然後繼續loop 是失敗了...)error message:Encountered an error: Error in arima(tr_set$ED, order = c(p, d, q)):non-stationary AR part from CSS-->是有告知我中止的原因錯誤在value[[3L]](cond) : 沒有可中斷/下一個的迴圈，跳到頂層此外: 警告訊息：-->代表我例外處理放錯地方 所以next跳錯loop的位子?In arima(tr_set$ED, order = c(p, d, q)) :possible convergence problem: optim gave code = 1-->again same error message as usual

以上問題請教

麻煩了※ 引述《GTBUG (賈斯伯張)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 目前針對一筆3年的daily資料作建模(365*3筆daily count data)，已利用過傳統: time-series建模方法，透過ACF, PACF等判斷去找model，也利用過auto.arima去找model: ，現在希望透過手寫一個loop去run各種model的組合，再由最小AIC來選出較適的模型: 當我run後，卻吐回一個error message給我，然後終止loop而沒有任何結果:: ""錯誤在stats:::arima(x, order = order, seasonal = seasonal, fixed =: par[1:narma],  :  wrong length for 'fixed' "":: 如果不用loop, 而是一個一個MODEL慢慢try，就可以跑(如下): ex.: fit<-arimax(x,order=c(3,1,3),seasonal=list(order=c(0,1,1),period=7),xreg=xreg): fit2<-arimax(x,order=c(3,1,3),seasonal=list(order=c(0,1,2),period=7),xreg=xreg): ..: ..: [程式範例]::: count = 0: for(i in 0:5) {:  for(j in 0:2) {:   for(k in 0:1) {:    for(l in 0:1) {:     for(m in 0:2) {:      for(n in 0:1) {:       for(o in 0:2) {:                 model = arimax(ed0710$ED, order=c(i,j,k),:                         seasonal=list(order=c(l,m,n), period=7*o), xreg=xreg1):                 if (count == 0) {:                                 aicmin = model$aic:                                 bestmodel = model:                                 }:                 if ((count != 0)&&  (model$aic<  aicmin)) {:                                 aicmin = model$aic:                                 bestmodel = model:                                 diff1 = j:                                 diff2 = m:                                 seas = o*7:                                 }:         count = count+1:                   }:                  }:                 }:                }:               }:              }:         print(bestmodel):         print(count):         print(diff1):         print(diff2):         print(seas): }:: [關鍵字]: time-series, ARIMA, loop--","R_Language"
"2690","M.1381208385.A.15A","Wush978","問題","Re: R菜鳥請問",2013-10-08 12:59:42,NA,NA,"※ 引述《GTBUG (賈斯伯張)》之銘言：: - 問題:使用迴圈時如何正確借用設定好的i去output所需的資訊: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 入門: [問題敘述]:: 當我fit完幾個model後(如3個model:mod1,mod2,mod3)，想利用accuracy(model): 去show出fitting資訊，我知道可以直接打accuracy(mod1)..依此類推，但現在: 想要改寫程式碼利用loop讓他更簡潔，但是碰到無法在loop裡面指定每次要show的model，: 突然想到這個問題，詢問板上大大們!: [程式範例]:: mod1 <- rwf(EuStockMarkets[1:200,1],h=100): mod2 <- meanf(EuStockMarkets[1:200,1],h=100): mod3 <- Arima(x,order=c(3,1,2)): #我想利用設定好的i讓loop依序針對mod1->3 (i:1->3)執行accuracy()，: 我記得在其他程式語言可以做到，一時卡住在R這邊怎麼用: for( i in 1:3 ) {:   accuracy(mod.i): }: [關鍵字]:accuracy(), loop, R, model你可以把fit 出來的物件放到一個list之中，

ex:

```
mod <- list()
mod[[1]] <- rwf(EuStockMarkets[1:200,1],h=100)
mod[[2]] <- meanf(EuStockMarkets[1:200,1],h=100)
mod[[3]] <- Arima(x,order=c(3,1,2))
```

然後迴圈中使用：

```
for(i in seq_along(mod)) {
  # seq_along(mod) 等同於 1:length(mod)，但是某些情形下能優化
  accuracy(mod[[i]])
}
```

ps. 上面程式碼沒測過，可能有typo

這是你要的嗎？

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2691","M.1381201107.A.02F","GTBUG","問題","R菜鳥請問",2013-10-08 10:58:24,NA,NA,"- 問題:使用迴圈時如何正確借用設定好的i去output所需的資訊

[問題類型]:
程式諮詢

[軟體熟悉度]:
入門

[問題敘述]:
當我fit完幾個model後(如3個model:mod1,mod2,mod3)，想利用accuracy(model)
去show出fitting資訊，我知道可以直接打accuracy(mod1)..依此類推，但現在
想要改寫程式碼利用loop讓他更簡潔，但是碰到無法在loop裡面指定每次要show的model，
突然想到這個問題，詢問板上大大們!

[程式範例]:
mod1 <- rwf(EuStockMarkets[1:200,1],h=100)
mod2 <- meanf(EuStockMarkets[1:200,1],h=100)
mod3 <- Arima(x,order=c(3,1,2))

#我想利用設定好的i讓loop依序針對mod1->3 (i:1->3)執行accuracy()，
我記得在其他程式語言可以做到，一時卡住在R這邊怎麼用
for( i in 1:3 ) {
  accuracy(mod.i)
}

[關鍵字]:accuracy(), loop, R, model

--","R_Language"
"2692","M.1381036782.A.8AD","Wush978","情報","20131007 MLDM Monday: spideR series",2013-10-06 13:19:38,NA,NA,"[關鍵字]: R, crawler, encoding

[出處]:http://www.meetup.com/Taiwan-R/events/136880372/[重點摘要]:

內容對於有要抓資料需求的朋友很有幫助喔！

聚會議程：

1910 ~ 1920 Warm Up

1930 ~ 1950 TBA (和 Rcurl encoding 相關) (Yi-Hsi Lee)

此講次藉由一個 spideR 的實作案例 (爬大陸資訊網站) 與大家分享以下體驗：

(1) 如何利用 Taiwan R User Group 過去的 MLDM Monday -- spideR Series 講次，

7 日內從無到有學會以 R 語言實作 spider (spideR)；

(2) 使用 R 語言實作跨國 spider 時會遇到的編碼 encoding (看似亂碼) 問題，

以及解決方法；

(3) 開發 spider 應該的一些其它重要議題 (法律、匿蹤與擬人化 [機器人不是機械化的

人])。


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2693","M.1380814120.A.729","Wush978","情報","R 統計軟體(7) – 主成分分析與因子分析 ",2013-10-03 23:28:37,NA,NA,"[關鍵字]: R, PCA

[出處]:http://programmermagazine.github.io/201310/htm/article3.html[重點摘要]:

陳老師在這篇文章中簡單扼要地介紹主成分分析以及如何用R 做主成分分析和因子分析。

有興趣的版友有需要入門的話可以參考參考。


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2694","M.1380445942.A.FBD","Wush978","問題","Re: R新手請教",2013-09-29 17:12:19,NA,NA,"※ 引述《goodparent1 (豆芽先生)》之銘言：: 不好意思，我第一次用R。: 碰到幾個難題想請較。: http://www.r-bloggers.com/momentum-with-r-part-1/: 這是我要跑的程式碼: 想問一下用head()跑出來的檔案: 是儲存在電腦的哪裡，或是如何儲存成WORD或是EXCEL?物件沒有特別輸出的話，存在電腦的記憶體中。

輸出其他格式的話，你可以先玩玩write.csv這個函數。

更細節的介紹，可以參考：http://cran.r-project.org/doc/manuals/r-release/R-data.html: 另外XLP XLF XLE XLY是美國ETF的代碼: 可是全部的代碼有900個，有什麼方法可以不用一一代入?不太懂這個問題耶: 我第一次用R，懇求幫助歡迎 :)

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2695","M.1380445202.A.98C","goodparent1","問題","R新手請教",2013-09-29 17:00:00,NA,NA,"不好意思，我第一次用R。
碰到幾個難題想請較。http://www.r-bloggers.com/momentum-with-r-part-1/這是我要跑的程式碼

想問一下用head()跑出來的檔案
是儲存在電腦的哪裡，或是如何儲存成WORD或是EXCEL?

另外XLP XLF XLE XLY是美國ETF的代碼

可是全部的代碼有900個，有什麼方法可以不用一一代入?

我第一次用R，懇求幫助

--","R_Language"
"2696","M.1380312452.A.9B3","anovachen","問題","Sweave與LaTex的排版問題(自動換行)",2013-09-28 04:07:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我要做出一個pdf檔，裡面有R code和圖表，
使用Sweave()編譯後的tex檔，以LaTex輸出成pdf，
發現程式碼的部分都被截斷(超過A4邊界)。
可以讓他自動換行嗎？
(我知道Tex語法可以用\\換行，可是這樣很麻煩耶...Orz)

[程式範例]:
無

[關鍵字]:
Sweave, LaTex, 換行

--","R_Language"
"2697","M.1380306398.A.200","coccolegacy","問題","Re: bootstrap regression test + parallel",2013-09-28 02:26:36,NA,NA,"很久以前碰的
有說錯的話還起各位大大指正※ 引述《skylikewater (choc.)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 這個月開始做多變項(Xi)線性迴歸的拔靴，: 但幾乎是看文件自己摸的，對結果沒什麼信心。: 由於涉及到package，經考慮還是來 R 版發，希望能徵詢到有經驗的前輩。: 我的資料是「篩選過」的 MRI 參數，例如 n 個區域，: 每個區域內含的體素(voxel)不等，全部經內插轉為100個voxel。: 也就是 Y = 100*n，個案有 200 人以上，Xi 都是常態分配的資料。: 對 Y=X1+X2+...+e ，: 我希望做拔靴 1. 增加power 2. 變相增加SNR 3. 老闆""建議"": 來做個別 X 變項在這個迴歸模型中顯著與否的考驗，: 作為「該 X 變項是否在這個 voxel 有顯著解釋力」的說明: 參考本篇教學：: 　　短網址:http://ppt.cc/ilty: 　　http://socserv.mcmaster.ca/jfox/Books/Companion/appendix/: 　　Appendix-Bootstrapping.pdf: 1. 計算個別變項 t-test 的 p-value？: 　 我對他方法的理解是: 　 「把抽出來的參數分配，對原資料對迴歸求得的參數做 z-test」: 　 但對它第十五頁 bootp 計算很疑惑：: 　 看起來像是數一數「有幾個抽出來的參數絕對值，比實際的參數絕對值大」？: 　 而且也看不懂 分母為何設 2000 (twice boot time?): 　 John Fox 有一篇同標題2002年的文件，精神類似，: 　 但他則建議 1. 不用絕對值 2. 因為是雙尾所以要乘 2 (?):    說到底這兩個統計量，: 　 跟其他網路上可以找到的 bootstrapping regression test 教學，: 　 都寫得不是很清楚。: 　 像這兩篇 p 值的計算都不涉及標準誤。: 　 但我實際用 pnorm((tboot-t)/se) 算出來的結果會過於顯著，: 　 網路上可以找到的資源都看了，請各位指點怎麼實作、或推薦我補強什麼統計概念。bootstrap最常見的用途，就是用來求一些分配未知或不容易推導的統計量的抽樣分配。
可以先參考你這篇文章的第三頁的bootstrap confidence interval，
其中的bootstrap percentile interval，
就是bootstrap sample所計算出的統計量的empirical quantiles。

至於模擬檢定，引用p-value wikipedia的定義如下：
In statistical significance testing the p-value is the probability of
obtaining a test statistic at least as extreme as the one that was actually
observed, assuming that the null hypothesis is true.
他這邊算的，
就是從每個bootstrap sample計算出來的檢定統計量大於全部樣本算的檢定統計量的機率: 2. 多變項的 sample() 實作？: 　 有可能直接的用 sample() 直接取出放回「多個變項」嗎？: 　 經過實測結果很怪（p 都等於 1）。:    說實話我也不確定在迴歸的架構下: 　 取出放回是不是「需要以同行/同個案/同樣本，來取出放回」: 　 還是可以自由地每個變項分開抽一般的做法會整筆一起抽
其中一種做法可以對data.frame的row index抽樣，例如：
data(iris)
index = sample(1:nrow(iris), 1000, replace = T)
bootstrap_sample = iris[index, ]: 3. multicore？:    boot 有多核選項，分為 parallel 跟 snow: 　 但以我的資料，在 Linux (CentOS 64bit) 上實測沒什麼加速的感覺。: 　 如果可以用 sample 純粹自己手作，: 　 我會想自己動手用 Shell script + R 分配不同次 boot 的結果: 　 但我可能得用 I/O .rdata 的方法實現，不是很實際: 　 想請問 R 目前有類似 matlab parallel toolbox 之類的東西嗎？: [程式範例]::     Betas=function(formula,data,indices,maxit=20) {:       D=data[indices,]:       LMFit=rlm(formula=formula,data=D,maxit=maxit):       X1D=deltaMethod(LMFit,""X1""):       X2D=deltaMethod(LMFit,""X2""):       X3D=deltaMethod(LMFit,""X3""):       X1ZDiff=X1D[1,1]/X1D[1,2]:       X2ZDiff=X2D[1,1]/X2D[1,2]:       X3ZDiff=X3D[1,1]/X3D[1,2]:       ZDiff=c(X1ZDiff,X2ZDiff,X3ZDiff):       return(ZDiff):     }:     BootTime=1000:     set.seed(666) # for reproducibility:     for (依次取不同Voxel) {:       Voxel=該點Voxel (1*SubjNum vector):       Data=data.frame(Voxel=Voxel,X1=X1,X2=X2,X3=X3):       Results=boot(data=Data,statistic=Betas,R=BootTime,maxit=100,:                    parallel=""multicore"",formula=Voxel~X1+X2+X3):       X1P[該點]=(1+sum(abs(Results$t[,1])>abs(Results$t0[1])))/(2*BootTime):       X2P[該點]=(1+sum(abs(Results$t[,2])>abs(Results$t0[2])))/(2*BootTime):       X3P[該點]=(1+sum(abs(Results$t[,3])>abs(Results$t0[1])))/(2*BootTime):     }選項裡的parallel和snow都是R的平行運算套件
有賴這裡其他大大們分享了


--","R_Language"
"2698","M.1380204249.A.A05","Wush978","分享","在雲端運算環境使用R和MPI",2013-09-26 22:04:03,NA,NA,"[關鍵字]: R, MPI, pbdMPI, Cloud Computing

[出處]:http://0rz.tw/HSFb3[重點摘要]:

好讀版：http://rpubs.com/wush978/R-mpi-cloud快速設定的參考影片：http://www.youtube.com/watch?v=m1vtPESsFqM處理沒有非常非常大的資料，其實不用用到Hadoop。

我們可以在雲端運算環境快速部署MPI環境後，以優於Hadoop的效能做分析。

這篇文章詳細的示範如何在AWS上設定一個MPI的運算環境，

並且用R和pbdMPI來演示一個數分鐘內計算一億多筆資料的Logistic Regression。

大家有問題歡迎來信或水球詢問或討論。


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2699","M.1380130346.A.176","skylikewater","問題","bootstrapping regression.",2013-09-26 01:32:21,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:使用者(已經有用R 做過不少作品)[問題敘述]:這個月開始做多變項(Xi)線性迴歸的拔靴，
但幾乎是看文件自己摸的，對結果沒什麼信心。
由於涉及到package，經考慮還是來 R 版發，希望能徵詢到有經驗的前輩。

我的資料是「篩選過」的 MRI 參數，例如 n 個區域，
每個區域內含的體素(voxel)不等，全部經內插轉為100個voxel。
也就是 Y = 100*n，個案有 200 人以上，Xi 都是常態分配的資料。

對 Y=X1+X2+...+e ，
我希望做拔靴 1. 增加power 2. 變相增加SNR 3. 老闆""建議""
來做個別 X 變項在這個迴歸模型中顯著與否的考驗，
作為「該 X 變項是否在這個 voxel 有顯著解釋力」的說明

參考本篇教學：短網址:http://ppt.cc/iltyhttp://socserv.mcmaster.ca/jfox/Books/Companion/appendix/Appendix-Bootstrapping.pdf1. 計算個別變項 t-test 的 p-value？我對他方法的理解是「把抽出來的參數分配，對原資料對迴歸求得的參數做 z-test」但對它第十五頁 bootp 計算很疑惑：
　 看起來像是數一數「有幾個抽出來的參數絕對值，比實際的參數絕對值大」？
　 而且也看不懂 分母為何設 2000 (twice boot time?)

　 John Fox 有一篇同標題2002年的文件，精神類似，
　 但他則建議 1. 不用絕對值 2. 因為是雙尾所以要乘 2 (?)

   說到底這兩個統計量，
　 跟其他網路上可以找到的 bootstrapping regression test 教學，
　 都寫得不是很清楚。
　 像這兩篇 p 值的計算都不涉及標準誤。
　 但我實際用 pnorm((tboot-t)/se) 算出來的結果會過於顯著，

　 網路上可以找到的資源都看了，請各位指點怎麼實作、或推薦我補強什麼統計概念。2. 多變項的 sample() 實作？有可能直接的用 sample() 直接取出放回「多個變項」嗎？
　 經過實測結果很怪（p 都等於 1）。
   說實話我也不確定在迴歸的架構下
　 取出放回是不是「需要以同行/同個案/同樣本，來取出放回」
　 還是可以自由地每個變項分開抽3. multicore？boot 有多核選項，分為 parallel 跟 snow
　 但以我的資料，在 Linux (CentOS 64bit) 上實測沒什麼加速的感覺。

　 如果可以用 sample 純粹自己手作，
　 我會想自己動手用 Shell script + R 分配不同次 boot 的結果
　 但我可能得用 I/O .rdata 的方法實現，不是很實際

　 想請問 R 目前有類似 matlab parallel toolbox 之類的東西嗎？[程式範例]:Betas=function(formula,data,indices,maxit=20) {D=data[indices,]LMFit=rlm(formula=formula,data=D,maxit=maxit)X1D=deltaMethod(LMFit,""X1"")X2D=deltaMethod(LMFit,""X2"")X3D=deltaMethod(LMFit,""X3"")X1ZDiff=X1D[1,1]/X1D[1,2]X2ZDiff=X2D[1,1]/X2D[1,2]X3ZDiff=X3D[1,1]/X3D[1,2]ZDiff=c(X1ZDiff,X2ZDiff,X3ZDiff)return(ZDiff)}BootTime=1000set.seed(666) # for reproducibilityfor (依次取不同Voxel) {Voxel=該點Voxel (1*SubjNum vector)Data=data.frame(Voxel=Voxel,X1=X1,X2=X2,X3=X3)Results=boot(data=Data,statistic=Betas,R=BootTime,maxit=100,parallel=""multicore"",formula=Voxel~X1+X2+X3)X1P[該點]=(1+sum(abs(Results$t[,1])>abs(Results$t0[1])))/(2*BootTime)X2P[該點]=(1+sum(abs(Results$t[,2])>abs(Results$t0[2])))/(2*BootTime)X3P[該點]=(1+sum(abs(Results$t[,3])>abs(Results$t0[1])))/(2*BootTime)}--","R_Language"
"2700","M.1379666613.A.A47","Wush978","情報","R Taiwan 2013 研討會 Call for Talks",2013-09-20 16:43:30,NA,NA,"[關鍵字]: R, Taiwan, Conference

[出處]:http://0rz.tw/qEchM[重點摘要]:

# 大會宗旨：

本研討會旨在提供學術界與產業界一個交流平台，針對 R 軟體各領域的應用，進行觀摩討論，期使

R 軟體深植於學術研究與產業活動中。

# 徵求主題：

請提供一頁 A4 摘要，寄送至下列電子郵件([email<U+00A0>protected])，內容與 R 軟體在下列

主題之應用相關，但不僅限於下列應用：

1.資料探勘

2.機器學習

3.多變量統計

4.穩健統計方法

5.資料視覺化

6.實驗設計

7.最佳化應用

8.生物資訊學

9.計量經濟學與財務

10.環境與生態統計

11.醫藥統計學

12.心理計量學

13.空間統計學

14.社會與政治科學統計

15.高效能運算

舉辦日期：102 年 12 月 6 日 (星期五)

重要日期：開始收件 (9 月 4 日)

截稿日期 (11 月 3 日)

審查通知 (11 月 10 日)

舉辦地點：德明財經科技大學(綜合大樓 A506 會議廳)

主辦單位：中華 R 軟體學會•德明財經科技大學(管理學院物流管理系暨連鎖加盟學位學程)

協辦單位：台灣資料科學與商業應用協會•台北商業技術學院資訊與決策科學研究所•東吳大學海

量資料分析研究中心•育達科技大學資訊管理系所

聯 絡 人：林明輝

電子郵件：[email<U+00A0>protected]大會網址：http://www.twdatascience.org/event2013--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2701","M.1379657472.A.173","Yukirin","心得","可攜版R + Rstudio",2013-09-20 14:11:10,NA,NA,"最近有需要在陌生的電腦上用R的需求，
再加上自己習慣用RStudio當IDE，
找了一下有沒有可攜版的組合可用。
因為同時要用Python，先找了之後發現Python已經有人做好了Portable的包，
裡面還帶了一些常用的套件之類的，
不過R好像沒有這樣的東西出現，
所以就自己鑽研一下該怎麼用。


1. 先安裝R在隨身碟上，比方說安裝在路徑I://R-3.0.1/安裝的時候不要點選建立桌面圖示、建立檔案關聯跟註冊表之類的。

2. 把電腦裡已經安裝好的RStudio資料夾整個複製到隨身碟上，
   可能是把C://ProgramFiles/Rstudio/複製成I://R-3.0.1/Rstudio/。

3. 執行Rstudio，以這個例子的話是I://R-3.0.1/RStudio/bin/rstudio.exe如果在沒有安裝R的電腦裡，會跳出一個視窗要找R放在哪裡，
   請指定I://R-3.0.1/。
   如果在已經有安裝R的本機電腦上執行，打開會連結到本機電腦的R，
   要手動切換可以從功能表的Tools/Options/General/R version 底下去調整。

如此一來就可以在完全沒有安裝R的電腦裡面用Rstudio了，
剛才測試了一下，應該新安裝套件之類的也沒什麼問題。




--","R_Language"
"2702","M.1379649620.A.DF7","Wush978","情報","Google Analytics and R",2013-09-20 12:00:16,NA,NA,"[關鍵字]: R, Google Analytic

[出處]:http://www.r-bloggers.com/video-google-analytics-with-r/[重點摘要]:

Google Analytics with R!

把Google Analytics的API和R整合之後，Johann就可以把整個分析流程自動化（BI?），

把注意力集中在資料上，進而讓企業可以更深入的瞭解他們的業務。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2703","M.1379250485.A.624","EXILESPACER","情報","20130916 MLDM Monday 會前通知",2013-09-15 21:08:02,NA,NA,"轉貼相關訊息！

_______________________________________________________________________________

20130916 MLDM Monday 會前通知

Dear All：

2013/9/16 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，是我們第46
次的 MLDM Monday 的聚會！

在這系列的演講中，第三場，David Chiu 將分享""簡簡單單使用Amazon EMR & PIG 來做巨
量資料分析""

本次的聚會的議程為：
1910 ~ 1920 Warm Up
1930 ~ 2000 簡簡單單使用Amazon EMR & PIG 來做巨量資料分析 (David Chiu)

講題大綱:
說到巨量資料分析,目前的主流不外乎是使用 Hadoop Cluster 來做 Map Reduce,但是一想
到Hadoop 繁雜的設定,跟要去哪邊找這麼多機器做Cluster 等問題, 就足以讓人打退堂鼓.
而當環境一切就緒, 要懂得如何撰寫 Map Reduce 程式, 才能開始著手分析資料, 又成為讓
人頭痛的問題

所幸, Amazon 提供 Elastic Map Reduce 的雲端服務, 讓使用者彈指之間便可產生不同運
算需求的Hadoop Cluster; 透過Pig Script 即可快速完成 Map Reduce 程式, 透過兩項利
器, 讓巨量資料運算變得相當容易. 本次的Sharing 將示範如何啟用Amazon EMR 跟如何在
上面撰寫Pig Script 讓你快速入門巨量資料分析

報名網址：http://www.meetup.com/Taiwan-R/events/136880062/希望大家會喜歡本次的演講

TW.R 社群敬邀

--","R_Language"
"2704","M.1378952411.A.4BD","aluwei","問題","pca.fd",2013-09-12 10:20:08,NA,NA,"想請問
 我想把20*53的矩陣資料轉成functional data object該怎麼做呢？

因為在pca.fd(fdobj,nharm=2....）
其中fdobj需要為functional data object

希望大家幫忙了^_^


--","R_Language"
"2705","M.1378817221.A.B35","JAHT","程式","Fw: R 指令表",2013-09-10 20:46:59,NA,NA,"※ [本文轉錄自 Statistics 看板 #1EgZqGRz ]作者: JAHT (小Ｊ) 看板: Statistics
標題: [程式] R 指令表
時間: Fri Oct 28 13:26:19 2011

小弟參考各個資料自行整理的R指令表
提供給各位R的使用者，需要的請自行下載

R commands(11.09.13)
(Jah Tsai since 2011.01.21[email<U+00A0>protected])

參考來源：
R Help & R軟體 應用統計方法(修訂版) 陳景祥
統計計算與模擬 余清祥(NCCU Stat.)
多變量分析 洪英超(NCCU Stat.)

使用時機：
已對R指令有基本了解，但對於不常用的指令還未完全熟記，或遇到問題時想知道
R有哪些指令可用，所以整理此表以供簡單查詢，詳細用法請見參考資料。http://ppt.cc/;a_A有發現錯誤，可寄信通知我，以便修正∼謝謝！


--▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄  ▄▄▄▄▄▄▄▄▄▄▄▄▄▄▄--","R_Language"
"2706","M.1378691889.A.653","andrew43","問題","S3 generic function 的傳遞",2013-09-09 09:58:03,NA,NA,"[問題類型]: 程式諮詢
[軟體熟悉度]: 使用者(已經有用R 做過不少作品)
[問題敘述]:

最近開始練習 S3 的物件導向語法，主要是練習 UseMethod() 和 NextMethod()。
不過我不是非常清楚在不同 function 之間怎麼傳遞變數。
詳情請見以上例子。

[程式範例]:

rm(list = ls())
func <- function(x, ...) {
  y <- 200
  UseMethod(""func"")
}
func.integer <- function(x, ...) {
  NextMethod(""func.default"")
}
func.default <- function(x, ...) {
  return(y)
}
func(1L)
# 結果是 R 看不見 y
func(1.1 : 3.1)
# 結果是 R 看得見 y

我對 UseMethod() 和 NextMethod() 的使用方法或時機可能有誤，
但不知道為什麼 func(1L) 就看不見 y 了？

我已確定 func(1L) 是會跑過 func()，func.integer() 再到 func.default()，
不過 y 並沒有跟著到 func.default() 中。

如果我希望 y <- 200 仍保留在建構子中（成為建構時共享的變數），
又要怎麼改寫？有勞各位先進了，多謝。


--http://apansharing.blogspot.com/--","R_Language"
"2707","M.1378473284.A.1A8","Wush978","分享","Plotrix 簡單繪出信賴區間",2013-09-06 21:14:41,NA,NA,"[關鍵字]: R package

[出處]:http://cran.r-project.org/web/packages/plotrix/index.html[重點摘要]:

一個可以簡單繪製信賴區間的套件。

這是我用knitr的Rmd簡單製作的demo頁面：http://rpubs.com/wush978/demo-plotrixFYI

參考： ?plotCI

ps. 這只是複製貼上的一個簡單Demo...

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2708","M.1378404099.A.64A","celestialgod","問題","Re: 用R做複線性迴歸方程分析",2013-09-06 02:01:36,NA,NA,"最後補一個總流程

1. 了解資料特性

2. 查看變數相關性，確保共線性問題不會出現

   => 出現共線性問題 就要考慮其他方法

3. 模型選擇，通常不會是單一標準

   a. 最簡單的方式就是根據你設定的significant level篩選掉不顯著的變數

   b. 用prediction error決定加入哪些變數 (資工最常用)

   c. 用AIC or BIC選擇最好的模型

   d. 有時候也會同時考慮R^2跟AIC

4. Model checking

   a. Normality => 沒過就要考慮response要做轉換，很多時候b的方法會拿來用

   b. Equal variance => 最常見的就是用power transformation or Box-Cox
                        (Note: 轉換以容易解釋為主)

   c. outlier detection => influence大才建議刪除

5. 最終結果


--","R_Language"
"2709","M.1378374514.A.D6D","celestialgod","問題","Re: 用R做複線性迴歸方程分析",2013-09-05 17:48:31,NA,NA,"※ 引述《sseeaann (屌哥)》之銘言：: 資料檔我是載入套件faraway 用data(savings)資料檔去分析: 指令大部分都了解 但可能我迴歸觀念不太好 有些步驟會搞混: ex:像是離群值要常態假設前刪除還是確定為常態假設再刪除: 或是刪除變數該用stepwise或是用full model和reduced model的F分配來檢定: 這些步驟有點不知道用的時機點在哪裡: 有沒有比較懂迴歸分析的大大可以稍微詳述一下整套迴歸的步驟(利用此資料檔)?: 另外小弟我晚一點會在把我打的程式碼PO上來 目前正在打當中^^: → sseeaann:我在統計版也有發文 不過都沒人回-.-: → sseeaann:我現在比較想知道的是說 當整體模型檢定出現兩個以上變數: → sseeaann:T值>0.05 不拒絕Ho 那是否可以直接剔除掉?: → sseeaann:如果直接剔除 是要用哪個方法 偏F檢定還是用stepwise Reg你想要了解的部分就是regression analysis中

model checking 跟 model selection的部分

我就分這兩個part來回答 一邊附上我的程式做解說

library(faraway)
data(savings)

# Part I. Model checking
# 一般來說，model checking，主要就是error term的常態假設以及等變異假設的確認
# 另外，還有利用leverage or Cook's distance查看有沒有outliers
# 在R裡面有很方面的方式去做這三件事，程式如下：
lm.fit = lm(sr~pop75+pop15+dpi+ddpi, data=savings)
summary(lm.fit)
par(mfrow = c(2, 2), oma = c(0, 0, 2, 0))
plot(lm.fit)
# a. Normality Checking
# 右上角就是確認你的殘差，通常就是直接看圖片大概跟QQ-line (圖中的broken line)
# 接近，大概我們都會認為error term符合常態假設，至於檢定，就我的經驗來說，
# 我實在不認為Goodness of fit檢定有良好的Power.....
# 常見的檢定像是：Shapiro-Wilk test of normality
# R當然有相對的程式如下：
shapiro.test(resid(lm.fit))
# H_0: Normality

# 或是你要自己畫QQ plot，我這提供一個範本
library(lattice)
qqmath(~ res, data = data.frame(res=resid(lm.fit)), distribution = qnorm,
aspect=""xy"",prepanel = prepanel.qqmathline, panel = function(x, ...) {
          panel.qqmathline(x, ...)
          panel.qqmath(x, ...)
       })

# b. Equal Variance
# 左上角的圖就是用來check這個假設，一般來說，不要有特別的pattern
# 像是漸小，漸大，先小後大等等，或是有二次曲線出現等
# 通常就認為假設是OK的，我一樣不喜歡等變異假設
# 一樣提供R的等變異假設檢定，在lmtest這個package裡面有
library(lmtest)
gqtest(sr~pop75+pop15+dpi+ddpi, data=savings) # 未測試，直接google的

# equal variance圖的其他畫法
xyplot(res~fit, data=data.frame(res=resid(lm.fit), fit=fitted(lm.fit)))

# c. Outliers checking
# 通常就看右下角跟左下角兩張圖
# 左下角那張 通常不要超過sqrt(3)=1.732就可以了
# 右下角那張看leverage跟Cook's distance，但是至今我還是不太會看...
# 我記得我之前學到的是通常不要超過average leverage的0.7倍吧
# 不過R會自動幫你註記他認為有問題的點，機制我就不知道了

# 其他畫法
xyplot(stdres~fit,data=data.frame(fit=fitted(lm.fit),stdres=rstandard(lm.fit)))

# d. others
# 獨立性檢定就很少再用，因為通常都只能檢驗特定期數，很少用
# R code如下：
library(car)
durbinWatsonTest(lm.fit)

# Part II. Model selection
# 這個part就很複雜了，因為還要牽扯到每一個應用層面的關係
# 通常不同的應用層面，有不同的選擇標準以及方式
# 常見的有stepwise, backward, forward
# 標準有R^2, AIC, BIC, p-value等
# 通常先進行這個Part，才進行model checking的部分
# 我這裡是因為它比較複雜先放在後面說
# 常見的code像是：
step(lm.fit)
step(lm.fit, direction=""backward"")
step(lm.fit, direction=""forward"")

library(MASS)
stepAIC(lm.fit)

# 共線性的檢驗
vif(lm.fit)
# 如果大於5，就是有共線性的存在
# 便要去確定covariate的correlation matrix
# 通常不建議有超過0.7相關係數的變數存在
# 其他解決方案則有 lasso 跟 ridge等方式
# 至於留存問題，通常根據你對資料的了解而決定

# 但是這個部分，真的不是我在這裡可以說完的，我就不獻醜了....
# 有錯煩請指教，獻醜了，謝謝

剛有google到下面兩個網址，你可以去瞧瞧http://www.statmethods.net/stats/regression.htmlhttp://www.statmethods.net/stats/rdiagnostics.html--","R_Language"
"2710","M.1378365050.A.785","EXILESPACER","情報","20130909 MLDL Monday 會前通知",2013-09-05 15:10:48,NA,NA,"轉貼相關聚會訊息

_______________________________________________________________________________
20130909 MLDM Monday 會前通知

Dear All：

2013/9/9 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，是我們第
45次的 MLDM Monday 的聚會！

在這系列的演講中，第二場，我們很高興能邀請到台灣 Yahoo EC Team 分享在 2013
Hadoop Summit 所演講的題目 - Big Data Easy BI 。
投影片連結：http://www.slideshare.net/Hadoop_Summit/big-data-easy-bi本次的聚會的議程為：
1910 ~ 1920 Warm Up
1930 ~ 2000 Big Data Easy BI (Tim, Giivee and Neal)

Abstract:
the Yahoo EC Taiwan team provides business performance matrix to users by
acquiring data from the Web production and Back office ERP systems. The
reporting system is built using traditional BI technologies such as RDBMS,
ETL tools, OLAP tools, home-made reporting tools, store procedures, web
pages,?. With increasing usage growth of the user browsing data in the
business decision on daily basis, The ability to provided data analytics on
these Big Data is getting more and more important and needed. The traditional
RDBMs have reaching its limit in process big data while connecting to OLAP
tool. We started with the feasibility of connecting MicroStrategy with Hive
0.9 and created a prototype system to test in two scenarios – ad-hoc query
to Hive and performance test of the predefined MicroStrategy Intelligent Cube
for ad-hoc analytics. We did the performance test on Ad-hoc query via HiveQL
and query from MicroStrategy cube, and will share the result in the session.
Based on our test results, we will be able to provide the following
applications to different types of users. A) Ad-hoc query running against
Hadoop can allow well trained data analyst or power users to have deeper
analysis on data within Hadoop. OLAP reports running against MicroStrategy
Intelligent Cube can provide quicker response time on ad-hoc analytics with
predefined data in Cube.

報名網址：http://www.meetup.com/Taiwan-R/events/136879972/希望大家會喜歡本次的演講

TW.R 社群敬邀


--","R_Language"
"2711","M.1378307199.A.08D","sseeaann","問題","用R做複線性迴歸方程分析",2013-09-04 23:06:36,NA,NA,"資料檔我是載入套件faraway 用data(savings)資料檔去分析
指令大部分都了解 但可能我迴歸觀念不太好 有些步驟會搞混
ex:像是離群值要常態假設前刪除還是確定為常態假設再刪除
或是刪除變數該用stepwise或是用full model和reduced model的F分配來檢定
這些步驟有點不知道用的時機點在哪裡
有沒有比較懂迴歸分析的大大可以稍微詳述一下整套迴歸的步驟(利用此資料檔)?
另外小弟我晚一點會在把我打的程式碼PO上來 目前正在打當中^^

--","R_Language"
"2712","M.1377966696.A.C66","EXILESPACER","情報","20130902 MLDM Monday 會前通知",2013-09-01 00:31:34,NA,NA,"轉貼相關訊息~

_______________________________________________________________________________

Dear All：

2013/9/2 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，是我們第
44次的 MLDM Monday 的聚會！

在九月初的三次聚會中，我們很高興地邀請到數位業界的 hadoop 高手

來為我們介紹一些 hadoop 的基礎知識與進階應用

而在這系列的演講中，第一場，我們很高興能邀請到長期協助我們社群的好朋友 ------
海威

來為我們介紹關於 Hadoop 的基本知識與架構


本次的聚會的議程為：

1910 ~ 1920 Warm Up

1930 ~ 1950 Introduction to Hadoop (海威)


Abstract:

Hadoop 是一系列工具與分散式系統架構的統稱。其讓使用者能以簡單的 programming
models，進行海量資料處理。 本講將對 Hadoop 的基礎： 1. Hadoop - brief history
2. HDFS ( Hadoop Distributed File System ) 3. MapReduce - programming models
講者：Hai-Wei Wang, Pat Wang, 王海威早先任職於國內意藍、龍捲風科技 ( 同一公司
 ) 開發分散式搜尋架構。曾經是 Java 技術的狂熱擁護者，研究興趣是大型分散式網路
系統開發。目前與夥伴共組 LeXipOn Team，研發遠端影音儲存、分享產品。




希望大家會喜歡本次的演講


TW.R 社群敬邀


--","R_Language"
"2713","M.1377884985.A.4A1","Wush978","問題","Re: 想請問企業中有在使用R?",2013-08-31 01:49:42,NA,NA,"出處：http://www.iiiedu.org.tw/ites/RB.htm2011年美國Rexer Analytics的調查R擊敗所有商業及開放源碼軟體，為資料分析師使用比
例最高的工具。根據Rexer Analytics 2012的最新調查，R使用人數持續攀升，目前已是
47%資料分析師的使用工具，遙遙領先位居第二的商業軟體(17%)。

R現正被Google、Facebook、輝瑞藥廠、默克製藥、美國銀行、洲際酒店集團、殼牌石油
等知名企業使用。Oracle與IBM均已將R融入其Oracle R Enterprise, IBM Netezza Data
Warehouse, IBM SPSS Statistics等產品中，R成為全世界兩大軟體公司的主要分析工具
。※ 引述《sseeaann (屌哥)》之銘言：: 主要是有些好奇啦 因為教我們R的老師有跟我們說過: 以統計軟體來說 R比較常自用 企業相對來說比較常用SAS、SPSS: 不過SAS我學的不是說很好 SPSS則沒學過: 還是說也是有不少企業有用R?--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2714","M.1377881224.A.7B3","sseeaann","問題","想請問企業中有在使用R?",2013-08-31 00:47:02,NA,NA,"主要是有些好奇啦 因為教我們R的老師有跟我們說過
以統計軟體來說 R比較常自用 企業相對來說比較常用SAS、SPSS
不過SAS我學的不是說很好 SPSS則沒學過
還是說也是有不少企業有用R?

--","R_Language"
"2715","M.1377879922.A.0FF","celestialgod","問題","Re: plot座標問題",2013-08-31 00:25:19,NA,NA,"data = data.frame(x = 1:10, y = rnorm(10))自創的資料plot(data$x, data$y, axes = FALSE, pch = 24, bg=""lightblue"", col=""blue"",
       xlim=c(1,10), ylim=c(-3.5,3.5), xlab = ""time"", ylab=""y"", type=""b"")# xlab 是標記X軸，ylab是標記Y軸，xlim跟ylim分別選擇x,y範圍# axes=FALSE是不要畫軸，pch是選擇點的樣式，col是點、線的顏色# bg是pch21~25可增加的點點顏色，type=""b""是可以畫點線(不相接)box()# 用框框圈住圖而已axis(1, at=seq(1, 10, by=1),labels=2001:2010, tick=TRUE)# at可以改你要在哪堨[tick，labels是可以使用標記axis(2, at=seq(-3.5, 3.5, by=0.5), tick=TRUE)# 應該你需要微調的參數都有了，如有需要可以再推文。※ 引述《silent910 (唉呀呀)》之銘言：: 大家好：我是使用R的新手，還在努力中: 我有一個plot的問題，像如果我在劃一個產品的多年(10)銷售趨勢圖，: 我的EXCEL的欄位有year、week、sales: R會自動幫你標X和Y軸的刻度座標，但有時後他標得方式沒有很好: 那我要怎麼改?: 謝謝.....--","R_Language"
"2716","M.1377847666.A.51D","silent910","問題","plot座標問題",2013-08-30 15:27:43,NA,NA,"大家好：我是使用R的新手，還在努力中

我有一個plot的問題，像如果我在劃一個產品的多年(10)銷售趨勢圖，

我的EXCEL的欄位有year、week、sales


R會自動幫你標X和Y軸的刻度座標，但有時後他標得方式沒有很好


那我要怎麼改?


謝謝.....

--","R_Language"
"2717","M.1377395975.A.C5B","Wush978","分享","利用R和Shiny製作網頁應用",2013-08-25 09:59:30,NA,NA,"[關鍵字]: R, Shiny

[出處]:https://bitbucket.org/tw_use_r/taiwan-r-user-r-tutorial/src/5f6ede862a9b58f836f982af9315691cb6b6fbf8/src/ProgrammerMagazine/201308/201308.Rmd?at=master[重點摘要]:

好讀版：http://rpubs.com/wush978/shiny這篇文章是寫給沒碰過網頁的R User，內容主要用於解釋Shiny運作的機制。

(報告學長，完全不用學HTML，完全不用學Javascript)

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2718","M.1376983473.A.A6B","dagen","問題","不要讀進*",2013-08-20 15:24:30,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
有一份DATA，裡面有些數據是沒有的，所以用*取代

那在作圖的時候，該怎麼不讀進*

之前有學過，可是忘記了= =

適用NA取代嗎



[程式範例]:
 ID     month  TL age sex   WG   GW       GSI
1 I3-02     3 476   4   F 38.0 0.30 0.7894737
2 I3-04     3 448   4   M 32.5 0.05 0.1538462
3 I3-05     3 511   *   F 34.5 0.13 0.3768116
4 I3-06     3 496   4   F 34.5 0.31 0.8985507


例如這樣吧





--
有隻鯨魚一直往深海遊
               游阿~游阿
                    嘆了一口氣說
                           唉......壓力好大

--","R_Language"
"2719","M.1376853768.A.61E","celestialgod","分享","R一些用書",2013-08-19 03:22:46,NA,NA,"入門：

1. introduction to R,http://www.cran.r-project.org/doc/manuals/R-intro.pdf2. R in a nutshell by Joseph Adler

3. The R Book by Michael J. Crawley

4. R in Action by Robert Kabacoff

5. A First Course in Statistical Programming with R

   by W. John Braun and  Duncan J. Murdoch

6. R Cookbook by Paul Teetor

  我只看過1、2跟6而已，我把3跟4當成參考用書，比較多應用例子。

進階：

1. The Art of R Programming by Norman Matloff

2. Software for Data Analysis: Programming with R by John Chambers

  這幾本，我都挑我有興趣的部分去看而已，介紹較多底層的東西。

繪圖相關：

1. R Graphics by Paul Murrell

2. Lattice Multivariate Data Visualization with R by Deepayan Sarkar

3. ggplot2: Elegant Graphics for Data Analysis by Hadley Wickham

  2跟3，我只有在需要做漂亮一點的圖，我才會去翻它XD。

Rcpp: Seamless R and C++ Integration with Rcpp by Dirk Eddelbuettel

[關鍵字]: 書

[出處]: 網路上尋找的

[重點摘要]:

--","R_Language"
"2720","M.1376669553.A.2ED","celestialgod","問題","Re: 詢問有關迴歸分析 R的指令",2013-08-17 00:12:30,NA,NA,"# 我創的例子
n = 50; p = 5
X = matrix(rnorm(n*p),n)
data = data.frame(y = cbind(1,X) %*% 1:6 + rnorm(n), X)
lm.fit = lm(y~., data)

# 改自anova.lm這個function
anova_f2 = function(lm.fit){
        if(class(lm.fit)!=""lm"") stop(""It just work for lm."")
        if(!is.null(lm.fit$weights)) stop(""It does not work for weighted lm."")
        SSE = sum(resid(lm.fit)^2)
        SST = sum((lm.fit$model$y - mean(lm.fit$model$y))^2)
        ss = c(SST-SSE, SSE, SST)
        p = lm.fit$rank; n = length(resid(lm.fit))
        df = c(p-1, n-p, n-1)
        ms = ss / df
        f = ms[1] / ms[2]
        p = pf(f, df[1], df[2], lower.tail = FALSE)
        table = data.frame(df, ss, ms, f, p)
        table[2:3, 4:5] = NA
        dimnames(table) <- list(c(""model"", ""Residuals"", ""Total""), c(""Df"",
        ""Sum Sq"", ""Mean Sq"", ""F value"", ""Pr(>F)""))
        table
}
anova_f2(lm.fit)
# result
          Df     Sum Sq    Mean Sq  F value       Pr(>F)
model      5 4548.74366 909.748731 870.5031 8.457429e-43
Residuals 44   45.98369   1.045084       NA           NA
Total     49 4594.72734  93.769946       NA           NA

# another way
n = 50; p = 5
X = matrix(rnorm(n*p),n)
y = cbind(1,X) %*% 1:6 + rnorm(n)
anova(lm(y~X))

# covariate 用矩陣就可以顯示model的ANOVA table了
# result
Analysis of Variance Table

Response: y
          Df Sum Sq Mean Sq F value    Pr(>F)
X          5 5840.0 1168.01  1268.5 < 2.2e-16 ***
Residuals 44   40.5    0.92
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1※ 引述《sseeaann (屌哥)》之銘言：: 我知道ANOVA這個指令可以叫出變異數分析表: 不過這指令跑出來的是一個MODEL的各變數的變異數分析表: 而小弟我要的則是一個MODEL的SST,SSR,SSE的變異數分析表來分析整個MODEL: 知道指令的大大麻煩請解答一下吧--","R_Language"
"2721","M.1376568518.A.A8F","sseeaann","問題","詢問有關迴歸分析 R的指令",2013-08-15 20:08:36,NA,NA,"我知道ANOVA這個指令可以叫出變異數分析表
不過這指令跑出來的是一個MODEL的各變數的變異數分析表
而小弟我要的則是一個MODEL的SST,SSR,SSE的變異數分析表來分析整個MODEL
知道指令的大大麻煩請解答一下吧

--","R_Language"
"2722","M.1376494074.A.D92","Wush978","問題","Re: 請問讀取csv檔後怎劃出直方圖??",2013-08-14 23:27:50,NA,NA,"※ 引述《oscarliu (yaya)》之銘言：: [問題類型]:: 讀csv檔裡面的數字,例如2.1%......: 似乎不是向量不能畫圖??: 一直顯示'x' must be numeric: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 讀csv檔裡面的數字,例如2.1%......: 似乎不是向量不能畫圖??: 一直顯示'x' must be numeric: [程式範例]:: a1=read.csv(""C:\\profit2.csv""): hist(a1,col=""yellow"",labels=TRUE)以下的內容，對於解決問題可能沒有直接幫助

ps. 需要直接幫助的話，強烈建議你把資料丟上來給大家看。

    或是用 a2 <- head(a1) ; dump(""a2"", ""temp.R"")

    然後把temp.R的內容貼上來

R 的物件是有資料型態的。

由於使用R的時候，R會自動判斷物件的型態，所以R的使用者可能不清楚什麼是*型態*。

所有物件的資料，最終就是電腦記憶體中的0和1(又稱做bit)，而電腦要怎麼解釋這些0和
1的意義？

舉例來說，00110000這8個bit可以解釋為文字符號""0""，也可以解釋為整數48。

而型態就是電腦解釋這些bit的方式。

在程式中常見的基礎型態是整數、數值(實數)、字串或boolean，

- 整數型態在R叫integer
- 數值型態在R叫numeric
- 字串型態在R叫character
- boolean型態在R叫logical

在R 之中還另外有一種稱為raw的向量，主要是用於儲存特殊格式的資料。它的概念近似
於一般資料庫系統中的BLOB(Binary Large OBject)物件。

在R 的世界中，R 會自動判斷物件的型態，所以使用者並不需要有這方面的知識，就可以
用R了。

然而有時候，還是會有R 無法自動幫你處理型態轉換的時候，你就是遇到這個狀況。

錯誤訊息： ""'x' must be numeric"" 就是在告訴你：

- R 不知道怎麼幫你把x 轉換成數值型態
- 你需要自己把x 轉成數值後再丟過來

FYI

--","R_Language"
"2723","M.1376471997.A.25F","celestialgod","問題","Re: 請問讀取csv檔後怎劃出直方圖??",2013-08-14 17:19:55,NA,NA,"#如果資料有些有% 有些沒有 可以先抓出包含%在處理掉%a1 = c(""2.1%"",""2.2"",""2.3%"",""2.5"",""2.6%"", ""0.01"", ""0.7%"")
loc_contain_perc = which(lapply(a1, function(v){
           intersect(strsplit(v, """")[[1]],""%"")})==""%"")
a1[loc_contain_perc] = as.numeric(Reduce(c,
               strsplit(a1[loc_contain_perc], ""%""))) * 0.01
hist(as.numeric(a1))※ 引述《oscarliu (yaya)》之銘言：: 感謝大大幫忙: 它顯示Error in strsplit(a1, ""%"") : non-character argument: 不知道該怎改??: 學到轉換的語法 很感謝大大!--","R_Language"
"2724","M.1376471225.A.426","oscarliu","問題","Re: 請問讀取csv檔後怎劃出直方圖??",2013-08-14 17:07:02,NA,NA,"感謝大大幫忙
它顯示Error in strsplit(a1, ""%"") : non-character argument
不知道該怎改??
學到轉換的語法 很感謝大大!

--","R_Language"
"2725","M.1376466161.A.7BF","celestialgod","問題","Re: 請問讀取csv檔後怎劃出直方圖??",2013-08-14 15:42:39,NA,NA,"a1 = paste0(rnorm(100),""%"")# 我創的例子，你就用你讀入的資料即可a2 = as.numeric(Reduce(c, strsplit(a1,""%""))) * 0.01# strsplit把%去掉，會轉成list，再用Reduce轉回vector# 最後轉回數字，乘上0.01hist(a2)※ 引述《oscarliu (yaya)》之銘言：: [問題類型]:: 讀csv檔裡面的數字,例如2.1%......: 似乎不是向量不能畫圖??: 一直顯示'x' must be numeric: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 讀csv檔裡面的數字,例如2.1%......: 似乎不是向量不能畫圖??: 一直顯示'x' must be numeric: [程式範例]:: a1=read.csv(""C:\\profit2.csv""): hist(a1,col=""yellow"",labels=TRUE)--","R_Language"
"2726","M.1376463795.A.64C","oscarliu","問題","請問讀取csv檔後怎劃出直方圖??",2013-08-14 15:03:13,NA,NA,"[問題類型]:
讀csv檔裡面的數字,例如2.1%......
似乎不是向量不能畫圖??
一直顯示'x' must be numeric

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
讀csv檔裡面的數字,例如2.1%......
似乎不是向量不能畫圖??
一直顯示'x' must be numeric


[程式範例]:
a1=read.csv(""C:\\profit2.csv"")
hist(a1,col=""yellow"",labels=TRUE)


--","R_Language"
"2727","M.1376395133.A.D92","Wush978","情報","Rserve與Java的跨平台通信",2013-08-13 19:58:50,NA,NA,"[關鍵字]: R, java, system

[出處]:http://cos.name/2013/08/r-rserve-java/[重點摘要]:


前言

現在主流的異構跨平台通信組件Apache Thrift已經火遍大江南北，支持15種編程語言，
但是到目前為止還沒有加入R語言。要讓R實現跨平台的通信，就只能從R的社區中找方案
，像rJava,RCpp,rpy都是2種語言結合的方案，這些方案類似地會把R引擎加載到其他的語
言內存環境。優點是高效，缺點是緊耦合，擴展受限，接口程序無法重用。

Rserve給了我們一種新的選擇，抽象R語言網絡接口，基於TCP/IP協議實現與多語言之間
的通信。讓我們體驗一下Rserve與Java的跨平台通信。

---

看來以後用R 的系統會愈來愈多了

--","R_Language"
"2728","M.1376193422.A.C4D","EXILESPACER","情報","2013-08-11 MLDM Monday 會前通知",2013-08-11 11:56:59,NA,NA,"轉貼相關訊息
______________________________________________________________________________

Dear All：

2013/08/12 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，有我們
MLDM Monday 第41次的聚會唷！

本次的聚會主題很特別，是跟音訊分析有關的

我們很榮幸邀請到，在音訊與影像分析領域深耕多年的 Jerry , 來為我們大家講一個音訊
分析的入門講題

Jerry 目前任職於中華電信研究所，主要負責雲端相關的領域

不過，在此之前，Jerry 也和許多藝術工作者一起玩耍過...




在其中，也用過一些音訊分析的技巧...因此，有許多難得的實戰經驗唷...




本次的聚會聚會議程為：

1910 ~ 1920 Warm Up

1930 ~ 2000
introduction to audio pattern recognition(Jerry)




Abstract:

Are you curious about sound processing? Are you interested in audio
application? This talk introduces the process of pattern recognition in audio
for beginners to take preliminary steps, including preprocessing, feature
extraction and model training.




2000 ~ 自由交流與討論







歡迎大家一起來參加這場音訊分析的饗宴唷^^




報名網址http://www.meetup.com/Taiwan-R/events/132347942/TW.R 團隊 敬上

--","R_Language"
"2729","M.1375975658.A.128","Wush978","問題","Re: 請問R studio寫函式問題?",2013-08-08 23:27:34,NA,NA,"`source` 是最開始的方法，但是當要套用的函數變多之後，

就需要更好的方式來引用這些既有的函數。

R 語言中，最好的辦法就是包成套件。

Rstudio提供了很棒的套件開發環境，

除了編譯和安裝之外，

還提供roxygen2的撰寫和自動提示。

想學的話可以參考http://www.youtube.com/watch?v=QKSK4vL-IXc有任何問題也都歡迎繼續在版上發問。

FYI※ 引述《FakeHand (假手)》之銘言：: [軟體熟悉度]:: 入門: [問題敘述]:: 想請問一下我用R studio創了一個project，: 想把函式寫在另一個.R檔，: 然後主程式去呼叫它，: 但是會出現沒有此函式的錯誤訊息，: 想請問一下R有提供這樣個功能嗎?(呼叫其他檔案的函式): 需要怎樣的設定或是要如何寫呢?--","R_Language"
"2730","M.1375863058.A.2F0","FakeHand","問題","請問R studio寫函式問題?",2013-08-07 16:10:56,NA,NA,"[軟體熟悉度]:

入門

[問題敘述]:

想請問一下我用R studio創了一個project，

想把函式寫在另一個.R檔，

然後主程式去呼叫它，

但是會出現沒有此函式的錯誤訊息，

想請問一下R有提供這樣個功能嗎?(呼叫其他檔案的函式)

需要怎樣的設定或是要如何寫呢?

--","R_Language"
"2731","M.1375855631.A.6D6","celestialgod","問題","Re: 迴歸參數的擷取",2013-08-07 14:07:08,NA,NA,"# 我造的範例
n = 4; p = 13
logit_trans = function(x) exp(x) / (1+exp(x))
data = matrix(rnorm(n*p, 0, 0.1), n)
data = data.frame(y = sapply(logit_trans(cbind(1, data) %*% 1:(p+1)),
  function(p) rbinom(1,1,p)), data)

comb = t(combn(4:12,2))
beta = mapply(function(i, j) matrix(coef(glm( data[,1] ~ data[,2] + data[,3] +
  data[,i] + data[,j] + data[,i]:data[,j], family=binomial(link=""logit""),
  data = data))), comb[,1], comb[,2])
beta = cbind(comb, t(beta))
colnames(beta) <- c(""i"", ""j"",""Intercept"", ""Gender"", ""Age"", ""CAR1"", ""CAR2"",
  ""CAR1*CAR2"")

--","R_Language"
"2732","M.1375762574.A.8B1","microcat","問題","迴歸參數的擷取",2013-08-06 12:16:11,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的執行迴歸分析，產生下列表單，想擷取第一欄位（Estimate）
因為有出現 NA 的情況，無法完整的將第一欄位擷取出來！
（有很多組需要執行，每組所估算出的 Beta 值長度不一）
希望能保留完整六個 Beta 值
（Intercept,data[,2],data[,3],data[,i],data[,j],data[,i]:data[,j]）

想請教版上先進，可以如何達到這的目標，謝謝各位


Coefficients: (2 not defined because of singularities)
                     Estimate Std. Error z value Pr(>|z|)
(Intercept)         -0.779222   1.309672  -0.595    0.552
data[, 2]            1.346329   0.204052   6.598 4.17e-11 ***
data[, 3]            0.035580   0.005365   6.631 3.32e-11 ***
data[, i]           -0.771758   0.645828  -1.195    0.232
data[, j]                  NA         NA      NA       NA
data[, i]:data[, j]        NA         NA      NA       NA



[程式範例]:mylogit <- glm( data[,1] ~ data[,2] + data[,3] + data[,i] +data[,j] + data[,i]:data[,j],family=binomial(link=""logit""), data = data)coef <- summary(mylogit)$coefficientscoef[,1][關鍵字]:
感謝各位協助

--","R_Language"
"2733","M.1375629273.A.315","EXILESPACER","情報","2013-08-05 MLDM Monday 會前通知",2013-08-04 23:14:31,NA,NA,"轉貼相關訊息

_______________________________________________________________________________

Dear All：

2013/08/05 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，會有我們
第40次的 MLDM Monday 的聚會！

這次的報名網址：http://www.meetup.com/Taiwan-R/events/132348402/聯絡人：
- c3h3 0988209252
- Wush 0973687970

本次的聚會聚會議程為：

1910 ~ 1920 Warm Up
1930 ~ 1950 無母數統計的估計與預測(Johnson)

Abstract:

利用常態分布進行推論的有母數統計方法幾乎是二十世紀統計界最偉大進步。然而，當調查
資料無法完整表現出母體特性時，採用無母數方法比較可能取得可信賴的結果。今天我將以
估計未知集合內部種類數大小為例，介紹無母數估計量以及相關的統計分析方法給大家。

很歡迎大家來共襄盛舉！

另外我們也在此徵求9月份議程的投稿，
如果大家有分析Big Data(不限工具)的經驗願意分享的話，
請聯絡我們的工作人員，
或是寄信至[email<U+00A0>protected]投稿喔！

--","R_Language"
"2734","M.1375201026.A.F70","memphis","問題","Re: matrix of P-values (correlation test)",2013-07-31 00:17:04,NA,NA,"直接引用上一文章作者的例子

data.fr = data.frame(matrix(rnorm(1000),100))  #假資料 100 row 10 column

data.fr.cor <- cor(data.fr)
data.fr.cor.tval <- data.fr.cor*sqrt((100-2)/(1-(data.fr.cor*data.fr.cor)))
data.fr.cor.pval <- 2*pt(abs(data.fr.cor.tval), 98, lower.tail=F)

### 參考資料
(wiki) Pearson product-moment correlation coefficient※ 引述《celestialgod (攸藍)》之銘言：: # examples of cor.test: x <- c(44.4, 45.9, 41.9, 53.3, 44.7, 44.1, 50.7, 45.2, 60.1): y <- c( 2.6,  3.1,  2.5,  5.0,  3.6,  4.0,  5.2,  2.8,  3.8): cor.test(x, y, method = ""kendall"", alternative = ""greater""): # You need to input x and y, in addition, you can edit some parameters.: # For your question, I would write the program like this way: # Suppose your dataset is a data.frame which is named as data.fr: data.fr = data.frame(matrix(rnorm(1000),100))  # assumed data: n = dim(data.fr)[2]: all.comb = t(combn(n,2)): # To produce all combinations of all variables: cor_test_res = lapply(1:dim(all.comb)[1], function(v) {:         cor.test(data.fr[,all.comb[v,1]],data.fr[,all.comb[v,2]])}): # Get the results of tests: cor.m = sapply(c(4, 1:3), function(i) {:         sapply(1:dim(all.comb)[1], function(v) cor_test_res[[v]][[i]])}): # transfer the result to a matrix format: colnames(cor.m) = c(""estimate"", ""statistic (t)"", ""df"", ""p.value""): rownames(cor.m) = sapply(1:dim(all.comb)[1], function(k) {:         paste0(names(data.fr)[all.comb[k,1]], ""_"",:                 names(data.fr)[all.comb[k,2]])}): # Another: data.fr = data.frame(matrix(rnorm(1000),100))  # assumed data: n = dim(data.fr)[2]: all.comb = t(combn(n,2)): # To produce all combinations of all variables: cor.m = Reduce(rbind, lapply(1:dim(all.comb)[1], function(v) {:         Reduce(cbind, cor.test(data.fr[,all.comb[v,1]],:                         data.fr[,all.comb[v,2]])[c(4,1:3)])})): colnames(cor.m) = c(""estimate"", ""statistic (t)"", ""df"", ""p.value""): rownames(cor.m) = sapply(1:dim(all.comb)[1], function(k) {:         paste0(names(data.fr)[all.comb[k,1]], ""_"",:                 names(data.fr)[all.comb[k,2]])}): ※ 引述《foam (Working Class Hero)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 我用 corMat <- cor(df): : 可以得到一個correlation matrix: : (我的dataframe(df) 每一個column數值間的correlation coefficient): : 請問如果我想要得到matrix of p-values (correlation test的 p-value): : 應該怎麼寫呢?: : 謝謝--","R_Language"
"2735","M.1375197794.A.323","celestialgod","問題","Re: matrix of P-values (correlation test)",2013-07-30 23:23:11,NA,NA,"# examples of cor.test
x <- c(44.4, 45.9, 41.9, 53.3, 44.7, 44.1, 50.7, 45.2, 60.1)
y <- c( 2.6,  3.1,  2.5,  5.0,  3.6,  4.0,  5.2,  2.8,  3.8)

cor.test(x, y, method = ""kendall"", alternative = ""greater"")
# You need to input x and y, in addition, you can edit some parameters.

# For your question, I would write the program like this way
# Suppose your dataset is a data.frame which is named as data.fr

data.fr = data.frame(matrix(rnorm(1000),100))  # assumed data
n = dim(data.fr)[2]
all.comb = t(combn(n,2))# To produce all combinations of all variablescor_test_res = lapply(1:dim(all.comb)[1], function(v) {
        cor.test(data.fr[,all.comb[v,1]],data.fr[,all.comb[v,2]])})# Get the results of testscor.m = sapply(c(4, 1:3), function(i) {
        sapply(1:dim(all.comb)[1], function(v) cor_test_res[[v]][[i]])})# transfer the result to a matrix formatcolnames(cor.m) = c(""estimate"", ""statistic (t)"", ""df"", ""p.value"")
rownames(cor.m) = sapply(1:dim(all.comb)[1], function(k) {
        paste0(names(data.fr)[all.comb[k,1]], ""_"",
                names(data.fr)[all.comb[k,2]])})

# Another
data.fr = data.frame(matrix(rnorm(1000),100))  # assumed data
n = dim(data.fr)[2]
all.comb = t(combn(n,2))
# To produce all combinations of all variables
cor.m = Reduce(rbind, lapply(1:dim(all.comb)[1], function(v) {
        Reduce(cbind, cor.test(data.fr[,all.comb[v,1]],
                        data.fr[,all.comb[v,2]])[c(4,1:3)])}))
colnames(cor.m) = c(""estimate"", ""statistic (t)"", ""df"", ""p.value"")
rownames(cor.m) = sapply(1:dim(all.comb)[1], function(k) {
        paste0(names(data.fr)[all.comb[k,1]], ""_"",
                names(data.fr)[all.comb[k,2]])})※ 引述《foam (Working Class Hero)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我用 corMat <- cor(df): 可以得到一個correlation matrix: (我的dataframe(df) 每一個column數值間的correlation coefficient): 請問如果我想要得到matrix of p-values (correlation test的 p-value): 應該怎麼寫呢?: 謝謝--","R_Language"
"2736","M.1375190753.A.706","andrew43","問題","Re: matrix of P-values (correlation test)",2013-07-30 21:25:50,NA,NA,"※ 引述《foam (Working Class Hero)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我用 corMat <- cor(df): 可以得到一個correlation matrix: (我的dataframe(df) 每一個column數值間的correlation coefficient): 請問如果我想要得到matrix of p-values (correlation test的 p-value): 應該怎麼寫呢?: 謝謝只有相關係數怎麼可以求 p 值呢?
如果你想利用

t = r ((n - 2) / (1 - r^2))^(1/2) ~ T(n-2)

求 p 值, 也至少有一個相同大小的矩陣來描述 n 才能是啊.

--","R_Language"
"2737","M.1375186600.A.923","foam","問題","matrix of P-values (correlation test)",2013-07-30 20:16:36,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

我用 corMat <- cor(df)
可以得到一個correlation matrix
(我的dataframe(df) 每一個column數值間的correlation coefficient)

請問如果我想要得到matrix of p-values (correlation test的 p-value)
應該怎麼寫呢?

謝謝



--","R_Language"
"2738","M.1374761558.A.1ED","mickey1231","問題","交集",2013-07-25 22:12:35,NA,NA,"[問題類型]:程式諮詢


[軟體熟悉度]:使用者


[問題敘述]:

我現在有幾組向量，請問當向量大於3組時我該怎麼取交集?

我知道只有兩組向量的話可以用intersect來做

請問有內建的函數或封包嗎?

不太想用途法煉鋼交集再取交集...

[程式範例]:無

謝謝大家!









--","R_Language"
"2739","M.1374594790.A.CD8","basuman","問題","資策會的Big Data資料分析三步曲",2013-07-23 23:53:03,NA,NA,"[問題類型]:課程諮詢

[軟體熟悉度] : 入門 (以前曾接觸過，但很久沒用)

[問題敘述]:

工作上會用到Data Mining，目前工作上是用SAS EM & EG

想多學點其他的工具，因為覺得EM在使用上雖然方便，但流程的方式有時較無彈性

網路查資策會有開 Big data 資料分析的課程(共三種)，採用 R實作
(http://www.iiiedu.org.tw/ites/RB.htm)

分別是R的操作介紹、資料探勘、資料視覺化

因為費用不便宜，全上的話要近23000  Orz ...

請問板上有人上過這課程嗎 ? 或是資策會的課程評價如何 ?

或者是...自修也行 ??

謝謝 ~

--","R_Language"
"2740","M.1374478740.A.84B","Wush978","分享","Rhiredis",2013-07-22 15:38:52,NA,NA,"[關鍵字]: R, redis

[出處]:http://rpubs.com/wush978/rhiredis[重點摘要]:

由於分析需要，我自己寫了一個redis server的client來取代既有的client(rredis)。

新的client是hiredis的wrapper，效率比舊有的好150到230倍左右。

有興趣在ubuntu上玩R 和 redis server的可以參考參考。

由於跨平台的關係，我應該不會把它放到CRAN上。

我目前沒有時間把他變成windows compatible。
--","R_Language"
"2741","M.1374250194.A.812","EXILESPACER","情報","2013-07-22 MLDM Monday",2013-07-20 00:09:51,NA,NA,"轉貼相關訊息
_______________________________________________________________________________

Dear All：

2013/07/22 在政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)，會有我們
第38次的 MLDM Monday 的聚會！

本次的聚會聚會議程為：
1910 ~ 1920 Warm Up
1930 ~ 1950 從R開始玩股票 (Ben)
2000 ~ 2020 D3.js 與其應用實例的簡介 (aha)

這次的第一個Main Issue是由Ben為我們帶來的COSCUP講題的預演，以及邀請到aha來跟我們
講解D3.js的使用。
以下是這次的講題資訊：

---

從R開始玩股票

Abstract
踏出股市新手投資的第一步：利用R的簡單套件輕鬆觀察股市趨勢、分析股市行情，進而快
速建立交易模型，讓你第一次做交易策略就上手。

Biography
Taiwan R user Group Officer 以前念生物資訊所時，開始接觸R，利用R分析Microarray的
資料。後來因緣際會之下，不小心跳進R的世界裡，嘗試用R盡量解決所有問題，是R的愛用
者和學習者。http://coscup.org/2013/zh-tw/program/---

D3.js 與其應用實例的簡介

曾在網頁處理data visualization困擾嗎? 本次的內容將介紹一套javascript library
D3.js，希望大家在聽完這次的演講之後，發揮自己的創意，在網頁上根據自己的需求做出
想要的呈現的圖，表達出自己的想法．

---

最後，希望大家有空可以播空填寫這次會後的意見調查表：https://docs.google.com/forms/d/13PNQ7GF8vhw1YG5_hplpA9g2j1bRJJnMybApn6Ots64/viewform想要參與本社群的朋友也可以投稿我們周一MLDM Monday議程喔！
我們8月的議程歡迎任何和ML演算法相關的分享，
9月的議程則歡迎任何和處理大資料技術相關的分享。

Taiwan R User Group敬邀

連絡人：
Chia-Chi (c3h3) 0988209252
Wush Wu 0973687970

報名網址：http://www.meetup.com/Taiwan-R/events/125702992/--","R_Language"
"2742","M.1373969453.A.AB0","wisdom8002","問題","適合學習R語言嗎？",2013-07-16 18:10:51,NA,NA,"[軟體熟悉度]:

入門
現在是正在學習matlab，還沒有太大的作品
不過入門階段算學得不錯，也會繼續學習

[問題敘述]:

如題
因為我是土木水利方面，走關於生態的
然後剛好對於程式語言是蠻有興趣的

大部分學長會用spss
我想我們的統計在整個""統計學""中不算太深的

不過重點是會不會全力學習統計軟體還是得看之後的研究方向(現在剛要碩一)
但我是抱持著喜歡程式語言
雖然可能一些下拉式的軟體就能做到，不過我比較喜歡程式的感覺
能控制的東西多，至少就我用matlab比起excel而言
畫圖就能控制更多東西
所以就算只去做簡單的東西，能碰一種語言是一種
然後情況是研究室大概沒有人能夠一起學習甚至教我
當然買書自學是還ok 雖然英文的閱讀沒那麼快
但至少目前學習matlab上網看看一些簡單的code時的說明不會太困難

現在我比較害怕的是會不會連簡單的事情我都會做不好
或者別人用介面幾秒拉出來的東西我卻需要東翻西翻還做錯(當然我是說學習""過""的情況)

簡單的說，像matlab不算太困難的程式
事前的學習夠紮實，遇到簡單問題其實不會太麻煩解決
就不知道R這個語言的入門上手度如何？
還是不是專門統計的大家就不建議學R語言了？

當然目前我還不能定義簡單和困難
但我想至少我會做到我從生物統計學入門看來的東西
雙變數迴歸、PCA、皮爾森卡方檢定
主要還是以能做出來為主

--","R_Language"
"2743","M.1373804408.A.ADF","EXILESPACER","情報","2013-07-14 MLDM Monday 會前通知",2013-07-14 20:20:05,NA,NA,"轉貼相關聚會訊息
_______________________________________________________________________________

聚會地點：[暫定] 政大公企中心(創立方)西樓WB05(台北市金華街187號 西樓WB05)


聚會議程：

1910 ~ 1920  TBA

1930 ~ 1950 Hacking Models with R (c3h3)

Abstract

在這個「大資料」時代崛起的「掏資料潮」中，Data Mining 等相關的技術被應用的越來越
廣泛，也越來越深刻。不過，在真實的生活應用中，許多傳統的 Modeling 技術，還是常常
會遇到許多困難與挑戰。因此，學會如何改寫 Model 來因應環境的需求，就成為了資料分
析人員很重要的技能之一。在這場演講中，我將會介紹「R 中許多典型的資料模型」、「原
始模型遇到的問題」、「模型背後的最佳化問題」、「如何改寫模型並改寫其 Solver」

Biography

Python 和 R 的愛用者，熱愛數學與資料分析；現任某新創公司的 Chief Data Scientist
；Taiwan R User Group社群與 MLDM Monday 聚會的創辦人。http://coscup.org/2013/zh-tw/program/1950 ~ 2000  Q&A

--","R_Language"
"2744","M.1373712334.A.CA0","mickey1231","問題","資料讀取",2013-07-13 18:45:31,NA,NA,"[問題類型]:程式諮詢


[軟體熟悉度]:使用者


[問題敘述]:

最近在分析資料時，由於資料量越來越大，欄位也越來越多

想請問有人知道有指令是可以讓抬頭直接表示為那個欄位的名稱嗎?

印象中老師有教過，但我google都找不到...


[程式範例]:

假如資料像這樣

Gender Age score1 score2 ...  score10
 1     10    5       7   ...    2
 1     15    6       4   ...    3
 2     11    6       3   ...    1
                 .
                 .
                 .
 1     18    9       4   ...    5


t=read.csv(""data.csv"",header=T)

Gender=t[,1];Age=t[,2];score1=t[,3];....score10=t[,12]

想請問的有沒有指令可以讓我不用一欄一欄定義名稱

我直接輸入Gender就會是第一欄，Age就會是第二欄的程式嗎?

因為欄位一多就會變得很麻煩@@

所以想請為各位有沒有比較快的方法?

謝謝!!





--","R_Language"
"2745","M.1373641264.A.8E9","Yukirin","分享","Coursera的Data Science課程",2013-07-12 23:01:02,NA,NA,"我想分享一下我的上課心得，
但其實不太知道發哪裡好，
我想R板的成員應該屬於比較新潮的使用者，
或許會對Data Science或是Big Data之類的議題較有興趣，
就PO在這邊了，如果不行的話再請告訴我我自刪。

Data Science算是一個嶄新的領域，
定義可能有許多種，不過整體而言用以下這句話概括應該還行:
資料的獲取、整理、儲存以及分析。
在傳統的領域上，我會覺得比較像是Programming & 統計學的一種綜合體，
當然也要包含資料所要運用領域的知識。

因為相當新，所以其實不像統計學有大量有系統性的整理教材，
之前在Coursera上看到一門新的課程，
""Introduction to Data Science""，目前已經完結，不過應該還可以上去看。
課程當初的大綱大概是:
1. Data Science的來源、運用領域、展望。
2. SQL、MapReduce、Hadoop、NoSQL的介紹。
3. Machine Learning概論:
   一些基礎的監督\非監督學習法: 迴歸、k-means、隨機森林、SVM等等。
4. 數據可視化。
5. Graph Analytics、Text Analytics     (其實我不太懂這是什麼)

課程一共8周，當初的規劃好像是要寫四次作業，
用Python兩次、SQL一次、R一次。

-----------------美好的願景分隔線---------------------

之前自己學過一點Python跟R，
對於兩者在Data Science上的運用，大概的印象是:
Python可以幹些髒活，處理raw data，
R則在接下來的統計分析跟可視化上面很有用。

第一次作業的確就是運用Python去撈取twitter的資料，
然後將抓下來的raw data汲取資訊，
分析包含的字詞啦、hash-tag的熱門度啦等等，
這算是我在這門課程收穫最大的部分，
一來是撈資料來分析很好玩，二來是邊學邊做Python很有趣。

然後我覺得這就是我收穫最多的部分了。
先講課程編排:
上面講的大綱並沒有完整的執行，Text Analytics根本沒上。

數據可視化的部分非常的泛泛，聊了什麼顏色啊、形狀啊哪個比較吸引人之類的，
我本來期待在可視化的部分可以用R的套件來點實作發揮，
不過沒有，講了一堆人在看東西怎樣怎樣的理論就沒了。

機器學習的部分則是太趕，顯得空泛。
先講了基本的統計分析，但我覺得太多沒必要的內容.....
會講花時間講統計基本，應該就是假設學的人沒有很紮實的基礎，
花時間去扯Publication Bias、Meta-analysis這種通常是學了一些才回頭要看的東西，
我認為沒什麼必要，然後講Benford's Law或是貝式統計概念，
的確是很炫啦，但跟課程銜接不上吧。

因為同時間我有在上一樣是Coursera上Machine Learning的課，
同樣的範圍ML那邊可能用了五周，還蠻詳細的說明了演算法寫法跟例子，
這邊只有用兩三周，顯得就囫圇吞棗，
也沒有實作等等，就只是講個概念而已。

我本來沒有學過SQL之類的工具，SQL的部分有一個作業，
等於也就是讓我們學會一些SQL的語法基礎跟概念，這邊還行。
MapReduce也有一次作業，這個我就沒有做了，講解概念的部分則是有點收穫。
然後R的那次作業也神隱了。

這堂課本來就不是要讓我們去深入Data Science的每一個工具，
而是讓我們變成""進階的初學者""，每一個概念跟工具都稍微會懂一些，
有興趣再自己去鑽。－－如果以這樣的出發點來說，
我會覺得課程的編排廣而不深沒有關係，
能夠清晰的理解工具的概念跟背後的思考方法也是一種助益。

只是老師Bill Howe作不到這點。
同樣的課程大綱，不應該像上述的那樣有些地方太快太帶過，
有些地方又花時間講無謂的東西。
他的講課很沉悶，很容易自己講一講停住、不知道要說什麼，
或者是胡言亂語一陣之後又說喔這個不是重點我們回來吧，
投影片常常字超級多，但有時其實是不講也不會怎樣的東西。

相對的上Machine Learning的老師就很清晰，
雖然是華人但英文很容易聽懂(比Howe好聽)，
上課節奏也掌握得很好、不冷場、有重點，
可以感受到每一個課程元素之間的鏈結。

當然Data Science本來就是相對多主題的學問，
但是可以讓我每次都想快轉也其實不容易......。
聽起來很像抱怨，不過我想我的意見不會沒有道理，
這門課還是有其用處:

推薦給:
1. 根本不知道Data Science、Machine Learning是什麼的人，
   在痛苦地聽完8周課之後你真的會變成""進階的初學者""
2. 需要訓練定力跟英文聽力的人。

不推薦給:
1. 本來就大概知道Data Science這個領域在幹嘛，
   想要來學點實用工具的人。  (我大概就屬於這種)
   我們需要的是訂閱一下R-bloggers跟Data Science 101，http://www.r-bloggers.com/http://datascience101.wordpress.com/看看演算法要怎麼運用、怎麼處理資料跟作數據可視化，
   都有example code就自己做做看，順便關心一下這領域有啥新東西。

2. 已經在某個領域中精進(ML、統計、programming.....)想要多方面涉獵的人，
   對你而言跳著有興趣的課程看就夠了，
   但我覺得搜尋那些關鍵字(NoSQL、Hadoop之類的)看看網路上的介紹，
   或去找本好書來看應該效率會比較高。



--","R_Language"
"2746","M.1373463828.A.625","Wush978","分享","R tips: 撿回剛剛的計算結果",2013-07-10 21:43:45,NA,NA,"[關鍵字]: R

有時候我們跑出計算結果的時候忘記把結果assign給變數，例如：

```r
slow_function()
# 要再跑一次
```

這時候只要在執行下一個命令之前，趕快使用`.Last.value`，就有辦法把計算結果救回

```r
slow_function()
a <- .Last.value
```


--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2747","M.1373096821.A.51C","EXILESPACER",NA,"2013-07-08 MLDM Monday 會前通知",2013-07-06 15:46:58,NA,NA,"代轉相關訊息
-------------------------------------------------------------------------------

20130708 MLDM Monday 會前通知

Dear All：

2013/07/08 在創立方，會有我們第36次的 MLDM Monday 的聚會！
本次是由 TW.R 社群 和 Taipei.py 社群合辦的Joint Meeting

在本次的聚會中，我們很榮幸能邀請到現在於美國 Google 任職的 Ming-Hen Tsai 先生

來幫助我們對於 Machine Learning 的演算法，及其背後的內含與運用

能夠有更深一層的認識與理解

他將為我們帶來本次聚會主要的講題為 「Machine Learning: Theory, Implementation
and Practice」

並分享相關的套件使用經驗：
LibSVM
Liblinear
Libshorttext
Vopal Wabbit (VW)
Weka
gurobi

如我大家有使用過相關的套件，非常歡迎大家到現場和 Ming-Hen 交流唷

此外，在本次的聚會中我們也很榮幸地邀請到了宇匯知識科技的執行長 周培林先生

來為我們簡單的介紹一下該公司使用 Machine Leaning 的經驗與過程http://www.bridgewell.com.tw/宇匯知識科技是一間深耕於 Machine Learning 很久的公司

旗下的產品線大多都跟 MLDM 有很大的關聯性

相信在培林先生無私的分享下，大家一定也可以有斐淺的受益

最後，我們很高興能看到在台南也出現了 Python 社群的聚會

也很感謝 Tim 在台南之旅時，為我們爭取到了一場跟 Optimization 相關的 Lighting
Talk

因此，本次聚會的 Warm-up Session，也將由來自台南的 Clifford Yen 來為我們分享他在
碩士班時所作的相關工作

「Python在有限元素軟體Abaqus的應用」

感謝他特地從台南北上參加本次的聚會，並作相關的分享

以下是本次聚會的議程：

1900 ~ 1915 Python在有限元素軟體Abaqus的應用

1930 ~ 2020 Machine Learning: Theory, Implementation and Practice

2020 ~ 2030 Q&A

2035 ~ 2050 宇匯知識科技 Lighting Talk

2050 ~ 2200 自由交流

報名網址與細節資訊：http://www.meetup.com/Taiwan-R/events/125698772/最後，插播一下社群訊息與公告：

- MLDM Monday在9月的主題是平型運算與MLDM，歡迎有相關心得的朋友投稿議程喔！

- 從今天開始，我們會於每次會後提供問卷調查，請參與的朋友撥空告訴我們你參與MLDM
Monday的感想，幫助我們將聚會辦的更好！

- 另外，我們也想調查一下大家想聽的主題，所以，請大家有空時，幫忙填寫一下以下的問
卷：http://www.meetup.com/Taiwan-R/polls/857742/如果問卷中沒有出現您想聽的選項，或是對於調查問卷有一些建議，也請 e-mail 給我們一
下唷

我們也將針對的大家的建議，對於問卷作一些調整

希望，之後排出來的議程，能更滿足到大家的需求，

也能讓更多想學 MLDM 相關領域的人，學到自己想學的東西^^

TW.R 團隊 敬上

--","R_Language"
"2748","M.1372755933.A.DA1","KnightX","分享","Introduction to R from Google Developer",2013-07-02 17:05:30,NA,NA,"[關鍵字]: R, 基本操作, 教學, YouTube

[出處]: Google Developershttp://www.youtube.com/user/GoogleDevelopers[重點摘要]:

平常就會逛 Google Developers 瀏覽一些資訊，

沒想到會看到 R 的基本操作教學影片在上面！

其實內容還滿簡單易懂的，這裡稍微整理一下，

給初學 R 的使用者做參考（若不嫌棄是英文的話... XD）：


R 1.1 - Initial Setup and Navigationhttp://youtu.be/iffR3fWv4xwR 1.2 - Calculations and Variableshttp://youtu.be/S-o-sdlzhkER 1.3 - Create and Work With Vectorshttp://youtu.be/YhQOV27pQfgR 1.4 - Character and Boolean Vectorshttp://youtu.be/GKu5tw_bIpAR 1.5 - Vector Arithmetichttp://youtu.be/u5hroyx0J4oR 1.6 - Building and Subsetting Matriceshttp://youtu.be/cR-hEUs1rRwR 1.7 - Section 1 Review and Help Fileshttp://youtu.be/mtu5_IYhgpgR 2.1 - Loading Data and Working With Data Frameshttp://youtu.be/qK1ElUMkhq0R 2.2 - Loading Data, Object Summaries, and Dateshttp://youtu.be/cx_3zWo4sUsR 2.3 - if() Statements, Logical Operators, and the which() Functionhttp://youtu.be/eVEx_pBEkRIR 2.4 - for() Loops and Handling Missing Observationshttp://youtu.be/djI-yfk-DZMR 2.5 - Listshttp://youtu.be/UffunYeERV0R 3.1 - Managing the Workspace and Variable Castinghttp://youtu.be/8oc3mIa0TCwR 3.2 - The apply() Family of Functionshttp://youtu.be/WuCVs3bW-ZYR 3.3 - Access or Create Columns in Data Frames, or Simplify a Data Frame
        using aggregate()http://youtu.be/pZ6Bnxg9E8wR 4.1 - Basic Structure of a Functionhttp://youtu.be/Z1wB1rHAYzQR 4.2 - Returning a List and Providing Default Argumentshttp://youtu.be/DzIy6U-N6acR 4.3 - Add a Warning or Stop the Function Executionhttp://youtu.be/29TdKkUmcA4R 4.4 - Passing Additional Arguments Using an Ellipsishttp://youtu.be/O3Bf2hM_gNcR 4.5 - Make a Returned Result Invisible and Build Recursive Functionshttp://youtu.be/CHmmHfJ8hCAR 4.6 - Custom Functions With apply()http://youtu.be/H06_Ic_kDvI--","R_Language"
"2749","M.1372525571.A.4ED","Wush978","心得","doRedis, 可以動態管理worker的平行運算",2013-06-30 01:06:08,NA,NA,"[關鍵字]: parallel computing, redis, foreach

這是一個利用job queue實作平行化運算的套件，

並且利用redis*來進行process之間的溝通。

原理如下：

- worker可以自行去redis server註冊
- master將工作打包成數個task放到redis給worker領去計算
- master在運算結束後可以設定merger

和其他parallel computing的環境比較，doRedis有以下的特性：

- worker和master不一定需要process間的相依關係。以Rmpi來說，
  一個點 crash ==> 所有worker 一定要關掉再開，但是doRedis不用。
  master掛了，worker不用關，只要再註冊後就可以繼續運作。

  我目前的環境，每次讀取資料就占了80%時間，所以這個特性對我很方便。

- worker可以在運算過程中，動態的加進去。Rmpi需要在分配工作前就要知道總worker
  數，doRedis不用。所以你可以先用少量worker試試看，如果發現工作太多，可以直接
  在開機器後註冊到redis server來增加worker。

redis*: 是一種memory database

實際運作請參考:

<http://cran.r-project.org/web/packages/doRedis/vignettes/doRedis.pdf>--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2750","M.1372524883.A.004","Wush978","問題data.table","Re: cbind",2013-06-30 00:54:39,NA,NA,"※ 引述《celestialgod (攸藍)》之銘言：: 如果格式data.frame只要7368 bytes: 但是格式data.table 要10512 bytes這個增加的格式看起來是只有和column數相關。

```r
for(n in 1:10) {
        b <- do.call(""rbind"", rep(list(iris), n))
        a1 <- b
        a2 <- data.table(b)
        print(object.size(a2) - object.size(a1))
}
```

差距都在0.6kb左右

可以看到記憶體的差距和row的個數無關。

但是請記得data.table提供了index 的功能，

所以在大資料的時候做subset等查詢的效能差異是非常大的。

至於這個記憶體的差距其實非常小，單位應該只是在kb,

以現在Gb級的記憶體量來說實在是微不足道。

當然，建立index 本身也是要記憶體的。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2751","M.1372519670.A.42E","celestialgod","問題data.table","Re: cbind",2013-06-29 23:27:48,NA,NA,"前文恕刪: 1. 要有column name: 2. 本身要先有結構, 不能從 Null table 開始bind: 3. 真的一次只能bind 1個column? 不然要用merge?: 4. 同樣的範例改成rbind, 好像又是整個不同的概念?: 現在我看data.table的方式就是把他當sql操作,: 如果在sql上很難寫的, data.table就難以想像了temp1 = 1:10
 temp2 = matrix(1:25, 5)
 out1 = data.table(x = rep(NA,length(temp1)))
 out2 = data.table(x = rep(NA,dim(temp2)[1]))
 colname1 = paste0(""x"", 1:10)
 colname2 = paste0(""y"", 1:250)
 for(i in 1:10){
        out1 = out1[, colname1[i]:= temp1]
        colnames(temp2) = colname2[(5*(i-1)+1):(5*i)]
        out2 = data.table(out2, temp2)
        #out2 = data.table(out2, temp2)       another approach but I don't like
        #names(out2)[ (5*(i-1)+1):(5*i) + 1] = colname2[(5*(i-1)+1):(5*i)]
 }
out1 = out1[, x := NULL]
out2 = out2[, x := NULL]

不知道是否要這樣做？

另外補充一件事XD
他的記憶體吃的比data.frame大
不知道在大資料下 會不會記憶體容易不夠
因為同樣是out2
如果格式data.frame只要7368 bytes
但是格式data.table 要10512 bytes

--","R_Language"
"2752","M.1372405649.A.885","memphis","問題data.table","cbind",2013-06-28 15:47:27,NA,NA,"原始的cbind

out1 <- c()
temp1 <- c(1:10)
out2 <- c()
temp2 <- matrix(1:25, nrow=5)

for(i in 1:10){
    out1 <- cbind(out1, temp1)
    out2 <- cbind(out2, temp2)
}

###
今天改用data.table來實作, 結果寫不到兩句就卡關

DT[,newcol := V1]

以下是我的問題
1. 要有column name
2. 本身要先有結構, 不能從 Null table 開始bind
3. 真的一次只能bind 1個column? 不然要用merge?
4. 同樣的範例改成rbind, 好像又是整個不同的概念?

現在我看data.table的方式就是把他當sql操作,
如果在sql上很難寫的, data.table就難以想像了



--","R_Language"
"2753","M.1372220493.A.1CA","celestialgod","問題","R更進階的programing",2013-06-26 12:21:30,NA,NA,"[問題類型]:經驗諮詢

[軟體熟悉度]:使用者(已經有用R 做過不少作品)

[問題敘述]:
想要請問我可以從哪媥ヮ嚆鰫鏐nvironment, object, class的觀念

我第一個學的程式語言就是R

現在還在啃C++....

我想要除了會用R作統計分析之外

還可以了解R基本的元件是怎麼組合的

[程式範例]:

[關鍵字]: environment, object, class

--","R_Language"
"2754","M.1372219968.A.9A2","celestialgod","筆記","Re: R 的設定-平行運算 (CPU)",2013-06-26 12:12:45,NA,NA,"分享另一個平行運算的package: snowfall

以下是一個例子 for cross validation

### Example: Cross validation for choosing
### the tuning parameter of ridge regression

## Data
data(longley)
X <- as.matrix(longley[,1:5])
Y <- as.matrix(longley[,7])

## Normalization
norm <- function(a) (a-mean(a))/sd(a)
Y.N <- apply(Y, 2, norm)
X.N <- apply(X, 2, norm)
D <- cbind(Y.N, X.N)
n <- nrow(X.N)
p <- ncol(X.N)

## Ridge regression, given lambda
beta.R <- function(Y, X, nc, lambda) solve(t(X)%*%X +
lambda*diag(nc),t(X)%*%Y)

## cross validation, single CPU version
m <- 1001
lambda <- seq(0, 1, length=m)
CV <- sapply(1:m, function(j){
        out <- sapply(1:n, function(i)
        beta.hat <- beta.R(Y.N[-i,], X.N[-i,], p, lambda[j]))
        out <- mean((Y.N - diag(X.N%*%out))^2)
})

plot(lambda, CV, type='l', xlab=expression(lambda), ylab='CV')
lambda.opt <- lambda[which(CV == min(CV))]
beta.opt <- beta.R(Y.N, X.N, p, lambda.opt)

## cross validation, parallel version
##   in this case, the sample size is small but the number of lambda is large
##   so we replace the outer loop by parallel computing

## prepare for parallel computing
library(snowfall)  # parallel computing
sfInit(parallel = TRUE, cpus = 8, type=""SOCK"") # built four nodes

## Tell all nodes that following objects are going to be used
sfExport('Y.N', 'X.N','m','n','p','beta.R', 'lambda')
inner.loop <- function(j){
        A <- apply(matrix(1:m,m,1), 1, function(i)
        beta.hat <- beta.R(Y.N[-i], X.N[-i,], p, lambda[j]))
        out <- mean((Y.N - diag(X.N%*%A))^2)
        return(out)
}
CV <- sfSapply(seq(along=Y.N), inner.loop)

## evaluate the performance
wallTime <- function(expr) system.time(expr)[3]
wallTime(sapply(1:m, function(j){
        out <- sapply(1:n, function(i)
        beta.hat <- beta.R(Y.N[-i,], X.N[-i,], p, lambda[j]))
        out <- mean((Y.N - diag(X.N%*%out))^2)
}))

wallTime(sfSapply(seq(along=Y.N), inner.loop))
sfStop()


--","R_Language"
"2755","M.1372129705.A.0ED","microcat","問題","取出 Vector 來運算",2013-06-25 11:08:22,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的目前有筆資料，經過運算後會得到下列的結果：> va[[1]]
  [1]    Inf 7423.3 7198.0 7048.0 6936.8 6557.0 6550.0 6492.8 6420.3 6181.5
 [11] 6150.8 5958.8 5897.5 5847.3 5731.3 5633.8 5349.8 4885.3 4802.3 4798.3
 [21] 4793.8 4625.0 4598.5 4571.0 4491.8 4370.8 4327.8 4313.0 4224.8 4190.0
 [31] 4129.5 4109.8 4080.0 4070.3 3942.3 3933.0 3865.0 3864.0 3818.0 3786.8
 [41] 3665.0 3626.0 3587.5 3548.0> length(va)1



無法取出 va 的值來進行下一階段的運算，
想請問是否有辦法呢？謝謝各位。

預期希望> va[1]    Inf 7423.3 7198.0 7048.0 6936.8 6557.0 6550.0 6492.8 6420.3 6181.5
 [11] 6150.8 5958.8 5897.5 5847.3 5731.3 5633.8 5349.8 4885.3 4802.3 4798.3
 [21] 4793.8 4625.0 4598.5 4571.0 4491.8 4370.8 4327.8 4313.0 4224.8 4190.0
 [31] 4129.5 4109.8 4080.0 4070.3 3942.3 3933.0 3865.0 3864.0 3818.0 3786.8
 [41] 3665.0 3626.0 3587.5 3548.0> length(va)44


--","R_Language"
"2756","M.1371967796.A.232","celestialgod","問題","Re: 記憶體不足",2013-06-23 14:09:53,NA,NA,": N = 500這些變數應該是你要儲存的資訊
長度應是你大迴圈的長度吧？
L0 = NULL; length(L0) = N
L1 = NULL; length(L1) = N
L2 = NULL; length(L2) = N
Alpha1 = NULL; length(alpha1) = N
Alpha2 = NULL; length(alpha2) = N: Z1 = matrix(,ncol=2,nrow=length(t1)): Z2 = matrix(,ncol=2,nrow=length(t2)): for(i in 1:length(t1)){:         Z1[i,] = rmultinom(1,1,c(g1(t1[i]),(1-g1(t1[i])))): }: for(i in 1:length(t2)){:         Z2[i,] = rmultinom(1,1,c(g2(t2[i]),(1-g2(t2[i])))): }: }這裡可以先做簡單的修改

Z1 = sapply(1:length(t1), function(k) rmultinom(1,1,c(g1(t1[k]),(1-g1(t1[k])))))
Z2 = sapply(1:length(t2), function(k) rmultinom(1,1,c(g2(t2[k]),(1-g2(t2[k]))))

--","R_Language"
"2757","M.1371948334.A.E20","EXILESPACER","情報","2013-6-24 MLDL Monday 會前通知",2013-06-23 08:45:31,NA,NA,"以下轉貼R相關訊息


###############################################################################

Dear All：

下周一 (2013/06/24) 在創立方，會有我們第34次的 MLDM Monday 的聚會！
本次是介紹如何讓R呼叫Java程式或Java呼叫R程式。
講題為「rJava」

由 Phillipz 來為我們分享

本次的演講大綱大致如下：
1.介紹rJava跟JRI
2.rJava 語法簡介
3.rJava DEMO
4.JRI 語法簡介
5.JRI DEMO
6.相關資料

投影片：http://www.slideshare.net/philipzh/r-java或https://docs.google.com/presentation/d/1oPDhAaf9cgMr0y5iGj4oIViVrY1bELSy2JePFJFu5HA/pub?start=false&loop=false&delayms=3000歡迎有興趣的朋友們一起來參加唷！

這次聚會的報名網址在:http://www.meetup.com/Taiwan-R/events/121977422/Taiwan R User Group 全體 Officer 邀請您

---
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Phillipz 先生是一位業餘的程式交易玩家

擁有自己打造的回測與交易系統，並且，他也不吝於跟大家分享他的系統與訊號

另外，他同時也是 TradingBot 的作者http://www.facebook.com/tradingbot是一位具有高度實務經驗的程式交易玩家

歡迎大家可以到現場跟他交流一下實務上遇到的問題與經驗唷！

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

--","R_Language"
"2758","M.1371918419.A.58C","iamchile","問題","Re: 記憶體不足",2013-06-23 00:26:57,NA,NA,"※ 引述《lianhua (蓮華)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 使用者: [問題敘述]:: 因為我需要跑大量的貝氏模擬，大迴圈次數500次: 大迴圈裡面的小迴圈20000次: 每一次小迴圈都需要生成一個5XM (M大概100左右) 的矩陣: 但是我的電腦大迴圈大概都跑個200次左右就會跳出: 錯誤: 無法配置大小為 526.2 Mb 的向量: 這種訊息 請問是我的電腦記憶體不足，還是語法太拙劣？: [程式範例]:: 程式很長，所以僅貼部分: N = 500: L0 = numeric(): L1 = numeric(): L2 = numeric(): Alpha1 = numeric(): Alpha2 = numeric()關於numeric()這部分我可以給點小建議，
如果可以的話，還是盡量給定向量長度。http://statlab.nchc.org.tw/rnotes/?page_id=233這篇文章看到「盡量避免讓 R 自動增加向量長度」這段，
可以很明顯看到有給定向量長度及沒給定向量長度的差別。: for(k in 1:N){: set.seed(k):         ．:         ．:         ．: 這裡是我懷疑出錯的部分，因為如果我不是生成隨機矩陣的話: 就不會有這個問題: iter = 20000: repeat{: ### step 1 fill up Z ###: g1 = function(x){:         ((l1+l0)*c1*(x^(c1-1)))/((l1+l0)*c1*(x^(c1-1))+l2*c2*(x^(c2-1))):         }: g2 = function(x){:         (l1*c1*(x^(c1-1)))/(l1*c1*(x^(c1-1))+(l2+l0)*c2*(x^(c2-1))):         }: Z1 = matrix(,ncol=2,nrow=length(t1)): Z2 = matrix(,ncol=2,nrow=length(t2)): for(i in 1:length(t1)){:         Z1[i,] = rmultinom(1,1,c(g1(t1[i]),(1-g1(t1[i])))): }: for(i in 1:length(t2)){:         Z2[i,] = rmultinom(1,1,c(g2(t2[i]),(1-g2(t2[i])))): }: }: 想請各位先進為我解答，感謝∼--","R_Language"
"2759","M.1371908710.A.C15","Wush978","分享","R & Encoding",2013-06-22 21:45:07,NA,NA,"[關鍵字]: R, utf-8, big5, 中文, encoding

# 一個朋友最近問我的問題> 這幾天都在用R做text mining> 我能請問一下簡單的問題就是> 用Ｒ匯入含有unicode中文的csv 或excel檔> 怎麼樣匯入才能正確呢？> 我試了 odbc, iconv, 或者是在read.csv內用encoding＝‘UTF-8’> 都無法解決# 我個人對這類問題的建議

根據http://cran.r-project.org/doc/manuals/r-release/R-data.html#Encodings，

我建議你先安裝Rtools後在讀取資料之前先使用file以及其他轉碼的命令列程式處理後，
再從R中嘗試匯入。由於我機器不是Windows，我不清楚Rtools內有沒有iconv這個命令列
程式就是了。這你可能要先自行google，或是採用下面範例的方式：

```r
temp <- readLines(url(MOPS_URL.TWSE_ALL), encoding=""big5"")
temp <- iconv(temp, ""big5"", ""utf8"")
temp.file <- tempfile()
write(temp, temp.file)
```

# 他後來找到的解決辦法

excel另存csv後 在csv用文字編輯另存成Utf-8
然後匯入read.csv內 encoding=""utf-8"" 就能正確讀入了

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2760","M.1371908367.A.3B3","Wush978","問題","Re: 記憶體不足",2013-06-22 21:39:24,NA,NA,"※ 引述《lianhua (蓮華)》之銘言：: [問題類型]:: 程式諮詢: [軟體熟悉度]:: 使用者: [問題敘述]:: 因為我需要跑大量的貝氏模擬，大迴圈次數500次: 大迴圈裡面的小迴圈20000次: 每一次小迴圈都需要生成一個5XM (M大概100左右) 的矩陣: 但是我的電腦大迴圈大概都跑個200次左右就會跳出: 錯誤: 無法配置大小為 526.2 Mb 的向量: 這種訊息 請問是我的電腦記憶體不足，還是語法太拙劣？理論上演算法需要的記憶體，都是可以事先評估出來的。

我先假設你迴圈中生成的矩陣都要保留在記憶體。

一個numeric value需要 8 bytes 的記憶體空間，

這樣的話，一個小迴圈需要 500 * 8 bytes 的空間，大約 4 kb。

一個大迴圈要20000 次小迴圈，所以就是 80000 kb ，大約是 80 mb。

500次大迴圈需要 40000 mb, 大約是 40 Gb 的記憶體。

你的電腦有這麼多記憶體嘛？

或是你需要保留每次生成的矩陣嘛？有沒有確實清理掉？

另外R 在記憶體的使用上還有另外一個問題：

(請看下面的說明): [程式範例]:: 程式很長，所以僅貼部分: N = 500: L0 = numeric(): L1 = numeric(): L2 = numeric(): Alpha1 = numeric(): Alpha2 = numeric(): for(k in 1:N){: set.seed(k):         ．:         ．:         ．: 這裡是我懷疑出錯的部分，因為如果我不是生成隨機矩陣的話: 就不會有這個問題: iter = 20000: repeat{: ### step 1 fill up Z ###: g1 = function(x){:         ((l1+l0)*c1*(x^(c1-1)))/((l1+l0)*c1*(x^(c1-1))+l2*c2*(x^(c2-1))):         }: g2 = function(x){:         (l1*c1*(x^(c1-1)))/(l1*c1*(x^(c1-1))+(l2+l0)*c2*(x^(c2-1))):         }: Z1 = matrix(,ncol=2,nrow=length(t1)): Z2 = matrix(,ncol=2,nrow=length(t2)): for(i in 1:length(t1)){:         Z1[i,] = rmultinom(1,1,c(g1(t1[i]),(1-g1(t1[i])))): }: for(i in 1:length(t2)){:         Z2[i,] = rmultinom(1,1,c(g2(t2[i]),(1-g2(t2[i])))): }: }使用 Z1[i,] = xxx

這種語法時，R 會複製記憶體，也就是你可能需要Z1兩倍的記憶體，

所以如果Z1很大的話，也是會出問題。: 想請各位先進為我解答，感謝∼你可以把你的需求寫的更清楚，這樣我還可以針對你的問題提供建議喔。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2761","M.1371859236.A.6EE","lianhua","問題","記憶體不足",2013-06-22 08:00:34,NA,NA,"[問題類型]:

程式諮詢

[軟體熟悉度]:

使用者

[問題敘述]:

因為我需要跑大量的貝氏模擬，大迴圈次數500次

大迴圈裡面的小迴圈20000次

每一次小迴圈都需要生成一個5XM (M大概100左右) 的矩陣

但是我的電腦大迴圈大概都跑個200次左右就會跳出


錯誤: 無法配置大小為 526.2 Mb 的向量


這種訊息 請問是我的電腦記憶體不足，還是語法太拙劣？


[程式範例]:


程式很長，所以僅貼部分


N = 500
L0 = numeric()
L1 = numeric()
L2 = numeric()
Alpha1 = numeric()
Alpha2 = numeric()
for(k in 1:N){
set.seed(k)

        ．
        ．
        ．

這裡是我懷疑出錯的部分，因為如果我不是生成隨機矩陣的話

就不會有這個問題

iter = 20000

repeat{

### step 1 fill up Z ###

g1 = function(x){
        ((l1+l0)*c1*(x^(c1-1)))/((l1+l0)*c1*(x^(c1-1))+l2*c2*(x^(c2-1)))
        }
g2 = function(x){
        (l1*c1*(x^(c1-1)))/(l1*c1*(x^(c1-1))+(l2+l0)*c2*(x^(c2-1)))
        }

Z1 = matrix(,ncol=2,nrow=length(t1))
Z2 = matrix(,ncol=2,nrow=length(t2))
for(i in 1:length(t1)){
        Z1[i,] = rmultinom(1,1,c(g1(t1[i]),(1-g1(t1[i]))))
}
for(i in 1:length(t2)){
        Z2[i,] = rmultinom(1,1,c(g2(t2[i]),(1-g2(t2[i]))))
}

}


想請各位先進為我解答，感謝∼


--","R_Language"
"2762","M.1371821849.A.B33","Wush978","心得","Reduce",2013-06-21 21:37:26,NA,NA,"[關鍵字]: R, recursive, list

[重點摘要]:

當我們手上有一個函數，恰恰好接受兩個參數時，如：

- `union` 會將兩個vector取聯集
- `+` 會將兩個物件做相加

而我們手上卻有一堆資料，需要recursive的做運算。

舉例來說，我手上有一個長度是5 的list，叫作`a`，

而我想要計算

```
a12 <- union(a[[1]], a[[2]])
a13 <- union(a12, a[[3]])
...
a15 <- union(a14, a[[5]])
```

此時可以使用Reduce來簡單獲得答案：

```
Reduce(""union"", a)
```

FYI

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2763","M.1371529601.A.027","celestialgod","問題","Re: 迴圈不會跑...",2013-06-18 12:26:39,NA,NA,": [程式範例]:: garch <- garchFit(~garch(1,1),data=r.ts, trace=F): magarch <- garchFit(~arma(0,1)+garch(1,1),data=r.ts, trace=F): resgarch <-residuals(garch): resmagarch <-residuals(magarch): resgarch2 <-resgarch^2: resmagarch2 <-resmagarch^2把result用list存起來即可，之後要看在一抓出來慢慢看

resgarch.res.l = as.list(NULL)
resmagarch.res.l = as.list(NULL)
resgarch2.res.l = as.list(NULL)
resmagarch2.res.l = as.list(NULL)

for (i in 1:20) {
        resgarch.res.l[[i]] =  Box.test(resgarch, lag = i, type = ""Ljung-Box"")
        resmagarch.res.l[[i]] = Box.test(resmagarch, lag = i, type = ""Ljung-Box"")
        resgarch2.res.l[[i]] = Box.test(resgarch2, lag = i, type = ""Ljung-Box"")
        resmagarch2.res.l[[i]] = Box.test(resmagarch2, lag = i, type = ""Ljung-Box"")
}: [關鍵字]:: Box.test, Ljung-Box, for loop, GARCH--","R_Language"
"2764","M.1371491018.A.330","allen1985","問題","Re: 迴圈不會跑...",2013-06-18 01:43:36,NA,NA,"重點在for迴圈 所以把前面不必要的刪除: for (i in 1:20) {: Box.test(resgarch, lag = i, type = ""Ljung-Box""): Box.test(resmagarch, lag = i, type = ""Ljung-Box""): Box.test(resgarch2, lag = i, type = ""Ljung-Box""): Box.test(resmagarch2, lag = i, type = ""Ljung-Box""): }: [關鍵字]:: Box.test, Ljung-Box, for loop, GARCH你想要抓出Box.test裡面什麼資訊呢

先試著用以下簡單程式碼

x <- rnorm (100)
Box_1<-Box.test (x, lag = 1)

你可以用 names(Box_1) 裡面有哪些資訊

[1] ""statistic"" ""parameter"" ""p.value""   ""method""    ""data.name""

如果你只想要得到p.value

Box_pvalue<-rep(0,20)
for (i in 1:20){
Box_pvalue[i]<-Box.test(x,lag=i,type=""Ljung-Box"")
}
Box_pvalue

這不是R的bug 是所有的資訊都在for迴圈裡面 你沒有把他存出來

所以在for迴圈外面什麼都看不到



--","R_Language"
"2765","M.1371483149.A.FD4","anovachen","問題","迴圈不會跑...",2013-06-17 23:32:26,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
下列程式碼中的for迴圈不會執行...
是哪裡寫錯了？

[程式範例]:
garch <- garchFit(~garch(1,1),data=r.ts, trace=F)
magarch <- garchFit(~arma(0,1)+garch(1,1),data=r.ts, trace=F)
resgarch <-residuals(garch)
resmagarch <-residuals(magarch)
resgarch2 <-resgarch^2
resmagarch2 <-resmagarch^2

for (i in 1:20) {
Box.test(resgarch, lag = i, type = ""Ljung-Box"")
Box.test(resmagarch, lag = i, type = ""Ljung-Box"")
Box.test(resgarch2, lag = i, type = ""Ljung-Box"")
Box.test(resmagarch2, lag = i, type = ""Ljung-Box"")
}

[關鍵字]:
Box.test, Ljung-Box, for loop, GARCH

--","R_Language"
"2766","M.1370855853.A.047","Wush978","情報","Improve The Efficiency in Joining Data",2013-06-10 17:17:30,NA,NA,"[關鍵字]: R, sqldf, data.table

[出處]:http://statcompute.wordpress.com/2013/06/09/improve-the-efficiency-in-joining-data-with-index/[重點摘要]:

如果你平常有用R使用很大的data.frame，那這篇文章就必讀:

如何在R加速大資料的整合。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2767","M.1370853645.A.B55","memphis","問題","gap plot",2013-06-10 16:40:42,NA,NA,"[問題類型]:意見調查(我對R 有個很棒的想法，想問問大家的意見)[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
library(plotrix)
gap.plot

可以做到 1 or 2 個gap，如果今天想要多個gap，怎麼辦

[程式範例]:
library(plotrix)
gap.plot(0,0,type=""n"", gap=c(2,3,7,8), gap.axis=""x"", xlim=c(1,20), ylim=c(1,20))

--","R_Language"
"2768","M.1370786795.A.A39","EXILESPACER","情報","2013-06-10 MLDL Momday 會前通知",2013-06-09 22:06:32,NA,NA,"轉貼活動訊息

###############################################################################

Dear All：

2013/06/10 在創立方，會有我們第32次的 MLDM Monday 的聚會！

本次的聚會比較特別一點 ......

在這次的活動中，我們準備舉辦一場 Data & Models Hackathon 的前行活動！


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

「 您是否曾經覺得，手上有一些很有價值的 Data ... 但不知道該如何問 Data問題？如
何著手開始進行簡單的分析與解讀？ 」

或是 ......

「 您是否曾經覺得，心中有許多想法，但不知道該去哪找到一些資料與分析工具來驗證
心中的想法？或做出心中想像中的服務？」

亦或是 .......

「 您已經是一為身懷絕技的資料分析人員，但最近卻常常苦無資料可分析？也找不太到
下一個可以著力的資料與方向？ 」

又或者是 .......

「 您只是一位資料分析的新手，但對於分析課本上的範例資料已經有些厭倦 ，想要挑戰
一些不一樣的資料？ 」

又或是 .......

「 您常常在資料分析上遭遇到許多的問題，但卻找不到同好一起討論？一起奮鬥？
 ...... 」



~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

如果您有遇到以上的問題，

我們至誠地邀請您參加本次由 TW.R 舉辦的 Data & Models Hackathon

因為我們本次活動的最大目的 ...... 就是 ......

「 讓大家可以找到同好 」

「 讓手上有資料的人，可以找到願意在樣方向上一起努力的分析人員 ...... 」

「 讓有分析與建模能力的人，可以找到他們願意投注心力，一展長才的 Data 與方向
 ...... 」

我們相信，單打獨鬥的時代早已過去，這是一個 Team Work 的時代

因此，我們舉辦了這樣的一個 Data & Models Hackathon 的前行活動

讓大家可以對彼此有更深入的認識與了解

希望藉此活動也可以促成一些合作的團隊與方向，

在未來舉辦 Data & Models Hackathon 時，就能夠直接有時作的方向與團隊了

當然，如果大家在當天討論得很熱烈，

在之後的週末自行邀約舉辦單日的 Data & Models Hackathon ，也是我們非常樂見的！
！！

總之，這只是個起點，希望能帶給大家無限的可能性！！！


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

在資訊發達的現在，生活中隨處可見許多好玩的資料

有公車的，有醫院的，有購物商城的，有新聞報導的.......等等等等.......

有些資料，只需要經過簡單的分析，就可以獲得非常都有用的資訊了

但也有些資料，並沒有一定的標準答案，在建造模型上會產生及大的困難

因此 Data & Models Hackathon 主要大概可以分成兩大塊：

(1) Data Hackathon：

主要針 「對手上有資料，但不知道該如何問資料問題？如何下手分析？」 的 Case

(2) Models Hackathon：

主要針 「對手上已經有資料和模型，但現行所使用的模型，並無法完整的解決使用者對
資料的提問，因此，許要針對模型進行改寫與改造」 的狀況


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

而不管你是上述的哪一種狀況，我們都至誠地邀請您來一同進行 「 提案 」！！！


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

本次聚會的議程大概可以分成兩個部份：

(1) 提案

(2) 分組討論與 Hack

聚會一開始，我們就會請大家來進行提案的動作，每個提案者有 3 分鐘的時間，

簡單的描述一下自己想做的方向與目的，使用的資料，與需要的協助 ...... 等等

而等大家都提案完後，就請在場剩下的人員，大家選擇一個自己有興趣的提案加入

接著就是分組討論的時間了

當然，如果提案人對其他案件有興趣的話，也可以放棄自己的提案，去加入其他組別


~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

提案的方向與 Data 並沒有任何的限制

如果純粹想練功，玩玩資料，或是想找人一起比 Kaggle，也很歡迎
總之，就是來這找同好，交朋友的

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
下面，我舉了例子，來簡單的說明一下 Data Hackathon 的提案格式：
提案時儘量可以包含下面幾個欄位：
「主題」，「Data」，「目的」，「工具」，「方法」，「所需協助」 ...... (其他
)...... ??

舉例來說：

可能會有人手上剛好有 0050 的資料，它想要提案：

[範例一]

主題：「破除技術分析的迷失......」
Data：0050 成份股
目的：檢驗一些大家相信的技術分析 pattern 的可信度與機率
工具： R + quantmod + quantstrat
簡單的一些方向與作法：
(1) 如何定義技術分析的事件？
(2) 如何定義可信度？
(3) 何謂預測效果？
(4) 如何將行情分類作的更細緻？



另外，也可能有人手上剛好友一些網路商城的資料

或許它會想提案進行下面的分析：

[範例二]

主題：「網路商城的分類問題......」
Data：網路商城的類別名稱資料 (商品資料？)
目的：能夠針對不同的網路商城進行分類
工具： R + tm OR Python + NLTK
作法： ...... (暫略)
所需協助： R 中的中文斷詞工具？





總之，期待大家帶著自己手上的 Data 來我們的會場散步囉

說不定，可以在這裡和許多有趣的靈感不期而遇唷！！！

祝大家明天能有個愉快的 Hackathon 夜晚^^



報名網址：http://www.meetup.com/Taiwan-R/events/121977172/--","R_Language"
"2769","M.1370680061.A.D2F","Wush978","分享","RSUS -- Shortest Unique Substring",2013-06-08 16:27:36,NA,NA,"大家好

由於有教授要我今年上ICDE 2013的paper的code，

我就順手把它包成R package。

遺憾的是，他只能在linux下跑。

網址：https://bitbucket.org/wush_iis/rsus堶悸榛oc資料夾內有paper，主要是提供一個很快的演算法來找unique substring，

也許有做基因分析的版友可以用用看。

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2770","M.1370229803.A.3B2","EXILESPACER","情報","2013-06-03 MLDL Monday 會前通知",2013-06-03 11:23:21,NA,NA,"轉貼相關活動訊息

###############################################################################

Dear All：

2013/06/03 在創立方，會有我們第31次的 MLDM Monday 的聚會！

本次的聚會很榮幸邀請到目前正在 CMU 攻讀博士班的李浩志同學

來為我們分享最佳化相關的主題

(這裡的 CMU 指的是 Carnegie Mellon University 唷....不是中國醫藥大學http://www.cmu.edu.tw/唷...囧...)



本次的題目為 「Solving tensor completion via subgradient method」

Outline：

1. How to input a matrix with missing data?
2. What is a tensor? Why tensor?
3. a brief overview of the subgradient method
4. Solving tensor sompletion via subgradient method
5. Application: inputing missing pixels in a face image


以下為我們的報名網址：http://www.meetup.com/Taiwan-R/events/111817412/順帶一題，在我們 6/10 的 MLDM Monday 聚會中

我們會試辦一場 Data Hackathon 的活動，

而第一場 Data Hackathon 的活動，主要的目的是要讓大家找到自己想玩的 data 與主題

以便之後能進行分組 Hackathon 的活動

因此，在 6/10 的活動中，我們將安排 Pitching Ideas 的活動

請各位手上有好玩的 data 的朋友們，那天可以帶著您手上的 data 和想做的 idea

來和大家一起玩 Data 囉

另外，手上沒 data 的朋友也沒關係，到時可以選一組自己想玩的主題參加唷






Taiwan R User Group敬邀

--","R_Language"
"2771","M.1370199616.A.E4F","cog5566","問題","Re: 不會傳遞 expression 到sub-function",2013-06-03 03:00:15,NA,NA,"剛剛又試了另一種寫法也成功了
######################################################################
library('doBy')

sdSubsetFun = function(group, dVar, data) {
  subf = substitute( (dVar > (mean(dVar) - 1*sd(dVar))) &
                     (dVar < (mean(dVar) + 1*sd(dVar))))
  do.call('subsetBy', list(group, subf, data))
 }

# Create Data
x = rep(c('a','b','c'), 50)
y = 1:150
tData = data.frame(aa = x, bb = y)

subData = sdSubsetFun(~aa, bb, tData)
######################################################################

雖然結果一樣，但是這應該跟我上一篇的 variable mapping 有所不同。
上一篇是直接把所有變數的 expression 都 map 到堶悸漳ubsetBy
但是這一篇只有 dVar 會是 map 到外面的 expression
group 和 data 就沒有被 map 成外面的 ~aa 和 tData

連我自己都覺得講的好繞口...※ 引述《cog5566 (刃之56)》之銘言：: 感謝版主的回應。: 我也是在看 github: 在經過 4個小時看完這篇內容之後，: https://github.com/hadley/devtools/wiki/Computing-on-the-language: 我終於成功弄（湊）出來了。好感動: ######################################################################: library('doBy'): sdSubsetFun = function(group, dVar, data) {:   dataOut = substitute(:             subsetBy(group,:                     (dVar > (mean(dVar) - 1*sd(dVar))) &:                     (dVar < (mean(dVar) + 1*sd(dVar))),:                     data = data):             ):   eval(dataOut):  }: # Create Data: x = rep(c('a','b','c'), 50): y = 1:150: tData = data.frame(aa = x, bb = y): subData = sdSubsetFun(~aa, bb, tData): ######################################################################: 重點是要用 substitute 包住全部的 code: 而 substitute 很奧妙，它會替換堶悸 variable name 去對應: 可能的值，然後輸出 language object: 有趣的是如果吧 substitute() 改成 quote(): 就不會替換成值。我也是現在才終於知道這兩個關鍵性的差別。: ※ 引述《Wush978 (拒看低質媒體)》之銘言：: : 以下是我最初推文時測的code: : ```r: : library('doBy'): : sdSubsetFun = function(group, dVar, data) {: :   sdVar = substitute(dVar): :   # 2SD threshold: :   subsetThreshold <- substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &: :                                   (sdVar < (mean(sdVar) + 2*sd(sdVar))) ): :   data$temp <- eval(subsetThreshold): :   dataOut = subsetBy(group,: :                      subset = temp,: :                      data = data): : }: : # Create Data: : aa = rep(c('a','b','c'), 50): : bb = 1:150: : tData = data.frame(aa,bb): : subData = sdSubsetFun(~aa, bb, tData): : ```: : 不過應該和Chris7462的修改類似。: 是類似，但還是不一樣。Chris7462 一直試圖在 function 外弄出多餘的變數，: 來讓他的程式假性的沒有出錯。: 在後來的回文我改了一個地方讓變數不會造成混肴: x = rep(c('a','b','c'), 50): y = 1:150: tData = data.frame(aa = x, bb=y): subData = sdSubsetFun(~aa, bb, tData): 版主的程式會 work 是因為它在這一行:    data$temp <- eval(subsetThreshold): eval 會去 evaluate bb這個變數。: 但是其實 fuction 內沒有 bb 這個變數的，所以 R 會去外面抓 bb: （這點我也是很不習慣這種 scoping 的方式）: 剛好外面有 bb 所以看起來沒有出問題。: 但是其實這個寫法出來的答案會是錯的，因為這時候 sd 是由 1:150來算的，: 因為是抓 bb = 1:150: 而不是依組別算的。: 現在把function 外變數改成這樣x,y的話，就會出錯。因為fuction 外面其實沒有 bb: bb 是在 tData 堶悸瘍僂ヾA如果沒有 attach() 到 search path，: 是根本抓不到的。: ======================================================================: 總結來說，就是有沒有辦法設計一個 function 他是可以照組別刪去: data frame 特定 variable 的 2sd 之外的資料呢？: 我希望在我有一個 data frame   tData 的情況下，: sdSubsetFun 這個 function: sdSubsetFun = function(group, dVar, data): 的 dVar 的引數輸入的時候，我可以直接放 data frame 的 variable name: 而不用利用 attach() 或是做出而外的變數來達成我的目標。: 因為 subset, subsetBy 等等的也是這樣就可以做到: 一個解答就是以上的 code: 我不知道有沒有更好的解法，如果有也請多指教。: 我覺得 R 在這一部份可能跟 fucntional programming 有關的實在很複雜。: : ---: : 關於物件的是屬於symbol或character，也就是後來cog5566提到關於`rm`函數行為的問題，: : 這也是我過去學R ，到目前覺得很不可思議和不方便的地方。: : cog5566可以用以下的方式來探索函數的行為：: : ```r: : debug(rm): : x <- ""y"": : y <- 10: : rm(x): : ```: : 這之後會進入除錯模式，你可以巨細靡遺的觀察`rm`函數的行為。: : 你會發現有種叫作""name""型態的物件。: : 也可以去追相關函數的說明文件，也許你就可以搞清楚了。: : ps. 我最近事情有點多，就沒追下去搞懂他了。: : 我也不太確定Hadley的R advanced堶惘釣S有提到這件事情。: : ps. 現在github好像掛了，晚點我再補連結。: : 期待你搞清楚後也可以播空發篇文章教教我，先謝謝了。--","R_Language"
"2772","M.1370188957.A.1C3","cog5566","問題","Re: 不會傳遞 expression 到sub-function",2013-06-03 00:02:34,NA,NA,"感謝版主的回應。
我也是在看 github
在經過 4個小時看完這篇內容之後，https://github.com/hadley/devtools/wiki/Computing-on-the-language我終於成功弄（湊）出來了。好感動

######################################################################
library('doBy')

sdSubsetFun = function(group, dVar, data) {
  dataOut = substitute(
            subsetBy(group,
                    (dVar > (mean(dVar) - 1*sd(dVar))) &
                    (dVar < (mean(dVar) + 1*sd(dVar))),
                    data = data)
            )
  eval(dataOut)
 }

# Create Data
x = rep(c('a','b','c'), 50)
y = 1:150
tData = data.frame(aa = x, bb = y)

subData = sdSubsetFun(~aa, bb, tData)
######################################################################

重點是要用 substitute 包住全部的 code
而 substitute 很奧妙，它會替換堶悸 variable name 去對應
可能的值，然後輸出 language object
有趣的是如果吧 substitute() 改成 quote()
就不會替換成值。我也是現在才終於知道這兩個關鍵性的差別。※ 引述《Wush978 (拒看低質媒體)》之銘言：: 以下是我最初推文時測的code: ```r: library('doBy'): sdSubsetFun = function(group, dVar, data) {:   sdVar = substitute(dVar):   # 2SD threshold:   subsetThreshold <- substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &:                                   (sdVar < (mean(sdVar) + 2*sd(sdVar))) ):   data$temp <- eval(subsetThreshold):   dataOut = subsetBy(group,:                      subset = temp,:                      data = data): }: # Create Data: aa = rep(c('a','b','c'), 50): bb = 1:150: tData = data.frame(aa,bb): subData = sdSubsetFun(~aa, bb, tData): ```: 不過應該和Chris7462的修改類似。是類似，但還是不一樣。Chris7462 一直試圖在 function 外弄出多餘的變數，
來讓他的程式假性的沒有出錯。


在後來的回文我改了一個地方讓變數不會造成混肴

x = rep(c('a','b','c'), 50)
y = 1:150
tData = data.frame(aa = x, bb=y)
subData = sdSubsetFun(~aa, bb, tData)

版主的程式會 work 是因為它在這一行

   data$temp <- eval(subsetThreshold)

eval 會去 evaluate bb這個變數。
但是其實 fuction 內沒有 bb 這個變數的，所以 R 會去外面抓 bb
（這點我也是很不習慣這種 scoping 的方式）
剛好外面有 bb 所以看起來沒有出問題。
但是其實這個寫法出來的答案會是錯的，因為這時候 sd 是由 1:150來算的，
因為是抓 bb = 1:150
而不是依組別算的。

現在把function 外變數改成這樣x,y的話，就會出錯。因為fuction 外面其實沒有 bb
bb 是在 tData 堶悸瘍僂ヾA如果沒有 attach() 到 search path，
是根本抓不到的。
======================================================================

總結來說，就是有沒有辦法設計一個 function 他是可以照組別刪去
data frame 特定 variable 的 2sd 之外的資料呢？
我希望在我有一個 data frame   tData 的情況下，

sdSubsetFun 這個 function
sdSubsetFun = function(group, dVar, data)

的 dVar 的引數輸入的時候，我可以直接放 data frame 的 variable name
而不用利用 attach() 或是做出而外的變數來達成我的目標。

因為 subset, subsetBy 等等的也是這樣就可以做到
一個解答就是以上的 code
我不知道有沒有更好的解法，如果有也請多指教。
我覺得 R 在這一部份可能跟 fucntional programming 有關的實在很複雜。: ---: 關於物件的是屬於symbol或character，也就是後來cog5566提到關於`rm`函數行為的問題，: 這也是我過去學R ，到目前覺得很不可思議和不方便的地方。: cog5566可以用以下的方式來探索函數的行為：: ```r: debug(rm): x <- ""y"": y <- 10: rm(x): ```: 這之後會進入除錯模式，你可以巨細靡遺的觀察`rm`函數的行為。: 你會發現有種叫作""name""型態的物件。: 也可以去追相關函數的說明文件，也許你就可以搞清楚了。: ps. 我最近事情有點多，就沒追下去搞懂他了。: 我也不太確定Hadley的R advanced堶惘釣S有提到這件事情。: ps. 現在github好像掛了，晚點我再補連結。: 期待你搞清楚後也可以播空發篇文章教教我，先謝謝了。: ※ 引述《cog5566 (刃之56)》之銘言：: : ...嗯...: : 你覺得... subsetBy 的範例有用 attach() 嗎？: : 就是因為他沒有用，所以才酷的...: : 當然啊...因為你加了 attach() ...: : 你把 dietox 拿到 search path 當然這個時候 Weight < mean(Weight): : 就可以被 evaluate。: : 這不是等於說，你問我有沒有看到一隻貓，我說沒有。: : 然後你放了一隻貓在我前面，再問一次有沒有看到一隻貓...: : 然後說我之前錯了，這裡其實是有一隻貓的...: : 這很有趣...: : 不過講正經的，這真的不是 attach() 的問題。: : 從頭到尾都沒有必要 attach dietox 到 Search Path: : 我很懷疑你自己有沒有真的執行過沒有 attach() 的範例: : 是真的可以執行的。跟 attach() 沒有關係。: : 那: : x <- 10: : 請問 sum(x,x) 跟 sum(10,10) 會不會一樣呢？: : 所以你有試過 rm(y) 嗎？: : 你覺得答案是？: : 答案是 y 會被刪掉而不是 x: : 但是<U+7232>什<U+9EBD>這個時候 y 不會被替換成 'x'變成 rm('x') 而刪掉 x？: : 答案是這個完全決定於 rm 的內部寫法。也就是說使用者沒辦法在外部決定輸入值是: : variable name 或是 value。: : 我不知道這有沒有嚇到你啦，但是我第一次看到這個是有被嚇到啦。: : 可能我還太嫩了。: : 這邊我想我們各有一半的責任。: : 我的責任是說錯了一點 data frame 應該沒有包含一個 environment，就只是變數: : 和值的對應關係。: : 你的責任是你小小作弊式的用了 attach() 然後再做: : typeof(Weight < mean(Weight)): : 不然實際情況這個應該會出錯，然後會很驚訝的覺得<U+7232>什<U+9EBD>: : subsetBy(~Evit, Weight < mean(Weight), data=dietox) 卻不會有問題: : 但是這是我的最終問題呀。可能是我表達不好，不過你看不懂是如何回答的？: : 沒錯這是個問題，而且是大問題。但是你有看到我貼的 error message 嗎: : 在這個問題發生之前上面就出問題了。: : 這真的不是這個問題: : 這個有趣...: : 你這樣可以跑是因為你用了跟剛剛加了 attach() 的作弊方式: : aa <- x: : bb <- y: : 這跟 attach(tData) 是類似的意思: : 但是這跟原本的 subsetBy那種寫法意思就差多了。: : 我要的是 bb 不是單純的 value 代進去sdSubsetFun: : 而是 bb 本身的 name 會被 sdSubsetFun 在堶掙悝O出來，進而組成一個新的: : expression 當做 subsetBy 的引數。: : 不過如果你看不懂: : x <- 10: : rm(x) 跟 rm(10) 的這個基本又神秘的地方，那我也不知道該怎麼跟你說明了。--","R_Language"
"2773","M.1370183938.A.3B7","Wush978","問題","Re: 不會傳遞 expression 到sub-function",2013-06-02 22:38:55,NA,NA,"以下是我最初推文時測的code

```r
library('doBy')
sdSubsetFun = function(group, dVar, data) {

  sdVar = substitute(dVar)

  # 2SD threshold
  subsetThreshold <- substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &
                                  (sdVar < (mean(sdVar) + 2*sd(sdVar))) )
  data$temp <- eval(subsetThreshold)
  dataOut = subsetBy(group,
                     subset = temp,
                     data = data)
}

# Create Data
aa = rep(c('a','b','c'), 50)
bb = 1:150
tData = data.frame(aa,bb)

subData = sdSubsetFun(~aa, bb, tData)
```

不過應該和Chris7462的修改類似。

---

關於物件的是屬於symbol或character，也就是後來cog5566提到關於`rm`函數行為的問題，

這也是我過去學R ，到目前覺得很不可思議和不方便的地方。

cog5566可以用以下的方式來探索函數的行為：

```r
debug(rm)
x <- ""y""
y <- 10
rm(x)
```

這之後會進入除錯模式，你可以巨細靡遺的觀察`rm`函數的行為。

你會發現有種叫作""name""型態的物件。

也可以去追相關函數的說明文件，也許你就可以搞清楚了。

ps. 我最近事情有點多，就沒追下去搞懂他了。

我也不太確定Hadley的R advanced堶惘釣S有提到這件事情。

ps. 現在github好像掛了，晚點我再補連結。

期待你搞清楚後也可以播空發篇文章教教我，先謝謝了。※ 引述《cog5566 (刃之56)》之銘言：: ※ 引述《Chris7462 (∼烤焦麵包∼)》之銘言：: : 你只看到了第二個參數，沒看到後面的 data=dietox: : subsetBy 括號裡面整個的意思是用 dietox 這組資料的 Weight 也就是 dietox$Weight: : 可以把資料 attach 上去就知道了。: ...嗯...: 你覺得... subsetBy 的範例有用 attach() 嗎？: 就是因為他沒有用，所以才酷的...: :   > data(dietox): :   > attach(dietox): :   > typeof(Weight < mean(Weight)): :   [1] ""logical"": :   > typeof(dietox$Weight < mean(dietox$Weight)): :   [1] ""logical"": :   > Weight == dietox$Weight: : 兩個是一樣的: 當然啊...因為你加了 attach() ...: 你把 dietox 拿到 search path 當然這個時候 Weight < mean(Weight): 就可以被 evaluate。: 這不是等於說，你問我有沒有看到一隻貓，我說沒有。: 然後你放了一隻貓在我前面，再問一次有沒有看到一隻貓...: 然後說我之前錯了，這裡其實是有一隻貓的...: : 因為你開 R 的時候有讀到舊的資料或是 R 的暫存檔，沒有 attach dietox 這個 data: : 的話應該不會 Weight 這個 variable: : 請先把舊的暫存檔或舊資料清掉，不然這樣討論下去你只會一直得到很奇怪的結果: 這很有趣...: 不過講正經的，這真的不是 attach() 的問題。: 從頭到尾都沒有必要 attach dietox 到 Search Path: 我很懷疑你自己有沒有真的執行過沒有 attach() 的範例: 是真的可以執行的。跟 attach() 沒有關係。: : 請看 ?rm: : rm    (..., list = character(), pos = -1,: :        envir = as.environment(pos), inherits = FALSE): : ...: : the objects to be removed, as names (unquoted) or character strings (quoted).: : 裡面放的可以是變數名稱或是字串，所以 rm('x') 跟 rm(x) 一樣: : 看不懂。: 那: x <- 10: 請問 sum(x,x) 跟 sum(10,10) 會不會一樣呢？: : 請把值呼叫出來: :   > x     # x 是變數，數值為 10: :   [1] 10: :   > y     # y 是變數，數值是字元 ""x"": :   [1] ""x"": 所以你有試過 rm(y) 嗎？: 你覺得答案是？: 答案是 y 會被刪掉而不是 x: 但是<U+7232>什<U+9EBD>這個時候 y 不會被替換成 'x'變成 rm('x') 而刪掉 x？: 答案是這個完全決定於 rm 的內部寫法。也就是說使用者沒辦法在外部決定輸入值是: variable name 或是 value。: 我不知道這有沒有嚇到你啦，但是我第一次看到這個是有被嚇到啦。: 可能我還太嫩了。: : 看不懂。: 這邊我想我們各有一半的責任。: 我的責任是說錯了一點 data frame 應該沒有包含一個 environment，就只是變數: 和值的對應關係。: 你的責任是你小小作弊式的用了 attach() 然後再做: typeof(Weight < mean(Weight)): 不然實際情況這個應該會出錯，然後會很驚訝的覺得<U+7232>什<U+9EBD>: subsetBy(~Evit, Weight < mean(Weight), data=dietox) 卻不會有問題: : 一樣看不懂。: 但是這是我的最終問題呀。可能是我表達不好，不過你看不懂是如何回答的？: : 問題是出在這邊，因為 data = data 用的是 data 這個資料的 data$subsetThreshold: : 但是 data 下並沒有 data$subsetThreshold 這個變數，所以就有 error: 沒錯這是個問題，而且是大問題。但是你有看到我貼的 error message 嗎: 在這個問題發生之前上面就出問題了。: : 另外這邊也錯，兩個改法。一個是: :   > tData = data.frame(aa <- x, bb <- y): : 或是: :   > tData = data.frame(aa = x, bb = y): :   > aa <- x: :   > bb <- y: : 看不懂上面的幾個錯誤跟 dynamic scope 有什麼關係？: : 整的問題只是呼叫 function 的時候沒有把該放的參數放對而已。: 這真的不是這個問題: : 我把整個改過的程式貼上來如下，如果再不行我也不知道怎麼幫你了....: 這個有趣...: : library('doBy'): : sdSubsetFun = function(group, dVar, data) {: :   # 2SD threshold: :   data$subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &: :                     (dVar < (mean(dVar) + 2*sd(dVar))): :   dataOut = subsetBy(group,: :             subset = subsetThreshold,: :             data = data): : }: : x = rep(c('a','b','c'), 50): : y = 1:150: : tData = data.frame(aa = x, bb = y): : aa <- x: : bb <- y: : subData = sdSubsetFun(~aa, bb, tData): 你這樣可以跑是因為你用了跟剛剛加了 attach() 的作弊方式: aa <- x: bb <- y: 這跟 attach(tData) 是類似的意思: 但是這跟原本的 subsetBy那種寫法意思就差多了。: 我要的是 bb 不是單純的 value 代進去sdSubsetFun: 而是 bb 本身的 name 會被 sdSubsetFun 在堶掙悝O出來，進而組成一個新的: expression 當做 subsetBy 的引數。: 不過如果你看不懂: x <- 10: rm(x) 跟 rm(10) 的這個基本又神秘的地方，那我也不知道該怎麼跟你說明了。--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2774","M.1370162366.A.725","cog5566","問題","Re: 不會傳遞 expression 到sub-function",2013-06-02 16:39:24,NA,NA,"※ 引述《Chris7462 (∼烤焦麵包∼)》之銘言：: ※ 引述《cog5566 (刃之56)》之銘言：: : 我想不是 logical 是 logical expression: : 你看例子的第二個參數是 Weight < mean(Weight): : 並不是 dietox$Weight < mean(dietox$Weight): 你只看到了第二個參數，沒看到後面的 data=dietox: subsetBy 括號裡面整個的意思是用 dietox 這組資料的 Weight 也就是 dietox$Weight: 可以把資料 attach 上去就知道了。...嗯...
你覺得... subsetBy 的範例有用 attach() 嗎？
就是因為他沒有用，所以才酷的...:   > data(dietox):   > attach(dietox):   > typeof(Weight < mean(Weight)):   [1] ""logical"":   > typeof(dietox$Weight < mean(dietox$Weight)):   [1] ""logical"":   > Weight == dietox$Weight: 兩個是一樣的當然啊...因為你加了 attach() ...
你把 dietox 拿到 search path 當然這個時候 Weight < mean(Weight)
就可以被 evaluate。

這不是等於說，你問我有沒有看到一隻貓，我說沒有。
然後你放了一隻貓在我前面，再問一次有沒有看到一隻貓...
然後說我之前錯了，這裡其實是有一隻貓的...: : 如果你用: : typeof(Weight < mean(Weight)): : 和: : typeof(dietox$Weight < mean(dietox$Weight)): : 會得到完全不一樣的結果: 因為你開 R 的時候有讀到舊的資料或是 R 的暫存檔，沒有 attach dietox 這個 data: 的話應該不會 Weight 這個 variable: 請先把舊的暫存檔或舊資料清掉，不然這樣討論下去你只會一直得到很奇怪的結果這很有趣...
不過講正經的，這真的不是 attach() 的問題。
從頭到尾都沒有必要 attach dietox 到 Search Path

我很懷疑你自己有沒有真的執行過沒有 attach() 的範例
是真的可以執行的。跟 attach() 沒有關係。: : Weight < mean(Weight) 會變成 logical class 會是在 subsetBy 自己的 scope 之內: : 的事，但是在 subsetBy 之外的時候狀況很奇怪。: : 這也是一個我很不習慣 R 的地方之一。有一些 function 會展現出奇怪的特性，: : 就是你不知道到底 function 是抓引數的 value 還是 name or expression: : 譬如說好了: : x <- 10: : rm('x') 和 rm(x): : 有同樣的效果: 請看 ?rm: rm    (..., list = character(), pos = -1,:        envir = as.environment(pos), inherits = FALSE): ...: the objects to be removed, as names (unquoted) or character strings (quoted).: 裡面放的可以是變數名稱或是字串，所以 rm('x') 跟 rm(x) 一樣: : 看起來好像沒有很奇怪，但是<U+7232>什<U+9EBD> rm(x) 不會變成 rm(10)呢？: 看不懂。那
x <- 10
請問 sum(x,x) 跟 sum(10,10) 會不會一樣呢？: : 下面這個例子就會更奇怪: : x <- 10: : y <- 'x': : rm(y): : 那到底這個時候是什<U+9EBD>情況，到底這時候會抓 rm 的參數 name y 還是 value 'x'?: 請把值呼叫出來:   > x     # x 是變數，數值為 10:   [1] 10:   > y     # y 是變數，數值是字元 ""x"":   [1] ""x""所以你有試過 rm(y) 嗎？
你覺得答案是？

答案是 y 會被刪掉而不是 x
但是<U+7232>什<U+9EBD>這個時候 y 不會被替換成 'x'變成 rm('x') 而刪掉 x？

答案是這個完全決定於 rm 的內部寫法。也就是說使用者沒辦法在外部決定輸入值是
variable name 或是 value。

我不知道這有沒有嚇到你啦，但是我第一次看到這個是有被嚇到啦。
可能我還太嫩了。: : 回到我的問題的例子: : subsetBy(~Evit, Weight < mean(Weight), data=dietox): : 如果在一般的 function下，而且 Weight 有給予值時，: : Weight < mean(Weight) 應該會去抓 Weight 的值來得出 logical class: : 但是這邊等神奇之處就是，Weight 是 dietox 的一個 column，: : 或是複雜一點的說，是 dietox 這個 data frame 的 environment 堶悸瘍僂: : 他們是在 subsetBy 之內才被組合的。: 看不懂。這邊我想我們各有一半的責任。
我的責任是說錯了一點 data frame 應該沒有包含一個 environment，就只是變數
和值的對應關係。


你的責任是你小小作弊式的用了 attach() 然後再做
typeof(Weight < mean(Weight))
不然實際情況這個應該會出錯，然後會很驚訝的覺得<U+7232>什<U+9EBD>
subsetBy(~Evit, Weight < mean(Weight), data=dietox) 卻不會有問題: : 這樣一來，subsetBy 必定會知道 subsetBy 外面被 call 時引數的 expression: : 而不是值。現在知道這可以用 substitute 來實現，但是我的問題是如果有下一層，: : 如何將這個 expression 帶到下一層？: 一樣看不懂。但是這是我的最終問題呀。可能是我表達不好，不過你看不懂是如何回答的？: : 我還是會不行用耶，貼上我的 code: : ######################################################################: : library('doBy'): : sdSubsetFun = function(group, dVar, data) {: :   # 2SD threshold: :   subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &: :                     (dVar < (mean(dVar) + 2*sd(dVar))): :   dataOut = subsetBy(group,: :             subset = subsetThreshold,: :              data = data): 問題是出在這邊，因為 data = data 用的是 data 這個資料的 data$subsetThreshold: 但是 data 下並沒有 data$subsetThreshold 這個變數，所以就有 error沒錯這是個問題，而且是大問題。但是你有看到我貼的 error message 嗎
在這個問題發生之前上面就出問題了。: :  }: : x = rep(c('a','b','c'), 50): : y = 1:150: : tData = data.frame(aa = x, bb = y): 另外這邊也錯，兩個改法。一個是:   > tData = data.frame(aa <- x, bb <- y): 或是:   > tData = data.frame(aa = x, bb = y):   > aa <- x:   > bb <- y: : subData = sdSubsetFun(~aa, bb, tData): : ######################################################################: : Error in sdSubsetFun(~aa, bb, tData) : object 'bb' not found: : ######################################################################: : 其實很顯而易見，在 evaluate dVar 的時候會在 local environment 找不到值，: : 因為 dynamic scope 的關係，它會去 global environment 找，但也會找不到。: : 所以他會再找 bb 的value，但是根本就沒有 bb 這個變數，bb是tData的 column name: : 所以最後他會說 bb 找不到。: : 還是說我什<U+9EBD>地方弄錯了？可能有小細節沒有注意到。: 看不懂上面的幾個錯誤跟 dynamic scope 有什麼關係？: 整的問題只是呼叫 function 的時候沒有把該放的參數放對而已。這真的不是這個問題: 我把整個改過的程式貼上來如下，如果再不行我也不知道怎麼幫你了....這個有趣...: library('doBy'): sdSubsetFun = function(group, dVar, data) {:   # 2SD threshold:   data$subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &:                     (dVar < (mean(dVar) + 2*sd(dVar))):   dataOut = subsetBy(group,:             subset = subsetThreshold,:             data = data): }: x = rep(c('a','b','c'), 50): y = 1:150: tData = data.frame(aa = x, bb = y): aa <- x: bb <- y: subData = sdSubsetFun(~aa, bb, tData)你這樣可以跑是因為你用了跟剛剛加了 attach() 的作弊方式
aa <- x
bb <- y
這跟 attach(tData) 是類似的意思
但是這跟原本的 subsetBy那種寫法意思就差多了。
我要的是 bb 不是單純的 value 代進去sdSubsetFun
而是 bb 本身的 name 會被 sdSubsetFun 在堶掙悝O出來，進而組成一個新的
expression 當做 subsetBy 的引數。

不過如果你看不懂
x <- 10
rm(x) 跟 rm(10) 的這個基本又神秘的地方，那我也不知道該怎麼跟你說明了。

--","R_Language"
"2775","M.1370150464.A.FA1","Chris7462","問題","Re: 不會傳遞 expression 到sub-function",2013-06-02 13:21:02,NA,NA,"※ 引述《cog5566 (刃之56)》之銘言：: ※ 引述《Chris7462 (∼烤焦麵包∼)》之銘言：: : subsetBy(formula, subset, data = parent.frame(), select, drop=FALSE,: : join=TRUE, ... ): : 第二個參數是 logical 不是 expression，可以看他的說明: : subset logical expression indicating elements or rows to keep: missing values: : taken as false.: : 用他的 example 看一下就知道了: : sbstBy> data(dietox): : sbstBy> subsetBy(~Evit, Weight < mean(Weight), data=dietox): : data(dietox): : dietox$Weight < mean(dietox$Weight): 我想不是 logical 是 logical expression: 你看例子的第二個參數是 Weight < mean(Weight): 並不是 dietox$Weight < mean(dietox$Weight)你只看到了第二個參數，沒看到後面的 data=dietox
subsetBy 括號裡面整個的意思是用 dietox 這組資料的 Weight 也就是 dietox$Weight
可以把資料 attach 上去就知道了。

  > data(dietox)
  > attach(dietox)
  > typeof(Weight < mean(Weight))
  [1] ""logical""
  > typeof(dietox$Weight < mean(dietox$Weight))
  [1] ""logical""
  > Weight == dietox$Weight

兩個是一樣的: 如果你用: typeof(Weight < mean(Weight)): 和: typeof(dietox$Weight < mean(dietox$Weight)): 會得到完全不一樣的結果因為你開 R 的時候有讀到舊的資料或是 R 的暫存檔，沒有 attach dietox 這個 data
的話應該不會 Weight 這個 variable
請先把舊的暫存檔或舊資料清掉，不然這樣討論下去你只會一直得到很奇怪的結果: Weight < mean(Weight) 會變成 logical class 會是在 subsetBy 自己的 scope 之內: 的事，但是在 subsetBy 之外的時候狀況很奇怪。: 這也是一個我很不習慣 R 的地方之一。有一些 function 會展現出奇怪的特性，: 就是你不知道到底 function 是抓引數的 value 還是 name or expression: 譬如說好了: x <- 10: rm('x') 和 rm(x): 有同樣的效果請看 ?rm

rm    (..., list = character(), pos = -1,
       envir = as.environment(pos), inherits = FALSE)...the objects to be removed, as names (unquoted) or character strings (quoted).

裡面放的可以是變數名稱或是字串，所以 rm('x') 跟 rm(x) 一樣: 看起來好像沒有很奇怪，但是<U+7232>什<U+9EBD> rm(x) 不會變成 rm(10)呢？: 下面這個例子就會更奇怪: x <- 10: y <- 'x': rm(y): 那到底這個時候是什<U+9EBD>情況，到底這時候會抓 rm 的參數 name y 還是 value 'x'?請把值呼叫出來

  > x     # x 是變數，數值為 10
  [1] 10
  > y     # y 是變數，數值是字元 ""x""
  [1] ""x"": 回到我的問題的例子: subsetBy(~Evit, Weight < mean(Weight), data=dietox): 如果在一般的 function下，而且 Weight 有給予值時，: Weight < mean(Weight) 應該會去抓 Weight 的值來得出 logical class: 但是這邊等神奇之處就是，Weight 是 dietox 的一個 column，: 或是複雜一點的說，是 dietox 這個 data frame 的 environment 堶悸瘍僂: 他們是在 subsetBy 之內才被組合的。: 這樣一來，subsetBy 必定會知道 subsetBy 外面被 call 時引數的 expression: 而不是值。現在知道這可以用 substitute 來實現，但是我的問題是如果有下一層，: 如何將這個 expression 帶到下一層？: 我還是會不行用耶，貼上我的 code: ######################################################################: library('doBy'): sdSubsetFun = function(group, dVar, data) {:   # 2SD threshold:   subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &:                     (dVar < (mean(dVar) + 2*sd(dVar))):   dataOut = subsetBy(group,:             subset = subsetThreshold,:              data = data)問題是出在這邊，因為 data = data 用的是 data 這個資料的 data$subsetThreshold
但是 data 下並沒有 data$subsetThreshold 這個變數，所以就有 error:  }: x = rep(c('a','b','c'), 50): y = 1:150: tData = data.frame(aa = x, bb = y)另外這邊也錯，兩個改法。一個是

  > tData = data.frame(aa <- x, bb <- y)

或是

  > tData = data.frame(aa = x, bb = y)
  > aa <- x
  > bb <- y: subData = sdSubsetFun(~aa, bb, tData): ######################################################################: Error in sdSubsetFun(~aa, bb, tData) : object 'bb' not found: ######################################################################: 其實很顯而易見，在 evaluate dVar 的時候會在 local environment 找不到值，: 因為 dynamic scope 的關係，它會去 global environment 找，但也會找不到。: 所以他會再找 bb 的value，但是根本就沒有 bb 這個變數，bb是tData的 column name: 所以最後他會說 bb 找不到。: 還是說我什<U+9EBD>地方弄錯了？可能有小細節沒有注意到。看不懂上面的幾個錯誤跟 dynamic scope 有什麼關係？
整的問題只是呼叫 function 的時候沒有把該放的參數放對而已。
我把整個改過的程式貼上來如下，如果再不行我也不知道怎麼幫你了....


library('doBy')
sdSubsetFun = function(group, dVar, data) {
  # 2SD threshold

  data$subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &
                    (dVar < (mean(dVar) + 2*sd(dVar)))
  dataOut = subsetBy(group,
            subset = subsetThreshold,
            data = data)
}
x = rep(c('a','b','c'), 50)
y = 1:150
tData = data.frame(aa = x, bb = y)
aa <- x
bb <- y
subData = sdSubsetFun(~aa, bb, tData)

--","R_Language"
"2776","M.1370145372.A.3BA","cog5566","問題","Re: 不會傳遞 expression 到sub-function",2013-06-02 11:56:09,NA,NA,"※ 引述《Chris7462 (∼烤焦麵包∼)》之銘言：: ※ 引述《cog5566 (刃之56)》之銘言：: : [問題類型]:: : 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): : [軟體熟悉度]:: : 入門(寫過其他程式，只是對語法不熟悉): : [問題敘述]:: : 以 subsetBy 為例好了 （這是doBy package 的一個function): : 這個 function 可以依照組別來篩選 data frame 的資料。: : 假設我想要寫一個 function 會用到 subsetBy: : 這個  function 的功能是依組別去除 2 倍 SD 之外的資料: : 問題如下：: : subsetBy 的第二個參數是要輸入一個 expression （應該是吧）: subsetBy(formula, subset, data = parent.frame(), select, drop=FALSE,: join=TRUE, ... ): 第二個參數是 logical 不是 expression，可以看他的說明: subset logical expression indicating elements or rows to keep: missing values: taken as false.: 用他的 example 看一下就知道了: sbstBy> data(dietox): sbstBy> subsetBy(~Evit, Weight < mean(Weight), data=dietox): data(dietox): dietox$Weight < mean(dietox$Weight)我想不是 logical 是 logical expression
你看例子的第二個參數是 Weight < mean(Weight)
並不是 dietox$Weight < mean(dietox$Weight)
如果你用
typeof(Weight < mean(Weight))
和
typeof(dietox$Weight < mean(dietox$Weight))
會得到完全不一樣的結果

Weight < mean(Weight) 會變成 logical class 會是在 subsetBy 自己的 scope 之內
的事，但是在 subsetBy 之外的時候狀況很奇怪。

這也是一個我很不習慣 R 的地方之一。有一些 function 會展現出奇怪的特性，
就是你不知道到底 function 是抓引數的 value 還是 name or expression

譬如說好了
x <- 10
rm('x') 和 rm(x)
有同樣的效果
看起來好像沒有很奇怪，但是<U+7232>什<U+9EBD> rm(x) 不會變成 rm(10)呢？
下面這個例子就會更奇怪
x <- 10
y <- 'x'
rm(y)

那到底這個時候是什<U+9EBD>情況，到底這時候會抓 rm 的參數 name y 還是 value 'x'?

回到我的問題的例子
subsetBy(~Evit, Weight < mean(Weight), data=dietox)

如果在一般的 function下，而且 Weight 有給予值時，
Weight < mean(Weight) 應該會去抓 Weight 的值來得出 logical class

但是這邊等神奇之處就是，Weight 是 dietox 的一個 column，
或是複雜一點的說，是 dietox 這個 data frame 的 environment 堶悸瘍僂
他們是在 subsetBy 之內才被組合的。
這樣一來，subsetBy 必定會知道 subsetBy 外面被 call 時引數的 expression
而不是值。現在知道這可以用 substitute 來實現，但是我的問題是如果有下一層，
如何將這個 expression 帶到下一層？: : 如: : subsetBy(~Evit, Weight < mean(Weight), data=dietox): : 這個 expression 是篩選資料的算式，其中的變數會對應到 data frame: : 的 column name: : 而我想要寫一個 function 是: : sdSubsetFun = function(group, dVar, data): : data 是我要操作的 data frame: : dVar 是要去掉的 2SD 的目標 column name: : group 是分組的依據 （class 是 formula）: : 但是我沒辦法將 dVar 傳進去堶悸 subsetBy 的第二個參數: : 程式碼如下: : ######################################################################: : library('doBy'): : sdSubsetFun = function(group, dVar, data) {: : -  sdVar = substitute(dVar): :   # 2SD threshold: : -  subsetThreshold = substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &: : -                                (sdVar < (mean(sdVar) + 2*sd(sdVar))) ):   +  subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &:   +                    (dVar < (mean(dVar) + 2*sd(dVar))): :    dataOut = subsetBy(group,: : -            subset = eval(subsetThreshold, group, parent.frame()),:   +            subset = subsetThreshold,: :              data = data): :  }:   - 是刪除，+ 是新增。這樣應該就可以用了 :p我還是會不行用耶，貼上我的 code
######################################################################
library('doBy')
sdSubsetFun = function(group, dVar, data) {

  # 2SD threshold

  subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &
                    (dVar < (mean(dVar) + 2*sd(dVar)))
  dataOut = subsetBy(group,
            subset = subsetThreshold,
             data = data)
 }

x = rep(c('a','b','c'), 50)
y = 1:150
tData = data.frame(aa = x, bb = y)

subData = sdSubsetFun(~aa, bb, tData)
######################################################################

Error in sdSubsetFun(~aa, bb, tData) : object 'bb' not found

######################################################################
其實很顯而易見，在 evaluate dVar 的時候會在 local environment 找不到值，
因為 dynamic scope 的關係，它會去 global environment 找，但也會找不到。
所以他會再找 bb 的value，但是根本就沒有 bb 這個變數，bb是tData的 column name
所以最後他會說 bb 找不到。

還是說我什<U+9EBD>地方弄錯了？可能有小細節沒有注意到。: : # Create Data: : aa = rep(c('a','b','c'), 50): : bb = 1:150: : tData = data.frame(aa,bb): : subData = sdSubsetFun(~aa, bb, tData): : ######################################################################: : 錯誤訊息為：: : Error in eval(subsetThreshold, group, parent.frame()) :: :   object 'subsetThreshold' not found: : 也就是說，堶悸 subsetBy 都不會抓我的 subsetThreshold 的值，: : 都還是會抓 subsetThreshold 自己本身的 expression。: : 要怎麼做才會讓他抓到 subsetThreshold 的值呢？--","R_Language"
"2777","M.1370139863.A.952","Chris7462","問題","Re: 不會傳遞 expression 到sub-function",2013-06-02 10:24:21,NA,NA,"※ 引述《cog5566 (刃之56)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 以 subsetBy 為例好了 （這是doBy package 的一個function): 這個 function 可以依照組別來篩選 data frame 的資料。: 假設我想要寫一個 function 會用到 subsetBy: 這個  function 的功能是依組別去除 2 倍 SD 之外的資料: 問題如下：: subsetBy 的第二個參數是要輸入一個 expression （應該是吧）subsetBy(formula, subset, data = parent.frame(), select, drop=FALSE,
join=TRUE, ... )

第二個參數是 logical 不是 expression，可以看他的說明subsetlogical expression indicating elements or rows to keep: missing valuestaken as false.用他的 example 看一下就知道了

sbstBy> data(dietox)
sbstBy> subsetBy(~Evit, Weight < mean(Weight), data=dietox)

data(dietox)
dietox$Weight < mean(dietox$Weight): 如: subsetBy(~Evit, Weight < mean(Weight), data=dietox): 這個 expression 是篩選資料的算式，其中的變數會對應到 data frame: 的 column name: 而我想要寫一個 function 是: sdSubsetFun = function(group, dVar, data): data 是我要操作的 data frame: dVar 是要去掉的 2SD 的目標 column name: group 是分組的依據 （class 是 formula）: 但是我沒辦法將 dVar 傳進去堶悸 subsetBy 的第二個參數: 程式碼如下: ######################################################################: library('doBy'): sdSubsetFun = function(group, dVar, data) {: -  sdVar = substitute(dVar):   # 2SD threshold: -  subsetThreshold = substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &: -                                (sdVar < (mean(sdVar) + 2*sd(sdVar))) )+  subsetThreshold = (dVar > (mean(dVar) - 2*sd(dVar))) &
  +                    (dVar < (mean(dVar) + 2*sd(dVar))):    dataOut = subsetBy(group,: -            subset = eval(subsetThreshold, group, parent.frame()),+            subset = subsetThreshold,:              data = data):  }- 是刪除，+ 是新增。這樣應該就可以用了 :p: # Create Data: aa = rep(c('a','b','c'), 50): bb = 1:150: tData = data.frame(aa,bb): subData = sdSubsetFun(~aa, bb, tData): ######################################################################: 錯誤訊息為：: > subData = sdSubsetFun(~aa, bb, tData): Error in eval(subsetThreshold, group, parent.frame()) ::   object 'subsetThreshold' not found: 也就是說，堶悸 subsetBy 都不會抓我的 subsetThreshold 的值，: 都還是會抓 subsetThreshold 自己本身的 expression。: 要怎麼做才會讓他抓到 subsetThreshold 的值呢？--","R_Language"
"2778","M.1370057150.A.9D8","diplazium","問題","有關R的evaluate及expression",2013-06-01 11:25:47,NA,NA,"[問題類型]:
經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:

有個也許是很基本的問題想請教版上的達人們。

我個人使用R超過7年了，但因為我的主要工作是整理、統計實驗數據，所以大多數的工作
可以透過尋找合適的package或basic function來處理，或者自己寫一些簡單的function
來解決。我並沒有紮實的programing基礎，會寫程式也僅止於R及一點點Office VBA。

我一直都不是很清楚，R的一些function中都會提到的expression, evaluate這兩個辭彙
是什麼意思?透過一些實作的經驗中，我大致對這兩樣東西有點模糊的概念，也學習過
R的regular expression及一些formula的expression，但總是無法完全了解它們的
完整定義為何? 請版上的高手們指教一下。謝謝。

[關鍵字]:
expression, evaluate

--","R_Language"
"2779","M.1370023207.A.B51","cog5566","問題","不會傳遞 expression 到sub-function",2013-06-01 02:00:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:

以 subsetBy 為例好了 （這是doBy package 的一個function)
這個 function 可以依照組別來篩選 data frame 的資料。

假設我想要寫一個 function 會用到 subsetBy
這個  function 的功能是依組別去除 2 倍 SD 之外的資料

問題如下：
subsetBy 的第二個參數是要輸入一個 expression （應該是吧）
如
subsetBy(~Evit, Weight < mean(Weight), data=dietox)

這個 expression 是篩選資料的算式，其中的變數會對應到 data frame
的 column name

而我想要寫一個 function 是
sdSubsetFun = function(group, dVar, data)

data 是我要操作的 data frame
dVar 是要去掉的 2SD 的目標 column name
group 是分組的依據 （class 是 formula）

但是我沒辦法將 dVar 傳進去堶悸 subsetBy 的第二個參數

程式碼如下
######################################################################
library('doBy')
sdSubsetFun = function(group, dVar, data) {
  sdVar = substitute(dVar)

  # 2SD threshold
  subsetThreshold = substitute( (sdVar > (mean(sdVar) - 2*sd(sdVar))) &
                                (sdVar < (mean(sdVar) + 2*sd(sdVar))) )

  dataOut = subsetBy(group,
            subset = eval(subsetThreshold, group, parent.frame()),
            data = data)
 }

# Create Data
aa = rep(c('a','b','c'), 50)
bb = 1:150
tData = data.frame(aa,bb)

subData = sdSubsetFun(~aa, bb, tData)
######################################################################
錯誤訊息為：> subData = sdSubsetFun(~aa, bb, tData)Error in eval(subsetThreshold, group, parent.frame()) :
  object 'subsetThreshold' not found

也就是說，堶悸 subsetBy 都不會抓我的 subsetThreshold 的值，
都還是會抓 subsetThreshold 自己本身的 expression。
要怎麼做才會讓他抓到 subsetThreshold 的值呢？


--","R_Language"
"2780","M.1370008545.A.8D7","Wush978","分享","R 發生錯誤時自動發送google talk msg",2013-05-31 21:55:41,NA,NA,"[關鍵字]: R, RMessenger

以下的程式碼可以使R 在發生錯誤時，自動發送訊息到google talk

```r

library(RMessenger)
options(error = function() {
  str <-geterrmessage()
  sendXMPPMessage(""[email<U+00A0>protected]"", password=""passwd_of_sender"",
to=""[email<U+00A0>protected]"", str)
  stop(str)
})

stop(""test error"")

```[email<U+00A0>protected]和[email<U+00A0>protected]必須要已經開通google talk。

同樣的方法也可以丟facebook或是其他XMPP protocal的服務。

也可不要用RMessenger, 改成用其他，如發送e-mail的服務。

這在跑大實驗的時候好用！

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2781","M.1369844911.A.588","youngce","分享","R.Net提供.NetFramework使用R的統計運算",2013-05-30 00:28:27,NA,NA,"[關鍵字]: R.Net

[出處]:http://rdotnet.codeplex.com/[重點摘要]:

　　R的優點在於高效的運算,以及內建許多統計分析法套件...等等等

但最大的缺點應該是無法設計使用者介面(UI)吧?? R.Net提供了方便接口，

可直接在.NetFramework程式語言(如:C#)中直接使用R的語法。目前我工作

上通常由C#(WPF或WinForm)設計出UI,後端需要統計分析(如:迴歸分析,檢定)

的部份則引用R.Net使用R的語法。
　　
　　各位版友，有機會可以試試看，目前Google上R.Net文件並不多，

可以一起討論看看R.Net的使用技巧或缺點。


　　

--

人需要的不多

      但想要的太多

--","R_Language"
"2782","M.1369789542.A.81A","MIZUYAMA","問題","unique及類似的指令請教",2013-05-29 09:05:37,NA,NA,"文章分類提示:
- 問題: 當你想要問問題時，請使用這個類別
- 討論: 當你自己已經有答案，但是也想聽聽版友意見時

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近再處理一資料庫
裡面的id 有重覆 (同一個人會出現很多次)
我再處理不同條件下有幾個人
我用的是data[!duplicated(data[,""id""]),]
後來想一想data[unique(data[,""id""]),]似乎也可以

想請問!duplicated 與 unique差別在哪?


[程式範例]:

--
「如果昨天到了明天會變成兩天前，試問後天應該是今天或是昨天？」

                                                      ∼時間操縱緒論期末考

--","R_Language"
"2783","M.1369760246.A.2DA","mcu68104","分享","Google's R Style Guide",2013-05-29 00:57:24,NA,NA,"[關鍵字]: R Coding Style

[重點摘要]:http://google-styleguide.googlecode.com/svn/trunk/google-r-style.html意外發現 Google 也有 R 的 coding style guide

發現板上沒有就放上來分享了

自己的程式碼如果可以寫到讓別人覺得賞心悅目

然後光看 變數 和 函式 名稱就知道要做什麼

不只自己看的開心，對參與計畫的夥伴們也是好事一件

--","R_Language"
"2784","M.1369707942.A.9E6","youngce","問題","Re: readHTMLTable中文亂碼問題",2013-05-28 10:25:34,NA,NA,"感謝Wush大與Cayley大的熱心幫忙

參照Wush大的建議後

確實能跑出readHTMLTable,

R顯示的Table正確，但在View(Test)仍出現亂碼,其結果如下圖https://docs.google.com/file/d/0ByuYsWOYhYbBVGZMOHAwWmp3M0k/edit?usp=sharingCayley大建議到RGui改預設語言,

我將Rstudio與R重灌,並將預設語言改為English

但RStudio卻仍顯示R中文介面,如下https://docs.google.com/file/d/0ByuYsWOYhYbBLUFGaXdTUzJzNnc/edit?usp=sharing我不清楚這是什麼原因,

在這樣的環境下,依Cayley大源碼仍然出現中文亂文與錯誤,

不知是不是因為作業環境是Window 7 中文版原故呢??


--

人需要的不多

      但想要的太多

--","R_Language"
"2785","M.1369662869.A.6D2","Cayley","問題","Re: readHTMLTable中文亂碼問題",2013-05-27 21:54:27,NA,NA,"你好，我是 spideR 講題的講者

因為我不常上 ptt，所以，今天才在 Wush 的提示下

發現這裡有人問了關於那場演講的問題

基本上我也簡單的在我的 Windows 主機上實驗了一下https://docs.google.com/file/d/0B3Bb-96VzIn7R1dHMEVyU1lDMlk/edit發現，好像是可以 RUN 的耶

我的演講的 sample code 全部都放在這個專案中https://bitbucket.org/tw_use_r/20130325-mldm-spider我依循了專案中的 example 1 的 code

在 Windows 的主機上執行了一遍

發現在執行下方的 example 1 的 code 時

並沒有發生編碼問題唷......如上圖所示........


rm(list=ls(all.names=TRUE))

library(XML)

MOPS_URL.TWSE_ALL =
""http://mopsov.tse.com.tw/server-java/t05st49_1?kinds=sii&colorchg=1&type=all&step=0a""test_doc = htmlParse(MOPS_URL.TWSE_ALL,encoding=""big5"")
test = readHTMLTable(test_doc)
test = readHTMLTable(test_doc,which=1,stringsAsFactors=FALSE)
View(test)

TWSE_IDs = test$V1[-1]
print(test$V1[-1])

NBSP = ""&nbsp;""
charToRaw(TWSE_IDs[1])
# [1] 31 31 30 31 c2 a0
TWSE_IDs = gsub(""[$,\xc2\xa0]"", """", TWSE_IDs)


雖然，如上圖所示，我沒有遇到編碼問題

不過我卻遇到了另一個問題

就是

test$V1 找不到東西

不過只需要把

test$V1 替換成 test[[1]]

就完全可以動了

也就是把後面的幾行換成下面的樣子：


TWSE_IDs = test$[[1]][-1]
print(test$[[1]][-1])

NBSP = ""&nbsp;""
charToRaw(TWSE_IDs[1])
# [1] 31 31 30 31 c2 a0
TWSE_IDs = gsub(""[$,\xc2\xa0]"", """", TWSE_IDs)


就完全可以動了!!!※ 引述《youngce (時間會讓人遺忘)》之銘言：: [問題類型]:: R中文編碼,XML套件: [軟體熟悉度]:: 使用者(已經有用R 做過不少作品): [問題敘述]:: 之前看到Taiwan R User介紹spideR的影片: 今天試了一下Example1的範例卻發現出現了中文亂碼的問題,: 網上大部分是說UTF-8語系的問題,: 但我不知道要怎麼更改R操作語系編碼設定: 想請問各位高手要怎麼解決呢??: 以下是本機的資訊:: sessionInfo(): R version 2.15.3 (2013-03-01): Platform: x86_64-w64-mingw32/x64 (64-bit): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] stringr_0.6.2 XML_3.96-1.1: loaded via a namespace (and not attached):: [1] tools_2.15.3: 謝謝: [程式範例]:: 張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題: 程式碼可貼於以下網站：:       http://ideone.com/:       http://codepad.org:       http://pastie.org/:       http://nopaste.info/:       http://pastebin.com/:       http://paste.plurk.com:       http://gist.github.com/:       http://nopaste.csie.org/--","R_Language"
"2786","M.1369643792.A.BF6","Wush978","問題","Re: readHTMLTable中文亂碼問題",2013-05-27 16:36:28,NA,NA,"這是我在windows上測出來的方式:

```r
rm(list=ls(all.names=TRUE))

library(XML)

MOPS_URL.TWSE_ALL = ""http://mopsov.tse.com.tw/server-java/t05st49_1?kinds=sii&colorchg=1&type=all&step=0a""

temp <- readLines(url(MOPS_URL.TWSE_ALL), encoding=""big5"")
temp <- iconv(temp, ""big5"", ""utf8"")
temp.file <- tempfile()
write(temp, temp.file)


test_doc = htmlParse(temp.file, encoding=""utf8"")
test <- readHTMLTable(test_doc)
test
```※ 引述《youngce (時間會讓人遺忘)》之銘言：: : 以下是本機的資訊:: : sessionInfo(): : R version 2.15.3 (2013-03-01): : Platform: x86_64-w64-mingw32/x64 (64-bit): : locale:: : [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: : [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: : [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: : [4] LC_NUMERIC=C: : [5] LC_TIME=Chinese (Traditional)_Taiwan.950: : attached base packages:: : [1] stats     graphics  grDevices utils     datasets  methods   base: : other attached packages:: : [1] stringr_0.6.2 XML_3.96-1.1: : loaded via a namespace (and not attached):: : [1] tools_2.15.3: : 謝謝: 感謝Wush大的意見,但我使用iconv出現下列的錯誤:  錯誤在as.vector(x, ""character"") ::   cannot coerce type 'externalptr' to vector of type 'character': 而我的程式碼如下:: ############################################: rm(list=ls(all.names=TRUE)): library(XML): MOPS_URL.TWSE_ALL = ""http://mopsov.tse.com.tw/server-java/t05st49_1?kinds=sii&colorchg=1&type=all&step=0a"": test_doc = htmlParse(MOPS_URL.TWSE_ALL,encoding=""big5""): #iconv(test_doc): test = readHTMLTable(test_doc): test = readHTMLTable(test_doc,which=1,stringsAsFactors=FALSE): View(test): ###############################################: 執行到test = readHTMLTable(test_doc)就會出現:   錯誤在nchar(els[[1]]) : 多位元組字串 1 不正確: 的錯誤: 煩請各位高手能在給我些意見, 謝謝--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2787","M.1369620072.A.158","youngce","問題","Re: readHTMLTable中文亂碼問題",2013-05-27 10:01:10,NA,NA,": 以下是本機的資訊:: sessionInfo(): R version 2.15.3 (2013-03-01): Platform: x86_64-w64-mingw32/x64 (64-bit): locale:: [1] LC_COLLATE=Chinese (Traditional)_Taiwan.950: [2] LC_CTYPE=Chinese (Traditional)_Taiwan.950: [3] LC_MONETARY=Chinese (Traditional)_Taiwan.950: [4] LC_NUMERIC=C: [5] LC_TIME=Chinese (Traditional)_Taiwan.950: attached base packages:: [1] stats     graphics  grDevices utils     datasets  methods   base: other attached packages:: [1] stringr_0.6.2 XML_3.96-1.1: loaded via a namespace (and not attached):: [1] tools_2.15.3: 謝謝感謝Wush大的意見,但我使用iconv出現下列的錯誤

 錯誤在as.vector(x, ""character"") :
  cannot coerce type 'externalptr' to vector of type 'character'

而我的程式碼如下:

############################################
rm(list=ls(all.names=TRUE))

library(XML)

MOPS_URL.TWSE_ALL = ""http://mopsov.tse.com.tw/server-java/t05st49_1?kinds=sii&colorchg=1&type=all&step=0a""test_doc = htmlParse(MOPS_URL.TWSE_ALL,encoding=""big5"")

#iconv(test_doc)


test = readHTMLTable(test_doc)
test = readHTMLTable(test_doc,which=1,stringsAsFactors=FALSE)
View(test)
###############################################
執行到test = readHTMLTable(test_doc)就會出現

  錯誤在nchar(els[[1]]) : 多位元組字串 1 不正確

的錯誤

煩請各位高手能在給我些意見, 謝謝




--","R_Language"
"2788","M.1369493495.A.4BE","Wush978","情報","Re: Coursera 的新的free online class",2013-05-25 22:51:32,NA,NA,"請問目前有版友還在追這個課程嘛？

目前講完map-reduce。

btw, 他作業已經確定不會用到R 了。

即使如此，我目前仍然在追，

昨天用R把Quiz寫掉... (沒辦法，JSMapReduce都跑不出來...)※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: Coursera, data scientist, R, python: [出處]: https://www.coursera.org/course/datasci: [重點摘要]:: 現在又有一個新的免費的線上課程可以參加了！: 課程是由 University of Washington 的 Bill Howe 主講: 作業中會用到R, Python, SQL。: 有興趣的人請看 https://www.coursera.org/course/datasci--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2789","M.1369440904.A.859","Wush978","情報","2013-05-27 MLDM Monday 會前通知",2013-05-25 08:15:01,NA,NA,"Dear All：

2013/05/27 在創立方，會有我們第30次的 MLDM Monday 的聚會！

本次的聚會很榮幸邀請到於和鑫生技擔任工程師的Ben來和我們分享訊號分析的技術。
題目為「Independent Component Analysis」

演講內容為：

- Independent Component Analysis (ICA)的簡單介紹
- 如何使用R讀取聲音檔並且執行ICA分析

以下為我們的報名網址：http://www.meetup.com/Taiwan-R/events/118146832/Taiwan R User Group敬邀

--
歡迎到ptt R_Language版分享R 的相關知識

歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User聚會報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2790","M.1369390778.A.DDA","youngce","問題","readHTMLTable中文亂碼問題",2013-05-24 18:19:36,NA,NA,"[問題類型]:
R中文編碼,XML套件


[軟體熟悉度]:
使用者(已經有用R 做過不少作品)


[問題敘述]:

之前看到Taiwan R User介紹spideR的影片

今天試了一下Example1的範例卻發現出現了中文亂碼的問題,

網上大部分是說UTF-8語系的問題,

但我不知道要怎麼更改R操作語系編碼設定

想請問各位高手要怎麼解決呢??

以下是本機的資訊:

sessionInfo()
R version 2.15.3 (2013-03-01)
Platform: x86_64-w64-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=Chinese (Traditional)_Taiwan.950
[2] LC_CTYPE=Chinese (Traditional)_Taiwan.950
[3] LC_MONETARY=Chinese (Traditional)_Taiwan.950
[4] LC_NUMERIC=C
[5] LC_TIME=Chinese (Traditional)_Taiwan.950

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] stringr_0.6.2 XML_3.96-1.1

loaded via a namespace (and not attached):
[1] tools_2.15.3

謝謝




[程式範例]:
張貼能夠重現錯誤的程式碼，可以幫助版友更快的幫你解決問題

程式碼可貼於以下網站：http://ideone.com/http://codepad.orghttp://pastie.org/http://nopaste.info/http://pastebin.com/http://paste.plurk.comhttp://gist.github.com/http://nopaste.csie.org/--","R_Language"
"2791","M.1369363219.A.0C4","coccolegacy","情報","分析工具投票",2013-05-24 10:40:17,NA,NA,"在R-blogger看到KDnuggets最近正在舉辦關於資料分析工具的使用調查
大家有興趣的話可以去以下連結投下神聖的一票http://goo.gl/pQPz2目前R是第一名喔！

--","R_Language"
"2792","M.1369240964.A.EEC","Wush978","問題","Re: library(Rcmdr)後，select()會有錯誤",2013-05-23 00:42:41,NA,NA,"我在載入套件org.Sc.sgd.db的時候，

看到了警告訊息：

The following object is masked from ‘package:AnnotationDbi’:

    select

大意是說，你呼叫的select函數已經不是原本的AnnotationDbi::select，

而變成MASS::select。

所以你只要把原本的select改成AnnotationDbi::select應該就可以了。※ 引述《ckkt ([email<U+00A0>protected]#$)》之銘言：: [問題敘述]:: 我在載入Rcmdr後，用select(org.Sc.sgd.db, keys = ID, cols = c(""GO"", ""ENTREZID""): ，會出現Error in select(org.Sc.sgd.db, keys = ID, cols = c(""GO"", ""ENTREZID""),  ::   unused argument(s) (keys = ID, cols = c(""GO"", ""ENTREZID""), keytype = ""ORF""): 的錯誤訊息，請問這有辦法解決嗎?: [程式範例]:: library(org.Sc.sgd.db): ID = ""YHR055C"": select(org.Sc.sgd.db, keys=ID, cols = c(""GO"",""ENTREZID""), keytype=""ORF""): 上面這樣是不會有錯誤的: 但是在我 library(Rcmdr) 後再: select(org.Sc.sgd.db, keys=ID, cols = c(""GO"",""ENTREZID""), keytype=""ORF""): 就會出現錯誤: 請問是哪裡出錯了--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2793","M.1369234668.A.260","Wush978","心得","batch_fetch.R",2013-05-22 22:57:45,NA,NA,"[關鍵字]: R, SQL, data.table

由於最近我常常要從database讀取數千萬到數億筆資料到R,

所以我研究了如何方便和快速的讀取資料。

在資料量極大的狀況下，用R 常常會遇到用光memory的問題，

而我目前是用data.table這個套件來解決memory的問題。

目前我寫了一個batch_fetch函數，

對於DBI 介面的資料庫套件，如RSQLite, RMySQL, RPostgreSQL和ROracle，

應該都可以用... (但是我只有在RSQLite上用過)

source code 放在：https://gist.github.com/wush978/5626223歡迎任何指教，

也歡迎其他板友分享資料讀取相關的議題！

謝謝

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2794","M.1369203432.A.695","ckkt","問題","library(Rcmdr)後，select()會有錯誤",2013-05-22 14:17:10,NA,NA,"[問題敘述]:
我在載入Rcmdr後，用select(org.Sc.sgd.db, keys = ID, cols = c(""GO"", ""ENTREZID"")
，會出現Error in select(org.Sc.sgd.db, keys = ID, cols = c(""GO"", ""ENTREZID""),  :
  unused argument(s) (keys = ID, cols = c(""GO"", ""ENTREZID""), keytype = ""ORF"")
的錯誤訊息，請問這有辦法解決嗎?
[程式範例]:

library(org.Sc.sgd.db)
ID = ""YHR055C""
select(org.Sc.sgd.db, keys=ID, cols = c(""GO"",""ENTREZID""), keytype=""ORF"")
上面這樣是不會有錯誤的
但是在我 library(Rcmdr) 後再
select(org.Sc.sgd.db, keys=ID, cols = c(""GO"",""ENTREZID""), keytype=""ORF"")
就會出現錯誤
請問是哪裡出錯了

--","R_Language"
"2795","M.1369154047.A.C7C","Wush978","情報","查ip",2013-05-22 00:34:04,NA,NA,"[關鍵字]: R, ip

[出處]:http://heuristically.wordpress.com/2013/05/20/geolocate-ip-addresses-in-r/[重點摘要]:

- 這是一個線上服務的R client
- 輸入ip後可以看該ip的地區

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2796","M.1369153592.A.2CF","Wush978","筆記","Re: R的字串處理",2013-05-22 00:26:30,NA,NA,"最近我發現另一個函數： `sprintf`

比起`paste`, 已經會寫C 的版友可能會更喜歡這個函數。

基本用法：

```r
table_name <- ""demo""
row_number <- 100
sprintf( ""SELECT * FROM %s LIMIT %d"" , table_name, row_number )
```

另外他也指定要印出的位數：

```r
a <- rnorm(1)
sprintf( ""%4.2f %4.3f %4.4f"", a, a, a)
```

如果不是一批字串向量要做處理的話，我比較喜歡這個函數。

寫起來比`paste`快※ 引述《gsuper (Logit(odds))》之銘言：: ※ [本文轉錄自 Statistics 看板 #1CA5vrBC ]: 作者: gsuper (統計的巴比倫塔) 看板: Statistics: 標題: [程式] R的字串處理: 時間: Mon Jun 28 16:33:54 2010: [軟體程式類別]:: R: [程式問題]:: 資料處理: [軟體熟悉度]:: 中(3個月到1年): [問題敘述]:: 最近常在處理字串: 發現自己會的 function 很不夠用: 想多學點 function: 我列出一些我常用的: 希望能拋磚引玉: 請各位高手能教我一些高招: [程式範例]:: 前言 :: R 的字串處理 ,: 要小心注意 character , factor , numeric 這三種物件的誤轉換和混用: factor 是一種很討厭的物件 ,: 因為它在轉成數字和字串的時候 ,: 常常會變成跟原本不一樣的東西 ,: 建議資料處理的過程 ,: 預設用 matrix 和 character 兩種而避免使用 data.frame: ------------------------------------------------------------------: 1.字串黏合:   paste   (""A"",""B"",sep="""")               ---->>> ""AB"": 2.字串切割:   strsplit(""A.B"",split=""."",fixed=T)      ---->>> ""A"" ""B"": 3.精確穩合:   x <- c(""AB"",""AA""):   x %in% ""AB""                            ---->>> TRUE FALSE: 4.部份吻合 + (回傳 which):   x <- c(""AB"",""AA""):     grep(""B"",x)                          ---->>> 1:     grep(""A"",x)                          ---->>> 1 2:     grep(""B"",x,value=T)                  ---->>> ""AB"":     grep(""B"",x,value=T,invert=T)         ---->>> ""AA"":     grep(""C"",x)                          ---->>> integer(0):                                          #若目的是要找 index , 建議改用 grepl: 4-2.部份吻合 + (回傳判斷式):   x <- c(""AB"",""AA""):     grepl(""B"",x)                         ---->>> TRUE FALSE: 4-3.部份吻合 + (回傳位置) + (回傳??):   x <- c(""BBB"",""AAA"",""CCB""):   regexpr(""B"",x)                         ---->>>  1 -1  3 (第一次 ""hit"" 的位置):                                                   1 -1  1 (有無 ""hit""): 5.子字串:   substr(""human123456"",start=1,stop=5)   ---->>> ""human"":   !!注意!! 4-3 的 regexpr:   與這個 substr 結合起來 ,:   在寫 網頁Parser 的時候很好用:   regexpr 能定義出 statr=多少:   所謂的網頁Parser:   就是你去下載某些 html 檔案:   檢視原始碼:   然後找出你需要的資料:   再找出一些能 cut 的規則:   用 strsplit 搭配 TR , TD 之類的字串去切出你要的資料: 6.特定字元取代 (1st hit):   x <- ""AABB"":   sub(""A"",replacement=""C"",x)           ---->>>  ""CABB"": 6-2.全部特定字元取代 (global hit):   x <- ""AABB"":   gsub(""A"",replacement=""C"",x)           ---->>>  ""CCBB"": 7.計算字串長度:   ### 盡量別用這個 fuction:   x <- c(""A"",""AAA"",""AAAAA""):   nchar(x)                               ---->>> 1 3 5:   nchar(as.factor(x))                    ---->>> 1 1 1: 8.多重字元(串)貼合 (矩陣內):   x <- matrix(letters[1:6],2,3):   apply(x,1,paste,collapse="""")           ---->>> ""ace"",""bdf"":   apply(x,2,paste,collapse="""")           ---->>> ""abc"",""def"": 9. 字元反轉:    x <- c(""A B"",""*.""):    sapply(lapply(strsplit(as.character(x), NULL), rev), paste, collapse=""""):    [1] ""B A""  "".*"": 10.字元檢查:    x <- c(""A B"",""*.""):    unique(unlist(strsplit(as.character(x),split="""",fixed=T))):    [1] ""A""  "" ""  ""B""  ""*""  ""."": -----------------------------------------------------------: Regular expression : 字串模糊比對 , 或特定字母排列模式的抓取: 在R內: 基本上分成3種: Basic regular expression    (BRE)   --> extended = FALSE: Extended regularexpression  (ERE)   --> extended = TRUE (預設): perl-like                   (perl)  --> perl     = TRUE: 雙冒號代表我測試過且成功: 單冒號代表網路上抓下來或是測試失敗: --------------------------------------------------------------: 通用部分:  {,}:  *        :: {0, }   至少出現0次, 最多無限多次:  +        :: {1, }           1        無限多次:  ?        :: {0,1}           0            1:  [Aa]     :: A 或 a:  [^1-9]   :: not 1:9:  [1-9]    :: 1:9:  [a-z]    :: a b c ... z:  [A-Z]    :: A B C ... Z:  [a-zA-Z] :: 所有英文字母:  [W-z]    :: WXYZabc....z:  [w-Z]    :: 不可使用!:  (AB)     :: 括號一次收集多個字元  ### 一種延伸字串的寫法:              舉例 ::              x <- c(""company"",""companies"",):              可以用以下兩種寫法:              1. grep(""[company|companies]"",x):              2. grep(""compan(y|ies)"",x):              第二種在大資料的時候會比較快:  $        :: 字尾限定:  ^        :: 字首限定:  |        :: ""ABC|EFG"" --> grep(""ABC""or""DEF"",x):  .        :: 任意字元: -----------------------------------------------------: ERE , extended = TRUE: digit (數字):  \\d         :: [0-9]:  \\D         :: [^0-9]: [[:digit:]]  :: 同上: [^[:digit:]] :: 同上: blank (空白):  \\s         :: 能切開 "" "" 或 ""\t"":  \\S         :: 切開非空白及 tab 的字元: [[:blank:]]  :: 同上: [^[:blank:]] :: 同上: AlphaBet + Digit (正常字元):  \\w         :: [0-9a-zA-Z]:  \\W         :: [^0-9a-zA-Z]: [[:alnum:]]  :: 同上: [^[:alnum:]] :: 同上: AlphaBet (英文字元): [[:alpha:]]  :: 同上: [^[:alpha:]] :: 同上: 特殊符號: [[:punct:]]  :: ! "" # $ % & ' ( ) * + , - .:                 / : ; < = > ? @ [ \ ] ^ _ ` { | } ~: [^[:punct:]] :: 英文字 , 數字 (注意! , \t 和 \n 都會被切掉): 注意 ! 正斜線這個符號很容易與其他 regular expr 混淆: 必須仔細檢查 ""\"" 存在的字串: 可印符號: [[:print]] :: 所有字元 (數字,字母,特殊符號,空白):               \n , \t , \001 除外: 16進位字元: [[:xdigit:]] :: 16進位有關英文或數字:                 [0-9a-fA-F]: 大小寫英文字元: [[:upper:]]  :: 大寫英文字元 [A-Z]: [^[:upper:]] :: 非大寫 [^A-Z]: [[:lower:]]  :: 小寫 [a-z]: [^[:lower:]] :: ^[a-z]: 注意 ""\t"" 還是會被留下來: 空白和換行等: [[:space:]] :: "" "" , \t , \n , \f , \r:                (\f : 換行但不回到行頭):                (\r : 回到行頭並消除此行內所有的文字):                P.S. 這兩種不常用,當豆知識即可: [[:graph:]] :: [A-Za-z0-9]再加[[""punct""]]: ----------------------------------------------------------: perl = TRUE: \\w :     [A-Za-z0-9_]: \\W :     [^A-Za-z0-9_]: \\s :     [\t\n\r\f]: \\S :     [^\t\n\r\f]: \\d :     [0-9]: \\D :     [^0-9]: ----------------------------------------------------------: regular expression 工事中 (未完): 感覺這篇被我當筆記來用了: reference:: 1. http://www.rtfiber.com.tw/~changyj/: 2. http://www.stat.psu.edu/~dhunter/R/html/base/html/regex.html: ----------------------------------------------------------: 大小寫切換: TRUTH <- c(""Abc"",""ABC""): a <- gsub(""(\\w)"",""\\L\\1"",TRUTH,perl=TRUE)  ---> ""abc"",""abc"": b <- gsub(""^(\\w)"",""\\U\\1"",a,perl=TRUE)     ---> ""Abc"",""Abc"": 同上 , 非常神秘的 Bug !?: T123 <- c(""Tgfbr1"",""Cd320"",""Ndrg3"",""Aldoa"",""Bckdk"",""Tmed3"",""Hfe2""): > gsub( ""(\\w)"", ""\\L\\1"" , T123 , perl=T): [1] ""LTLgLfLbLrL1""       ""LCLdL3L2L0""         ""LNLdLrLgL3"": [4] ""LALlLdLoLa""         ""LBLcLkLdLk""         ""LTLmLeLdL3"": [7] ""LHLfLeL2"": > gsub( ""(\\w)"", ""\\L\\1"" , T123 , perl=TRUE): [1] ""tgfbr1""    ""cd320""     ""ndrg3""     ""aldoa""     ""bckdk""     ""tmed3"": [7] ""hfe2"": ---------------------------------------: 消除多餘空白: > x <- ""Hey! Apple           "": > gsub("" {2,}"","""",x): [1] ""Hey! Apple""        ### 容忍一個空白 , 但兩個以上至無限大則消除: ---------------------------------------: 在處理混合字串與數字的資料矩陣的時候: 常常需要在 data.frame 和 matrix 之間切換: 有時候會字串會被一些預設的空白字元夾住: ex:: ""1"" , ""15"" , ""333"": 經過轉換以後: ""  1"" , "" 15"" , ""333"" (fit 最長字串的長度): > DATA <- gsub(""^ *| *$"",as.matrix(DATA)): ---------------------------------------: ### 一些參考的 pattern: 1. ""^\\d+$""                  ### 純數字的欄位 ###: 2. ""^ *| *$""                 ### 字首字尾的空白(搭配 gsub) ###: 3. ""^[0][\\.]{0,1}[0]*$""     ### ""0"" ""0.0"" ""0.00"" ""0.000"" ""0.0000"" ,:                                  bug 是 ""0."" ""00"": ####################################################################: 放一些 linux 下的好用指令: 光用 R 來做字串處理不夠用: 原因在於若處理的檔案太大: 光是讀進 R 就累死人: 這邊主要是應用在檔案減肥: 文字檔案: rs123\t0|1:0000\tAAAA: rs456\t1|0:0000\tBBBB: ###################: 橫向: grep [-w : word]:      [-f : 給 pattern file]:      [-F : 精確比對]         ### 若要搜尋固定字串 , -F必下 (快超多): 1. cat 文字檔案|grep -w    'rs'      ### 沒東西: 2. cat 文字檔案|grep -w -F 'rs123'   ### 出第一行: 3. car 文字檔案|grep -w    '^rs.*$'  ### 二行皆出: ###################: 縱向: cut [-d : 用tab切開會是3個column的矩陣]: 1. cut -d'\t' -f1,2 原檔 > 新檔   ### 留下 1 and 2 columns: ###################: 橫向: sed: 1. sed -n '6,$p'    原檔 > 新檔   ### 從第六行開始 , print 至尾行:                                   ### 或可理解成, 把 1~5行切掉: 2. sed 's/:\S*/HAHA/g' 原檔 > 新檔   ### s=取代 , g=global:                                      ### 把紅色的正規 pattern 取代成綠色: ###################: 當檔案有 10000000 rows , 讀不進 R 怎辦?: 就算讀進 R , 資料太大一直 SWAP 電腦動不了怎麼辦?: 經過一番苦戰: 我建議以下的思考方式: 0. 先透過上述方式:    直接在終端機把檔案減肥: 1. 檔案列數 <- system(""wc -l 檔案"",intern=TRUE):    LOOP <- ceiling(檔案列數 / 5000):    for(g in 1:LOOP)                                    ### 用while可省前兩行:    { tmp <- read.table(檔案,skip=5000*(g-1),nrow=5000) ### 但我只熟 for:      expr(中間的各種處理):      write.table(tmp,g):      Sys.sleep(5)                                     ### 給一點時間讓電腦回氣:    }: 2. system(""cat 小檔案1 小檔案2 小檔案3 .... > 總檔案"")   ### 檔案 rbind(): 雖然不是最快的方法: 但 Over night 是一定可以把檔案處理完的: 以上--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2797","M.1368965670.A.2C8","Wush978","情報","2013-05-20 MLDM Monday 會前通知",2013-05-19 20:14:26,NA,NA,"Dear All：

2013/05/20 在創立方，會有我們第二十九次的 MLDM Monday 的聚會！

本次的聚會是分享，用R做資料的輸入和輸出的一些心得。

題目為「R Data Import/Export」

講者為Wush

在本次主題中會簡單介紹:

- R自身資料輸入與輸出
- SQL資料庫的輸入與輸出
- NoSQL資料庫的輸入與輸出
- 抓取Web資料
- 使用R套件抓取相關的Web資源

還請各位蒞臨指教，謝謝！

投影片的草稿在:http://rpubs.com/wush978/6209報名網址是在:http://www.meetup.com/Taiwan-R/events/118150652/TW.R 團隊 敬邀

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2798","M.1368774161.A.3BD","coccolegacy","情報","Re: 2013-05-13 MLDM Monday 會前通知",2013-05-17 15:02:38,NA,NA,"※ 引述《Wush978 (拒看低質媒體)》之銘言：: Dear All：: 2013/05/13 在創立方，會有我們第二十八次的 MLDM Monday 的聚會！: 本次的聚會是關於R的 googleVis 套件的分享: 題目為「googleVis 簡介」: 講者為孟坤(Mansun Kuo): 在本次主題中會簡單介紹:: - googleVis套件之操作: - 使用googleVis和幾種常見格式(xls, json...)之open data做視覺化的呈現: 還請各位蒞臨指教，謝謝！: TW.R 團隊 敬邀: 報名連結: http://www.meetup.com/Taiwan-R/events/114709132/大家好，首先先謝謝那天有來參與的各位
小弟把shiny的範例重新整理一下放到Rstudio的shiny server了，連結如下：http://spark.rstudio.com/mansunkuo/googleVis_shiny/大家可以隨意上去把玩(?)一番

另外我也將shiny的範例放進slidy裡，連結如下：http://goo.gl/aT4US內容不看沒關係，但是千萬別錯過最後一頁參考資料中Hans Rosling精彩的演講
為了騙大家點進來看我還是直接貼連結好了http://goo.gl/H1Gvx一定要看到最後一刻啊~~~


--","R_Language"
"2799","M.1368711943.A.2BB","Wush978","情報","Kaggle 上有關於學習R 的介紹",2013-05-16 21:45:39,NA,NA,"[關鍵字]: R, Kaggle

[出處]:https://www.kaggle.com/wiki/Tutorials[重點摘要]:

內容包含：

- 免費的電子書

- 免費的線上課程

- 一些介紹用R 做分析的網頁

- 書單

FYI

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2800","M.1368535418.A.B0D","Wush978","分享","R tips: 找不到套件嘛？找sos就對了",2013-05-14 20:43:31,NA,NA,"[關鍵字]: R, utility

今天意外得知一個R 的套件 sos。

給定關鍵字後，可以立馬搜尋所有相關的R 套件，並且給出相關的分數。

example:

```r
library(sos)
findFn(""hello world"") # 居然有八頁
```

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2801","M.1368430341.A.844","AceT","問題","用R實現數學三一律",2013-05-13 15:32:19,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的我有二個相同長度(長度 > 1000)的向量 x, y

我想要將 x, y 中的每一個元素,

依照數學三一律(a > b, a = b, a < b) 歸類為 1, 0, 2

該怎麼做呢 ?

舉例來說 x = {0, 1, 2, 3, 4, 5, 6}, y = {6, 5, 4, 3, 2, 1, 0}

我希望能得到 z = {2, 2, 2, 0, 1, 1, 1}



--","R_Language"
"2802","M.1368323156.A.15E","Wush978","分享","R tips: 自動升級套件",2013-05-12 09:45:53,NA,NA,"[關鍵字]: R

最近ubuntu上的R 已經可以更新到3.0.0了，

而原本2.15版本的套件都要重新安裝後才可以使用。

這裡介紹一個方法可以快速重新安裝CRAN上的套件：

1.  把2.15的套件複製到3.0 的目錄內

2.  在R console 執行：`update.packages(checkBuilt=TRUE, ask=FALSE)`

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2803","M.1368288675.A.D10","Wush978","情報","2013-05-13 MLDM Monday 會前通知",2013-05-12 00:11:11,NA,NA,"Dear All：

2013/05/13 在創立方，會有我們第二十八次的 MLDM Monday 的聚會！

本次的聚會是關於R的 googleVis 套件的分享

題目為「googleVis 簡介」

講者為孟坤(Mansun Kuo)

在本次主題中會簡單介紹:

- googleVis套件之操作
- 使用googleVis和幾種常見格式(xls, json...)之open data做視覺化的呈現

還請各位蒞臨指教，謝謝！

TW.R 團隊 敬邀

報名連結:http://www.meetup.com/Taiwan-R/events/114709132/--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2804","M.1368242595.A.562","Wush978","分享","Re: R tips: data.table",2013-05-11 11:23:12,NA,NA,"出處http://stackoverflow.com/questions/11486369/growing-a-data-frame-in-a-memory-efficient-manner這篇文章探討要如何有效率一筆一筆的增加資料的數量。

一般用`data.frame`的作法：

```r
res <- data.frame(x=rep(NA,1000), y=rep(NA,1000))
tracemem(res)
for(i in 1:1000) {
  res[i,""x""] <- runif(1)
  res[i,""y""] <- rnorm(1)
}
```

ps. 之前我不知道`tracemem`這個指令，所以才需要用C 來印記憶體位置

    `tracemem`會在記憶體被複製的時候，印出訊息

可以看到每次`[<-` 都會複製記憶體，導致當res 是很大的data.frame時效能低落

( 在我現在要處理的資料上，res 有600000  rows... )

目前我也完全不知道有什麼R 的方法，可以在增加資料上避免data.frame的複製。

( 所以我之前都寫Rcpp來對付這個問題，但是就是增加我的coding 量... )

直到我膝蓋中了一箭，看到data.table和這篇文章。

```r
library(data.table)
dt <- data.table(x=rep(0,1000), y=rep(0,1000))
tracemem(dt)
for(i in 1:1000) {
  dt[i,x := runif(1)]
  dt[i,y := rnorm(1)]
}
# note no mesage from tracemem
```

在我的資料上，利用data.table的效能提升至少十倍。※ 引述《Wush978 (拒看低質媒體)》之銘言：: [關鍵字]: R, large scale data: [出處]: http://cran.r-project.org/web/packages/data.table/index.html: [重點摘要]:: data.table很適合在資料很大的時候取代data.frame:: 我並沒有很詳細的研究底層和其他特性，但是至少data.table支援以下兩個功能：: - 支援in memory indexing: - 支援modification in place: 這讓我今天在處理大量資料時，效能大大提升。: 存取時間下降，記憶體使用量也下降。: 所以在此分享這個套件，給所有記憶體吃緊的版友們。--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2805","M.1368192520.A.853","Wush978","分享","R tips: data.table",2013-05-10 21:28:37,NA,NA,"[關鍵字]: R, large scale data

[出處]:http://cran.r-project.org/web/packages/data.table/index.html[重點摘要]:

data.table很適合在資料很大的時候取代data.frame:

我並沒有很詳細的研究底層和其他特性，但是至少data.table支援以下兩個功能：

- 支援in memory indexing
- 支援modification in place

這讓我今天在處理大量資料時，效能大大提升。

存取時間下降，記憶體使用量也下降。

所以在此分享這個套件，給所有記憶體吃緊的版友們。

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2806","M.1368081407.A.36D","MIZUYAMA","問題","更改levels的名稱",2013-05-09 14:36:43,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我在處理一個因子要改變的問題
目前資料庫假設有10個因子 A BＣDＥF...
假設今天我要把A因子重新命名為AA因子
其餘9個因子不變 想請問大家有甚麼好寫法
(除了for以外)

[程式範例]:


[關鍵字]:
其實有想過用recodes指令
但是R說沒有這個指令...讓我感到很疑惑
(好像是要引用car套件 不過我找不道 冏)

--
大學院研究的主題是時間∼直到他們將時間用盡

--","R_Language"
"2807","M.1368024927.A.A25","Wush978","情報","Taiwan R User Group 徵稿通知",2013-05-08 22:55:23,NA,NA,"[關鍵字]: R, Taiwan

R 是目前很火紅的統計分析語言，而Taiwan R User Group 於每周一晚上舉辦的ML/DM
Monday是一個希望能提供台灣的使用者們分享R或ML/DM上的故事。

我們在此誠徵關於Visualization(7月)以及Learning Algorithm(8月)的故事分享。

歡迎有興趣和有時間的朋友將你的Proposal寄至[email<U+00A0>protected]。

Taiwan R User Group 敬邀

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2808","M.1367805875.A.D99","DrRd","問題","Re: type III anova",2013-05-06 10:04:32,NA,NA,"感謝回應

不過我試了一下> contrasts(A) = contr.treatment> contrasts(A)# 40W、50W、60W是level的名稱，請不要管它XD2 3
40W 0 0
50W 1 0
60W 0 1> contrasts(A) = contr.helmert> contrasts(A)[,1] [,2]
40W   -1   -1
50W    1   -1
60W    0    2> contrasts(A) = contr.sum> contrasts(A)[,1] [,2]
40W    1    0
50W    0    1
60W   -1   -1

我以為正交是兩個向量的內積為0，但上面看起來

只有contr.treatment的是正交啊？※ 引述《andrew43 (apan)》之銘言：: 先解決MS不正確的問題。: 因為不平衡設計而採用 Type III SS 時，: 必須將類別變數轉換成正交的虛擬變數。: 不過，R 內建的虛擬變數轉換方式是 simple contrast: （在 R 中稱為 contr.treatment），: 而 simple contrast 並不是正交的。: R 有內建其它常用的正交轉換方式，: 包括 contr.sum 和 contr.helmert。: 回到例子，正確的方式是。: contrasts(A) <- contr.sum  # 更變虛擬變數: contrasts(B) <- contr.sum: m <- aov(Y~A*B): library(car): Anova(m, type=3)           # Type III SS: 即可得到正確的 MS。: 至於如何設立隨機因子就先不談，還蠻複雜的。: ※ 引述《DrRd (就這樣吧)》之銘言：: :  [問題類型]:: :  程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): :  [軟體熟悉度]:: :  新手(沒寫過程式，R 是我的第一次): :  [問題敘述]:: : 要進行type III的變異數分析: : 共有A、B兩個因子，其中A是固定效果，B是隨機效果: : 網路上有看到可以用car裡面的Anova(,type=3): : 但它沒有讓我指定何者為固定何者為隨機: : 算出來的結果也不正確: : 請問除了手算之外，有其他的套件可以算嗎？: : [程式範例]:: : aov.result = aov(Y~A*B): : summary(aov.result): :             Df Sum Sq Mean Sq F value  Pr(>F): : A            2  222.6  111.30   5.532 0.00711 **: : B            1    0.1    0.14   0.007 0.93447: : A:B          2   76.4   38.18   1.898 0.16169: : Residuals   45  905.4   20.12: : ---: : Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: : 用aov得到的結果A效果的F值是除上Residuals得到的: : 但是因為B是隨機效果，所以A的F值應該是要除以A:B: : 目前我是都用手算來得到A效果的真正的F值: : 我在網路上看到說可以用car:::Anova: : 所以我改用: : Anova Table (Type III tests): : Response: Y: :             Sum Sq Df F value    Pr(>F): : (Intercept) 544.44  1 27.0598 4.683e-06 ***: : A            22.03  2  0.5475    0.5822: : B            47.45  1  2.3584    0.1316: : A:B          76.37  2  1.8979    0.1617: : Residuals   905.40 45: : ---: : Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: : 改用這個之後Sum Sq都變了: : 也許是因為不等格的關係？--","R_Language"
"2809","M.1367783948.A.801","andrew43","問題","Re: type III anova",2013-05-06 03:59:05,NA,NA,"先解決MS不正確的問題。

因為不平衡設計而採用 Type III SS 時，
必須將類別變數轉換成正交的虛擬變數。
不過，R 內建的虛擬變數轉換方式是 simple contrast
（在 R 中稱為 contr.treatment），
而 simple contrast 並不是正交的。

R 有內建其它常用的正交轉換方式，
包括 contr.sum 和 contr.helmert。

回到例子，正確的方式是。
contrasts(A) <- contr.sum  # 更變虛擬變數
contrasts(B) <- contr.sum
m <- aov(Y~A*B)
library(car)
Anova(m, type=3)           # Type III SS
即可得到正確的 MS。

至於如何設立隨機因子就先不談，還蠻複雜的。※ 引述《DrRd (就這樣吧)》之銘言：:  [問題類型]::  程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來):  [軟體熟悉度]::  新手(沒寫過程式，R 是我的第一次):  [問題敘述]:: 要進行type III的變異數分析: 共有A、B兩個因子，其中A是固定效果，B是隨機效果: 網路上有看到可以用car裡面的Anova(,type=3): 但它沒有讓我指定何者為固定何者為隨機: 算出來的結果也不正確: 請問除了手算之外，有其他的套件可以算嗎？: [程式範例]:: aov.result = aov(Y~A*B): summary(aov.result):             Df Sum Sq Mean Sq F value  Pr(>F): A            2  222.6  111.30   5.532 0.00711 **: B            1    0.1    0.14   0.007 0.93447: A:B          2   76.4   38.18   1.898 0.16169: Residuals   45  905.4   20.12: ---: Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: 用aov得到的結果A效果的F值是除上Residuals得到的: 但是因為B是隨機效果，所以A的F值應該是要除以A:B: 目前我是都用手算來得到A效果的真正的F值: 我在網路上看到說可以用car:::Anova: 所以我改用: >library(car): >Anova(aov.result,type=3): Anova Table (Type III tests): Response: Y:             Sum Sq Df F value    Pr(>F): (Intercept) 544.44  1 27.0598 4.683e-06 ***: A            22.03  2  0.5475    0.5822: B            47.45  1  2.3584    0.1316: A:B          76.37  2  1.8979    0.1617: Residuals   905.40 45: ---: Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1: 改用這個之後Sum Sq都變了: 也許是因為不等格的關係？--","R_Language"
"2810","M.1367751468.A.81F","DrRd","問題","Re: type III anova",2013-05-05 18:57:46,NA,NA,"[問題類型]:

 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)
 [軟體熟悉度]:
 新手(沒寫過程式，R 是我的第一次)

 [問題敘述]:
要進行type III的變異數分析
共有A、B兩個因子，其中A是固定效果，B是隨機效果
網路上有看到可以用car裡面的Anova(,type=3)
但它沒有讓我指定何者為固定何者為隨機
算出來的結果也不正確
請問除了手算之外，有其他的套件可以算嗎？

[程式範例]:
aov.result = aov(Y~A*B)
summary(aov.result)
            Df Sum Sq Mean Sq F value  Pr(>F)
A            2  222.6  111.30   5.532 0.00711 **
B            1    0.1    0.14   0.007 0.93447
A:B          2   76.4   38.18   1.898 0.16169
Residuals   45  905.4   20.12
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

用aov得到的結果A效果的F值是除上Residuals得到的
但是因為B是隨機效果，所以A的F值應該是要除以A:B
目前我是都用手算來得到A效果的真正的F值

我在網路上看到說可以用car:::Anova
所以我改用

>library(car)
>Anova(aov.result,type=3)

Anova Table (Type III tests)

Response: Y
            Sum Sq Df F value    Pr(>F)
(Intercept) 544.44  1 27.0598 4.683e-06 ***
A            22.03  2  0.5475    0.5822
B            47.45  1  2.3584    0.1316
A:B          76.37  2  1.8979    0.1617
Residuals   905.40 45
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

改用這個之後Sum Sq都變了
也許是因為不等格的關係？

--","R_Language"
"2811","M.1367668078.A.1D9","andrew43","問題","Re: 請問有關R畫圖?",2013-05-04 19:47:56,NA,NA,"※ 引述《sinasass (廣廣)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 各位大大好，我現在有一筆資料想畫成折線圖: 其中X軸為6個物件，Y軸為這6個物件所佔比例: 不考慮用圓餅圖、長條圖等等來表示: 我想畫的是在XY平面上有一個折線: X軸為6個物件名稱 Y軸為所占比例: XY平面上將會有6個點代表個物件的比例 進而連成折線: 我試過plot point barplot 似乎都不是我想要的效果: 麻煩各位大大！謝謝重點是先不要畫 x 軸, 再把 x 軸以 axis(1, labels=...) 畫上去.

x.num <- 1:3
x.name <- c(""A"",""B"",""C"")
y <- c(3,9,5)
plot(
  y ~ x.num,
  type =""l"",
  xlab = ""Object"",
  ylab = ""Frequency"",
  xaxt = ""n""
)
axis(1, labels=x.name, at=x.num)

這樣即可以 xy.plot 的型式畫出自定的 x 軸名稱.

--","R_Language"
"2812","M.1367663017.A.677","sinasass","問題","請問有關R畫圖?",2013-05-04 18:23:34,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
各位大大好，我現在有一筆資料想畫成折線圖
其中X軸為6個物件，Y軸為這6個物件所佔比例
不考慮用圓餅圖、長條圖等等來表示

我想畫的是在XY平面上有一個折線
X軸為6個物件名稱 Y軸為所占比例

XY平面上將會有6個點代表個物件的比例 進而連成折線
我試過plot point barplot 似乎都不是我想要的效果

麻煩各位大大！謝謝


[程式範例]:
無

[關鍵字]:

--","R_Language"
"2813","M.1367637726.A.90C","Wush978","討論","R 什麼時候會複製物件",2013-05-04 11:22:02,NA,NA,"[問題類型]:
效能諮詢(我想讓R 跑更快)

[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:
R 在怎樣的情況下會在記憶體中複製物件

[你的答案]:
我最近在研究這個問題，

我把研究結果也一併丟到stackoverflow:http://stackoverflow.com/questions/15759117/what-exactly-is-copy-on-modify-semantics-in-r-and-where-is-the-canonical-source但是我不知道這樣做對不對。

結論是：R 除了copy-on-modify外，也只有在第一次的modification會複製物件

(無論該物件的reference有幾個)

[關鍵字]:
R, performance, copy-on-modify

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2814","M.1367576683.A.4D3","Wush978","分享","R tips: shiny and calendar",2013-05-03 18:24:39,NA,NA,"[關鍵字]: R, shiny, jquery

[出處]:https://github.com/marcionicolau/shinyExt我今天想要在shiny 堶惟鎣query ui, 但是失敗了。

後來看到這個github上的套件，

讓開發者可以在shiny app 堶探O入如datepicker 之類的UI，

並且它也已經把相關功能包成R functions。

我自己寫個小測試：http://glimmer.rstudio.com/wush978/shiny-jquery-calendar/--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2815","M.1367571608.A.76C","EXILESPACER","情報","2013-05-06 TW-R MLDM Monday 會前通知",2013-05-03 17:00:06,NA,NA,"[關鍵字]:       R, Taiwan R

[出處]:http://www.meetup.com/Taiwan-R/events/113846482/[重點摘要]:


2013/05/06 在創立方 -- 政大公企中心(台北市金華街187號)西樓WB05

會有我們第二十七次的 MLDM Monday 的聚會！

本次的聚會是關於 tradeR 系列的分享

題目為「quantmod 套件簡介 part 2」

講者為 c3h3

在本次的 warmup session 講者將公佈上次 spideR 系列演講中的習題解答http://www.youtube.com/watch?v=P3Xm_JFmh04&list=PLM7HGQkDNOHuRDz-59vgGBo8snlXidiy4好讓大家可以運用抓回來的資料，來現場練習一下 quantmod 的一些基本功能

此外，其實講者在去年 11 月時也曾講過一次 quantmod 主題的演講http://www.youtube.com/watch?v=PYcikAn2BpA&list=PLM7HGQkDNOHtUpVGfwhBMkBITovffU6g0不過有聽眾反應，那次的演講稍微講的太快了

很多基礎的功能與套件都尚未有完整的介紹

因此，在本次的演講中，講者將重新的從基礎開始介紹 quantmod 這個套件

請大家在聽演講前，可以準備好：

(1)  您的筆電
(2)  安裝好 RStudio 和 quantmod
(3)  把上次 spideR 系列的 code 看一下，習題稍微作一下https://bitbucket.org/tw_use_r/20130325-mldm-spider以便現場能跟著講者一起操作


TW.R 團隊 敬邀



--","R_Language"
"2816","M.1367473152.A.659","DrRd","問題","type III anova",2013-05-02 13:39:09,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:要進行type III的變異數分析共有A、B兩個因子，其中A是固定效果，B是隨機效果網路上有看到可以用car裡面的Anova(,type=3)但它沒有讓我指定何者為固定何者為隨機算出來的結果也不正確請問除了手算之外，有其他的套件可以算嗎？[程式範例]:library(car)mod = aov(y~a*b)Anova(mod,type=3)--","R_Language"
"2817","M.1367471400.A.50E","Wush978","情報","Coursera 的新的free online class",2013-05-02 13:09:56,NA,NA,"[關鍵字]: Coursera, data scientist, R, python

[出處]:https://www.coursera.org/course/datasci[重點摘要]:

現在又有一個新的免費的線上課程可以參加了！

課程是由 University of Washington 的 Bill Howe 主講

作業中會用到R, Python, SQL。

有興趣的人請看https://www.coursera.org/course/datasci--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2818","M.1367341006.A.7CD","roqe","問題","input 整個資料夾",2013-05-01 00:56:42,NA,NA,"[問題類型]:

程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)


[軟體熟悉度]:

入門(寫過其他程式，只是對語法不熟悉)


[問題敘述]:

我有一個資料夾，裡面有一堆要 input 的檔案

我希望能指定資料夾路徑，然後 R 會自己一個一個吃進來


[程式範例]:


[關鍵字]: data input


--█████████████████There will NEVER be a day, when I won't think of you.█████████████████--","R_Language"
"2819","M.1366997981.A.40D","Wush978","情報","R tips: RSQLite",2013-04-27 01:39:38,NA,NA,"[關鍵字]: R, database, SQLite

RSQLite 提供一個簡便的介面讓R User可以處理超過記憶體的表格。

並且使用者不需要事先架設任何database system。

ps. 若同時只有單一程式會改資料庫時，SQLite的效能是非常棒的

也算是一個簡易的學習DBI 介面的機會。

熟悉DBI 介面後，要使用MySQL 、PostgreSQL等資料庫系統也很像。

---

事實上我個人建議，如果表格的大小超過可用記憶體的一半，

就要考慮使用database system了。

因為R 在修改table的時候並不一定是直接修改原本的記憶體，

而是會複製一份副本出來。所以記憶體很容易不小心被吃光後就...

---

以下做個範例用法：

```r
library(RSQLite)
db.path <- ""test.db""
db <- dbConnect(""SQLite"", db.path)
dbWriteTable(db, ""iris"", iris)
dbDisconnect(db)
```

iris 就會被寫入""test.db""

```r
db <- dbConnect(""SQLite"", db.path)
iris <- dbReadTable(db, ""iris"")
dbDisconnect(db)
```

這樣可以再把iris從""test.db""中讀回記憶體

批次處理資料則可以使用append指令

```r
library(RSQLite)
db.path <- ""test.db""
db <- dbConnect(""SQLite"", db.path)
dbWriteTable(db, ""big_data"", big_data.part1)
dbWriteTable(db, ""big_data"", big_data.part2, append=TRUE)
# ...
dbDisconnect(db)
```

另外注意預設似乎會包含row.names

之後只要建好index 後，仍然可以高效的做選取

```r
library(RSQLite)
db.path <- ""test.db""
db <- dbConnect(""SQLite"", db.path)
res <- dbSendQuery(db, ""SELECT Sepal_Length FROM iris WHERE Species =
'setosa'"")
data <- fetch(res) # 這裡也許需要讀取很多次，看資料量
dbDisconnect(db)
```



--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2820","M.1366994586.A.2F1","lung7735","問題","抽取特定的資料",2013-04-27 00:43:04,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前我有10個class bugs的檔案，因為記憶體不夠，

所以只能一個一個load進去再進行運算，

不過目前卡在不知道要怎麼批次把要的資料抽出來

只有單一一個的話我知道可以用$，可是要批次處理10個的話就不知道怎麼寫了


[程式範例]:


[關鍵字]:


--","R_Language"
"2821","M.1366969412.A.93D","youngce","問題","RStudio為什麼好像沒什麼人用呢??",2013-04-26 17:43:30,NA,NA,"今天發現好用的RStudio IDE

其功能除了保留字顯示與智慧提示外

還有Muti-Plot等功能

但在網路上搜尋相關的資料卻相當的少

想請問各位前輩,RStudio是不是有什麼重大的Bug呢??




--","R_Language"
"2822","M.1366907331.A.E27","Wush978","情報","2013-04-29 TW-R MLDM Monday 會前通知",2013-04-26 00:28:48,NA,NA,"[關鍵字]: R, Taiwan R

[出處]:http://www.meetup.com/Taiwan-R/events/115376962/[重點摘要]:

Dear All：

2013/04/29 在創立方，會有我們第二十六次的 MLDM Monday 的聚會！

本次的聚會是關於R 的使用。

題目為「關於R Package的二三事情」。

講者為 Wush Wu。

以下是演講的簡介和大綱：

# 簡介

近幾年來R 語言在工具上有重大的進展，最著名的算是針對R 所設計的IDE: Rstudio。

除此之外，有許多開發者也貢獻了方便的套件來開發R Package。

這次聚會除了簡單介紹如何使用R Package外，

還會現場Demo，利用最近發展的工具來快速開發R Package。

最後講者會和大家分享發佈R Package到CRAN的經驗。

歡迎有興趣的R User們前來一同分享經驗。

# 大綱

## R Package 簡介
## 使用R Package
- 搜尋
- 安裝
- 閱讀說明
- 使用
## 建立R Package(Demo)
- R Package 結構簡介
- 使用`Rstudio`建立R Package
- 使用`Rstudio`安裝R Package
- 使用`roxygen2` 建立文件
- 使用`R CMD check`編寫測試
- 使用`R CMD build`發佈R Package

ps. 不克前來，想要收看Youtube直撥的網友，也歡迎追蹤Taiwan R User Group在
Google+的官方帳號：https://plus.google.com/109114569120236882693/posts?partnerid=ogpy0TW.R 團隊 敬邀

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2823","M.1366899628.A.459","CKAXI","問題","想畫一張Sample size和Power關係的圖",2013-04-25 22:20:26,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
新手(沒寫過程式，R 是我的第一次)

[問題敘述]:
在已知aplpha, effect size的情況下，畫出sample size和power之間關係的圖

目前看來應該可以使用pwr這個套件來完成，在工作空間中可以看到power及其對應的

sample size，但是length(power)卻等於7，導致無法畫圖

麻煩各位指點一下，謝謝！

[程式範例]:samplesize <- c(2:200)power <- pwr.t.test(n = samplesize, d = 0.5, sig.level = 0.05, power = NULL,type = c(""two.sample""))power
length(power)

--","R_Language"
"2824","M.1366810958.A.DCE","Wush978","分享","R tips: Progress bar",2013-04-24 21:42:33,NA,NA,"[關鍵字]: R

當使用R 跑一些耗時的回圈的時候，

利用ProgressBar可以即時了解跑的狀況：

```r
n <- 100
pb <- txtProgressBar(max = n, style=3)
for(i in 1:n) {
  Sys.sleep(0.1)
  setTxtProgressBar(pb, i)
}
close(pb)
```

另外也有GUI版本的，請?txtProressBar察看更多的相關工具

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2825","M.1366695908.A.442","DrRd","問題","在匯出的table中加入資料",2013-04-23 13:45:05,NA,NA,"文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除新手(沒寫過程式，R 是我的第一次)[問題敘述]:使用write.table匯出一個相關矩陣的csv檔是否可以在匯出的檔案中第一行第一個位置加入一個「,」因為現在用excel去讀這個write.table的csv檔時會變成以下這個樣子var1 var2 var3var1 r    r    rvar2 r    r    rvar3 r    r    r但我想要的是var1 var2 var3var1 r    r    rvar2 r    r    rvar3 r    r    r--","R_Language"
"2826","M.1366485896.A.16B","songhome","程式","Fw: 請問一下R的時間轉換",2013-04-21 03:24:55,NA,NA,"※ [本文轉錄自 Statistics 看板 #1HSkY4Pq ]作者: songhome (爽轟) 看板: Statistics
標題: [程式] 請問一下R的時間轉換
時間: Sun Apr 21 03:12:00 2013


------------------------------------------------------------------------


[軟體程式類別]:
R

[程式問題]:
資料處理

[軟體熟悉度]:
低(1~3個月)

[問題敘述]:
在R裡面可以用Sys.time()取得現在的時間
而且每次取出的時間存之後還可以直接減掉算時間差

現在有一組資料 有記錄 日期""2013/4/21""  時""03"" 分""50"" 秒""10""
等四個變數，可以存成一條有四個元素的向量
(即[1] ""2013/4/21"" ""03"" ""50"" ""10"")

請問一下要用甚麼指令轉換才能變成像Sys.time那樣可以任兩筆算時間差呢?

謝謝

[程式範例]:雖然張貼程式很可怕，但基本上有些程式還是要張貼才能解決-----------------------------------------------------------------------------

--","R_Language"
"2827","M.1366434111.A.EE8","Wush978","問題","sendmailR 要如何使用阿",2013-04-20 13:01:47,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:
開發者(有撰寫R 的套件經驗)

[問題敘述]:

我想要用sendmailR來寄發email 給 gmail信箱

ps. RMessenger不能夾帶檔案，GG。
    難道我該弄個R GoogleDrive之類的東西了？(誤)

[程式範例]:

```r
from <- sprintf(""<[email<U+00A0>protected]\\%s>"", Sys.info()[4])
to <- ""<[email<U+00A0>protected]>""
subject <- ""Hello from R""
body <- list(""It works!"", mime_part(iris))
sendmail(from, to, subject, body,
         control=list(smtpServer=""ASPMX.L.GOOGLE.COM""))
```

錯誤訊息：

```
Error in wait_for(250) :
  SMTP Error: 5.7.1 [61.???.??.221] The IP you're using to send mail is not
authorized to
```

[關鍵字]:
R, email

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2828","M.1366433414.A.6D6","anovachen","問題","以R軟體解ODE (傳染病數學模型)",2013-04-20 12:50:12,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
某傳染病流行病學課本的公式：
n: size of the population
S: proportion of n that is susceptible
I: proportion of n that is currently infected and infectious
R: proportion of n that is immune.
D: 從感染到痊癒所需的時間
β：接觸患者後感染的機率
κ：單位時間內平均一個人會接觸幾個人

S_t+1 = S_t - βκS_tI_t
I_t+1 = I_t + βκS_tIt - I_t/D
R_t+1 = R_t + I_t/D
(↑這些叫做差分方程，對吧？)

dS/dt = - βκS_tI_t
dI/dt = βκS_tI_t - I_t/D
dR/dt = I_t/D
(↑要解出給定時間的S,I,R，應該就是解微分方程？)

請問如果要把dS/dt, dI/dt, dR/dt在同一張圖上作圖，該怎麼做？
另外還有S, I, R對時間作圖。
最主要是想了解dI/dt是否會在某段時間之後趨近於0。

以下程式執行結果跟預期的差很多...
不知道是不是function沒寫對？

[程式範例]:
課本給的參數是beta=0.15(/人), kapp=12(人/週), D=1(週), 時間單位是週
初始條件：族群總人數為1000人，有1人感染。http://pastie.org/7682058library(deSolve)
pars <- c(beta=0.15, kappa=12, D=1, pop_size=1000)
yini <- c(I=1, S=999, R=0)
times <- seq(0, 25, by=1)
infection <- function(Time, State, Pars) {
 with(as.list(c(State, Pars)), {
 dS <- -beta*kappa*(S/pop_size)*(I/pop_size)
 dI <- beta*kappa*(S/pop_size)*(I/pop_size)-((I/pop_size)/D)
 dR <- (I/pop_size)/D
 return(list(c(dS, dI, dR)))
 })
 }
out<- ode(func=infection,y=yini,parms=pars,times=times)
matplot(out[,""time""], out[,2:4], type = ""l"", xlab = ""week"", ylab = ""Rate"",
main = ""Infection"", lwd = 2)
legend(""topright"", c(""dS/dt"", ""dI/dt"", ""dR/dt""), col = 1:3, lty = 1:2)

[關鍵字]:
R, ODE, infection epidemiology, mathematical model

PS:
我自己用excel做的簡易計算結果在這邊(主要是要看dI/dt對時間作圖的粗略結果)
，可以參考看看。http://www.filethief.com/download/1983/epi_math.xlsx.html感謝指教！

--","R_Language"
"2829","M.1366433180.A.D88","Wush978","情報","COSCUP 2013: call for proposal",2013-04-20 12:46:17,NA,NA,"[關鍵字]:
R, conference, open source, Taiwan

[出處]:http://blog.coscup.org/2013/04/coscup-2013-call-for-proposal.html[重點摘要]:

COSCUP是台灣大型的Open Source聚會。

由於R 本身也是Open Source的一部份，

加上近期Big Data議題的興起，

資料處理變成一種顯學。

不知道大家有沒有用R 解決什麼問題，想要跟台灣的使用者們分享呢？

---

若有版友知道更多的相關資訊，還懇請幫忙補充

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2830","M.1366432890.A.B34","Wush978","討論","一張圖內顯示兩種不同的y-scale",2013-04-20 12:41:22,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:開發者(有撰寫R 的套件經驗)[問題敘述]:

有時候為了節省空間，或是方便比較，

需要把兩個scale不同的圖重疊放置。

我現在有R 原生的solution，

但是我希望有更好的解答(例如有專門做類似事情的套件)

如ggplot2等高階繪圖套件有沒有類似的功能。

[你的答案]:

```r
par(mai = c(1.36, 1, 1, 1.36))
x <- 1:20
plot(x, log(x), type='l')
par(new=TRUE)              # key: ask for new plot without erasing old
plot(x, sqrt(x), type='l', col='red', xlab="""", yaxt=""n"", ylab="""")
mtext(""sqrt(x)"", side=4, padj=1, line=1.5)
axis(4)
```r

[關鍵字]:

R, plot, visualization

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2831","M.1366307496.A.305","johnsonla","問題","Re: Shiny 套件請益",2013-04-19 01:51:30,NA,NA,"※ 引述《acecc (cc)》之銘言：: [問題類型]:: 程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來): [軟體熟悉度]:: R的基本使用沒問題，但使用Shiny套件是完全的新手...: 先寫個基本款來試試看...: [問題敘述]:: 程式做的事情很單純，: 1. upload 一個檔案: 2. 程式對每個Column做簡單的線性預測: 3. 將結果download下來: 程式我有丟上Glimmer Server: http://glimmer.rstudio.com/glen/Pred/: 並附上一個簡易的測試檔案，可以用此檔案直接upload，並算出結果。: https://www.asuswebstorage.com/navigate/s/14B96034DC784748976F45174C9F274BY: 但我有三個技術上的問題想克服，請教各位~: 1. 若同時間此程式有好幾個人同時使用，那麼很有可能會download到別人的output.: 例如:A先跑完但還沒做download的動作，此時B也上傳了另一個檔案跑了另一個output出來:      那麼這時候A 與 B去download檔案的時候，就都會download到B產生的output:      請問我要怎麼能讓每個End user都能下載到自己產生的output?:      這是server端的問題，還是我程式寫法的問題?我的解決辦法是每次使用者開啟網頁就隨機生成一個暫存檔(tempRD1)，
然後把資料寫到暫存檔裡面(run datasetInput時順便寫入)，
當使用者要下載時再從暫存檔裡面抓(readRDS(tempRD1))。

大概可以經由以下code實踐 (未經測試 汗 = ="")
shinyServer(function(input, output) {
...

   tempRD1 <- paste(tempfile(), "".RData"", sep="""")
   datasetInput <- reactive({
                out <- switch(input$dataset, ""FIT"" = fit)
                saveRDS(out, tempRD1)
                out
    })
   output$downloadData <- downloadHandler(
     filename = function() { paste(input$dataset, '.csv', sep='') },
     content = function(file) {
           out <- readRDS(tempRD1)
       write.csv(out, file)
     }
   )
}): 2. 請教一下有沒有辦法讓流程縮短為: a. upload 一個檔案: b. 程式對每個Column做簡單的線性預測且自動跳出結果問你要不要download:    而不用讓End user再去點download?:    Shiny套件能做到這個效果嗎?就我對Shiny 0.4.0的印象，沒有這個預設功能，
不過這樣的效果還是做得到(頗麻煩)，我想大概的流程如下：
1. 判斷程式甚麼時候跑完
2. 利用conditionalPanel(), 當程式跑完跳出一個yes/no box
   (note: Shiny 目前沒有yes/no box, 你會用到javascript: confirm()): 3. 有沒有辦法讓程式跑完自動將結果寄到指定的的E mail信箱而不用手動下載。那你還是要先填email地址啊...
你是想要多一個欄位填email，然後按下發送鍵這樣?
你可能需要這兩個套件: {sendmailR} and {shinyIncubator}
然後利用sendmail() + actionBotion() 完成你要的效果: [程式範例]:: 因為有兩段程式碼，我就直接貼在這兒了!: #######ui.R: library(shiny): shinyUI(pageWithSidebar(:   headerPanel(""Hello!""),:   sidebarPanel(:     fileInput('file1', 'Input Data',:               accept=c('text/csv', 'text/comma-separated-values,text/plain')),:     tags$hr(),:     selectInput(""dataset"", ""Download:"",:                 choices = ""FIT""),:     downloadButton('downloadData', 'Download')),:   mainPanel(:     tableOutput(""contents""):   ): )): #######server.R: library(shiny): shinyServer(function(input, output) {:   output$contents <- renderTable({:     inFile <- input$file1:     if (is.null(inFile)):       return(NULL):     y <- read.csv(inFile$data, header= TRUE):     data <- apply(y, 2, cumsum):     fit <<- apply(data, 2, function(z){:       z <- z[!is.na(z)]:       x <- 1:length(z):       tempfit <- lm(z[-(1:6)] ~ x[-(1:6)]):       coef(tempfit)[1] + coef(tempfit)[2] * 1:70:     }):     fit:   }):   #browser():   datasetInput <- reactive({:     switch(input$dataset,:            ""FIT"" = fit):   }):   output$table <- renderTable({:     datasetInput():   }):   output$downloadData <- downloadHandler(:     filename = function() { paste(input$dataset, '.csv', sep='') },:     content = function(file) {:       write.csv(datasetInput(), file):     }:   ): }): 有任何不清楚的地方麻煩再告訴我: 感謝各位!My Shiny app:http://glimmer.rstudio.com/tchsieh/inext/--","R_Language"
"2832","M.1366293947.A.8D3","acecc","問題","Shiny 套件請益",2013-04-18 22:05:45,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
R的基本使用沒問題，但使用Shiny套件是完全的新手...
先寫個基本款來試試看...

[問題敘述]:
程式做的事情很單純，
1. upload 一個檔案
2. 程式對每個Column做簡單的線性預測
3. 將結果download下來

程式我有丟上Glimmer Serverhttp://glimmer.rstudio.com/glen/Pred/並附上一個簡易的測試檔案，可以用此檔案直接upload，並算出結果。https://www.asuswebstorage.com/navigate/s/14B96034DC784748976F45174C9F274BY但我有三個技術上的問題想克服，請教各位~

1. 若同時間此程式有好幾個人同時使用，那麼很有可能會download到別人的output.
例如:A先跑完但還沒做download的動作，此時B也上傳了另一個檔案跑了另一個output出來
     那麼這時候A 與 B去download檔案的時候，就都會download到B產生的output

     請問我要怎麼能讓每個End user都能下載到自己產生的output?
     這是server端的問題，還是我程式寫法的問題?

2. 請教一下有沒有辦法讓流程縮短為
a. upload 一個檔案
b. 程式對每個Column做簡單的線性預測且自動跳出結果問你要不要download
   而不用讓End user再去點download?
   Shiny套件能做到這個效果嗎?

3. 有沒有辦法讓程式跑完自動將結果寄到指定的的E mail信箱而不用手動下載。



[程式範例]:
因為有兩段程式碼，我就直接貼在這兒了!

#######ui.R
library(shiny)

shinyUI(pageWithSidebar(
  headerPanel(""Hello!""),
  sidebarPanel(
    fileInput('file1', 'Input Data',
              accept=c('text/csv', 'text/comma-separated-values,text/plain')),
    tags$hr(),
    selectInput(""dataset"", ""Download:"",
                choices = ""FIT""),
    downloadButton('downloadData', 'Download')),
  mainPanel(
    tableOutput(""contents"")
  )
))

#######server.R
library(shiny)
shinyServer(function(input, output) {
  output$contents <- renderTable({
    inFile <- input$file1
    if (is.null(inFile))
      return(NULL)
    y <- read.csv(inFile$data, header= TRUE)
    data <- apply(y, 2, cumsum)
    fit <<- apply(data, 2, function(z){
      z <- z[!is.na(z)]
      x <- 1:length(z)
      tempfit <- lm(z[-(1:6)] ~ x[-(1:6)])
      coef(tempfit)[1] + coef(tempfit)[2] * 1:70
    })
    fit
  })
  #browser()
  datasetInput <- reactive({
    switch(input$dataset,
           ""FIT"" = fit)
  })
  output$table <- renderTable({
    datasetInput()
  })

  output$downloadData <- downloadHandler(
    filename = function() { paste(input$dataset, '.csv', sep='') },
    content = function(file) {
      write.csv(datasetInput(), file)
    }
  )
})



有任何不清楚的地方麻煩再告訴我
感謝各位!

--","R_Language"
"2833","M.1366255671.A.C7F","MIZUYAMA","問題","Re: 用R讀取SAS檔",2013-04-18 11:27:47,NA,NA,"自問自答....
基本上?read.ssd寫的看的不是很懂
後來找到國外一位老外也有類似的問題
看到他貼在網路上的訊息才摸索出來

指令:read.ssd()
read.ssd(libname, sectionnames,
        tmpXport=tempfile(), tmpProgLoc=tempfile(), sascmd=""sas"")

1.libnames:所要讀取檔案的路徑

2.sectionnames:所要讀取檔案的名稱

3.tmpXport=tempfile() & tmpProgLoc=tempfile()
  沒用到其實我也不太清楚

4.sascmd:SAS安裝檔案的路徑
         執行的電腦要有安裝SAS才可以使用

 [程式範例]:
假設要讀取的檔案放在D:/files  檔案名Ad97.sasbdat> local({pkg <- select.list(sort(.packages(all.available = TRUE)))+ if(nchar(pkg)) library(pkg, character.only=TRUE)})
>datahome<-""C:/Program Files/SAS/SASFoundation/9.2/sas.exe""> dd<-read.ssd(""D:/files"",""Ad97"",sascmd=datahome"")但是換成另外一個SAS檔案就不能讀取了
出現
SAS failed.  SAS program at C:\Users\user\AppData\Local\Temp\
RtmpYH2ZDb\file4ae13d6c.sas
The log file will be file4ae13d6c.log in the current directory
Warning messages:
1: In file.symlink(oldPath, linkPath) : 這個平台不支援符號連結
2: In read.ssd(""D:/files"", ""other_data"",
sascmd = ""C:/Program Files/SAS/SASFoundation/9.2/sas.exe"") :
  SAS return code was 2

推測可能是與SAS檔案形式有關...

--","R_Language"
"2834","M.1366248632.A.EA2","DrRd","問題","data.frame內的資料類型",2013-04-18 09:30:29,NA,NA,"[問題類型]:程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)[軟體熟悉度]:請把以下不需要的部份刪除入門(寫過其他程式，只是對語法不熟悉)[問題敘述]:請問能不能用一個指令查詢一個data.frame內所有欄位的資料類型--","R_Language"
"2835","M.1366083170.A.D0B","yangchichuan","問題","as.real",2013-04-16 11:32:47,NA,NA,"[問題敘述]:請簡略描述你所要做的事情，或是這個程式的目的最新版的R竟然找不到 as.real()這個函數
有人知道原因是什麼
謝謝

--","R_Language"
"2836","M.1366080875.A.67C","MIZUYAMA","問題","用R讀取SAS檔",2013-04-16 10:54:31,NA,NA,"- 問題: 當你想要問問題時，請使用這個類別

[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
最近處理的資料因為過於龐大
所以沒辦法用read.csv
只能硬讀取.sas7bdat(SAS檔)
但是怎麼讀取都錯誤...想請問板上有人用R讀過SAS檔案嗎?


順便分享當要處理龐大資料時R可能無法讀取或是效果不佳
現在有叫做REvolution-R軟體
同樣與R一樣但是可以處理big data
我不知道要不要收費...不過學術使用似乎是無償的


[程式範例]:> local({pkg <- select.list(sort(.packages(all.available = TRUE)))+ if(nchar(pkg)) library(pkg, character.only=TRUE)})
>> dd<-read.ssd(""D:/Ad97.sas7bdat"", header=TRUE, sep="","")錯誤在read.ssd(""D:/Ad97.sas7bdat"", header = TRUE,  :
  unused argument(s) (header = TRUE, sep = "","")

[關鍵字]:

--","R_Language"
"2837","M.1366066147.A.AF3","Wush978","情報","Google Summer of Code Applicants",2013-04-16 06:49:03,NA,NA,"[關鍵字]: R, bioconductor

[出處]:http://www.r-bloggers.com/bioconductor-looking-for-google-summer-of-code-applicants/http://www.google-melange.com/gsoc/homepage/google/gsoc2013[重點摘要]:

擅長R的同學有機會以5000$(應該是美元吧)的酬勞在暑假來為bioconductor

寫Open Source Project.

目前Bioconductor proposed了3個idea:

- ExperimentHub

- Shiny Bioconductor Object

- BiocParallel / BatchJob Integration

或是自己想自己的idea。

有興趣的同學可以參考參考


--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2838","M.1366013039.A.34F","Chris7462","分享","MATLAB call R for Windows system",2013-04-15 16:03:57,NA,NA,"MATLAB call R function for Windows system

這是我之前工作的時候碰到問題。
我們需要用 MATLAB 去呼叫 R 裡面的某些 library 跟 function

網路上有滿多介紹文的，不過寫得不是很詳細。
我在這邊做個 step by step 的紀錄，也分享給有需要的人。


測試環境：Windows 7 64-bit
MATLAB version: 2009b - 2011a
R version: 2.11.1 - 2.15.3
(上面幾個版本應該都可以用，至少我的沒出過問題)

1. 開啟 R 安裝 package 'rscproxy'、'rcom'

  > install.packages('rscproxy')
  > install.packages('rcom')

接著安裝 R-(D)COM ，要先在 R 裡面下指令

  > library('rcom')

接著 R 會要求你安裝 installstatconnDCOM。

  > installstatconnDCOM()

完成後使用 rscproxy, rcom 的 library

  > library('rscproxy')
  > library('rcom')

2. 下載 MATLAB R-link，解壓縮後開啟 MATLAB 設定 MATLAB_RLINK 的路徑。
   網址：http://www.mathworks.com/matlabcentral/fileexchange/5051把 MATLAB_RLINK 加入 search 的 path 。

   下面是這個 package 的幾個主要指令的介紹。

        openR     - 連結到 R server
        evalR     - 執行 R 的指令
        getRdata  - 把 R 的資料複製到 MATLAB
        putRdata  - 把 MATLAB 的資料複製到 R
        closeR    - 關閉 R server

3. 實際測試，開啟 MATLAB 輸入

  >> openR;                % 連結到 R Server
  >> x=[1:50];             % 在 MATLAB 裡面創造一個向量 x
  >> putRdata('x',x);      % 把向量 x 丟到 R 裡面
  >> evalR('y<-sqrt(x)');  % evalR 為一個呼叫 R 計算的函式
  >> evalR('plot(x,y)');   % 用 R 畫 x 對 y 的圖

  如果成功的話應該會看到像下圖這樣，MATLAB 會跳出一個 R 的 graphics devicehttp://tinyurl.com/d4bpt6n>> closeR;               % 記得每次呼叫完都要關起來

如果有出現 ERROR 的話，可以參考下面的 Troubleshooting 或是 Debugview 來幫忙
找出錯誤的原因。http://www.unt.edu/rss/class/splus/UsingTheRDCOMserver.pdfhttp://technet.microsoft.com/en-us/sysinternals/bb896647.aspx--","R_Language"
"2839","M.1366011080.A.3BE","andrew43","問題","Re: 註解和效能",2013-04-15 15:31:16,NA,NA,"我不是很確定答案, 但提供你幾個測試.
你都跑跑看大概就知道了.
記得按esc還是ctrl+c中斷

1. 不斷跑 5+5
while(T) {
  t1<-Sys.time()
  for (a in 1:10000) {eval(parse(text=""5+5""))}
  t2<-Sys.time()
  cat(t2-t1, ""(s)\n"")
}


2. 不斷跑 #5+5
while(T) {
  t1<-Sys.time()
  for (a in 1:10000) {eval(parse(text=""#5+5""))}
  t2<-Sys.time()
  cat(t2-t1, ""(s)\n"")
}

3. 不斷跑空白鍵
while(T) {
  t1<-Sys.time()
  for (a in 1:10000) {eval(parse(text="" ""))}
  t2<-Sys.time()
  cat(t2-t1, ""(s)\n"")
}

4. 不斷什麼事都沒做
while(T) {
  t1<-Sys.time()
  for (a in 1:10000) {}
  t2<-Sys.time()
  cat(t2-t1, ""(s)\n"")
}


我的結果是:
測試 4 最快,
測試 2 和 3 就慢了且是幾乎一致,
而測試 1 只再慢一點點而已!
結論: 是的, R 對註解很可能沒什麼特別的增加效率作用, 直譯器嘛別太計較了.※ 引述《obarisk (OSWALT)》之銘言：: [問題類型]:: 效能諮詢：關於直譯式語言的註解，影響效能的程度！: [軟體熟悉度]:: 入門(寫過其他程式，只是對語法不熟悉): [問題敘述]:: 我有一個需要最佳化的程式碼，為了讓程式碼更清晰，必需要註解。: 最佳化的目標是函式，函式裡面有註解。: 我的問題是，加入註解是否會影響程式碼的效能？: 還是R有機制會把函式的註解去掉？: google大神沒有告訴我答案，可能關鍵字有錯><: [程式範例]::: fTest <- function(a){:   # do nothing: }: fTest2<- function(a){: }: # 兩個會有差別嗎？:: [關鍵字]:: 效能、註解--","R_Language"
"2840","M.1366010613.A.D83","Wush978","分享","R tips: 設定預設的CRAN",2013-04-15 15:23:30,NA,NA,"[關鍵字]: R, customization

[參考資料]:http://www.statmethods.net/interface/customizing.htmlR 在啟動時會依序載入以下兩個檔案：

Rprofile.site (預設位置在C:\Program Files\R\R-n.n.n\etc)
.Rprofile (先檢查啟動的資料夾，再檢查使用者的家目錄)

所以只要在這兩個檔案內輸入

options(repos=structure(c(CRAN=""http://cran.cs.pu.edu.tw"")))安裝套件的時候就不用選CRAN的位置了

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2841","M.1365998698.A.7D5","obarisk","問題","註解和效能",2013-04-15 12:04:56,NA,NA,"[問題類型]:
效能諮詢：關於直譯式語言的註解，影響效能的程度！


[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
我有一個需要最佳化的程式碼，為了讓程式碼更清晰，必需要註解。
最佳化的目標是函式，函式裡面有註解。

我的問題是，加入註解是否會影響程式碼的效能？
還是R有機制會把函式的註解去掉？

google大神沒有告訴我答案，可能關鍵字有錯><

[程式範例]:fTest <- function(a){# do nothing}fTest2<- function(a){}# 兩個會有差別嗎？[關鍵字]:
效能、註解

--","R_Language"
"2842","M.1365956368.A.50A","Wush978","情報","R and social media",2013-04-15 00:19:25,NA,NA,"[關鍵字]: R

[出處]:http://www.burns-stat.com/r-and-social-media/?utm_source=rss&utm_medium=rss&utm_campaign=r-and-social-media[重點摘要]:

世界上的R的資源整理

## 發問的地方：

發問前請建議先閱讀原文關於發問注意事項，以及各個網站風格的說明。

- Stackoverflow
- Cross Validated
- R-help
- R-devel
- R-sig-*
- Package-specific mailing list

## Blog

- R-bloggers

## Twitterhttps://twitter.com/#rstats## Quorahttp://www.quora.com/R-software## Linkedln

- [The R Project for Statistical
Computing](http://www.linkedin.com/groups/R-Project-Statistical-Computing-77616)- [R Programming](http://www.linkedin.com/groups?gid=2229532)- [R/Finance](http://www.linkedin.com/groups?gid=155029)- [R Users](http://www.linkedin.com/groups?gid=4047513)一個統計分析顧問的子團
隊
- [R Professionals
Network](http://www.linkedin.com/groups/R-Professionals-Network-4215605)## Package sharing

- [CRAN](http://cran.r-project.org/web/packages/)主要的套件庫
- [Bioconductor](http://www.bioconductor.org/)和基因相關的套件庫
- [Omegahat](http://www.omegahat.org/)和其他語言、工具相關的套件庫
- [R-forge](http://r-forge.r-project.org/)許多CRAN上的套件在此開發
- Github
- Google code

## 會議

- useR!
- R in Finance
- R in Insurance
- Others
    - Joint Statistical Mettings
    - Royal Statistical Society Conference

## 地區性的 R 社群http://blog.revolutionanalytics.com/local-r-groups.html--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2843","M.1365854790.A.6CA","Wush978","公告","徵求精華區版工",2013-04-13 20:06:27,NA,NA,"大家好

由於我個人時間有限，

所以在此徵求有意願的版友一同來慢慢的編修我們R_Language版的精華區，

以方便未來的R 語言的後進！

請有興趣的版友於底下推文或是私底下回信給我，謝謝。

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2844","M.1365853623.A.4A9","Wush978","情報","Visualizing NCAA 這季的表現",2013-04-13 19:46:59,NA,NA,"[關鍵字]: R, Python, Visualication

[出處]:http://www.rodrigozamith.com/2013/03/20/visualizing-season-performance-by-ncaa-tournament-teams/[重點摘要]:

背後的技術和source code可以參考http://www.rodrigozamith.com/2013/03/27/going-under-the-hood-of-the-ncaa-tournament-visualization/- 資料是使用Python的BeautifulSoup函式庫從http://stats.ncaa.org/team/inst_team_list?sport_code=MBB&division=1撈取的

- 資料的處理和繪圖是使用R

    - 去除某些錯誤的資料和遺失的資料

    - 繪圖是使用ggplot2套件

- 利用jQuery和HTML來製作呈現的網頁(作者沒有使用R的shiny套件喔!!)

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2845","M.1365759289.A.AEC","Chris7462","問題","Re: 生成隨機數據矩陣",2013-04-12 17:34:47,NA,NA,"※ 引述《goddirk (dirk)》之銘言：: 所以是參數要在指令裡面宣告用<-,外部宣告用=?: 還是說整個程式裡面=出現的時候都用<-來取代就可以了?: 還是說有一定要用=的地方嗎?: 剛剛跑了一下你上面講的部分.....看來我之前在run的時候有錯是錯這個東西了From R help :The operators‘<-’ and ‘=’ assign into the environment in whichthey are evaluated.The operator ‘<-’ can be used anywhere,whereas the operator ‘=’ is only allowed at the top level(e.g.,in the complete expression typed at the command prompt)or as oneof the subexpressions in a braced list of expressions.照 R help 的說法是‘<-’與‘=’都是 assign value
其中‘<-’在任何地方都可以用

  > a <- 2    # ok
  > a
  [1] 2

  > f <- function(){
  +     c <- 4    # ok
  +     print(c)
  + }
  > f()
  [1] 4

  > h <- function(x){
  +     print(x)
  + }

  > h(w <- 4)    # ok。 先 assign 4 to w 然後再把 w 當 arg x 帶入 h function 中
  [1] 4
  > w            # 會多產生一個 w
  [1] 4


但是‘=’只能在 top level 或 subexpression 的大括號內使用

  > b = 3    # ok
  > b
  [1] 3

  > g = function(){
  +     d = 5    # ok
  +     print(d)
  + }
  > g()
  [1] 5

  > k <- function(y){
  +     print(y)
  + }
  > k( y = 4 )    # ok 但這裡的‘=’就不再有 assign 的功能，而是當成 arg
  [1] 4
  > y             # 所以也不會有 y 的值
  Error: object 'y' not found

  > k( z = 5 )    # Not ok ，因為沒有 z 這個 arg
  Error in k(z = 5) : unused argument(s) (z = 5)


總結一下就是，要 assign value 的時候用‘<-’要輸入 arg 的時候用‘=’


--","R_Language"
"2846","M.1365750453.A.90B","adgjlsfhk123","心得","互動式學習R網頁",2013-04-12 15:07:30,NA,NA,"網址是：http://tinyurl.com/cxae58chttp://www.codeschool.com/courses/try-r兩個網址都是一樣的。自己的程度：我自己的統計程度是正在學習經濟系的統計學下，沒學過線性代數

程式能力幾乎等於零(很久之前有上過課，但全忘記了!)

英文閱讀程度：英檢中高級

不過即使如此，大部分都還是看得懂，而且每一次互動不超過三行英文，

所以英文不好也不必太擔心。使用心得：


我還沒上完，但很推薦!

我自己有買陳景祥的書，甚至看過前面幾篇文章推薦的中文網址

但我認為對一個幾乎什麼都不懂的初學者而言還是太難了(不過也是因為我太廢= =)

直到找到這個網站，現在在去看上述的那些資料，發現大概能掌握梗概了。

時間方面，一天如果花半小時，大約一個禮拜就可以上完了

如果發狠心，一天四小時應該也學得完。

教學方式是在講一艘海盜船的故事

雖然課程要求說要Basic Programming Knowledge 但以我自己的經驗是不用

總之，推薦給跟我一樣幾乎完全沒有基礎的人!

--","R_Language"
"2847","M.1365726568.A.E0F","Wush978","問題","Re: 生成隨機數據矩陣",2013-04-12 08:29:24,NA,NA,"你們在討論的兩個operator: <- 和 = 已經把兩種功能混淆了。

一個是replacement function, 另一個是argument passing

當直接在R的console使用如：

a <- 1
a = 1

這個是一種replacement function
他除了會把1存到a 之外，還會回傳1
只是這種回傳是把回傳值隱藏的
你可以試試看跑：
(a <- 1)
(a = 1)

他會把隱藏的值顯示出來

你也可以自己寫回傳隱藏值的函數：
f1 <- function() 1
f2 <- function() invisible(1) # 隱藏回傳值
f1()
f2()

而當你在參數使用 <- 和 = ，又完全不同了

R 傳遞參數的時候，會依序比對：
1. full name
2. partial name
3. 位置

例如:

f <- function(a, b, c) {
  print(a)
  print(b)
  print(c)
}
f(b=1,2,3) # a = 2, b = 1, c = 3
f(b<-1, 2, 3) # a = 1, b = 2, c = 3

= 在這裡已經不再是replacement function，而是用於指定參數名稱
<- 則還是replacement function, 所以R在解析f(b<-1, 2, 3)時
會先執行replacement function: b <- 1
由於函數回傳值是1, 所以執行後就變成f(1, 2, 3)
R 再用位置來傳遞參數，所以a=1, b=2, c=3

你可以多嘗試幾次。

另外想要更詳細的解釋，可以參考：

- Taiwan R User Group 聚會的R-advanced的影片
- hadley的R advanced電子書:http://github.com/hadley/devtools/wiki(希望沒背錯 XD)※ 引述《goddirk (dirk)》之銘言：: ※ 引述《zhuangz (zhuangz)》之銘言：: : 例如以下指令,: : 無法以: : 取代.: : 其效果等同下列三項指令: 所以是參數要在指令裡面宣告用<-,外部宣告用=?: 還是說整個程式裡面=出現的時候都用<-來取代就可以了?: 還是說有一定要用=的地方嗎?: 剛剛跑了一下你上面講的部分.....看來我之前在run的時候有錯是錯這個東西了--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2848","M.1365704455.A.74E","goddirk","問題","Re: 生成隨機數據矩陣",2013-04-12 02:20:52,NA,NA,"※ 引述《zhuangz (zhuangz)》之銘言：: 例如以下指令,: > plot(a<-rnorm(10),b<-a+1): 無法以: > plot(a=rnorm(10),b=a+1): 取代.: 其效果等同下列三項指令: > a=rnorm(10): > b=a+1: > plot(a,b)所以是參數要在指令裡面宣告用<-,外部宣告用=?
還是說整個程式裡面=出現的時候都用<-來取代就可以了?
還是說有一定要用=的地方嗎?


剛剛跑了一下你上面講的部分.....看來我之前在run的時候有錯是錯這個東西了

--","R_Language"
"2849","M.1365694434.A.1D9","zhuangz","問題","Re: 生成隨機數據矩陣",2013-04-11 23:33:52,NA,NA,"※ 引述《Yukirin (<U+3044><U+3044>天<U+6C17>！)》之銘言：: ※ 引述《goddirk (dirk)》之銘言：: : [軟體熟悉度]:: : 算是新手吧.....有學過fortran但沒學過R: : [問題敘述]:: : 想生成n=5 , 500組的exp隨機數據: : 然後要求每組的mean跟sd: x <- matrix( rexp(2500), ncol=500 ): x_mean <- apply(x, 2, mean): x_sd   <- apply(x, 2, sd): : 順便請問一下=跟<-差在哪裡?: 這兩個應該是一樣的，但是 = 跟 == 很容易用混，: 如果習慣用 <- 取代 = 的話，就不會發生寫條件式結果變賦值的慘劇了 XD<-與=用法雖然差不多, 但在某些地方還是有些不同.

例如以下指令,> plot(a<-rnorm(10),b<-a+1)無法以> plot(a=rnorm(10),b=a+1)取代.

其效果等同下列三項指令> a=rnorm(10)> b=a+1> plot(a,b)--","R_Language"
"2850","M.1365670686.A.1F4","gsuper","分享","R-新手訓練 考卷",2013-04-11 16:57:58,NA,NA,"https://docs.google.com/file/d/0B-guURvPyaAeUnh4WkF6U0NhVzg/edit這是我訓練碩一開給他們的考卷
新手可以按照考卷的邏輯去學習
原則上的使用方式

1. 看完 R introduction , 線性代數,統計與作圖的部分先跳過不看
   (有程式底   : 1週~10天 )
   (白紙       : 3週 )

   必須邊看邊練習
   將有用的 function 收集起來 , 存成私房 word 檔

2. 寫這張考卷
   把裡面的 function 和思考邏輯全部學會

--------------------------------------------------------------

有程式底子的人
其實也可以跳過念書的部分
邊看考卷解答邊學也可以

--
線圖裡 燭不燃引不吊 小小股民可笑可笑
大盤中 跌無檔漲無疆 斷頭嘎空堤防堤防

--","R_Language"
"2851","M.1365607439.A.47E","ckaha","情報","ggplot2",2013-04-10 23:23:56,NA,NA,"類別:
data visualization
[關鍵字]:
ggplot2
[出處]:http://docs.ggplot2.org/0.9.3/index.html[重點摘要]:
資料視覺化是讓人接受資料分析結果的重要工具
而Ｒ中的ggplot2套件更是幫助大家可以做到許多美觀的數據圖
而這個網站有許多ggplo2基本函式的範例
我從中學習到許多使用技巧
在此分享給大家

在此當作拋磚引玉
請教有沒有人願意分享用這個套件的經驗
或者是有有趣的應用技巧與程式碼呢?

--","R_Language"
"2852","M.1365548671.A.9F5","Wush978","情報","Fw: R debug 技巧",2013-04-10 07:04:29,NA,NA,"※ [本文轉錄自 Statistics 看板 #1HE0oIEd ]作者: Wush978 (拒看低質媒體) 看板: Statistics
標題: [情報] R debug 技巧
時間: Thu Mar  7 11:42:07 2013

大家好

在此分享我知道的R debug 技巧：

1. 四個debug函數

- traceback 找出錯誤發生時最後執行的函數以及巢狀結構
- browser 進入函數內部的環境
- debug 逐步執行
- trace 插入程式碼到函數之中

2. 環境設定 -- 錯誤發生時自動debug

options(error = browser) 錯誤發生時自動呼叫browser

options(error = recover) 錯誤發生時印出函數的巢狀結構，
並且讓使用者選擇要進入哪個函數的環境

---

詳細的介紹可以參考：http://wush978.github.com/blog/2012/06/14/r-debug/--","R_Language"
"2853","M.1365504418.A.FDB","zmack0905","問題","which(with)的使用方式",2013-04-09 18:46:55,NA,NA,"我想利用監測資料劃出箱鬚圖,資料母體為全年度所有測站的數據

遇挑選其中一站做其全年度的特定物種(O3)的盒鬚圖


利用程式碼

ids <- which(with(newdata04,station == ""忠明""))

plot(as.factor(format(newdata04$measuretime[ids],""%m"")), newdata04$O3)

得錯誤訊息

錯誤在model.frame.default(formula = y ~ x) :
  variable lengths differ (found for 'x')


其為參照OPENAIR'MANULA的寫法,但是最後顯示變數不定

是因為測站數與觀測時數不同嗎?

如果我想要從所有站中特別挑出某個站,對時間與測時作圖該如何給條件?






------------atrr(newdata04)部分結果-------------
head(attributes(newdata04),10)
$names
 [1] ""number""      ""station""     ""measuretime"" ""SO2""         ""CO""
 ""O3""          ""PM10""        ""NOx""         ""NO""          ""NO2""
[11] ""THC""         ""NMHC""        ""WIND_SPEED""  ""WIND_DIREC""  ""SIGMA""
""WD_GLOBAL""   ""AMP_TEMP""    ""DEW_POINT""   ""SHELT_TEMP""  ""PRESSURE""
[21] ""PH_RAIN""     ""RAIN_COND""   ""RAINFALL""    ""CH4""         ""RAIN_INT""
 ""area""

$row.names
    [1]     1     2     3     4     5     6     7     8     9    10    11
 12    13    14    15    16    17    18    19    20    21    22    23    24
   [25]    25    26    27    28    29    30    31    32    33    34    35
 36    37    38    39    40    41    42    43    44    45    46    47    48
   [49]    49    50    51    52    53    54    55    56    57    58    59
 60    61    62    63    64    65    66    67    68    69    70    71    72
   [73]    73    74    75    76    77    78    79    80    81    82    83
 84    85    86    87    88    89    90    91    92    93    94    95    96
   [97]    97    98    99   100   101   102   103   104
..
.
.
99745 99746 99747 99748 99749 99750 99751 99752 99753 99754 99755 99756 99757
99758 99759 99760 99761 99762 99763 99764 99765 99766 99767 99768
[99769] 99769 99770 99771 99772 99773 99774 99775 99776 99777 99778 99779
99780 99781 99782 99783 99784 99785 99786 99787 99788 99789 99790 99791 99792
[99793] 99793 99794 99795 99796 99797 99798 99799 99800 99801 99802 99803
99804 99805 99806 99807 99808 99809 99810 99811 99812 99813 99814 99815 99816
[99817] 99817 99818 99819 99820 99821 99822 99823 99824 99825 99826 99827
99828 99829 99830 99831 99832 99833 99834 99835 99836 99837 99838 99839 99840
[99841] 99841 99842 99843 99844 99845 99846 99847 99848 99849 99850 99851
99852 99853 99854 99855 99856 99857 99858 99859 99860 99861 99862 99863 99864
[99865] 99865 99866 99867 99868 99869 99870 99871 99872 99873 99874 99875
99876 99877 99878 99879 99880 99881 99882 99883 99884 99885 99886 99887 99888
[99889] 99889 99890 99891 99892 99893 99894 99895 99896 99897 99898 99899
99900 99901 99902 99903 99904 99905 99906 99907 99908 99909 99910 99911 99912
[99913] 99913 99914 99915 99916 99917 99918 99919 99920 99921 99922 99923
99924 99925 99926 99927 99928 99929 99930 99931 99932 99933 99934 99935 99936
[99937] 99937 99938 99939 99940 99941 99942 99943 99944 99945 99946 99947
99948 99949 99950 99951 99952 99953 99954 99955 99956 99957 99958 99959 99960
[99961] 99961 99962 99963 99964 99965 99966 99967 99968 99969 99970 99971
99972 99973 99974 99975 99976 99977 99978 99979 99980 99981 99982 99983 99984
[99985] 99985 99986 99987 99988 99989 99990 99991 99992 99993 99994 99995
99996 99997 99998 99999
 [ reached getOption(""max.print"") -- omitted 532449 entries ]

$class
[1] ""data.frame""






[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

--","R_Language"
"2854","M.1365500943.A.709","winiris","問題","次數分佈圖",2013-04-09 17:49:01,NA,NA,"請問各位如何用R畫次數分佈曲線圖
我只知道可以用hist但是我不想要直方圖
只想要曲線圖出現
請問還有其他寫法嗎

--","R_Language"
"2855","M.1365487732.A.1A6","GTBUG","問題","寫loop選最適ARIMA model碰到的問題",2013-04-09 14:08:48,NA,NA,"[問題類型]:
程式諮詢

[軟體熟悉度]:
入門(寫過其他程式，只是對語法不熟悉)

[問題敘述]:
目前針對一筆3年的daily資料作建模(365*3筆daily count data)，已利用過傳統
time-series建模方法，透過ACF, PACF等判斷去找model，也利用過auto.arima去找model
，現在希望透過手寫一個loop去run各種model的組合，再由最小AIC來選出較適的模型當我run後，卻吐回一個error message給我，然後終止loop而沒有任何結果""錯誤在stats:::arima(x, order = order, seasonal = seasonal, fixed =par[1:narma],  :  wrong length for 'fixed' ""如果不用loop, 而是一個一個MODEL慢慢try，就可以跑(如下)

ex.
fit<-arimax(x,order=c(3,1,3),seasonal=list(order=c(0,1,1),period=7),xreg=xreg)
fit2<-arimax(x,order=c(3,1,3),seasonal=list(order=c(0,1,2),period=7),xreg=xreg)
..
..

[程式範例]:count = 0for(i in 0:5) {for(j in 0:2) {for(k in 0:1) {for(l in 0:1) {for(m in 0:2) {for(n in 0:1) {for(o in 0:2) {model = arimax(ed0710$ED, order=c(i,j,k),seasonal=list(order=c(l,m,n), period=7*o), xreg=xreg1)if (count == 0) {aicmin = model$aicbestmodel = model}if ((count != 0)&&  (model$aic<  aicmin)) {aicmin = model$aicbestmodel = modeldiff1 = jdiff2 = mseas = o*7}count = count+1}}}}}}print(bestmodel)print(count)print(diff1)print(diff2)print(seas)}[關鍵字]: time-series, ARIMA, loop

--","R_Language"
"2856","M.1365429446.A.445","goddirk","問題","Re: 生成隨機數據矩陣",2013-04-08 21:57:23,NA,NA,": : [問題敘述]:: : 想生成n=5 , 500組的exp隨機數據: : 然後要求每組的mean跟sd: x <- matrix( rexp(2500), ncol=500 ): x_mean <- apply(x, 2, mean): x_sd   <- apply(x, 2, sd)上面那個方法我有用過類似的
x<-array(rexp(2500),c(5,500))
不過好像都是先生成2500個資料在弄成矩陣
我想要的是一次5個資料產生,然後弄迴圈做500組


在這邊先感謝幾位大大為我解惑
=我盡量養成習慣弄<-

-----------------------------------------------------------
以下是今天打出來的

e5m<-numeric(500)
e5s<-numeric(500)
for(i in 1:500) {e5=rexp(5,rate=1);e5m[i]=mean(e5);e5s[i]=sd(e5)} #3
e5m
e5s
meane5<-mean(e5m)
sde5<-mean(e5s)
meane5
sde5


照我這部分打出來的部分
#3裡面的e5是否為同一組數據啊?
我覺得理論上應該是一樣啦.....不過還是問清楚!!!

--","R_Language"
"2857","M.1365394647.A.955","Wush978","問題","Re: 生成隨機數據矩陣",2013-04-08 12:17:25,NA,NA,"※ 引述《goddirk (dirk)》之銘言：: [軟體熟悉度]:: 算是新手吧.....有學過fortran但沒學過R: [問題敘述]:: 想生成n=5 , 500組的exp隨機數據: 然後要求每組的mean跟sd: [程式範例]:: for (i in 1:500){y=array(rexp(5,rate=1),c(5,500))}: 所以重點在我這邊打出來的程式碼會讓我的500組數據每一組都依樣....我翻譯一下你的程式碼，也許這樣可以幫助你理解你的問題

ps. 程式碼的排版，在閱讀程式碼的時候也是很重要的

```r
for(i in 1:500) { # 1
  y = array(rexp(5, rate=1), c(5, 500) ) # 2
} # 3
```

1, 3 行表示 2 行要做500次，每次i的值從1到500

你的主要問題出現在第2行：

rexp(5, rate=1)是一個長度是5的向量

這個長度是5的向量，將會被放到一個陣列array中，陣列的長度是5 * 500 = 2500由於2500 整除5 , 所以R 沒有噴警告而是直接把向量重複2500/5次填寫到array中

然後把這個array寫到y變數中。

所以R就會重複我上述的動作500次，每次都隨機產生長度5的向量後重複2500/5次放到y

你的問題和`=`, `<-`無關: 順便請問一下=跟<-差在哪裡?: 有請高人指點迷津@@!已經有高手回答囉！！

--","R_Language"
"2858","M.1365350876.A.531","Yukirin","問題","Re: 生成隨機數據矩陣",2013-04-08 00:07:53,NA,NA,"※ 引述《goddirk (dirk)》之銘言：: [軟體熟悉度]:: 算是新手吧.....有學過fortran但沒學過R: [問題敘述]:: 想生成n=5 , 500組的exp隨機數據: 然後要求每組的mean跟sdx <- matrix( rexp(2500), ncol=500 )
x_mean <- apply(x, 2, mean)
x_sd   <- apply(x, 2, sd): 順便請問一下=跟<-差在哪裡?這兩個應該是一樣的，但是 = 跟 == 很容易用混，
如果習慣用 <- 取代 = 的話，就不會發生寫條件式結果變賦值的慘劇了 XD


--","R_Language"
"2859","M.1365348858.A.77F","goddirk","問題","生成隨機數據矩陣",2013-04-07 23:34:16,NA,NA,"[軟體熟悉度]:
算是新手吧.....有學過fortran但沒學過R

[問題敘述]:
想生成n=5 , 500組的exp隨機數據
然後要求每組的mean跟sd

[程式範例]:

for (i in 1:500){y=array(rexp(5,rate=1),c(5,500))}



所以重點在我這邊打出來的程式碼會讓我的500組數據每一組都依樣....

順便請問一下=跟<-差在哪裡?


有請高人指點迷津@@!

--","R_Language"
"2860","M.1365220507.A.F33","MIZUYAMA","問題","兩組資料合併",2013-04-06 11:55:01,NA,NA,"ctrl + y 可以刪除一整行，請將不需要的內容刪除文章分類提示:- 問題: 當你想要問問題時，請使用這個類別[問題類型]:效能諮詢(我想讓R 跑更快)經驗諮詢(我想用R 連接某些資料庫，請問大家的經驗)[軟體熟悉度]:請把以下不需要的部份刪除使用者(已經有用R 做過不少作品)[問題敘述]:手上有A B兩筆資料A有70個變數  B有13個AB有互相對應的關鍵值變數我挑了兩個 id(資料名) no(流水號)作為串聯的關鍵同時由於有些變數只有在A或B才有 所以只要有一個變數其中資料有合併時也要抓進來但是不知道為何一直失敗另外 除了for外 是否有可以讓程式更有效率的方法呢?[程式範例]:co<-function(data1,data2){data<-matrix()for(i in1:length(data[,1])){data[i,]<-data1[which(data1[i,""id""]==data2[,""id""])data1[i,""no""]==data2[,""no""],]}}錯誤在Ops.factor(data1[i, ""hosp_id""], data2[, ""hosp_id""]) :level sets of factors are different--大學院研究的主題是時間∼直到他們將時間用盡--","R_Language"
"2861","M.1365091090.A.98D","Cayley","情報","20130408 MLDM Monday 會前通知",2013-04-04 23:58:08,NA,NA,"Dear All：

今天 (2013/04/08) 在創立方，會有我們第二十三次的 MLDM Monday 的聚會！

本次的聚會是關於 Text Mining 相關主題的第二次聚會

題目為「DIY Chinese Segmentation」

講者為 Rueshyna

以下是演講的簡介：

曾經為中文斷詞處理煩腦嗎？本次的內容將介紹一些中文斷詞的方法，沒有艱深的理論，
我們的目標是大家聽完後，回家也可以自己動手處理中文斷詞!!!

歡迎對這個議題有興趣的朋友，可以一起來和我們討論唷



報名網址：http://www.meetup.com/Taiwan-R/events/104716722/~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
~~~~~~~~~~~ 補充說明 ~~~~~~~~~~~
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~


如果大家對 NLP 有興趣，想尋找入門的介紹影片的話

也可以參考我們同位講者前一場演講的錄影https://www.youtube.com/watch?v=4kTqXtJjiuQ相信會有些幫助的！




最後，如果您希望學習到一些用 R 處理 NLP 的工具與套件的話

在下面這場聚會中，也曾經介紹過如何使用 R 的 tm 模組來建造

E-mail Spam Classifier (based on Naive Bayesian Classifier)https://www.youtube.com/watch?v=kJq_sDkmI7E對 tm 模組有興趣的話也可以參考這場聚會唷




TW.R 團隊 敬邀

--","R_Language"
"2862","M.1365090307.A.8E8","Wush978","心得","R 的例外處理",2013-04-04 23:45:03,NA,NA,"[關鍵字]: R, 例外處理, exception

[重點摘要]: 簡單的分享我對於R 的例外處理相關的心得

R 的官方文件在[Exception
handling](http://cran.r-project.org/doc/manuals/R-lang.html#Exception-handling)有介紹R的例外處理機制。

這裡我簡單介紹如何在R寫出類似java、c++或python等主流語言所使用的try-catch機制
。

另外這裡講的都是以R2.15為主。

# 錯誤相關的函數

- `warning(...)`: 拋出一個警告
- `stop(...)`: 拋出一個例外
- `surpressWarnings(expr)`: 忽略`expr`中發生的警告
- `try(expr)`: 嘗試執行
- `tryCatch`: 最主流語言例外處理的方法
- `conditionMessage` : 顯示錯誤訊息

# R 和其他主流語言的不同

R 語言處理例外的方式，是透過函數，而非像其他主流語言使用try ... catch ... 等語
法。這是因為R 語言幾乎所有功能都是用函數來實作的。請參考[Every operation is a
function
call](https://github.com/hadley/devtools/wiki/Functions#every-operation-is-a-function-call)。

# 一個`try`的範例

我自己最早是先發現`try`函數。`try`的用法近似於回傳expr的結果*或*執行時發生的錯
誤。

```r
result <- try(..., silent=TRUE)
if (class(result) == ""try-error"") {
  ... # 錯誤處理
}
```

由於R是我第一個語言，所以我也就接受他了。直到我後來發現主流語言的try -- catch
機制後，才覺得奇怪。

# 一個`tryCatch`的範例

後來我發現`tryCatch`函式提供了比較類似try -- catch機制的錯誤處理方法。

```r
tryCatch({
  result <- expr
}, warning = function(w) {
  ... # 警告處理
}, error = function(e) {
  ... # 錯誤處理
}, finally {
  ... # 清理
}
```

這種語法和其他主流語言的機制比起來接近多了。

# `conditionMessage`

有時候當錯誤發生時，我無法處理，需要直接回傳錯誤訊息給使用者時，或是log起來時
，我們可以在`tryCatch`中使用`conditionMessage`來擷取錯誤訊息。

```r
tryCatch({
  stop(""demo error"")
}, error = function(e) {
  conditionMessage(e) # 這就會是""demo error""
})
```

# 錯誤處理的相關issue

就我的經驗來說，寫出一個穩健的程式碼是非常不容易的。在軟體工程中有許多文章介紹
如何寫出這類程式碼。

大部份R 寫出來的script都是只用一次的，所以程式穩定不穩定就不是重點，也因此大家
都很少去使用R 的例外處理機制。

某些R 使用者，會需要寫出自動化的script。而這時候為了要讓迴圈不中斷，使用者才開
始使用例外處理。

但是當寫到套件時，例外處理就很重要了。這時候，函數的使用者將不再是開發者自己，
而還包括其他的使用者，甚至是其他的開發者。此時例外處理就變成一門哲學了。這部份
我也只略懂皮毛，下面只列出少許我知道的issue:

- 釋放資源: 由於錯誤發生時，函數會在不正常的地方退出，所以此時需要釋放一些函數
中獲得的資源(如資料庫連線需要關閉)。這部份在C++可以用
[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)等
技術來保證資源不會被忘記釋放。然而在R中，我還不知道有什麼類似的安全機制。
- exception safety guarantees: 當使用者要基於某些函數建立複雜的程式時，通常希
望這些函式是不會出錯的。[Exception
safety](http://en.wikipedia.org/wiki/Exception_safety)就是在探討相關的issue。
畢竟使用的函數有例外狀況時，原本的函數也跟著會有例外狀況。就像是蓋在危樓上的樓
層，一定也很危險一樣。目前我也尚未看過R在這部份的功能。
- 錯誤訊息: 當錯誤發生時，提供的錯誤訊息是否能幫助使用者找到發生錯誤的理由。R
在這部份也很不足，這造成要除錯R的程式時，沒有相當的經驗，是無法理解錯誤訊息的
。

# 參考資料

- [Exception
handling](http://cran.r-project.org/doc/manuals/R-lang.html#Exception-handling)- [Using R — Basic error Handing with
tryCatch()](http://mazamascience.com/WorkingWithData/?p=912)--","R_Language"
"2863","M.1365085670.A.F01","andrew43","問題","Re: R 關於例外處理",2013-04-04 22:27:47,NA,NA,"※ 引述《ckkt ([email<U+00A0>protected]#$)》之銘言：: [問題敘述]:: 我想請問，有辦法程式碼執行到某一行，發生錯誤，: 然後我想略過這個錯誤，繼續執行或是再執行一次這一行程式碼嗎？給你一段 R 例外處理的原始碼:

  expr <- expression( 1+""a"" )
  a.try <- try(eval(expr), T)
  if(""try-error"" %in% class(a.try)) {
    cat(""an error"")
  } else {
    cat(""no error"")
  }

其中 1+""a"" 就是個錯誤, 所以結果會顯示 ""an error"".
你從這段原始碼去改寫吧.

--","R_Language"
"2864","M.1365084660.A.A57","ckkt","問題","R 關於例外處理",2013-04-04 22:10:57,NA,NA,"[問題敘述]:
我想請問，有辦法程式碼執行到某一行，發生錯誤，
然後我想略過這個錯誤，繼續執行或是再執行一次這一行程式碼嗎？

因為目前遇到的狀況是，同樣的參數，有時會有錯誤訊息，
有時沒有，所以我想當錯誤發生時，略過他。

以下是出現錯誤時的錯誤訊息：
錯誤在UseMethod(""xmlNamespaceDefinitions"") :
  沒有適用的方法可將 'xmlNamespaceDefinitions' 套用到 ""NULL"" 類別的物件

[程式範例]:

get.ppiNCBI <- function(g.n) {
        require(XML)
        ppi <- data.frame()
        for(i in 1:length(g.n)){
                o <- htmlParse(paste(""http://www.ncbi.nlm.nih.gov/gene/"",g.n[i], sep=''))


                exist <- length(getNodeSet(o, ""//table//th[@id='inter-prod']""))>0
                if(exist){
                        p <- getNodeSet(o, ""//table"")

                        for(j in 1:length(p)){
                        int <- readHTMLTable(p[[j]])
                        if(colnames(int)[2]==""Interactant""){break}
                        }
                        ppi <- rbind(ppi, data.frame(egID=g.n[i], intSymbol=int$`Other Gene`))
                }

                Sys.sleep(1)
        }
        if(dim(ppi)[1]>0){
                ppi <- unique(ppi)
                ##print(paste(dim(ppi)[1], ""interactions found""))
                return(ppi)
        } else{
                ##print(""No interaction found"")
                return(ppi)
        }
}

intergene <- function(genelist, number){
        numberofgene <- length(genelist)
        ppimatrix <- matrix(0, nrow=numberofgene, ncol=1)
        names(ppimatrix) <- genelist
        egSYM <- org.Hs.egSYMBOL
        mapped_genes <- mappedkeys(egSYM)
        egSYMlist <- as.list(egSYM[mapped_genes])




print(0)

                Symin <- levels(get.ppiNCBI(genelist[[number]])[1,2])
print(1)
                numberofinter <- length(Symin)
                if(numberofinter > 0){
                        enIDin <- matrix(NA, nrow=1, ncol=numberofinter)
print(2)
                        for(k in 1:numberofinter){

                                position <- match(Symin[k], egSYMlist)
                                enname <- attributes(egSYMlist[position])
                                enIDin[k] <- enname[[1]]
                        }

                        for(j in 1:numberofgene){

                                if(!is.na(match(genelist[[j]], enIDin)))
                                        ppimatrix[j] <- 1
                        }

                }


        return(ppimatrix)
}


在執行xy <- intergene(EID[,2], 8) 或intergene(EID[,2], 7)
時會出現錯誤訊息
EID[,2]的資料型態為c(""9890"",""5010"",.........)
7和8是EID[7,2],EID[8,2]的意思

錯誤會出現在print(0)和print(1)之間那一行程式
因為有時會錯誤，有時不會，所以有辦法忽略錯誤，繼續執行嗎？

--","R_Language"
"2865","M.1364998897.A.8AE","Cayley","問題","Re: 請問R的中文書",2013-04-03 22:21:36,NA,NA,"如果想弄懂R的底層

像是 environment, formula, ... 等等

我還蠻推 <R in a Nutshell> 這本書的

另外， Wush 最近也常常在 R 社群聚會時，介紹的 Handly 的電子書

那份文件講得比 <R in a Nutshell> 更加詳盡

有興趣的朋友，也可以去翻閱一下





另外，如果同時是 R 新手又想學點 Data Mining 和 Machine Learning

我覺得 <Machine Learning for Hackers> 是本不錯的選擇

然後，還有一本叫做 <R and Data Mining> 的書，前陣子有在天瓏翻到

(草稿版)http://cran.r-project.org/doc/contrib/Zhao_R_and_data_mining.pdf這本書也寫得不錯唷^^※ 引述《Yukirin (<U+3044><U+3044>天<U+6C17>！)》之銘言：: ※ 引述《andrew43 (apan)》之銘言：: : 如果不懂程式語言，自修 R 應該會很辛苦。: : 經驗告訴我你需要的是學習同伴或可請教的對象，: : 不然真的會發生「每行程式碼都看不懂，但書已經看完了」的現象。: : 去聽用 R 的課吧！: 對各位來說R可能都不是第一套語言了，: 我目前學R大概也才兩三個月吧，: 不過講一下沒有programming經驗的人的學習歷程，: 可能對類似的人比較有幫助。: 背景：: 我是唸經濟的碩士，不過因為論文或是報告都是實證研究，: 所以對於統計、計量經濟學上的概念都還可以。: 在大學\研究所的時候使用的軟體都是STATA，: 去年做研究助理的時候要運用前一個學長留下來的code，: 才第一次對if/else條件、for、while迴圈有初步的印象。: 動機：: 因為未來想試試看data analyst或mining的工作，: STATA應該只在少數的學術圈裡有應用，: R應該是更通用且promising的工具。: 入手：: 倒不是害怕英文，不過我的確入門R的時候找的都是中文書。: 因為沒有programming背景，我認為有些概念還是先從熟悉的語言理解，: 然後再靠英文的書籍補強完整的概念。: 我所找到的第一套講義是台北大學林建甫老師的<<醫學統計與R>>: ( 下載: http://web.ntpu.edu.tw/~cflin/ ): 篇幅不長，文字也很清晰，主要講解R的整個概觀、控制流、資料結構跟簡單的函數，: R的函數講解下方通常會附上程式碼與output，: 存活分析的部分如果沒有需要的人可以跳過，: 在這份講義裡面我主要不理解的還是apply族的函數，: 不過我認為這是因為那時心裡想著「這玩意STATA沒有我應該也用不到吧」的想法。: 然後是淡江大學吳漢銘老師的<<統計計算語言R學習手冊>>: ( 下載: http://0rz.tw/zramw ): 這本不像是上一份是以文字為主的講義，: 看起來像是上課投影片的集合，可能稍微亂一些。: 這本講解了很多基本的統計學檢定跟模型的寫法，: 如果不熟悉運算式寫法的人應該可以在這本書的練習中獲得許多。: (ps. 此書的進階篇涵蓋的範圍則是比較應用在特定領域，可以先略過。): 到這邊其實應該有能力讀懂一些簡單的code、然後自己寫點東西來玩玩了。: 像是這篇我學長的blog文章:: http://www.everdark.info/2013/01/r_8.html: 簡單的code裡面包含了for迴圈、if/else判斷式、抽樣等等概念，: 基礎內建圖包、最後還有Functional Programming的作法。: 而這篇<坦克問題與平行運算>中所提到的噗友其實就是我啦 XD: http://www.everdark.info/2013/01/r_30.html: 這就是我在讀完上述書籍跟code之後想自己嘗試的第一號作品，: 當然平行化運算的方法就跟我無關 XD: 這是很有成就感的，畢竟你不會第一次寫模擬就成功，: 中間有一些亂七八糟的東西要抓蟲什麼的，: (ex. 如果計算出來是個空的東西拿去賦值會怎樣): 看看說明文件就會學習的比較快。: 接下來就看了一些原文書:: <<25 Recipes for Getting Started with R>>: <<R for Beginners>>: <<An Introduction to R>>: 第一本比較是任務式的，每個篇章有一個要跑的東西或問題，: 然後用R來實現。後兩本就是比較全面性的介紹。: 聽說<<R in a Nutshell>>是本好書，: 是否有看過的先進推薦一下適合哪個程度的學習者?: 進階：: 其實還沒有進階(默): <<The Art of R Programming>>只剛念了一點點。: 因為後來玩R想要寫點別的東西的時候，: 發現R其實還是比較著重在數理統計計算上面，好像也不能包成exe檔，: 就想學個更general的語言，所以目前正在啃Python，: 而兩者之間其實是有套件互通的，所以應該是相輔相成吧。: 打算等Python的入門完成之後讀這幾本書，跟R做個融合:: <<Data Mining with R-Learning with Case Studies>>: <<Data Analysis with Open Source Tools>>: <<Exploring Everyday Things with R and Ruby>>: 目前有訂閱R-bloggers，: 看看有沒有什麼有興趣的package，或是數據可視化的概念可以學習。: 這個部落格 <<數據科學與R語言>> http://xccds1977.blogspot.tw/: 也包含蠻多R的應用，主要在Data Science方面，他也整理了一份推薦的書單。: 以我的學習經歷來說，沒有programming經驗還是可以上手R的，: 只是統計模型的背景要稍微有一點，是說沒有的人來學R的確有點怪 XD: 菜鳥意見，還請先進指導。--","R_Language"
"2866","M.1364963864.A.2AC","Yukirin","問題","Re: 請問R的中文書",2013-04-03 12:37:41,NA,NA,"※ 引述《andrew43 (apan)》之銘言：: : 推 tai34:那請問如果連程式語言都不懂的初學者是要先從程式語言入門    04/02 13:41: : → tai34:還是可以從上述的書直接入門? 因為我有買第一本，但是看不懂  04/02 13:42: : → tai34:程式語言的邏輯與他的用法。                                04/02 13:42: : 推 zmack0905:初學的話還是推fortran.R很自由不過有些""感覺""學不到     04/03 00:11: 如果不懂程式語言，自修 R 應該會很辛苦。: 經驗告訴我你需要的是學習同伴或可請教的對象，: 不然真的會發生「每行程式碼都看不懂，但書已經看完了」的現象。: 去聽用 R 的課吧！對各位來說R可能都不是第一套語言了，
我目前學R大概也才兩三個月吧，
不過講一下沒有programming經驗的人的學習歷程，
可能對類似的人比較有幫助。

背景：
我是唸經濟的碩士，不過因為論文或是報告都是實證研究，
所以對於統計、計量經濟學上的概念都還可以。
在大學\研究所的時候使用的軟體都是STATA，
去年做研究助理的時候要運用前一個學長留下來的code，
才第一次對if/else條件、for、while迴圈有初步的印象。

動機：
因為未來想試試看data analyst或mining的工作，
STATA應該只在少數的學術圈裡有應用，
R應該是更通用且promising的工具。

入手：
倒不是害怕英文，不過我的確入門R的時候找的都是中文書。
因為沒有programming背景，我認為有些概念還是先從熟悉的語言理解，
然後再靠英文的書籍補強完整的概念。

我所找到的第一套講義是台北大學林建甫老師的<<醫學統計與R>>
( 下載:http://web.ntpu.edu.tw/~cflin/)
篇幅不長，文字也很清晰，主要講解R的整個概觀、控制流、資料結構跟簡單的函數，
R的函數講解下方通常會附上程式碼與output，
存活分析的部分如果沒有需要的人可以跳過，
在這份講義裡面我主要不理解的還是apply族的函數，
不過我認為這是因為那時心裡想著「這玩意STATA沒有我應該也用不到吧」的想法。

然後是淡江大學吳漢銘老師的<<統計計算語言R學習手冊>>
( 下載:http://0rz.tw/zramw)
這本不像是上一份是以文字為主的講義，
看起來像是上課投影片的集合，可能稍微亂一些。
這本講解了很多基本的統計學檢定跟模型的寫法，
如果不熟悉運算式寫法的人應該可以在這本書的練習中獲得許多。
(ps. 此書的進階篇涵蓋的範圍則是比較應用在特定領域，可以先略過。)

到這邊其實應該有能力讀懂一些簡單的code、然後自己寫點東西來玩玩了。
像是這篇我學長的blog文章:http://www.everdark.info/2013/01/r_8.html簡單的code裡面包含了for迴圈、if/else判斷式、抽樣等等概念，
基礎內建圖包、最後還有Functional Programming的作法。

而這篇<坦克問題與平行運算>中所提到的噗友其實就是我啦 XDhttp://www.everdark.info/2013/01/r_30.html這就是我在讀完上述書籍跟code之後想自己嘗試的第一號作品，
當然平行化運算的方法就跟我無關 XD

這是很有成就感的，畢竟你不會第一次寫模擬就成功，
中間有一些亂七八糟的東西要抓蟲什麼的，
(ex. 如果計算出來是個空的東西拿去賦值會怎樣)
看看說明文件就會學習的比較快。

接下來就看了一些原文書:
<<25 Recipes for Getting Started with R>>
<<R for Beginners>>
<<An Introduction to R>>
第一本比較是任務式的，每個篇章有一個要跑的東西或問題，
然後用R來實現。後兩本就是比較全面性的介紹。
聽說<<R in a Nutshell>>是本好書，
是否有看過的先進推薦一下適合哪個程度的學習者?

進階：
其實還沒有進階(默)
<<The Art of R Programming>>只剛念了一點點。
因為後來玩R想要寫點別的東西的時候，
發現R其實還是比較著重在數理統計計算上面，好像也不能包成exe檔，
就想學個更general的語言，所以目前正在啃Python，
而兩者之間其實是有套件互通的，所以應該是相輔相成吧。

打算等Python的入門完成之後讀這幾本書，跟R做個融合:
<<Data Mining with R-Learning with Case Studies>>
<<Data Analysis with Open Source Tools>>
<<Exploring Everyday Things with R and Ruby>>

目前有訂閱R-bloggers，
看看有沒有什麼有興趣的package，或是數據可視化的概念可以學習。
這個部落格 <<數據科學與R語言>>http://xccds1977.blogspot.tw/也包含蠻多R的應用，主要在Data Science方面，他也整理了一份推薦的書單。

以我的學習經歷來說，沒有programming經驗還是可以上手R的，
只是統計模型的背景要稍微有一點，是說沒有的人來學R的確有點怪 XD
菜鳥意見，還請先進指導。

--","R_Language"
"2867","M.1364926499.A.A5B","andrew43","問題","Re: 請問R的中文書",2013-04-03 02:14:55,NA,NA,"※ 引述《andrew43 (apan)》之銘言：: 標題: Fw: [問題] 請問R的中文書: 時間: Mon Apr  1 08:36:08 2013:: ※ [本文轉錄自 Statistics 看板 #1FS0EuGe ]:: 作者: andrew43 (Myrmarachne) 看板: Statistics: 標題: Re: [問題] 請問R的中文書: 時間: Mon Mar 26 13:50:44 2012:: ※ 引述《bokyn (haha)》之銘言：: : http://www.books.com.tw/exep/prod/booksfile.php?item=0010486896: : 最近想自學R: : 請問這本各位有看過嗎?不知這本如何? 謝謝: : http://www.books.com.tw/exep/prod/booksfile.php?item=0010371622: : 另外這本書呢? 剛剛爬文有看到版有說這本...:: 以上二本我並沒有看過，但我大力推這本: http://www.books.com.tw/exep/prod/china/chinafile.php?item=CN10300899:: 優點：文意清楚、應用內容廣、從統計原理到操作 R 都有解說、:       統計觀念嚴謹（個人認為這點許多台灣書要加油）、:       數學排版極優、不貴、CP 值極高；: 缺點：簡體中文、程式或統計的用詞與台灣習慣不同、:       不適合統計學初學者（如 ANOVA 還不認識）及:       對程式語言完全沒有概念者（如對 a=a+1 無感）。:: 我認為這是一本值得買的書，但可能不是唯一一本教你用 R 的書。: 話說回來，學一種程式語言本來就不是一兩本書可以解決的。:: --: http://apansharing.blogspot.com/:: --","R_Language"
"2868","M.1364920563.A.CA9","Wush978","問題","Re: 請問R的中文書",2013-04-03 00:36:00,NA,NA,": 推 tai34:那請問如果連程式語言都不懂的初學者是要先從程式語言入門    04/02 13:41: → tai34:還是可以從上述的書直接入門? 因為我有買第一本，但是看不懂  04/02 13:42: → tai34:程式語言的邏輯與他的用法。                                04/02 13:42發表一下我的個人看法

---

我認為學程式的目的是要解決實際的問題，

有額外興趣的人，或是靠這個吃飯的人，才需要繼續往下鑽。

所以我建議完全不懂的初學者，可以先想清楚自己要用程式解決什麼問題。



一個不好的例子：

- 我要教作業

因為作業有很多種，所以這樣的答案無法闡明要做的事情)

一個好的例子:

- 我要做統計分析



透過這樣的描述，有經驗的版友就可以建議你適當的工具。

例如要做分析，我就不會推薦他學PHP。

而要spider上網抓資料，我就不建議用R。

---

若確定要學R 了，

我建議你先依照　[分享] 十個給新手的R tips

熟悉R 的環境後，直接嘗試解決你要解決的問題。

現在網路上有很多資源可以google。就算是複製貼上也好，也比沒動手來的強。

唯有一邊解決問題，一邊學，你才有動力繼續往前走。

至於程式的基礎，直到你非常非常有興趣了，

（例如你在解決實際問題的過程中，很想知道為什麼）

再去弄本書來讀也不遲。

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2869","M.1364915485.A.3DC","Wush978","分享","十個給新手的R tips",2013-04-02 23:11:22,NA,NA,"[關鍵字]: R

[出處]:http://lamages.blogspot.tw/2013/04/top-10-tips-to-get-started-with-r.html[重點摘要]:

1. 要有強烈的動機。
2. 動手下載和安裝R。
3. 要先熟悉R的說明文件。
4. 再學怎麼把資料匯入R。
5. 嘗試了解R的資料結構。
6. 想辦法畫些圖。這很有成就感！！
7. 開始練習重構資料。
8. 試著把code寫到檔案中。
9. 練習自己寫R 的函數。
10. 最後，要整理和說明自己的R 程式。

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2870","M.1364776576.A.925","andrew43","情報","Fw: R 演習室開張了",2013-04-01 08:36:15,NA,NA,"※ [本文轉錄自 Statistics 看板 #1FVfE_px ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: [情報] R 演習室開張了
時間: Fri Apr  6 14:57:00 2012

各位先進好。

在下最近開始進行一項工作稱為「R 演習室」。http://apansharing.blogspot.com/p/r-demo.html「R 演習室」列系影片是 R 在統計學上應用的教學影片，
內容主要是利用 R 進行常見的統計分析或檢定。
預設觀眾是最初階的 R 使用者。
建議採用 HD 畫質觀看。
所有影片一律以 CC BY-SA 3.0 License 授權。

目前影片還很少，而且疏於練習所以口條很差。
有任何建議歡迎留言或來信至[email<U+00A0>protected]。

--","R_Language"
"2871","M.1364776569.A.C62","andrew43","問題","Fw: 請問R的中文書",2013-04-01 08:36:08,NA,NA,"※ [本文轉錄自 Statistics 看板 #1FS0EuGe ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: Re: [問題] 請問R的中文書
時間: Mon Mar 26 13:50:44 2012※ 引述《bokyn (haha)》之銘言：: http://www.books.com.tw/exep/prod/booksfile.php?item=0010486896: 最近想自學R: 請問這本各位有看過嗎?不知這本如何? 謝謝: http://www.books.com.tw/exep/prod/booksfile.php?item=0010371622: 另外這本書呢? 剛剛爬文有看到版有說這本...以上二本我並沒有看過，但我大力推這本http://www.books.com.tw/exep/prod/china/chinafile.php?item=CN10300899優點：文意清楚、應用內容廣、從統計原理到操作 R 都有解說、
      統計觀念嚴謹（個人認為這點許多台灣書要加油）、
      數學排版極優、不貴、CP 值極高；
缺點：簡體中文、程式或統計的用詞與台灣習慣不同、
      不適合統計學初學者（如 ANOVA 還不認識）及
      對程式語言完全沒有概念者（如對 a=a+1 無感）。

我認為這是一本值得買的書，但可能不是唯一一本教你用 R 的書。
話說回來，學一種程式語言本來就不是一兩本書可以解決的。

--http://apansharing.blogspot.com/--","R_Language"
"2872","M.1364776535.A.CBB","andrew43","程式","Fw: 以 R 運算常見的檢定",2013-04-01 08:35:33,NA,NA,"※ [本文轉錄自 Statistics 看板 #1EhUOG90 ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: [程式] 以 R 運算常見的檢定
時間: Mon Oct 31 08:04:29 2011

各位先進好.

不說廢話, 我製作了一份以 R 運算常見的統計檢定文件,
適合懂檢定但不知如何以 R 運算的朋友.
文件以自由授權方式分享, 也敬請先進們指點.http://www.scribd.com/doc/70943527/Statistical-computing-by-using-R--http://apansharing.blogspot.com/--","R_Language"
"2873","M.1364776522.A.6CF","andrew43","問題","Fw: 迴歸模型類別變數之綜合檢定",2013-04-01 08:35:21,NA,NA,"※ [本文轉錄自 Statistics 看板 #1DZB3Jf3 ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: Re: [問題] 迴歸模型類別變數之綜合檢定
時間: Fri Mar 25 23:12:16 2011

謝謝上回文章中諸位先進指教，我找到了一些做法進行聯
合檢定。以下是一個典型的二因子普瓦松迴歸，同時考慮
交互作用及加上一個 offset 作為事件發生的調整項。過
程以 R 進行操作。


# 定義依變數 y，分 4 群有不同期望值的普瓦松亂數
y <- c(rpois(25, 1), rpois(25, 1.1), rpois(25, 3), rpois(25, 1.2))

# 定義第一個因子 f1，有 4 個 level
f1 <- gl(4, 25, label=c(""a"",""b"",""c"",""d""))

# 定義第二個因子 f2，有 5 個 level
f2 <- gl(5, 1, 100, label=c(""h"",""i"",""j"",""k"",""l""))

# 定義 offset
ot <- abs(rnorm(100, 10))

# Poisson regression 模式
mod <- glm(y~f1*f2+offset(log(ot)), family=poisson); summary(mod)

# 檢定全模式是否至少有一項因子或交互作用有效
## 分別使用 LR test 及 Wald test
library(lmtest); lrtest(mod); waldtest(mod)

# 以 LR test 檢驗每項因子及其交互作用的效應

## 每次檢驗只從完整模式中丟出一項因子（概念相似於 Type III SS）
drop1(mod, ~., test=""Chisq"")
## 下列同上列功能
library(car); Anova(mod, type=""III"")

## 每次檢驗丟出所有其它效果及相關之交互作用（相似於 Type II SS）
library(car); Anova(mod, type=""II"")

## 每次檢驗依序累加丟出因子（相似於 Type I SS）
anova(mod)


# 使用 Wald test
## 只是在 Anova() 多加選項，故可套用在先前列過的 Anova() 中
library(car); Anova(mod, type=""III"", test.statistic='Wald')

假如要做更細微的 LR test 或 Wald test 操作，可使用
lmtest package 中的 lrtest() 和 waldtest()。但個人
使用以上方法是最快最方便的，一次全交待清楚。


如果我有哪裡錯了，還盼高手指點。

--http://apansharing.blogspot.com/--","R_Language"
"2874","M.1364776508.A.EC3","andrew43","問題","Fw: 請問R語言",2013-04-01 08:35:07,NA,NA,"※ [本文轉錄自 Statistics 看板 #1CxXog2r ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: Re: [問題] 請問R語言
時間: Thu Nov 25 16:21:59 2010※ 引述《Johnpolo (隱行)》之銘言：: ※ 引述《Johnpolo (隱行)》之銘言：: : 請問R語言的hist的語法: : 假如要畫頻率圖: : 那個hist(x,brokes,.....): : x是不是一定要數值: : 可是我現在有一筆excel的資料: : 要如何套用劃出hist的頻率圖: 幫我看到底錯在哪裡？: > x<- read.csv(""C:/test/Mid_Ex.csv"", header=FALSE,: col.names=c(""Year"",""Month"",""SST"")): > hist (x ,breaks=12,freq=TRUE,col= 3,labels=TRUE): 錯誤在hist.default(x, breaks = 12, freq = TRUE, col = 3, labels = TRUE) ::   'x' must be numeric教你一個比較直覺的方法.

先在excel中把你的x排成一整個直行,
用滑鼠配合 shift 鍵把所有的值選起來, 按複製.

再到 GNU R 中, 輸入
x<-scan()
並按 enter 鍵, 再貼上方才在 excel 中已經複製的資料,
最後多按一個 enter 鍵完成 scan() 輸入.

如此一來, 你就有一個一維的向量 x 了, 即丟給 hist() 用吧.

--http://apansharing.blogspot.com/--","R_Language"
"2875","M.1364776498.A.F27","andrew43","程式","Fw: R跑出來的結果如何存檔?",2013-04-01 08:34:57,NA,NA,"※ [本文轉錄自 Statistics 看板 #1CZewqoB ]作者: andrew43 (Myrmarachne) 看板: Statistics
標題: Re: [程式] R跑出來的結果如何存檔?
時間: Tue Sep 14 04:50:56 2010※ 引述《mark038 (Mark)》之銘言：: 不過我希望可以存到一個tab隔開的file內: 請問要下什麼指令: 謝謝!: [程式範例]: (xy <- cbind(x = 1:10, y = c(1:3, 8:5, 8:10))):  w1 <- c(0,0,0,1,1,1,1,1,0,0):  cov.wt(xy, wt = w1) # i.e. method = ""unbiased"":  cov.wt(xy, wt = w1, method = ""ML"", cor = TRUE):: -----------------------------------------------------------------------------最常用的就是 write.table() 和 write.csv().
你要 tab 分隔就 write.table(foo, file=""filename"", sep=""\t"")
前題是只能最多是一個二維資料.

但如要存 cov.wt 所產生的 list 資料, 因為不只一個 matrix,
可能直接用 save() 方便些.
save() 預設產生二進位資料.
想要存成純文字檔案, 可加上 ascii=T

--http://apansharing.blogspot.com/--","R_Language"
"2876","M.1364741273.A.DE5","Cayley","情報","20130401 MLDM Monday 會前通知",2013-03-31 22:47:51,NA,NA,"Dear All：

下周一 (2013/04/01) 在創立方，會有我們第二十二次的 MLDM Monday 的聚會！

本次是 「程式交易經驗分享系列」的第四場分享

講題為「程式交易經驗分享系列(4) 下單機設定及系統回顧」

由 Phillip Z 來為我們分享

本次的演講大綱大致如下：
1.下單大師萬用API設定Live Demo
2.程式交易開發流程及架構
3.個人程式交易歷程和策略介紹
4.以解構方式思考

投影片：http://www.slideshare.net/philipzh/4-17551815歡迎有興趣的朋友們一起來參加唷！

這次聚會的報名網址在:http://www.meetup.com/Taiwan-R/events/110355972/?a=cr1_upd&rv=cr1Taiwan R User Group 全體 Officer 邀請您


---
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Phillip Z 先生是一位業餘的程式交易玩家

擁有自己打造的回測與交易系統，並且，他也不吝於跟大家分享他的系統與訊號

另外，他同時也是 TradingBot 的作者http://www.facebook.com/tradingbot是一位具有高度實務經驗的程式交易玩家

歡迎大家可以到現場跟他交流一下實務上遇到的問題與經驗唷！

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

另外，同一個系列的前兩次演講的影片，可以在下方的網址看到http://www.youtube.com/watch?v=njboCvf1XWIhttp://www.youtube.com/watch?v=XubgiVCl9iohttp://www.youtube.com/watch?v=0lKKAMX11qI而關於 R 上做交易策略回測的工具 quantmod

其相關的演講影片，也可以在下方的網址看到http://www.youtube.com/playlist?list=PLM7HGQkDNOHtUpVGfwhBMkBITovffU6g0&feature=view_all~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

另外，在 Phillip 講完四個 Talk 之後

往後的 tradeR's Series 極可能會由 c3h3 接續 11 月 quantmod 的講題

繼續為大家介紹 quantmod 和 quantstrat 套件的使用

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

--","R_Language"
"2877","M.1364720206.A.CE5","Wush978","分享","Lots of data != Big Data",2013-03-31 16:56:42,NA,NA,"關鍵字: R, Big Data

出處:http://blog.revolutionanalytics.com/2013/03/lots-of-data-big-data.html重點節錄

- 不好的模型，無論資料多或少，都一樣不好。Example: [2009 ASA
challenge](http://stat-computing.org/dataexpo/2009/).- 利用抽樣，可以更快的知道資料模型配適的結果。當樣本數足夠多的時候，得到的模型
會差不多。


![](http://revolution-computing.typepad.com/.a/6a010534b1db25970b017ee9c43f87970d-800wi)- 如果你還在尋找適合的模型，那用樣本資料可以加速你的研究速度。用全部的資料，只
會浪費你的時間。

- 可以利用Revolustion Analytics 的
[RevoScaleR](http://www.revolutionanalytics.com/products/enterprise-big-data.php)套件
    - 全部的資料會被轉換成.xdf binary
    - RevoScaleR會利用rxDataStep函數來抽樣本

- 抽樣的能力，是決定你能否在時間和精準度之間取得平衡的關鍵。


--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2878","M.1364646940.A.882","gsuper","程式aorder(a,1),","Fw: 的問題 (R語言)",2013-03-30 20:35:39,NA,NA,"※ [本文轉錄自 Statistics 看板 #1D3WQWHH ]作者: gsuper (統計的巴比倫塔) 看板: Statistics
標題: [程式] a[order(a[,1]),] 的問題
時間: Sun Dec 19 21:20:29 2010


    D_ID SNP_ID     fac          RACE  CHR  CHR_LOCATION MARKER_EFFECT HAN_ABLE
131 ""0""  ""12061474"" ""0_12061474"" ""CEU"" ""1""  ""202655937""  ""RISK""        ""0.922""
195 ""0""  ""2476601""  ""0_2476601""  ""CEU"" ""1""  ""114179091""  ""PROTECTIVE""  ""0.057""
126 ""0""  ""3741208""  ""0_3741208""  ""CEU"" ""11"" ""2126350""    ""PROTECTIVE""  ""0.167""
278 ""0""  ""1701704""  ""0_1701704""  ""CEU"" ""12"" ""54698754""   ""PROTECTIVE""  ""0.278""
123 ""0""  ""2292239""  ""0_2292239""  ""CEU"" ""12"" ""54768447""   ""PROTECTIVE""  ""0.256""
127 ""0""  ""3764021""  ""0_3764021""  ""CEU"" ""12"" ""9724895""    ""RISK""        ""0.700""
197 ""0""  ""17673553"" ""0_17673553"" ""CEU"" ""16"" ""11149407""   ""RISK""        ""0.884""
196 ""0""  ""2903692""  ""0_2903692""  ""CEU"" ""16"" ""11146284""   ""RISK""        ""0.733""
194 ""0""  ""725613""   ""0_725613""   ""CEU"" ""16"" ""11077184""   ""RISK""        ""0.756""
121 ""0""  ""1893217""  ""0_1893217""  ""CEU"" ""18"" ""12799340""   ""PROTECTIVE""  ""0.189""
122 ""0""  ""1990760""  ""0_1990760""  ""CEU"" ""2""  ""162832297""  ""RISK""        ""0.689""
125 ""0""  ""3087243""  ""0_3087243""  ""CEU"" ""2""  ""204447164""  ""RISK""        ""0.789""
133 ""0""  ""17388568"" ""0_17388568"" ""CEU"" ""4""  ""123548812""  ""PROTECTIVE""  ""0.111""

----------------------------------------------------------

我現在想要做的事情是先按照 D_ID 排序然後再按照 CHR 排序再按照 CHR_LOCATION 排序我想了很久
還是不知道要怎麼寫最好

當然用3個迴圈和一堆判斷式是可以做
但我想是不是有甚麼更簡單的寫法可以用

請教各位程式高手
是否有較簡單的寫法?

-----------------------------------------------------------

順便講一下
第三個 column 是我最近想出來的一種很不錯的寫法
在跨多張 table 處理資料
又需要有個 Primary Key 的時候很好用
簡單來說就是建 index , R 的 index array 超好用
有興趣的人可以參考一下

--

--","R_Language"
"2879","M.1364646926.A.0C2","gsuper","R程式","Fw: 寫出含文字的函數?",2013-03-30 20:35:25,NA,NA,"※ [本文轉錄自 Statistics 看板 #1DSTy6Wc ]作者: gsuper (統計的巴比倫塔) 看板: Statistics
標題: Re: [R程式] 寫出含文字的函數?
時間: Sat Mar  5 14:58:11 2011



程式
============================================================
f <- function(input)
{ formula <- ""log2(input)+1/15""

     if(is.character(input)) {gsub(""input"",input,formula)}
else if(is.numeric(input))   {eval(parse(text=formula))}
else                         { return(""資料格式不正確"")    }
}


#######
結果
#######

a <- 1
b <- ""x""
c <- ""y""
d <- as.factor(10)

SEE <- list(a=f(a),b=f(b),c=f(c),d=f(d))

--

--","R_Language"
"2880","M.1364646786.A.452","gsuper","筆記","Fw: R的字串處理",2013-03-30 20:33:05,NA,NA,"※ [本文轉錄自 Statistics 看板 #1CA5vrBC ]作者: gsuper (統計的巴比倫塔) 看板: Statistics
標題: [程式] R的字串處理
時間: Mon Jun 28 16:33:54 2010

[軟體程式類別]:
R

[程式問題]:
資料處理

[軟體熟悉度]:
中(3個月到1年)

[問題敘述]:

最近常在處理字串
發現自己會的 function 很不夠用
想多學點 function
我列出一些我常用的
希望能拋磚引玉
請各位高手能教我一些高招

[程式範例]:

前言 :

R 的字串處理 ,
要小心注意 character , factor , numeric 這三種物件的誤轉換和混用
factor 是一種很討厭的物件 ,
因為它在轉成數字和字串的時候 ,
常常會變成跟原本不一樣的東西 ,
建議資料處理的過程 ,
預設用 matrix 和 character 兩種而避免使用 data.frame

------------------------------------------------------------------
1.字串黏合
  paste   (""A"",""B"",sep="""")               ---->>> ""AB""

2.字串切割
  strsplit(""A.B"",split=""."",fixed=T)      ---->>> ""A"" ""B""

3.精確穩合
  x <- c(""AB"",""AA"")
  x %in% ""AB""                            ---->>> TRUE FALSE

4.部份吻合 + (回傳 which)
  x <- c(""AB"",""AA"")
    grep(""B"",x)                          ---->>> 1
    grep(""A"",x)                          ---->>> 1 2
    grep(""B"",x,value=T)                  ---->>> ""AB""
    grep(""B"",x,value=T,invert=T)         ---->>> ""AA""
    grep(""C"",x)                          ---->>> integer(0)
                                         #若目的是要找 index , 建議改用 grepl

4-2.部份吻合 + (回傳判斷式)
  x <- c(""AB"",""AA"")
    grepl(""B"",x)                         ---->>> TRUE FALSE

4-3.部份吻合 + (回傳位置) + (回傳??)
  x <- c(""BBB"",""AAA"",""CCB"")
  regexpr(""B"",x)                         ---->>>  1 -1  3 (第一次 ""hit"" 的位置)
                                                  1 -1  1 (有無 ""hit"")

5.子字串
  substr(""human123456"",start=1,stop=5)   ---->>> ""human""

  !!注意!! 4-3 的 regexpr
  與這個 substr 結合起來 ,
  在寫 網頁Parser 的時候很好用
  regexpr 能定義出 statr=多少

  所謂的網頁Parser
  就是你去下載某些 html 檔案
  檢視原始碼
  然後找出你需要的資料
  再找出一些能 cut 的規則
  用 strsplit 搭配 TR , TD 之類的字串去切出你要的資料


6.特定字元取代 (1st hit)
  x <- ""AABB""
  sub(""A"",replacement=""C"",x)           ---->>>  ""CABB""

6-2.全部特定字元取代 (global hit)
  x <- ""AABB""
  gsub(""A"",replacement=""C"",x)           ---->>>  ""CCBB""

7.計算字串長度
  ### 盡量別用這個 fuction
  x <- c(""A"",""AAA"",""AAAAA"")
  nchar(x)                               ---->>> 1 3 5nchar(as.factor(x))                    ---->>> 1 1 18.多重字元(串)貼合 (矩陣內)
  x <- matrix(letters[1:6],2,3)
  apply(x,1,paste,collapse="""")           ---->>> ""ace"",""bdf""
  apply(x,2,paste,collapse="""")           ---->>> ""abc"",""def""

9. 字元反轉
   x <- c(""A B"",""*."")
   sapply(lapply(strsplit(as.character(x), NULL), rev), paste, collapse="""")
   [1] ""B A""  "".*""

10.字元檢查
   x <- c(""A B"",""*."")
   unique(unlist(strsplit(as.character(x),split="""",fixed=T)))
   [1] ""A""  "" ""  ""B""  ""*""  "".""

-----------------------------------------------------------
Regular expression : 字串模糊比對 , 或特定字母排列模式的抓取

在R內
基本上分成3種
Basic regular expression    (BRE)   --> extended = FALSE
Extended regularexpression  (ERE)   --> extended = TRUE (預設)
perl-like                   (perl)  --> perl     = TRUE

雙冒號代表我測試過且成功
單冒號代表網路上抓下來或是測試失敗
--------------------------------------------------------------
通用部分

 {,}
 *        :: {0, }   至少出現0次, 最多無限多次
 +        :: {1, }           1        無限多次
 ?        :: {0,1}           0            1

 [Aa]     :: A 或 a
 [^1-9]   :: not 1:9
 [1-9]    :: 1:9
 [a-z]    :: a b c ... z
 [A-Z]    :: A B C ... Z
 [a-zA-Z] :: 所有英文字母
 [W-z]    :: WXYZabc....z
 [w-Z]    :: 不可使用!

 (AB)     :: 括號一次收集多個字元  ### 一種延伸字串的寫法
             舉例 :

             x <- c(""company"",""companies"",)
             可以用以下兩種寫法
             1. grep(""[company|companies]"",x)
             2. grep(""compan(y|ies)"",x)
             第二種在大資料的時候會比較快

 $        :: 字尾限定
 ^        :: 字首限定

 |        :: ""ABC|EFG"" --> grep(""ABC""or""DEF"",x)
 .        :: 任意字元

-----------------------------------------------------

ERE , extended = TRUE


digit (數字)
 \\d         :: [0-9]
 \\D         :: [^0-9]
[[:digit:]]  :: 同上
[^[:digit:]] :: 同上


blank (空白)
 \\s         :: 能切開 "" "" 或 ""\t""
 \\S         :: 切開非空白及 tab 的字元
[[:blank:]]  :: 同上
[^[:blank:]] :: 同上


AlphaBet + Digit (正常字元)
 \\w         :: [0-9a-zA-Z]
 \\W         :: [^0-9a-zA-Z]
[[:alnum:]]  :: 同上
[^[:alnum:]] :: 同上


AlphaBet (英文字元)
[[:alpha:]]  :: 同上
[^[:alpha:]] :: 同上


特殊符號
[[:punct:]]  :: ! "" # $ % & ' ( ) * + , - .
                / : ; < = > ? @ [\] ^ _ ` { | } ~
[^[:punct:]] :: 英文字 , 數字 (注意! , \t 和 \n 都會被切掉)

注意 ! 正斜線這個符號很容易與其他 regular expr 混淆
必須仔細檢查 ""\"" 存在的字串



可印符號
[[:print]] :: 所有字元 (數字,字母,特殊符號,空白)
              \n , \t , \001 除外


16進位字元
[[:xdigit:]] :: 16進位有關英文或數字
                [0-9a-fA-F]


大小寫英文字元
[[:upper:]]  :: 大寫英文字元 [A-Z]
[^[:upper:]] :: 非大寫 [^A-Z]
[[:lower:]]  :: 小寫 [a-z]
[^[:lower:]] :: ^[a-z]

注意 ""\t"" 還是會被留下來


空白和換行等
[[:space:]] :: "" "" , \t , \n , \f , \r
               (\f : 換行但不回到行頭)
               (\r : 回到行頭並消除此行內所有的文字)
               P.S. 這兩種不常用,當豆知識即可



[[:graph:]] :: [A-Za-z0-9]再加[[""punct""]]


----------------------------------------------------------
perl = TRUE


\\w :     [A-Za-z0-9_]
\\W :     [^A-Za-z0-9_]
\\s :     [\t\n\r\f]
\\S :     [^\t\n\r\f]
\\d :     [0-9]
\\D :     [^0-9]




----------------------------------------------------------
regular expression 工事中 (未完)

感覺這篇被我當筆記來用了

reference:
1.http://www.rtfiber.com.tw/~changyj/2.http://www.stat.psu.edu/~dhunter/R/html/base/html/regex.html----------------------------------------------------------

大小寫切換

TRUTH <- c(""Abc"",""ABC"")
a <- gsub(""(\\w)"",""\\L\\1"",TRUTH,perl=TRUE)  ---> ""abc"",""abc""
b <- gsub(""^(\\w)"",""\\U\\1"",a,perl=TRUE)     ---> ""Abc"",""Abc""同上 , 非常神秘的 Bug !?T123 <- c(""Tgfbr1"",""Cd320"",""Ndrg3"",""Aldoa"",""Bckdk"",""Tmed3"",""Hfe2"")> gsub( ""(\\w)"", ""\\L\\1"" , T123 ,perl=T)
[1] ""LTLgLfLbLrL1""       ""LCLdL3L2L0""         ""LNLdLrLgL3""
[4] ""LALlLdLoLa""         ""LBLcLkLdLk""         ""LTLmLeLdL3""
[7] ""LHLfLeL2""> gsub( ""(\\w)"", ""\\L\\1"" , T123 ,perl=TRUE)
[1] ""tgfbr1""    ""cd320""     ""ndrg3""     ""aldoa""     ""bckdk""     ""tmed3""
[7] ""hfe2""

---------------------------------------

消除多餘空白> x <- ""Hey! Apple           ""> gsub("" {2,}"","""",x)[1] ""Hey! Apple""        ### 容忍一個空白 , 但兩個以上至無限大則消除

---------------------------------------

在處理混合字串與數字的資料矩陣的時候
常常需要在 data.frame 和 matrix 之間切換
有時候會字串會被一些預設的空白字元夾住

ex:

""1"" , ""15"" , ""333""

經過轉換以後

""  1"" , "" 15"" , ""333"" (fit 最長字串的長度)> DATA <- gsub(""^ *| *$"",as.matrix(DATA))---------------------------------------
### 一些參考的 pattern

1. ""^\\d+$""                  ### 純數字的欄位 ###
2. ""^ *| *$""                 ### 字首字尾的空白(搭配 gsub) ###
3. ""^[0][\\.]{0,1}[0]*$""     ### ""0"" ""0.0"" ""0.00"" ""0.000"" ""0.0000"" ,
                                 bug 是 ""0."" ""00""

####################################################################
放一些 linux 下的好用指令
光用 R 來做字串處理不夠用
原因在於若處理的檔案太大
光是讀進 R 就累死人
這邊主要是應用在檔案減肥


文字檔案
rs123\t0|1:0000\tAAAA
rs456\t1|0:0000\tBBBB

###################
橫向grep[-w : word]
     [-f : 給 pattern file]
     [-F : 精確比對]         ### 若要搜尋固定字串 , -F必下 (快超多)

1. cat 文字檔案|grep -w    'rs'      ### 沒東西
2. cat 文字檔案|grep -w -F 'rs123'   ### 出第一行
3. car 文字檔案|grep -w    '^rs.*$'  ### 二行皆出

###################
縱向cut[-d : 用tab切開會是3個column的矩陣]

1. cut -d'\t' -f1,2 原檔 > 新檔   ### 留下 1 and 2 columns

###################
橫向sed1. sed -n '6,$p'    原檔 > 新檔   ### 從第六行開始 , print 至尾行
                                  ### 或可理解成, 把 1~5行切掉

2. sed 's/:\S*/HAHA/g' 原檔 > 新檔   ### s=取代 , g=global
                                     ### 把紅色的正規 pattern 取代成綠色


###################

當檔案有 10000000 rows , 讀不進 R 怎辦?
就算讀進 R , 資料太大一直 SWAP 電腦動不了怎麼辦?

經過一番苦戰
我建議以下的思考方式


0. 先透過上述方式
   直接在終端機把檔案減肥

1. 檔案列數 <- system(""wc -l 檔案"",intern=TRUE)
   LOOP <- ceiling(檔案列數 / 5000)

   for(g in 1:LOOP)                                    ### 用while可省前兩行
   { tmp <- read.table(檔案,skip=5000*(g-1),nrow=5000) ### 但我只熟 for
     expr(中間的各種處理)
     write.table(tmp,g)
     Sys.sleep(5)                                     ### 給一點時間讓電腦回氣
   }

2. system(""cat小檔案1 小檔案2 小檔案3 .... > 總檔案"")   ### 檔案 rbind()



雖然不是最快的方法
但 Over night 是一定可以把檔案處理完的

以上
--","R_Language"
"2881","M.1364646766.A.115","gsuper","筆記","Fw: R 的設定-平行運算 (CPU)",2013-03-30 20:32:45,NA,NA,"※ [本文轉錄自 Statistics 看板 #1D-QxyXv ]作者: gsuper (統計的巴比倫塔) 看板: Statistics
標題: [問題] R 的設定 (CPU)
時間: Thu Jun 16 15:21:29 2011



請問一下

再 linux 下有沒有辦法把 CPU 的多個核心分配給 R?

因為我的電腦有8核

可是每次都只有一個 core 跑 100%

是否有辦法設定成多核運算?

---------------------------------------

我有查到一個 ""multicore"" 的 package

可是看起來好難...
--","R_Language"
"2882","M.1364561519.A.384","Wush978","分享","簡易的建立及使用arima model",2013-03-29 20:51:56,NA,NA,"關鍵字: time series, arima, forecast

# 簡介

ARIMA(Autoregressive Integrated Moving Average model)是時間序列分析中很基礎的

一種模型。使用上需要去調整模型的order

# 建立模型

給定一個R 的時間序列 x, 已經包含x 的時間序列z:

```
x # 一個time series
z <- ts(c(x,rep(NA,m),y), frequency=??, start=??) # z = c(x, ???, y)
```

我們可以先依據x 來建立模型

```
library(forecast)
fit <- auto.arima(x)
```

# 預測

```
forecast(fit, h = 5) # 預測之後五筆資料
```


# 更新資料

如果又有新的觀測值(ex: z)，可以依照以下的策略來更新模型

## 不更動模型

```
fit.update <- Arima(z, model = fit)
```

## 重新估計參數，但是不更改模型的order

```
fit.update <- Arima(z, order = fit$arma[c(1,6,2)])
```

## 完全重新估計

```
fit.update <- auto.arima(z)
```

# 知識來源

-http://stats.stackexchange.com/users/159/rob-hyndman--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
"2883","M.1364517882.A.408","MIZUYAMA","問題","如何建構這個問題的程式",2013-03-29 08:44:39,NA,NA,"[問題類型]:
程式諮詢(我想用R 做某件事情，但是我不知道要怎麼用R 寫出來)

[軟體熟悉度]:
使用者(已經有用R 做過不少作品)

[問題敘述]:
我目前在想要畫一筆資料的趨勢圖
但這個資料有21個項目 也就是說畫成圖有21條線
為了圖的清楚與判讀 我決定""最多""改成畫5條線
也就是說 我的圖可以畫1~5條 隨意選
而要畫得項目則由使用操作者決定要哪些

譬如   時間   項目1  項目2  .....   項目21
        1      A1     B1             U1
        2      A2     B2             U2
        ...    ...   ...            ...
       100     A100   B100           U100

資料時間不只一百筆
另外 項目A~U都是數字
譬如我可以選 時間 49:70 畫 B G H F四條線在這段時間的趨勢
但是我現在對於這問題完全找不到下手點
因為以前我都用先建成矩陣 再畫圖
可是由於不一定畫5條  矩陣維度就會變
而且又不知道使用者會想畫哪幾項目
想請問板上高手的意見


[程式範例]:
構想中 暫無

--","R_Language"
"2884","M.1364448745.A.011","Wush978","公告","初版版務相關事項",2013-03-28 13:32:21,NA,NA,"大家好

以下是我申請開版時，對於版務的初步規劃，

大家如果有任何狀況，還請不吝指正。

---

初版版規:
    1. 禁止和R無關的文章：刪文處理
    2. 禁止注音文、火星文：刪文處理
    3. 禁止明顯錯字佔文章內容超過 1%、不使用標點符號的文章：
        鎖文後三天內沒改善則砍文
    4. 屢犯者視情況加重處罰
        1. 基本上以一個月為考量範圍
        1. 屢犯第一條：劣文 + 水桶一週。


精華區初步架構表:

           1.版規
           2.R的參考網站、電子書及聚會
           3.R技術
             1.基本使用
             2.R 和資料庫
             3.R繪圖
             4.統計分析套件
             5.R擴充和效能

--
歡迎加入 Taiwan R User Group :http://www.facebook.com/Tw.R.User我們每週一都有在「政大公企中心(台北市金華街187號)西樓WB05」
舉辦Machine Learning / Data Mining Monday:
報名http://www.meetup.com/Taiwan-R/聚會影片https://www.youtube.com/user/TWuseRGroup--","R_Language"
